parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MCp7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Headers=a,exports.Request=m,exports.Response=A,exports.fetch=x,exports.DOMException=void 0;var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function e(t){return t&&DataView.prototype.isPrototypeOf(t)}if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function n(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function i(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader,r=u(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=u(e);return e.readAsText(t),r}function l(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?"string"==typeof r?this._bodyText=r:t.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:t.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():t.arrayBuffer&&t.blob&&e(r)?(this._bodyArrayBuffer=c(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||o(r))?this._bodyArrayBuffer=c(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||("string"==typeof r?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(t,e){t=n(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},a.prototype.delete=function(t){delete this.map[n(t)]},a.prototype.get=function(t){return t=n(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(n(t))},a.prototype.set=function(t,e){this.map[n(t)]=s(e)},a.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),i(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),i(t)},t.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function m(t,e){var r=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function v(t){var e=new a;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function A(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];A.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})};var E=self.DOMException;exports.DOMException=E;try{new E}catch(g){exports.DOMException=E=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},E.prototype=Object.create(Error.prototype),E.prototype.constructor=E}function x(e,r){return new Promise(function(o,n){var s=new m(e,r);if(s.signal&&s.signal.aborted)return n(new E("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:v(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;o(new A(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.onabort=function(){n(new E("Aborted","AbortError"))},i.open(s.method,s.url,!0),"include"===s.credentials?i.withCredentials=!0:"omit"===s.credentials&&(i.withCredentials=!1),"responseType"in i&&t.blob&&(i.responseType="blob"),s.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&s.signal.removeEventListener("abort",a)}),i.send(void 0===s._bodyInit?null:s._bodyInit)})}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=a,self.Request=m,self.Response=A);
},{}],"aSor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=L,exports.hydrate=M,exports.h=exports.createElement=f,exports.Fragment=h,exports.createRef=d,exports.Component=v,exports.cloneElement=A,exports.createContext=F,exports.toChildArray=b,exports._unmount=T,exports.options=exports.isValidElement=void 0;var e,t,n,o,l,r,_,u={},i=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n){var o,l=arguments,r={};for(o in t)"key"!==o&&"ref"!==o&&(r[o]=t[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(l[o]);if(null!=n&&(r.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===r[o]&&(r[o]=e.defaultProps[o]);return a(e,r,t&&t.key,t&&t.ref)}function a(t,n,o,l){var r={type:t,props:n,key:o,ref:l,__k:null,__:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return e.vnode&&e.vnode(r),r}function d(){return{}}function h(e){return e.children}function v(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function g(t){(!t.__d&&(t.__d=!0)&&1===n.push(t)||l!==e.debounceRendering)&&((l=e.debounceRendering)||o)(k)}function k(){var e,t,o,l,r,_,u;for(n.sort(function(e,t){return t.__v.__b-e.__v.__b});e=n.pop();)e.__d&&(o=void 0,l=void 0,_=(r=(t=e).__v).__e,(u=t.__P)&&(o=[],l=E(u,r,c({},r),t.__n,void 0!==u.ownerSVGElement,null,o,null==_?y(r):_),U(o,r),l!=_&&m(r)))}function x(e,t,n,o,l,r,_,s,c){var f,a,d,h,v,m,g,k=n&&n.__k||i,x=k.length;if(s==u&&(s=null!=r?r[0]:x?y(n,0):null),f=0,t.__k=b(t.__k,function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(d=k[f])||d&&n.key==d.key&&n.type===d.type)k[f]=void 0;else for(a=0;a<x;a++){if((d=k[a])&&n.key==d.key&&n.type===d.type){k[a]=void 0;break}d=null}if(h=E(e,n,d=d||u,o,l,r,_,s,c),(a=n.ref)&&d.ref!=a&&(g||(g=[]),d.ref&&g.push(d.ref,null,n),g.push(a,n.__c||h,n)),null!=h){if(null==m&&(m=h),null!=n.__d)h=n.__d,n.__d=null;else if(r==d||h!=s||null==h.parentNode){e:if(null==s||s.parentNode!==e)e.appendChild(h);else{for(v=s,a=0;(v=v.nextSibling)&&a<x;a+=2)if(v==h)break e;e.insertBefore(h,s)}"option"==t.type&&(e.value="")}s=h.nextSibling,"function"==typeof t.type&&(t.__d=h)}}return f++,n}),t.__e=m,null!=r&&"function"!=typeof t.type)for(f=r.length;f--;)null!=r[f]&&p(r[f]);for(f=x;f--;)null!=k[f]&&T(k[f],k[f]);if(g)for(f=0;f<g.length;f++)D(g[f],g[++f],g[++f])}function b(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var o=0;o<e.length;o++)b(e[o],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?a(null,e,null,null):null!=e.__e||null!=e.__c?a(e.type,e.props,e.key,null):e):e);return n}function C(e,t,n,o,l){var r;for(r in n)r in t||S(e,r,null,n[r],o);for(r in t)l&&"function"!=typeof t[r]||"value"===r||"checked"===r||n[r]===t[r]||S(e,r,t[r],n[r],o)}function w(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===s.test(t)?n+"px":null==n?"":n}function S(e,t,n,o,l){var r,_,u,i,s;if(l?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(r=e.style,"string"==typeof n)r.cssText=n;else{if("string"==typeof o&&(r.cssText="",o=null),o)for(_ in o)n&&_ in n||w(r,_,"");if(n)for(u in n)o&&n[u]===o[u]||w(r,u,n[u])}else"o"===t[0]&&"n"===t[1]?(i=t!==(t=t.replace(/Capture$/,"")),s=t.toLowerCase(),t=(s in e?s:t).slice(2),n?(o||e.addEventListener(t,P,i),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,P,i)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&!l&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function P(t){this.l[t.type](e.event?e.event(t):t)}function E(t,n,o,l,r,_,u,i,s){var p,f,a,d,y,m,g,k,C,w,S=n.type;if(void 0!==n.constructor)return null;(p=e.__b)&&p(n);try{e:if("function"==typeof S){if(k=n.props,C=(p=S.contextType)&&l[p.__c],w=p?C?C.props.value:p.__:l,o.__c?g=(f=n.__c=o.__c).__=f.__E:("prototype"in S&&S.prototype.render?n.__c=f=new S(k,w):(n.__c=f=new v(k,w),f.constructor=S,f.render=W),C&&C.sub(f),f.props=k,f.state||(f.state={}),f.context=w,f.__n=l,a=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=S.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=c({},f.__s)),c(f.__s,S.getDerivedStateFromProps(k,f.__s))),d=f.props,y=f.state,a)null==S.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==S.getDerivedStateFromProps&&k!==d&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(k,w),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(k,f.__s,w)){for(f.props=k,f.state=f.__s,f.__d=!1,f.__v=n,n.__e=o.__e,n.__k=o.__k,f.__h.length&&u.push(f),p=0;p<n.__k.length;p++)n.__k[p]&&(n.__k[p].__=n);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(k,f.__s,w),null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(d,y,m)})}f.context=w,f.props=k,f.state=f.__s,(p=e.__r)&&p(n),f.__d=!1,f.__v=n,f.__P=t,p=f.render(f.props,f.state,f.context),n.__k=b(null!=p&&p.type==h&&null==p.key?p.props.children:p),null!=f.getChildContext&&(l=c(c({},l),f.getChildContext())),a||null==f.getSnapshotBeforeUpdate||(m=f.getSnapshotBeforeUpdate(d,y)),x(t,n,o,l,r,_,u,i,s),f.base=n.__e,f.__h.length&&u.push(f),g&&(f.__E=f.__=null),f.__e=null}else n.__e=N(o.__e,n,o,l,r,_,u,s);(p=e.diffed)&&p(n)}catch(t){e.__e(t,n,o)}return n.__e}function U(t,n){e.__c&&e.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(e){e.call(n)})}catch(t){e.__e(t,n.__v)}})}function N(e,t,n,o,l,r,_,s){var c,p,f,a,d,h=n.props,v=t.props;if(l="svg"===t.type||l,null==e&&null!=r)for(c=0;c<r.length;c++)if(null!=(p=r[c])&&(null===t.type?3===p.nodeType:p.localName===t.type)){e=p,r[c]=null;break}if(null==e){if(null===t.type)return document.createTextNode(v);e=l?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),r=null}if(null===t.type)null!=r&&(r[r.indexOf(e)]=null),h!==v&&e.data!=v&&(e.data=v);else if(t!==n){if(null!=r&&(r=i.slice.call(e.childNodes)),f=(h=n.props||u).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!s){if(h===u)for(h={},d=0;d<e.attributes.length;d++)h[e.attributes[d].name]=e.attributes[d].value;(a||f)&&(a&&f&&a.__html==f.__html||(e.innerHTML=a&&a.__html||""))}C(e,v,h,l,s),t.__k=t.props.children,a||x(e,t,n,o,"foreignObject"!==t.type&&l,r,_,u,s),s||("value"in v&&void 0!==v.value&&v.value!==e.value&&(e.value=null==v.value?"":v.value),"checked"in v&&void 0!==v.checked&&v.checked!==e.checked&&(e.checked=v.checked))}return e}function D(t,n,o){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,o)}}function T(t,n,o){var l,r,_;if(e.unmount&&e.unmount(t),(l=t.ref)&&(l.current&&l.current!==t.__e||D(l,null,n)),o||"function"==typeof t.type||(o=null!=(r=t.__e)),t.__e=t.__d=null,null!=(l=t.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(t){e.__e(t,n)}l.base=l.__P=null}if(l=t.__k)for(_=0;_<l.length;_++)l[_]&&T(l[_],n,o);null!=r&&p(r)}function W(e,t,n){return this.constructor(e,n)}function L(t,n,o){var l,_,s;e.__&&e.__(t,n),_=(l=o===r)?null:o&&o.__k||n.__k,t=f(h,null,[t]),s=[],E(n,(l?n:o||n).__k=t,_||u,u,void 0!==n.ownerSVGElement,o&&!l?[o]:_?null:i.slice.call(n.childNodes),s,o||u,l),U(s,t)}function M(e,t){L(e,t,r)}function A(e,t){return t=c(c({},e.props),t),arguments.length>2&&(t.children=i.slice.call(arguments,2)),a(e.type,t,t.key||e.key,t.ref||e.ref)}function F(e){var t={},n={__c:"__cC"+_++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var o,l=this;return this.getChildContext||(o=[],this.getChildContext=function(){return t[n.__c]=l,t},this.shouldComponentUpdate=function(t){e.value!==t.value&&o.some(function(e){e.context=t.value,g(e)})},this.sub=function(e){o.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){o.splice(o.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n}exports.isValidElement=t,exports.options=e,exports.options=e={__e:function(e,t){for(var n,o;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(e)),o)return g(n.__E=n)}catch(t){e=t}throw e}},exports.isValidElement=t=function(e){return null!=e&&void 0===e.constructor},v.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&c(n,e),null!=e&&this.__v&&(this.__e=!1,t&&this.__h.push(t),g(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},v.prototype.render=h,n=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,r=u,_=0;
},{}],"JOIo":[function(require,module,exports) {
var n=function(n){return null==n};module.exports=n;
},{}],"zzSa":[function(require,module,exports) {
var r=require("./type/is-nil");function e(e){return r(e)?"":e.toString()}module.exports=e;
},{"./type/is-nil":"JOIo"}],"oBs3":[function(require,module,exports) {
var r=require("../to-string"),t=function(t){var e=r(t);return e.charAt(0).toLowerCase()+e.substring(1)};module.exports=t;
},{"../to-string":"zzSa"}],"eGDv":[function(require,module,exports) {
function r(r,o){for(var n in o)o.hasOwnProperty(n)&&"constructor"!==n&&void 0!==o[n]&&(r[n]=o[n])}var o=function(o,n,t,u){return n&&r(o,n),t&&r(o,t),u&&r(o,u),o};module.exports=o;
},{}],"xWET":[function(require,module,exports) {
var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t=function(t){var n=void 0===t?"undefined":o(t);return null!==t&&"object"===n||"function"===n};module.exports=t;
},{}],"f5Gi":[function(require,module,exports) {
var t={}.toString,o=function(o,r){return t.call(o)==="[object "+r+"]"};module.exports=o;
},{}],"RVyA":[function(require,module,exports) {
var r=require("./is-type"),a=Array.isArray?Array.isArray:function(a){return r(a,"Array")};module.exports=a;
},{"./is-type":"f5Gi"}],"yLcf":[function(require,module,exports) {
var r=require("./type/is-object"),e=require("./type/is-array"),i=function(i,a){if(i){if(e(i))for(var f=0,o=i.length;f<o&&!1!==a(i[f],f);f++);else if(r(i))for(var t in i)if(i.hasOwnProperty(t)&&!1===a(i[t],t))break}};module.exports=i;
},{"./type/is-object":"xWET","./type/is-array":"RVyA"}],"MmKh":[function(require,module,exports) {
var t=require("@antv/util/lib/mix"),n=require("@antv/util/lib/each"),i=require("@antv/util/lib/type/is-object"),e=require("@antv/util/lib/type/is-nil"),r=function(){var r=u.prototype;function u(n){this._initDefaultCfg(),t(this,n),this.init()}return r._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]},r.init=function(){},r.getTicks=function(){var t=this,e=t.ticks,r=[];return n(e,function(n){var e;e=i(n)?n:{text:t.getText(n),tickValue:n,value:t.scale(n)},r.push(e)}),r},r.getText=function(t,n){var i=this.formatter;return t=i?i(t,n):t,!e(t)&&t.toString||(t=""),t.toString()},r.rangeMin=function(){return this.range[0]},r.rangeMax=function(){var t=this.range;return t[t.length-1]},r.invert=function(t){return t},r.translate=function(t){return t},r.scale=function(t){return t},r.clone=function(){var t=this,i=t.constructor,e={};return n(t,function(n,i){e[i]=t[i]}),new i(e)},r.change=function(n){return this.ticks=null,t(this,n),this.init(),this},u}();module.exports=r;
},{"@antv/util/lib/mix":"eGDv","@antv/util/lib/each":"yLcf","@antv/util/lib/type/is-object":"xWET","@antv/util/lib/type/is-nil":"JOIo"}],"GpWy":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"Number")};module.exports=r;
},{"./is-type":"f5Gi"}],"hfkw":[function(require,module,exports) {
var r=12;function n(n){var t=1;if(n===1/0||n===-1/0)throw new Error("Not support Infinity!");if(n<1){for(var a=0;n<1;)t/=10,n*=10,a++;t.toString().length>r&&(t=parseFloat(t.toFixed(a)))}else for(;n>10;)t*=10,n/=10;return t}function t(r,n){var t=r.length;if(0===t)return NaN;var a=r[0];if(n<r[0])return NaN;if(n>=r[t-1])return r[t-1];for(var e=1;e<r.length&&!(n<r[e]);e++)a=r[e];return a}function a(r,n){var t,a=r.length;if(0===a)return NaN;if(n>r[a-1])return NaN;if(n<r[0])return r[0];for(var e=1;e<r.length;e++)if(n<=r[e]){t=r[e];break}return t}var e={snapFactorTo:function(t,a,i){if(isNaN(t))return NaN;var o=1;if(0!==t){t<0&&(o=-1);var f=n(t*=o);o*=f,t/=f}t="floor"===i?e.snapFloor(a,t):"ceil"===i?e.snapCeiling(a,t):e.snapTo(a,t);var u=parseFloat((t*o).toPrecision(r));Math.abs(o)<1&&u.toString().length>r&&(u=t/parseInt(1/o)*(o>0?1:-1));return u},snapMultiple:function(r,n,t){return("ceil"===t?Math.ceil(r/n):"floor"===t?Math.floor(r/n):Math.round(r/n))*n},snapTo:function(r,n){var e=t(r,n),i=a(r,n);if(isNaN(e)||isNaN(i)){if(r[0]>=n)return r[0];var o=r[r.length-1];if(o<=n)return o}return Math.abs(n-e)<Math.abs(i-n)?e:i},snapFloor:function(r,n){return t(r,n)},snapCeiling:function(r,n){return a(r,n)},fixedBase:function(r,n){var t=n.toString(),a=t.indexOf("."),e=t.indexOf("e-");if(a<0&&e<0)return Math.round(r);var i=e>=0?parseInt(t.substr(e+2),10):t.substr(a+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))}};module.exports=e;
},{}],"qiu6":[function(require,module,exports) {
var a=require("@antv/util/lib/type/is-nil"),i=require("@antv/util/lib/type/is-number"),e=require("./util"),n=5,r=7,t=[0,1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],l=[0,1,2,4,5,10],u=1e-12;module.exports=function(s){var m=s.min,o=s.max,p=s.interval,f=s.minTickInterval,v=[],x=s.minCount||n,h=s.maxCount||r,M=x===h,c=a(s.minLimit)?-1/0:s.minLimit,d=a(s.maxLimit)?1/0:s.maxLimit,B=(x+h)/2,b=B,y=s.snapArray?s.snapArray:M?t:l;if(m===c&&o===d&&M&&(p=(o-m)/(b-1)),a(m)&&(m=0),a(o)&&(o=0),Math.abs(o-m)<u&&(0===m?o=1:m>0?m=0:o=0,o-m<5&&!p&&o-m>=1&&(p=1)),a(p)){var L=(o-m)/(B-1);p=e.snapFactorTo(L,y,"ceil"),h!==x&&((b=parseInt((o-m)/p,10))>h&&(b=h),b<x&&(b=x),p=e.snapFactorTo((o-m)/(b-1),y,"floor"))}if(i(f)&&p<f&&(p=f),s.interval||h!==x)o=Math.min(e.snapMultiple(o,p,"ceil"),d),m=Math.max(e.snapMultiple(m,p,"floor"),c),b=Math.round((o-m)/p),m=e.fixedBase(m,p),o=e.fixedBase(o,p);else{B=parseInt(B,10);var q,I=(o+m)/2,T=e.snapMultiple(I,p,"ceil"),k=Math.floor((B-2)/2),A=T+k*p;q=B%2==0?T-k*p:T-(k+1)*p;for(var C=null;A<o&&(null===C||A>C);)C=A,A=e.fixedBase(A+p,p);for(var F=null;q>m&&(null===F||q<F);)F=q,q=e.fixedBase(q-p,p);o=A,m=q}o=Math.min(o,d),m=Math.max(m,c),v.push(m);for(var g=1;g<b;g++){var j=e.fixedBase(p*g+m,p);j<o&&v.push(j)}return v[v.length-1]<o&&v.push(o),{min:m,max:o,interval:p,count:b,ticks:v}};
},{"@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/type/is-number":"GpWy","./util":"hfkw"}],"Rdzj":[function(require,module,exports) {
function i(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var t=require("@antv/util/lib/type/is-nil"),n=require("@antv/util/lib/each"),s=require("./base"),a=require("./auto/number"),r=function(s){function r(){return s.apply(this,arguments)||this}i(r,s);var e=r.prototype;return e._initDefaultCfg=function(){s.prototype._initDefaultCfg.call(this);this.type="linear",this.isLinear=!0,this.nice=!1,this.min=null,this.minLimit=null,this.max=null,this.maxLimit=null,this.tickCount=null,this.tickInterval=null,this.minTickInterval=null,this.snapArray=null},e.init=function(){if(this.ticks){var i=this.ticks,n=this.translate(i[0]),s=this.translate(i[i.length-1]);(t(this.min)||this.min>n)&&(this.min=n),(t(this.max)||this.max<s)&&(this.max=s)}else this.min=this.translate(this.min),this.max=this.translate(this.max),this.initTicks()},e.calculateTicks=function(){var i=this.min,t=this.max,n=this.minLimit,s=this.maxLimit,r=this.tickCount,e=this.tickInterval,h=this.minTickInterval,l=this.snapArray;if(1===r)throw new Error("linear scale'tickCount should not be 1");if(t<i)throw new Error("max: "+t+" should not be less than min: "+i);return a({min:i,max:t,minLimit:n,maxLimit:s,minCount:r,maxCount:r,interval:e,minTickInterval:h,snapArray:l}).ticks},e.initTicks=function(){var i=this,t=i.calculateTicks();if(i.nice)i.ticks=t,i.min=t[0],i.max=t[t.length-1];else{var s=[];n(t,function(t){t>=i.min&&t<=i.max&&s.push(t)}),s.length||(s.push(i.min),s.push(i.max)),i.ticks=s}},e.scale=function(i){if(t(i))return NaN;var n=this.max,s=this.min;if(n===s)return 0;var a=(i-s)/(n-s),r=this.rangeMin();return r+a*(this.rangeMax()-r)},e.invert=function(i){var t=(i-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+t*(this.max-this.min)},r}(s);s.Linear=r,module.exports=r;
},{"@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/each":"yLcf","./base":"MmKh","./auto/number":"qiu6"}],"uWMO":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("./base"),i=require("@antv/util/lib/type/is-number"),n=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r._initDefaultCfg=function(){e.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},r.getText=function(){return this.value.toString()},r.scale=function(t){return this.value!==t&&i(t)?t:this.range[0]},r.invert=function(){return this.value},n}(e);e.Identity=n,module.exports=n;
},{"./base":"MmKh","@antv/util/lib/type/is-number":"GpWy"}],"qZFJ":[function(require,module,exports) {
var n=require("@antv/util/lib/each"),t=8,r=4;function e(t){var r=[];return n(t,function(n){r=r.concat(n)}),r}function i(n,t){var r;for(r=t;r>0&&n%r!=0;r--);if(1===r)for(r=t;r>0&&(n-1)%r!=0;r--);return r}module.exports=function(n){var u,a={},o=[],f=n.isRounding,c=e(n.data),l=c.length,s=n.maxCount||t;if(f?2===(u=i(l-1,s-1)+1)?u=s:u<s-r&&(u=s-r):u=s,!f&&l<=u+u/2)o=[].concat(c);else{for(var h=parseInt(l/(u-1),10),v=c.map(function(n,t){return t%h==0?c.slice(t,t+h):null}).filter(function(n){return n}),g=1,p=v.length;g<p&&(f?g*h<l-h:g<u-1);g++)o.push(v[g][0]);if(c.length){o.unshift(c[0]);var d=c[l-1];-1===o.indexOf(d)&&o.push(d)}}return a.categories=c,a.ticks=o,a};
},{"@antv/util/lib/each":"yLcf"}],"Uo9S":[function(require,module,exports) {
var r=require("./is-type"),e=function(e){return r(e,"String")};module.exports=e;
},{"./is-type":"f5Gi"}],"UOH1":[function(require,module,exports) {
function t(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var i=require("./base"),e=require("./auto/cat"),n=require("@antv/util/lib/each"),r=require("@antv/util/lib/type/is-number"),s=require("@antv/util/lib/type/is-string"),a=function(i){function a(){return i.apply(this,arguments)||this}t(a,i);var u=a.prototype;return u._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},u.init=function(){var t=this.values,i=this.tickCount;if(n(t,function(i,e){t[e]=i.toString()}),!this.ticks){var r=t;if(i)r=e({maxCount:i,data:t,isRounding:this.isRounding}).ticks;this.ticks=r}},u.getText=function(t){return-1===this.values.indexOf(t)&&r(t)&&(t=this.values[Math.round(t)]),i.prototype.getText.call(this,t)},u.translate=function(t){var i=this.values.indexOf(t);return-1===i&&r(t)?i=t:-1===i&&(i=NaN),i},u.scale=function(t){var i=this.rangeMin(),e=this.rangeMax();return(s(t)||-1!==this.values.indexOf(t))&&(t=this.translate(t)),i+(this.values.length>1?t/(this.values.length-1):t)*(e-i)},u.invert=function(t){if(s(t))return t;var i=this.rangeMin(),e=this.rangeMax();t<i&&(t=i),t>e&&(t=e);var n=(t-i)/(e-i),r=Math.round(n*(this.values.length-1))%this.values.length;return r=r||0,this.values[r]},a}(i);i.Cat=a,module.exports=a;
},{"./base":"MmKh","./auto/cat":"qZFJ","@antv/util/lib/each":"yLcf","@antv/util/lib/type/is-number":"GpWy","@antv/util/lib/type/is-string":"Uo9S"}],"jj8K":[function(require,module,exports) {
var define;
var n;!function(t){"use strict";var e={},r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,u=/\d\d?/,o=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,i=function(){};function s(n,t){for(var e=[],r=0,u=n.length;r<u;r++)e.push(n[r].substr(0,t));return e}function m(n){return function(t,e,r){var u=r[n].indexOf(e.charAt(0).toUpperCase()+e.substr(1).toLowerCase());~u&&(t.month=u)}}function c(n,t){for(n=String(n),t=t||2;n.length<t;)n="0"+n;return n}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],h=s(f,3),l=s(d,3);e.i18n={dayNamesShort:l,dayNames:d,monthNamesShort:h,monthNames:f,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!=10)*n%10]}};var M={D:function(n){return n.getDate()},DD:function(n){return c(n.getDate())},Do:function(n,t){return t.DoFn(n.getDate())},d:function(n){return n.getDay()},dd:function(n){return c(n.getDay())},ddd:function(n,t){return t.dayNamesShort[n.getDay()]},dddd:function(n,t){return t.dayNames[n.getDay()]},M:function(n){return n.getMonth()+1},MM:function(n){return c(n.getMonth()+1)},MMM:function(n,t){return t.monthNamesShort[n.getMonth()]},MMMM:function(n,t){return t.monthNames[n.getMonth()]},YY:function(n){return String(n.getFullYear()).substr(2)},YYYY:function(n){return c(n.getFullYear(),4)},h:function(n){return n.getHours()%12||12},hh:function(n){return c(n.getHours()%12||12)},H:function(n){return n.getHours()},HH:function(n){return c(n.getHours())},m:function(n){return n.getMinutes()},mm:function(n){return c(n.getMinutes())},s:function(n){return n.getSeconds()},ss:function(n){return c(n.getSeconds())},S:function(n){return Math.round(n.getMilliseconds()/100)},SS:function(n){return c(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return c(n.getMilliseconds(),3)},a:function(n,t){return n.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(n,t){return n.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(n){var t=n.getTimezoneOffset();return(t>0?"-":"+")+c(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},g={D:[u,function(n,t){n.day=t}],Do:[new RegExp(u.source+o.source),function(n,t){n.day=parseInt(t,10)}],M:[u,function(n,t){n.month=t-1}],YY:[u,function(n,t){var e=+(""+(new Date).getFullYear()).substr(0,2);n.year=""+(t>68?e-1:e)+t}],h:[u,function(n,t){n.hour=t}],m:[u,function(n,t){n.minute=t}],s:[u,function(n,t){n.second=t}],YYYY:[/\d{4}/,function(n,t){n.year=t}],S:[/\d/,function(n,t){n.millisecond=100*t}],SS:[/\d{2}/,function(n,t){n.millisecond=10*t}],SSS:[/\d{3}/,function(n,t){n.millisecond=t}],d:[u,i],ddd:[o,i],MMM:[o,m("monthNamesShort")],MMMM:[o,m("monthNames")],a:[o,function(n,t,e){var r=t.toLowerCase();r===e.amPm[0]?n.isPm=!1:r===e.amPm[1]&&(n.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(n,t){"Z"===t&&(t="+00:00");var e,r=(t+"").match(/([\+\-]|\d\d)/gi);r&&(e=60*r[1]+parseInt(r[2],10),n.timezoneOffset="+"===r[0]?e:-e)}]};g.dd=g.d,g.dddd=g.ddd,g.DD=g.D,g.mm=g.m,g.hh=g.H=g.HH=g.h,g.MM=g.M,g.ss=g.s,g.A=g.a,e.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},e.format=function(n,t,u){var o=u||e.i18n;if("number"==typeof n&&(n=new Date(n)),"[object Date]"!==Object.prototype.toString.call(n)||isNaN(n.getTime()))throw new Error("Invalid Date in fecha.format");t=e.masks[t]||t||e.masks.default;var i=[];return(t=(t=t.replace(a,function(n,t){return i.push(t),"??"})).replace(r,function(t){return t in M?M[t](n,o):t.slice(1,t.length-1)})).replace(/\?\?/g,function(){return i.shift()})},e.parse=function(n,t,u){var o=u||e.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=e.masks[t]||t,n.length>1e3)return!1;var a=!0,i={};if(t.replace(r,function(t){if(g[t]){var e=g[t],r=n.search(e[0]);~r?n.replace(e[0],function(t){return e[1](i,t,o),n=n.substr(r+t.length),t}):a=!1}return g[t]?"":t.slice(1,t.length-1)}),!a)return!1;var s,m=new Date;return!0===i.isPm&&null!=i.hour&&12!=+i.hour?i.hour=+i.hour+12:!1===i.isPm&&12==+i.hour&&(i.hour=0),null!=i.timezoneOffset?(i.minute=+(i.minute||0)-+i.timezoneOffset,s=new Date(Date.UTC(i.year||m.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0))):s=new Date(i.year||m.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0),s},"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof n&&n.amd?n(function(){return e}):t.fecha=e}(this);
},{}],"PzjN":[function(require,module,exports) {
var e=require("./util"),t=require("@antv/util/lib/type/is-nil"),r=6,n=[1,2,4,6,8,12],a=6e4,i=36e5,l=864e5;function u(e){return new Date(e).getFullYear()}function o(e){return new Date(e,0,1).getTime()}function f(e){return new Date(e).getMonth()}function h(e,t){var r=u(e),n=u(t),a=f(e);return 12*(n-r)+(f(t)-a)%12}function c(e,t){return new Date(e,t,1).getTime()}function v(e,t){return Math.ceil((t-e)/l)}function s(e,t){return Math.ceil((t-e)/i)}function M(e,t){return Math.ceil((t-e)/6e4)}module.exports=function(g){var m,p=g.minInterval,D=[],w=g.min,x=g.max,T=g.interval;if(x===w&&(x=w+l),t(T)){var F=l,Y=365*F;T=parseInt((x-w)/(g.maxCount||r),10),p&&p>T&&(T=p);var d=T/Y,q=u(w);if(d>.51){for(var I=Math.ceil(d),b=u(x),k=q;k<=b+I;k+=I)D.push(o(k));T=null}else if(d>.0834){for(var y=Math.ceil(d/.0834),B=f(w),C=h(w,x),H=0;H<=C+y;H+=y)D.push(c(q,H+B));T=null}else if(T>.5*F){var j=new Date(w),z=j.getFullYear(),A=j.getMonth(w),E=j.getDate(),G=Math.ceil(T/F),J=v(w,x);T=G*F;for(var K=0;K<J+G;K+=G)D.push(new Date(z,A,E+K).getTime())}else if(T>i){var L=new Date(w),N=L.getFullYear(),O=L.getMonth(w),P=L.getDate(),Q=L.getHours(),R=e.snapTo(n,Math.ceil(T/i)),S=s(w,x);T=R*i;for(var U=0;U<=S+R;U+=R)D.push(new Date(N,O,P,Q+U).getTime())}else if(T>a){var V=M(w,x),W=Math.ceil(T/a);T=W*a;for(var X=0;X<=V+W;X+=W)D.push(w+X*a)}else{T<1e3&&(T=1e3),w=1e3*Math.floor(w/1e3);var Z=Math.ceil((x-w)/1e3),$=Math.ceil(T/1e3);T=1e3*$;for(var _=0;_<Z+$;_+=$)D.push(w+1e3*_)}}if(!D.length){w=1e3*Math.floor(w/1e3),m=((x=1e3*Math.ceil(x/1e3))-w)/T;for(var ee=0;ee<=m;ee++)D.push(e.fixedBase(T*ee+w,T))}return{max:x,min:w,interval:T,ticks:D,count:D.length}};
},{"./util":"hfkw","@antv/util/lib/type/is-nil":"JOIo"}],"MUS1":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"Date")};module.exports=r;
},{"./is-type":"f5Gi"}],"ylQ7":[function(require,module,exports) {
var e=require("@antv/util/lib/type/is-string"),t=require("@antv/util/lib/type/is-date");module.exports={toTimeStamp:function(i){return e(i)&&(i=i.indexOf("T")>0?new Date(i).getTime():new Date(i.replace(/-/gi,"/")).getTime()),t(i)&&(i=i.getTime()),i}};
},{"@antv/util/lib/type/is-string":"Uo9S","@antv/util/lib/type/is-date":"MUS1"}],"riNg":[function(require,module,exports) {
function t(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var i=require("fecha"),e=require("@antv/util/lib/each"),r=require("@antv/util/lib/type/is-nil"),n=require("@antv/util/lib/type/is-string"),a=require("./base"),o=require("./linear"),u=require("./auto/time"),m=require("./time-util"),s=function(a){function o(){return a.apply(this,arguments)||this}t(o,a);var s=o.prototype;return s._initDefaultCfg=function(){a.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},s.init=function(){var t=this,i=t.values;if(i&&i.length){var n=[],o=1/0,u=o,m=0;e(i,function(i){var e=t._toTimeStamp(i);if(isNaN(e))throw new TypeError("Invalid Time: "+i);o>e?(u=o,o=e):u>e&&(u=e),m<e&&(m=e),n.push(e)}),i.length>1&&(t.minTickInterval=u-o),(r(t.min)||t._toTimeStamp(t.min)>o)&&(t.min=o),(r(t.max)||t._toTimeStamp(t.max)<m)&&(t.max=m)}a.prototype.init.call(this)},s.calculateTicks=function(){var t=this.min,i=this.max,e=this.tickCount,r=this.tickInterval;return u({min:t,max:i,minCount:e,maxCount:e,interval:r,minInterval:this.minTickInterval}).ticks},s.getText=function(t){var e=this.formatter;return t=this.translate(t),t=e?e(t):i.format(t,this.mask)},s.scale=function(t){return n(t)&&(t=this.translate(t)),a.prototype.scale.call(this,t)},s.translate=function(t){return this._toTimeStamp(t)},s._toTimeStamp=function(t){return m.toTimeStamp(t)},o}(o);a.Time=s,module.exports=s;
},{"fecha":"jj8K","@antv/util/lib/each":"yLcf","@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/type/is-string":"Uo9S","./base":"MmKh","./linear":"Rdzj","./auto/time":"PzjN","./time-util":"ylQ7"}],"PY8y":[function(require,module,exports) {
function t(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var i=require("./base"),e=require("./category"),r=require("fecha"),a=require("./auto/cat"),s=require("./time-util"),n=require("@antv/util/lib/each"),u=require("@antv/util/lib/type/is-number"),o=require("@antv/util/lib/type/is-object"),c=require("@antv/util/lib/type/is-string"),l=function(i){function e(){return i.apply(this,arguments)||this}t(e,i);var l=e.prototype;return l._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},l.init=function(){var t=this,i=this.values;n(i,function(e,r){i[r]=t._toTimeStamp(e)}),this.sortable&&i.sort(function(t,i){return t-i}),t.ticks||(t.ticks=this.calculateTicks())},l.calculateTicks=function(){var t,i=this.tickCount;i?t=a({maxCount:i,data:this.values,isRounding:this.isRounding}).ticks:t=this.values;return t},l.translate=function(t){t=this._toTimeStamp(t);var i=this.values.indexOf(t);return-1===i&&(i=u(t)&&t<this.values.length?t:NaN),i},l.scale=function(t){var i=this.rangeMin(),e=this.rangeMax(),r=this.translate(t);return i+(1===this.values.length||isNaN(r)?r:r>-1?r/(this.values.length-1):0)*(e-i)},l.getText=function(t){var i="",e=this.translate(t);i=e>-1?this.values[e]:t;var a=this.formatter;return i=parseInt(i,10),i=a?a(i):r.format(i,this.mask)},l.getTicks=function(){var t=this,i=this.ticks,e=[];return n(i,function(i){var r;r=o(i)?i:{text:c(i)?i:t.getText(i),value:t.scale(i),tickValue:i},e.push(r)}),e},l._toTimeStamp=function(t){return s.toTimeStamp(t)},e}(e);i.TimeCat=l,module.exports=l;
},{"./base":"MmKh","./category":"UOH1","fecha":"jj8K","./auto/cat":"qZFJ","./time-util":"ylQ7","@antv/util/lib/each":"yLcf","@antv/util/lib/type/is-number":"GpWy","@antv/util/lib/type/is-object":"xWET","@antv/util/lib/type/is-string":"Uo9S"}],"sGaf":[function(require,module,exports) {
function t(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}var i=require("@antv/util/lib/each"),r=require("./base"),e=require("./linear");function n(t,i){return 1===t?1:Math.log(i)/Math.log(t)}var a=function(r){function e(){return r.apply(this,arguments)||this}t(e,r);var a=e.prototype;return a._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var t,r=this.base;if(this.min<0)throw new Error("The minimum value must be greater than zero!");var e=n(r,this.max);if(this.min>0)t=Math.floor(n(r,this.min));else{var a=this.values,s=this.max;i(a,function(t){t>0&&t<s&&(s=t)}),s===this.max&&(s=this.max/r),s>1&&(s=1),t=Math.floor(n(r,s)),this._minTick=t,this.positiveMin=s}for(var h=e-t,o=this.tickCount,u=Math.ceil(h/o),c=[],l=t;l<e+u;l+=u)c.push(Math.pow(r,l));return 0===this.min&&c.unshift(0),c},a._getScalePercent=function(t){var i=this.max,r=this.min;if(i===r)return 0;if(t<=0)return 0;var e=this.base,a=this.positiveMin;return a&&(r=1*a/e),t<a?t/a/(n(e,i)-n(e,r)):(n(e,t)-n(e,r))/(n(e,i)-n(e,r))},a.scale=function(t){var i=this._getScalePercent(t),r=this.rangeMin();return r+i*(this.rangeMax()-r)},a.invert=function(t){var i,r=this.base,e=n(r,this.max),a=this.rangeMin(),s=this.rangeMax()-a,h=this.positiveMin;if(h){if(0===t)return 0;var o=1/(e-(i=n(r,h/r)))*s;if(t<o)return t/o*h}else i=n(r,this.min);var u=(t-a)/s*(e-i)+i;return Math.pow(r,u)},e}(e);r.Log=a,module.exports=a;
},{"@antv/util/lib/each":"yLcf","./base":"MmKh","./linear":"Rdzj"}],"X6At":[function(require,module,exports) {
function t(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var n=require("./base"),i=require("./linear");function e(t,n){var i=Math.E;return Math.pow(i,Math.log(n)/t)}var r=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var r=i.prototype;return r._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},r.calculateTicks=function(){var t,n=this.exponent,i=Math.ceil(e(n,this.max));if((t=this.min>=0?Math.floor(e(n,this.min)):0)>i){var r=i;i=t,t=r}for(var a=i-t,o=this.tickCount,h=Math.ceil(a/o),s=[],u=t;u<i+h;u+=h)s.push(Math.pow(u,n));return s},r._getScalePercent=function(t){var n=this.max,i=this.min;if(n===i)return 0;var r=this.exponent;return(e(r,t)-e(r,i))/(e(r,n)-e(r,i))},r.scale=function(t){var n=this._getScalePercent(t),i=this.rangeMin();return i+n*(this.rangeMax()-i)},r.invert=function(t){var n=(t-this.rangeMin())/(this.rangeMax()-this.rangeMin()),i=this.exponent,r=e(i,this.max),a=e(i,this.min),o=n*(r-a)+a;return Math.pow(o,i)},i}(i);n.Pow=r,module.exports=r;
},{"./base":"MmKh","./linear":"Rdzj"}],"vJDD":[function(require,module,exports) {
var e=require("@antv/util/lib/string/lower-first"),r=require("./base");r.Linear=require("./linear"),r.Identity=require("./identity"),r.Cat=require("./category"),r.Time=require("./time"),r.TimeCat=require("./time-cat"),r.Log=require("./log"),r.Pow=require("./pow");var i=function(i){if(r.hasOwnProperty(i)){var t=e(i);r[t]=function(e){return new r[i](e)}}};for(var t in r)i(t);var n=["cat","timeCat"];r.isCategory=function(e){return n.indexOf(e)>=0},module.exports=r;
},{"@antv/util/lib/string/lower-first":"oBs3","./base":"MmKh","./linear":"Rdzj","./identity":"uWMO","./category":"UOH1","./time":"riNg","./time-cat":"PY8y","./log":"sGaf","./pow":"X6At"}],"yged":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"Function")};module.exports=r;
},{"./is-type":"f5Gi"}],"EI7r":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"Boolean")};module.exports=r;
},{"./is-type":"f5Gi"}],"ACXn":[function(require,module,exports) {
var n=function(n){return null!==n&&"function"!=typeof n&&isFinite(n.length)};module.exports=n;
},{}],"r1dF":[function(require,module,exports) {
var e={}.toString,r=function(r){return e.call(r).replace(/^\[object /,"").replace(/\]$/,"")};module.exports=r;
},{}],"qNNh":[function(require,module,exports) {
var t=Object.prototype,o=function(o){var r=o&&o.constructor;return o===("function"==typeof r&&r.prototype||t)};module.exports=o;
},{}],"Fsar":[function(require,module,exports) {
var e=require("./type/is-nil"),r=require("./type/is-array-like"),t=require("./type/get-type"),i=require("./type/is-prototype"),n=Object.prototype.hasOwnProperty;function p(p){if(e(p))return!0;if(r(p))return!p.length;var u=t(p);if("Map"===u||"Set"===u)return!p.size;if(i(p))return!Object.keys(p).length;for(var y in p)if(n.call(p,y))return!1;return!0}module.exports=p;
},{"./type/is-nil":"JOIo","./type/is-array-like":"ACXn","./type/get-type":"r1dF","./type/is-prototype":"qNNh"}],"aP8D":[function(require,module,exports) {
var r=function(){var r={};return function(n){return r[n=n||"g"]?r[n]+=1:r[n]=1,n+r[n]}}();module.exports=r;
},{}],"Gja6":[function(require,module,exports) {
var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t=require("./type/is-array"),e=function e(r){if("object"!==(void 0===r?"undefined":o(r))||null===r)return r;var n=void 0;if(t(r)){n=[];for(var l=0,u=r.length;l<u;l++)"object"===o(r[l])&&null!=r[l]?n[l]=e(r[l]):n[l]=r[l]}else for(var f in n={},r)"object"===o(r[f])&&null!=r[f]?n[f]=e(r[f]):n[f]=r[f];return n};module.exports=e;
},{"./type/is-array":"RVyA"}],"EiMf":[function(require,module,exports) {
var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},t=function(t){return"object"===(void 0===t?"undefined":o(t))&&null!==t};module.exports=t;
},{}],"j20u":[function(require,module,exports) {
var e=require("./is-object-like"),t=require("./is-type"),r=function(r){if(!e(r)||!t(r,"Object"))return!1;if(null===Object.getPrototypeOf(r))return!0;for(var o=r;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(r)===o};module.exports=r;
},{"./is-object-like":"EiMf","./is-type":"f5Gi"}],"AIel":[function(require,module,exports) {
var r=require("./type/is-plain-object"),e=require("./type/is-array"),n=5;function a(o,t,i,u){for(var v in i=i||0,u=u||n,t)if(t.hasOwnProperty(v)){var f=t[v];null!==f&&r(f)?(r(o[v])||(o[v]={}),i<u?a(o[v],f,i+1,u):o[v]=t[v]):e(f)?(o[v]=[],o[v]=o[v].concat(f)):void 0!==f&&(o[v]=f)}}var o=function(){for(var r=new Array(arguments.length),e=r.length,n=0;n<e;n++)r[n]=arguments[n];for(var o=r[0],t=1;t<e;t++)a(o,r[t]);return o};module.exports=o;
},{"./type/is-plain-object":"j20u","./type/is-array":"RVyA"}],"HEpt":[function(require,module,exports) {
var r=require("../to-string"),t=function(t){var e=r(t);return e.charAt(0).toUpperCase()+e.substring(1)};module.exports=t;
},{"../to-string":"zzSa"}],"eRQR":[function(require,module,exports) {
var e=require("./type/is-object-like"),r=require("./type/is-array-like"),t=require("./type/is-string"),i=function i(n,u){if(n===u)return!0;if(!n||!u)return!1;if(t(n)||t(u))return!1;if(r(n)||r(u)){if(n.length!==u.length)return!1;for(var f=!0,l=0;l<n.length&&(f=i(n[l],u[l]));l++);return f}if(e(n)||e(u)){var g=Object.keys(n),s=Object.keys(u);if(g.length!==s.length)return!1;for(var a=!0,h=0;h<g.length&&(a=i(n[g[h]],u[g[h]]));h++);return a}return!1};module.exports=i;
},{"./type/is-object-like":"EiMf","./type/is-array-like":"ACXn","./type/is-string":"Uo9S"}],"QQdW":[function(require,module,exports) {
var r=require("./type/is-array-like");function e(e){return r(e)?Array.prototype.slice.call(e):[]}module.exports=e;
},{"./type/is-array-like":"ACXn"}],"zFO7":[function(require,module,exports) {
var t=require("./type/is-function"),r=require("./mix"),e=function(e,o,n,u){t(o)||(n=o,o=e,e=function(){});var c=Object.create?function(t,r){return Object.create(t,{constructor:{value:r}})}:function(t,r){function e(){}e.prototype=t;var o=new e;return o.constructor=r,o},p=c(o.prototype,e);return e.prototype=r(p,e.prototype),e.superclass=c(o.prototype,o),r(p,n),r(e,u),e};module.exports=e;
},{"./type/is-function":"yged","./mix":"eGDv"}],"EVXn":[function(require,module,exports) {
var r=require("./type/is-function"),e=require("./to-array"),o=require("./mix"),t=function(t){for(var i=e(arguments),p=1;p<i.length;p++){var u=i[p];r(u)&&(u=u.prototype),o(t.prototype,u)}};module.exports=t;
},{"./type/is-function":"yged","./to-array":"QQdW","./mix":"eGDv"}],"zD4U":[function(require,module,exports) {
var r=Array.prototype,l=r.splice,e=r.indexOf,a=r.slice,o=function(r){for(var o=a.call(arguments,1),c=0;c<o.length;c++)for(var t=o[c],n=-1;(n=e.call(r,t))>-1;)l.call(r,n,1);return r};module.exports=o;
},{}],"JGRU":[function(require,module,exports) {
var e=1e-5;module.exports=function(r,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return Math.abs(r-t)<a};
},{}],"TIkE":[function(require,module,exports) {
var r=Math.PI/180,t=function(t){return r*t};module.exports=t;
},{}],"keho":[function(require,module,exports) {
var r=180/Math.PI,t=function(t){return r*t};module.exports=t;
},{}],"Reb9":[function(require,module,exports) {
var r=function(r,e){return(r%e+e)%e};module.exports=r;
},{}],"HCgL":[function(require,module,exports) {
var r=function(r,e,n){return r<e?e:r>n?n:r};module.exports=r;
},{}],"BIv4":[function(require,module,exports) {
var e=document.createElement("table"),t=document.createElement("tr"),r=/^\s*<(\w+|!)[^>]*>/,n={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};module.exports=function(e){var t=r.test(e)&&RegExp.$1;t in n||(t="*");var d=n[t];e=e.replace(/(^\s*)|(\s*$)/g,""),d.innerHTML=""+e;var o=d.childNodes[0];return d.removeChild(o),o};
},{}],"TgLT":[function(require,module,exports) {
module.exports=function(r,e){if(r)for(var n in e)e.hasOwnProperty(n)&&(r.style[n]=e[n]);return r};
},{}],"Nikq":[function(require,module,exports) {
module.exports=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)};
},{}],"jN7T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=a,exports.toRadian=s,exports.equals=n;var t=exports.EPSILON=1e-6,r=exports.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e=exports.RANDOM=Math.random;function a(t){exports.ARRAY_TYPE=r=t}var o=Math.PI/180;function s(t){return t*o}function n(r,e){return Math.abs(r-e)<=t*Math.max(1,Math.abs(r),Math.abs(e))}
},{}],"Seak":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=exports.mul=void 0,exports.create=n,exports.fromMat4=o,exports.clone=e,exports.copy=s,exports.fromValues=u,exports.set=M,exports.identity=p,exports.transpose=i,exports.invert=h,exports.adjoint=c,exports.determinant=f,exports.multiply=x,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=d,exports.fromMat2d=E,exports.fromQuat=w,exports.normalFromMat4=O,exports.projection=S,exports.str=A,exports.frob=y,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_;var t=require("./common.js"),r=a(t);function a(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r.default=t,r}function n(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function e(t){var a=new r.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function u(t,a,n,o,e,s,u,M,p){var i=new r.ARRAY_TYPE(9);return i[0]=t,i[1]=a,i[2]=n,i[3]=o,i[4]=e,i[5]=s,i[6]=u,i[7]=M,i[8]=p,i}function M(t,r,a,n,o,e,s,u,M,p){return t[0]=r,t[1]=a,t[2]=n,t[3]=o,t[4]=e,t[5]=s,t[6]=u,t[7]=M,t[8]=p,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,r){if(t===r){var a=r[1],n=r[2],o=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=o}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function h(t,r){var a=r[0],n=r[1],o=r[2],e=r[3],s=r[4],u=r[5],M=r[6],p=r[7],i=r[8],h=i*s-u*p,c=-i*e+u*M,f=p*e-s*M,x=a*h+n*c+o*f;return x?(x=1/x,t[0]=h*x,t[1]=(-i*n+o*p)*x,t[2]=(u*n-o*s)*x,t[3]=c*x,t[4]=(i*a-o*M)*x,t[5]=(-u*a+o*e)*x,t[6]=f*x,t[7]=(-p*a+n*M)*x,t[8]=(s*a-n*e)*x,t):null}function c(t,r){var a=r[0],n=r[1],o=r[2],e=r[3],s=r[4],u=r[5],M=r[6],p=r[7],i=r[8];return t[0]=s*i-u*p,t[1]=o*p-n*i,t[2]=n*u-o*s,t[3]=u*M-e*i,t[4]=a*i-o*M,t[5]=o*e-a*u,t[6]=e*p-s*M,t[7]=n*M-a*p,t[8]=a*s-n*e,t}function f(t){var r=t[0],a=t[1],n=t[2],o=t[3],e=t[4],s=t[5],u=t[6],M=t[7],p=t[8];return r*(p*e-s*M)+a*(-p*o+s*u)+n*(M*o-e*u)}function x(t,r,a){var n=r[0],o=r[1],e=r[2],s=r[3],u=r[4],M=r[5],p=r[6],i=r[7],h=r[8],c=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],d=a[8];return t[0]=c*n+f*s+x*p,t[1]=c*o+f*u+x*i,t[2]=c*e+f*M+x*h,t[3]=b*n+l*s+m*p,t[4]=b*o+l*u+m*i,t[5]=b*e+l*M+m*h,t[6]=v*n+P*s+d*p,t[7]=v*o+P*u+d*i,t[8]=v*e+P*M+d*h,t}function b(t,r,a){var n=r[0],o=r[1],e=r[2],s=r[3],u=r[4],M=r[5],p=r[6],i=r[7],h=r[8],c=a[0],f=a[1];return t[0]=n,t[1]=o,t[2]=e,t[3]=s,t[4]=u,t[5]=M,t[6]=c*n+f*s+p,t[7]=c*o+f*u+i,t[8]=c*e+f*M+h,t}function l(t,r,a){var n=r[0],o=r[1],e=r[2],s=r[3],u=r[4],M=r[5],p=r[6],i=r[7],h=r[8],c=Math.sin(a),f=Math.cos(a);return t[0]=f*n+c*s,t[1]=f*o+c*u,t[2]=f*e+c*M,t[3]=f*s-c*n,t[4]=f*u-c*o,t[5]=f*M-c*e,t[6]=p,t[7]=i,t[8]=h,t}function m(t,r,a){var n=a[0],o=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=o*r[3],t[4]=o*r[4],t[5]=o*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function E(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function w(t,r){var a=r[0],n=r[1],o=r[2],e=r[3],s=a+a,u=n+n,M=o+o,p=a*s,i=n*s,h=n*u,c=o*s,f=o*u,x=o*M,b=e*s,l=e*u,m=e*M;return t[0]=1-h-x,t[3]=i-m,t[6]=c+l,t[1]=i+m,t[4]=1-p-x,t[7]=f-b,t[2]=c-l,t[5]=f+b,t[8]=1-p-h,t}function O(t,r){var a=r[0],n=r[1],o=r[2],e=r[3],s=r[4],u=r[5],M=r[6],p=r[7],i=r[8],h=r[9],c=r[10],f=r[11],x=r[12],b=r[13],l=r[14],m=r[15],v=a*u-n*s,P=a*M-o*s,d=a*p-e*s,E=n*M-o*u,w=n*p-e*u,O=o*p-e*M,S=i*b-h*x,A=i*l-c*x,y=i*m-f*x,I=h*l-c*b,L=h*m-f*b,N=c*m-f*l,R=v*N-P*L+d*I+E*y-w*A+O*S;return R?(R=1/R,t[0]=(u*N-M*L+p*I)*R,t[1]=(M*y-s*N-p*A)*R,t[2]=(s*L-u*y+p*S)*R,t[3]=(o*L-n*N-e*I)*R,t[4]=(a*N-o*y+e*A)*R,t[5]=(n*y-a*L-e*S)*R,t[6]=(b*O-l*w+m*E)*R,t[7]=(l*d-x*O-m*P)*R,t[8]=(x*w-b*d+m*v)*R,t):null}function S(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function I(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function L(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function N(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function R(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(t,a){var n=t[0],o=t[1],e=t[2],s=t[3],u=t[4],M=t[5],p=t[6],i=t[7],h=t[8],c=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],d=a[8];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(e-x)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(s-b)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-l)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(M-m)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(m))&&Math.abs(p-v)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(i-P)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(h-d)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))}var j=exports.mul=x,T=exports.sub=L;
},{"./common.js":"jN7T"}],"K0Bf":[function(require,module,exports) {
var r=require("@antv/gl-matrix/lib/gl-matrix/mat3");r.translate=function(t,a,n){var l=new Array(9);return r.fromTranslation(l,n),r.multiply(t,l,a)},r.rotate=function(t,a,n){var l=new Array(9);return r.fromRotation(l,n),r.multiply(t,l,a)},r.scale=function(t,a,n){var l=new Array(9);return r.fromScaling(l,n),r.multiply(t,l,a)},module.exports=r;
},{"@antv/gl-matrix/lib/gl-matrix/mat3":"Seak"}],"tKTJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0,exports.create=e,exports.clone=o,exports.fromValues=s,exports.copy=a,exports.set=u,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=x,exports.ceil=f,exports.floor=h,exports.min=M,exports.max=v,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=q,exports.squaredDistance=A,exports.length=b,exports.squaredLength=P,exports.negate=E,exports.inverse=R,exports.normalize=Y,exports.dot=_,exports.cross=g,exports.lerp=y,exports.random=O,exports.transformMat2=L,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=I,exports.rotate=T,exports.angle=j,exports.str=N,exports.exactEquals=S,exports.equals=z;var r=require("./common.js"),t=n(r);function n(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t.default=r,t}function e(){var r=new t.ARRAY_TYPE(2);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function o(r){var n=new t.ARRAY_TYPE(2);return n[0]=r[0],n[1]=r[1],n}function s(r,n){var e=new t.ARRAY_TYPE(2);return e[0]=r,e[1]=n,e}function a(r,t){return r[0]=t[0],r[1]=t[1],r}function u(r,t,n){return r[0]=t,r[1]=n,r}function i(r,t,n){return r[0]=t[0]+n[0],r[1]=t[1]+n[1],r}function c(r,t,n){return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r}function p(r,t,n){return r[0]=t[0]*n[0],r[1]=t[1]*n[1],r}function x(r,t,n){return r[0]=t[0]/n[0],r[1]=t[1]/n[1],r}function f(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function h(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function M(r,t,n){return r[0]=Math.min(t[0],n[0]),r[1]=Math.min(t[1],n[1]),r}function v(r,t,n){return r[0]=Math.max(t[0],n[0]),r[1]=Math.max(t[1],n[1]),r}function l(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function d(r,t,n){return r[0]=t[0]*n,r[1]=t[1]*n,r}function m(r,t,n,e){return r[0]=t[0]+n[0]*e,r[1]=t[1]+n[1]*e,r}function q(r,t){var n=t[0]-r[0],e=t[1]-r[1];return Math.sqrt(n*n+e*e)}function A(r,t){var n=t[0]-r[0],e=t[1]-r[1];return n*n+e*e}function b(r){var t=r[0],n=r[1];return Math.sqrt(t*t+n*n)}function P(r){var t=r[0],n=r[1];return t*t+n*n}function E(r,t){return r[0]=-t[0],r[1]=-t[1],r}function R(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function Y(r,t){var n=t[0],e=t[1],o=n*n+e*e;return o>0&&(o=1/Math.sqrt(o),r[0]=t[0]*o,r[1]=t[1]*o),r}function _(r,t){return r[0]*t[0]+r[1]*t[1]}function g(r,t,n){var e=t[0]*n[1]-t[1]*n[0];return r[0]=r[1]=0,r[2]=e,r}function y(r,t,n,e){var o=t[0],s=t[1];return r[0]=o+e*(n[0]-o),r[1]=s+e*(n[1]-s),r}function O(r,n){n=n||1;var e=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(e)*n,r[1]=Math.sin(e)*n,r}function L(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[2]*o,r[1]=n[1]*e+n[3]*o,r}function w(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[2]*o+n[4],r[1]=n[1]*e+n[3]*o+n[5],r}function D(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[3]*o+n[6],r[1]=n[1]*e+n[4]*o+n[7],r}function I(r,t,n){var e=t[0],o=t[1];return r[0]=n[0]*e+n[4]*o+n[12],r[1]=n[1]*e+n[5]*o+n[13],r}function T(r,t,n,e){var o=t[0]-n[0],s=t[1]-n[1],a=Math.sin(e),u=Math.cos(e);return r[0]=o*u-s*a+n[0],r[1]=o*a+s*u+n[1],r}function j(r,t){var n=r[0],e=r[1],o=t[0],s=t[1],a=n*n+e*e;a>0&&(a=1/Math.sqrt(a));var u=o*o+s*s;u>0&&(u=1/Math.sqrt(u));var i=(n*o+e*s)*a*u;return i>1?0:i<-1?Math.PI:Math.acos(i)}function N(r){return"vec2("+r[0]+", "+r[1]+")"}function S(r,t){return r[0]===t[0]&&r[1]===t[1]}function z(r,n){var e=r[0],o=r[1],s=n[0],a=n[1];return Math.abs(e-s)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-a)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))}var F=exports.len=b,V=exports.sub=c,k=exports.mul=p,B=exports.div=x,C=exports.dist=q,G=exports.sqrDist=A,H=exports.sqrLen=P,J=exports.forEach=function(){var r=e();return function(t,n,e,o,s,a){var u=void 0,i=void 0;for(n||(n=2),e||(e=0),i=o?Math.min(o*n+e,t.length):t.length,u=e;u<i;u+=n)r[0]=t[u],r[1]=t[u+1],s(r,r,a),t[u]=r[0],t[u+1]=r[1];return t}}();
},{"./common.js":"jN7T"}],"pZss":[function(require,module,exports) {
var t=require("@antv/gl-matrix/lib/gl-matrix/vec2"),r=require("../math/clamp");t.angle=function(n,e){var a=t.dot(n,e)/(t.length(n)*t.length(e));return Math.acos(r(a,-1,1))},t.direction=function(t,r){return t[0]*r[1]-r[0]*t[1]},t.angleTo=function(r,n,e){var a=t.angle(r,n),i=t.direction(r,n)>=0;return e?i?2*Math.PI-a:a:i?a:2*Math.PI-a},t.vertical=function(t,r,n){return n?(t[0]=r[1],t[1]=-1*r[0]):(t[0]=-1*r[1],t[1]=r[0]),t},module.exports=t;
},{"@antv/gl-matrix/lib/gl-matrix/vec2":"tKTJ","../math/clamp":"HCgL"}],"BjeH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0,exports.create=e,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=x,exports.multiply=p,exports.divide=f,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=q,exports.squaredDistance=A,exports.squaredLength=P,exports.negate=E,exports.inverse=R,exports.normalize=Y,exports.dot=O,exports.cross=_,exports.lerp=g,exports.hermite=y,exports.bezier=L,exports.random=D,exports.transformMat4=I,exports.transformMat3=N,exports.transformQuat=w,exports.rotateX=T,exports.rotateY=j,exports.rotateZ=S,exports.angle=z,exports.str=F,exports.exactEquals=Q,exports.equals=V;var t=require("./common.js"),r=n(t);function n(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}function e(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var n=new r.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function a(t){var r=t[0],n=t[1],e=t[2];return Math.sqrt(r*r+n*n+e*e)}function s(t,n,e){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=n,o[2]=e,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,n,e){return t[0]=r,t[1]=n,t[2]=e,t}function c(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t}function x(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t}function p(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t}function f(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t}function l(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t}function b(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t}function q(t,r){var n=r[0]-t[0],e=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(n*n+e*e+o*o)}function A(t,r){var n=r[0]-t[0],e=r[1]-t[1],o=r[2]-t[2];return n*n+e*e+o*o}function P(t){var r=t[0],n=t[1],e=t[2];return r*r+n*n+e*e}function E(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function Y(t,r){var n=r[0],e=r[1],o=r[2],a=n*n+e*e+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a),t}function O(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function _(t,r,n){var e=r[0],o=r[1],a=r[2],s=n[0],u=n[1],i=n[2];return t[0]=o*i-a*u,t[1]=a*s-e*i,t[2]=e*u-o*s,t}function g(t,r,n,e){var o=r[0],a=r[1],s=r[2];return t[0]=o+e*(n[0]-o),t[1]=a+e*(n[1]-a),t[2]=s+e*(n[2]-s),t}function y(t,r,n,e,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),x=s*(3-2*a);return t[0]=r[0]*u+n[0]*i+e[0]*c+o[0]*x,t[1]=r[1]*u+n[1]*i+e[1]*c+o[1]*x,t[2]=r[2]*u+n[2]*i+e[2]*c+o[2]*x,t}function L(t,r,n,e,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,x=3*a*u,p=3*i*s,f=i*a;return t[0]=r[0]*c+n[0]*x+e[0]*p+o[0]*f,t[1]=r[1]*c+n[1]*x+e[1]*p+o[1]*f,t[2]=r[2]*c+n[2]*x+e[2]*p+o[2]*f,t}function D(t,n){n=n||1;var e=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=o*n,t}function I(t,r,n){var e=r[0],o=r[1],a=r[2],s=n[3]*e+n[7]*o+n[11]*a+n[15];return s=s||1,t[0]=(n[0]*e+n[4]*o+n[8]*a+n[12])/s,t[1]=(n[1]*e+n[5]*o+n[9]*a+n[13])/s,t[2]=(n[2]*e+n[6]*o+n[10]*a+n[14])/s,t}function N(t,r,n){var e=r[0],o=r[1],a=r[2];return t[0]=e*n[0]+o*n[3]+a*n[6],t[1]=e*n[1]+o*n[4]+a*n[7],t[2]=e*n[2]+o*n[5]+a*n[8],t}function w(t,r,n){var e=n[0],o=n[1],a=n[2],s=n[3],u=r[0],i=r[1],c=r[2],x=o*c-a*i,p=a*u-e*c,f=e*i-o*u,h=o*f-a*p,M=a*x-e*f,v=e*p-o*x,l=2*s;return x*=l,p*=l,f*=l,h*=2,M*=2,v*=2,t[0]=u+x+h,t[1]=i+p+M,t[2]=c+f+v,t}function T(t,r,n,e){var o=[],a=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(e)-o[2]*Math.sin(e),a[2]=o[1]*Math.sin(e)+o[2]*Math.cos(e),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function j(t,r,n,e){var o=[],a=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],a[0]=o[2]*Math.sin(e)+o[0]*Math.cos(e),a[1]=o[1],a[2]=o[2]*Math.cos(e)-o[0]*Math.sin(e),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function S(t,r,n,e){var o=[],a=[];return o[0]=r[0]-n[0],o[1]=r[1]-n[1],o[2]=r[2]-n[2],a[0]=o[0]*Math.cos(e)-o[1]*Math.sin(e),a[1]=o[0]*Math.sin(e)+o[1]*Math.cos(e),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function z(t,r){var n=s(t[0],t[1],t[2]),e=s(r[0],r[1],r[2]);Y(n,n),Y(e,e);var o=O(n,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}function F(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Q(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function V(t,n){var e=t[0],o=t[1],a=t[2],s=n[0],u=n[1],i=n[2];return Math.abs(e-s)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var X=exports.sub=x,Z=exports.mul=p,k=exports.div=f,B=exports.dist=q,C=exports.sqrDist=A,G=exports.len=a,H=exports.sqrLen=P,J=exports.forEach=function(){var t=e();return function(r,n,e,o,a,s){var u=void 0,i=void 0;for(n||(n=3),e||(e=0),i=o?Math.min(o*n+e,r.length):r.length,u=e;u<i;u+=n)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();
},{"./common.js":"jN7T"}],"yEtI":[function(require,module,exports) {
var r=require("@antv/gl-matrix/lib/gl-matrix/vec3");module.exports=r;
},{"@antv/gl-matrix/lib/gl-matrix/vec3":"BjeH"}],"PNH0":[function(require,module,exports) {
var e=require("../clone"),r=require("../each"),a=require("./mat3");module.exports=function(t,c){return t=e(t),r(c,function(e){switch(e[0]){case"t":a.translate(t,t,[e[1],e[2]]);break;case"s":a.scale(t,t,[e[1],e[2]]);break;case"r":a.rotate(t,t,e[1]);break;case"m":a.multiply(t,t,e[1]);break;default:return!1}}),t};
},{"../clone":"Gja6","../each":"yLcf","./mat3":"K0Bf"}],"DZn6":[function(require,module,exports) {
module.exports={isFunction:require("@antv/util/lib/type/is-function"),isObject:require("@antv/util/lib/type/is-object"),isBoolean:require("@antv/util/lib/type/is-boolean"),isNil:require("@antv/util/lib/type/is-nil"),isString:require("@antv/util/lib/type/is-string"),isArray:require("@antv/util/lib/type/is-array"),isNumber:require("@antv/util/lib/type/is-number"),isEmpty:require("@antv/util/lib/is-empty"),uniqueId:require("@antv/util/lib/unique-id"),clone:require("@antv/util/lib/clone"),deepMix:require("@antv/util/lib/deep-mix"),assign:require("@antv/util/lib/mix"),merge:require("@antv/util/lib/deep-mix"),upperFirst:require("@antv/util/lib/string/upper-first"),each:require("@antv/util/lib/each"),isEqual:require("@antv/util/lib/is-equal"),toArray:require("@antv/util/lib/to-array"),extend:require("@antv/util/lib/extend"),augment:require("@antv/util/lib/augment"),remove:require("@antv/util/lib/array/pull"),isNumberEqual:require("@antv/util/lib/math/is-number-equal"),toRadian:require("@antv/util/lib/math/to-radian"),toDegree:require("@antv/util/lib/math/to-degree"),mod:require("@antv/util/lib/math/mod"),clamp:require("@antv/util/lib/math/clamp"),createDom:require("@antv/util/lib/dom/create-dom"),modifyCSS:require("@antv/util/lib/dom/modify-css"),requestAnimationFrame:require("@antv/util/lib/dom/request-animation-frame"),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:require("@antv/util/lib/matrix/mat3"),vec2:require("@antv/util/lib/matrix/vec2"),vec3:require("@antv/util/lib/matrix/vec3"),transform:require("@antv/util/lib/matrix/transform")};
},{"@antv/util/lib/type/is-function":"yged","@antv/util/lib/type/is-object":"xWET","@antv/util/lib/type/is-boolean":"EI7r","@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/type/is-string":"Uo9S","@antv/util/lib/type/is-array":"RVyA","@antv/util/lib/type/is-number":"GpWy","@antv/util/lib/is-empty":"Fsar","@antv/util/lib/unique-id":"aP8D","@antv/util/lib/clone":"Gja6","@antv/util/lib/deep-mix":"AIel","@antv/util/lib/mix":"eGDv","@antv/util/lib/string/upper-first":"HEpt","@antv/util/lib/each":"yLcf","@antv/util/lib/is-equal":"eRQR","@antv/util/lib/to-array":"QQdW","@antv/util/lib/extend":"zFO7","@antv/util/lib/augment":"EVXn","@antv/util/lib/array/pull":"zD4U","@antv/util/lib/math/is-number-equal":"JGRU","@antv/util/lib/math/to-radian":"TIkE","@antv/util/lib/math/to-degree":"keho","@antv/util/lib/math/mod":"Reb9","@antv/util/lib/math/clamp":"HCgL","@antv/util/lib/dom/create-dom":"BIv4","@antv/util/lib/dom/modify-css":"TgLT","@antv/util/lib/dom/request-animation-frame":"Nikq","@antv/util/lib/matrix/mat3":"K0Bf","@antv/util/lib/matrix/vec2":"pZss","@antv/util/lib/matrix/vec3":"yEtI","@antv/util/lib/matrix/transform":"PNH0"}],"wF6e":[function(require,module,exports) {
var e=require("./common"),r={};e.merge(r,e,{mixin:function(e,m){var i=e.CFG?"CFG":"ATTRS";if(e&&m){e._mixins=m,e[i]=e[i]||{};var n={};r.each(m,function(m){r.augment(e,m);var a=m[i];a&&r.merge(n,a)}),e[i]=r.merge(n,e[i])}}}),module.exports=r;
},{"./common":"DZn6"}],"c2lg":[function(require,module,exports) {
var t=require("./util/index"),e=function(t,e,n,i){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};t.augment(e,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),module.exports=e;
},{"./util/index":"wF6e"}],"d3RA":[function(require,module,exports) {
var t=require("../../util/index");module.exports={canFill:!1,canStroke:!1,initAttrs:function(r){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),r)),this},getDefaultAttrs:function(){return{}},attr:function(r,i){if(0===arguments.length)return this._attrs;if(t.isObject(r)){for(var s in r)this._setAttr(s,r[s]);return this.clearBBox(),this._cfg.hasUpdate=!0,this}return 2===arguments.length?(this._setAttr(r,i),this.clearBBox(),this._cfg.hasUpdate=!0,this):this._attrs[r]},_setAttr:function(t,r){var i=this._attrs;i[t]=r,"fill"!==t&&"stroke"!==t?"opacity"!==t?"clip"===t&&r?this._setClip(r):"path"===t&&this._afterSetAttrPath?this._afterSetAttrPath(r):"transform"!==t?"rotate"===t&&this.rotateAtStart(r):this.transform(r):i.globalAlpha=r:i[t+"Style"]=r},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(t){t._cfg.renderer=this._cfg.renderer,t._cfg.canvas=this._cfg.canvas,t._cfg.parent=this._cfg.parent,t.hasFill=function(){return!0}}};
},{"../../util/index":"wF6e"}],"r1K9":[function(require,module,exports) {
var t=require("../../util/index");function r(t){return 1===t[0]&&0===t[1]&&0===t[3]&&1===t[4]&&0===t[6]&&0===t[7]}function a(t){return 0===t[1]&&0===t[3]&&0===t[6]&&0===t[7]}function i(i,s){r(s)||(a(s)?(i[0]*=s[0],i[4]*=s[4]):t.mat3.multiply(i,i,s))}module.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(r,a){var i=this._attrs.matrix;return t.mat3.translate(i,i,[r,a]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(r){var a=this._attrs.matrix;return t.mat3.rotate(a,a,r),this.clearTotalMatrix(),this.attr("matrix",a),this},scale:function(r,a){var i=this._attrs.matrix;return t.mat3.scale(i,i,[r,a]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(t){var r=this._attrs.x||this._cfg.attrs.x,a=this._attrs.y||this._cfg.attrs.y;return Math.abs(t)>2*Math.PI&&(t=t/180*Math.PI),this.transform([["t",-r,-a],["r",t],["t",r,a]])},move:function(t,r){var a=this.get("x")||0,i=this.get("y")||0;return this.translate(t-a,r-i),this.set("x",t),this.set("y",r),this},transform:function(r){var a=this,i=this._attrs.matrix;return t.each(r,function(r){switch(r[0]){case"t":a.translate(r[1],r[2]);break;case"s":a.scale(r[1],r[2]);break;case"r":a.rotate(r[1]);break;case"m":a.attr("matrix",t.mat3.multiply([],i,r[1])),a.clearTotalMatrix()}}),a},setTransform:function(t){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(t)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(t){return this.attr("matrix",t),this.clearTotalMatrix(),this},apply:function(r,a){var i;return i=a?this._getMatrixByRoot(a):this.attr("matrix"),t.vec3.transformMat3(r,r,i),this},_getMatrixByRoot:function(r){r=r||this;for(var a=this,i=[];a!==r;)i.unshift(a),a=a.get("parent");i.unshift(a);var s=[1,0,0,0,1,0,0,0,1];return t.each(i,function(r){t.mat3.multiply(s,r.attr("matrix"),s)}),s},getTotalMatrix:function(){var t=this._cfg.totalMatrix;if(!t){t=[1,0,0,0,1,0,0,0,1];var r=this._cfg.parent;if(r)i(t,r.getTotalMatrix());i(t,this.attr("matrix")),this._cfg.totalMatrix=t}return t},clearTotalMatrix:function(){},invert:function(r){var i=this.getTotalMatrix();if(a(i))r[0]/=i[0],r[1]/=i[4];else{var s=t.mat3.invert([],i);s&&t.vec3.transformMat3(r,r,s)}return this},resetTransform:function(t){var a=this.attr("matrix");r(a)||t.transform(a[0],a[1],a[3],a[4],a[6],a[7])}};
},{"../../util/index":"wF6e"}],"BHIS":[function(require,module,exports) {
var t=require("../../util/index"),e={delay:"delay",rotate:"rotate"},i={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function a(t,e){var i={},a=e._attrs;for(var r in t.attrs)i[r]=a[r];return i}function r(a,r){var s={matrix:null,attrs:{}},n=r._attrs;for(var o in a)if("transform"===o)s.matrix=t.transform(r.getMatrix(),a[o]);else if("rotate"===o)s.matrix=t.transform(r.getMatrix(),[["r",a[o]]]);else if("matrix"===o)s.matrix=a[o];else{if(i[o]&&/^[r,R,L,l]{1}[\s]*\(/.test(a[o]))continue;e[o]||n[o]===a[o]||(s.attrs[o]=a[o])}return s}function s(e,i){var a=i.delay,r=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(i,s){t.each(e,function(t){a<t.startTime+t.duration&&r.call(t.toAttrs,s)&&(delete t.toAttrs[s],delete t.fromAttrs[s])})}),i.toMatrix&&t.each(e,function(t){a<t.startTime+t.duration&&t.toMatrix&&delete t.toMatrix}),e}module.exports={animate:function(e,i,n,o,l){void 0===l&&(l=0);this.set("animating",!0);var m=this.get("timeline");m||(m=this.get("canvas").get("timeline"),this.setSilent("timeline",m));var u=this.get("animators")||[];m._timer||m.initTimer(),t.isNumber(o)&&(l=o,o=null),t.isFunction(n)?(o=n,n="easeLinear"):n=n||"easeLinear";var h=r(e,this),c={fromAttrs:a(h,this),toAttrs:h.attrs,fromMatrix:t.clone(this.getMatrix()),toMatrix:h.matrix,duration:i,easing:n,callback:o,delay:l,startTime:m.getTime(),id:t.uniqueId()};u.length>0?u=s(u,c):m.addAnimator(this),u.push(c),this.setSilent("animators",u),this.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var e=this,i=this.get("animators");t.each(i,function(t){e.attr(t.toAttrs),t.toMatrix&&e.attr("matrix",t.toMatrix),t.callback&&t.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var t=this.get("timeline");return this.setSilent("pause",{isPaused:!0,pauseTime:t.getTime()}),this},resumeAnimate:function(){var e=this.get("timeline").getTime(),i=this.get("animators"),a=this.get("pause").pauseTime;return t.each(i,function(t){t.startTime=t.startTime+(e-a),t._paused=!1,t._pauseTime=null}),this.setSilent("pause",{isPaused:!1}),this.setSilent("animators",i),this}};
},{"../../util/index":"wF6e"}],"AiWi":[function(require,module,exports) {
var define;
var e;!function(t){"use strict";function n(){}var r=n.prototype,i=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},r.on=o("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=o("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],t))&&i[r].splice(n,1);return this},r.off=o("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=o("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},r.trigger=o("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},n.noConflict=function(){return t.EventEmitter=i,n},"function"==typeof e&&e.amd?e(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:t.EventEmitter=n}(this||{});
},{}],"KC3Q":[function(require,module,exports) {
var t=require("../util/index"),e=require("./mixin/attribute"),i=require("./mixin/transform"),n=require("./mixin/animation"),r=require("wolfy87-eventemitter"),s=function(e){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),e),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};s.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(s,e,i,r,n,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(t,e){return"zIndex"===t&&this._beforeSetZIndex&&this._beforeSetZIndex(e),"loading"===t&&this._beforeSetLoading&&this._beforeSetLoading(e),this._cfg[t]=e,this},setSilent:function(t,e){this._cfg[t]=e},get:function(t){return this._cfg[t]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(e,i){var n=this._cfg,r=n.parent,s=n.el;return r&&t.remove(r.get("children"),this),s&&(i?r&&r._cfg.tobeRemoved.push(s):s.parentNode.removeChild(s)),(e||void 0===e)&&this.destroy(),this},destroy:function(){this.get("destroyed")||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var t=this._cfg,e=t.parent;if(e){var i=e._cfg.children,n=t.el,r=i.indexOf(this);i.splice(r,1),i.push(this),n&&(n.parentNode.removeChild(n),t.el=null)}},toBack:function(){var t=this._cfg,e=t.parent;if(e){var i=e._cfg.children,n=t.el,r=i.indexOf(this);if(i.splice(r,1),i.unshift(this),n){var s=n.parentNode;s.removeChild(n),s.insertBefore(n,s.firstChild)}}},_beforeSetZIndex:function(e){var i=this._cfg.parent;this._cfg.zIndex=e,t.isNil(i)||i.sort();var n=this._cfg.el;if(n){var r=i._cfg.children,s=r.indexOf(this),o=n.parentNode;o.removeChild(n),s===r.length-1?o.appendChild(n):o.insertBefore(n,o.childNodes[s])}return e},_setAttrs:function(t){return this.attr(t),t},setZIndex:function(t){return this._cfg.zIndex=t,this._beforeSetZIndex(t)},clone:function(){return t.clone(this)},getBBox:function(){}}),module.exports=s;
},{"../util/index":"wF6e","./mixin/attribute":"d3RA","./mixin/transform":"r1K9","./mixin/animation":"BHIS","wolfy87-eventemitter":"AiWi"}],"IQMg":[function(require,module,exports) {
var t=require("../../util/index").vec2;module.exports={at:function(t,a,n){return(a-t)*n+t},pointDistance:function(a,n,r,e,i,u){var m=[r-a,e-n];if(t.exactEquals(m,[0,0]))return NaN;var o=[-m[1],m[0]];t.normalize(o,o);var x=[i-a,u-n];return Math.abs(t.dot(x,o))},box:function(t,a,n,r,e){var i=e/2,u=Math.min(t,n),m=Math.max(t,n);return{minX:u-i,minY:Math.min(a,r)-i,maxX:m+i,maxY:Math.max(a,r)+i}},len:function(t,a,n,r){return Math.sqrt((n-t)*(n-t)+(r-a)*(r-a))}};
},{"../../util/index":"wF6e"}],"V4gz":[function(require,module,exports) {
var r=require("../../util/index"),e=r.vec2;function t(r,e,t,n){var a=1-n;return a*(a*r+2*n*e)+n*n*t}function n(r,n,a,u,i,o,c,s,v){var f,q,d,x,D,l,m,p=.005,b=1/0,h=[c,s];for(D=0;D<1;D+=.05)d=[t(r,a,i,D),t(n,u,o,D)],(q=e.squaredDistance(h,d))<b&&(f=D,b=q);for(b=1/0,m=0;m<32&&!(p<1e-4);m++){var j=f-p,y=f+p;d=[t(r,a,i,j),t(n,u,o,j)],q=e.squaredDistance(h,d),j>=0&&q<b?(f=j,b=q):(x=[t(r,a,i,y),t(n,u,o,y)],l=e.squaredDistance(h,x),y<=1&&l<b?(f=y,b=l):p*=.5)}return v&&(v.x=t(r,a,i,f),v.y=t(n,u,o,f)),Math.sqrt(b)}function a(e,t,n){var a=e+n-2*t;if(r.isNumberEqual(a,0))return[.5];var u=(e-t)/a;return u<=1&&u>=0?[u]:[]}module.exports={at:t,projectPoint:function(r,e,t,a,u,i,o,c){var s={};return n(r,e,t,a,u,i,o,c,s),s},pointDistance:n,extrema:a};
},{"../../util/index":"wF6e"}],"Pg5K":[function(require,module,exports) {
var r=require("../../util/index"),t=r.vec2;function e(r,t,e,u,n){var a=1-n;return a*a*(a*u+3*n*e)+n*n*(n*r+3*a*t)}function u(r,t,e,u,n){var a=1-n;return 3*(((t-r)*a+2*(e-t)*n)*a+(u-e)*n*n)}function n(r,u,n,a,i,s,o,c,v,f,q){var l,h,p,d,m,x,D,N,b=.005,E=1/0,M=[v,f];for(h=0;h<1;h+=.05)p=[e(r,n,i,o,h),e(u,a,s,c,h)],(d=t.squaredDistance(M,p))<E&&(l=h,E=d);E=1/0;for(var j=0;j<32&&!(b<1e-4);j++)N=l+b,p=[e(r,n,i,o,D=l-b),e(u,a,s,c,D)],d=t.squaredDistance(M,p),D>=0&&d<E?(l=D,E=d):(x=[e(r,n,i,o,N),e(u,a,s,c,N)],m=t.squaredDistance(M,x),N<=1&&m<E?(l=N,E=m):b*=.5);return q&&(q.x=e(r,n,i,o,l),q.y=e(u,a,s,c,l)),Math.sqrt(E)}function a(t,e,u,n){var a,i,s,o=3*t-9*e+9*u-3*n,c=6*e-12*u+6*n,v=3*u-3*n,f=[];if(r.isNumberEqual(o,0))r.isNumberEqual(c,0)||(a=-v/c)>=0&&a<=1&&f.push(a);else{var q=c*c-4*o*v;r.isNumberEqual(q,0)?f.push(-c/(2*o)):q>0&&(i=(-c-(s=Math.sqrt(q)))/(2*o),(a=(-c+s)/(2*o))>=0&&a<=1&&f.push(a),i>=0&&i<=1&&f.push(i))}return f}function i(r,t,e,u,n){return r*(r*(-3*t+9*e-9*u+3*n)+6*t-12*e+6*u)-3*t+3*e}function s(t,e,u,n,a,s,o,c,v){r.isNil(v)&&(v=1);for(var f=(v=v>1?1:v<0?0:v)/2,q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=f*q[p]+f,m=i(d,t,u,a,o),x=i(d,e,n,s,c),D=m*m+x*x;h+=l[p]*Math.sqrt(D)}return f*h}module.exports={at:e,derivativeAt:u,projectPoint:function(r,t,e,u,a,i,s,o,c,v){var f={};return n(r,t,e,u,a,i,s,o,c,v,f),f},pointDistance:n,extrema:a,len:s};
},{"../../util/index":"wF6e"}],"fxth":[function(require,module,exports) {
var t=require("../../util/index");function n(t,n,a,r){return{x:Math.cos(r)*a+t,y:Math.sin(r)*a+n}}function a(t,n,a,r){var u,e;return r?t<n?(u=n-t,e=2*Math.PI-a+t):t>a&&(u=2*Math.PI-t+n,e=t-a):(u=t-n,e=a-t),u>e?a:n}function r(n,r,u,e){var h=0;return u-r>=2*Math.PI&&(h=2*Math.PI),r=t.mod(r,2*Math.PI),u=t.mod(u,2*Math.PI)+h,n=t.mod(n,2*Math.PI),e?r>=u?n>u&&n<r?n:a(n,u,r,!0):n<r||n>u?n:a(n,r,u):r<=u?r<n&&n<u?n:a(n,r,u,!0):n>r||n<u?n:a(n,u,r)}function u(n,a,u,e,h,o,i,c,s){var M=[i,c],v=[n,a],x=t.vec2.subtract([],M,v),P=t.vec2.angleTo([1,0],x);P=r(P,e,h,o);var I=[u*Math.cos(P)+n,u*Math.sin(P)+a];return s&&(s.x=I[0],s.y=I[1]),t.vec2.distance(I,M)}function e(a,u,e,h,o,i){var c=Math.PI/2,s=Math.PI,M=3*Math.PI/2,v=[],x=r(0,h,o,i);0===x&&v.push(n(a,u,e,0)),(x=r(c,h,o,i))===c&&v.push(n(a,u,e,c)),(x=r(s,h,o,i))===s&&v.push(n(a,u,e,s)),(x=r(M,h,o,i))===M&&v.push(n(a,u,e,M)),v.push(n(a,u,e,h)),v.push(n(a,u,e,o));var P=1/0,I=-1/0,p=1/0,m=-1/0;return t.each(v,function(t){P>t.x&&(P=t.x),I<t.x&&(I=t.x),p>t.y&&(p=t.y),m<t.y&&(m=t.y)}),{minX:P,minY:p,maxX:I,maxY:m}}module.exports={nearAngle:r,projectPoint:function(t,n,a,r,e,h,o,i){var c={};return u(t,n,a,r,e,h,o,i,c),c},pointDistance:u,box:e};
},{"../../util/index":"wF6e"}],"bIhL":[function(require,module,exports) {
var n=require("../math/line"),r=require("../math/quadratic"),t=require("../math/cubic"),i=require("../math/arc");module.exports={line:function(r,t,i,e,u,a,c){var o=n.box(r,t,i,e,u);if(!this.box(o.minX,o.maxX,o.minY,o.maxY,a,c))return!1;var f=n.pointDistance(r,t,i,e,a,c);return!isNaN(f)&&f<=u/2},polyline:function(n,r,t,i){var e=n.length-1;if(e<1)return!1;for(var u=0;u<e;u++){var a=n[u][0],c=n[u][1],o=n[u+1][0],f=n[u+1][1];if(this.line(a,c,o,f,r,t,i))return!0}return!1},cubicline:function(n,r,i,e,u,a,c,o,f,l,h){return t.pointDistance(n,r,i,e,u,a,c,o,l,h)<=f/2},quadraticline:function(n,t,i,e,u,a,c,o,f){return r.pointDistance(n,t,i,e,u,a,o,f)<=c/2},arcline:function(n,r,t,e,u,a,c,o,f){return i.pointDistance(n,r,t,e,u,a,o,f)<=c/2},rect:function(n,r,t,i,e,u){return n<=e&&e<=n+t&&r<=u&&u<=r+i},circle:function(n,r,t,i,e){return Math.pow(i-n,2)+Math.pow(e-r,2)<=Math.pow(t,2)},box:function(n,r,t,i,e,u){return n<=e&&e<=r&&t<=u&&u<=i}};
},{"../math/line":"IQMg","../math/quadratic":"V4gz","../math/cubic":"Pg5K","../math/arc":"fxth"}],"z6YX":[function(require,module,exports) {
module.exports={xAt:function(t,a,n,h,M){return a*Math.cos(t)*Math.cos(M)-n*Math.sin(t)*Math.sin(M)+h},yAt:function(t,a,n,h,M){return a*Math.sin(t)*Math.cos(M)+n*Math.cos(t)*Math.sin(M)+h},xExtrema:function(t,a,n){return Math.atan(-n/a*Math.tan(t))},yExtrema:function(t,a,n){return Math.atan(n/(a*Math.tan(t)))}};
},{}],"hjXP":[function(require,module,exports) {
var t=require("../../util/index"),i=require("../../shapes/util/inside"),e={arc:require("../../shapes/math/arc"),ellipse:require("../../shapes/math/ellipse"),line:require("../../shapes/math/line")},r=t.createDom('<canvas width="500" height="500"></canvas>'),n=r.getContext("2d");function a(t,i,e){return e.createPath(n),n.isPointInPath(t,i)}var s=function(t,e){var r=this._attrs,n=r.x,a=r.y,s=r.r,h=r.startAngle,l=r.endAngle,c=r.clockwise,u=this.getHitLineWidth();return!!this.hasStroke()&&i.arcline(n,a,s,h,l,c,u,t,e)},h=function(t,e){var r=this._attrs,n=r.x,a=r.y,s=r.r,h=this.getHitLineWidth(),l=this.hasFill(),c=this.hasStroke();return l&&c?i.circle(n,a,s,t,e)||i.arcline(n,a,s,0,2*Math.PI,!1,h,t,e):l?i.circle(n,a,s,t,e):!!c&&i.arcline(n,a,s,0,2*Math.PI,!1,h,t,e)},l=function(e,r){var n=this._attrs,a=this.hasFill(),s=this.hasStroke(),h=n.x,l=n.y,c=n.rx,u=n.ry,o=this.getHitLineWidth(),g=c>u?c:u,f=c>u?1:c/u,v=c>u?u/c:1,x=[e,r,1],y=[1,0,0,0,1,0,0,0,1];t.mat3.scale(y,y,[f,v]),t.mat3.translate(y,y,[h,l]);var d=t.mat3.invert([],y);return t.vec3.transformMat3(x,x,d),a&&s?i.circle(0,0,g,x[0],x[1])||i.arcline(0,0,g,0,2*Math.PI,!1,o,x[0],x[1]):a?i.circle(0,0,g,x[0],x[1]):!!s&&i.arcline(0,0,g,0,2*Math.PI,!1,o,x[0],x[1])},c=function(r,n){var a=this,s=a.hasFill(),h=a.hasStroke(),l=a._attrs,c=l.x,u=l.y,o=l.rs,g=l.re,f=l.startAngle,v=l.endAngle,x=l.clockwise,y=[r-c,n-u],d=t.vec2.angleTo([1,0],y);function m(){var i=e.arc.nearAngle(d,f,v,x);if(t.isNumberEqual(d,i)){var r=t.vec2.squaredLength(y);if(o*o<=r&&r<=g*g)return!0}return!1}function M(){var t=a.getHitLineWidth(),e={x:Math.cos(f)*o+c,y:Math.sin(f)*o+u},s={x:Math.cos(f)*g+c,y:Math.sin(f)*g+u},h={x:Math.cos(v)*o+c,y:Math.sin(v)*o+u},l={x:Math.cos(v)*g+c,y:Math.sin(v)*g+u};return!!i.line(e.x,e.y,s.x,s.y,t,r,n)||(!!i.line(h.x,h.y,l.x,l.y,t,r,n)||(!!i.arcline(c,u,o,f,v,x,t,r,n)||!!i.arcline(c,u,g,f,v,x,t,r,n)))}return s&&h?m()||M():s?m():!!h&&M()},u=function(t,e){var r=this._attrs;if(this.get("toDraw")||!r.img)return!1;this._cfg.attrs&&this._cfg.attrs.img===r.img||this._setAttrImg();var n=r.x,a=r.y,s=r.width,h=r.height;return i.rect(n,a,s,h,t,e)},o=function(t,e){var r=this._attrs,n=r.x1,a=r.y1,s=r.x2,h=r.y2,l=this.getHitLineWidth();return!!this.hasStroke()&&i.line(n,a,s,h,l,t,e)},g=function(i,e){var r=this,n=r.get("segments"),s=r.hasFill(),h=r.hasStroke();function l(){if(!t.isEmpty(n)){for(var a=r.getHitLineWidth(),s=0,h=n.length;s<h;s++)if(n[s].isInside(i,e,a))return!0;return!1}}return s&&h?a(i,e,r)||l():s?a(i,e,r):!!h&&l()},f=function(t,e){var r=this,n=r.hasFill(),s=r.hasStroke();function h(){var n=r._attrs.points;if(n.length<2)return!1;var a=r.getHitLineWidth(),s=n.slice(0);return n.length>=3&&s.push(n[0]),i.polyline(s,a,t,e)}return n&&s?a(t,e,r)||h():n?a(t,e,r):!!s&&h()},v=function(t,e){var r=this._attrs,n=r.x,a=r.y,s=r.radius||r.r,h=this.getHitLineWidth();return i.circle(n,a,s+h/2,t,e)},x=function(t,e){var r=this._attrs;if(this.hasStroke()){var n=r.points;if(n.length<2)return!1;var a=r.lineWidth;return i.polyline(n,a,t,e)}return!1},y=function(t,e){var r=this,n=r.hasFill(),s=r.hasStroke();function h(){var n=r._attrs,a=n.x,s=n.y,h=n.width,l=n.height,c=n.radius,u=r.getHitLineWidth();if(0===c){var o=u/2;return i.line(a-o,s,a+h+o,s,u,t,e)||i.line(a+h,s-o,a+h,s+l+o,u,t,e)||i.line(a+h+o,s+l,a-o,s+l,u,t,e)||i.line(a,s+l+o,a,s-o,u,t,e)}return i.line(a+c,s,a+h-c,s,u,t,e)||i.line(a+h,s+c,a+h,s+l-c,u,t,e)||i.line(a+h-c,s+l,a+c,s+l,u,t,e)||i.line(a,s+l-c,a,s+c,u,t,e)||i.arcline(a+h-c,s+c,c,1.5*Math.PI,2*Math.PI,!1,u,t,e)||i.arcline(a+h-c,s+l-c,c,0,.5*Math.PI,!1,u,t,e)||i.arcline(a+c,s+l-c,c,.5*Math.PI,Math.PI,!1,u,t,e)||i.arcline(a+c,s+c,c,Math.PI,1.5*Math.PI,!1,u,t,e)}return n&&s?a(t,e,r)||h():n?a(t,e,r):!!s&&h()},d=function(t,e){var r=this.getBBox();if(this.hasFill()||this.hasStroke())return i.box(r.minX,r.maxX,r.minY,r.maxY,t,e)},m=function(t,e){if(!this._cfg.el)return!1;var r=this._cfg.el.getBBox();return i.box(r.x,r.x+r.width,r.y,r.y+r.height,t,e)},M={arc:s,circle:h,dom:m,ellipse:l,fan:c,image:u,line:o,path:g,marker:v,polygon:f,polyline:x,rect:y,text:d};module.exports={isPointInPath:function(t,i){var e=M[this.type];return!!e&&e.call(this,t,i)}};
},{"../../util/index":"wF6e","../../shapes/util/inside":"bIhL","../../shapes/math/arc":"fxth","../../shapes/math/ellipse":"z6YX","../../shapes/math/line":"IQMg"}],"Zjio":[function(require,module,exports) {
var t=require("../util/index"),i=require("./mixin/isPointInPath"),n=require("./element"),a=require("../shapes/util/inside"),r=function t(i){t.superclass.constructor.call(this,i)};r.ATTRS={},t.extend(r,n);var e={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function s(i){for(var n=[],a=0;a<i.length;a++)t.isArray(i[a])?n.push([].concat(i[a])):n.push(i[a]);return n}t.augment(r,i,{isShape:!0,drawInner:function(i){var n=this._attrs;this.createPath(i);var a=i.globalAlpha;if(this.hasFill()){var r=n.fillOpacity;t.isNil(r)||1===r?i.fill():(i.globalAlpha=r,i.fill(),i.globalAlpha=a)}if(this.hasStroke()&&this._attrs.lineWidth>0){var e=n.strokeOpacity;t.isNil(e)||1===e||(i.globalAlpha=e),i.stroke()}this.afterPath(i)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(t,i){var n=[t,i,1];if(this.invert(n),this.isHitBox()){var r=this.getBBox();if(r&&!a.box(r.minX,r.maxX,r.minY,r.maxY,n[0],n[1]))return!1}var e=this._attrs.clip;return e?(e.invert(n,this.get("canvas")),!!e.isPointInPath(n[0],n[1])&&this.isPointInPath(n[0],n[1])):this.isPointInPath(n[0],n[1])},calculateBox:function(){return null},getHitLineWidth:function(){var t=this._attrs,i=t.lineAppendWidth||0;return(t.lineWidth||0)+i},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var t=this._cfg.box;return t||((t=this.calculateBox())&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._cfg.box=t),t},clone:function(){var i=null,n=this._attrs,a={};return t.each(n,function(i,r){e[r]&&t.isArray(n[r])?a[r]=s(n[r]):a[r]=n[r]}),i=new this.constructor({attrs:a}),i._cfg.zIndex=this._cfg.zIndex,i}}),module.exports=r;
},{"../util/index":"wF6e","./mixin/isPointInPath":"hjXP","./element":"KC3Q","../shapes/util/inside":"bIhL"}],"mjSS":[function(require,module,exports) {
var r=require("../util/index"),t=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,n=/[^\s\,]+/gi,i={};module.exports={parseRadius:function(t){var n=0,i=0,e=0,a=0;return r.isArray(t)?1===t.length?n=i=e=a=t[0]:2===t.length?(n=e=t[0],i=a=t[1]):3===t.length?(n=t[0],i=a=t[1],e=t[2]):(n=t[0],i=t[1],e=t[2],a=t[3]):n=i=e=a=t,{r1:n,r2:i,r3:e,r4:a}},parsePath:function(i){return i=i||[],r.isArray(i)?i:r.isString(i)?(i=i.match(t),r.each(i,function(t,e){if((t=t.match(n))[0].length>1){var a=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=a}r.each(t,function(r,n){isNaN(r)||(t[n]=+r)}),i[e]=t}),i):void 0},numberToColor:function(r){var t=i[r];if(!t){for(var n=r.toString(16),e=n.length;e<6;e++)n="0"+n;t="#"+n,i[r]=t}return t}};
},{"../util/index":"wF6e"}],"vrtl":[function(require,module,exports) {
var t=require("../../util/index"),a=require("./inside"),n=require("../math/cubic"),r=require("../math/quadratic"),s=require("../math/ellipse"),e=t.vec3,i=t.mat3,h=["m","l","c","a","q","h","v","t","s","z"];function x(t,a,n){return{x:n.x+t,y:n.y+a}}function u(t,a){return{x:a.x+(a.x-t.x),y:a.y+(a.y-t.y)}}function y(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function c(t,a){return(t[0]*a[0]+t[1]*a[1])/(y(t)*y(a))}function m(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(c(t,a))}function o(a,n,r,s,e,i,h){var x=t.mod(t.toRadian(h),2*Math.PI),u=a.x,y=a.y,o=n.x,M=n.y,b=Math.cos(x)*(u-o)/2+Math.sin(x)*(y-M)/2,d=-1*Math.sin(x)*(u-o)/2+Math.cos(x)*(y-M)/2,f=b*b/(e*e)+d*d/(i*i);f>1&&(e*=Math.sqrt(f),i*=Math.sqrt(f));var p=e*e*(d*d)+i*i*(b*b),l=Math.sqrt((e*e*(i*i)-p)/p);r===s&&(l*=-1),isNaN(l)&&(l=0);var v=l*e*d/i,S=l*-i*b/e,P=(u+o)/2+Math.cos(x)*v-Math.sin(x)*S,g=(y+M)/2+Math.sin(x)*v+Math.cos(x)*S,T=m([1,0],[(b-v)/e,(d-S)/i]),k=[(b-v)/e,(d-S)/i],I=[(-1*b-v)/e,(-1*d-S)/i],q=m(k,I);return c(k,I)<=-1&&(q=Math.PI),c(k,I)>=1&&(q=0),0===s&&q>0&&(q-=2*Math.PI),1===s&&q<0&&(q+=2*Math.PI),[a,P,g,e,i,T,q,x,s]}var M=function(t,a,n){this.preSegment=a,this.isLast=n,this.init(t,a)};t.augment(M,{init:function(a,n){var r=a[0];n=n||{endPoint:{x:0,y:0}};var s,e,i,y,c=h.indexOf(r)>=0,m=c?r.toUpperCase():r,M=a,b=n.endPoint,d=M[1],f=M[2];switch(m){default:break;case"M":y=c?x(d,f,b):{x:d,y:f},this.command="M",this.params=[b,y],this.subStart=y,this.endPoint=y;break;case"L":y=c?x(d,f,b):{x:d,y:f},this.command="L",this.params=[b,y],this.subStart=n.subStart,this.endPoint=y,this.endTangent=function(){return[y.x-b.x,y.y-b.y]},this.startTangent=function(){return[b.x-y.x,b.y-y.y]};break;case"H":y=c?x(d,0,b):{x:d,y:b.y},this.command="L",this.params=[b,y],this.subStart=n.subStart,this.endPoint=y,this.endTangent=function(){return[y.x-b.x,y.y-b.y]},this.startTangent=function(){return[b.x-y.x,b.y-y.y]};break;case"V":y=c?x(0,d,b):{x:b.x,y:d},this.command="L",this.params=[b,y],this.subStart=n.subStart,this.endPoint=y,this.endTangent=function(){return[y.x-b.x,y.y-b.y]},this.startTangent=function(){return[b.x-y.x,b.y-y.y]};break;case"Q":c?(s=x(d,f,b),e=x(M[3],M[4],b)):(s={x:d,y:f},e={x:M[3],y:M[4]}),this.command="Q",this.params=[b,s,e],this.subStart=n.subStart,this.endPoint=e,this.endTangent=function(){return[e.x-s.x,e.y-s.y]},this.startTangent=function(){return[b.x-s.x,b.y-s.y]};break;case"T":e=c?x(d,f,b):{x:d,y:f},"Q"===n.command?(s=u(n.params[1],b),this.command="Q",this.params=[b,s,e],this.subStart=n.subStart,this.endPoint=e,this.endTangent=function(){return[e.x-s.x,e.y-s.y]},this.startTangent=function(){return[b.x-s.x,b.y-s.y]}):(this.command="TL",this.params=[b,e],this.subStart=n.subStart,this.endPoint=e,this.endTangent=function(){return[e.x-b.x,e.y-b.y]},this.startTangent=function(){return[b.x-e.x,b.y-e.y]});break;case"C":c?(s=x(d,f,b),e=x(M[3],M[4],b),i=x(M[5],M[6],b)):(s={x:d,y:f},e={x:M[3],y:M[4]},i={x:M[5],y:M[6]}),this.command="C",this.params=[b,s,e,i],this.subStart=n.subStart,this.endPoint=i,this.endTangent=function(){return[i.x-e.x,i.y-e.y]},this.startTangent=function(){return[b.x-s.x,b.y-s.y]};break;case"S":c?(e=x(d,f,b),i=x(M[3],M[4],b)):(e={x:d,y:f},i={x:M[3],y:M[4]}),"C"===n.command?(s=u(n.params[2],b),this.command="C",this.params=[b,s,e,i],this.subStart=n.subStart,this.endPoint=i,this.endTangent=function(){return[i.x-e.x,i.y-e.y]},this.startTangent=function(){return[b.x-s.x,b.y-s.y]}):(this.command="SQ",this.params=[b,e,i],this.subStart=n.subStart,this.endPoint=i,this.endTangent=function(){return[i.x-e.x,i.y-e.y]},this.startTangent=function(){return[b.x-e.x,b.y-e.y]});break;case"A":var p=d,l=f,v=M[3],S=M[4],P=M[5];y=c?x(M[6],M[7],b):{x:M[6],y:M[7]},this.command="A";var g=o(b,y,S,P,p,l,v);this.params=g;var T=n.subStart;this.subStart=T,this.endPoint=y;var k=g[5]%(2*Math.PI);t.isNumberEqual(k,2*Math.PI)&&(k=0);var I=g[6]%(2*Math.PI);t.isNumberEqual(I,2*Math.PI)&&(I=0);var q=.001;this.startTangent=function(){0===P&&(q*=-1);var t=g[3]*Math.cos(k-q)+g[1],a=g[4]*Math.sin(k-q)+g[2];return[t-T.x,a-T.y]},this.endTangent=function(){var t=g[6];t-2*Math.PI<1e-4&&(t=0);var a=g[3]*Math.cos(k+t+q)+g[1],n=g[4]*Math.sin(k+t-q)+g[2];return[b.x-a,b.y-n]};break;case"Z":this.command="Z",this.params=[b,n.subStart],this.subStart=n.subStart,this.endPoint=n.subStart}},isInside:function(t,n,r){var s=this.command,h=this.params,x=this.box;if(x&&!a.box(x.minX,x.maxX,x.minY,x.maxY,t,n))return!1;switch(s){default:break;case"M":return!1;case"TL":case"L":case"Z":return a.line(h[0].x,h[0].y,h[1].x,h[1].y,r,t,n);case"SQ":case"Q":return a.quadraticline(h[0].x,h[0].y,h[1].x,h[1].y,h[2].x,h[2].y,r,t,n);case"C":return a.cubicline(h[0].x,h[0].y,h[1].x,h[1].y,h[2].x,h[2].y,h[3].x,h[3].y,r,t,n);case"A":var u=h,y=u[1],c=u[2],m=u[3],o=u[4],M=u[5],b=u[6],d=u[7],f=u[8],p=m>o?m:o,l=m>o?1:m/o,v=m>o?o/m:1;u=[t,n,1];var S=[1,0,0,0,1,0,0,0,1];return i.translate(S,S,[-y,-c]),i.rotate(S,S,-d),i.scale(S,S,[1/l,1/v]),e.transformMat3(u,u,S),a.arcline(0,0,p,M,M+b,1-f,r,u[0],u[1])}return!1},draw:function(t){var a,n,r,s=this.command,e=this.params;switch(s){default:break;case"M":t.moveTo(e[1].x,e[1].y);break;case"TL":case"L":t.lineTo(e[1].x,e[1].y);break;case"SQ":case"Q":a=e[1],n=e[2],t.quadraticCurveTo(a.x,a.y,n.x,n.y);break;case"C":a=e[1],n=e[2],r=e[3],t.bezierCurveTo(a.x,a.y,n.x,n.y,r.x,r.y);break;case"A":var i=e,h=i[1],x=i[2],u=i[3],y=i[4],c=i[5],m=i[6],o=i[7],M=i[8],b=u>y?u:y,d=u>y?1:u/y,f=u>y?y/u:1;t.translate(h,x),t.rotate(o),t.scale(d,f),t.arc(0,0,b,c,c+m,1-M),t.scale(1/d,1/f),t.rotate(-o),t.translate(-h,-x);break;case"Z":t.closePath()}},getBBox:function(t){var a,e,i,h,x=t/2,u=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(u[0].x,u[1].x)-x,maxX:Math.max(u[0].x,u[1].x)+x,minY:Math.min(u[0].y,u[1].y)-x,maxY:Math.max(u[0].y,u[1].y)+x};break;case"SQ":case"Q":for(i=0,h=(e=r.extrema(u[0].x,u[1].x,u[2].x)).length;i<h;i++)e[i]=r.at(u[0].x,u[1].x,u[2].x,e[i]);for(e.push(u[0].x,u[2].x),i=0,h=(a=r.extrema(u[0].y,u[1].y,u[2].y)).length;i<h;i++)a[i]=r.at(u[0].y,u[1].y,u[2].y,a);a.push(u[0].y,u[2].y),this.box={minX:Math.min.apply(Math,e)-x,maxX:Math.max.apply(Math,e)+x,minY:Math.min.apply(Math,a)-x,maxY:Math.max.apply(Math,a)+x};break;case"C":for(i=0,h=(e=n.extrema(u[0].x,u[1].x,u[2].x,u[3].x)).length;i<h;i++)e[i]=n.at(u[0].x,u[1].x,u[2].x,u[3].x,e[i]);for(i=0,h=(a=n.extrema(u[0].y,u[1].y,u[2].y,u[3].y)).length;i<h;i++)a[i]=n.at(u[0].y,u[1].y,u[2].y,u[3].y,a[i]);e.push(u[0].x,u[3].x),a.push(u[0].y,u[3].y),this.box={minX:Math.min.apply(Math,e)-x,maxX:Math.max.apply(Math,e)+x,minY:Math.min.apply(Math,a)-x,maxY:Math.max.apply(Math,a)+x};break;case"A":var y=u,c=y[1],m=y[2],o=y[3],M=y[4],b=y[5],d=y[6],f=y[7],p=y[8],l=b,v=b+d,S=s.xExtrema(f,o,M),P=1/0,g=-1/0,T=[l,v];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var k=S+i;1===p?l<k&&k<v&&T.push(k):v<k&&k<l&&T.push(k)}for(i=0,h=T.length;i<h;i++){var I=s.xAt(f,o,M,c,T[i]);I<P&&(P=I),I>g&&(g=I)}var q=s.yExtrema(f,o,M),L=1/0,Q=-1/0,C=[l,v];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var X=q+i;1===p?l<X&&X<v&&C.push(X):v<X&&X<l&&C.push(X)}for(i=0,h=C.length;i<h;i++){var Y=s.yAt(f,o,M,m,C[i]);Y<L&&(L=Y),Y>Q&&(Q=Y)}this.box={minX:P-x,maxX:g+x,minY:L-x,maxY:Q+x}}}}),module.exports=M;
},{"../../util/index":"wF6e","./inside":"bIhL","../math/cubic":"Pg5K","../math/quadratic":"V4gz","../math/ellipse":"z6YX"}],"n36d":[function(require,module,exports) {
var t=require("../../util/format"),a=require("../util/path-segment"),r=Math.PI,e=Math.sin,o=Math.cos,n=Math.atan2,h=10,i=r/3;function s(t,a,s,l,M,f,d){var u,v,w,A,b,c,g;if(!a.fill){var P=a.arrowLength||h,m=a.arrowAngle?a.arrowAngle*r/180:i;g=n(l-f,s-M),b=Math.abs(a.lineWidth*o(g))/2,c=Math.abs(a.lineWidth*e(g))/2,d&&(b=-b,c=-c),u=M+P*o(g+m/2),v=f+P*e(g+m/2),w=M+P*o(g-m/2),A=f+P*e(g-m/2),t.beginPath(),t.moveTo(u-b,v-c),t.lineTo(M-b,f-c),t.lineTo(w-b,A-c),t.moveTo(M-b,f-c),t.lineTo(M+b,f+c),t.moveTo(M,f),t.stroke()}}function l(r){var e,o=[],n=t.parsePath(r.path);if(!Array.isArray(n)||0===n.length||"M"!==n[0][0]&&"m"!==n[0][0])return!1;for(var h=n.length,i=0;i<n.length;i++){var s=n[i];e=new a(s,e,i===h-1),o.push(e)}return o}function M(t,a,r,e,o,n,h){var i=h?a.startArrow:a.endArrow,s=i.d,M=0,f=o-r,d=n-e,u=Math.atan(f/d);0===d&&f<0?M=Math.PI:f>0&&d>0?M=Math.PI/2-u:f<0&&d<0?M=-Math.PI/2-u:f>=0&&d<0?M=-u-Math.PI/2:f<=0&&d>0&&(M=Math.PI/2-u);var v=l(i);if(v){s&&(h?(o+=Math.sin(Math.abs(u))*s,n=n+Math.cos(Math.abs(u))*s-.5*t.lineWidth):(o-=Math.sin(Math.abs(u))*s,n=n-Math.cos(Math.abs(u))*s+.5*t.lineWidth)),t.save(),t.beginPath(),t.translate(o,n),t.rotate(M);for(var w=0;w<v.length;w++)v[w].draw(t);t.setTransform(1,0,0,1,0,0),t.fillStyle=t.strokeStyle,t.fill(),t.restore()}}module.exports={addStartArrow:function(t,a,r,e,o,n){"object"==typeof a.startArrow?M(t,a,r,e,o,n,!0):a.startArrow&&s(t,a,r,e,o,n,!0)},addEndArrow:function(t,a,r,e,o,n){"object"==typeof a.endArrow?M(t,a,r,e,o,n,!1):a.endArrow&&s(t,a,r,e,o,n,!1)}};
},{"../../util/format":"mjSS","../util/path-segment":"vrtl"}],"DruT":[function(require,module,exports) {
var t=require("../util/index"),r=require("../core/shape"),e=require("./math/arc"),n=require("./util/arrow");function a(t,r,e){return t+r*Math.cos(e)}function i(t,r,e){return t+r*Math.sin(e)}var s=function t(r){t.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(s,r),t.augment(s,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,r=t.x,n=t.y,a=t.r,i=t.startAngle,s=t.endAngle,c=t.clockwise,o=this.getHitLineWidth()/2,u=e.box(r,n,a,i,s,c);return u.minX-=o,u.minY-=o,u.maxX+=o,u.maxY+=o,u},getStartTangent:function(){var t=this._attrs,r=t.x,e=t.y,n=t.startAngle,s=t.r,c=t.clockwise,o=Math.PI/180;c&&(o*=-1);var u=[],l=a(r,s,n+o),h=i(e,s,n+o),g=a(r,s,n),d=i(e,s,n);return u.push([l,h]),u.push([g,d]),u},getEndTangent:function(){var t=this._attrs,r=t.x,e=t.y,n=t.endAngle,s=t.r,c=t.clockwise,o=Math.PI/180,u=[];c&&(o*=-1);var l=a(r,s,n+o),h=i(e,s,n+o),g=a(r,s,n),d=i(e,s,n);return u.push([g,d]),u.push([l,h]),u},createPath:function(t){var r=this._attrs,e=r.x,n=r.y,a=r.r,i=r.startAngle,s=r.endAngle,c=r.clockwise;(t=t||self.get("context")).beginPath(),t.arc(e,n,a,i,s,c)},afterPath:function(t){var r=this._attrs;if(t=t||this.get("context"),r.startArrow){var e=this.getStartTangent();n.addStartArrow(t,r,e[0][0],e[0][1],e[1][0],e[1][1])}if(r.endArrow){var a=this.getEndTangent();n.addEndArrow(t,r,a[0][0],a[0][1],a[1][0],a[1][1])}}}),module.exports=s;
},{"../util/index":"wF6e","../core/shape":"Zjio","./math/arc":"fxth","./util/arrow":"n36d"}],"v2hU":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),r=function t(e){t.superclass.constructor.call(this,e)};r.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(r,e),t.augment(r,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,r=t.y,i=t.r,a=this.getHitLineWidth()/2+i;return{minX:e-a,minY:r-a,maxX:e+a,maxY:r+a}},createPath:function(t){var e=this._attrs,r=e.x,i=e.y,a=e.r;t.beginPath(),t.arc(r,i,a,0,2*Math.PI,!1),t.closePath()}}),module.exports=r;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"k6qu":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),i=function t(e){t.superclass.constructor.call(this,e)};t.extend(i,e),t.augment(i,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var t=this._attrs,e=t.x,i=t.y,r=t.width,n=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:i-a,maxX:e+r+a,maxY:i+n+a}}}),module.exports=i;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"HfOz":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),r=function t(e){t.superclass.constructor.call(this,e)};r.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(r,e),t.augment(r,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,r=t.y,a=t.rx,n=t.ry,i=this.getHitLineWidth(),s=a+i/2,c=n+i/2;return{minX:e-s,minY:r-c,maxX:e+s,maxY:r+c}},createPath:function(e){var r=this._attrs,a=r.x,n=r.y,i=r.rx,s=r.ry;e=e||self.get("context");var c=i>s?i:s,l=i>s?1:i/s,o=i>s?s/i:1,u=[1,0,0,0,1,0,0,0,1];t.mat3.scale(u,u,[l,o]),t.mat3.translate(u,u,[a,n]),e.beginPath(),e.save(),e.transform(u[0],u[1],u[3],u[4],u[6],u[7]),e.arc(0,0,c,0,2*Math.PI),e.restore(),e.closePath()}}),module.exports=r;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"slKq":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),a=require("./math/arc"),n=function t(e){t.superclass.constructor.call(this,e)};n.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(n,e),t.augment(n,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.rs,r=t.re,s=t.startAngle,c=t.endAngle,l=t.clockwise,o=this.getHitLineWidth(),x=a.box(e,n,i,s,c,l),h=a.box(e,n,r,s,c,l),m=o/2;return{minX:Math.min(x.minX,h.minX)-m,minY:Math.min(x.minY,h.minY)-m,maxX:Math.max(x.maxX,h.maxX)+m,maxY:Math.max(x.maxY,h.maxY)+m}},createPath:function(t){var e=this._attrs,a=e.x,n=e.y,i=e.rs,r=e.re,s=e.startAngle,c=e.endAngle,l=e.clockwise,o={x:Math.cos(s)*i+a,y:Math.sin(s)*i+n},x={x:Math.cos(s)*r+a,y:Math.sin(s)*r+n},h={x:Math.cos(c)*i+a,y:Math.sin(c)*i+n};(t=t||self.get("context")).beginPath(),t.moveTo(o.x,o.y),t.lineTo(x.x,x.y),t.arc(a,n,r,s,c,l),t.lineTo(h.x,h.y),t.arc(a,n,i,c,s,!l),t.closePath()}}),module.exports=n;
},{"../util/index":"wF6e","../core/shape":"Zjio","./math/arc":"fxth"}],"OL1S":[function(require,module,exports) {
var t=require("../util/index"),i=require("../core/shape"),e=function t(i){t.superclass.constructor.call(this,i)};e.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(e,i),t.augment(e,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs;this._cfg.attrs&&this._cfg.attrs.img===t.img||this._setAttrImg();var i=t.x,e=t.y;return{minX:i,minY:e,maxX:i+t.width,maxY:e+t.height}},_beforeSetLoading:function(t){var i=this.get("canvas");return!1===t&&!0===this.get("toDraw")&&(this._cfg.loading=!1,i.draw()),t},_setAttrImg:function(){var i=this,e=i._attrs,a=e.img;if(!t.isString(a))return a instanceof Image?(e.width||i.attr("width",a.width),e.height||i.attr("height",a.height),a):a instanceof HTMLElement&&t.isString(a.nodeName)&&"CANVAS"===a.nodeName.toUpperCase()?(e.width||i.attr("width",Number(a.getAttribute("width"))),e.height||i.attr("height",Number(a.getAttribute("height"))),a):a instanceof ImageData?(e.width||i.attr("width",a.width),e.height||i.attr("height",a.height),a):null;var r=new Image;r.onload=function(){if(i.get("destroyed"))return!1;i.attr("imgSrc",a),i.attr("img",r);var t=i.get("callback");t&&t.call(i),i.set("loading",!1)},r.src=a,r.crossOrigin="Anonymous",i.set("loading",!0)},drawInner:function(t){this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")?this.set("toDraw",!0):(this._drawImage(t),this._cfg.hasUpdate=!1)},_drawImage:function(i){var e=this._attrs,a=e.x,r=e.y,s=e.img,n=e.width,h=e.height,g=e.sx,o=e.sy,d=e.swidth,l=e.sheight;this.set("toDraw",!1);var m=s;if(m instanceof ImageData&&((m=new Image).src=s),m instanceof Image||m instanceof HTMLElement&&t.isString(m.nodeName)&&"CANVAS"===m.nodeName.toUpperCase()){if(t.isNil(g)||t.isNil(o)||t.isNil(d)||t.isNil(l))return void i.drawImage(m,a,r,n,h);if(!(t.isNil(g)||t.isNil(o)||t.isNil(d)||t.isNil(l)))return void i.drawImage(m,g,o,d,l,a,r,n,h)}}}),module.exports=e;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"JvMF":[function(require,module,exports) {
var t=require("../util/index"),r=require("../core/shape"),e=require("./util/arrow"),n=require("./math/line"),a=function t(r){t.superclass.constructor.call(this,r)};a.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(a,r),t.augment(a,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,r=t.x1,e=t.y1,a=t.x2,i=t.y2,o=this.getHitLineWidth();return n.box(r,e,a,i,o)},createPath:function(t){var r=this._attrs,e=r.x1,n=r.y1,a=r.x2,i=r.y2;(t=t||self.get("context")).beginPath(),t.moveTo(e,n),t.lineTo(a,i)},afterPath:function(t){var r=this._attrs,n=r.x1,a=r.y1,i=r.x2,o=r.y2;t=t||this.get("context"),r.startArrow&&e.addStartArrow(t,r,i,o,n,a),r.endArrow&&e.addEndArrow(t,r,n,a,i,o)},getPoint:function(t){var r=this._attrs;return{x:n.at(r.x1,r.x2,t),y:n.at(r.y1,r.y2,t)}}}),module.exports=a;
},{"../util/index":"wF6e","../core/shape":"Zjio","./util/arrow":"n36d","./math/line":"IQMg"}],"Zymh":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),r=require("../util/format"),n=require("./util/path-segment"),a=function t(e){t.superclass.constructor.call(this,e)};a.Symbols={circle:function(t,e,r){return[["M",t,e],["m",-r,0],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},a.ATTRS={path:null,lineWidth:1},t.extend(a,e),t.augment(a,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,r=t.y,n=t.radius,a=this.getHitLineWidth()/2+n;return{minX:e-a,minY:r-a,maxX:e+a,maxY:r+a}},_getPath:function(){var e,r=this._attrs,n=r.x,i=r.y,s=r.radius||r.r,u=r.symbol||"circle";return(e=t.isFunction(u)?u:a.Symbols[u])?e(n,i,s):(console.warn(u+" marker is not supported."),null)},createPath:function(t){var e=this._cfg.segments;if(!e||this._cfg.hasUpdate){var a,i=r.parsePath(this._getPath());t.beginPath(),e=[];for(var s=0;s<i.length;s++){var u=i[s];a=new n(u,a,s===i.length-1),e.push(a),a.draw(t)}this._cfg.segments=e,this._cfg.hasUpdate=!1}else{t.beginPath();for(var h=0;h<e.length;h++)e[h].draw(t)}}}),module.exports=a;
},{"../util/index":"wF6e","../core/shape":"Zjio","../util/format":"mjSS","./util/path-segment":"vrtl"}],"pWSA":[function(require,module,exports) {
var t=require("./common"),a="\t\n\v\f\r   ᠎             　\u2028\u2029",n=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),r=function(t){if(!t)return null;if(typeof t==typeof[])return t;var a={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(n,function(t,n,c){var h=[],i=n.toLowerCase();if(c.replace(e,function(t,a){a&&h.push(+a)}),"m"===i&&h.length>2&&(r.push([n].concat(h.splice(0,2))),i="l",n="m"===n?"l":"L"),"o"===i&&1===h.length&&r.push([n,h[0]]),"r"===i)r.push([n].concat(h));else for(;h.length>=a[i]&&(r.push([n].concat(h.splice(0,a[i]))),a[i]););}),r},c=function(t,a){for(var n=[],e=0,r=t.length;r-2*!a>e;e+=2){var c=[{x:+t[e-2],y:+t[e-1]},{x:+t[e],y:+t[e+1]},{x:+t[e+2],y:+t[e+3]},{x:+t[e+4],y:+t[e+5]}];a?e?r-4===e?c[3]={x:+t[0],y:+t[1]}:r-2===e&&(c[2]={x:+t[0],y:+t[1]},c[3]={x:+t[2],y:+t[3]}):c[0]={x:+t[r-2],y:+t[r-1]}:r-4===e?c[3]=c[2]:e||(c[0]={x:+t[e],y:+t[e+1]}),n.push(["C",(-c[0].x+6*c[1].x+c[2].x)/6,(-c[0].y+6*c[1].y+c[2].y)/6,(c[1].x+6*c[2].x-c[3].x)/6,(c[1].y+6*c[2].y-c[3].y)/6,c[2].x,c[2].y])}return n},h=function(t,a,n,e,r){var c=[];if(null===r&&null===e&&(e=n),t=+t,a=+a,n=+n,e=+e,null!==r){var h=Math.PI/180,i=t+n*Math.cos(-e*h),o=t+n*Math.cos(-r*h);c=[["M",i,a+n*Math.sin(-e*h)],["A",n,n,0,+(r-e>180),0,o,a+n*Math.sin(-r*h)]]}else c=[["M",t,a],["m",0,-e],["a",n,e,0,1,1,0,2*e],["a",n,e,0,1,1,0,-2*e],["z"]];return c},i=function(t){if(!(t=r(t))||!t.length)return[["M",0,0]];var a,n,e=[],i=0,o=0,u=0,s=0,l=0;"M"===t[0][0]&&(u=i=+t[0][1],s=o=+t[0][2],l++,e[0]=["M",i,o]);for(var x,f,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),y=l,v=t.length;y<v;y++){if(e.push(x=[]),(a=(f=t[y])[0])!==a.toUpperCase())switch(x[0]=a.toUpperCase(),x[0]){case"A":x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x[6]=+f[6]+i,x[7]=+f[7]+o;break;case"V":x[1]=+f[1]+o;break;case"H":x[1]=+f[1]+i;break;case"R":for(var M=2,g=(n=[i,o].concat(f.slice(1))).length;M<g;M++)n[M]=+n[M]+i,n[++M]=+n[M]+o;e.pop(),e=e.concat(c(n,p));break;case"O":e.pop(),(n=h(i,o,f[1],f[2])).push(n[0]),e=e.concat(n);break;case"U":e.pop(),e=e.concat(h(i,o,f[1],f[2],f[3])),x=["U"].concat(e[e.length-1].slice(-2));break;case"M":u=+f[1]+i,s=+f[2]+o;break;default:for(var b=1,m=f.length;b<m;b++)x[b]=+f[b]+(b%2?i:o)}else if("R"===a)n=[i,o].concat(f.slice(1)),e.pop(),e=e.concat(c(n,p)),x=["R"].concat(f.slice(-2));else if("O"===a)e.pop(),(n=h(i,o,f[1],f[2])).push(n[0]),e=e.concat(n);else if("U"===a)e.pop(),e=e.concat(h(i,o,f[1],f[2],f[3])),x=["U"].concat(e[e.length-1].slice(-2));else for(var d=0,k=f.length;d<k;d++)x[d]=f[d];if("O"!==(a=a.toUpperCase()))switch(x[0]){case"Z":i=+u,o=+s;break;case"H":i=x[1];break;case"V":o=x[1];break;case"M":u=x[x.length-2],s=x[x.length-1];break;default:i=x[x.length-2],o=x[x.length-1]}}return e},o=function(t,a,n,e){return[t,a,n,e,n,e]},u=function(t,a,n,e,r,c){return[1/3*t+2/3*n,1/3*a+2/3*e,1/3*r+2/3*n,1/3*c+2/3*e,r,c]},s=function t(a,n,e,r,c,h,i,o,u,s){e===r&&(e+=1);var l,x,f,p,y,v=120*Math.PI/180,M=Math.PI/180*(+c||0),g=[],b=function(t,a,n){return{x:t*Math.cos(n)-a*Math.sin(n),y:t*Math.sin(n)+a*Math.cos(n)}};if(s)x=s[0],f=s[1],p=s[2],y=s[3];else{a=(l=b(a,n,-M)).x,n=l.y,o=(l=b(o,u,-M)).x,u=l.y,a===o&&n===u&&(o+=1,u+=1);var m=(a-o)/2,d=(n-u)/2,k=m*m/(e*e)+d*d/(r*r);k>1&&(e*=k=Math.sqrt(k),r*=k);var C=e*e,q=r*r,F=(h===i?-1:1)*Math.sqrt(Math.abs((C*q-C*d*d-q*m*m)/(C*d*d+q*m*m)));p=F*e*d/r+(a+o)/2,y=F*-r*m/e+(n+u)/2,x=Math.asin(((n-y)/r).toFixed(9)),f=Math.asin(((u-y)/r).toFixed(9)),x=a<p?Math.PI-x:x,f=o<p?Math.PI-f:f,x<0&&(x=2*Math.PI+x),f<0&&(f=2*Math.PI+f),i&&x>f&&(x-=2*Math.PI),!i&&f>x&&(f-=2*Math.PI)}var P=f-x;if(Math.abs(P)>v){var w=f,A=o,z=u;f=x+v*(i&&f>x?1:-1),g=t(o=p+e*Math.cos(f),u=y+r*Math.sin(f),e,r,c,0,i,A,z,[f,w,p,y])}P=f-x;var I=Math.cos(x),L=Math.sin(x),Q=Math.cos(f),T=Math.sin(f),U=Math.tan(P/4),S=4/3*e*U,R=4/3*r*U,Z=[a,n],H=[a+S*L,n-R*I],V=[o+S*T,u-R*Q],X=[o,u];if(H[0]=2*Z[0]-H[0],H[1]=2*Z[1]-H[1],s)return[H,V,X].concat(g);for(var Y=[],j=0,O=(g=[H,V,X].concat(g).join().split(",")).length;j<O;j++)Y[j]=j%2?b(g[j-1],g[j],M).y:b(g[j],g[j+1],M).x;return Y},l=function(t,a){var n,e=i(t),r=a&&i(a),c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],x=[],f="",p="",y=function(t,a,n){var e,r;if(!t)return["C",a.x,a.y,a.x,a.y,a.x,a.y];switch(!(t[0]in{T:1,Q:1})&&(a.qx=a.qy=null),t[0]){case"M":a.X=t[1],a.Y=t[2];break;case"A":t=["C"].concat(s.apply(0,[a.x,a.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(e=2*a.x-a.bx,r=2*a.y-a.by):(e=a.x,r=a.y),t=["C",e,r].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(a.qx=2*a.x-a.qx,a.qy=2*a.y-a.qy):(a.qx=a.x,a.qy=a.y),t=["C"].concat(u(a.x,a.y,a.qx,a.qy,t[1],t[2]));break;case"Q":a.qx=t[1],a.qy=t[2],t=["C"].concat(u(a.x,a.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(o(a.x,a.y,t[1],t[2]));break;case"H":t=["C"].concat(o(a.x,a.y,t[1],a.y));break;case"V":t=["C"].concat(o(a.x,a.y,a.x,t[1]));break;case"Z":t=["C"].concat(o(a.x,a.y,a.X,a.Y))}return t},v=function(t,a){if(t[a].length>7){t[a].shift();for(var c=t[a];c.length;)l[a]="A",r&&(x[a]="A"),t.splice(a++,0,["C"].concat(c.splice(0,6)));t.splice(a,1),n=Math.max(e.length,r&&r.length||0)}},M=function(t,a,c,h,i){t&&a&&"M"===t[i][0]&&"M"!==a[i][0]&&(a.splice(i,0,["M",h.x,h.y]),c.bx=0,c.by=0,c.x=t[i][1],c.y=t[i][2],n=Math.max(e.length,r&&r.length||0))};n=Math.max(e.length,r&&r.length||0);for(var g=0;g<n;g++){e[g]&&(f=e[g][0]),"C"!==f&&(l[g]=f,g&&(p=l[g-1])),e[g]=y(e[g],c,p),"A"!==l[g]&&"C"===f&&(l[g]="C"),v(e,g),r&&(r[g]&&(f=r[g][0]),"C"!==f&&(x[g]=f,g&&(p=x[g-1])),r[g]=y(r[g],h,p),"A"!==x[g]&&"C"===f&&(x[g]="C"),v(r,g)),M(e,r,c,h,g),M(r,e,h,c,g);var b=e[g],m=r&&r[g],d=b.length,k=r&&m.length;c.x=b[d-2],c.y=b[d-1],c.bx=parseFloat(b[d-4])||c.x,c.by=parseFloat(b[d-3])||c.y,h.bx=r&&(parseFloat(m[k-4])||h.x),h.by=r&&(parseFloat(m[k-3])||h.y),h.x=r&&m[k-2],h.y=r&&m[k-1]}return r?[e,r]:e},x=/,?([a-z]),?/gi,f=function(t){return t.join(",").replace(x,"$1")},p=function(t,a,n,e,r){return t*(t*(-3*a+9*n-9*e+3*r)+6*a-12*n+6*e)-3*a+3*n},y=function(t,a,n,e,r,c,h,i,o){null===o&&(o=1);for(var u=(o=o>1?1:o<0?0:o)/2,s=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],x=0,f=0;f<12;f++){var y=u*s[f]+u,v=p(y,t,n,r,h),M=p(y,a,e,c,i),g=v*v+M*M;x+=l[f]*Math.sqrt(g)}return u*x},v=function(t,a,n,e,r,c,h,i){for(var o,u,s,l,x=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*r,o=-3*t+9*n-9*r+3*h,s=3*n-3*t):(u=6*a-12*e+6*c,o=-3*a+9*e-9*c+3*i,s=3*e-3*a),Math.abs(o)<1e-12){if(Math.abs(u)<1e-12)continue;(l=-s/u)>0&&l<1&&x.push(l)}else{var y=u*u-4*s*o,v=Math.sqrt(y);if(!(y<0)){var M=(-u+v)/(2*o);M>0&&M<1&&x.push(M);var g=(-u-v)/(2*o);g>0&&g<1&&x.push(g)}}for(var b,m=x.length,d=m;m--;)b=1-(l=x[m]),f[0][m]=b*b*b*t+3*b*b*l*n+3*b*l*l*r+l*l*l*h,f[1][m]=b*b*b*a+3*b*b*l*e+3*b*l*l*c+l*l*l*i;return f[0][d]=t,f[1][d]=a,f[0][d+1]=h,f[1][d+1]=i,f[0].length=f[1].length=d+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},M=function(t,a,n,e,r,c,h,i){if(!(Math.max(t,n)<Math.min(r,h)||Math.min(t,n)>Math.max(r,h)||Math.max(a,e)<Math.min(c,i)||Math.min(a,e)>Math.max(c,i))){var o=(t-n)*(c-i)-(a-e)*(r-h);if(o){var u=((t*e-a*n)*(r-h)-(t-n)*(r*i-c*h))/o,s=((t*e-a*n)*(c-i)-(a-e)*(r*i-c*h))/o,l=+u.toFixed(2),x=+s.toFixed(2);if(!(l<+Math.min(t,n).toFixed(2)||l>+Math.max(t,n).toFixed(2)||l<+Math.min(r,h).toFixed(2)||l>+Math.max(r,h).toFixed(2)||x<+Math.min(a,e).toFixed(2)||x>+Math.max(a,e).toFixed(2)||x<+Math.min(c,i).toFixed(2)||x>+Math.max(c,i).toFixed(2)))return{x:u,y:s}}}},g=function(t,a,n){return a>=t.x&&a<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},b=function(t,a,n,e,r){if(r)return[["M",+t+ +r,a],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,e-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-e],["a",r,r,0,0,1,r,-r],["z"]];var c=[["M",t,a],["l",n,0],["l",0,e],["l",-n,0],["z"]];return c.parsePathArray=f,c},m=function(t,a,n,e){return null===t&&(t=a=n=e=0),null===a&&(a=t.y,n=t.width,e=t.height,t=t.x),{x:t,y:a,width:n,w:n,height:e,h:e,x2:t+n,y2:a+e,cx:t+n/2,cy:a+e/2,r1:Math.min(n,e)/2,r2:Math.max(n,e)/2,r0:Math.sqrt(n*n+e*e)/2,path:b(t,a,n,e),vb:[t,a,n,e].join(" ")}},d=function(t,a){return t=m(t),a=m(a),g(a,t.x,t.y)||g(a,t.x2,t.y)||g(a,t.x,t.y2)||g(a,t.x2,t.y2)||g(t,a.x,a.y)||g(t,a.x2,a.y)||g(t,a.x,a.y2)||g(t,a.x2,a.y2)||(t.x<a.x2&&t.x>a.x||a.x<t.x2&&a.x>t.x)&&(t.y<a.y2&&t.y>a.y||a.y<t.y2&&a.y>t.y)},k=function(a,n,e,r,c,h,i,o){t.isArray(a)||(a=[a,n,e,r,c,h,i,o]);var u=v.apply(null,a);return m(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},C=function(t,a,n,e,r,c,h,i,o){var u=1-o,s=Math.pow(u,3),l=Math.pow(u,2),x=o*o,f=x*o,p=t+2*o*(n-t)+x*(r-2*n+t),y=a+2*o*(e-a)+x*(c-2*e+a),v=n+2*o*(r-n)+x*(h-2*r+n),M=e+2*o*(c-e)+x*(i-2*c+e);return{x:s*t+3*l*o*n+3*u*o*o*r+f*h,y:s*a+3*l*o*e+3*u*o*o*c+f*i,m:{x:p,y:y},n:{x:v,y:M},start:{x:u*t+o*n,y:u*a+o*e},end:{x:u*r+o*h,y:u*c+o*i},alpha:90-180*Math.atan2(p-v,y-M)/Math.PI}},q=function(t,a,n){var e=k(t),r=k(a);if(!d(e,r))return n?0:[];for(var c=~~(y.apply(0,t)/8),h=~~(y.apply(0,a)/8),i=[],o=[],u={},s=n?0:[],l=0;l<c+1;l++){var x=C.apply(0,t.concat(l/c));i.push({x:x.x,y:x.y,t:l/c})}for(var f=0;f<h+1;f++){var p=C.apply(0,a.concat(f/h));o.push({x:p.x,y:p.y,t:f/h})}for(var v=0;v<c;v++)for(var g=0;g<h;g++){var b=i[v],m=i[v+1],q=o[g],F=o[g+1],P=Math.abs(m.x-b.x)<.001?"y":"x",w=Math.abs(F.x-q.x)<.001?"y":"x",A=M(b.x,b.y,m.x,m.y,q.x,q.y,F.x,F.y);if(A){if(u[A.x.toFixed(4)]===A.y.toFixed(4))continue;u[A.x.toFixed(4)]=A.y.toFixed(4);var z=b.t+Math.abs((A[P]-b[P])/(m[P]-b[P]))*(m.t-b.t),I=q.t+Math.abs((A[w]-q[w])/(F[w]-q[w]))*(F.t-q.t);z>=0&&z<=1&&I>=0&&I<=1&&(n?s++:s.push({x:A.x,y:A.y,t1:z,t2:I}))}}return s},F=function(t,a,n){var e,r,c,h,i,o,u,s,x,f;t=l(t),a=l(a);for(var p=n?0:[],y=0,v=t.length;y<v;y++){var M=t[y];if("M"===M[0])e=i=M[1],r=o=M[2];else{"C"===M[0]?(x=[e,r].concat(M.slice(1)),e=x[6],r=x[7]):(x=[e,r,e,r,i,o,i,o],e=i,r=o);for(var g=0,b=a.length;g<b;g++){var m=a[g];if("M"===m[0])c=u=m[1],h=s=m[2];else{"C"===m[0]?(f=[c,h].concat(m.slice(1)),c=f[6],h=f[7]):(f=[c,h,c,h,u,s,u,s],c=u,h=s);var d=q(x,f,n);if(n)p+=d;else{for(var k=0,C=d.length;k<C;k++)d[k].segment1=y,d[k].segment2=g,d[k].bez1=x,d[k].bez2=f;p=p.concat(d)}}}}}return p},P=function(t,a){return F(t,a)};function w(t,a){var n=[],e=[];return t.length&&function t(a,r){if(1===a.length)n.push(a[0]),e.push(a[0]);else{for(var c=[],h=0;h<a.length-1;h++)0===h&&n.push(a[0]),h===a.length-2&&e.push(a[h+1]),c[h]=[(1-r)*a[h][0]+r*a[h+1][0],(1-r)*a[h][1]+r*a[h+1][1]];t(c,r)}}(t,a),{left:n,right:e.reverse()}}function A(t,a,n){var e=[[t[1],t[2]]];n=n||2;var r=[];"A"===a[0]?(e.push(a[6]),e.push(a[7])):"C"===a[0]?(e.push([a[1],a[2]]),e.push([a[3],a[4]]),e.push([a[5],a[6]])):"S"===a[0]||"Q"===a[0]?(e.push([a[1],a[2]]),e.push([a[3],a[4]])):e.push([a[1],a[2]]);for(var c=e,h=1/n,i=0;i<n-1;i++){var o=w(c,h/(1-h*i));r.push(o.left),c=o.right}return r.push(c),r.map(function(t){var a=[];return 4===t.length&&(a.push("C"),a=a.concat(t[2])),t.length>=3&&(3===t.length&&a.push("Q"),a=a.concat(t[1])),2===t.length&&a.push("L"),a=a.concat(t[t.length-1])})}var z=function(t,a,n){if(1===n)return[[].concat(t)];var e=[];if("L"===a[0]||"C"===a[0]||"Q"===a[0])e=e.concat(A(t,a,n));else{var r=[].concat(t);"M"===r[0]&&(r[0]="L");for(var c=0;c<=n-1;c++)e.push(r)}return e},I=function(t,a){if(1===t.length)return t;var n=t.length-1,e=a.length-1,r=n/e,c=[];if(1===t.length&&"M"===t[0][0]){for(var h=0;h<e-n;h++)t.push(t[0]);return t}for(var i=0;i<e;i++){var o=Math.floor(r*i);c[o]=(c[o]||0)+1}var u=c.reduce(function(a,e,r){return r===n?a.concat(t[n]):a.concat(z(t[r],t[r+1],e))},[]);return u.unshift(t[0]),"Z"!==a[e]&&"z"!==a[e]||u.push("Z"),u},L=function(a,n){if(a.length!==n.length)return!1;var e=!0;return t.each(a,function(t,a){if(t!==n[a])return e=!1,!1}),e};function Q(t,a,n){var e=null,r=n;return a<r&&(r=a,e="add"),t<r&&(r=t,e="del"),{type:e,min:r}}var T=function(t,a){var n,e,r=t.length,c=a.length,h=0;if(0===r||0===c)return null;for(var i=[],o=0;o<=r;o++)i[o]=[],i[o][0]={min:o};for(var u=0;u<=c;u++)i[0][u]={min:u};for(var s=1;s<=r;s++){n=t[s-1];for(var l=1;l<=c;l++){e=a[l-1],h=L(n,e)?0:1;var x=i[s-1][l].min+1,f=i[s][l-1].min+1,p=i[s-1][l-1].min+h;i[s][l]=Q(x,f,p)}}return i},U=function(t,a){var n=T(t,a),e=t.length,r=a.length,c=[],h=1,i=1;if(n[e][r]!==e){for(var o=1;o<=e;o++){var u=n[o][o].min;i=o;for(var s=h;s<=r;s++)n[o][s].min<u&&(u=n[o][s].min,i=s);h=i,n[o][h].type&&c.push({index:o-1,type:n[o][h].type})}for(var l=c.length-1;l>=0;l--)h=c[l].index,"add"===c[l].type?t.splice(h,0,[].concat(t[h])):t.splice(h,1)}var x=r-(e=t.length);if(e<r)for(var f=0;f<x;f++)"z"===t[e-1][0]||"Z"===t[e-1][0]?t.splice(e-2,0,t[e-2]):t.push(t[e-1]),e+=1;return t};function S(t,a,n){for(var e,r=[].concat(t),c=1/(n+1),h=R(a)[0],i=1;i<=n;i++)c*=i,0===(e=Math.floor(t.length*c))?r.unshift([h[0]*c+t[e][0]*(1-c),h[1]*c+t[e][1]*(1-c)]):r.splice(e,0,[h[0]*c+t[e][0]*(1-c),h[1]*c+t[e][1]*(1-c)]);return r}function R(t){var a=[];switch(t[0]){case"M":case"L":a.push([t[1],t[2]]);break;case"A":a.push([t[6],t[7]]);break;case"Q":a.push([t[3],t[4]]),a.push([t[1],t[2]]);break;case"T":a.push([t[1],t[2]]);break;case"C":a.push([t[5],t[6]]),a.push([t[1],t[2]]),a.push([t[3],t[4]]);break;case"S":a.push([t[3],t[4]]),a.push([t[1],t[2]]);break;case"H":case"V":a.push([t[1],t[1]])}return a}var Z=function(t,a){if(t.length<=1)return t;for(var n,e=0;e<a.length;e++)if(t[e][0]!==a[e][0])switch(n=R(t[e]),a[e][0]){case"M":t[e]=["M"].concat(n[0]);break;case"L":t[e]=["L"].concat(n[0]);break;case"A":t[e]=[].concat(a[e]),t[e][6]=n[0][0],t[e][7]=n[0][1];break;case"Q":if(n.length<2){if(!(e>0)){t[e]=a[e];break}n=S(n,t[e-1],1)}t[e]=["Q"].concat(n.reduce(function(t,a){return t.concat(a)},[]));break;case"T":t[e]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(e>0)){t[e]=a[e];break}n=S(n,t[e-1],2)}t[e]=["C"].concat(n.reduce(function(t,a){return t.concat(a)},[]));break;case"S":if(n.length<2){if(!(e>0)){t[e]=a[e];break}n=S(n,t[e-1],1)}t[e]=["S"].concat(n.reduce(function(t,a){return t.concat(a)},[]));break;default:t[e]=a[e]}return t};module.exports={parsePathString:r,parsePathArray:f,pathTocurve:l,pathToAbsolute:i,catmullRomToBezier:c,rectPath:b,fillPath:I,fillPathByDiff:U,formatPath:Z,intersection:P};
},{"./common":"DZn6"}],"NTbV":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),n=require("./util/path-segment"),i=require("../util/format"),r=require("./util/arrow"),a=require("../util/path"),s=require("./math/cubic"),h=function t(e){t.superclass.constructor.call(this,e)};h.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(h,e),t.augment(h,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(e){if(t.isNil(e))return this.setSilent("segments",null),void this.setSilent("box",void 0);var r,a=i.parsePath(e),s=[];if(t.isArray(a)&&0!==a.length&&("M"===a[0][0]||"m"===a[0][0])){for(var h=a.length,u=0;u<a.length;u++){var l=a[u];r=new n(l,r,u===h-1),s.push(r)}this.setSilent("segments",s),this.setSilent("tCache",null),this.setSilent("box",null)}},calculateBox:function(){var e=this.get("segments");if(!e)return null;var n=this.getHitLineWidth(),i=1/0,r=-1/0,a=1/0,s=-1/0;return t.each(e,function(t){t.getBBox(n);var e=t.box;e&&(e.minX<i&&(i=e.minX),e.maxX>r&&(r=e.maxX),e.minY<a&&(a=e.minY),e.maxY>s&&(s=e.maxY))}),i===1/0||a===1/0?{minX:0,minY:0,maxX:0,maxY:0}:{minX:i,minY:a,maxX:r,maxY:s}},_setTcache:function(){var e,n,i,r,a=0,h=0,u=[],l=this._cfg.curve;l&&(t.each(l,function(t,e){i=l[e+1],r=t.length,i&&(a+=s.len(t[r-2],t[r-1],i[1],i[2],i[3],i[4],i[5],i[6]))}),t.each(l,function(t,c){i=l[c+1],r=t.length,i&&((e=[])[0]=h/a,n=s.len(t[r-2],t[r-1],i[1],i[2],i[3],i[4],i[5],i[6]),h+=n,e[1]=h/a,u.push(e))}),this._cfg.tCache=u)},_calculateCurve:function(){var t=this._attrs.path;this._cfg.curve=a.pathTocurve(t)},getStartTangent:function(){var e,n,i,r,a=this.get("segments");if(a.length>1)if(e=a[0].endPoint,n=a[1].endPoint,i=a[1].startTangent,r=[],t.isFunction(i)){var s=i();r.push([e.x-s[0],e.y-s[1]]),r.push([e.x,e.y])}else r.push([n.x,n.y]),r.push([e.x,e.y]);return r},getEndTangent:function(){var e,n,i,r,a=this.get("segments"),s=a.length;if(s>1)if(e=a[s-2].endPoint,n=a[s-1].endPoint,i=a[s-1].endTangent,r=[],t.isFunction(i)){var h=i();r.push([n.x-h[0],n.y-h[1]]),r.push([n.x,n.y])}else r.push([e.x,e.y]),r.push([n.x,n.y]);return r},getPoint:function(e){var n,i,r=this._cfg.tCache;r||(this._calculateCurve(),this._setTcache(),r=this._cfg.tCache);var a=this._cfg.curve;if(!r)return a?{x:a[0][1],y:a[0][2]}:null;t.each(r,function(t,r){e>=t[0]&&e<=t[1]&&(n=(e-t[0])/(t[1]-t[0]),i=r)});var h=a[i];if(t.isNil(h)||t.isNil(i))return null;var u=h.length,l=a[i+1];return{x:s.at(h[u-2],l[1],l[3],l[5],1-n),y:s.at(h[u-1],l[2],l[4],l[6],1-n)}},createPath:function(e){var n=this.get("segments");if(t.isArray(n)){(e=e||this.get("context")).beginPath();for(var i=n.length,r=0;r<i;r++)n[r].draw(e)}},afterPath:function(e){var n=this._attrs,i=this.get("segments"),a=n.path;if(e=e||this.get("context"),t.isArray(i)&&1!==i.length&&(n.startArrow||n.endArrow)&&"z"!==a[a.length-1]&&"Z"!==a[a.length-1]&&!n.fill){var s=this.getStartTangent();r.addStartArrow(e,n,s[0][0],s[0][1],s[1][0],s[1][1]);var h=this.getEndTangent();r.addEndArrow(e,n,h[0][0],h[0][1],h[1][0],h[1][1])}}}),module.exports=h;
},{"../util/index":"wF6e","../core/shape":"Zjio","./util/path-segment":"vrtl","../util/format":"mjSS","./util/arrow":"n36d","../util/path":"pWSA","./math/cubic":"Pg5K"}],"AxL4":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),n=function t(e){t.superclass.constructor.call(this,e)};n.ATTRS={points:null,lineWidth:1},t.extend(n,e),t.augment(n,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var e=this._attrs.points,n=this.getHitLineWidth();if(!e||0===e.length)return null;var i=1/0,r=1/0,a=-1/0,o=-1/0;t.each(e,function(t){var e=t[0],n=t[1];e<i&&(i=e),e>a&&(a=e),n<r&&(r=n),n>o&&(o=n)});var l=n/2;return{minX:i-l,minY:r-l,maxX:a+l,maxY:o+l}},createPath:function(e){var n=this._attrs.points;n.length<2||((e=e||this.get("context")).beginPath(),t.each(n,function(t,n){0===n?e.moveTo(t[0],t[1]):e.lineTo(t[0],t[1])}),e.closePath())}}),module.exports=n;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"YcgT":[function(require,module,exports) {
var t=require("../util/index"),n=require("../core/shape"),e=require("./util/arrow"),r=require("./math/line"),i=function t(n){t.superclass.constructor.call(this,n)};i.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(i,n),t.augment(i,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,e=this.getHitLineWidth(),r=n.points;if(!r||0===r.length)return null;var i=1/0,a=1/0,s=-1/0,o=-1/0;t.each(r,function(t){var n=t[0],e=t[1];n<i&&(i=n),n>s&&(s=n),e<a&&(a=e),e>o&&(o=e)});var h=e/2;return{minX:i-h,minY:a-h,maxX:s+h,maxY:o+h}},_setTcache:function(){var n,e,i=this._attrs.points,a=0,s=0,o=[];i&&0!==i.length&&(t.each(i,function(t,n){i[n+1]&&(a+=r.len(t[0],t[1],i[n+1][0],i[n+1][1]))}),a<=0||(t.each(i,function(t,h){i[h+1]&&((n=[])[0]=s/a,e=r.len(t[0],t[1],i[h+1][0],i[h+1][1]),s+=e,n[1]=s/a,o.push(n))}),this.tCache=o))},createPath:function(t){var n,e,r=this._attrs.points;if(!(r.length<2)){for((t=t||this.get("context")).beginPath(),t.moveTo(r[0][0],r[0][1]),e=1,n=r.length-1;e<n;e++)t.lineTo(r[e][0],r[e][1]);t.lineTo(r[n][0],r[n][1])}},getStartTangent:function(){var t=this.__attrs.points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},getEndTangent:function(){var t=this.__attrs.points,n=t.length-1,e=[];return e.push([t[n-1][0],t[n-1][1]]),e.push([t[n][0],t[n][1]]),e},afterPath:function(t){var n=this._attrs,r=n.points,i=r.length-1;t=t||this.get("context"),n.startArrow&&e.addStartArrow(t,n,r[1][0],r[1][1],r[0][0],r[0][1]),n.endArrow&&e.addEndArrow(t,n,r[i-1][0],r[i-1][1],r[i][0],r[i][1])},getPoint:function(n){var e,i,a=this._attrs.points,s=this.tCache;return s||(this._setTcache(),s=this.tCache),t.each(s,function(t,r){n>=t[0]&&n<=t[1]&&(e=(n-t[0])/(t[1]-t[0]),i=r)}),{x:r.at(a[i][0],a[i+1][0],e),y:r.at(a[i][1],a[i+1][1],e)}}}),module.exports=i;
},{"../util/index":"wF6e","../core/shape":"Zjio","./util/arrow":"n36d","./math/line":"IQMg"}],"ZSLD":[function(require,module,exports) {
var r=require("../util/index"),t=require("../util/format"),e=t.parseRadius,i=require("../core/shape"),a=function r(t){r.superclass.constructor.call(this,t)};a.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var r=this._attrs,t=r.x,e=r.y,i=r.width,a=r.height,h=this.getHitLineWidth()/2;return{minX:t-h,minY:e-h,maxX:t+i+h,maxY:e+a+h}},createPath:function(r){var t=this._attrs,i=t.x,a=t.y,h=t.width,n=t.height,c=t.radius;if((r=r||this.get("context")).beginPath(),0===c)r.rect(i,a,h,n);else{var s=e(c);r.moveTo(i+s.r1,a),r.lineTo(i+h-s.r2,a),0!==s.r2&&r.arc(i+h-s.r2,a+s.r2,s.r2,-Math.PI/2,0),r.lineTo(i+h,a+n-s.r3),0!==s.r3&&r.arc(i+h-s.r3,a+n-s.r3,s.r3,0,Math.PI/2),r.lineTo(i+s.r4,a+n),0!==s.r4&&r.arc(i+s.r4,a+n-s.r4,s.r4,Math.PI/2,Math.PI),r.lineTo(i,a+s.r1),0!==s.r1&&r.arc(i+s.r1,a+s.r1,s.r1,Math.PI,1.5*Math.PI),r.closePath()}}}),module.exports=a;
},{"../util/index":"wF6e","../util/format":"mjSS","../core/shape":"Zjio"}],"VuwB":[function(require,module,exports) {
var t=require("../util/index"),e=require("../core/shape"),i=function t(e){t.superclass.constructor.call(this,e)};i.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(i,e),t.augment(i,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var t=this._attrs.fontSize;t&&+t<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+t/12,+t/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var t=this._attrs,e=t.fontSize,i=t.fontFamily,n=t.fontWeight,r=t.fontStyle,a=t.fontVariant;t.font=[r,a,n,e+"px",i].join(" ")},_setAttrText:function(){var e=this._attrs,i=e.text,n=null;if(t.isString(i)&&-1!==i.indexOf("\n")){var r=(n=i.split("\n")).length;e.lineCount=r}e.textArr=n},_getTextHeight:function(){var t=this._attrs,e=t.lineCount,i=1*t.fontSize;return e>1?i*e+this._getSpaceingY()*(e-1):i},isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs,e=this._cfg;e.attrs&&!e.hasUpdate||(this._assembleFont(),this._setAttrText()),t.textArr||this._setAttrText();var i=t.x,n=t.y,r=this.measureText();if(!r)return{minX:i,minY:n,maxX:i,maxY:n};var a=this._getTextHeight(),s=t.textAlign,o=t.textBaseline,l=this.getHitLineWidth(),h={x:i,y:n-a};s&&("end"===s||"right"===s?h.x-=r:"center"===s&&(h.x-=r/2)),o&&("top"===o?h.y+=a:"middle"===o&&(h.y+=a/2)),this.set("startPoint",h);var x=l/2;return{minX:h.x-x,minY:h.y-x,maxX:h.x+r+x,maxY:h.y+a+x}},_getSpaceingY:function(){var t=this._attrs,e=t.lineHeight,i=1*t.fontSize;return e?e-i:.14*i},drawInner:function(e){var i=this._attrs,n=this._cfg;n.attrs&&!n.hasUpdate||(this._assembleFont(),this._setAttrText()),e.font=i.font;var r=i.text;if(r){var a=i.textArr,s=i.x,o=i.y;if(e.beginPath(),this.hasStroke()){var l=i.strokeOpacity;t.isNil(l)||1===l||(e.globalAlpha=l),a?this._drawTextArr(e,!1):e.strokeText(r,s,o),e.globalAlpha=1}if(this.hasFill()){var h=i.fillOpacity;t.isNil(h)||1===h||(e.globalAlpha=h),a?this._drawTextArr(e,!0):e.fillText(r,s,o)}n.hasUpdate=!1}},_drawTextArr:function(e,i){var n,r=this._attrs.textArr,a=this._attrs.textBaseline,s=1*this._attrs.fontSize,o=this._getSpaceingY(),l=this._attrs.x,h=this._attrs.y,x=this.getBBox(),f=x.maxY-x.minY;t.each(r,function(t,r){n=h+r*(o+s)-f+s,"middle"===a&&(n+=f-s-(f-s)/2),"top"===a&&(n+=f-s),i?e.fillText(t,l,n):e.strokeText(t,l,n)})},measureText:function(){var e,i=this._attrs,n=i.text,r=i.font,a=i.textArr,s=0;if(!t.isNil(n)){var o=document.createElement("canvas").getContext("2d");return o.save(),o.font=r,a?t.each(a,function(t){e=o.measureText(t).width,s<e&&(s=e),o.restore()}):(s=o.measureText(n).width,o.restore()),s}}}),module.exports=i;
},{"../util/index":"wF6e","../core/shape":"Zjio"}],"ESBD":[function(require,module,exports) {
var e=require("../core/shape");e.Arc=require("./arc"),e.Circle=require("./circle"),e.Dom=require("./dom"),e.Ellipse=require("./ellipse"),e.Fan=require("./fan"),e.Image=require("./image"),e.Line=require("./line"),e.Marker=require("./marker"),e.Path=require("./path"),e.Polygon=require("./polygon"),e.Polyline=require("./polyline"),e.Rect=require("./rect"),e.Text=require("./text"),module.exports=e;
},{"../core/shape":"Zjio","./arc":"DruT","./circle":"v2hU","./dom":"k6qu","./ellipse":"HfOz","./fan":"slKq","./image":"OL1S","./line":"JvMF","./marker":"Zymh","./path":"NTbV","./polygon":"AxL4","./polyline":"YcgT","./rect":"ZSLD","./text":"VuwB"}],"VGOA":[function(require,module,exports) {
var t=require("../util/index"),e=require("./element"),n=require("../shapes/index"),i={},r="_INDEX";function a(t){return function(e,n){var i=t(e,n);return 0===i?e[r]-n[r]:i}}function c(t,e,n){for(var i,r=t.length-1;r>=0;r--){var a=t[r];if(a._cfg.visible&&a._cfg.capture&&(a.isGroup?i=a.getShape(e,n):a.isHit(e,n)&&(i=a)),i)break}return i}var s=function t(e){t.superclass.constructor.call(this,e),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function h(e){if(!e._cfg&&e!==s){var n=e.superclass.constructor;n&&!n._cfg&&h(n),e._cfg={},t.merge(e._cfg,n._cfg),t.merge(e._cfg,e.CFG)}}t.extend(s,e),t.augment(s,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return h(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(e,r){var a=this.get("canvas");r=r||{};var c=i[e];if(c||(c=t.upperFirst(e),i[e]=c),r.attrs&&a){var s=r.attrs;if("text"===e){var h=a.get("fontFamily");h&&(s.fontFamily=s.fontFamily?s.fontFamily:h)}}r.canvas=a,r.type=e;var f=new n[c](r);return this.add(f),f},addGroup:function(e,n){var i,r=this.get("canvas");if(n=t.merge({},n),t.isFunction(e))n?(n.canvas=r,n.parent=this,i=new e(n)):i=new e({canvas:r,parent:this}),this.add(i);else if(t.isObject(e))e.canvas=r,i=new s(e),this.add(i);else{if(void 0!==e)return!1;i=new s,this.add(i)}return i},renderBack:function(e,n){var i=this.get("backShape"),r=this.getBBox();return t.merge(n,{x:r.minX-e[3],y:r.minY-e[0],width:r.width+e[1]+e[3],height:r.height+e[0]+e[2]}),i?i.attr(n):i=this.addShape("rect",{zIndex:-1,attrs:n}),this.set("backShape",i),this.sort(),i},removeChild:function(e,n){if(arguments.length>=2)this.contain(e)&&e.remove(n);else{if(1===arguments.length){if(!t.isBoolean(e))return this.contain(e)&&e.remove(!0),this;n=e}0===arguments.length&&(n=!0),s.superclass.remove.call(this,n)}return this},add:function(e){var n=this,i=n.get("children");if(t.isArray(e))t.each(e,function(t){var e=t.get("parent");e&&e.removeChild(t,!1),n._setCfgProperty(t)}),n._cfg.children=i.concat(e);else{var r=e,a=r.get("parent");a&&a.removeChild(r,!1),n._setCfgProperty(r),i.push(r)}return n},_setCfgProperty:function(t){var e=this._cfg;t.set("parent",this),t.set("canvas",e.canvas),e.timeline&&t.set("timeline",e.timeline)},contain:function(t){return this.get("children").indexOf(t)>-1},getChildByIndex:function(t){return this.get("children")[t]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var t=this.get("children").length-1;return this.getChildByIndex(t)},getBBox:function(){var e=1/0,n=-1/0,i=1/0,r=-1/0,a=this.get("children");a.length>0?t.each(a,function(t){if(t.get("visible")){if(t.isGroup&&0===t.get("children").length)return;var a=t.getBBox();if(!a)return!0;var c=[a.minX,a.minY,1],s=[a.minX,a.maxY,1],h=[a.maxX,a.minY,1],f=[a.maxX,a.maxY,1];t.apply(c),t.apply(s),t.apply(h),t.apply(f);var o=Math.min(c[0],s[0],h[0],f[0]),u=Math.max(c[0],s[0],h[0],f[0]),l=Math.min(c[1],s[1],h[1],f[1]),d=Math.max(c[1],s[1],h[1],f[1]);o<e&&(e=o),u>n&&(n=u),l<i&&(i=l),d>r&&(r=d)}}):(e=0,n=0,i=0,r=0);var c={minX:e,minY:i,maxX:n,maxY:r};return c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,c},getCount:function(){return this.get("children").length},sort:function(){var e=this.get("children");return t.each(e,function(t,e){return t[r]=e,t}),e.sort(a(function(t,e){return t.get("zIndex")-e.get("zIndex")})),this},findById:function(t){return this.find(function(e){return e.get("id")===t})},find:function(e){if(t.isString(e))return this.findById(e);var n=this.get("children"),i=null;return t.each(n,function(t){if(e(t)?i=t:t.find&&(i=t.find(e)),i)return!1}),i},findAll:function(e){var n=this.get("children"),i=[],r=[];return t.each(n,function(t){e(t)&&i.push(t),t.findAllBy&&(r=t.findAllBy(e),i=i.concat(r))}),i},findBy:function(e){var n=this.get("children"),i=null;return t.each(n,function(t){if(e(t)?i=t:t.findBy&&(i=t.findBy(e)),i)return!1}),i},findAllBy:function(e){var n=this.get("children"),i=[],r=[];return t.each(n,function(t){e(t)&&i.push(t),t.findAllBy&&(r=t.findAllBy(e),i=i.concat(r))}),i},getShape:function(t,e){var n,i=this._attrs.clip,r=this._cfg.children;if(i){var a=[t,e,1];i.invert(a,this.get("canvas")),i.isPointInPath(a[0],a[1])&&(n=c(r,t,e))}else n=c(r,t,e);return n},clearTotalMatrix:function(){if(this.get("totalMatrix")){this.setSilent("totalMatrix",null);for(var t=this._cfg.children,e=0;e<t.length;e++){t[e].clearTotalMatrix()}}},clear:function(t){for(var e=this._cfg.children,n=e.length-1;n>=0;n--)e[n].remove(!0,t);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),s.superclass.destroy.call(this))},clone:function(){var e=this._cfg.children,n=new s;return t.each(e,function(t){n.add(t.clone())}),n}}),module.exports=s;
},{"../util/index":"wF6e","./element":"KC3Q","../shapes/index":"ESBD"}],"ea66":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.now=f,exports.Timer=m,exports.timer=p,exports.timerFlush=w;var t,n,e=0,o=0,i=0,r=1e3,l=0,c=0,s=0,u="object"==typeof performance&&performance.now?performance:Date,a="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return c||(a(_),c=u.now()+s)}function _(){c=0}function m(){this._call=this._time=this._next=null}function p(t,n,e){var o=new m;return o.restart(t,n,e),o}function w(){f(),++e;for(var n,o=t;o;)(n=c-o._time)>=0&&o._call.call(null,n),o=o._next;--e}function h(){c=(l=u.now())+s,e=o=0;try{w()}finally{e=0,y(),c=0}}function x(){var t=u.now(),n=t-l;n>r&&(s-=n,l=t)}function y(){for(var e,o,i=t,r=1/0;i;)i._call?(r>i._time&&(r=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:t=o);n=e,v(r)}function v(t){e||(o&&(o=clearTimeout(o)),t-c>24?(t<1/0&&(o=setTimeout(h,t-u.now()-s)),i&&(i=clearInterval(i))):(i||(l=u.now(),i=setInterval(x,r)),e=1,a(h)))}m.prototype=p.prototype={constructor:m,restart:function(e,o,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?f():+i)+(null==o?0:+o),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,v()},stop:function(){this._call&&(this._call=null,this._time=1/0,v())}};
},{}],"jIZm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,u){var n=new e.Timer;return t=null==t?0:+t,n.restart(function(e){n.stop(),r(e+t)},t,u),n}
},{"./timer.js":"ea66"}],"QZ3s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,n){var u=new e.Timer,s=t;return null==t?(u.restart(r,t,n),u):(t=+t,n=null==n?(0,e.now)():+n,u.restart(function e(a){a+=s,u.restart(e,s+=t,n),r(a)},t,n),u)}
},{"./timer.js":"ea66"}],"rdzS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"now",{enumerable:!0,get:function(){return e.now}}),Object.defineProperty(exports,"timer",{enumerable:!0,get:function(){return e.timer}}),Object.defineProperty(exports,"timerFlush",{enumerable:!0,get:function(){return e.timerFlush}}),Object.defineProperty(exports,"timeout",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interval",{enumerable:!0,get:function(){return r.default}});var e=require("./timer.js"),t=n(require("./timeout.js")),r=n(require("./interval.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./timer.js":"ea66","./timeout.js":"jIZm","./interval.js":"QZ3s"}],"VacQ":[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=e;
},{}],"EZNz":[function(require,module,exports) {
"use strict";function t(t){return t*t}function e(t){return t*(2-t)}function u(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.quadIn=t,exports.quadOut=e,exports.quadInOut=u;
},{}],"ropQ":[function(require,module,exports) {
"use strict";function t(t){return t*t*t}function e(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubicIn=t,exports.cubicOut=e,exports.cubicInOut=u;
},{}],"rJoA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyInOut=exports.polyOut=exports.polyIn=void 0;var t=3,n=function t(n){function o(t){return Math.pow(t,n)}return n=+n,o.exponent=t,o}(t);exports.polyIn=n;var o=function t(n){function o(t){return 1-Math.pow(1-t,n)}return n=+n,o.exponent=t,o}(t);exports.polyOut=o;var e=function t(n){function o(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,o.exponent=t,o}(t);exports.polyInOut=e;
},{}],"XXPs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinIn=e,exports.sinOut=r,exports.sinInOut=s;var t=Math.PI,n=t/2;function e(t){return 1-Math.cos(t*n)}function r(t){return Math.sin(t*n)}function s(n){return(1-Math.cos(t*n))/2}
},{}],"PTZz":[function(require,module,exports) {
"use strict";function t(t){return Math.pow(2,10*t-10)}function e(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.expIn=t,exports.expOut=e,exports.expInOut=o;
},{}],"qwy6":[function(require,module,exports) {
"use strict";function t(t){return 1-Math.sqrt(1-t*t)}function r(t){return Math.sqrt(1- --t*t)}function e(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleIn=t,exports.circleOut=r,exports.circleInOut=e;
},{}],"rEBC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bounceIn=b,exports.bounceOut=f,exports.bounceInOut=x;var e=4/11,t=6/11,n=8/11,r=.75,u=9/11,o=10/11,c=.9375,s=21/22,i=63/64,p=1/e/e;function b(e){return 1-f(1-e)}function f(b){return(b=+b)<e?p*b*b:b<n?p*(b-=t)*b+r:b<o?p*(b-=u)*b+c:p*(b-=s)*b+i}function x(e){return((e*=2)<=1?1-f(1-e):f(e-1)+1)/2}
},{}],"G5Mi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backInOut=exports.backOut=exports.backIn=void 0;var t=1.70158,r=function t(r){function o(t){return t*t*((r+1)*t-r)}return r=+r,o.overshoot=t,o}(t);exports.backIn=r;var o=function t(r){function o(t){return--t*t*((r+1)*t+r)+1}return r=+r,o.overshoot=t,o}(t);exports.backOut=o;var e=function t(r){function o(t){return((t*=2)<1?t*t*((r+1)*t-r):(t-=2)*t*((r+1)*t+r)+2)/2}return r=+r,o.overshoot=t,o}(t);exports.backInOut=e;
},{}],"TN0k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elasticInOut=exports.elasticOut=exports.elasticIn=void 0;var t=2*Math.PI,n=1,r=.3,e=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return r*Math.pow(2,10*--t)*Math.sin((a-t)/e)}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticIn=e;var a=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return 1-r*Math.pow(2,-10*(t=+t))*Math.sin((t+a)/e)}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticOut=a;var i=function n(r,e){var a=Math.asin(1/(r=Math.max(1,r)))*(e/=t);function i(t){return((t=2*t-1)<0?r*Math.pow(2,10*t)*Math.sin((a-t)/e):2-r*Math.pow(2,-10*t)*Math.sin((a+t)/e))/2}return i.amplitude=function(r){return n(r,e*t)},i.period=function(t){return n(r,t)},i}(n,r);exports.elasticInOut=i;
},{}],"pJ11":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"easeLinear",{enumerable:!0,get:function(){return e.linear}}),Object.defineProperty(exports,"easeQuad",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeQuadIn",{enumerable:!0,get:function(){return t.quadIn}}),Object.defineProperty(exports,"easeQuadOut",{enumerable:!0,get:function(){return t.quadOut}}),Object.defineProperty(exports,"easeQuadInOut",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeCubic",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easeCubicIn",{enumerable:!0,get:function(){return r.cubicIn}}),Object.defineProperty(exports,"easeCubicOut",{enumerable:!0,get:function(){return r.cubicOut}}),Object.defineProperty(exports,"easeCubicInOut",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easePoly",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easePolyIn",{enumerable:!0,get:function(){return n.polyIn}}),Object.defineProperty(exports,"easePolyOut",{enumerable:!0,get:function(){return n.polyOut}}),Object.defineProperty(exports,"easePolyInOut",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easeSin",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeSinIn",{enumerable:!0,get:function(){return u.sinIn}}),Object.defineProperty(exports,"easeSinOut",{enumerable:!0,get:function(){return u.sinOut}}),Object.defineProperty(exports,"easeSinInOut",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeExp",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeExpIn",{enumerable:!0,get:function(){return o.expIn}}),Object.defineProperty(exports,"easeExpOut",{enumerable:!0,get:function(){return o.expOut}}),Object.defineProperty(exports,"easeExpInOut",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeCircle",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeCircleIn",{enumerable:!0,get:function(){return c.circleIn}}),Object.defineProperty(exports,"easeCircleOut",{enumerable:!0,get:function(){return c.circleOut}}),Object.defineProperty(exports,"easeCircleInOut",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeBounce",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceIn",{enumerable:!0,get:function(){return i.bounceIn}}),Object.defineProperty(exports,"easeBounceOut",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceInOut",{enumerable:!0,get:function(){return i.bounceInOut}}),Object.defineProperty(exports,"easeBack",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeBackIn",{enumerable:!0,get:function(){return a.backIn}}),Object.defineProperty(exports,"easeBackOut",{enumerable:!0,get:function(){return a.backOut}}),Object.defineProperty(exports,"easeBackInOut",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeElastic",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticIn",{enumerable:!0,get:function(){return s.elasticIn}}),Object.defineProperty(exports,"easeElasticOut",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticInOut",{enumerable:!0,get:function(){return s.elasticInOut}});var e=require("./linear.js"),t=require("./quad.js"),r=require("./cubic.js"),n=require("./poly.js"),u=require("./sin.js"),o=require("./exp.js"),c=require("./circle.js"),i=require("./bounce.js"),a=require("./back.js"),s=require("./elastic.js");
},{"./linear.js":"VacQ","./quad.js":"EZNz","./cubic.js":"ropQ","./poly.js":"rJoA","./sin.js":"XXPs","./exp.js":"PTZz","./circle.js":"qwy6","./bounce.js":"rEBC","./back.js":"G5Mi","./elastic.js":"TN0k"}],"fV2I":[function(require,module,exports) {
"use strict";function t(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function e(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.extend=e;
},{}],"LIaf":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=n,exports.default=k,exports.rgbConvert=M,exports.rgb=N,exports.Rgb=O,exports.hslConvert=P,exports.hsl=$,exports.brighter=exports.darker=void 0;var e=r(require("./define.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function n(){}var i=.7;exports.darker=i;var a=1/i;exports.brighter=a;var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),g=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),c=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),f=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function m(){return P(this).formatHsl()}function w(){return this.rgb().formatRgb()}function k(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=h.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?x(t):3===r?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?new O(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?new O(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=u.exec(e))?new O(t[1],t[2],t[3],1):(t=g.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=c.exec(e))?v(t[1],t[2],t[3],t[4]):(t=d.exec(e))?v(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=f.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):b.hasOwnProperty(e)?x(b[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function x(e){return new O(e>>16&255,e>>8&255,255&e,1)}function v(e,t,r,n){return n<=0&&(e=t=r=NaN),new O(e,t,r,n)}function M(e){return e instanceof n||(e=k(e)),e?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function N(e,t,r,n){return 1===arguments.length?M(e):new O(e,t,r,null==n?1:n)}function O(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function j(){return"#"+R(this.r)+R(this.g)+R(this.b)}function q(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function R(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new H(e,t,r,n)}function P(e){if(e instanceof H)return new H(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=k(e)),!e)return new H;if(e instanceof H)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),o=Math.max(t,r,i),s=NaN,l=o-a,h=(o+a)/2;return l?(s=t===o?(r-i)/l+6*(r<i):r===o?(i-t)/l+2:(t-r)/l+4,l/=h<.5?o+a:2-o-a,s*=60):l=h>0&&h<1?0:s,new H(s,l,h,e.opacity)}function $(e,t,r,n){return 1===arguments.length?P(e):new H(e,t,r,null==n?1:n)}function H(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function C(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}(0,e.default)(n,k,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:m,formatRgb:w,toString:w}),(0,e.default)(O,N,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:q,toString:q})),(0,e.default)(H,$,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new H(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new H(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new O(C(e>=240?e-240:e+120,i,n),C(e,i,n),C(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));
},{"./define.js":"fV2I"}],"XzID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rad2deg=exports.deg2rad=void 0;var e=Math.PI/180;exports.deg2rad=e;var r=180/Math.PI;exports.rad2deg=r;
},{}],"f7Av":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gray=b,exports.default=y,exports.Lab=w,exports.lch=N,exports.hcl=x,exports.Hcl=O;var t=i(require("./define.js")),n=require("./color.js"),e=require("./math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=i?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(e,o,u):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}var o=18,u=.96422,a=1,c=.82521,s=4/29,l=6/29,h=3*l*l,f=l*l*l;function p(t){if(t instanceof w)return new w(t.l,t.a,t.b,t.opacity);if(t instanceof O)return P(t);t instanceof n.Rgb||(t=(0,n.rgbConvert)(t));var e,r,i=M(t.r),o=M(t.g),s=M(t.b),l=d((.2225045*i+.7168786*o+.0606169*s)/a);return i===o&&o===s?e=r=l:(e=d((.4360747*i+.3850649*o+.1430804*s)/u),r=d((.0139322*i+.0971045*o+.7141733*s)/c)),new w(116*l-16,500*(e-l),200*(l-r),t.opacity)}function b(t,n){return new w(t,0,0,null==n?1:n)}function y(t,n,e,r){return 1===arguments.length?p(t):new w(t,n,e,null==r?1:r)}function w(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function d(t){return t>f?Math.pow(t,1/3):t/h+s}function g(t){return t>l?t*t*t:h*(t-s)}function v(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function M(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j(t){if(t instanceof O)return new O(t.h,t.c,t.l,t.opacity);if(t instanceof w||(t=p(t)),0===t.a&&0===t.b)return new O(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*e.rad2deg;return new O(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function N(t,n,e,r){return 1===arguments.length?j(t):new O(e,n,t,null==r?1:r)}function x(t,n,e,r){return 1===arguments.length?j(t):new O(t,n,e,null==r?1:r)}function O(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function P(t){if(isNaN(t.h))return new w(t.l,0,0,t.opacity);var n=t.h*e.deg2rad;return new w(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}(0,t.default)(w,y,(0,t.extend)(n.Color,{brighter:function(t){return new w(this.l+o*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new w(this.l-o*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return e=u*g(e),t=a*g(t),r=c*g(r),new n.Rgb(v(3.1338561*e-1.6168667*t-.4906146*r),v(-.9787684*e+1.9161415*t+.033454*r),v(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),(0,t.default)(O,x,(0,t.extend)(n.Color,{brighter:function(t){return new O(this.h,this.c,this.l+o*(null==t?1:t),this.opacity)},darker:function(t){return new O(this.h,this.c,this.l-o*(null==t?1:t),this.opacity)},rgb:function(){return P(this).rgb()}}));
},{"./define.js":"fV2I","./color.js":"LIaf","./math.js":"XzID"}],"CMX9":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d,exports.Cubehelix=b;var t=i(require("./define.js")),e=require("./color.js"),r=require("./math.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}var o=-.14861,s=1.78277,a=-.29227,u=-.90649,h=1.97294,c=h*u,f=h*s,l=s*a-u*o;function p(t){if(t instanceof b)return new b(t.h,t.s,t.l,t.opacity);t instanceof e.Rgb||(t=(0,e.rgbConvert)(t));var n=t.r/255,i=t.g/255,o=t.b/255,s=(l*o+c*n-f*i)/(l+c-f),p=o-s,d=(h*(i-s)-a*p)/u,y=Math.sqrt(d*d+p*p)/(h*s*(1-s)),g=y?Math.atan2(d,p)*r.rad2deg-120:NaN;return new b(g<0?g+360:g,y,s,t.opacity)}function d(t,e,r,n){return 1===arguments.length?p(t):new b(t,e,r,null==n?1:n)}function b(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}(0,t.default)(b,d,(0,t.extend)(e.Color,{brighter:function(t){return t=null==t?e.brighter:Math.pow(e.brighter,t),new b(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?e.darker:Math.pow(e.darker,t),new b(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*r.deg2rad,n=+this.l,i=isNaN(this.s)?0:this.s*n*(1-n),c=Math.cos(t),f=Math.sin(t);return new e.Rgb(255*(n+i*(o*c+s*f)),255*(n+i*(a*c+u*f)),255*(n+i*(h*c)),this.opacity)}}));
},{"./define.js":"fV2I","./color.js":"LIaf","./math.js":"XzID"}],"Peej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"color",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"rgb",{enumerable:!0,get:function(){return e.rgb}}),Object.defineProperty(exports,"hsl",{enumerable:!0,get:function(){return e.hsl}}),Object.defineProperty(exports,"lab",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"hcl",{enumerable:!0,get:function(){return r.hcl}}),Object.defineProperty(exports,"lch",{enumerable:!0,get:function(){return r.lch}}),Object.defineProperty(exports,"gray",{enumerable:!0,get:function(){return r.gray}}),Object.defineProperty(exports,"cubehelix",{enumerable:!0,get:function(){return t.default}});var e=o(require("./color.js")),r=o(require("./lab.js")),t=n(require("./cubehelix.js"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(t,o,c):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./color.js":"LIaf","./lab.js":"f7Av","./cubehelix.js":"CMX9"}],"MdBW":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){var u=e*e,s=u*e;return((1-3*e+3*u-s)*r+(4-6*u+3*s)*t+(1+3*e+3*u-3*s)*n+s*o)/6}function r(r){var t=r.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),u=r[o],s=r[o+1],a=o>0?r[o-1]:2*u-s,f=o<t-1?r[o+2]:2*s-u;return e((n-o/t)*t,a,u,s,f)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basis=e,exports.default=r;
},{}],"Uokr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./basis");function r(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}}
},{"./basis":"MdBW"}],"iOAL":[function(require,module,exports) {
"use strict";function e(e){return function(){return e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pUrU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=u,exports.gamma=o,exports.default=a;var t=e(require("./constant"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return function(n){return t+n*e}}function r(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function u(e,r){var u=r-e;return u?n(e,u>180||u<-180?u-360*Math.round(u/360):u):(0,t.default)(isNaN(e)?r:e)}function o(e){return 1==(e=+e)?a:function(n,u){return u-n?r(n,u,e):(0,t.default)(isNaN(n)?u:n)}}function a(e,r){var u=r-e;return u?n(e,u):(0,t.default)(isNaN(e)?r:e)}
},{"./constant":"iOAL"}],"jlek":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=exports.default=void 0;var r=require("d3-color"),e=a(require("./basis")),t=a(require("./basisClosed")),n=u(require("./color"));function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function u(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var a=n?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,e&&e.set(r,t),t}function a(r){return r&&r.__esModule?r:{default:r}}var i=function e(t){var o=(0,n.gamma)(t);function u(e,t){var u=o((e=(0,r.rgb)(e)).r,(t=(0,r.rgb)(t)).r),a=o(e.g,t.g),i=o(e.b,t.b),f=(0,n.default)(e.opacity,t.opacity);return function(r){return e.r=u(r),e.g=a(r),e.b=i(r),e.opacity=f(r),e+""}}return u.gamma=e,u}(1);function f(e){return function(t){var n,o,u=t.length,a=new Array(u),i=new Array(u),f=new Array(u);for(n=0;n<u;++n)o=(0,r.rgb)(t[n]),a[n]=o.r||0,i[n]=o.g||0,f[n]=o.b||0;return a=e(a),i=e(i),f=e(f),o.opacity=1,function(r){return o.r=a(r),o.g=i(r),o.b=f(r),o+""}}}exports.default=i;var s=f(e.default);exports.rgbBasis=s;var c=f(t.default);exports.rgbBasisClosed=c;
},{"d3-color":"Peej","./basis":"MdBW","./basisClosed":"Uokr","./color":"pUrU"}],"KSvz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./value"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var n,u=t?t.length:0,o=r?Math.min(u,r.length):0,a=new Array(o),f=new Array(u);for(n=0;n<o;++n)a[n]=(0,e.default)(r[n],t[n]);for(;n<u;++n)f[n]=t[n];return function(e){for(n=0;n<o;++n)f[n]=a[n](e);return f}}
},{"./value":"s68s"}],"Ac5X":[function(require,module,exports) {
"use strict";function e(e,t){var r=new Date;return t-=e=+e,function(n){return r.setTime(e+t*n),r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"EAWj":[function(require,module,exports) {
"use strict";function e(e,t){return t-=e=+e,function(r){return e+t*r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"lwUW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./value"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u,n={},o={};for(u in null!==t&&"object"==typeof t||(t={}),null!==r&&"object"==typeof r||(r={}),r)u in t?n[u]=(0,e.default)(t[u],r[u]):o[u]=r[u];return function(e){for(u in n)o[u]=n[u](e);return o}}
},{"./value":"s68s"}],"AvRa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=n(require("./number"));function n(e){return e&&e.__esModule?e:{default:e}}var r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t=new RegExp(r.source,"g");function u(e){return function(){return e}}function i(e){return function(n){return e(n)+""}}function l(n,l){var o,c,d,f=r.lastIndex=t.lastIndex=0,s=-1,x=[],a=[];for(n+="",l+="";(o=r.exec(n))&&(c=t.exec(l));)(d=c.index)>f&&(d=l.slice(f,d),x[s]?x[s]+=d:x[++s]=d),(o=o[0])===(c=c[0])?x[s]?x[s]+=c:x[++s]=c:(x[++s]=null,a.push({i:s,x:(0,e.default)(o,c)})),f=t.lastIndex;return f<l.length&&(d=l.slice(f),x[s]?x[s]+=d:x[++s]=d),x.length<2?a[0]?i(a[0].x):u(l):(l=a.length,function(e){for(var n,r=0;r<l;++r)x[(n=a[r]).i]=n.x(e);return x.join("")})}
},{"./number":"EAWj"}],"s68s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("d3-color"),r=i(require("./rgb")),t=i(require("./array")),u=i(require("./date")),a=i(require("./number")),o=i(require("./object")),n=i(require("./string")),f=i(require("./constant"));function i(e){return e&&e.__esModule?e:{default:e}}function l(i,l){var d,c=typeof l;return null==l||"boolean"===c?(0,f.default)(l):("number"===c?a.default:"string"===c?(d=(0,e.color)(l))?(l=d,r.default):n.default:l instanceof e.color?r.default:l instanceof Date?u.default:Array.isArray(l)?t.default:"function"!=typeof l.valueOf&&"function"!=typeof l.toString||isNaN(l)?o.default:a.default)(i,l)}
},{"d3-color":"Peej","./rgb":"jlek","./array":"KSvz","./date":"Ac5X","./number":"EAWj","./object":"lwUW","./string":"AvRa","./constant":"iOAL"}],"uncT":[function(require,module,exports) {
"use strict";function e(e,t){return t-=e=+e,function(r){return Math.round(e+t*r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"FhXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.identity=void 0;var t=180/Math.PI,e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a(e,a,r,s,n,l){var o,i,c;return(o=Math.sqrt(e*e+a*a))&&(e/=o,a/=o),(c=e*r+a*s)&&(r-=e*c,s-=a*c),(i=Math.sqrt(r*r+s*s))&&(r/=i,s/=i,c/=i),e*s<a*r&&(e=-e,a=-a,c=-c,o=-o),{translateX:n,translateY:l,rotate:Math.atan2(a,e)*t,skewX:Math.atan(c)*t,scaleX:o,scaleY:i}}exports.identity=e;
},{}],"maHi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=i,exports.parseSvg=l;var e,t,r,n,o=a(require("./decompose"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(n){return"none"===n?o.identity:(e||(e=document.createElement("DIV"),t=document.documentElement,r=document.defaultView),e.style.transform=n,n=r.getComputedStyle(t.appendChild(e),null).getPropertyValue("transform"),t.removeChild(e),n=n.slice(7,-1).split(","),(0,o.default)(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function l(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,o.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}
},{"./decompose":"FhXE"}],"jGxa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var e=r(require("../number")),t=require("./parse");function r(e){return e&&e.__esModule?e:{default:e}}function s(t,r,s,n){function a(e){return e.length?e.pop()+" ":""}return function(u,l){var o=[],p=[];return u=t(u),l=t(l),function(t,n,a,u,l,o){if(t!==a||n!==u){var p=l.push("translate(",null,r,null,s);o.push({i:p-4,x:(0,e.default)(t,a)},{i:p-2,x:(0,e.default)(n,u)})}else(a||u)&&l.push("translate("+a+r+u+s)}(u.translateX,u.translateY,l.translateX,l.translateY,o,p),function(t,r,s,u){t!==r?(t-r>180?r+=360:r-t>180&&(t+=360),u.push({i:s.push(a(s)+"rotate(",null,n)-2,x:(0,e.default)(t,r)})):r&&s.push(a(s)+"rotate("+r+n)}(u.rotate,l.rotate,o,p),function(t,r,s,u){t!==r?u.push({i:s.push(a(s)+"skewX(",null,n)-2,x:(0,e.default)(t,r)}):r&&s.push(a(s)+"skewX("+r+n)}(u.skewX,l.skewX,o,p),function(t,r,s,n,u,l){if(t!==s||r!==n){var o=u.push(a(u)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,e.default)(t,s)},{i:o-2,x:(0,e.default)(r,n)})}else 1===s&&1===n||u.push(a(u)+"scale("+s+","+n+")")}(u.scaleX,u.scaleY,l.scaleX,l.scaleY,o,p),u=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}var n=s(t.parseCss,"px, ","px)","deg)");exports.interpolateTransformCss=n;var a=s(t.parseSvg,", ",")",")");exports.interpolateTransformSvg=a;
},{"../number":"EAWj","./parse":"maHi"}],"Mg8l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=M;var t=Math.SQRT2,e=2,r=4,n=1e-12;function a(t){return((t=Math.exp(t))+1/t)/2}function u(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}function M(M,h){var i,f,s=M[0],c=M[1],l=M[2],p=h[0],x=h[1],v=h[2],d=p-s,g=x-c,q=d*d+g*g;if(q<n)f=Math.log(v/l)/t,i=function(e){return[s+e*d,c+e*g,l*Math.exp(t*e*f)]};else{var _=Math.sqrt(q),b=(v*v-l*l+r*q)/(2*l*e*_),j=(v*v-l*l-r*q)/(2*v*e*_),y=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(j*j+1)-j);f=(O-y)/t,i=function(r){var n=r*f,M=a(y),h=l/(e*_)*(M*o(t*n+y)-u(y));return[s+h*d,c+h*g,l*M/a(t*n+y)]}}return i.duration=1e3*f,i}
},{}],"cyqI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hsl)(o)).h,(n=(0,e.hsl)(n)).h),a=(0,t.default)(o.s,n.s),f=(0,t.default)(o.l,n.l),l=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.s=a(e),o.l=f(e),o.opacity=l(e),o+""}}}var u=n(t.hue);exports.default=u;var a=n(t.default);exports.hslLong=a;
},{"d3-color":"Peej","./color":"pUrU"}],"tK4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-color"),t=r(require("./color"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){var a=(0,t.default)((r=(0,e.lab)(r)).l,(u=(0,e.lab)(u)).l),l=(0,t.default)(r.a,u.a),o=(0,t.default)(r.b,u.b),c=(0,t.default)(r.opacity,u.opacity);return function(e){return r.l=a(e),r.a=l(e),r.b=o(e),r.opacity=c(e),r+""}}
},{"d3-color":"Peej","./color":"pUrU"}],"oqY6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=n?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hcl)(o)).h,(n=(0,e.hcl)(n)).h),c=(0,t.default)(o.c,n.c),a=(0,t.default)(o.l,n.l),f=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.c=c(e),o.l=a(e),o.opacity=f(e),o+""}}}var u=n(t.hue);exports.default=u;var c=n(t.default);exports.hclLong=c;
},{"d3-color":"Peej","./color":"pUrU"}],"AYsV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=exports.default=void 0;var e=require("d3-color"),t=n(require("./color"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(r){return function n(o){function u(n,u){var a=r((n=(0,e.cubehelix)(n)).h,(u=(0,e.cubehelix)(u)).h),i=(0,t.default)(n.s,u.s),c=(0,t.default)(n.l,u.l),f=(0,t.default)(n.opacity,u.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=c(Math.pow(e,o)),n.opacity=f(e),n+""}}return o=+o,u.gamma=n,u}(1)}var u=o(t.hue);exports.default=u;var a=o(t.default);exports.cubehelixLong=a;
},{"d3-color":"Peej","./color":"pUrU"}],"ENbV":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e(o/(r-1));return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fFXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return c.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return c.interpolateTransformSvg}}),Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return p.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return p.rgbBasisClosed}}),Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return s.hslLong}}),Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return d.hclLong}}),Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return g.cubehelixLong}}),Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return y.default}});var e=m(require("./src/value")),r=m(require("./src/array")),t=m(require("./src/basis")),n=m(require("./src/basisClosed")),o=m(require("./src/date")),u=m(require("./src/number")),i=m(require("./src/object")),a=m(require("./src/round")),l=m(require("./src/string")),c=require("./src/transform/index"),f=m(require("./src/zoom")),p=j(require("./src/rgb")),s=j(require("./src/hsl")),b=m(require("./src/lab")),d=j(require("./src/hcl")),g=j(require("./src/cubehelix")),y=m(require("./src/quantize"));function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=O();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function m(e){return e&&e.__esModule?e:{default:e}}
},{"./src/value":"s68s","./src/array":"KSvz","./src/basis":"MdBW","./src/basisClosed":"Uokr","./src/date":"Ac5X","./src/number":"EAWj","./src/object":"lwUW","./src/round":"uncT","./src/string":"AvRa","./src/transform/index":"jGxa","./src/zoom":"Mg8l","./src/rgb":"jlek","./src/hsl":"cyqI","./src/lab":"tK4o","./src/hcl":"oqY6","./src/cubehelix":"AYsV","./src/quantize":"ENbV"}],"LL1a":[function(require,module,exports) {
var t=require("../../util/index"),r=require("../../util/path"),a=require("d3-timer"),i=require("d3-ease"),e=require("d3-interpolate"),n=e.interpolate,s=e.interpolateArray,o=function(t){this._animators=[],this._current=0,this._timer=null,this.canvas=t};function h(a,i,e){var o={},h=i.toAttrs,m=i.fromAttrs,u=i.toMatrix;if(!a.get("destroyed")){var f;for(var l in h)if(!t.isEqual(m[l],h[l]))if("path"===l){var p=h[l],c=m[l];p.length>c.length?(p=r.parsePathString(h[l]),c=r.parsePathString(m[l]),c=r.fillPathByDiff(c,p),c=r.formatPath(c,p),i.fromAttrs.path=c,i.toAttrs.path=p):i.pathFormatted||(p=r.parsePathString(h[l]),c=r.parsePathString(m[l]),c=r.formatPath(c,p),i.fromAttrs.path=c,i.toAttrs.path=p,i.pathFormatted=!0),o[l]=[];for(var g=0;g<p.length;g++){for(var d=p[g],v=c[g],A=[],_=0;_<d.length;_++)t.isNumber(d[_])&&v&&t.isNumber(v[_])?(f=n(v[_],d[_]),A.push(f(e))):A.push(d[_]);o[l].push(A)}}else f=n(m[l],h[l]),o[l]=f(e);if(u){var P=s(i.fromMatrix,u)(e);a.setMatrix(P)}a.attr(o)}}function m(t,r,a){var e,n=r.startTime;if(a<n+r.delay||r.isPaused)return!1;var s=r.duration,o=r.easing;if(a=a-n-r.delay,r.toAttrs.repeat)e=a%s/s,e=i[o](e);else{if(!((e=a/s)<1))return t.attr(r.toAttrs),r.toMatrix&&t.setMatrix(r.toMatrix),!0;e=i[o](e)}return h(t,r,e),!1}t.augment(o,{initTimer:function(){var t,r,i,e=this,n=this;n._timer=a.timer(function(a){if(n._current=a,e._animators.length>0){for(var s=e._animators.length-1;s>=0;s--)if((t=e._animators[s]).get("destroyed"))n.removeAnimator(s);else{if(!t.get("pause").isPaused)for(var o=(r=t.get("animators")).length-1;o>=0;o--)i=r[o],m(t,i,a)&&(r.splice(o,1),!1,i.callback&&i.callback());0===r.length&&n.removeAnimator(s)}e.canvas.draw()}})},addAnimator:function(t){this._animators.push(t)},removeAnimator:function(t){this._animators.splice(t,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(t){t.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),module.exports=o;
},{"../../util/index":"wF6e","../../util/path":"pWSA","d3-timer":"rdzS","d3-ease":"pJ11","d3-interpolate":"fFXo"}],"NBmw":[function(require,module,exports) {
var t=require("../../util/index"),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,e=/[^\s\,]+/gi,r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,o={};function c(a,e){var r=a.match(s);t.each(r,function(t){t=t.split(":"),e.addColorStop(t[0],t[1])})}function m(a,e,n){var i,s,o=r.exec(a),m=t.mod(t.toRadian(parseFloat(o[1])),2*Math.PI),x=o[2],u=e.getBBox();m>=0&&m<.5*Math.PI?(i={x:u.minX,y:u.minY},s={x:u.maxX,y:u.maxY}):.5*Math.PI<=m&&m<Math.PI?(i={x:u.maxX,y:u.minY},s={x:u.minX,y:u.maxY}):Math.PI<=m&&m<1.5*Math.PI?(i={x:u.maxX,y:u.maxY},s={x:u.minX,y:u.minY}):(i={x:u.minX,y:u.maxY},s={x:u.maxX,y:u.minY});var p=Math.tan(m),l=p*p,f=(s.x-i.x+p*(s.y-i.y))/(l+1)+i.x,h=p*(s.x-i.x+p*(s.y-i.y))/(l+1)+i.y,y=n.createLinearGradient(i.x,i.y,f,h);return c(x,y),y}function x(t,a,e){var r=n.exec(t),i=parseFloat(r[1]),o=parseFloat(r[2]),m=parseFloat(r[3]),x=r[4];if(0===m){var u=x.match(s);return u[u.length-1].split(":")[1]}var p=a.getBBox(),l=p.maxX-p.minX,f=p.maxY-p.minY,h=Math.sqrt(l*l+f*f)/2,y=e.createRadialGradient(p.minX+l*i,p.minY+f*o,m*h,p.minX+l/2,p.minY+f/2,h);return c(x,y),y}function u(t,a,e){if(a.get("patternSource")&&a.get("patternSource")===t)return a.get("pattern");var r,n,s=i.exec(t),o=s[1],c=s[2];function m(){r=e.createPattern(n,o),a.setSilent("pattern",r),a.setSilent("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,c.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=c,n.complete?m():(n.onload=m,n.src=n.src),r}module.exports={parsePath:function(r){return r=r||[],t.isArray(r)?r:t.isString(r)?(r=r.match(a),t.each(r,function(a,n){if((a=a.match(e))[0].length>1){var i=a[0].charAt(0);a.splice(1,0,a[0].substr(1)),a[0]=i}t.each(a,function(t,e){isNaN(t)||(a[e]=+t)}),r[n]=a}),r):void 0},parseStyle:function(a,e,r){if(t.isString(a)){if("("===a[1]||"("===a[2]){if("l"===a[0])return m(a,e,r);if("r"===a[0])return x(a,e,r);if("p"===a[0])return u(a,e,r)}return a}},numberToColor:function(t){var a=o[t];if(!a){for(var e=t.toString(16),r=e.length;r<6;r++)e="0"+e;a="#"+e,o[t]=a}return a}};
},{"../../util/index":"wF6e"}],"YZkn":[function(require,module,exports) {
var t=require("../../util"),e=require("./util"),r=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],a=function(){function a(e){if(!e)return null;var r=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+r+'"></canvas>');return e.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var n=a.prototype;return n.beforeDraw=function(){var t=this.canvas;this.context&&this.context.clearRect(0,0,t.width,t.height)},n.draw=function(e){var r=this;r.animateHandler?r.toDraw=!0:function a(){r.animateHandler=t.requestAnimationFrame(function(){r.animateHandler=void 0,r.toDraw&&a()}),r.beforeDraw();try{r._drawGroup(e)}catch(n){console.warn("error in draw canvas, detail as:"),console.warn(n),r.toDraw=!1}r.toDraw=!1}()},n.drawSync=function(t){this.beforeDraw(),this._drawGroup(t)},n._drawGroup=function(t){if(!t._cfg.removed&&!t._cfg.destroyed&&t._cfg.visible){var e=t._cfg.children,r=null;this.setContext(t);for(var a=0;a<e.length;a++)r=e[a],e[a].isGroup?this._drawGroup(r):this._drawShape(r);this.restoreContext(t)}},n._drawShape=function(t){t._cfg.removed||t._cfg.destroyed||!t._cfg.visible||(this.setContext(t),t.drawInner(this.context),this.restoreContext(t),t._cfg.attrs=t._attrs,t._cfg.hasUpdate=!1)},n.setContext=function(t){var e=this.context,r=t._attrs.clip;e.save(),r&&(r.resetTransform(e),r.createPath(e),e.clip()),this.resetContext(t),t.resetTransform(e)},n.restoreContext=function(){this.context.restore()},n.resetContext=function(a){var n=this.context,i=a._attrs;if(!a.isGroup)for(var s in i)if(r.indexOf(s)>-1){var o=i[s];"fillStyle"===s&&(o=e.parseStyle(o,a,n)),"strokeStyle"===s&&(o=e.parseStyle(o,a,n)),"lineDash"===s&&n.setLineDash?t.isArray(o)?n.setLineDash(o):t.isString(o)&&n.setLineDash(o.split(" ")):n[s]=o}},a}();module.exports=a;
},{"../../util":"wF6e","./util":"NBmw"}],"VqKF":[function(require,module,exports) {
module.exports={painter:require("./painter")};
},{"./painter":"YZkn"}],"dCKW":[function(require,module,exports) {
var t=require("../../../util/index"),e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function s(e){var r=e.match(i);if(!r)return"";var s="";return r.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),t.each(r,function(t){t=t.split(":"),s+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),s}function n(r,i){var n,a,u=e.exec(r),o=t.mod(t.toRadian(parseFloat(u[1])),2*Math.PI),c=u[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},a={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},a={x:0,y:0}):(n={x:0,y:1},a={x:1,y:0});var x=Math.tan(o),l=x*x,d=(a.x-n.x+x*(a.y-n.y))/(l+1)+n.x,y=x*(a.x-n.x+x*(a.y-n.y))/(l+1)+n.y;i.setAttribute("x1",n.x),i.setAttribute("y1",n.y),i.setAttribute("x2",d),i.setAttribute("y2",y),i.innerHTML=s(c)}function a(t,e){var i=r.exec(t),n=parseFloat(i[1]),a=parseFloat(i[2]),u=parseFloat(i[3]),o=i[4];e.setAttribute("cx",n),e.setAttribute("cy",a),e.setAttribute("r",u),e.innerHTML=s(o)}var u=function(){function e(e){var r=null,i=t.uniqueId("gradient_");return"l"===e.toLowerCase()[0]?n(e,r=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")):a(e,r=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")),r.setAttribute("id",i),this.el=r,this.id=i,this.cfg=e,this}return e.prototype.match=function(t,e){return this.cfg===e},e}();module.exports=u;
},{"../../../util/index":"wF6e"}],"SVtK":[function(require,module,exports) {
var t=require("../../../util/index"),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},e={x:"-40%",y:"-40%",width:"200%",height:"200%"},o=function(){function o(i){this.type="filter";var o=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(e,function(t,i){o.setAttribute(i,t)}),this.el=o,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=i,this._parseShadow(i,o),this}var r=o.prototype;return r.match=function(i,e){if(this.type!==i)return!1;var o=!0,r=this.cfg;return t.each(Object.keys(r),function(t){if(r[t]!==e[t])return o=!1,!1}),o},r.update=function(t,e){var o=this.cfg;return o[i[t]]=e,this._parseShadow(o,this.el),this},r._parseShadow=function(t,i){var e='<feDropShadow \n      dx="'+(t.dx||0)+'" \n      dy="'+(t.dy||0)+'" \n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';i.innerHTML=e},o}();module.exports=o;
},{"../../../util/index":"wF6e"}],"FUQy":[function(require,module,exports) {
var t=require("../../../util/index"),e=function(){function e(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","marker"),s=t.uniqueId("marker_");i.setAttribute("id",s);var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("stroke","none"),n.setAttribute("fill",e.stroke||"#000"),i.appendChild(n),i.setAttribute("overflow","visible"),i.setAttribute("orient","auto-start-reverse"),this.el=i,this.child=n,this.id=s,this.cfg=e["marker-start"===r?"startArrow":"endArrow"],this.stroke=e.stroke||"#000",!0===this.cfg?this._setDefaultPath(r,n):this._setMarker(e.lineWidth,n),this}var r=e.prototype;return r.match=function(){return!1},r._setDefaultPath=function(t,e){var r=this.el;e.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),r.setAttribute("refX",3),r.setAttribute("refY",3)},r._setMarker=function(e,r){var i=this.el,s=this.cfg.path,n=this.cfg.d;t.isArray(s)&&(s=s.map(function(t){return t.join(" ")}).join("")),r.setAttribute("d",s),i.appendChild(r),n&&i.setAttribute("refX",n/e)},r.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},e}();module.exports=e;
},{"../../../util/index":"wF6e"}],"WsH3":[function(require,module,exports) {
var e=require("../../../util/index"),t=function(){function t(t){this.type="clip";var i=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=i,this.id=e.uniqueId("clip_"),i.id=this.id;var r=t._cfg.el;return i.appendChild(r.cloneNode(!0)),this.cfg=t,this}var i=t.prototype;return i.match=function(){return!1},i.remove=function(){var e=this.el;e.parentNode.removeChild(e)},t}();module.exports=t;
},{"../../../util/index":"wF6e"}],"Q9Nc":[function(require,module,exports) {
var t=require("../../../util/index"),e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,r=function(){function r(r){var i=document.createElementNS("http://www.w3.org/2000/svg","pattern");i.setAttribute("patternUnits","userSpaceOnUse");var n=document.createElementNS("http://www.w3.org/2000/svg","image");i.appendChild(n);var s=t.uniqueId("pattern_");i.id=s,this.el=i,this.id=s,this.cfg=r;var a=e.exec(r)[2];n.setAttribute("href",a);var o=new Image;function c(){console.log(o.width,o.height),i.setAttribute("width",o.width),i.setAttribute("height",o.height)}return a.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=a,o.complete?c():(o.onload=c,o.src=o.src),this}return r.prototype.match=function(t,e){return this.cfg===e},r}();module.exports=r;
},{"../../../util/index":"wF6e"}],"icmc":[function(require,module,exports) {
var e=require("../../util/index"),r=require("./defs/gradient"),i=require("./defs/shadow"),t=require("./defs/arrow"),d=require("./defs/clip"),n=require("./defs/pattern"),a=function(){function a(r){var i=document.createElementNS("http://www.w3.org/2000/svg","defs"),t=e.uniqueId("defs_");i.id=t,r.appendChild(i),this.children=[],this.defaultArrow={},this.el=i,this.canvas=r}var l=a.prototype;return l.find=function(e,r){for(var i=this.children,t=null,d=0;d<i.length;d++)if(i[d].match(e,r)){t=i[d].id;break}return t},l.findById=function(e){for(var r=this.children,i=null,t=0;t<r.length;t++)if(r[t].id===e){i=r[t];break}return i},l.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},l.getDefaultArrow=function(e,r){var i=e.stroke||e.strokeStyle;if(this.defaultArrow[i])return this.defaultArrow[i].id;var d=new t(e,r);return this.defaultArrow[i]=d,this.el.appendChild(d.el),d.id},l.addGradient=function(e){var i=new r(e);return this.el.appendChild(i.el),this.add(i),i.id},l.addArrow=function(e,r){var i=new t(e,r);return this.el.appendChild(i.el),i.id},l.addShadow=function(e){var r=new i(e);return this.el.appendChild(r.el),this.add(r),r.id},l.addPattern=function(e){var r=new n(e);return this.el.appendChild(r.el),this.add(r),r.id},l.addClip=function(e){var r=new d(e);return this.el.appendChild(r.el),this.add(r),r.id},a}();module.exports=a;
},{"../../util/index":"wF6e","./defs/gradient":"dCKW","./defs/shadow":"SVtK","./defs/arrow":"FUQy","./defs/clip":"WsH3","./defs/pattern":"Q9Nc"}],"HPrG":[function(require,module,exports) {
var t=require("../../util"),e=require("../../util/format"),r=e.parseRadius,i=require("../../shapes/marker"),a=require("./defs"),s={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,o={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},l={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},h={left:"left",start:"left",center:"middle",right:"end",end:"end"},f=function(){function e(e){if(!e)return null;var r=t.uniqueId("canvas_"),i=t.createDom('<svg id="'+r+'"></svg>');return e.appendChild(i),this.type="svg",this.canvas=i,this.context=new a(i),this.toDraw=!1,this}var f=e.prototype;return f.draw=function(e){var r=this;r.animateHandler?r.toDraw=!0:function i(){r.animateHandler=t.requestAnimationFrame(function(){r.animateHandler=void 0,r.toDraw&&i()});try{e.resetMatrix(),r._drawGroup(e,!1)}catch(a){console.warn("error in draw canvas, detail as:"),console.warn(a),r.toDraw=!1}r.toDraw=!1}()},f.drawSync=function(t){this._drawChildren(t,!1)},f._drawGroup=function(e,r){var i=e._cfg;i.removed||i.destroyed||(!i.el&&i.attrs&&(r=!0),i.tobeRemoved&&(t.each(i.tobeRemoved,function(t){t.parentNode&&t.parentNode.removeChild(t)}),i.tobeRemoved=[]),this._drawShape(e,r),i.children&&i.children.length>0&&this._drawChildren(e,r))},f._drawChildren=function(t,e){var r,i=t._cfg.children;if(i){if(t._cfg.el&&!e){var a=t._cfg.el.childNodes.length+1;0!==a&&a!==i.length&&(e=!0)}for(var s=0;s<i.length;s++)(r=i[s]).isGroup?this._drawGroup(r,e):this._drawShape(r,e)}},f._drawShape=function(t,e){var r=t._attrs,i=t._cfg,a=i.el;i.removed||i.destroyed?a&&a.parentNode.removeChild(i.el):(e&&a&&(a.parentNode&&a.parentNode.removeChild(a),a=null),!a&&i.parent&&(this._createDom(t),this._updateShape(t)),a=i.el,!1!==i.visible?(i.visible&&a.hasAttribute("visibility")&&a.removeAttribute("visibility"),i.hasUpdate&&this._updateShape(t),r.clip&&r.clip._cfg.hasUpdate&&this._updateShape(r.clip)):a.setAttribute("visibility","hidden"))},f._updateShape=function(e){var r=e._attrs,i=e._cfg.attrs;if(i)if(e._cfg.el||this._createDom(e),"clip"in r&&this._setClip(e,r.clip),("shadowOffsetX"in r||"shadowOffsetY"in r||"shadowBlur"in r||"shadowColor"in r)&&this._setShadow(e),"text"!==e.type){for(var a in"fan"===e.type&&this._updateFan(e),"marker"===e.type&&e._cfg.el.setAttribute("d",this._assembleMarker(r)),"rect"===e.type&&e._cfg.el.setAttribute("d",this._assembleRect(r)),r)r[a]!==i[a]&&this._setAttribute(e,a,r[a]);e._cfg.attrs=t.deepMix({},e._attrs),e._cfg.hasUpdate=!1}else this._updateText(e)},f._setAttribute=function(e,r,i){var a=e.type,s=e._attrs,n=e._cfg.el,l=this.context;if("marker"!==a&&"rect"!==a||!~["x","y","radius","r"].indexOf(r))if(~["circle","ellipse"].indexOf(a)&&~["x","y"].indexOf(r))n.setAttribute("c"+r,parseInt(i,10));else{if("polygon"===a&&"points"===r)return i&&0!==i.length||(i=""),t.isArray(i)&&(i=(i=i.map(function(t){return t[0]+","+t[1]})).join(" ")),void n.setAttribute("points",i);if("path"===r&&t.isArray(i))n.setAttribute("d",this._formatPath(i));else if("img"!==r){if("transform"===r)return i?void this._setTransform(e):void n.removeAttribute("transform");if("rotate"===r)return i?void this._setTransform(e):void n.removeAttribute("transform");if("matrix"!==r)if("fillStyle"!==r&&"strokeStyle"!==r){if("clip"!==r)if(~r.indexOf("Arrow"))if(r=o[r],i){var h=null;h="boolean"==typeof i?l.getDefaultArrow(s,r):l.addArrow(s,r),n.setAttribute(r,"url(#"+h+")"),e._cfg[r]=h}else e._cfg[r]=null,n.removeAttribute(r);else"html"===r&&("string"==typeof i?n.innerHTML=i:(n.innerHTML="",n.appendChild(i))),o[r]&&n.setAttribute(o[r],i)}else this._setColor(e,r,i);else this._setTransform(e)}else this._setImage(e,i)}},f._createDom=function(t){var e=s[t.type],r=t._attrs;if(!e)throw new Error("the type"+t.type+"is not supported by svg");var i=document.createElementNS("http://www.w3.org/2000/svg",e);return t._cfg.el=i,t._cfg.parent&&t._cfg.parent.get("el").appendChild(i),t._cfg.attrs={},"text"===t.type?(i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(r.stroke||r.strokeStyle||i.setAttribute("stroke","none"),r.fill||r.fillStyle||i.setAttribute("fill","none")),i},f._assembleMarker=function(e){var r=e.r;if(void 0===e.r&&(r=e.radius),isNaN(Number(e.x))||isNaN(Number(e.y))||isNaN(Number(r)))return"";var a="";return a="function"==typeof e.symbol?e.symbol(e.x,e.y,r):i.Symbols[e.symbol||"circle"](e.x,e.y,r),t.isArray(a)&&(a=a.map(function(t){return t.join(" ")}).join("")),a},f._assembleRect=function(e){var i=e.x,a=e.y,s=e.width,n=e.height,o=e.radius;if(!o)return"M "+i+","+a+" l "+s+",0 l 0,"+n+" l"+-s+" 0 z";var l=r(o);return t.isArray(o)?1===o.length?l.r1=l.r2=l.r3=l.r4=o[0]:2===o.length?(l.r1=l.r3=o[0],l.r2=l.r4=o[1]):3===o.length?(l.r1=o[0],l.r2=l.r4=o[1],l.r3=o[2]):(l.r1=o[0],l.r2=o[1],l.r3=o[2],l.r4=o[3]):l.r1=l.r2=l.r3=l.r4=o,[["M "+(i+l.r1)+","+a],["l "+(s-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(n-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-s)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-n)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]].join(" ")},f._formatPath=function(t){return~(t=t.map(function(t){return t.join(" ")}).join("")).indexOf("NaN")?"":t},f._setTransform=function(t){for(var e=t._attrs.matrix,r=t._cfg.el,i=[],a=0;a<9;a+=3)i.push(e[a]+","+e[a+1]);-1===(i=i.join(",")).indexOf("NaN")?r.setAttribute("transform","matrix("+i+")"):console.warn("invalid matrix:",e)},f._setImage=function(e,r){var i=e._attrs,a=e._cfg.el;if(t.isString(r))a.setAttribute("href",r);else if(r instanceof Image)i.width||(a.setAttribute("width",r.width),e._attrs.width=r.width),i.height||(a.setAttribute("height",r.height),e._attrs.height=r.height),a.setAttribute("href",r.src);else if(r instanceof HTMLElement&&t.isString(r.nodeName)&&"CANVAS"===r.nodeName.toUpperCase())a.setAttribute("href",r.toDataURL());else if(r instanceof ImageData){var s=document.createElement("canvas");s.setAttribute("width",r.width),s.setAttribute("height",r.height),s.getContext("2d").putImageData(r,0,0),i.width||(a.setAttribute("width",r.width),e._attrs.width=r.width),i.height||(a.setAttribute("height",r.height),e._attrs.height=r.height),a.setAttribute("href",s.toDataURL())}},f._updateFan=function(e){function r(t,e,r){return{x:e*Math.cos(t)+r.x,y:e*Math.sin(t)+r.y}}var i=e._attrs,a=e._cfg,s={x:i.x,y:i.y},n=[],o=i.startAngle,l=i.endAngle;t.isNumberEqual(l-o,2*Math.PI)&&(l-=1e-5);var h=r(o,i.re,s),f=r(l,i.re,s),d=l>o?1:0,u=Math.abs(l-o)>Math.PI?1:0,c=i.rs,p=i.re,m=r(o,i.rs,s),g=r(l,i.rs,s);i.rs>0?(n.push("M "+f.x+","+f.y),n.push("L "+g.x+","+g.y),n.push("A "+c+","+c+",0,"+u+","+(1===d?0:1)+","+m.x+","+m.y),n.push("L "+h.x+" "+h.y)):(n.push("M "+s.x+","+s.y),n.push("L "+h.x+","+h.y)),n.push("A "+p+","+p+",0,"+u+","+d+","+f.x+","+f.y),i.rs>0?n.push("L "+g.x+","+g.y):n.push("Z"),a.el.setAttribute("d",n.join(" "))},f._updateText=function(t){var e=t._attrs,r=t._cfg.attrs,i=t._cfg.el;for(var a in this._setFont(t),e)if(e[a]!==r[a]){if("text"===a){this._setText(t,""+e[a]);continue}if("fillStyle"===a||"strokeStyle"===a){this._setColor(t,a,e[a]);continue}if("matrix"===a){this._setTransform(t);continue}o[a]&&i.setAttribute(o[a],e[a])}t._cfg.attrs=Object.assign({},t._attrs),t._cfg.hasUpdate=!1},f._setFont=function(t){var e=t.get("el"),r=t._attrs,i=r.fontSize;e.setAttribute("alignment-baseline",l[r.textBaseline]||"baseline"),e.setAttribute("text-anchor",h[r.textAlign]||"left"),i&&+i<12&&(r.matrix=[1,0,0,0,1,0,0,0,1],t.transform([["t",-r.x,-r.y],["s",+i/12,+i/12],["t",r.x,r.y]]))},f._setText=function(e,r){var i=e._cfg.el,a=e._attrs.textBaseline||"bottom";if(r)if(~r.indexOf("\n")){var s=e._attrs.x,o=r.split("\n"),l=o.length-1,h="";t.each(o,function(t,e){0===e?"alphabetic"===a?h+='<tspan x="'+s+'" dy="'+-l+'em">'+t+"</tspan>":"top"===a?h+='<tspan x="'+s+'" dy="0.9em">'+t+"</tspan>":"middle"===a?h+='<tspan x="'+s+'" dy="'+-(l-1)/2+'em">'+t+"</tspan>":"bottom"===a?h+='<tspan x="'+s+'" dy="-'+(l+n)+'em">'+t+"</tspan>":"hanging"===a&&(h+='<tspan x="'+s+'" dy="'+(-(l-1)-n)+'em">'+t+"</tspan>"):h+='<tspan x="'+s+'" dy="1em">'+t+"</tspan>"}),i.innerHTML=h}else i.innerHTML=r;else i.innerHTML=""},f._setClip=function(t,e){var r=t._cfg.el;if(e)if(r.hasAttribute("clip-path"))e._cfg.hasUpdate&&this._updateShape(e);else{this._createDom(e),this._updateShape(e);var i=this.context.addClip(e);r.setAttribute("clip-path","url(#"+i+")")}else r.removeAttribute("clip-path")},f._setColor=function(t,e,r){var i=t._cfg.el,a=this.context;if(r)if(r=r.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(r)){var s=a.find("gradient",r);s||(s=a.addGradient(r)),i.setAttribute(o[e],"url(#"+s+")")}else if(/^[p,P]{1}[\s]*\(/.test(r)){var n=a.find("pattern",r);n||(n=a.addPattern(r)),i.setAttribute(o[e],"url(#"+n+")")}else i.setAttribute(o[e],r);else i.setAttribute(o[e],"none")},f._setShadow=function(t){var e=t._cfg.el,r=t._attrs,i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var a=this.context.find("filter",i);a||(a=this.context.addShadow(i,this)),e.setAttribute("filter","url(#"+a+")")}else e.removeAttribute("filter")},e}();module.exports=f;
},{"../../util":"wF6e","../../util/format":"mjSS","../../shapes/marker":"Zymh","./defs":"icmc"}],"FkGL":[function(require,module,exports) {
var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};module.exports=function(t,r,i){var a=i.target||i.srcElement;if(!e[a.tagName]){for(var c=a.parentNode;c&&!e[c.tagName];)c=c.parentNode;a=c}return this._cfg.el===a?this:this.find(function(e){return e._cfg&&e._cfg.el===a})};
},{}],"CSR1":[function(require,module,exports) {
module.exports={painter:require("./painter"),getShape:require("./getShape")};
},{"./painter":"HPrG","./getShape":"FkGL"}],"YlhW":[function(require,module,exports) {
module.exports={canvas:require("./canvas"),svg:require("./svg")};
},{"./canvas":"VqKF","./svg":"CSR1"}],"LyMn":[function(require,module,exports) {
var t=require("./util/index"),e=require("./event"),i=require("./core/group"),n=require("./core/mixin/timeline"),s=require("./renderers/index"),r=function t(e){t.superclass.constructor.call(this,e)};r.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(r,i),t.augment(r,{init:function(){r.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(e,i){if(e){if(!t.isEmpty(e._getEvents()))return e;var n=e.get("parent");if(n&&!i.propagationStopped)return this.getEmitter(n,i)}},_getEventObj:function(t,i,n,s){var r=new e(t,i,!0,!0);return r.x=n.x,r.y=n.y,r.clientX=i.clientX,r.clientY=i.clientY,r.currentTarget=s,r.target=s,r},_triggerEvent:function(t,e){var i,n=this.getPointByClient(e.clientX,e.clientY),s=this.getShape(n.x,n.y,e),r=this.get("el");if("mousemove"===t){var h=this.get("preShape");if(h&&h!==s){var a=this._getEventObj("mouseleave",e,n,h);(i=this.getEmitter(h,e))&&i.emit("mouseleave",a),r.style.cursor="default"}if(s){var o=this._getEventObj("mousemove",e,n,s);if((i=this.getEmitter(s,e))&&i.emit("mousemove",o),h!==s){var c=this._getEventObj("mouseenter",e,n,s);i&&i.emit("mouseenter",c,e)}}else{var g=this._getEventObj("mousemove",e,n,this);this.emit("mousemove",g)}this.set("preShape",s)}else{var l=this._getEventObj(t,e,n,s||this);(i=this.getEmitter(s,e))&&i!==this&&i.emit(t,l),this.emit(t,l)}s&&!s.get("destroyed")&&(r.style.cursor=s.attr("cursor")||"default")},_registEvents:function(){var e=this,i=e.get("el");t.each(["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"],function(t){i.addEventListener(t,function(i){e._triggerEvent(t,i)},!1)}),i.addEventListener("touchstart",function(i){t.isEmpty(i.touches)||e._triggerEvent("touchstart",i.touches[0])},!1),i.addEventListener("touchmove",function(i){t.isEmpty(i.touches)||e._triggerEvent("touchmove",i.touches[0])},!1),i.addEventListener("touchend",function(i){t.isEmpty(i.changedTouches)||e._triggerEvent("touchend",i.changedTouches[0])},!1)},_scale:function(){var t=this.get("pixelRatio");this.scale(t,t)},_setGlobalParam:function(){this.get("pixelRatio")||this.set("pixelRatio",t.getRatio());var e=s[this.get("renderer")||"canvas"];this._cfg.renderer=e,this._cfg.canvas=this;var i=new n(this);this._cfg.timeline=i},_setContainer:function(){var e=this.get("containerId"),i=this.get("containerDOM");i||(i=document.getElementById(e),this.set("containerDOM",i)),t.modifyCSS(i,{position:"relative"})},_initPainter:function(){var t=this.get("containerDOM"),e=new this._cfg.renderer.painter(t);this._cfg.painter=e,this._cfg.canvasDOM=this._cfg.el=e.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),i=this.get("heightCanvas"),n=this.get("widthStyle"),s=this.get("heightStyle");t.style.width=n,t.style.height=s,t.setAttribute("width",e),t.setAttribute("height",i)},getWidth:function(){var t=this.get("pixelRatio");return this.get("width")*t},getHeight:function(){var t=this.get("pixelRatio");return this.get("height")*t},changeSize:function(t,e){var i=this.get("pixelRatio"),n=t*i,s=e*i;this.set("widthCanvas",n),this.set("heightCanvas",s),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._resize()},getPointByClient:function(t,e){var i=this.get("el"),n=this.get("pixelRatio")||1,s=i.getBoundingClientRect();return{x:(t-s.left)*n,y:(e-s.top)*n}},getClientByPoint:function(t,e){var i=this.get("el").getBoundingClientRect(),n=this.get("pixelRatio")||1;return{clientX:t/n+i.left,clientY:e/n+i.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(t,e,i){return 3===arguments.length&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,t,e,i):r.superclass.getShape.call(this,t,e)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var t=this._cfg,e=t.containerDOM,i=t.canvasDOM;i&&e&&e.removeChild(i),t.timeline.stop(),r.superclass.destroy.call(this)}}),module.exports=r;
},{"./util/index":"wF6e","./event":"c2lg","./core/group":"VGOA","./core/mixin/timeline":"LL1a","./renderers/index":"YlhW"}],"nBh7":[function(require,module,exports) {
module.exports={Canvas:require("./canvas"),Group:require("./core/group"),Shape:require("./core/shape"),Arc:require("./shapes/arc"),Circle:require("./shapes/circle"),Dom:require("./shapes/dom"),Ellipse:require("./shapes/ellipse"),Fan:require("./shapes/fan"),Image:require("./shapes/image"),Line:require("./shapes/line"),Marker:require("./shapes/marker"),Path:require("./shapes/path"),Polygon:require("./shapes/polygon"),Polyline:require("./shapes/polyline"),Rect:require("./shapes/rect"),Text:require("./shapes/text"),PathSegment:require("./shapes/util/path-segment"),PathUtil:require("./util/path"),Event:require("./event"),version:"3.3.6"};
},{"./canvas":"LyMn","./core/group":"VGOA","./core/shape":"Zjio","./shapes/arc":"DruT","./shapes/circle":"v2hU","./shapes/dom":"k6qu","./shapes/ellipse":"HfOz","./shapes/fan":"slKq","./shapes/image":"OL1S","./shapes/line":"JvMF","./shapes/marker":"Zymh","./shapes/path":"NTbV","./shapes/polygon":"AxL4","./shapes/polyline":"YcgT","./shapes/rect":"ZSLD","./shapes/text":"VuwB","./shapes/util/path-segment":"vrtl","./util/path":"pWSA","./event":"c2lg"}],"MVGo":[function(require,module,exports) {
"use strict";var e=require("@antv/g/lib");module.exports=e;
},{"@antv/g/lib":"nBh7"}],"RaDt":[function(require,module,exports) {
module.exports=function(e,t,n){if(e){if(e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if(e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}};
},{}],"x7Q7":[function(require,module,exports) {
module.exports=function(t,e){if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),o=document.documentElement.clientTop,l=document.documentElement.clientLeft;return{top:n.top-o,bottom:n.bottom-o,left:n.left-l,right:n.right-l}}return e||null};
},{}],"FzKf":[function(require,module,exports) {
module.exports=function(t,e){var o=this.getStyle(t,"height",e);return"auto"===o&&(o=t.offsetHeight),parseFloat(o)};
},{}],"ZqKI":[function(require,module,exports) {
module.exports=function(t,e){var o=this.getHeight(t,e),r=parseFloat(this.getStyle(t,"borderTopWidth"))||0,a=parseFloat(this.getStyle(t,"paddingTop"))||0,i=parseFloat(this.getStyle(t,"paddingBottom"))||0;return o+r+(parseFloat(this.getStyle(t,"borderBottomWidth"))||0)+a+i};
},{}],"q2mH":[function(require,module,exports) {
module.exports=function(t,e){var i=this.getWidth(t,e),r=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,a=parseFloat(this.getStyle(t,"paddingLeft"))||0,d=parseFloat(this.getStyle(t,"paddingRight"))||0;return i+r+(parseFloat(this.getStyle(t,"borderRightWidth"))||0)+a+d};
},{}],"Zmya":[function(require,module,exports) {
module.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2};
},{}],"dQFU":[function(require,module,exports) {
var e=require("../type/is-nil");module.exports=function(t,r,n){try{return window.getComputedStyle?window.getComputedStyle(t,null)[r]:t.currentStyle[r]}catch(u){return e(n)?null:n}};
},{"../type/is-nil":"JOIo"}],"hyAT":[function(require,module,exports) {
module.exports=function(t,e){var o=this.getStyle(t,"width",e);return"auto"===o&&(o=t.offsetWidth),parseFloat(o)};
},{}],"ti37":[function(require,module,exports) {
module.exports={addEventListener:require("./add-event-listener"),createDom:require("./create-dom"),getBoundingClientRect:require("./get-bounding-client-rect"),getHeight:require("./get-height"),getOuterHeight:require("./get-outer-height"),getOuterWidth:require("./get-outer-width"),getRatio:require("./get-ratio"),getStyle:require("./get-style"),getWidth:require("./get-width"),modifyCSS:require("./modify-css"),requestAnimationFrame:require("./request-animation-frame")};
},{"./add-event-listener":"RaDt","./create-dom":"BIv4","./get-bounding-client-rect":"x7Q7","./get-height":"FzKf","./get-outer-height":"ZqKI","./get-outer-width":"q2mH","./get-ratio":"Zmya","./get-style":"dQFU","./get-width":"hyAT","./modify-css":"TgLT","./request-animation-frame":"Nikq"}],"jRbN":[function(require,module,exports) {
var r=require("../type/is-array-like"),e=Array.prototype.indexOf,t=function(t,a){return!!r(t)&&e.call(t,a)>-1};module.exports=t;
},{"../type/is-array-like":"ACXn"}],"F9Uk":[function(require,module,exports) {
var r=require("./each"),e=require("./type/is-array-like"),u=function(u,i){if(!e(u))return u;var n=[];return r(u,function(r,e){i(r,e)&&n.push(r)}),n};module.exports=u;
},{"./each":"yLcf","./type/is-array-like":"ACXn"}],"nLdk":[function(require,module,exports) {
var r=require("../filter"),e=require("./contains"),n=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r(n,function(r){return!e(t,r)})};module.exports=n;
},{"../filter":"F9Uk","./contains":"jRbN"}],"uAto":[function(require,module,exports) {
var e=require("../each"),r=require("../type/is-function"),t=Object.keys?function(e){return Object.keys(e)}:function(t){var n=[];return e(t,function(e,u){r(t)&&"prototype"===u||n.push(u)}),n};module.exports=t;
},{"../each":"yLcf","../type/is-function":"yged"}],"VFiT":[function(require,module,exports) {
var r=require("./keys"),e=require("../type/is-nil");function i(i,n){var t=r(n),u=t.length;if(e(i))return!u;for(var a=0;a<u;a+=1){var f=t[a];if(n[f]!==i[f]||!(f in i))return!1}return!0}module.exports=i;
},{"./keys":"uAto","../type/is-nil":"JOIo"}],"zeDT":[function(require,module,exports) {
var r=require("../type/is-function"),e=require("../type/is-plain-object"),i=require("../object/is-match");function t(t,n){var u=void 0;if(r(n)&&(u=n),e(n)&&(u=function(r){return i(r,n)}),u)for(var o=0;o<t.length;o+=1)if(u(t[o]))return t[o];return null}module.exports=t;
},{"../type/is-function":"yged","../type/is-plain-object":"j20u","../object/is-match":"VFiT"}],"UTzC":[function(require,module,exports) {
var r=require("../type/is-nil"),e=require("../type/is-array"),i=function(i,a){for(var n=null,t=0;t<i.length;t++){var u=i[t][a];if(!r(u)){n=e(u)?u[0]:u;break}}return n};module.exports=i;
},{"../type/is-nil":"JOIo","../type/is-array":"RVyA"}],"Zwzp":[function(require,module,exports) {
var r=require("../type/is-array"),e=require("../each"),u=function(u){if(!r(u))return u;var n=[];return e(u,function(u){r(u)?e(u,function(r){n.push(r)}):n.push(u)}),n};module.exports=u;
},{"../type/is-array":"RVyA","../each":"yLcf"}],"NMB1":[function(require,module,exports) {
var r=require("../type/is-array"),e=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(t))for(var i=0;i<t.length;i+=1)e(t[i],a);else a.push(t);return a};module.exports=e;
},{"../type/is-array":"RVyA"}],"ov6r":[function(require,module,exports) {
var r=require("../filter"),n=require("../type/is-array"),a=function(a){if(!(a=r(a,function(r){return!isNaN(r)})).length)return{min:0,max:0};if(n(a[0])){for(var e=[],t=0;t<a.length;t++)e=e.concat(a[t]);a=e}var i=Math.max.apply(null,a);return{min:Math.min.apply(null,a),max:i}};module.exports=a;
},{"../filter":"F9Uk","../type/is-array":"RVyA"}],"VM2e":[function(require,module,exports) {
var r=function(r){for(var n=[],o=0;o<r.length;o++)n=n.concat(r[o]);return n};module.exports=r;
},{}],"lPAC":[function(require,module,exports) {
var r=require("../type/is-array-like"),e=Array.prototype.splice,t=function(t,a){if(!r(t))return[];for(var i=t?a.length:0,o=i-1;i--;){var l=void 0,n=a[i];i!==o&&n===l||(l=n,e.call(t,n,1))}return t};module.exports=t;
},{"../type/is-array-like":"ACXn"}],"ELFA":[function(require,module,exports) {
var r=require("../type/is-array"),e=require("../type/is-plain-object"),i=require("../each"),t=function(t,u,n){if(!r(t)&&!e(t))return t;var a=n;return i(t,function(r,e){a=u(a,r,e)}),a};module.exports=t;
},{"../type/is-array":"RVyA","../type/is-plain-object":"j20u","../each":"yLcf"}],"YMZG":[function(require,module,exports) {
var r=require("../type/is-array-like"),e=require("./pull-at"),u=function(u,a){var t=[];if(!r(u))return t;for(var i=-1,l=[],n=u.length;++i<n;){var p=u[i];a(p,i,u)&&(t.push(p),l.push(i))}return e(u,l),t};module.exports=u;
},{"../type/is-array-like":"ACXn","./pull-at":"lPAC"}],"xxAo":[function(require,module,exports) {
var r=require("../type/is-string"),e=require("../type/is-function"),t=require("../type/is-array");function i(i,n){var u=void 0;if(e(n))u=function(r,e){return n(r)-n(e)};else{var o=[];r(n)?o.push(n):t(n)&&(o=n),u=function(r,e){for(var t=0;t<o.length;t+=1){var i=o[t];if(r[i]>e[i])return 1;if(r[i]<e[i])return-1}return 0}}return i.sort(u),i}module.exports=i;
},{"../type/is-string":"Uo9S","../type/is-function":"yged","../type/is-array":"RVyA"}],"Ry9m":[function(require,module,exports) {
var r=require("../each"),e=require("./contains"),n=function(n){var u=[];return r(n,function(r){e(u,r)||u.push(r)}),u};module.exports=n;
},{"../each":"yLcf","./contains":"jRbN"}],"Wj7y":[function(require,module,exports) {
var r=require("../each"),e=require("../to-array"),u=require("./uniq"),n=function(){var n=[],a=e(arguments);return r(a,function(r){n=n.concat(r)}),u(n)};module.exports=n;
},{"../each":"yLcf","../to-array":"QQdW","./uniq":"Ry9m"}],"Z5a3":[function(require,module,exports) {
var r=require("../type/is-nil"),e=require("../type/is-array"),i=require("../each");module.exports=function(u,n){for(var t=[],a={},o=0;o<u.length;o++){var p=u[o][n];r(p)||(e(p)||(p=[p]),i(p,function(r){a[r]||(t.push(r),a[r]=!0)}))}return t};
},{"../type/is-nil":"JOIo","../type/is-array":"RVyA","../each":"yLcf"}],"ecao":[function(require,module,exports) {
module.exports={contains:require("./contains"),difference:require("./difference"),find:require("./find"),firstValue:require("./first-value"),flatten:require("./flatten"),flattenDeep:require("./flatten-deep"),getRange:require("./get-range"),merge:require("./merge"),pull:require("./pull"),pullAt:require("./pull-at"),reduce:require("./reduce"),remove:require("./remove"),sortBy:require("./sort-by"),union:require("./union"),uniq:require("./uniq"),valuesOfKey:require("./values-of-key")};
},{"./contains":"jRbN","./difference":"nLdk","./find":"zeDT","./first-value":"UTzC","./flatten":"Zwzp","./flatten-deep":"NMB1","./get-range":"ov6r","./merge":"VM2e","./pull":"zD4U","./pull-at":"lPAC","./reduce":"ELFA","./remove":"YMZG","./sort-by":"xxAo","./union":"Wj7y","./uniq":"Ry9m","./values-of-key":"Z5a3"}],"Y5su":[function(require,module,exports) {
function r(r,e){return r["_wrap_"+e]}module.exports=r;
},{}],"EBj1":[function(require,module,exports) {
function r(r,n){if(r["_wrap_"+n])return r["_wrap_"+n];var _=function(_){r[n](_)};return r["_wrap_"+n]=_,_}module.exports=r;
},{}],"Acxl":[function(require,module,exports) {
module.exports={getWrapBehavior:require("./get-wrap-behavior"),wrapBehavior:require("./wrap-behavior")};
},{"./get-wrap-behavior":"Y5su","./wrap-behavior":"EBj1"}],"wE8Y":[function(require,module,exports) {
var r={};module.exports=function(t){var n=r[t];if(!n){for(var o=t.toString(16),e=o.length;e<6;e++)o="0"+o;n="#"+o,r[t]=n}return n};
},{}],"Ad8z":[function(require,module,exports) {
var r=require("../type/is-array"),i=require("../type/is-string"),e=require("../each"),t=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;module.exports=function(n){return r(n=n||[])?n:i(n)?(n=n.match(t),e(n,function(r,i){if((r=r.match(a))[0].length>1){var t=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=t}e(r,function(i,e){isNaN(i)||(r[e]=+i)}),n[i]=r}),n):void 0};
},{"../type/is-array":"RVyA","../type/is-string":"Uo9S","../each":"yLcf"}],"Uz8Q":[function(require,module,exports) {
var r=require("../type/is-array");module.exports=function(e){var t=0,n=0,a=0,l=0;return r(e)?1===e.length?t=n=a=l=e[0]:2===e.length?(t=a=e[0],n=l=e[1]):3===e.length?(t=e[0],n=l=e[1],a=e[2]):(t=e[0],n=e[1],a=e[2],l=e[3]):t=n=a=l=e,{r1:t,r2:n,r3:a,r4:l}};
},{"../type/is-array":"RVyA"}],"d9FF":[function(require,module,exports) {
var r=require("./number2color");module.exports={number2color:r,numberToColor:r,parsePath:require("./parse-path"),parseRadius:require("./parse-radius")};
},{"./number2color":"wE8Y","./parse-path":"Ad8z","./parse-radius":"Uz8Q"}],"F4E5":[function(require,module,exports) {
var r=function(r,t){var e=t.toString(),n=e.indexOf(".");if(-1===n)return Math.round(r);var o=e.substr(n+1).length;return o>20&&(o=20),parseFloat(r.toFixed(o))};module.exports=r;
},{}],"MnLp":[function(require,module,exports) {
var e=require("../type/is-number"),r=function(r){return e(r)&&r%1!=0};module.exports=r;
},{"../type/is-number":"GpWy"}],"cD84":[function(require,module,exports) {
var e=require("../type/is-number"),r=function(r){return e(r)&&r%2==0};module.exports=r;
},{"../type/is-number":"GpWy"}],"cLH6":[function(require,module,exports) {
var e=require("../type/is-number"),r=Number.isInteger?Number.isInteger:function(r){return e(r)&&r%1==0};module.exports=r;
},{"../type/is-number":"GpWy"}],"G3EH":[function(require,module,exports) {
var e=require("../type/is-number"),r=function(r){return e(r)&&r<0};module.exports=r;
},{"../type/is-number":"GpWy"}],"O0XT":[function(require,module,exports) {
var e=require("../type/is-number"),r=function(r){return e(r)&&r%2!=0};module.exports=r;
},{"../type/is-number":"GpWy"}],"awt8":[function(require,module,exports) {
var e=require("../type/is-number"),r=function(r){return e(r)&&r>0};module.exports=r;
},{"../type/is-number":"GpWy"}],"xs6X":[function(require,module,exports) {
var r=require("../type/is-array"),e=require("../type/is-function"),i=require("../each"),u=function(u,n){if(r(u)){var o=u[0],t=void 0;t=e(n)?n(u[0]):u[0][n];var a=void 0;return i(u,function(r){(a=e(n)?n(r):r[n])>t&&(o=r,t=a)}),o}};module.exports=u;
},{"../type/is-array":"RVyA","../type/is-function":"yged","../each":"yLcf"}],"Sga1":[function(require,module,exports) {
var r=require("../type/is-array"),e=require("../type/is-function"),i=require("../each"),u=function(u,n){if(r(u)){var o=u[0],t=void 0;t=e(n)?n(u[0]):u[0][n];var a=void 0;return i(u,function(r){(a=e(n)?n(r):r[n])<t&&(o=r,t=a)}),o}};module.exports=u;
},{"../type/is-array":"RVyA","../type/is-function":"yged","../each":"yLcf"}],"QqDZ":[function(require,module,exports) {
module.exports=parseInt;
},{}],"bdfv":[function(require,module,exports) {
var e=require("./is-number-equal");module.exports={clamp:require("./clamp"),fixedBase:require("./fixed-base"),isDecimal:require("./is-decimal"),isEven:require("./is-even"),isInteger:require("./is-integer"),isNegative:require("./is-negative"),isNumberEqual:e,isOdd:require("./is-odd"),isPositive:require("./is-positive"),maxBy:require("./max-by"),minBy:require("./min-by"),mod:require("./mod"),snapEqual:e,toDegree:require("./to-degree"),toInt:require("./to-integer"),toInteger:require("./to-integer"),toRadian:require("./to-radian")};
},{"./is-number-equal":"JGRU","./clamp":"HCgL","./fixed-base":"F4E5","./is-decimal":"MnLp","./is-even":"cD84","./is-integer":"cLH6","./is-negative":"G3EH","./is-odd":"O0XT","./is-positive":"awt8","./max-by":"xs6X","./min-by":"Sga1","./mod":"Reb9","./to-degree":"keho","./to-integer":"QqDZ","./to-radian":"TIkE"}],"yUKR":[function(require,module,exports) {
module.exports={mat3:require("./mat3"),vec2:require("./vec2"),vec3:require("./vec3"),transform:require("./transform")};
},{"./mat3":"K0Bf","./vec2":"pZss","./vec3":"yEtI","./transform":"PNH0"}],"Mq4p":[function(require,module,exports) {
module.exports=require("../each");
},{"../each":"yLcf"}],"CkQ7":[function(require,module,exports) {
module.exports=function(r,e){return r.hasOwnProperty(e)};
},{}],"Lqhj":[function(require,module,exports) {
module.exports=require("./has");
},{"./has":"CkQ7"}],"toQh":[function(require,module,exports) {
var e=require("../each"),r=require("../type/is-function"),t=Object.values?function(e){return Object.values(e)}:function(t){var u=[];return e(t,function(e,n){r(t)&&"prototype"===n||u.push(e)}),u};module.exports=t;
},{"../each":"yLcf","../type/is-function":"yged"}],"v6b9":[function(require,module,exports) {
var r=require("../array/contains"),e=require("./values");module.exports=function(u,a){return r(e(u),a)};
},{"../array/contains":"jRbN","./values":"toQh"}],"Ol2J":[function(require,module,exports) {
module.exports={forIn:require("./for-in"),has:require("./has"),hasKey:require("./has-key"),hasValue:require("./has-value"),keys:require("./keys"),isMatch:require("./is-match"),values:require("./values")};
},{"./for-in":"Mq4p","./has":"CkQ7","./has-key":"Lqhj","./has-value":"v6b9","./keys":"uAto","./is-match":"VFiT","./values":"toQh"}],"Sqf6":[function(require,module,exports) {
var e=/,?([a-z]),?/gi;module.exports=function(r){return r.join(",").replace(e,"$1")};
},{}],"TSZl":[function(require,module,exports) {
var r=require("./parse-path-array");module.exports=function(a,e,l,t,u){if(u)return[["M",+a+ +u,e],["l",l-2*u,0],["a",u,u,0,0,1,u,u],["l",0,t-2*u],["a",u,u,0,0,1,-u,u],["l",2*u-l,0],["a",u,u,0,0,1,-u,-u],["l",0,2*u-t],["a",u,u,0,0,1,u,-u],["z"]];var n=[["M",a,e],["l",l,0],["l",0,t],["l",-l,0],["z"]];return n.parsePathArray=r,n};
},{"./parse-path-array":"Sqf6"}],"dF8m":[function(require,module,exports) {
var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="\t\n\v\f\r   ᠎             　\u2028\u2029",t=new RegExp("([a-z])["+o+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+o+"]*,?["+o+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+o+"]*,?["+o+"]*","ig");module.exports=function(o){if(!o)return null;if((void 0===o?"undefined":e(o))===e([]))return o;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},u=[];return String(o).replace(t,function(e,o,t){var l=[],c=o.toLowerCase();if(t.replace(n,function(e,o){o&&l.push(+o)}),"m"===c&&l.length>2&&(u.push([o].concat(l.splice(0,2))),c="l",o="m"===o?"l":"L"),"o"===c&&1===l.length&&u.push([o,l[0]]),"r"===c)u.push([o].concat(l));else for(;l.length>=r[c]&&(u.push([o].concat(l.splice(0,r[c]))),r[c]););}),u};
},{}],"Htyk":[function(require,module,exports) {
module.exports=function(x,y){for(var r=[],e=0,n=x.length;n-2*!y>e;e+=2){var o=[{x:+x[e-2],y:+x[e-1]},{x:+x[e],y:+x[e+1]},{x:+x[e+2],y:+x[e+3]},{x:+x[e+4],y:+x[e+5]}];y?e?n-4===e?o[3]={x:+x[0],y:+x[1]}:n-2===e&&(o[2]={x:+x[0],y:+x[1]},o[3]={x:+x[2],y:+x[3]}):o[0]={x:+x[n-2],y:+x[n-1]}:n-4===e?o[3]=o[2]:e||(o[0]={x:+x[e],y:+x[e+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r};
},{}],"wBf4":[function(require,module,exports) {
var e=require("./parse-path-string"),a=require("./catmull-rom2bezier");function t(e,a,t,c,r){var s=[];if(null===r&&null===c&&(c=t),e=+e,a=+a,t=+t,c=+c,null!==r){var n=Math.PI/180,o=e+t*Math.cos(-c*n),l=e+t*Math.cos(-r*n);s=[["M",o,a+t*Math.sin(-c*n)],["A",t,t,0,+(r-c>180),0,l,a+t*Math.sin(-r*n)]]}else s=[["M",e,a],["m",0,-c],["a",t,c,0,1,1,0,2*c],["a",t,c,0,1,1,0,-2*c],["z"]];return s}module.exports=function(c){if(!(c=e(c))||!c.length)return[["M",0,0]];var r=[],s=0,n=0,o=0,l=0,p=0,i=void 0,h=void 0;"M"===c[0][0]&&(o=s=+c[0][1],l=n=+c[0][2],p++,r[0]=["M",s,n]);for(var u,f,g=3===c.length&&"M"===c[0][0]&&"R"===c[1][0].toUpperCase()&&"Z"===c[2][0].toUpperCase(),M=p,b=c.length;M<b;M++){if(r.push(u=[]),(i=(f=c[M])[0])!==i.toUpperCase())switch(u[0]=i.toUpperCase(),u[0]){case"A":u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=+f[6]+s,u[7]=+f[7]+n;break;case"V":u[1]=+f[1]+n;break;case"H":u[1]=+f[1]+s;break;case"R":for(var k=2,v=(h=[s,n].concat(f.slice(1))).length;k<v;k++)h[k]=+h[k]+s,h[++k]=+h[k]+n;r.pop(),r=r.concat(a(h,g));break;case"O":r.pop(),(h=t(s,n,f[1],f[2])).push(h[0]),r=r.concat(h);break;case"U":r.pop(),r=r.concat(t(s,n,f[1],f[2],f[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+f[1]+s,l=+f[2]+n;break;default:for(var U=1,d=f.length;U<d;U++)u[U]=+f[U]+(U%2?s:n)}else if("R"===i)h=[s,n].concat(f.slice(1)),r.pop(),r=r.concat(a(h,g)),u=["R"].concat(f.slice(-2));else if("O"===i)r.pop(),(h=t(s,n,f[1],f[2])).push(h[0]),r=r.concat(h);else if("U"===i)r.pop(),r=r.concat(t(s,n,f[1],f[2],f[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var C=0,m=f.length;C<m;C++)u[C]=f[C];if("O"!==(i=i.toUpperCase()))switch(u[0]){case"Z":s=+o,n=+l;break;case"H":s=u[1];break;case"V":n=u[1];break;case"M":o=u[u.length-2],l=u[u.length-1];break;default:s=u[u.length-2],n=u[u.length-1]}}return r};
},{"./parse-path-string":"dF8m","./catmull-rom2bezier":"Htyk"}],"uHx2":[function(require,module,exports) {
var a=require("./path2absolute"),t=function a(t,n,e,c,r,x,o,h,i,y){e===c&&(e+=1);var s=120*Math.PI/180,l=Math.PI/180*(+r||0),M=[],u=void 0,b=void 0,v=void 0,q=void 0,f=void 0,C=function(a,t,n){return{x:a*Math.cos(n)-t*Math.sin(n),y:a*Math.sin(n)+t*Math.cos(n)}};if(y)b=y[0],v=y[1],q=y[2],f=y[3];else{t=(u=C(t,n,-l)).x,n=u.y,h=(u=C(h,i,-l)).x,i=u.y,t===h&&n===i&&(h+=1,i+=1);var p=(t-h)/2,d=(n-i)/2,g=p*p/(e*e)+d*d/(c*c);g>1&&(e*=g=Math.sqrt(g),c*=g);var k=e*e,I=c*c,P=(x===o?-1:1)*Math.sqrt(Math.abs((k*I-k*d*d-I*p*p)/(k*d*d+I*p*p)));q=P*e*d/c+(t+h)/2,f=P*-c*p/e+(n+i)/2,b=Math.asin(((n-f)/c).toFixed(9)),v=Math.asin(((i-f)/c).toFixed(9)),b=t<q?Math.PI-b:b,v=h<q?Math.PI-v:v,b<0&&(b=2*Math.PI+b),v<0&&(v=2*Math.PI+v),o&&b>v&&(b-=2*Math.PI),!o&&v>b&&(v-=2*Math.PI)}var F=v-b;if(Math.abs(F)>s){var A=v,m=h,X=i;v=b+s*(o&&v>b?1:-1),M=a(h=q+e*Math.cos(v),i=f+c*Math.sin(v),e,c,r,0,o,m,X,[v,A,q,f])}F=v-b;var Y=Math.cos(b),Q=Math.sin(b),T=Math.cos(v),S=Math.sin(v),j=Math.tan(F/4),w=4/3*e*j,H=4/3*c*j,L=[t,n],V=[t+w*Q,n-H*Y],Z=[h+w*S,i-H*T],z=[h,i];if(V[0]=2*L[0]-V[0],V[1]=2*L[1]-V[1],y)return[V,Z,z].concat(M);for(var B=[],D=0,E=(M=[V,Z,z].concat(M).join().split(",")).length;D<E;D++)B[D]=D%2?C(M[D-1],M[D],l).y:C(M[D],M[D+1],l).x;return B},n=function(a,t,n,e){return[a,t,n,e,n,e]},e=function(a,t,n,e,c,r){return[1/3*a+2/3*n,1/3*t+2/3*e,1/3*c+2/3*n,1/3*r+2/3*e,c,r]};module.exports=function(c,r){var x=a(c),o=r&&a(r),h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},y=[],s=[],l="",M="",u=void 0,b=function(a,c,r){var x=void 0,o=void 0;if(!a)return["C",c.x,c.y,c.x,c.y,c.x,c.y];switch(!(a[0]in{T:1,Q:1})&&(c.qx=c.qy=null),a[0]){case"M":c.X=a[1],c.Y=a[2];break;case"A":a=["C"].concat(t.apply(0,[c.x,c.y].concat(a.slice(1))));break;case"S":"C"===r||"S"===r?(x=2*c.x-c.bx,o=2*c.y-c.by):(x=c.x,o=c.y),a=["C",x,o].concat(a.slice(1));break;case"T":"Q"===r||"T"===r?(c.qx=2*c.x-c.qx,c.qy=2*c.y-c.qy):(c.qx=c.x,c.qy=c.y),a=["C"].concat(e(c.x,c.y,c.qx,c.qy,a[1],a[2]));break;case"Q":c.qx=a[1],c.qy=a[2],a=["C"].concat(e(c.x,c.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"].concat(n(c.x,c.y,a[1],a[2]));break;case"H":a=["C"].concat(n(c.x,c.y,a[1],c.y));break;case"V":a=["C"].concat(n(c.x,c.y,c.x,a[1]));break;case"Z":a=["C"].concat(n(c.x,c.y,c.X,c.Y))}return a},v=function(a,t){if(a[t].length>7){a[t].shift();for(var n=a[t];n.length;)y[t]="A",o&&(s[t]="A"),a.splice(t++,0,["C"].concat(n.splice(0,6)));a.splice(t,1),u=Math.max(x.length,o&&o.length||0)}},q=function(a,t,n,e,c){a&&t&&"M"===a[c][0]&&"M"!==t[c][0]&&(t.splice(c,0,["M",e.x,e.y]),n.bx=0,n.by=0,n.x=a[c][1],n.y=a[c][2],u=Math.max(x.length,o&&o.length||0))};u=Math.max(x.length,o&&o.length||0);for(var f=0;f<u;f++){x[f]&&(l=x[f][0]),"C"!==l&&(y[f]=l,f&&(M=y[f-1])),x[f]=b(x[f],h,M),"A"!==y[f]&&"C"===l&&(y[f]="C"),v(x,f),o&&(o[f]&&(l=o[f][0]),"C"!==l&&(s[f]=l,f&&(M=s[f-1])),o[f]=b(o[f],i,M),"A"!==s[f]&&"C"===l&&(s[f]="C"),v(o,f)),q(x,o,h,i,f),q(o,x,i,h,f);var C=x[f],p=o&&o[f],d=C.length,g=o&&p.length;h.x=C[d-2],h.y=C[d-1],h.bx=parseFloat(C[d-4])||h.x,h.by=parseFloat(C[d-3])||h.y,i.bx=o&&(parseFloat(p[g-4])||i.x),i.by=o&&(parseFloat(p[g-3])||i.y),i.x=o&&p[g-2],i.y=o&&p[g-1]}return o?[x,o]:x};
},{"./path2absolute":"wBf4"}],"fys1":[function(require,module,exports) {
var t=require("../type/is-array"),a=require("./rect-path"),i=require("./path2curve"),r=function(t,a,i,r,x){return t*(t*(-3*a+9*i-9*r+3*x)+6*a-12*i+6*r)-3*a+3*i},x=function(t,a,i,x,n,e,o,h,y){null===y&&(y=1);for(var v=(y=y>1?1:y<0?0:y)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],M=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var m=v*u[f]+v,p=r(m,t,i,n,o),l=r(m,a,x,e,h),c=p*p+l*l;d+=M[f]*Math.sqrt(c)}return v*d},n=function(t,a,i,r,x,n,e,o){for(var h=[],y=[[],[]],v=void 0,u=void 0,M=void 0,d=void 0,f=0;f<2;++f)if(0===f?(u=6*t-12*i+6*x,v=-3*t+9*i-9*x+3*e,M=3*i-3*t):(u=6*a-12*r+6*n,v=-3*a+9*r-9*n+3*o,M=3*r-3*a),Math.abs(v)<1e-12){if(Math.abs(u)<1e-12)continue;(d=-M/u)>0&&d<1&&h.push(d)}else{var m=u*u-4*M*v,p=Math.sqrt(m);if(!(m<0)){var l=(-u+p)/(2*v);l>0&&l<1&&h.push(l);var c=(-u-p)/(2*v);c>0&&c<1&&h.push(c)}}for(var s=h.length,F=s,g=void 0;s--;)g=1-(d=h[s]),y[0][s]=g*g*g*t+3*g*g*d*i+3*g*d*d*x+d*d*d*e,y[1][s]=g*g*g*a+3*g*g*d*r+3*g*d*d*n+d*d*d*o;return y[0][F]=t,y[1][F]=a,y[0][F+1]=e,y[1][F+1]=o,y[0].length=y[1].length=F+2,{min:{x:Math.min.apply(0,y[0]),y:Math.min.apply(0,y[1])},max:{x:Math.max.apply(0,y[0]),y:Math.max.apply(0,y[1])}}},e=function(t,a,i,r,x,n,e,o){if(!(Math.max(t,i)<Math.min(x,e)||Math.min(t,i)>Math.max(x,e)||Math.max(a,r)<Math.min(n,o)||Math.min(a,r)>Math.max(n,o))){var h=(t-i)*(n-o)-(a-r)*(x-e);if(h){var y=((t*r-a*i)*(x-e)-(t-i)*(x*o-n*e))/h,v=((t*r-a*i)*(n-o)-(a-r)*(x*o-n*e))/h,u=+y.toFixed(2),M=+v.toFixed(2);if(!(u<+Math.min(t,i).toFixed(2)||u>+Math.max(t,i).toFixed(2)||u<+Math.min(x,e).toFixed(2)||u>+Math.max(x,e).toFixed(2)||M<+Math.min(a,r).toFixed(2)||M>+Math.max(a,r).toFixed(2)||M<+Math.min(n,o).toFixed(2)||M>+Math.max(n,o).toFixed(2)))return{x:y,y:v}}}},o=function(t,a,i){return a>=t.x&&a<=t.x+t.width&&i>=t.y&&i<=t.y+t.height},h=function(t,i,r,x){return null===t&&(t=i=r=x=0),null===i&&(i=t.y,r=t.width,x=t.height,t=t.x),{x:t,y:i,width:r,w:r,height:x,h:x,x2:t+r,y2:i+x,cx:t+r/2,cy:i+x/2,r1:Math.min(r,x)/2,r2:Math.max(r,x)/2,r0:Math.sqrt(r*r+x*x)/2,path:a(t,i,r,x),vb:[t,i,r,x].join(" ")}},y=function(t,a){return t=h(t),a=h(a),o(a,t.x,t.y)||o(a,t.x2,t.y)||o(a,t.x,t.y2)||o(a,t.x2,t.y2)||o(t,a.x,a.y)||o(t,a.x2,a.y)||o(t,a.x,a.y2)||o(t,a.x2,a.y2)||(t.x<a.x2&&t.x>a.x||a.x<t.x2&&a.x>t.x)&&(t.y<a.y2&&t.y>a.y||a.y<t.y2&&a.y>t.y)},v=function(a,i,r,x,e,o,y,v){t(a)||(a=[a,i,r,x,e,o,y,v]);var u=n.apply(null,a);return h(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},u=function(t,a,i,r,x,n,e,o,h){var y=1-h,v=Math.pow(y,3),u=Math.pow(y,2),M=h*h,d=M*h,f=t+2*h*(i-t)+M*(x-2*i+t),m=a+2*h*(r-a)+M*(n-2*r+a),p=i+2*h*(x-i)+M*(e-2*x+i),l=r+2*h*(n-r)+M*(o-2*n+r);return{x:v*t+3*u*h*i+3*y*h*h*x+d*e,y:v*a+3*u*h*r+3*y*h*h*n+d*o,m:{x:f,y:m},n:{x:p,y:l},start:{x:y*t+h*i,y:y*a+h*r},end:{x:y*x+h*e,y:y*n+h*o},alpha:90-180*Math.atan2(f-p,m-l)/Math.PI}},M=function(t,a,i){var r=v(t),n=v(a);if(!y(r,n))return i?0:[];for(var o=~~(x.apply(0,t)/8),h=~~(x.apply(0,a)/8),M=[],d=[],f={},m=i?0:[],p=0;p<o+1;p++){var l=u.apply(0,t.concat(p/o));M.push({x:l.x,y:l.y,t:p/o})}for(var c=0;c<h+1;c++){var s=u.apply(0,a.concat(c/h));d.push({x:s.x,y:s.y,t:c/h})}for(var F=0;F<o;F++)for(var g=0;g<h;g++){var b=M[F],q=M[F+1],w=d[g],z=d[g+1],C=Math.abs(q.x-b.x)<.001?"y":"x",j=Math.abs(z.x-w.x)<.001?"y":"x",I=e(b.x,b.y,q.x,q.y,w.x,w.y,z.x,z.y);if(I){if(f[I.x.toFixed(4)]===I.y.toFixed(4))continue;f[I.x.toFixed(4)]=I.y.toFixed(4);var P=b.t+Math.abs((I[C]-b[C])/(q[C]-b[C]))*(q.t-b.t),k=w.t+Math.abs((I[j]-w[j])/(z[j]-w[j]))*(z.t-w.t);P>=0&&P<=1&&k>=0&&k<=1&&(i?m++:m.push({x:I.x,y:I.y,t1:P,t2:k}))}}return m},d=function(t,a,r){t=i(t),a=i(a);for(var x=void 0,n=void 0,e=void 0,o=void 0,h=void 0,y=void 0,v=void 0,u=void 0,d=void 0,f=void 0,m=r?0:[],p=0,l=t.length;p<l;p++){var c=t[p];if("M"===c[0])x=h=c[1],n=y=c[2];else{"C"===c[0]?(d=[x,n].concat(c.slice(1)),x=d[6],n=d[7]):(d=[x,n,x,n,h,y,h,y],x=h,n=y);for(var s=0,F=a.length;s<F;s++){var g=a[s];if("M"===g[0])e=v=g[1],o=u=g[2];else{"C"===g[0]?(f=[e,o].concat(g.slice(1)),e=f[6],o=f[7]):(f=[e,o,e,o,v,u,v,u],e=v,o=u);var b=M(d,f,r);if(r)m+=b;else{for(var q=0,w=b.length;q<w;q++)b[q].segment1=p,b[q].segment2=s,b[q].bez1=d,b[q].bez2=f;m=m.concat(b)}}}}}return m};module.exports=function(t,a){return d(t,a)};
},{"../type/is-array":"RVyA","./rect-path":"TSZl","./path2curve":"uHx2"}],"g9tF":[function(require,module,exports) {
function n(n,r){var t=[],u=[];return n.length&&function n(r,h){if(1===r.length)t.push(r[0]),u.push(r[0]);else{for(var e=[],a=0;a<r.length-1;a++)0===a&&t.push(r[0]),a===r.length-2&&u.push(r[a+1]),e[a]=[(1-h)*r[a][0]+h*r[a+1][0],(1-h)*r[a][1]+h*r[a+1][1]];n(e,h)}}(n,r),{left:t,right:u.reverse()}}function r(r,t,u){var h=[[r[1],r[2]]];u=u||2;var e=[];"A"===t[0]?(h.push(t[6]),h.push(t[7])):"C"===t[0]?(h.push([t[1],t[2]]),h.push([t[3],t[4]]),h.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(h.push([t[1],t[2]]),h.push([t[3],t[4]])):h.push([t[1],t[2]]);for(var a=h,s=1/u,c=0;c<u-1;c++){var o=n(a,s/(1-s*c));e.push(o.left),a=o.right}return e.push(a),e.map(function(n){var r=[];return 4===n.length&&(r.push("C"),r=r.concat(n[2])),n.length>=3&&(3===n.length&&r.push("Q"),r=r.concat(n[1])),2===n.length&&r.push("L"),r=r.concat(n[n.length-1])})}function t(n,t,u){if(1===u)return[[].concat(n)];var h=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])h=h.concat(r(n,t,u));else{var e=[].concat(n);"M"===e[0]&&(e[0]="L");for(var a=0;a<=u-1;a++)h.push(e)}return h}module.exports=function(n,r){if(1===n.length)return n;var u=n.length-1,h=r.length-1,e=u/h,a=[];if(1===n.length&&"M"===n[0][0]){for(var s=0;s<h-u;s++)n.push(n[0]);return n}for(var c=0;c<h;c++){var o=Math.floor(e*c);a[o]=(a[o]||0)+1}var p=a.reduce(function(r,h,e){return e===u?r.concat(n[u]):r.concat(t(n[e],n[e+1],h))},[]);return p.unshift(n[0]),"Z"!==r[h]&&"z"!==r[h]||p.push("Z"),p};
},{}],"PS34":[function(require,module,exports) {
var r=require("../each");module.exports=function(e,n){if(e.length!==n.length)return!1;var t=!0;return r(e,function(r,e){if(r!==n[e])return t=!1,!1}),t};
},{"../each":"yLcf"}],"hQYu":[function(require,module,exports) {
var r=require("./is-segment-equal");function n(r,n,e){var i=null,t=e;return n<t&&(t=n,i="add"),r<t&&(t=r,i="del"),{type:i,min:t}}var e=function(e,i){var t=e.length,a=i.length,v=void 0,l=void 0,o=0;if(0===t||0===a)return null;for(var f=[],u=0;u<=t;u++)f[u]=[],f[u][0]={min:u};for(var m=0;m<=a;m++)f[0][m]={min:m};for(var p=1;p<=t;p++){v=e[p-1];for(var d=1;d<=a;d++){l=i[d-1],o=r(v,l)?0:1;var c=f[p-1][d].min+1,h=f[p][d-1].min+1,s=f[p-1][d-1].min+o;f[p][d]=n(c,h,s)}}return f};module.exports=function(r,n){var i=e(r,n),t=r.length,a=n.length,v=[],l=1,o=1;if(i[t][a]!==t){for(var f=1;f<=t;f++){var u=i[f][f].min;o=f;for(var m=l;m<=a;m++)i[f][m].min<u&&(u=i[f][m].min,o=m);l=o,i[f][l].type&&v.push({index:f-1,type:i[f][l].type})}for(var p=v.length-1;p>=0;p--)l=v[p].index,"add"===v[p].type?r.splice(l,0,[].concat(r[l])):r.splice(l,1)}if((t=r.length)<a)for(var d=0;d<a-t;d++)"z"===r[t-1][0]||"Z"===r[t-1][0]?r.splice(t-2,0,r[t-2]):r.push(r[t-1]);return r};
},{"./is-segment-equal":"PS34"}],"j6vM":[function(require,module,exports) {
function e(e){var c=[];switch(e[0]){case"M":case"L":c.push([e[1],e[2]]);break;case"A":c.push([e[6],e[7]]);break;case"Q":c.push([e[3],e[4]]),c.push([e[1],e[2]]);break;case"T":c.push([e[1],e[2]]);break;case"C":c.push([e[5],e[6]]),c.push([e[1],e[2]]),c.push([e[3],e[4]]);break;case"S":c.push([e[3],e[4]]),c.push([e[1],e[2]]);break;case"H":case"V":c.push([e[1],e[1]])}return c}function c(c,a,r){for(var n=[].concat(c),t=void 0,s=1/(r+1),u=e(a)[0],o=1;o<=r;o++)s*=o,0===(t=Math.floor(c.length*s))?n.unshift([u[0]*s+c[t][0]*(1-s),u[1]*s+c[t][1]*(1-s)]):n.splice(t,0,[u[0]*s+c[t][0]*(1-s),u[1]*s+c[t][1]*(1-s)]);return n}module.exports=function(a,r){if(a.length<=1)return a;for(var n=void 0,t=0;t<r.length;t++)if(a[t][0]!==r[t][0])switch(n=e(a[t]),r[t][0]){case"M":a[t]=["M"].concat(n[0]);break;case"L":a[t]=["L"].concat(n[0]);break;case"A":a[t]=[].concat(r[t]),a[t][6]=n[0][0],a[t][7]=n[0][1];break;case"Q":if(n.length<2){if(!(t>0)){a[t]=r[t];break}n=c(n,a[t-1],1)}a[t]=["Q"].concat(n.reduce(function(e,c){return e.concat(c)},[]));break;case"T":a[t]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(t>0)){a[t]=r[t];break}n=c(n,a[t-1],2)}a[t]=["C"].concat(n.reduce(function(e,c){return e.concat(c)},[]));break;case"S":if(n.length<2){if(!(t>0)){a[t]=r[t];break}n=c(n,a[t-1],1)}a[t]=["S"].concat(n.reduce(function(e,c){return e.concat(c)},[]));break;default:a[t]=r[t]}return a};
},{}],"HGrC":[function(require,module,exports) {
var e=require("./path-intersection"),r=require("./path2absolute"),t=require("./path2curve"),a=require("./catmull-rom2bezier");module.exports={catmullRom2Bezier:a,catmullRomToBezier:a,fillPath:require("./fill-path"),fillPathByDiff:require("./fill-path-by-diff"),formatPath:require("./format-path"),intersection:e,pathIntersection:e,parsePathArray:require("./parse-path-array"),parsePathString:require("./parse-path-string"),pathToAbsolute:r,path2absolute:r,pathTocurve:t,path2curve:t,rectPath:require("./rect-path")};
},{"./path-intersection":"fys1","./path2absolute":"wBf4","./path2curve":"uHx2","./catmull-rom2bezier":"Htyk","./fill-path":"g9tF","./fill-path-by-diff":"hQYu","./format-path":"j6vM","./parse-path-array":"Sqf6","./parse-path-string":"dF8m","./rect-path":"TSZl"}],"dQiH":[function(require,module,exports) {
var r=require("../to-string"),e=function(e){return r(e).toLowerCase()};module.exports=e;
},{"../to-string":"zzSa"}],"oTgz":[function(require,module,exports) {
module.exports=require("./lower-case");
},{"./lower-case":"dQiH"}],"vfVs":[function(require,module,exports) {
var r=function(r,e){return r&&e?r.replace(/\\?\{([^{}]+)\}/g,function(r,n){return"\\"===r.charAt(0)?r.slice(1):void 0===e[n]?"":e[n]}):r};module.exports=r;
},{}],"qRlZ":[function(require,module,exports) {
var r=require("../to-string"),e=function(e){return r(e).toUpperCase()};module.exports=e;
},{"../to-string":"zzSa"}],"nFga":[function(require,module,exports) {
module.exports=require("./upper-case");
},{"./upper-case":"qRlZ"}],"JTKy":[function(require,module,exports) {
var e={lc:require("./lc"),lowerCase:require("./lower-case"),lowerFirst:require("./lower-first"),substitute:require("./substitute"),uc:require("./uc"),upperCase:require("./upper-case"),upperFirst:require("./upper-first")};module.exports=e;
},{"./lc":"oTgz","./lower-case":"dQiH","./lower-first":"oBs3","./substitute":"vfVs","./uc":"nFga","./upper-case":"qRlZ","./upper-first":"HEpt"}],"WDOT":[function(require,module,exports) {
var n=function(n){return null===n};module.exports=n;
},{}],"O85M":[function(require,module,exports) {
var o=function(o){return void 0===o};module.exports=o;
},{}],"OGG5":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"RegExp")};module.exports=r;
},{"./is-type":"f5Gi"}],"ZWOt":[function(require,module,exports) {
var e=require("./is-type"),r=function(r){return e(r,"Arguments")};module.exports=r;
},{"./is-type":"f5Gi"}],"yytr":[function(require,module,exports) {
var r=require("./is-type"),e=function(e){return r(e,"Error")};module.exports=e;
},{"./is-type":"f5Gi"}],"Sba0":[function(require,module,exports) {
var e=require("./is-type"),i={getType:require("./get-type"),isArray:require("./is-array"),isArrayLike:require("./is-array-like"),isBoolean:require("./is-boolean"),isFunction:require("./is-function"),isNil:require("./is-nil"),isNull:require("./is-null"),isNumber:require("./is-number"),isObject:require("./is-object"),isObjectLike:require("./is-object-like"),isPlainObject:require("./is-plain-object"),isPrototype:require("./is-prototype"),isType:e,isUndefined:require("./is-undefined"),isString:require("./is-string"),isRegExp:require("./is-reg-exp"),isDate:require("./is-date"),isArguments:require("./is-arguments"),isError:require("./is-error")};module.exports=i;
},{"./is-type":"f5Gi","./get-type":"r1dF","./is-array":"RVyA","./is-array-like":"ACXn","./is-boolean":"EI7r","./is-function":"yged","./is-nil":"JOIo","./is-null":"WDOT","./is-number":"GpWy","./is-object":"xWET","./is-object-like":"EiMf","./is-plain-object":"j20u","./is-prototype":"qNNh","./is-undefined":"O85M","./is-string":"Uo9S","./is-reg-exp":"OGG5","./is-date":"MUS1","./is-arguments":"ZWOt","./is-error":"yytr"}],"tzUB":[function(require,module,exports) {
function t(t,n,o){var u=void 0;return function(){var e=this,i=arguments,l=o&&!u;clearTimeout(u),u=setTimeout(function(){u=null,o||t.apply(e,i)},n),l&&t.apply(e,i)}}module.exports=t;
},{}],"Yjd1":[function(require,module,exports) {
var r=require("./each"),e=require("./type/is-array"),t=Object.prototype.hasOwnProperty,u=function(u,n){if(!n||!e(u))return u;var a={},o=null;return r(u,function(r){o=n(r),t.call(a,o)?a[o].push(r):a[o]=[r]}),a};module.exports=u;
},{"./each":"yLcf","./type/is-array":"RVyA"}],"nv0Q":[function(require,module,exports) {
var r=require("./type/is-function"),e=require("./type/is-array"),t=require("./group-by"),i=function(i,n){if(!n)return{0:i};if(!r(n)){var u=e(n)?n:n.replace(/\s+/g,"").split("*");n=function(r){for(var e="_",t=0,i=u.length;t<i;t++)e+=r[u[t]]&&r[u[t]].toString();return e}}return t(i,n)};module.exports=i;
},{"./type/is-function":"yged","./type/is-array":"RVyA","./group-by":"Yjd1"}],"Wfxb":[function(require,module,exports) {
var r=require("./group-to-map"),u=function(u,e){if(!e)return[u];var o=r(u,e),n=[];for(var t in o)n.push(o[t]);return n};module.exports=u;
},{"./group-to-map":"nv0Q"}],"NeKQ":[function(require,module,exports) {
var r=require("./type/is-array-like"),e=function(e,t){if(!r(e))return-1;var a=Array.prototype.indexOf;if(a)return a.call(e,t);for(var i=-1,n=0;n<e.length;n++)if(e[n]===t){i=n;break}return i};module.exports=e;
},{"./type/is-array-like":"ACXn"}],"nqSc":[function(require,module,exports) {
var e=require("./type/is-function"),r=require("./is-equal"),u=function(u,i,n){return e(n)?!!n(u,i):r(u,i)};module.exports=u;
},{"./type/is-function":"yged","./is-equal":"eRQR"}],"hbm5":[function(require,module,exports) {
var r=require("./each"),e=require("./type/is-array-like"),u=function(u,i){if(!e(u))return u;var n=[];return r(u,function(r,e){n.push(i(r,e))}),n};module.exports=u;
},{"./each":"yLcf","./type/is-array-like":"ACXn"}],"cB9A":[function(require,module,exports) {
var e=require("./each"),r=require("./type/is-plain-object"),t=Object.prototype.hasOwnProperty,n=function(n,o){if(null===n||!r(n))return{};var u={};return e(o,function(e){t.call(n,e)&&(u[e]=n[e])}),u};module.exports=n;
},{"./each":"yLcf","./type/is-plain-object":"j20u"}],"ZVhG":[function(require,module,exports) {
function n(n,l,i){var e=void 0,o=void 0,t=void 0,u=void 0,a=0;i||(i={});var r=function(){a=!1===i.leading?0:Date.now(),e=null,u=n.apply(o,t),e||(o=t=null)},c=function(){var c=Date.now();a||!1!==i.leading||(a=c);var v=l-(c-a);return o=this,t=arguments,v<=0||v>l?(e&&(clearTimeout(e),e=null),a=c,u=n.apply(o,t),e||(o=t=null)):e||!1===i.trailing||(e=setTimeout(r,v)),u};return c.cancel=function(){clearTimeout(e),a=0,e=o=t=null},c}module.exports=n;
},{}],"CFn6":[function(require,module,exports) {
var e=require("./each"),r=require("./mix"),i=require("./dom/"),t=require("./array/"),u=require("./event/"),q=require("./format"),a=require("./math/"),o=require("./matrix/"),l=require("./object/"),p=require("./path/"),m=require("./string/"),n=require("./type/"),U={DOMUtil:i,DomUtil:i,MatrixUtil:o,PathUtil:p,arrayUtil:t,domUtil:i,eventUtil:u,formatUtil:q,mathUtil:a,matrixUtil:o,objectUtil:l,stringUtil:m,pathUtil:p,typeUtil:n,augment:require("./augment"),clone:require("./clone"),debounce:require("./debounce"),deepMix:require("./deep-mix"),each:e,extend:require("./extend"),filter:require("./filter"),group:require("./group"),groupBy:require("./group-by"),groupToMap:require("./group-to-map"),indexOf:require("./index-of"),isEmpty:require("./is-empty"),isEqual:require("./is-equal"),isEqualWith:require("./is-equal-with"),map:require("./map"),mix:r,pick:require("./pick"),throttle:require("./throttle"),toArray:require("./to-array"),toString:require("./to-string"),uniqueId:require("./unique-id")};e([i,t,u,q,a,o,l,p,m,n],function(e){r(U,e)}),module.exports=U;
},{"./each":"yLcf","./mix":"eGDv","./dom/":"ti37","./array/":"ecao","./event/":"Acxl","./format":"d9FF","./math/":"bdfv","./matrix/":"yUKR","./object/":"Ol2J","./path/":"HGrC","./string/":"JTKy","./type/":"Sba0","./augment":"EVXn","./clone":"Gja6","./debounce":"tzUB","./deep-mix":"AIel","./extend":"zFO7","./filter":"F9Uk","./group":"Wfxb","./group-by":"Yjd1","./group-to-map":"nv0Q","./index-of":"NeKQ","./is-empty":"Fsar","./is-equal":"eRQR","./is-equal-with":"nqSc","./map":"hbm5","./pick":"cB9A","./throttle":"ZVhG","./to-array":"QQdW","./to-string":"zzSa","./unique-id":"aP8D"}],"e9Mz":[function(require,module,exports) {
"use strict";var e=require("@antv/util/lib"),i=require("./renderer"),r=e.mix({},e,{assign:e.mix,merge:e.deepMix,cloneDeep:e.clone,isFinite:isFinite,isNaN:isNaN,snapEqual:e.isNumberEqual,remove:e.pull,inArray:e.contains,toAllPadding:function(e){var i=0,t=0,a=0,s=0;return r.isNumber(e)||r.isString(e)?i=t=a=s=e:r.isArray(e)?(i=e[0],a=r.isNil(e[1])?e[0]:e[1],s=r.isNil(e[2])?e[0]:e[2],t=r.isNil(e[3])?a:e[3]):r.isObject(e)&&(i=e.top||0,a=e.right||0,s=e.bottom||0,t=e.left||0),[i,a,s,t]},getClipByRange:function(e){var r=e.tl,t=e.br;return new i.Rect({attrs:{x:r.x,y:r.y,width:t.x-r.x,height:t.y-r.y}})}});r.Array={groupToMap:e.groupToMap,group:e.group,merge:e.merge,values:e.valuesOfKey,getRange:e.getRange,firstValue:e.firstValue,remove:e.pull},module.exports=r;
},{"@antv/util/lib":"CFn6","./renderer":"MVGo"}],"SpGf":[function(require,module,exports) {
function e(e){return e&&e.__esModule?e:{default:e}}module.exports=e;
},{}],"XfJI":[function(require,module,exports) {
function r(r){if(Array.isArray(r)){for(var e=0,n=new Array(r.length);e<r.length;e++)n[e]=r[e];return n}}module.exports=r;
},{}],"OMTj":[function(require,module,exports) {
function t(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}module.exports=t;
},{}],"wFNi":[function(require,module,exports) {
function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}module.exports=e;
},{}],"Fhqp":[function(require,module,exports) {
var r=require("./arrayWithoutHoles"),e=require("./iterableToArray"),a=require("./nonIterableSpread");function o(o){return r(o)||e(o)||a()}module.exports=o;
},{"./arrayWithoutHoles":"XfJI","./iterableToArray":"OMTj","./nonIterableSpread":"wFNi"}],"er2b":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),a=t(require("@babel/runtime/helpers/toConsumableArray")),e=require("../util"),n=require("../renderer"),i=e.PathUtil;function r(t){var a,e,i,r,l,s=t.start,o=t.end,d=t.getWidth(),c=t.getHeight();return t.isPolar?(r=t.getRadius(),i=t.getCenter(),a=t.startAngle,e=t.endAngle,(l=new n.Fan({attrs:{x:i.x,y:i.y,rs:0,re:r+200,startAngle:a,endAngle:a}})).endState={endAngle:e}):(l=new n.Rect({attrs:{x:s.x-200,y:o.y-200,width:t.isTransposed?d+400:0,height:t.isTransposed?0:c+400}}),t.isTransposed?l.endState={height:c+400}:l.endState={width:d+400}),l.isClip=!0,l}function l(t){if(e.isEmpty(t))return null;var a=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;return e.each(t,function(t){a=a>t.x?t.x:a,n=n<t.x?t.x:n,i=i>t.y?t.y:i,r=r<t.y?t.y:r}),{minX:a,maxX:n,minY:i,maxY:r,centerX:(a+n)/2,centerY:(i+r)/2}}function s(t,a){var e,n,i=l(t.points||t.get("origin").points),r=a.startAngle,s=a.endAngle-r;return a.isTransposed?(e=i.maxY*s,n=i.minY*s):(e=i.maxX*s,n=i.minX*s),{startAngle:n+=r,endAngle:e+=r}}function o(t,a,n){var i={};return t.delay&&(i.delay=e.isFunction(t.delay)?t.delay(a,n):t.delay),i.easing=e.isFunction(t.easing)?t.easing(a,n):t.easing,i.duration=e.isFunction(t.duration)?t.duration(a,n):t.duration,i.callback=t.callback,i}function d(t,a){var e,n=t._id,i=t.get("index"),r=t.getBBox(),l=t.get("origin").points,s=(r.minX+r.maxX)/2,d=[s,e=l[0].y-l[1].y<=0?r.maxY:r.minY,1];t.apply(d),t.attr("transform",[["t",-s,-e],["s",1,.01],["t",s,e]]);var c={transform:[["t",-s,-e],["s",1,100],["t",s,e]]},g=o(a,i,n,c);t.animate(c,g.duration,g.easing,g.callback,g.delay)}function c(t,a){var e,n=t._id,i=t.get("index"),r=t.getBBox(),l=t.get("origin").points,s=(r.minY+r.maxY)/2,d=[e=l[0].y-l[1].y>0?r.maxX:r.minX,s,1];t.apply(d),t.attr({transform:[["t",-e,-s],["s",.01,1],["t",e,s]]});var c={transform:[["t",-e,-s],["s",100,1],["t",e,s]]},g=o(a,i,n,c);t.animate(c,g.duration,g.easing,g.callback,g.delay)}function g(t,a){var e={lineWidth:0,opacity:0},n=t._id,i=o(a,t.get("index"),n,e);t.animate(e,i.duration,i.easing,function(){t.remove()},i.delay)}function p(t,a,e){var n,i,r=t._id,l=t.get("index");if(e.isPolar&&"point"!==t.name)n=e.getCenter().x,i=e.getCenter().y;else{var s=t.getBBox();n=(s.minX+s.maxX)/2,i=(s.minY+s.maxY)/2}var d=[n,i,1];t.apply(d),t.attr({transform:[["t",-n,-i],["s",.01,.01],["t",n,i]]});var c={transform:[["t",-n,-i],["s",100,100],["t",n,i]]},g=o(a,l,r,c);t.animate(c,g.duration,g.easing,g.callback,g.delay)}function u(t,a,e){var n,i,r=t._id,l=t.get("index");if(e.isPolar&&"point"!==t.name)n=e.getCenter().x,i=e.getCenter().y;else{var s=t.getBBox();n=(s.minX+s.maxX)/2,i=(s.minY+s.maxY)/2}var d=[n,i,1];t.apply(d);var c={transform:[["t",-n,-i],["s",.01,.01],["t",n,i]]},g=o(a,l,r,c);t.animate(c,g.duration,g.easing,function(){t.remove()},g.delay)}function m(t,a){if("path"===t.get("type")){var e=t._id,n=t.get("index"),r=i.pathToAbsolute(t.attr("path"));t.attr("path",[r[0]]);var l={path:r},s=o(a,n,e,l);t.animate(l,s.duration,s.easing,s.callback,s.delay)}}function h(t,a){if("path"===t.get("type")){var e=t._id,n=t.get("index"),r={path:[i.pathToAbsolute(t.attr("path"))[0]]},l=o(a,n,e,r);t.animate(r,l.duration,l.easing,function(){t.remove()},l.delay)}}function f(t,a,e,n,i){var l,s=r(e),d=t.get("canvas"),c=t._id,g=t.get("index");n?(s.attr("startAngle",n),s.attr("endAngle",n),l={endAngle:i}):l=s.endState,s.set("canvas",d),t.attr("clip",s),t.setSilent("animating",!0);var p=o(a,g,c,l);s.animate(l,p.duration,p.easing,function(){t&&!t.get("destroyed")&&(t.attr("clip",null),t.setSilent("cacheShape",null),t.setSilent("animating",!1),s.remove())},p.delay)}function y(t,a){var n=t._id,i=t.get("index"),r=e.isNil(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),l=e.isNil(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity");t.attr("fillOpacity",0),t.attr("strokeOpacity",0);var s={fillOpacity:r,strokeOpacity:l},d=o(a,i,n,s);t.animate(s,d.duration,d.easing,d.callback,d.delay)}function v(t,a){var e=t._id,n={fillOpacity:0,strokeOpacity:0},i=o(a,t.get("index"),e,n);t.animate(n,i.duration,i.easing,function(){t.remove()},i.delay)}function x(t,a,e){var n=s(t,e),i=n.endAngle;f(t,a,e,n.startAngle,i)}function A(t,a,e){if("line"===t.name){var r=t.get("canvas"),l=t.get("cacheShape"),s=t._id,d=t.get("index"),c=new n.Rect({attrs:{x:e.start.x,y:e.end.y,width:e.getWidth(),height:e.getHeight()}});c.isClip=!0,c.set("canvas",r);var g=i.pathToAbsolute(l.attrs.path),p=i.pathToAbsolute(t.attr("path")),u=g[1][1]-g[0][1],m=g[g.length-1][1]+u,h=p[p.length-1][2],f=g.concat([["L",m,h]]);t.apply([0,0,1]),t.attr("clip",c),t.attr("path",f);var y={transform:[["t",-u,0]]},v=o(a,d,s,y);t.animate(y,v.duration,v.easing,function(){t&&!t.get("destroyed")&&(t.attr("path",p),t.attr({transform:[["t",u,0]]}),t.attr("clip",null),t.setSilent("cacheShape",null),c.remove())},v.delay)}}function b(t,e,r){if("area"===t.name){var l=t.get("canvas"),s=t.get("cacheShape"),d=t._id,c=t.get("index"),g=new n.Rect({attrs:{x:r.start.x,y:r.end.y,width:r.getWidth(),height:r.getHeight()}});g.isClip=!0,g.set("canvas",l);var p=i.pathToAbsolute(s.attrs.path),u=i.pathToAbsolute(t.attr("path")),m=p[1][1]-p[0][1],h=Math.floor(p.length/2),f=p[h-1][1]+m,y=u[h-1][2],v=[].concat((0,a.default)(p.slice(0,h)),[["L",f,y],["L",f,u[h][2]]],(0,a.default)(p.slice(h)));t.apply([0,0,1]),t.attr("clip",g),t.attr("path",v);var x={transform:[["t",-m,0]]},A=o(e,c,d,x);t.animate(x,A.duration,A.easing,function(){t&&!t.get("destroyed")&&(t.attr("path",u),t.attr({transform:[["t",m,0]]}),t.attr("clip",null),t.setSilent("cacheShape",null),g.remove())},A.delay)}}module.exports={enter:{clipIn:f,zoomIn:p,pathIn:m,scaleInY:d,scaleInX:c,fanIn:x,fadeIn:y},leave:{lineWidthOut:g,zoomOut:u,pathOut:h,fadeOut:v},appear:{clipIn:f,zoomIn:p,pathIn:m,scaleInY:d,scaleInX:c,fanIn:x,fadeIn:y},update:{fadeIn:y,fanIn:x,lineSlideLeft:A,areaSlideLeft:b}};
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/toConsumableArray":"Fhqp","../util":"e9Mz","../renderer":"MVGo"}],"oGWs":[function(require,module,exports) {
"use strict";var e=require("../util"),n=require("./action"),t={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},a={line:{appear:function(){return n.appear.clipIn},enter:function(){return n.enter.clipIn},leave:function(){return n.leave.lineWidthOut}},path:{appear:function(){return n.appear.clipIn},enter:function(){return n.enter.clipIn},leave:function(){return n.leave.lineWidthOut}},area:{appear:function(){return n.appear.clipIn},enter:function(){return n.enter.fadeIn},leave:function(){return n.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return n.appear.zoomIn},enter:function(){return n.enter.zoomIn},leave:function(){return n.leave.zoomOut}},edge:{appear:function(){return n.appear.pathIn},enter:function(){return n.enter.pathIn},leave:function(){return n.leave.pathOut}},interval:{appear:function(e){var t;return e.isPolar?(t=n.appear.zoomIn,(e.isTransposed||"theta"===e.type)&&(t=n.appear.fanIn)):t=e.isRect?e.isTransposed?n.appear.scaleInX:n.appear.scaleInY:n.appear.zoomIn,t},enter:function(e){return e.isRect||e.isTransposed||"theta"===e.type?n.enter.fadeIn:n.enter.zoomIn},leave:function(){return n.leave.fadeOut},update:function(e){if("theta"===e.type)return n.update.fanIn}},point:{appear:function(){return n.appear.zoomIn},enter:function(){return n.enter.zoomIn},leave:function(){return n.leave.zoomOut}},schema:{appear:function(){return n.appear.clipIn},enter:function(){return n.enter.clipIn},leave:function(){return n.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return n.appear.fadeIn},enter:function(){return n.enter.fadeIn},leave:function(){return n.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return n.appear.fadeIn},leave:function(){return n.leave.fadeOut},update:function(e){if(e.isPolar)return n.appear.fadeIn}},"axis-ticks":{enter:function(){return n.appear.fadeIn},leave:function(){return n.leave.fadeOut},update:function(e){if(e.isPolar)return n.appear.fadeIn}},"axis-grid":{enter:function(){return n.appear.fadeIn},leave:function(){return n.leave.fadeOut},update:function(e){if(e.isPolar)return n.appear.fadeIn}},"axis-grid-rect":{enter:function(){return n.appear.fadeIn},leave:function(){return n.leave.fadeOut},update:function(){return n.leave.fadeIn}},labelLine:{appear:function(){return n.appear.pathIn},enter:function(){return n.enter.pathIn},leave:function(){return n.leave.pathOut}}};a.Action=n,a.defaultCfg=t,a.getAnimation=function(n,t,a){var r=this[n];if(r){var u=r[a];if(e.isFunction(u))return u(t)}return!1},a.getAnimateCfg=function(n,a){var r=t[a];return this[n]&&this[n].cfg&&this[n].cfg[a]?e.deepMix({},r,this[n].cfg[a]):r},a.registerAnimation=function(e,n,t){this.Action[e]||(this.Action[e]={}),this.Action[e][n]=t},module.exports=a;
},{"../util":"e9Mz","./action":"er2b"}],"HOM9":[function(require,module,exports) {
function o(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}module.exports=o;
},{}],"E7HD":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}module.exports=e;
},{}],"iLmk":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/inheritsLoose")),i=require("wolfy87-eventemitter"),s=require("./util"),r=function(e){(0,t.default)(r,e);var i=r.prototype;function r(t){var i,r={visible:!0},n=(i=e.call(this)||this).getDefaultCfg();return i._attrs=r,s.assign(r,n,t),i}return i.getDefaultCfg=function(){return{}},i.get=function(e){return this._attrs[e]},i.set=function(e,t){this._attrs[e]=t},i.show=function(){this.get("visible")||(this.set("visible",!0),this.changeVisible(!0))},i.hide=function(){this.get("visible")&&(this.set("visible",!1),this.changeVisible(!1))},i.changeVisible=function(){},i.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},r}(i);module.exports=r;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","wolfy87-eventemitter":"AiWi","./util":"e9Mz"}],"CPKo":[function(require,module,exports) {
var t=require("@antv/util/lib/type/is-string"),e=require("@antv/util/lib/type/is-array"),i=require("@antv/util/lib/type/is-nil"),a=require("@antv/util/lib/mix"),r=require("@antv/util/lib/each");function n(e,i){return t(i)?i:e.invert(e.scale(i))}var l=function(){function t(t){var e=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var r=null,n=this.callback;if(t.callback){var l=t.callback;r=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var s=l.apply(void 0,a);return i(s)&&(s=n.apply(e,a)),s}}a(this,t),r&&a(this,{callback:r})}var l=t.prototype;return l._getAttrValue=function(t,e){var i=this.values;if(t.isCategory&&!this.linear)return i[t.translate(e)%i.length];var a=t.scale(e);return this.getLinearValue(a)},l.getLinearValue=function(t){var e=this.values,i=e.length-1,a=Math.floor(i*t),r=i*t-a,n=e[a];return n+((a===i?n:e[a+1])-n)*r},l.callback=function(t){var e=this.scales[0];return"identity"===e.type?e.value:this._getAttrValue(e,t)},l.getNames=function(){for(var t=this.scales,e=this.names,i=Math.min(t.length,e.length),a=[],r=0;r<i;r++)a.push(e[r]);return a},l.getFields=function(){var t=this.scales,e=[];return r(t,function(t){e.push(t.field)}),e},l.getScale=function(t){return this.scales[this.names.indexOf(t)]},l.mapping=function(){for(var t=this.scales,e=this.callback,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];var n=a;if(e){for(var l=0,s=a.length;l<s;l++)a[l]=this._toOriginParam(a[l],t[l]);n=e.apply(this,a)}return n=[].concat(n)},l._toOriginParam=function(t,i){var a=t;if(!i.isLinear)if(e(t)){a=[];for(var r=0,l=t.length;r<l;r++)a.push(n(i,t[r]))}else a=n(i,t);return a},t}();module.exports=l;
},{"@antv/util/lib/type/is-string":"Uo9S","@antv/util/lib/type/is-array":"RVyA","@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/mix":"eGDv","@antv/util/lib/each":"yLcf"}],"rnuN":[function(require,module,exports) {
function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var t=require("@antv/util/lib/type/is-nil"),r=require("@antv/util/lib/type/is-array"),i=require("@antv/util/lib/each"),n=require("./base"),o=function(n){function o(e){var t;return(t=n.call(this,e)||this).names=["x","y"],t.type="position",t}return e(o,n),o.prototype.mapping=function(e,n){var o,s,c,a=this.scales,u=this.coord,l=a[0],p=a[1];if(t(e)||t(n))return[];if(r(n)&&r(e)){o=[],s=[];for(var y=0,h=0,v=e.length,x=n.length;y<v&&h<x;y++,h++)c=u.convertPoint({x:l.scale(e[y]),y:p.scale(n[h])}),o.push(c.x),s.push(c.y)}else if(r(n))e=l.scale(e),s=[],i(n,function(t){t=p.scale(t),c=u.convertPoint({x:e,y:t}),o&&o!==c.x?(r(o)||(o=[o]),o.push(c.x)):o=c.x,s.push(c.y)});else if(r(e))n=p.scale(n),o=[],i(e,function(e){e=l.scale(e),c=u.convertPoint({x:e,y:n}),s&&s!==c.y?(r(s)||(s=[s]),s.push(c.y)):s=c.y,o.push(c.x)});else{e=l.scale(e),n=p.scale(n);var f=u.convertPoint({x:e,y:n});o=f.x,s=f.y}return[o,s]},o}(n);module.exports=o;
},{"@antv/util/lib/type/is-nil":"JOIo","@antv/util/lib/type/is-array":"RVyA","@antv/util/lib/each":"yLcf","./base":"CPKo"}],"ZwIU":[function(require,module,exports) {
var t=require("@antv/util/lib/type/is-number"),r=require("@antv/util/lib/type/is-string"),e=require("@antv/util/lib/each"),n=/rgba?\(([\s.,0-9]+)\)/;function u(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}function i(t,r,e,n){return t[n]+(r[n]-t[n])*e}function o(t){return"#"+l(t[0])+l(t[1])+l(t[2])}function l(t){return 1===(t=(t=Math.round(t)).toString(16)).length&&(t="0"+t),t}function s(r,e){(isNaN(e)||!t(e)||e<0)&&(e=0),e>1&&(e=1);var n=r.length-1,u=Math.floor(n*e),l=n*e-u,s=r[u],a=u===n?s:r[u+1];return o([i(s,a,l,0),i(s,a,l,1),i(s,a,l,2)])}function a(t){var r=[];return r.push(parseInt(t.substr(1,2),16)),r.push(parseInt(t.substr(3,2),16)),r.push(parseInt(t.substr(5,2),16)),r}var c={},p=null,f={toRGB:function(t){if("#"===t[0]&&7===t.length)return t;var r;(p||(p=u()),c[t])?r=c[t]:(p.style.color=t,r=document.defaultView.getComputedStyle(p,"").getPropertyValue("color"),r=o(n.exec(r)[1].split(/\s*,\s*/)),c[t]=r);return r},rgb2arr:a,gradient:function(t){var n=[];return r(t)&&(t=t.split("-")),e(t,function(t){-1===t.indexOf("#")&&(t=f.toRGB(t)),n.push(a(t))}),function(t){return s(n,t)}}};module.exports=f;
},{"@antv/util/lib/type/is-number":"GpWy","@antv/util/lib/type/is-string":"Uo9S","@antv/util/lib/each":"yLcf"}],"nc6W":[function(require,module,exports) {
function t(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}var r=require("@antv/util/lib/type/is-string"),e=require("./color-util"),i=require("./base"),o=function(i){function o(t){var e;return(e=i.call(this,t)||this).names=["color"],e.type="color",e.gradient=null,r(e.values)&&(e.linear=!0),e}return t(o,i),o.prototype.getLinearValue=function(t){var r=this.gradient;if(!r){var i=this.values;r=e.gradient(i),this.gradient=r}return r(t)},o}(i);module.exports=o;
},{"@antv/util/lib/type/is-string":"Uo9S","./color-util":"ZwIU","./base":"CPKo"}],"SJM6":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("./base"),r=function(e){function r(t){var r;return(r=e.call(this,t)||this).names=["shape"],r.type="shape",r.gradient=null,r}return t(r,e),r.prototype.getLinearValue=function(t){var e=this.values;return e[Math.round((e.length-1)*t)]},r}(e);module.exports=r;
},{"./base":"CPKo"}],"bVkG":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("./base"),r=function(e){function r(t){var r;return(r=e.call(this,t)||this).names=["size"],r.type="size",r.gradient=null,r}return t(r,e),r}(e);module.exports=r;
},{"./base":"CPKo"}],"zuun":[function(require,module,exports) {
function t(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o}var o=require("./base"),r=function(o){function r(t){var r;return(r=o.call(this,t)||this).names=["opacity"],r.type="opacity",r.gradient=null,r}return t(r,o),r}(o);module.exports=r;
},{"./base":"CPKo"}],"Mhpd":[function(require,module,exports) {
module.exports={Position:require("./position"),Color:require("./color"),Shape:require("./shape"),Size:require("./size"),Opacity:require("./opacity"),ColorUtil:require("./color-util")};
},{"./position":"rnuN","./color":"nc6W","./shape":"SJM6","./size":"bVkG","./opacity":"zuun","./color-util":"ZwIU"}],"WNzK":[function(require,module,exports) {
var t=require("@antv/util/lib/mix"),i=function(){var i=n.prototype;function n(i){this._initDefaultCfg(),t(this,i)}return i._initDefaultCfg=function(){this.adjustNames=["x","y"]},i.processAdjust=function(){},n}();module.exports=i;
},{"@antv/util/lib/mix":"eGDv"}],"fma9":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("./base"),o=require("@antv/util/lib/each"),r=.5,i=.5,n=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a._initDefaultCfg=function(){this.marginRatio=r,this.dodgeRatio=i,this.adjustNames=["x","y"]},a.getDodgeOffset=function(t,e,o){var r=t.pre,i=t.next,n=i-r,a=n*this.dodgeRatio/o,s=this.marginRatio*a;return(r+i)/2+(.5*(n-o*a-(o-1)*s)+((e+1)*a+e*s)-.5*a-.5*n)},a.processAdjust=function(t){var e=this,r=t.length,i=e.xField;o(t,function(t,o){for(var n=0,a=t.length;n<a;n++){var s=t[n],u=s[i],p={pre:1===a?u-1:u-.5,next:1===a?u+1:u+.5},f=e.getDodgeOffset(p,o,r);s[i]=f}})},n}(e);e.Dodge=n,module.exports=n;
},{"./base":"WNzK","@antv/util/lib/each":"yLcf"}],"Uzzb":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("@antv/util/lib/type/is-array"),r=require("@antv/util/lib/type/is-nil"),i=require("./base"),o=function(i){function o(){return i.apply(this,arguments)||this}t(o,i);var n=o.prototype;return n._initDefaultCfg=function(){this.xField=null,this.yField=null},n.processAdjust=function(t){this.processStack(t)},n.processStack=function(t){var i=this.xField,o=this.yField,n=t.length,s={positive:{},negative:{}};this.reverseOrder&&(t=t.slice(0).reverse());for(var a=0;a<n;a++)for(var l=t[a],p=0,u=l.length;p<u;p++){var c=l[p],v=c[i]||0,f=c[o],h=v.toString();if(f=e(f)?f[1]:f,!r(f)){var y=f>=0?"positive":"negative";s[y][h]||(s[y][h]=0),c[o]=[s[y][h],f+s[y][h]],s[y][h]+=f}}},o}(i);i.Stack=o,module.exports=o;
},{"@antv/util/lib/type/is-array":"RVyA","@antv/util/lib/type/is-nil":"JOIo","./base":"WNzK"}],"vrRN":[function(require,module,exports) {
var t=0,i=require("@antv/util/lib/each"),u={values:require("@antv/util/lib/array/values-of-key")};module.exports={isAdjust:function(t){return this.adjustNames.indexOf(t)>=0},_getDimValues:function(s){var e={},n=[];if(this.xField&&this.isAdjust("x")&&n.push(this.xField),this.yField&&this.isAdjust("y")&&n.push(this.yField),i(n,function(t){var i=u.values(s,t);i.sort(function(t,i){return t-i}),e[t]=i}),!this.yField&&this.isAdjust("y")){var r=[t,1];e.y=r}return e},adjustData:function(t,u){var s=this,e=s._getDimValues(u);i(t,function(u,n){i(e,function(i,e){s.adjustDim(e,i,u,t.length,n)})})},getAdjustRange:function(t,i,u){var s,e,n=u.indexOf(i),r=u.length;return!this.yField&&this.isAdjust("y")?(s=0,e=1):r>1?(s=0===n?u[0]:u[n-1],e=n===r-1?u[r-1]:u[n+1],0!==n?s+=(i-s)/2:s-=(e-i)/2,n!==r-1?e-=(e-i)/2:e+=(i-u[r-2])/2):(s=0===i?0:i-.5,e=0===i?1:i+.5),{pre:s,next:e}},groupData:function(u,s){var e={};return i(u,function(i){var u=i[s];void 0===u&&(u=i[s]=t),e[u]||(e[u]=[]),e[u].push(i)}),e}};
},{"@antv/util/lib/each":"yLcf","@antv/util/lib/array/values-of-key":"Z5a3"}],"tNrL":[function(require,module,exports) {
var t={merge:require("@antv/util/lib/array/merge"),values:require("@antv/util/lib/array/values-of-key")},a=require("@antv/util/lib/group"),e=require("@antv/util/lib/each");module.exports={processAdjust:function(e){var r=t.merge(e),i=this.dodgeBy,u=e;i&&(u=a(r,i)),this.cacheMap={},this.adjDataArray=u,this.mergeData=r,this.adjustData(u,r),this.adjDataArray=null,this.mergeData=null},getDistribution:function(a){var r=this.adjDataArray,i=this.cacheMap,u=i[a];return u||(u={},e(r,function(r,i){var n=t.values(r,a);n.length||n.push(0),e(n,function(t){u[t]||(u[t]=[]),u[t].push(i)})}),i[a]=u),u},adjustDim:function(t,a,r,i,u){var n=this,s=n.getDistribution(t),l=n.groupData(r,t);e(l,function(r,i){var l;i=parseFloat(i),l=1===a.length?{pre:a[0]-1,next:a[0]+1}:n.getAdjustRange(t,i,a),e(r,function(a){var e=a[t],r=s[e],i=r.indexOf(u);a[t]=n.getDodgeOffset(l,i,r.length)})})}};
},{"@antv/util/lib/array/merge":"VM2e","@antv/util/lib/array/values-of-key":"Z5a3","@antv/util/lib/group":"Wfxb","@antv/util/lib/each":"yLcf"}],"qp7z":[function(require,module,exports) {
module.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(e){var s=this.xField,i=this.yField||"y",t=this.height,r={};this.reverseOrder&&(e=e.slice(0).reverse());for(var h=0,l=e.length;h<l;h++)for(var n=e[h],c=0,o=n.length;c<o;c++){var a=n[c],d=2*(a.size||this.size)/t,u=a[s];r[u]||(r[u]=d/2),a[i]=r[u],r[u]+=d}},processAdjust:function(e){this.yField?this.processStack(e):this.processOneDimStack(e)}};
},{}],"pW7l":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("@antv/util/lib/each"),r=require("@antv/util/lib/mix"),i={merge:require("@antv/util/lib/array/merge")},u=require("./base"),a=require("./mixin/adjust"),n=function(r){function u(){return r.apply(this,arguments)||this}t(u,r);var a=u.prototype;return a._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},a.processAdjust=function(t){var e=i.merge(t);this.adjDataArray=t,this.mergeData=e,this.adjustData(t,e),this.adjFrames=null,this.mergeData=null},a.getAdjustOffset=function(t,e){var r=e-t;return t+.05*r+.9*r*Math.random()},a._adjustGroup=function(t,r,i,u){var a=this,n=a.getAdjustRange(r,i,u);e(t,function(t){t[r]=a.getAdjustOffset(n.pre,n.next)})},a.adjustDim=function(t,r,i){var u=this,a=u.groupData(i,t);e(a,function(e,i){i=parseFloat(i),u._adjustGroup(e,t,i,r)})},u}(u);r(n.prototype,a),u.Jitter=n,module.exports=n;
},{"@antv/util/lib/each":"yLcf","@antv/util/lib/mix":"eGDv","@antv/util/lib/array/merge":"VM2e","./base":"WNzK","./mixin/adjust":"vrRN"}],"fqb9":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("@antv/util/lib/each"),i=require("@antv/util/lib/math/max-by"),r=require("@antv/util/lib/type/is-array"),a={merge:require("@antv/util/lib/array/merge")},n=require("./base"),u=function(n){function u(){return n.apply(this,arguments)||this}t(u,n);var l=u.prototype;return l._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},l._getMax=function(t){var e=this.mergeData,a=i(e,function(e){var i=e[t];return r(i)?Math.max.apply(null,i):i})[t];return r(a)?Math.max.apply(null,a):a},l._getXValuesMax=function(){var t=this.yField,i=this.xField,a={},n=this.mergeData;return e(n,function(e){var n=e[i],u=e[t],l=r(u)?Math.max.apply(null,u):u;a[n]=a[n]||0,a[n]<l&&(a[n]=l)}),a},l.processAdjust=function(t){var e=a.merge(t);this.mergeData=e,this._processSymmetric(t),this.mergeData=null},l._processSymmetric=function(t){var i,a=this.xField,n=this.yField,u=this._getMax(n),l=t[0][0];l&&r(l[n])&&(i=this._getXValuesMax()),e(t,function(t){e(t,function(t){var l,s=t[n];if(r(s)){var o=t[a],c=i[o];l=(u-c)/2;var h=[];e(s,function(t){h.push(l+t)}),t[n]=h}else l=(u-s)/2,t[n]=[l,s+l]})})},u}(n);n.Symmetric=u,module.exports=u;
},{"@antv/util/lib/each":"yLcf","@antv/util/lib/math/max-by":"xs6X","@antv/util/lib/type/is-array":"RVyA","@antv/util/lib/array/merge":"VM2e","./base":"WNzK"}],"BGxg":[function(require,module,exports) {
var e=require("@antv/util/lib/mix"),r=require("./base"),i=require("./dodge"),t=require("./stack"),u=require("./mixin/adjust"),o=require("./mixin/dodge"),m=require("./mixin/stack");e(r.prototype,u),e(i.prototype,u,o),e(t.prototype,m),r.Jitter=require("./jitter"),r.Symmetric=require("./symmetric"),r.Dodge=i,r.Stack=t,module.exports=r;
},{"@antv/util/lib/mix":"eGDv","./base":"WNzK","./dodge":"fma9","./stack":"Uzzb","./mixin/adjust":"vrRN","./mixin/dodge":"tNrL","./mixin/stack":"qp7z","./jitter":"pW7l","./symmetric":"fqb9"}],"To8Y":[function(require,module,exports) {
"use strict";var t,i,e="#1890FF",l=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],o=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],n=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],a=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],s=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],f='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',r="g2-tooltip",d="g2-tooltip-title",h="g2-tooltip-list",g="g2-tooltip-list-item",p="g2-tooltip-marker",F="g2-tooltip-value",C="g2-legend",y="g2-legend-title",m="g2-legend-list",x="g2-legend-list-item",b="g2-legend-marker",c={defaultColor:e,plotCfg:{padding:[20,20,95,80]},fontFamily:f,defaultLegendPosition:"bottom",colors:l,colors_16:o,colors_24:n,colors_pie:a,colors_pie_16:s,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:f},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:f}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:f}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:f}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:f}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:f}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:f}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:f}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:f}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:f},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:f},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:f},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:f},unCheckColor:"#bfbfbf"},html:(t={},t[""+C]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:f,lineHeight:"20px",color:"#8C8C8C"},t[""+y]={marginBottom:"4px"},t[""+m]={listStyleType:"none",margin:0,padding:0},t[""+x]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},t[""+b]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},t),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:f},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(i={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},i[""+r]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:f,lineHeight:"20px",padding:"10px 10px 6px 10px"},i[""+d]={marginBottom:"4px"},i[""+h]={margin:0,listStyleType:"none",padding:0},i[""+g]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},i[""+p]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},i[""+F]={display:"inline-block",float:"right",marginLeft:"30px"},i),tooltipMarker:{symbol:function(t,i,e){return[["M",t,i],["m",-e,0],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,2*-e,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:e,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:e,radius:3},interval:{lineWidth:0,fill:e,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:e,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:e,fillOpacity:.6},polygon:{lineWidth:0,fill:e,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:e,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:e,fillOpacity:0,lineWidth:2},line:{stroke:e,lineWidth:2,fill:null},edge:{stroke:e,lineWidth:1,fill:null},schema:{stroke:e,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:f,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:f}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};module.exports=c;
},{}],"qWO2":[function(require,module,exports) {
"use strict";var l,e,t=require("../util"),i=require("./default"),o="g2-tooltip",r="g2-legend",f=t.deepMix({},i,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(l={},l[""+r]={color:"#D9D9D9"},l),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(e={},e[""+o]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},e),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});module.exports=f;
},{"../util":"e9Mz","./default":"To8Y"}],"DDzN":[function(require,module,exports) {
"use strict";var e={default:require("./default"),dark:require("./dark")};module.exports=e;
},{"./default":"To8Y","./dark":"qWO2"}],"xYEG":[function(require,module,exports) {
"use strict";var e=require("./util"),t=require("./theme/index"),i={version:"3.5.11",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:.5,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(e,i){t[e]=i},setTheme:function(n){var r={};r=e.isObject(n)?n:-1!==e.indexOf(Object.keys(t),n)?t[n]:t.default,e.deepMix(i,r)}};i.setTheme("default"),module.exports=i;
},{"./util":"e9Mz","./theme/index":"DDzN"}],"Zkxp":[function(require,module,exports) {
var i=require("@antv/g/lib"),e=require("@antv/util/lib"),r=e.mix({assign:e.mix,isFinite:isFinite,isNaN:isNaN,Group:i.Group,Event:i.Event},e);module.exports=r;
},{"@antv/g/lib":"nBh7","@antv/util/lib":"CFn6"}],"nk5T":[function(require,module,exports) {
function t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r=require("wolfy87-eventemitter"),n=require("./util"),i=function(r){e(o,r);var i=o.prototype;function o(e){var i,o=t(i=r.call(this)||this),s={visible:!0},u=o.getDefaultCfg();return o._attrs=s,n.deepMix(s,u,e),i}return i.getDefaultCfg=function(){return{}},i.get=function(t){return this._attrs[t]},i.set=function(t,e){this._attrs[t]=e},i.changeVisible=function(){},i.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},o}(r);module.exports=i;
},{"wolfy87-eventemitter":"AiWi","./util":"Zkxp"}],"KZUR":[function(require,module,exports) {
function n(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}var t=require("./base"),o=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},e._init=function(){},e.clear=function(){},e.destroy=function(){t.prototype.destroy.call(this)},e.beforeRender=function(){},e.render=function(){},e.afterRender=function(){},e.beforeDraw=function(){},e.draw=function(){},e.afterDraw=function(){},e.show=function(){},e.hide=function(){},e.setOffset=function(){},e.setPosition=function(){},e.setVisible=function(){},e.setZIndex=function(){},o}(t);module.exports=o;
},{"./base":"nk5T"}],"wMrE":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("@antv/g/lib"),i=e.Group,n=require("../util"),r=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var r=i.prototype;return r.getDefaultCfg=function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},r._renderUI=function(){e.prototype._renderUI.call(this),this._drawLines()},r._drawLines=function(){var t=this.get("lineStyle"),e=this.get("items");e&&e.length&&(this._precessItems(e),this._drawGridLines(e,t))},r._precessItems=function(t){var e,i=this;n.each(t,function(t,n){e&&i.get("alternateColor")&&i._drawAlternativeBg(t,e,n),e=t})},r._drawGridLines=function(t,e){var i,r,a,s,h=this,o=this.get("type"),p=t.length;"line"===o||"polygon"===o?n.each(t,function(t,l){h.get("hideFirstLine")&&0===l||h.get("hideLastLine")&&l===p-1||(s=t.points,r=[],"line"===o?(r.push(["M",s[0].x,s[0].y]),r.push(["L",s[s.length-1].x,s[s.length-1].y])):n.each(s,function(t,e){0===e?r.push(["M",t.x,t.y]):r.push(["L",t.x,t.y])}),a=h._drawZeroLine(o,l)?n.mix({},h.get("zeroLineStyle"),{path:r}):n.mix({},e,{path:r}),(i=h.addShape("path",{attrs:a})).name="axis-grid",i._id=t._id,i.set("coord",h.get("coord")),h.get("appendInfo")&&i.setSilent("appendInfo",h.get("appendInfo")))}):n.each(t,function(t,o){h.get("hideFirstLine")&&0===o||h.get("hideLastLine")&&o===p-1||(s=t.points,r=[],n.each(s,function(t,e){var i=t.radius;0===e?r.push(["M",t.x,t.y]):r.push(["A",i,i,0,0,t.flag,t.x,t.y])}),a=n.mix({},e,{path:r}),(i=h.addShape("path",{attrs:a})).name="axis-grid",i._id=t._id,i.set("coord",h.get("coord")),h.get("appendInfo")&&i.setSilent("appendInfo",h.get("appendInfo")))})},r._drawZeroLine=function(t,e){var i=this.get("tickValues");return!("line"!==t||!i||0!==i[e]||!this.get("hightLightZero"))},r._drawAlternativeBg=function(t,e,i){var r,a,s,h=this.get("alternateColor");n.isString(h)?a=h:n.isArray(h)&&(a=h[0],s=h[1]),i%2==0?s&&(r=this._getBackItem(e.points,t.points,s)):a&&(r=this._getBackItem(e.points,t.points,a));var o=this.addShape("Path",{attrs:r});o.name="axis-grid-rect",o._id=t._id&&t._id.replace("grid","grid-rect"),o.set("coord",this.get("coord")),this.get("appendInfo")&&o.setSilent("appendInfo",this.get("appendInfo"))},r._getBackItem=function(t,e,i){var r=[],a=this.get("type");if("line"===a)r.push(["M",t[0].x,t[0].y]),r.push(["L",t[t.length-1].x,t[t.length-1].y]),r.push(["L",e[e.length-1].x,e[e.length-1].y]),r.push(["L",e[0].x,e[0].y]),r.push(["Z"]);else if("polygon"===a){n.each(t,function(t,e){0===e?r.push(["M",t.x,t.y]):r.push(["L",t.x,t.y])});for(var s=e.length-1;s>=0;s--)r.push(["L",e[s].x,e[s].y]);r.push(["Z"])}else{var h=t[0].flag;n.each(t,function(t,e){var i=t.radius;0===e?r.push(["M",t.x,t.y]):r.push(["A",i,i,0,0,t.flag,t.x,t.y])});for(var o=e.length-1;o>=0;o--){var p=e[o],l=p.radius;o===e.length-1?r.push(["M",p.x,p.y]):r.push(["A",l,l,0,0,1===h?0:1,p.x,p.y])}}return{fill:i,path:r}},i}(i);module.exports=r;
},{"@antv/g/lib":"nBh7","../util":"Zkxp"}],"NQMq":[function(require,module,exports) {
var a=function(){function a(){this.bitmap=[]}var r=a.prototype;return r.hasGap=function(a){for(var r=!0,i=this.bitmap,t=Math.floor(a.minX),o=Math.ceil(a.maxX),f=Math.floor(a.minY),e=Math.ceil(a.maxY)-1,n=t;n<o;n++)if(i[n]){if(n===t||n===o-1){for(var l=f;l<=e;l++)if(i[n][l]){r=!1;break}}else if(i[n][f]||i[n][e]){r=!1;break}}else i[n]=[];return r},r.fillGap=function(a){for(var r=this.bitmap,i=Math.floor(a.minX),t=Math.ceil(a.maxX)-1,o=Math.floor(a.minY),f=Math.ceil(a.maxY)-1,e=i;e<=t;e++){for(var n=o;n<f;n+=8)r[e]||(r[e]=[]),r[e][n]=!0;r[e][f]=!0}for(var l=o;l<=f;l++)r[i][l]=!0,r[t][l]=!0},a}();module.exports=a;
},{}],"EWwB":[function(require,module,exports) {
var e=require("./greedy");function t(e,t,r,a){var i=e.getBBox(),n=i.width,g=i.height,l={x:t,y:r,textAlign:"center"};switch(a){case 0:l.y-=g/2,l.textAlign="left";break;case 1:l.y-=g/2,l.textAlign="right";break;case 2:l.y+=g/2,l.textAlign="right";break;case 3:l.y+=g/2,l.textAlign="left";break;case 5:l.y-=g/2;break;case 6:l.y+=g/2;break;case 7:l.x+=n/2,l.textAlign="left";break;case 8:l.x-=n/2,l.textAlign="right"}return e.attr(l),e.getBBox()}module.exports=function(r){for(var a,i,n,g,l,x=new e,c=[],s=0;s<r.length;s++){n=(i=r[s]).attr("x"),g=i.attr("y"),l=!1;for(var h=0;h<8;h++)if(a=t(i,n,g,h),x.hasGap(a)){x.fillGap(a),l=!0;break}l||c.push(i)}for(var f=0;f<c.length;f++)c[f].remove();return l};
},{"./greedy":"NQMq"}],"bXNE":[function(require,module,exports) {
var t=require("./greedy"),r=20;function a(t,a){var e,h=t.attr("x"),i=t.attr("y"),n=t.getBBox(),o=Math.sqrt(n.width*n.width+n.height*n.height),f=1,s=0,u=0,g=function(t){return[(t*=.1)*Math.cos(t),t*Math.sin(t)]};if(a.hasGap(n))return a.fillGap(n),!0;for(var l=!1,p=0;Math.min(Math.abs(s),Math.abs(u))<o&&p<r;)if(s=~~(e=g(f+=-1))[0],u=~~e[1],t.attr({x:h+s,y:i+u}),p++,a.hasGap(t.getBBox())){a.fillGap(n),l=!0;break}return l}module.exports=function(r){for(var e,h=new t,i=[],n=0;n<r.length;n++)a(e=r[n],h)||i.push(e);for(var o=0;o<i.length;o++)i[o].remove()};
},{"./greedy":"NQMq"}],"jenx":[function(require,module,exports) {
module.exports=function(h,t){for(var e,i,g=[],o=0;o<h.length;o++)e=h[o].getBBox(),i=t[o].getBBox(),e.width>i.width||e.height>i.height?g.push(h[o]):e.width*e.height>i.width*i.height&&g.push(h[o]);for(var r=0;r<g.length;r++)g[r].remove()};
},{}],"tT1j":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=e.DomUtil,r=require("../component"),a=require("./utils/position-adjust"),n=require("./utils/spiral-adjust"),o=require("./utils/bbox-adjust"),s={scatter:a,map:n,treemap:o},l=function(r){function a(){return r.apply(this,arguments)||this}t(a,r);var n=a.prototype;return n.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},n.clear=function(){var t=this.get("group"),e=this.get("container");t&&!t.get("destroyed")&&t.clear(),e&&(e.innerHTML=""),r.prototype.clear.call(this)},n.destroy=function(){var t=this.get("group"),e=this.get("container");t.destroy||t.destroy(),e&&e.parentNode&&e.parentNode.removeChild(e),r.prototype.destroy.call(this)},n.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},n._dryDraw=function(){var t=this,i=t.get("items"),r=t.getLabels(),a=r.length;e.each(i,function(e,i){if(i<a){var n=r[i];t.changeLabel(n,e)}else{var o=t._addLabel(e,i);o&&(o._id=e._id,o.set("coord",e.coord))}});for(var n=a-1;n>=i.length;n--)r[n].remove();t._adjustLabels(),!t.get("labelLine")&&t.get("config")||t.drawLines()},n.draw=function(){this._dryDraw(),this.get("canvas").draw()},n.changeLabel=function(t,e){if(t)if(t.tagName){var i=this._createDom(e);t.innerHTML=i.innerHTML,this._setCustomPosition(e,t)}else t._id=e._id,t.attr("text",e.text),t.attr("x")===e.x&&t.attr("y")===e.y||(t.resetMatrix(),e.textStyle.rotate&&(t.rotateAtStart(e.textStyle.rotate),delete e.textStyle.rotate),t.attr(e))},n.show=function(){var t=this.get("group"),e=this.get("container");t&&t.show(),e&&(e.style.opacity=1)},n.hide=function(){var t=this.get("group"),e=this.get("container");t&&t.hide(),e&&(e.style.opacity=0)},n.drawLines=function(){var t=this;"boolean"==typeof t.get("labelLine")&&t.set("labelLine",{});var i=t.get("lineGroup");!i||i.get("destroyed")?(i=t.get("group").addGroup({elCls:"x-line-group"}),t.set("lineGroup",i)):i.clear(),e.each(t.get("items"),function(e){t.lineToLabel(e,i)})},n.lineToLabel=function(t,i){if(this.get("config")||t.labelLine){var r=t.labelLine||this.get("labelLine"),a=void 0===t.capture?this.get("capture"):t.capture,n=r.path;if(n&&e.isFunction(r.path)&&(n=r.path(t)),!n){var o=t.start||{x:t.x-t._offset.x,y:t.y-t._offset.y};n=[["M",o.x,o.y],["L",t.x,t.y]]}var s=t.color;s||(s=t.textStyle&&t.textStyle.fill?t.textStyle.fill:"#000");var l=i.addShape("path",{attrs:e.mix({path:n,fill:null,stroke:s},r),capture:a});l.name=this.get("name"),l._id=t._id&&t._id.replace("glabel","glabelline"),l.set("coord",this.get("coord"))}},n._adjustLabels=function(){var t=this.get("type"),e=this.getLabels(),i=this.get("shapes"),r=s[t];"default"!==t&&r&&r(e,i)},n.getLabels=function(){var t=this.get("container");return t?e.toArray(t.childNodes):this.get("group").get("children")},n._addLabel=function(t,e){var i=t;return this.get("config")&&(i=this._getLabelCfg(t,e)),this._createText(i)},n._getLabelCfg=function(t,i){var r=this.get("textStyle")||{},a=this.get("formatter"),n=this.get("htmlTemplate");if(!e.isObject(t)){var o=t;(t={}).text=o}return e.isFunction(r)&&(r=r(t.text,t,i)),a&&(t.text=a(t.text,t,i)),n&&(t.useHtml=!0,e.isFunction(n)&&(t.text=n(t.text,t,i))),e.isNil(t.text)&&(t.text=""),t.text=t.text+"",e.mix({},t,{textStyle:r},{x:t.x||0,y:t.y||0})},n._init=function(){if(!this.get("group")){var t=this.get("canvas").addGroup({id:"label-group"});this.set("group",t)}},n.initHtmlContainer=function(){var t=this.get("container");if(t)e.isString(t)&&(t=document.getElementById(t))&&this.set("container",t);else{var r=this.get("containerTpl"),a=this.get("canvas").get("el").parentNode;t=i.createDom(r),a.style.position="relative",a.appendChild(t),this.set("container",t)}return t},n._createText=function(t){var i,r=e.deepMix({},t),a=this.get("container"),n=void 0===r.capture?this.get("capture"):r.capture;if(!r.useHtml&&!r.htmlTemplate){var o=this.get("name"),s=r.point,l=this.get("group");delete r.point;var u=r.rotate;return r.textStyle&&(r.textStyle.rotate&&(u=r.textStyle.rotate,delete r.textStyle.rotate),r=e.mix({x:r.x,y:r.y,textAlign:r.textAlign,text:r.text},r.textStyle)),i=l.addShape("text",{attrs:r,capture:n}),u&&(Math.abs(u)>2*Math.PI&&(u=u/180*Math.PI),i.transform([["t",-r.x,-r.y],["r",u],["t",r.x,r.y]])),i.setSilent("origin",s||r),i.name=o,this.get("appendInfo")&&i.setSilent("appendInfo",this.get("appendInfo")),i}a||(a=this.initHtmlContainer());var c=this._createDom(r);a.appendChild(c),this._setCustomPosition(r,c)},n._createDom=function(t){var r=this.get("itemTpl"),a=e.substitute(r,{text:t.text});return i.createDom(a)},n._setCustomPosition=function(t,e){var r=t.textAlign||"left",a=t.y,n=t.x,o=i.getOuterWidth(e);a-=i.getOuterHeight(e)/2,"center"===r?n-=o/2:"right"===r&&(n-=o),e.style.top=parseInt(a,10)+"px",e.style.left=parseInt(n,10)+"px"},a}(r);module.exports=l;
},{"../util":"Zkxp","../component":"KZUR","./utils/position-adjust":"EWwB","./utils/spiral-adjust":"bXNE","./utils/bbox-adjust":"jenx"}],"SPpV":[function(require,module,exports) {
module.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'};
},{}],"IaPg":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../component"),i=require("../util"),a=require("./grid"),s=require("../label/base"),n=require("../const"),r=n.FONT_FAMILY,o=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return i.mix({},t,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},o.beforeRender=function(){var t=this.get("title"),e=this.get("label"),a=this.get("grid");t&&this.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:r,textAlign:"center"},offset:48},t)),e&&this.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:r},offset:10},e)),a&&this.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},a))},o.render=function(){this.beforeRender(),this.get("label")&&this.renderLabels(),this.get("autoPaint")&&this.paint(),i.isNil(this.get("title"))||this.renderTitle(),this.get("group").sort()},o.renderLabels=function(){var t=this.get("group"),e=this.get("label"),a=new s({name:"axis-label"});this.set("labelRenderer",a),a.set("labelCfg",e);i.each(["formatter","htmlTemplate","labelLine","textStyle","useHtml"],function(t){e[t]&&a.set(t,e[t])}),a.set("coord",this.get("coord")),a.set("group",t.addGroup()),a.set("canvas",this.get("canvas"))},o._parseTicks=function(t){for(var e=(t=t||[]).length,a=0;a<e;a++){var s=t[a];i.isObject(s)||(t[a]=this.parseTick(s,a,e))}return this.set("ticks",t),t},o._addTickItem=function(t,e,i,a){void 0===a&&(a="");var s=this.get("tickItems"),n=this.get("subTickItems"),r=this.getTickEnd(e,i,t),o={x1:e.x,y1:e.y,x2:r.x,y2:r.y};s||(s=[]),n||(n=[]),"sub"===a?n.push(o):s.push(o),this.set("tickItems",s),this.set("subTickItems",n)},o._renderLine=function(){var t,e=this.get("line");if(e){t=this.getLinePath(),e=i.mix({path:t},e);var a=this.get("group").addShape("path",{attrs:e});a.name="axis-line",this.get("appendInfo")&&a.setSilent("appendInfo",this.get("appendInfo")),this.set("lineShape",a)}},o._processCatTicks=function(){var t=this.get("label"),e=this.get("tickLine"),i=this.get("ticks");i=this._parseTicks(i);for(var a=this._getNormalizedTicks(i),s=0;s<a.length;s+=3){var n=this.getTickPoint(a[s]),r=this.getTickPoint(a[s+1]),o=this.getTickPoint(a[s+2]),l=Math.floor(s/3),h=i[l];e&&(0===l&&this._addTickItem(l,r,e.length),this._addTickItem(l,o,e.length)),t&&this.addLabel(h,n,l)}},o._getNormalizedTicks=function(t){var e=0;t.length>1&&(e=(t[1].value-t[0].value)/2);for(var a=[],s=0;s<t.length;s++){var n=t[s],r=n.value,o=n.value-e,l=n.value+e;a.push(r,o,l)}var h=i.arrayUtil.getRange(a);return a.map(function(t){return(t-h.min)/(h.max-h.min)})},o.addLabel=function(t,e,a){var s=this.get("labelItems"),n=this.get("labelRenderer"),r=i.deepMix({},this.get("label"));if(n){var o=this.get("_labelOffset");i.isNil(this.get("label").offset)||(o=this.get("label").offset);var l=this.getSideVector(o,e,a);e={x:e.x+l[0]+r.offsetX,y:e.y+l[1]+r.offsetY},r.text=t.text,r.x=e.x,r.y=e.y,r.point=e,r.textAlign=this.getTextAnchor(l),e.rotate&&(r.rotate=e.rotate),s.push(r)}},o._processTicks=function(){var t=this,e=t.get("label"),a=t.get("subTickCount"),s=t.get("tickLine"),n=t.get("ticks");if(n=t._parseTicks(n),i.each(n,function(i,a){var n=t.getTickPoint(i.value,a);s&&t._addTickItem(a,n,s.length),e&&t.addLabel(i,n,a)}),a){var r=t.get("subTickLine");i.each(n,function(e,i){if(i>0){var o=e.value-n[i-1].value;o/=t.get("subTickCount")+1;for(var l=1;l<=a;l++){var h={text:"",value:i?n[i-1].value+l*o:l*o},c=t.getTickPoint(h.value),u=void 0;u=r&&r.length?r.length:parseInt(.6*s.length,10),t._addTickItem(l-1,c,u,"sub")}}})}},o._addTickLine=function(t,e){var a=i.mix({},e),s=[];i.each(t,function(t){s.push(["M",t.x1,t.y1]),s.push(["L",t.x2,t.y2])}),delete a.length,a.path=s;var n=this.get("group").addShape("path",{attrs:a});n.name="axis-ticks",n._id=this.get("_id")+"-ticks",n.set("coord",this.get("coord")),this.get("appendInfo")&&n.setSilent("appendInfo",this.get("appendInfo"))},o._renderTicks=function(){var t=this.get("tickItems"),e=this.get("subTickItems");if(!i.isEmpty(t)){var a=this.get("tickLine");this._addTickLine(t,a)}if(!i.isEmpty(e)){var s=this.get("subTickLine")||this.get("tickLine");this._addTickLine(e,s)}},o._renderGrid=function(){var t=this.get("grid");if(t){t.coord=this.get("coord"),t.appendInfo=this.get("appendInfo");var e=this.get("group");this.set("gridGroup",e.addGroup(a,t))}},o._renderLabels=function(){var t=this.get("labelRenderer"),e=this.get("labelItems");t&&(t.set("items",e),t._dryDraw())},o.paint=function(){var t=this.get("tickLine"),e=!0;t&&t.hasOwnProperty("alignWithLabel")&&(e=t.alignWithLabel),this._renderLine();var i=this.get("type");("cat"===i||"timeCat"===i)&&!1===e?this._processCatTicks():this._processTicks(),this._renderTicks(),this._renderGrid(),this._renderLabels();var a=this.get("label");a&&a.autoRotate&&this.autoRotateLabels(),a&&a.autoHide&&this.autoHideLabels()},o.parseTick=function(t,e,i){return{text:t,value:e/(i-1)}},o.getTextAnchor=function(t){return Math.abs(t[1]/t[0])>=1?"center":t[0]>0?"start":"end"},o.getMaxLabelWidth=function(t){var e=t.getLabels(),a=0;return i.each(e,function(t){var e=t.getBBox().width;a<e&&(a=e)}),a},o.getMaxLabelHeight=function(t){var e=t.getLabels(),a=0;return i.each(e,function(t){var e=t.getBBox().height;a<e&&(a=e)}),a},o.destroy=function(){if(!this.destroyed){var t=this.get("gridGroup");t&&t.remove();var i=this.get("labelRenderer");i&&i.destroy(),this.get("group").destroy(),e.prototype.destroy.call(this)}},o.clear=function(){var t=this.get("group");if(!t.get("destroyed")&&t.get("children").length){var e=this.get("gridGroup");e&&e.clear();var i=this.get("labelRenderer");i&&i.clear(),this.get("group").clear()}},o.autoRotateLabels=function(){},o.autoHideLabels=function(){},o.renderTitle=function(){},o.getLinePath=function(){},o.getTickPoint=function(){},o.getTickEnd=function(){},o.getSideVector=function(){},n}(e);module.exports=o;
},{"../component":"KZUR","../util":"Zkxp","./grid":"wMrE","../label/base":"tT1j","../const":"SPpV"}],"plke":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),n=e.MatrixUtil.vec2,r=function(i){function r(){return i.apply(this,arguments)||this}t(r,i);var a=r.prototype;return a.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},a.parseTick=function(t,e,i){return{text:t,value:e/i}},a._getCirclePoint=function(t,e){var i=this.get("center");return e=e||this.get("radius"),{x:i.x+Math.cos(t)*e,y:i.y+Math.sin(t)*e}},a.getTickPoint=function(t){var e=this.get("startAngle"),i=e+(this.get("endAngle")-e)*t;return this._getCirclePoint(i)},a.getSideVector=function(t,i){var r=this.get("center"),a=[i.x-r.x,i.y-r.y];if(!e.isNil(t)){var h=n.length(a);n.scale(a,a,t/h)}return a},a.getSidePoint=function(t,e){var i=this.getSideVector(e,t);return{x:t.x+i[0],y:t.y+i[1]}},a.getTickEnd=function(t,e){var i=this.get("tickLine");return e=e||i.length,this.getSidePoint(t,e)},a.getTextAnchor=function(t){var i;return e.snapEqual(t[0],0)?i="center":t[0]>0?i="left":t[0]<0&&(i="right"),i},a.getLinePath=function(){var t=this.get("center"),e=t.x,i=t.y,n=this.get("radius"),r=n,a=this.get("startAngle"),h=this.get("endAngle"),s=this.get("inner"),g=[];if(Math.abs(h-a)===2*Math.PI)g=[["M",e,i],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];else{var l=this._getCirclePoint(a),o=this._getCirclePoint(h),c=Math.abs(h-a)>Math.PI?1:0,u=a>h?0:1;if(s){var f=this.getSideVector(s*n,l),d=this.getSideVector(s*n,o),y={x:f[0]+e,y:f[1]+i},M={x:d[0]+e,y:d[1]+i};g=[["M",y.x,y.y],["L",l.x,l.y],["A",n,r,0,c,u,o.x,o.y],["L",M.x,M.y],["A",n*s,r*s,0,c,Math.abs(u-1),y.x,y.y]]}else g=[["M",e,i],["L",l.x,l.y],["A",n,r,0,c,u,o.x,o.y],["L",e,i]]}return g},a.addLabel=function(t,e,n){var r=this.get("label").offset||this.get("_labelOffset")||.001;e=this.getSidePoint(e,r),i.prototype.addLabel.call(this,t,e,n)},a.autoRotateLabels=function(){var t=this.get("ticks"),i=this.get("labelRenderer");if(i&&t.length>12){var n=this.get("radius"),r=this.get("startAngle"),a=this.get("endAngle")-r,h=a/(t.length-1),s=Math.sin(h/2)*n*2,g=this.getMaxLabelWidth(i);e.each(i.get("group").get("children"),function(e,i){var n=t[i].value*a+r,h=n%(2*Math.PI);g<s?(h<=0&&(n+=Math.PI),h>Math.PI&&(n-=Math.PI),n-=Math.PI/2,e.attr("textAlign","center")):h>Math.PI/2?n-=Math.PI:h<Math.PI/2*-1&&(n+=Math.PI),e.rotateAtStart(n)})}},r}(i);module.exports=r;
},{"../util":"Zkxp","./base":"IaPg"}],"pLfI":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),n=e.MatrixUtil,r=e.PathUtil,o=n.vec2,a=function(i){function n(){return i.apply(this,arguments)||this}t(n,i);var a=n.prototype;return a.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},a.getLinePath=function(){var t=this.get("crp"),e=this.get("axisStart"),i=r.catmullRomToBezier(t);return i.unshift(["M",e.x,e.y]),i},a.getTickPoint=function(t){var e=this.get("startAngle"),i=e+(this.get("endAngle")-e)*t;return this._getHelixPoint(i)},a._getHelixPoint=function(t){var e=this.get("center"),i=this.get("a")*t+this.get("inner");return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},a.getSideVector=function(t,e){var i=this.get("center"),n=[e.x-i.x,e.y-i.y];if(t){var r=o.length(n);o.scale(n,n,t/r)}return n},a.getSidePoint=function(t,e){var i=this.getSideVector(e,t);return{x:t.x+i[0],y:t.y+i[1]}},a.getTickEnd=function(t,e){var i=this.get("tickLine");return e=e||i.length,this.getSidePoint(t,e)},n}(i);module.exports=a;
},{"../util":"Zkxp","./base":"IaPg"}],"rnGn":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("./base"),i=require("../util"),a=i.MatrixUtil,r=a.vec2,n=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var n=a.prototype;return n.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return i.mix({},t,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},n._getAvgLabelLength=function(t){var e=t.get("group").get("children");return e[1].attr("x")-e[0].attr("x")},n._getAvgLabelHeightSpace=function(t){var e=t.get("group").get("children");return e[1].attr("y")-e[0].attr("y")},n.getSideVector=function(t){var e=this.get("isVertical"),a=this.get("factor");if(!i.isNumber(t))return[0,0];var n=this.get("start"),s=this.get("end"),g=this.getAxisVector(),h=r.normalize([],g),l=!1;(e&&n.y<s.y||!e&&n.x>s.x)&&(l=!0);var o=r.vertical([],h,l);return r.scale([],o,t*a)},n.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},n.getLinePath=function(){var t=this.get("start"),e=this.get("end"),i=[];return i.push(["M",t.x,t.y]),i.push(["L",e.x,e.y]),i},n.getTickEnd=function(t,e){var i=this.getSideVector(e);return{x:t.x+i[0],y:t.y+i[1]}},n.getTickPoint=function(t){var e=this.get("start"),i=this.get("end"),a=i.x-e.x,r=i.y-e.y;return{x:e.x+a*t,y:e.y+r*t}},n.renderTitle=function(){var t=this.get("title"),e=this.getTickPoint(.5),a=t.offset;if(i.isNil(a)){a=20;var n=this.get("labelsGroup");if(n)a+=this.getMaxLabelWidth(n)+(this.get("label").offset||this.get("_labelOffset"))}var s=t.textStyle,g=i.mix({},s);if(t.text){var h=this.getAxisVector();if(t.autoRotate&&i.isNil(s.rotate)){var l=0;if(!i.snapEqual(h[1],0)){var o=[h[0],h[1]];l=r.angleTo(o,[1,0],!0)}g.rotate=l*(180/Math.PI)}else i.isNil(s.rotate)||(g.rotate=s.rotate/180*Math.PI);var u,f=this.getSideVector(a),c=t.position;u="start"===c?{x:this.get("start").x+f[0],y:this.get("start").y+f[1]}:"end"===c?{x:this.get("end").x+f[0],y:this.get("end").y+f[1]}:{x:e.x+f[0],y:e.y+f[1]},g.x=u.x,g.y=u.y,g.text=t.text;var x=this.get("group").addShape("Text",{zIndex:2,attrs:g});x.name="axis-title",this.get("appendInfo")&&x.setSilent("appendInfo",this.get("appendInfo"))}},n.autoRotateLabels=function(){var t=this.get("labelRenderer"),e=this.get("title");if(t){var a=t.get("group").get("children"),r=this.get("label").offset,n=e?e.offset:48;if(n<0)return;var s,g,h=this.getAxisVector();if(i.snapEqual(h[0],0)&&e&&e.text)(g=this.getMaxLabelWidth(t))>n-r-12&&(s=-1*Math.acos((n-r-12)/g));else if(i.snapEqual(h[1],0)&&a.length>1){var l=Math.abs(this._getAvgLabelLength(t));(g=this.getMaxLabelWidth(t))>l&&(s=Math.asin(1.25*(n-r-12)/g))}if(s){var o=this.get("factor");i.each(a,function(t){t.rotateAtStart(s),i.snapEqual(h[1],0)&&(o>0?t.attr("textAlign","left"):t.attr("textAlign","right"))})}}},n.autoHideLabels=function(){var t,e,a=this.get("labelRenderer");if(a){var r=a.get("group").get("children"),n=this.getAxisVector();if(r.length<2)return;if(i.snapEqual(n[0],0)){var s=this.getMaxLabelHeight(a)+8,g=Math.abs(this._getAvgLabelHeightSpace(a));s>g&&(t=s,e=g)}else if(i.snapEqual(n[1],0)&&r.length>1){var h=this.getMaxLabelWidth(a)+8,l=Math.abs(this._getAvgLabelLength(a));h>l&&(t=h,e=l)}if(t&&e){var o=Math.ceil(t/e);i.each(r,function(t,e){e%o!=0&&t.attr("text","")})}}},a}(e);module.exports=n;
},{"./base":"IaPg","../util":"Zkxp"}],"W4id":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),r=e.MatrixUtil,n=e.PathUtil,o=r.vec2,u=function(i){function r(){return i.apply(this,arguments)||this}t(r,i);var u=r.prototype;return u.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"polyline"})},u.getLinePath=function(){var t=this.get("tickPoints"),i=this.get("start"),r=this.get("end"),o=[];o.push(i.x),o.push(i.y),e.each(t,function(t){o.push(t.x),o.push(t.y)}),o.push(r.x),o.push(r.y);var u=n.catmullRomToBezier(o);return u.unshift(["M",i.x,i.y]),u},u.getTickPoint=function(t,e){return this.get("tickPoints")[e]},u.getTickEnd=function(t,e,i){var r=this.get("tickLine"),n=e||r.length,o=this.getSideVector(n,t,i);return{x:t.x+o[0],y:t.y+o[1]}},u.getSideVector=function(t,e,i){var r;if(0===i){if((r=this.get("start")).x===e.x&&r.y===e.y)return[0,0]}else r=this.get("tickPoints")[i-1];var n=[e.x-r.x,e.y-r.y],u=o.normalize([],n),s=o.vertical([],u,!1);return o.scale([],s,t)},r}(i);module.exports=u;
},{"../util":"Zkxp","./base":"IaPg"}],"rkK3":[function(require,module,exports) {
var e=require("./base");e.Base=e,e.Circle=require("./circle"),e.Grid=require("./grid"),e.Helix=require("./helix"),e.Line=require("./line"),e.Polyline=require("./polyline"),module.exports=e;
},{"./base":"IaPg","./circle":"plke","./grid":"wMrE","./helix":"pLfI","./line":"rnGn","./polyline":"W4id"}],"JBNg":[function(require,module,exports) {
var r=require("../../util");module.exports={getFirstScale:function(e){var t;return r.each(e,function(r){if(r)return t=r,!1}),t}};
},{"../../util":"Zkxp"}],"JgeO":[function(require,module,exports) {
function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var t=require("../util"),i=require("./util/helper"),r=require("../component"),n=["min","max","median","start","end"],a=function(r){function a(){return r.apply(this,arguments)||this}e(a,r);var l=a.prototype;return l.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return t.mix({},e,{xScales:null,yScales:null,el:null})},l.render=function(){},l.clear=function(){var e=this.get("el");e&&e.remove(),this.set("el",null)},l.destroy=function(){this.clear(),r.prototype.destroy.call(this)},l.changeVisible=function(e){this.set("visible",e);var t=this.get("el");t&&(t.set?t.set("visible",e):t.style.display=e?"":"none")},l.parsePoint=function(e,r){var n,a,l=this.get("xScales"),s=this.get("yScales");if(t.isFunction(r)&&(r=r(l,s)),t.isArray(r)&&t.isString(r[0])&&-1!==r[0].indexOf("%"))return this._parsePercentPoint(e,r);if(t.isArray(r))n=this._getNormalizedValue(r[0],i.getFirstScale(l)),a=this._getNormalizedValue(r[1],i.getFirstScale(s));else for(var o in r){var u=r[o];l[o]&&(n=this._getNormalizedValue(u,l[o])),s[o]&&(a=this._getNormalizedValue(u,s[o],"y"))}return t.isNil(n)||t.isNil(a)||isNaN(n)||isNaN(a)?null:e.convert({x:n,y:a})},l._getNormalizedValue=function(e,i){var r,a;-1!==t.indexOf(n,e)?"start"===e?r=0:"end"===e?r=1:"median"===e?(a=i.isCategory?(i.values.length-1)/2:(i.min+i.max)/2,r=i.scale(a)):(a=i.isCategory?"min"===e?0:i.values.length-1:i[e],r=i.scale(a)):r=i.scale(e);return r},l._parsePercentPoint=function(e,t){var i=parseFloat(t[0])/100,r=parseFloat(t[1])/100,n=e.start,a=e.end,l=Math.min(n.x,a.x),s=Math.min(n.y,a.y);return{x:e.width*i+l,y:e.height*r+s}},a}(r);module.exports=a;
},{"../util":"Zkxp","./util/helper":"JBNg","../component":"KZUR"}],"HBkF":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),r=require("./base"),a=Math.PI,n=Math.atan;function i(t,e){var r,i=t.x-e.x,s=t.y-e.y;return 0===s?r=i<0?a/2:270*a/180:i>=0&&s>0?r=2*a-n(i/s):i<=0&&s<0?r=a-n(i/s):i>0&&s<0?r=a+n(-i/s):i<0&&s>0&&(r=n(i/-s)),r}var s=function(r){function n(){return r.apply(this,arguments)||this}t(n,r);var s=n.prototype;return s.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},s.render=function(t,r){var n=this.parsePoint(t,this.get("start")),s=this.parsePoint(t,this.get("end"));if(n&&s){var o,p=t.getCenter(),u=Math.sqrt((n.x-p.x)*(n.x-p.x)+(n.y-p.y)*(n.y-p.y)),h=i(n,p),y=i(s,p);if(y<h&&(y+=2*a),e.isNumberEqual(n.x,s.x)&&e.isNumberEqual(n.y,s.y)&&(this.get("start")[0]!==this.get("end")[0]||this.get("start")[1]!==this.get("end")[1]))o=[["M",n.x,n.y],["A",u,u,0,1,1,2*p.x-n.x,2*p.y-n.y],["A",u,u,0,1,1,n.x,n.y]];else{var l=(y-h)%(2*a)>a?1:0;o=[["M",n.x,n.y],["A",u,u,0,l,1,s.x,s.y]]}var x=r.addShape("path",{zIndex:this.get("zIndex"),attrs:e.mix({path:o},this.get("style"))});x.name="guide-arc",this.get("appendInfo")&&x.setSilent("appendInfo",this.get("appendInfo")),this.set("el",x)}},n}(r);module.exports=s;
},{"../util":"Zkxp","./base":"JgeO"}],"GZk1":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),n=function(i){function n(){return i.apply(this,arguments)||this}t(n,i);var r=n.prototype;return r.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},r.render=function(t,e){var i=this.parsePoint(t,this.get("position"));if(i){var n=e.addGroup();n.name="guide-data-marker";var r,a,o=this._getElementPosition(i),s=this.get("display");if(s.line){var p=o.line;r=this._drawLine(p,n)}if(s.text&&this.get("content")){var l=o.text;a=this._drawText(l,n)}if(s.point){var d=o.point;this._drawPoint(d,n)}if(this.get("autoAdjust")){var h=n.getBBox(),u=h.minX,x=h.minY,g=h.maxX,y=h.maxY,f=t.start,c=t.end;if(a){u<=f.x&&a.attr("textAlign","start"),g>=c.x&&a.attr("textAlign","end");var v=this.get("direction");if("upward"===v&&x<=c.y||"upward"!==v&&y>=f.y){var m,w;"upward"===v&&x<=c.y?(m="top",w=1):(m="bottom",w=-1),a.attr("textBaseline",m);var _=0;if(this.get("display").line){_=this.get("lineLength");var F=[["M",i.x,i.y],["L",i.x,i.y+_*w]];r.attr("path",F)}var L=i.y+(_+2)*w;a.attr("y",L)}}}this.get("appendInfo")&&n.setSilent("appendInfo",this.get("appendInfo")),this.set("el",n)}},r._getElementPosition=function(t){var e=t.x,i=t.y,n=this.get("display").line?this.get("lineLength"):0,r=this.get("direction");this.get("style").text.textBaseline="upward"===r?"bottom":"top";var a="upward"===r?-1:1;return{point:{x:e,y:i},line:[{x:e,y:i},{x:e,y:n*a+i}],text:{x:e,y:(n+2)*a+i}}},r._drawLine=function(t,i){var n=this.get("style").line,r=[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y]];return i.addShape("path",{attrs:e.mix({path:r},n)})},r._drawText=function(t,i){var n=this.get("style").text;return i.addShape("text",{attrs:e.mix({text:this.get("content")},n,t)})},r._drawPoint=function(t,i){var n=this.get("style").point;return i.addShape("circle",{attrs:e.mix({},n,t)})},n}(i);module.exports=n;
},{"../util":"Zkxp","./base":"JgeO"}],"DVKi":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./util/helper"),r=require("./base"),n=function(r){function n(){return r.apply(this,arguments)||this}t(n,r);var a=n.prototype;return a.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},a.render=function(t,i,r){var n=this.get("lineLength")||0,a=this._getRegionData(t,r);if(a.length){var o=this._getBBox(a),s=[];s.push(["M",a[0].x,o.yMin-n]);for(var g=0,l=a.length;g<l;g++){var h=["L",a[g].x,a[g].y];s.push(h)}s.push(["L",a[a.length-1].x,o.yMin-n]);var p=this.get("style"),u=p.region,x=p.text,f=i.addGroup();f.name="guide-data-region",f.addShape("path",{attrs:e.mix({path:s},u)});var y=this.get("content");y&&f.addShape("Text",{attrs:e.mix({x:(o.xMin+o.xMax)/2,y:o.yMin-n,text:y},x)}),this.get("appendInfo")&&f.setSilent("appendInfo",this.get("appendInfo")),this.set("el",f)}},a._getRegionData=function(t,r){for(var n,a=this.get("start"),o=this.get("end"),s=i.getFirstScale(this.get("xScales")).field,g=i.getFirstScale(this.get("yScales")).field,l=e.isArray(a)?a[0]:a[s],h=e.isArray(o)?o[0]:o[s],p=[],u=0,x=r.length;u<x;u++){var f=r[u];if(f[s]===l&&(n=u),u>=n){var y=this.parsePoint(t,[f[s],f[g]]);y&&p.push(y)}if(f[s]===h)break}return p},a._getBBox=function(t){for(var i=[],r=[],n=0;n<t.length;n++)i.push(t[n].x),r.push(t[n].y);var a=e.arrayUtil.getRange(i),o=e.arrayUtil.getRange(r);return{xMin:a.min,xMax:a.max,yMin:o.min,yMax:o.max}},n}(r);module.exports=n;
},{"../util":"Zkxp","./util/helper":"JBNg","./base":"JgeO"}],"Vroi":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),o=e.DomUtil,i=require("./base"),n=function(i){function n(){return i.apply(this,arguments)||this}t(n,i);var r=n.prototype;return r.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},r.render=function(t,i){var n=this.parsePoint(t,this.get("position"));if(n){var r=i.get("canvas").get("el").parentNode,a=o.createDom('<div class="g-guide"></div>');r.appendChild(a);var l=this.get("htmlContent")||this.get("html");if(e.isFunction(l))l=l(this.get("xScales"),this.get("yScales"));var d=o.createDom(l);a.appendChild(d),o.modifyCSS(a,{position:"absolute"}),this._setDomPosition(a,d,n),this.set("el",a)}},r._setDomPosition=function(t,e,i){var n=this.get("alignX"),r=this.get("alignY"),a=o.getOuterWidth(e),l=o.getOuterHeight(e),d={x:i.x,y:i.y};"middle"===n&&"top"===r?d.x-=Math.round(a/2):"middle"===n&&"bottom"===r?(d.x-=Math.round(a/2),d.y-=Math.round(l)):"left"===n&&"bottom"===r?d.y-=Math.round(l):"left"===n&&"middle"===r?d.y-=Math.round(l/2):"left"===n&&"top"===r?(d.x=i.x,d.y=i.y):"right"===n&&"bottom"===r?(d.x-=Math.round(a),d.y-=Math.round(l)):"right"===n&&"middle"===r?(d.x-=Math.round(a),d.y-=Math.round(l/2)):"right"===n&&"top"===r?d.x-=Math.round(a):(d.x-=Math.round(a/2),d.y-=Math.round(l/2));var h=this.get("offsetX");h&&(d.x+=h);var s=this.get("offsetY");s&&(d.y+=s),o.modifyCSS(t,{top:Math.round(d.y)+"px",left:Math.round(d.x)+"px",visibility:"visible",zIndex:this.get("zIndex")})},r.clear=function(){var t=this.get("el");t&&t.parentNode&&t.parentNode.removeChild(t)},n}(i);module.exports=n;
},{"../util":"Zkxp","./base":"JgeO"}],"Cryx":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),r=function(i){function r(){return i.apply(this,arguments)||this}t(r,i);var s=r.prototype;return s.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},s.render=function(t,e){var i=this.parsePoint(t,this.get("start"));if(i){var r={x:i.x,y:i.y};if(r.img=this.get("src"),this.get("end")){var s=this.parsePoint(t,this.get("end"));if(!s)return;r.width=s.x-i.x,r.height=s.y-i.y}else r.width=this.get("width")||32,r.height=this.get("height")||32;this.get("offsetX")&&(r.x+=this.get("offsetX")),this.get("offsetY")&&(r.y+=this.get("offsetY"));var n=e.addShape("Image",{zIndex:1,attrs:r});n.name="guide-image",this.get("appendInfo")&&n.setSilent("appendInfo",this.get("appendInfo")),this.set("el",n)}},r}(i);module.exports=r;
},{"../util":"Zkxp","./base":"JgeO"}],"VzDB":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),n=require("./base"),i=e.MatrixUtil.vec2,a=require("../const"),o=a.FONT_FAMILY,r=function(n){function a(){return n.apply(this,arguments)||this}t(a,n);var r=a.prototype;return r.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:o},content:null}})},r.render=function(t,e){var n=this.parsePoint(t,this.get("start")),i=this.parsePoint(t,this.get("end"));if(n&&i){var a=e.addGroup({viewId:e.get("viewId")});this._drawLines(n,i,a);var o=this.get("text");o&&o.content&&this._drawText(n,i,a),this.set("el",a)}},r._drawLines=function(t,n,i){var a=[["M",t.x,t.y],["L",n.x,n.y]],o=i.addShape("Path",{attrs:e.mix({path:a},this.get("lineStyle"))});o.name="guide-line",this.get("appendInfo")&&o.setSilent("appendInfo",this.get("appendInfo"))},r._drawText=function(t,n,a){var o,r=this.get("text"),s=r.position,p=r.style||{};((o="start"===s?0:"center"===s?.5:e.isString(s)&&-1!==s.indexOf("%")?parseInt(s,10)/100:e.isNumber(s)?s:1)>1||o<0)&&(o=1);var l={x:t.x+(n.x-t.x)*o,y:t.y+(n.y-t.y)*o};if(r.offsetX&&(l.x+=r.offsetX),r.offsetY&&(l.y+=r.offsetY),l.text=r.content,l=e.mix({},l,p),r.autoRotate&&e.isNil(p.rotate)){var f=i.angleTo([n.x-t.x,n.y-t.y],[1,0],1);l.rotate=f}else e.isNil(p.rotate)||(l.rotate=p.rotate*Math.PI/180);var d=a.addShape("Text",{attrs:l});d.name="guide-line-text",this.get("appendInfo")&&d.setSilent("appendInfo",this.get("appendInfo"))},a}(n);module.exports=r;
},{"../util":"Zkxp","./base":"JgeO","../const":"SPpV"}],"XY2j":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),n=require("./base"),r=function(n){function r(){return n.apply(this,arguments)||this}t(r,n);var i=r.prototype;return i.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},i.render=function(t,n){var r=this.get("style"),i=this._getPath(t);if(i.length){var o=n.addShape("path",{zIndex:this.get("zIndex"),attrs:e.mix({path:i},r)});o.name="guide-region",this.get("appendInfo")&&o.setSilent("appendInfo",this.get("appendInfo")),this.set("el",o)}},i._getPath=function(t){var e=this.parsePoint(t,this.get("start")),n=this.parsePoint(t,this.get("end"));return e&&n?[["M",e.x,e.y],["L",n.x,e.y],["L",n.x,n.y],["L",e.x,n.y],["z"]]:[]},r}(n);module.exports=r;
},{"../util":"Zkxp","./base":"JgeO"}],"GGN6":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),n=require("./base"),o=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.getDefaultCfg=function(){var t=n.prototype.getDefaultCfg.call(this);return e.mix({},t,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},i.render=function(t,n){var o=this.parsePoint(t,this.get("position"));if(o){var i=e.mix({},this.get("style")),r=this.get("offsetX"),s=this.get("offsetY");r&&(o.x+=r),s&&(o.y+=s),i.rotate&&(i.rotate=i.rotate*Math.PI/180);var a=n.addShape("Text",{zIndex:this.get("zIndex"),attrs:e.mix({text:this.get("content")},i,o)});a.name="guide-text",this.get("appendInfo")&&a.setSilent("appendInfo",this.get("appendInfo")),this.set("el",a)}},o}(n);module.exports=o;
},{"../util":"Zkxp","./base":"JgeO"}],"IYWe":[function(require,module,exports) {
module.exports={Guide:require("./base"),Arc:require("./arc"),DataMarker:require("./data-marker"),DataRegion:require("./data-region"),Html:require("./html"),Image:require("./image"),Line:require("./line"),Region:require("./region"),Text:require("./text")};
},{"./base":"JgeO","./arc":"HBkF","./data-marker":"GZk1","./data-region":"DVKi","./html":"Vroi","./image":"Cryx","./line":"VzDB","./region":"XY2j","./text":"GGN6"}],"ZsTn":[function(require,module,exports) {
var e=require("./base");module.exports=e;
},{"./base":"tT1j"}],"tb2c":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("../component"),r=require("../const"),n=r.FONT_FAMILY,o=function(i){t(o,i);var r=o.prototype;function o(t){var e;return(e=i.call(this,t)||this)._init(),e.beforeRender(),e.render(),e._adjustPositionOffset(),e._bindEvents(),e}return r.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}},r._init=function(){var t=this.get("group"),e=this.get("container");this.set("canvas",e.get("canvas"));var i=this.get("position");t||(t=e.addGroup({x:0-i[0],y:0-i[1]})),this.set("group",t)},r._adjustPositionOffset=function(){var t=this.get("position"),i=this.get("offset"),r=this.get("offsetX"),n=this.get("offsetY");e.isArray(i)||(i="vertical"===this.get("layout")?[i,0]:[0,i]);r&&(i[0]=r),n&&(i[1]=n);var o=this.get("group").getBBox();this.move(-o.minX+t[0]+i[0],-o.minY+t[1]+i[1])},r.beforeRender=function(){var t=this.get("group").addGroup();this.set("itemsGroup",t)},r.render=function(){this._renderTitle()},r._renderTitle=function(){var t=this.get("title"),i=this.get("titleGap");if(i=i||0,t&&t.text){var r=this.get("group").addShape("text",{attrs:e.mix({x:0,y:0-i,fill:"#333",textBaseline:"middle",fontFamily:n},t)});r.name="legend-title",this.get("appendInfo")&&r.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",r)}},r.getCheckedCount=function(){var t=this.get("itemsGroup").get("children");return e.filter(t,function(t){return t.get("checked")}).length},r.setItems=function(t){this.set("items",t),this.clear(),this.render()},r.addItem=function(t){this.get("items").push(t),this.clear(),this.render()},r.clear=function(){this.get("itemsGroup").clear(),this.get("group").clear(),this.beforeRender()},r.destroy=function(){var t=this.get("group");t&&t.destroy(),this._attrs={},this.removeAllListeners(),i.prototype.destroy.call(this)},r.getWidth=function(){return this.get("group").getBBox().width},r.getHeight=function(){return this.get("group").getBBox().height},r.move=function(t,e){this.get("group").move(t,e)},r.draw=function(){this.get("canvas").draw()},o}(i);module.exports=o;
},{"../util":"Zkxp","../component":"KZUR","../const":"SPpV"}],"bIqD":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),r=require("../const"),a=r.FONT_FAMILY,n=e.Event,o=e.Group;function h(t,i){var r=null,a=i instanceof o||"legendGroup"===i.name?i.get("value"):i;return e.each(t,function(t){if(t.value===a)return r=t,!1}),r}function l(t,e){return t.findBy(function(t){return t.name===e})}var s=function(i){function r(){return i.apply(this,arguments)||this}t(r,i);var o=r.prototype;return o.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:a},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},o.render=function(){i.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},o._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",e.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",e.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",e.wrapBehavior(this,"_onClick"))},o._getLegendItem=function(t){var e=t.get("parent");return e&&"legendGroup"===e.name?e:null},o.activate=function(t){var e=this,i=this,r=i.get("itemsGroup").get("children"),a=void 0;r.forEach(function(r){if(a=l(r,"legend-marker")){var n=r.get("checked");e.get("highlight")?r.get("value")===t&&n?a.attr("stroke","#333"):a.attr("stroke",null):r.get("value")===t&&a.attr("fillOpacity",i.get("activeOpacity"))}}),this.get("canvas").draw()},o.deactivate=function(){var t=this,e=this,i=e.get("itemsGroup").get("children"),r=void 0,a=this.get("unCheckColor");i.forEach(function(i){if(r=l(i,"legend-marker"))if(t.get("highlight")){var n=r.get("oriStroke"),o=i.get("checked");n=n&&!o?a:"",r.attr("stroke",n)}else r.attr("fillOpacity",e.get("inactiveOpacity"))}),this.get("canvas").draw()},o._onMousemove=function(t){var e=this._getLegendItem(t.currentTarget);if(e&&e.get("checked")){var i=this.get("items"),r=new n("itemhover",t,!0,!0);r.item=h(i,e),r.checked=e.get("checked"),r.currentTarget=t.currentTarget,this.deactivate(),this.activate(e.get("value")),this.emit("itemhover",r)}else this.deactivate(),this.emit("itemunhover",t);this.get("canvas").draw()},o._onMouseleave=function(t){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",t)},o._onClick=function(t){var i=this._getLegendItem(t.currentTarget),r=this.get("items");if(i&&!i.get("destroyed")){var a=i.get("checked"),o=this.get("selectedMode"),s=h(r,i),c=new n("itemclick",t,!0,!0);if(c.item=s,c.currentTarget=i,c.appendInfo=t.currentTarget.get("appendInfo"),c.checked="single"===o||!a,!this.get("allowAllCanceled")&&a&&1===this.getCheckedCount())return void this.emit("clicklastitem",c);var g=this.get("unCheckColor"),d=this.get("textStyle").fill,u=void 0,m=void 0,f=void 0;if("single"===o){var v=this.get("itemsGroup").get("children");e.each(v,function(t){u=l(t,"legend-marker"),m=l(t,"legend-text"),f=l(t,"legend-item"),t!==i?(u.attr("fill")&&u.attr("fill",g),u.attr("stroke")&&u.attr("stroke",g),m.attr("fill",g),u.setSilent("checked",!1),m.setSilent("checked",!1),f.setSilent("checked",!1),t.setSilent("checked",!1)):(u.attr("fill")&&s&&s.marker&&u.attr("fill",s.marker.fill),u.attr("stroke")&&s&&s.marker&&u.attr("stroke",s.marker.stroke),m.attr("fill",d),u.setSilent("checked",!0),m.setSilent("checked",!0),f.setSilent("checked",!0),t.setSilent("checked",!0))})}else u=l(i,"legend-marker"),m=l(i,"legend-text"),f=l(i,"legend-item"),u.attr("fill")&&s&&s.marker&&u.attr("fill",a?g:s.marker.fill),u.attr("stroke")&&s&&s.marker&&u.attr("stroke",a?g:s.marker.stroke),m.attr("fill",a?g:d),i.setSilent("checked",!a),u.setSilent("checked",!a),m.setSilent("checked",!a),f.setSilent("checked",!a);this.emit("itemclick",c)}this.get("canvas").draw()},o._renderItems=function(){var t=this,i=this.get("items");if(this.get("reversed")&&i.reverse(),e.each(i,function(e,i){t._addItem(e,i)}),this.get("highlight")){var r=this.get("itemsGroup").get("children"),a=void 0;r.forEach(function(t){(a=l(t,"legend-marker")).get("oriStroke")||(a.attr("stroke")?a.set("oriStroke",a.attr("stroke")):a.set("oriStroke",""))})}},o._formatItemValue=function(t){var e=this.get("formatter")||this.get("itemFormatter");return e&&(t=e.call(this,t)),t},o._getNextX=function(){var t=this.get("layout"),i=this.get("itemGap"),r=this.get("itemsGroup"),a=this.get("itemWidth"),n=r.get("children"),o=0;return"horizontal"===t&&e.each(n,function(t){o+=(a||t.getBBox().width)+i}),o},o._getNextY=function(){var t=this.get("itemMarginBottom"),i=this.get("titleShape")?this.get("titleGap"):0,r=this.get("layout"),a=this.get("itemsGroup"),n=this.get("titleShape"),o=a.get("children"),h=i;return n&&(h+=n.getBBox().height),"vertical"===r&&e.each(o,function(e){h+=e.getBBox().height+t}),h},o._addItem=function(t){var i=this.get("itemsGroup"),r=this._getNextX(),n=this._getNextY(),o=this.get("unCheckColor"),h=i.addGroup({x:r,y:n,value:t.value,checked:t.checked});h.set("viewId",this.get("viewId"));var l=this.get("textStyle"),s=this.get("_wordSpaceing"),c=0;if(t.marker){var g=e.mix({},t.marker,{x:t.marker.radius+r,y:n});t.checked||(g.fill&&(g.fill=o),g.stroke&&(g.stroke=o));var d=h.addShape("marker",{type:"marker",attrs:g});d.attr("cursor","pointer"),d.name="legend-marker",c+=d.getBBox().width+s}var u=e.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:a},l,{x:c+r,y:n,text:this._formatItemValue(t.value)});t.checked||e.mix(u,{fill:o});var m=h.addShape("text",{attrs:u});m.attr("cursor","pointer"),m.name="legend-text",this.get("appendInfo")&&m.setSilent("appendInfo",this.get("appendInfo"));var f=h.getBBox(),v=this.get("itemWidth"),p=h.addShape("rect",{attrs:{x:r,y:n-f.height/2,fill:"#fff",fillOpacity:0,width:v||f.width,height:f.height}});return p.attr("cursor","pointer"),p.setSilent("origin",t),p.name="legend-item",this.get("appendInfo")&&p.setSilent("appendInfo",this.get("appendInfo")),h.name="legendGroup",h},o._adjustHorizontal=function(){var t=this.get("itemsGroup"),i=t.get("children"),r=this.get("maxLength"),a=this.get("itemGap"),n=this.get("itemMarginBottom"),o=this.get("titleShape")?this.get("titleGap"):0,h=0,l=0,s=void 0,c=void 0,g=void 0,d=this.get("itemWidth");t.getBBox().width>r&&e.each(i,function(t){g=t.getBBox(),s=d||g.width,c=g.height+n,r-l<s&&(h++,l=0),t.move(l,h*c+o),l+=s+a})},o._adjustVertical=function(){var t=this.get("itemsGroup"),i=this.get("titleShape"),r=t.get("children"),a=this.get("maxLength"),n=this.get("itemGap"),o=this.get("itemMarginBottom"),h=this.get("titleGap"),l=i?i.getBBox().height+h:0,s=this.get("itemWidth"),c=l,g=void 0,d=void 0,u=void 0,m=0,f=0;t.getBBox().height>a&&e.each(r,function(t){u=t.getBBox(),g=u.width,d=u.height,s?m=s+n:g>m&&(m=g+n),a-c<d?(c=l,f+=m,t.move(f,l)):t.move(f,c),c+=d+o})},o._adjustItems=function(){"horizontal"===this.get("layout")?this._adjustHorizontal():this._adjustVertical()},o.getWidth=function(){return i.prototype.getWidth.call(this)},o.getHeight=function(){return i.prototype.getHeight.call(this)},o.move=function(t,e){i.prototype.move.call(this,t,e)},r}(i);module.exports=s;
},{"../util":"Zkxp","./base":"tb2c","../const":"SPpV"}],"yEJv":[function(require,module,exports) {
function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var t=require("../util"),i=require("./category"),o=require("../const"),n=o.FONT_FAMILY,l=t.DomUtil,r=t.Group,a="g2-legend",s="g2-legend-title",c="g2-legend-list",d="g2-legend-list-item",g="g2-legend-text",h="g2-legend-marker";function p(e,t){return e.getElementsByClassName(t)[0]}function u(e,i){var o=e.className;return t.isNil(o)?e:(o=o.split(" ")).indexOf(i)>-1?e:e.parentNode?e.parentNode.className===a?e.parentNode:u(e.parentNode,i):null}function f(e,i){var o=null,n=i instanceof r?i.get("value"):i;return t.each(e,function(e){if(e.value===n)return o=e,!1}),o}var m=function(i){function o(){return i.apply(this,arguments)||this}e(o,i);var r=o.prototype;return r.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return t.mix({},e,{type:"category-legend",container:null,containerTpl:'<div class="'+a+'"><h4 class="'+s+'"></h4><ul class="'+c+'"></ul></div>',itemTpl:'<li class="'+d+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+h+'" style="background-color:{color};"></i><span class="'+g+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:n},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},r._init=function(){},r.beforeRender=function(){},r.render=function(){this._renderHTML()},r._bindEvents=function(){var e=this,t=p(this.get("legendWrapper"),c);this.get("hoverable")&&(t.onmousemove=function(t){return e._onMousemove(t)},t.onmouseout=function(t){return e._onMouseleave(t)}),this.get("clickable")&&(t.onclick=function(t){return e._onClick(t)})},r._onMousemove=function(e){var t=this.get("items"),i=e.target,o=i.className;if(!((o=o.split(" ")).indexOf(a)>-1||o.indexOf(c)>-1)){var n=u(i,d),l=f(t,n.getAttribute("data-value"));l?(this.deactivate(),this.activate(n.getAttribute("data-value")),this.emit("itemhover",{item:l,currentTarget:n,checked:l.checked})):l||(this.deactivate(),this.emit("itemunhover",e))}},r._onMouseleave=function(e){this.deactivate(),this.emit("itemunhover",e)},r._onClick=function(e){var i=this,o=p(this.get("legendWrapper"),c),n=this.get("unCheckColor"),l=this.get("items"),r=this.get("selectedMode"),s=o.childNodes,m=e.target,v=m.className;if(!((v=v.split(" ")).indexOf(a)>-1||v.indexOf(c)>-1)){var y=u(m,d),x=p(y,g),S=p(y,h),C=f(l,y.getAttribute("data-value"));if(C){var k=y.className,T=y.getAttribute("data-color");if("single"===r)C.checked=!0,t.each(s,function(e){e!==y?(p(e,h).style.backgroundColor=n,e.className=e.className.replace("checked","unChecked"),e.style.color=n,f(l,e.getAttribute("data-value")).checked=!1):(x&&(x.style.color=i.get("textStyle").fill),S&&(S.style.backgroundColor=T),y.className=k.replace("unChecked","checked"))});else{var b=-1!==k.indexOf("checked"),N=0;if(t.each(s,function(e){-1!==e.className.indexOf("checked")&&N++}),!this.get("allowAllCanceled")&&b&&1===N)return void this.emit("clicklastitem",{item:C,currentTarget:y,checked:"single"===r||C.checked});C.checked=!C.checked,b?(S&&(S.style.backgroundColor=n),y.className=k.replace("checked","unChecked"),y.style.color=n):(S&&(S.style.backgroundColor=T),y.className=k.replace("unChecked","checked"),y.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:C,currentTarget:y,checked:"single"===r||C.checked})}}},r.activate=function(e){var t=this,i=this,o=i.get("items"),n=f(o,e);p(i.get("legendWrapper"),c).childNodes.forEach(function(e){var l=p(e,h),r=f(o,e.getAttribute("data-value"));if(t.get("highlight")){if(r===n&&r.checked)return void(l.style.border="1px solid #333")}else r===n?l.style.opacity=i.get("activeOpacity"):r.checked&&(l.style.opacity=i.get("inactiveOpacity"))})},r.deactivate=function(){var e=this,t=this;p(t.get("legendWrapper"),c).childNodes.forEach(function(i){var o=p(i,h);e.get("highlight")?o.style.border="1px solid #fff":o.style.opacity=t.get("inactiveOpacity")})},r._renderHTML=function(){var e=this,i=this.get("container"),o=this.get("title"),r=this.get("containerTpl"),u=l.createDom(r),f=p(u,s),m=p(u,c),v=this.get("unCheckColor"),y=t.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:n,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:n},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(i)||"string"==typeof i&&i.constructor===String){var x=i.replace("#","");(i=document.getElementById(x)).appendChild(u)}else{var S=this.get("position"),C={};C="left"===S||"right"===S?{maxHeight:(this.get("maxLength")||i.offsetHeight)+"px"}:{maxWidth:(this.get("maxLength")||i.offsetWidth)+"px"},l.modifyCSS(u,t.mix({},y.CONTAINER_CLASS,C,this.get(a))),i.appendChild(u)}l.modifyCSS(m,t.mix({},y.LIST_CLASS,this.get(c))),f&&(o&&o.text?(f.innerHTML=o.text,l.modifyCSS(f,t.mix({},y.TITLE_CLASS,this.get(s),o))):u.removeChild(f));var k=this.get("items"),T=this.get("itemTpl"),b=this.get("position"),N=this.get("layout"),_="right"===b||"left"===b||"vertical"===N?"block":"inline-block",L=t.mix({},y.LIST_ITEM_CLASS,{display:_},this.get(d)),A=t.mix({},y.MARKER_CLASS,this.get(h));if(t.each(k,function(i,o){var n,r=i.checked,a=e._formatItemValue(i.value),s=i.marker.fill||i.marker.stroke,c=r?s:v;n=t.isFunction(T)?T(a,c,r,o):T;var d=t.substitute(n,t.mix({},i,{index:o,checked:r?"checked":"unChecked",value:a,color:c,originColor:s,originValue:i.value.replace(/\"/g,"&quot;")})),f=l.createDom(d);f.style.color=e.get("textStyle").fill;var y=p(f,h),x=p(f,g);if(l.modifyCSS(f,L),y&&l.modifyCSS(y,A),r||(f.style.color=v,y&&(y.style.backgroundColor=v)),m.appendChild(f),e.get("abridgeText")){var S=a,C=f.offsetWidth,k=e.get("textStyle").fontSize;isNaN(k)&&(-1!==k.indexOf("pt")?k=1*parseFloat(k.substr(0,k.length-2))/72*96:-1!==k.indexOf("px")&&(k=parseFloat(k.substr(0,k.length-2))));var b=k*S.length,N=Math.floor(C/k);C<2*k?S="":C<b&&N>1&&(S=S.substr(0,N-1)+"..."),x.innerText=S,f.addEventListener("mouseover",function(){var e=p(u.parentNode,"textTip");e.style.display="block",e.style.left=f.offsetLeft+f.offsetWidth+"px",e.style.top=f.offsetTop+15+"px",e.innerText=a}),f.addEventListener("mouseout",function(){p(u.parentNode,"textTip").style.display="none"})}}),this.get("abridgeText")){var O=this.get("tipTpl"),E=l.createDom(O),W=this.get("tipStyle");l.modifyCSS(E,W),u.parentNode.appendChild(E),E.addEventListener("mouseover",function(){E.style.display="none"})}this.set("legendWrapper",u)},r._adjustPositionOffset=function(){if(!1!==this.get("autoPosition")){var e=this.get("position"),t=this.get("offset"),i=this.get("offsetX"),o=this.get("offsetY");i&&(t[0]=i),o&&(t[1]=o);var n=this.get("legendWrapper");n.style.left=e[0]+"px",n.style.top=e[1]+"px",n.style.marginLeft=t[0]+"px",n.style.marginTop=t[1]+"px"}},r.getWidth=function(){return l.getOuterWidth(this.get("legendWrapper"))},r.getHeight=function(){return l.getOuterHeight(this.get("legendWrapper"))},r.move=function(e,t){/^\#/.test(this.get("container"))?i.prototype.move.call(this,e,t):(l.modifyCSS(this.get("legendWrapper"),{left:e+"px",top:t+"px"}),this.set("x",e),this.set("y",t))},r.destroy=function(){var e=this.get("legendWrapper");e&&e.parentNode&&e.parentNode.removeChild(e),i.prototype.destroy.call(this)},o}(i);module.exports=m;
},{"../util":"Zkxp","./category":"bIqD","../const":"SPpV"}],"ulmV":[function(require,module,exports) {
function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var t=require("../util"),i=require("./cat-html"),l=require("../const"),a=l.FONT_FAMILY,s=t.DomUtil,n="g2-legend-list",o="g2-slip",r="g2-caret-up",p="g2-caret-down",d="rgba(0,0,0,0.65)",y="rgba(0,0,0,0.25)";function f(e,t){return e.getElementsByClassName(t)[0]}var c=function(i){function l(){return i.apply(this,arguments)||this}e(l,i);var c=l.prototype;return c.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return t.mix({},e,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:a,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+o+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},c.render=function(){i.prototype._renderHTML.call(this),this._renderFlipPage()},c._renderFlipPage=function(){var e=this.get("legendWrapper"),i=f(e,n),l=this.get("position"),a=this.get("layout"),o="right"===l||"left"===l||"vertical"===a,c=o?"block":"inline-block",g=e.offsetHeight;if(e.scrollHeight>g){var h=this.get("slipTpl"),u=s.createDom(h),m=f(u,r),v=f(u,p);s.modifyCSS(m,this.get("caretStyle")),s.modifyCSS(m,{fill:"rgba(0,0,0,0.25)"}),s.modifyCSS(v,this.get("caretStyle"));var S=f(u,"cur-pagenum"),x=f(u,"next-pagenum"),b=this.get("pageNumStyle");if(s.modifyCSS(S,t.mix({},b,{paddingLeft:"10px"})),s.modifyCSS(x,t.mix({},b,{opacity:.3,paddingRight:"10px"})),s.modifyCSS(u,t.mix({},this.get("slipDomStyle"),o?{top:g+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),e.style.overflow=this.get("legendOverflow"),e.appendChild(u),!o){var T=Math.max(e.offsetWidth-10-u.offsetWidth,0);s.modifyCSS(i,{maxWidth:T+"px"})}for(var C=i.childNodes,w=0,k=1,N=[],D=0;D<C.length;D++)C[D].style.display=c,(w=C[D].offsetTop+C[D].offsetHeight)>g&&(k++,N.forEach(function(e){e.style.display="none"}),N=[]),N.push(C[D]);x.innerText="/"+k,C.forEach(function(e){e.style.display=c,(w=e.offsetTop+e.offsetHeight)>g&&(e.style.display="none")}),m.addEventListener("click",function(){if(C[0].style.display!==c){var e=-1;C.forEach(function(t,i){t.style.display===c&&(e=-1===e?i:e,t.style.display="none")});for(var t=e-1;t>=0&&(C[t].style.display=c,w=C[e-1].offsetTop+C[e-1].offsetHeight,C[t].style.display="none",w<=g);t--)C[t].style.display=c;var i=Number.parseInt(S.innerText,10)-1;m.style.fill=1===i?y:d,v.style.fill=d,S.innerText=i}}),v.addEventListener("click",function(){if(C[C.length-1].style.display!==c){var e=-1;C.forEach(function(t,i){t.style.display===c&&(e=i,t.style.display="none")});for(var t=e+1;t<C.length&&(C[t].style.display=c,w=C[t].offsetTop+C[t].offsetHeight,C[t].style.display="none",w<=g);t++)C[t].style.display=c;var i=Number.parseInt(S.innerText,10)+1;v.style.fill=i===k?y:d,m.style.fill=d,S.innerText=i}}),this.set("slipDom",u)}},c.destroy=function(){var e=this.get("slipDom");e&&e.parentNode&&e.parentNode.removeChild(e),i.prototype.destroy.call(this)},l}(i);module.exports=c;
},{"../util":"Zkxp","./cat-html":"yEJv","../const":"SPpV"}],"z7XT":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),n=e.DomUtil,i=e.Group,a=function(i){function a(){return i.apply(this,arguments)||this}t(a,i);var s=a.prototype;return s.getDefaultCfg=function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},s._beforeRenderUI=function(){var t=this.get("layout"),e=this.get("backgroundElement"),n=this.get("minHandleElement"),i=this.get("maxHandleElement"),a=this.addShape("rect",{attrs:this.get("middleAttr")}),s="vertical"===t?"ns-resize":"ew-resize";this.add([e,n,i]),this.set("middleHandleElement",a),e.set("zIndex",0),a.set("zIndex",1),n.set("zIndex",2),i.set("zIndex",2),a.attr("cursor","move"),n.attr("cursor",s),i.attr("cursor",s),this.sort()},s._renderUI=function(){"horizontal"===this.get("layout")?this._renderHorizontal():this._renderVertical()},s._transform=function(t){var e=this.get("range"),n=e[0]/100,i=e[1]/100,a=this.get("width"),s=this.get("height"),r=this.get("minHandleElement"),o=this.get("maxHandleElement"),l=this.get("middleHandleElement");r.resetMatrix(),o.resetMatrix(),"horizontal"===t?(l.attr({x:a*n,y:0,width:(i-n)*a,height:s}),r.translate(n*a,s),o.translate(i*a,s)):(l.attr({x:0,y:s*(1-i),width:a,height:(i-n)*s}),r.translate(1,(1-n)*s),o.translate(1,(1-i)*s))},s._renderHorizontal=function(){this._transform("horizontal")},s._renderVertical=function(){this._transform("vertical")},s._bindUI=function(){this.on("mousedown",e.wrapBehavior(this,"_onMouseDown"))},s._isElement=function(t,e){var n=this.get(e);return t===n||!!n.isGroup&&n.get("children").indexOf(t)>-1},s._getRange=function(t,e){var n=t+e;return n=(n=n>100?100:n)<0?0:n},s._updateStatus=function(t,n){var i="x"===t?this.get("width"):this.get("height");t=e.upperFirst(t);var a,s=this.get("range"),r=this.get("page"+t),o=this.get("currentTarget"),l=this.get("rangeStash"),h="vertical"===this.get("layout")?-1:1,u=n["page"+t],g=(u-r)/i*100*h;s[1]<=s[0]?(this._isElement(o,"minHandleElement")||this._isElement(o,"maxHandleElement"))&&(s[0]=this._getRange(g,s[0]),s[1]=this._getRange(g,s[0])):(this._isElement(o,"minHandleElement")&&(s[0]=this._getRange(g,s[0])),this._isElement(o,"maxHandleElement")&&(s[1]=this._getRange(g,s[1]))),this._isElement(o,"middleHandleElement")&&(a=l[1]-l[0],s[0]=this._getRange(g,s[0]),s[1]=s[0]+a,s[1]>100&&(s[1]=100,s[0]=s[1]-a)),this.emit("sliderchange",{range:s}),this.set("page"+t,u),this._renderUI(),this.get("canvas").draw()},s._onMouseDown=function(t){var e=t.currentTarget,n=t.event,i=this.get("range");n.stopPropagation(),n.preventDefault(),this.set("pageX",n.pageX),this.set("pageY",n.pageY),this.set("currentTarget",e),this.set("rangeStash",[i[0],i[1]]),this._bindCanvasEvents()},s._bindCanvasEvents=function(){var t=this.get("canvas").get("containerDOM");this.onMouseMoveListener=n.addEventListener(t,"mousemove",e.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=n.addEventListener(t,"mouseup",e.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=n.addEventListener(t,"mouseleave",e.wrapBehavior(this,"_onCanvasMouseUp"))},s._onCanvasMouseMove=function(t){this._mouseOutArea(t)||("horizontal"===this.get("layout")?this._updateStatus("x",t):this._updateStatus("y",t))},s._onCanvasMouseUp=function(){this._removeDocumentEvents()},s._removeDocumentEvents=function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},s._mouseOutArea=function(t){var e=this.get("canvas").get("el").getBoundingClientRect(),n=this.get("parent"),i=n.getBBox(),a=n.attr("matrix")[6],s=n.attr("matrix")[7],r=a+i.width,o=s+i.height,l=t.clientX-e.x,h=t.clientY-e.y;return l<a||l>r||h<s||h>o},a}(i);module.exports=a;
},{"../util":"Zkxp"}],"g3zL":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./base"),r=require("./slider"),a=require("../const"),s=a.FONT_FAMILY,l=8,n=e.Event,h=e.Group,g=function(i){function a(){return i.apply(this,arguments)||this}t(a,i);var g=a.prototype;return g.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:s},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},g._calStartPoint=function(){var t={x:10,y:this.get("titleGap")-l},e=this.get("titleShape");if(e){var i=e.getBBox();t.y+=i.height}return t},g.beforeRender=function(){var t=this.get("items");e.isArray(t)&&!e.isEmpty(t)&&(i.prototype.beforeRender.call(this),this.set("firstItem",t[0]),this.set("lastItem",t[t.length-1]))},g._formatItemValue=function(t){var e=this.get("formatter")||this.get("itemFormatter");return e&&(t=e.call(this,t)),t},g.render=function(){i.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},g._renderSlider=function(){var t=new h,e=new h,i=new h,a=this._calStartPoint(),s=this.get("group").addGroup(r,{minHandleElement:t,maxHandleElement:e,backgroundElement:i,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});s.translate(a.x,a.y),this.set("slider",s),this._renderSliderShape().attr("clip",s.get("middleHandleElement")),this._renderTrigger()},g._addMiddleBar=function(t,i,r){return t.addShape(i,{attrs:e.mix({},r,this.get("middleBackgroundStyle"))}),t.addShape(i,{attrs:r})},g._renderTrigger=function(){var t=this.get("firstItem"),i=this.get("lastItem"),r=this.get("layout"),a=this.get("textStyle"),s=this.get("triggerAttr"),l=e.mix({},s),n=e.mix({},s),h=e.mix({text:this._formatItemValue(t.value)+""},a),g=e.mix({text:this._formatItemValue(i.value)+""},a);"vertical"===r?(this._addVerticalTrigger("min",l,h),this._addVerticalTrigger("max",n,g)):(this._addHorizontalTrigger("min",l,h),this._addHorizontalTrigger("max",n,g))},g._addVerticalTrigger=function(t,i,r){var a=this.get("slider").get(t+"HandleElement"),s=this.get("width"),n=a.addShape("rect",{attrs:e.mix({x:s/2-l-2,y:"min"===t?0:-l,width:2*l+2,height:l},i)}),h=a.addShape("text",{attrs:e.mix(r,{x:s+this.get("textOffset"),y:"max"===t?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),g="vertical"===this.get("layout")?"ns-resize":"ew-resize";n.attr("cursor",g),h.attr("cursor",g),this.set(t+"ButtonElement",n),this.set(t+"TextElement",h)},g._addHorizontalTrigger=function(t,i,r){var a=this.get("slider").get(t+"HandleElement"),s=a.addShape("rect",{attrs:e.mix({x:"min"===t?-l:0,y:-l-this.get("height")/2,width:l,height:2*l},i)}),n=a.addShape("text",{attrs:e.mix(r,{x:"min"===t?-l-4:l+4,y:l/2+this.get("textOffset")+10,textAlign:"min"===t?"end":"start",textBaseline:"middle"})}),h="vertical"===this.get("layout")?"ns-resize":"ew-resize";s.attr("cursor",h),n.attr("cursor",h),this.set(t+"ButtonElement",s),this.set(t+"TextElement",n)},g._bindEvents=function(){var t=this;this.get("slidable")&&this.get("slider").on("sliderchange",function(e){var i=e.range,r=t.get("firstItem").value,a=t.get("lastItem").value,s=r+i[0]/100*(a-r),l=r+i[1]/100*(a-r);t._updateElement(s,l);var h=new n("itemfilter",e,!0,!0);h.range=[s,l],t.emit("itemfilter",h)});this.get("hoverable")&&(this.get("group").on("mousemove",e.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",e.wrapBehavior(this,"_onMouseLeave")))},g._updateElement=function(t,e){var i=this.get("minTextElement"),r=this.get("maxTextElement");e>1&&(t=parseInt(t,10),e=parseInt(e,10)),i.attr("text",this._formatItemValue(t)+""),r.attr("text",this._formatItemValue(e)+"")},g._onMouseLeave=function(){var t=this.get("group").findById("hoverPointer");t&&t.destroy();var e=this.get("group").findById("hoverText");e&&e.destroy(),this.get("canvas").draw()},g._onMouseMove=function(t){var e,i=this.get("height"),r=this.get("width"),a=this.get("items"),s=this.get("canvas").get("el").getBoundingClientRect(),l=this.get("group").getBBox();if("vertical"===this.get("layout")){var n=5;"color-legend"===this.get("type")&&(n=30);var h=this.get("titleGap"),g=this.get("titleShape");g&&(h+=g.getBBox().maxY-g.getBBox().minY);var o=t.clientY||t.event.clientY;o=o-s.y-this.get("group").attr("matrix")[7]+l.y-n+h,e=a[0].value+(1-o/i)*(a[a.length-1].value-a[0].value)}else{var d=t.clientX||t.event.clientX;d=d-s.x-this.get("group").attr("matrix")[6],e=a[0].value+d/r*(a[a.length-1].value-a[0].value)}e=e.toFixed(2),this.activate(e),this.emit("mousehover",{value:e})},g.activate=function(t){if(t){var i=this.get("group").findById("hoverPointer"),r=this.get("group").findById("hoverText"),a=this.get("items");if(!(t<a[0].value||t>a[a.length-1].value)){var s,l=this.get("height"),n=this.get("width"),h=this.get("titleShape"),g=this.get("titleGap"),o=[],d=(t-a[0].value)/(a[a.length-1].value-a[0].value);if("vertical"===this.get("layout")){var u=0,m=0;"color-legend"===this.get("type")&&(u=g,h&&(u+=h.getBBox().height)),this.get("slidable")&&("color-legend"===this.get("type")?u-=13:(u=g-15,h&&(u+=h.getBBox().height)),m+=10),o=[[m,(d=(1-d)*l)+u],[m-10,d+u-5],[m-10,d+u+5]],s=e.mix({},{x:n+this.get("textOffset")/2+m,y:d+u,text:this._formatItemValue(t)+""},this.get("textStyle"),{textAlign:"start"})}else{var v=0,x=0;"color-legend"===this.get("type")&&(v=g,h&&(v+=h.getBBox().height)),this.get("slidable")&&("color-legend"===this.get("type")?v-=7:(v=g,h||(v-=7)),x+=10),o=[[(d*=n)+x,v],[d+x-5,v-10],[d+x+5,v-10]],s=e.mix({},{x:d-5,y:l+this.get("textOffset")+v,text:this._formatItemValue(t)+""},this.get("textStyle"))}var f=e.mix(s,this.get("hoverTextStyle"));r?r.attr(f):(r=this.get("group").addShape("text",{attrs:f})).set("id","hoverText"),i?i.attr(e.mix({points:o},this.get("pointerStyle"))):(i=this.get("group").addShape("Polygon",{attrs:e.mix({points:o},this.get("pointerStyle"))})).set("id","hoverPointer"),this.get("canvas").draw()}}},g.deactivate=function(){var t=this.get("group").findById("hoverPointer");t&&t.destroy();var e=this.get("group").findById("hoverText");e&&e.destroy(),this.get("canvas").draw()},a}(i);module.exports=g;
},{"../util":"Zkxp","./base":"tb2c","./slider":"z7XT","../const":"SPpV"}],"EJRD":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("@antv/attr/lib"),r=e.ColorUtil,i=require("../util"),a=require("./continuous"),o=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var o=a.prototype;return o.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return i.mix({},t,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},o._setPercentage=function(){var t=this.get("items");if(!t[0].percentage){var e=t[0].value,r=t[t.length-1].value;i.each(t,function(t){t.percentage=(t.value-e)/(r-e)})}},o._renderSliderShape=function(){this._setPercentage();var t,e=this.get("slider").get("backgroundElement"),a=this.get("width"),o=this.get("height"),h=this.get("layout"),s=this.get("items"),g="";return"vertical"===h?(g+="l (90) ",i.each(s,function(e){t=r.toRGB(e.color),g+=1-e.percentage+":"+t+" "})):(g+="l (0) ",i.each(s,function(e){t=r.toRGB(e.color),g+=e.percentage+":"+t+" "})),this._addMiddleBar(e,"Rect",{x:0,y:0,width:a,height:o,fill:g,strokeOpacity:0})},o._renderUnslidable=function(){this._setPercentage();var t=this.get("titleShape"),e=this.get("titleGap");e=t?t.getBBox().height+e:e;var a,o=this.get("width"),h=this.get("height"),s=this.get("layout"),g=this.get("items"),l="",n=[],c=this.get("group").addGroup(),p=g.length;if("vertical"===s){l+="l (90) ";for(var u=0;u<p;u+=1){if(0!==u&&u!==p-1&&(n.push(["M",0,h-g[u].percentage*h]),n.push(["L",o,h-g[u].percentage*h])),a=r.toRGB(g[u].color),l+=1-g[u].percentage+":"+a+" ",this.get("isSegment")&&u>0){var f=r.toRGB(g[u-1].color);l+=1-g[u].percentage+":"+f+" "}c.addShape("text",{attrs:i.mix({},{x:o+this.get("textOffset")/2,y:h-g[u].percentage*h,text:this._formatItemValue(g[u].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{l+="l (0) ";for(var d=0;d<p;d+=1){if(0!==d&&d!==p-1&&(n.push(["M",g[d].percentage*o,0]),n.push(["L",g[d].percentage*o,h])),a=r.toRGB(g[d].color),this.get("isSegment")&&d>0){var v=r.toRGB(g[d-1].color);l+=g[d].percentage+":"+v+" "}l+=g[d].percentage+":"+a+" ",c.addShape("text",{attrs:i.mix({},{x:g[d].percentage*o,y:h+5+this.get("textOffset"),text:this._formatItemValue(g[d].value)+""},this.get("textStyle"))})}}c.addShape("rect",{attrs:{x:0,y:0,width:o,height:h,fill:l,strokeOpacity:0}}),c.addShape("path",{attrs:i.mix({path:n},this.get("lineStyle"))}),c.move(0,e)},a}(a);module.exports=o;
},{"@antv/attr/lib":"Mhpd","../util":"Zkxp","./continuous":"g3zL"}],"OGF8":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./continuous"),r=function(i){function r(){return i.apply(this,arguments)||this}t(r,i);var a=r.prototype;return a.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},a._renderSliderShape=function(){var t=this.get("slider").get("backgroundElement"),i=this.get("layout"),r=this.get("width"),a=this.get("height"),h=this.get("height")/2,l=this.get("frontMiddleBarStyle"),s="vertical"===i?[[0,0],[r,0],[r,a],[r-4,a]]:[[0,h+a/2],[0,h+a/2-4],[r,h-a/2],[r,h+a/2]];return this._addMiddleBar(t,"Polygon",e.mix({points:s},l))},a._renderUnslidable=function(){var t=this.get("layout"),i=this.get("width"),r=this.get("height"),a=this.get("frontMiddleBarStyle"),h="vertical"===t?[[0,0],[i,0],[i,r],[i-4,r]]:[[0,r],[0,r-4],[i,0],[i,r]];this.get("group").addGroup().addShape("Polygon",{attrs:e.mix({points:h},a)});var l=this._formatItemValue(this.get("firstItem").value),s=this._formatItemValue(this.get("lastItem").value);"vertical"===this.get("layout")?(this._addText(i+10,r-3,l),this._addText(i+10,3,s)):(this._addText(0,r,l),this._addText(i,r,s))},a._addText=function(t,i,r){var a=this.get("group").addGroup(),h=this.get("textStyle"),l=this.get("titleShape"),s=this.get("titleGap");l&&(s+=l.getBBox().height),"vertical"===this.get("layout")?a.addShape("text",{attrs:e.mix({x:t+this.get("textOffset"),y:i,text:0===r?"0":r},h)}):(i+=s+this.get("textOffset")-20,l||(i+=10),a.addShape("text",{attrs:e.mix({x:t,y:i,text:0===r?"0":r},h)}))},r}(i);module.exports=r;
},{"../util":"Zkxp","./continuous":"g3zL"}],"MXeA":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./continuous"),r=2,a=16,l=16,s=5,n=function(i){function n(){return i.apply(this,arguments)||this}t(n,i);var h=n.prototype;return h.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},h._renderSliderShape=function(){var t=s,i=this.get("slider").get("backgroundElement"),a=this.get("layout"),l="vertical"===a?r:this.get("width"),n="vertical"===a?this.get("height"):r,h=t,g=this.get("height")/2,d=this.get("frontMiddleBarStyle"),o="vertical"===a?[[0,0],[l,0],[l,n],[0,n]]:[[0,g+n],[0,g-n],[h+l-4,g-n],[h+l-4,g+n]];return this._addMiddleBar(i,"Polygon",e.mix({points:o},d))},h._addHorizontalTrigger=function(t,i,r,a){var l=this.get("slider").get(t+"HandleElement"),s=-this.get("height")/2,n=l.addShape("circle",{attrs:e.mix({x:0,y:s,r:a},i)}),h=l.addShape("text",{attrs:e.mix(r,{x:0,y:s+a+10,textAlign:"center",textBaseline:"middle"})}),g="vertical"===this.get("layout")?"ns-resize":"ew-resize";n.attr("cursor",g),h.attr("cursor",g),this.set(t+"ButtonElement",n),this.set(t+"TextElement",h)},h._addVerticalTrigger=function(t,i,r,a){var l=this.get("slider").get(t+"HandleElement"),s=l.addShape("circle",{attrs:e.mix({x:0,y:0,r:a},i)}),n=l.addShape("text",{attrs:e.mix(r,{x:a+10,y:0,textAlign:"start",textBaseline:"middle"})}),h="vertical"===this.get("layout")?"ns-resize":"ew-resize";s.attr("cursor",h),n.attr("cursor",h),this.set(t+"ButtonElement",s),this.set(t+"TextElement",n)},h._renderTrigger=function(){var t=this.get("firstItem"),i=this.get("lastItem"),r=this.get("layout"),a=this.get("textStyle"),n=this.get("triggerAttr"),h=e.mix({},n),g=e.mix({},n),d=s,o=l,c=e.mix({text:this._formatItemValue(t.value)+""},a),u=e.mix({text:this._formatItemValue(i.value)+""},a);"vertical"===r?(this._addVerticalTrigger("min",h,c,d),this._addVerticalTrigger("max",g,u,o)):(this._addHorizontalTrigger("min",h,c,d),this._addHorizontalTrigger("max",g,u,o))},h._bindEvents=function(){var t=this;this.get("slidable")&&this.get("slider").on("sliderchange",function(e){var i=e.range,r=t.get("firstItem").value,a=t.get("lastItem").value,n=r+i[0]/100*(a-r),h=r+i[1]/100*(a-r),g=s+i[0]/100*(l-s),d=s+i[1]/100*(l-s);t._updateElement(n,h,g,d);var o=new Event("itemfilter",e,!0,!0);o.range=[n,h],t.emit("itemfilter",o)})},h._updateElement=function(t,e,r,a){i.prototype._updateElement.call(this,t,e);var l=this.get("minTextElement"),s=this.get("maxTextElement"),n=this.get("minButtonElement"),h=this.get("maxButtonElement");if(n.attr("r",r),h.attr("r",a),"vertical"===this.get("layout"))l.attr("x",r+10),s.attr("x",a+10);else{var g=-this.get("height")/2;l.attr("y",g+r+10),s.attr("y",g+a+10)}},h._addCircle=function(t,i,r,a,l){var s=this.get("group").addGroup(),n=this.get("_unslidableCircleStyle"),h=this.get("textStyle"),g=this.get("titleShape"),d=this.get("titleGap");g&&(d+=g.getBBox().height),s.addShape("circle",{attrs:e.mix({x:t,y:i+d,r:0===r?1:r},n)}),"vertical"===this.get("layout")?s.addShape("text",{attrs:e.mix({x:l+20+this.get("textOffset"),y:i+d,text:0===a?"0":a},h)}):s.addShape("text",{attrs:e.mix({x:t,y:i+d+l+13+this.get("textOffset"),text:0===a?"0":a},h)})},h._renderUnslidable=function(){var t=this.get("firstItem").value,e=this.get("lastItem").value;if(t>e){var i=e;e=t,t=i}var r=this._formatItemValue(t),n=this._formatItemValue(e),h=t<s?s:t,g=e>l?l:e;h>g&&(h=s,g=l),"vertical"===this.get("layout")?(this._addCircle(g,g,h,r,2*g),this._addCircle(g,2*g+a+h,g,n,2*g)):(this._addCircle(g,g,h,r,2*g),this._addCircle(2*g+a+h,g,g,n,2*g))},h.activate=function(t){this.get("slidable")&&i.prototype.activate.call(this,t)},n}(i);module.exports=n;
},{"../util":"Zkxp","./continuous":"g3zL"}],"kGZC":[function(require,module,exports) {
module.exports={Category:require("./category"),CatHtml:require("./cat-html"),CatPageHtml:require("./cat-page-html"),Color:require("./color"),Size:require("./size"),CircleSize:require("./size-circle")};
},{"./category":"bIqD","./cat-html":"yEJv","./cat-page-html":"ulmV","./color":"EJRD","./size":"OGF8","./size-circle":"MXeA"}],"mnQJ":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../base"),n=require("../util"),i=function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var r=i.prototype;return r.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return n.mix({},t,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},r.isContentChange=function(t,e){var i=this.get("titleContent"),r=this.get("items"),o=!(t===i&&r.length===e.length);return o||n.each(e,function(t,e){var i=r[e];for(var s in t)if(t.hasOwnProperty(s)&&!n.isObject(t[s])&&t[s]!==i[s]){o=!0;break}if(o)return!1}),o},r.setContent=function(t,e){var n=(new Date).valueOf();return this.set("items",e),this.set("titleContent",t),this.set("timeStamp",n),this.render(),this},r.setPosition=function(t,e){this.set("x",t),this.set("y",e)},r.render=function(){},r.clear=function(){},r.show=function(){this.set("visible",!0)},r.hide=function(){this.set("visible",!1)},i}(e);module.exports=i;
},{"../base":"nk5T","../util":"Zkxp"}],"XJm3":[function(require,module,exports) {
var i,t=require("../const"),o=t.FONT_FAMILY,e="g2-tooltip",p="g2-tooltip-title",l="g2-tooltip-list",r="g2-tooltip-list-item",a="g2-tooltip-marker",n="g2-tooltip-value",s=((i={crosshairs:!1,offset:15})[""+e]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:o,lineHeight:"20px",padding:"10px 10px 6px 10px"},i[""+p]={marginBottom:"4px"},i[""+l]={margin:0,listStyleType:"none",padding:0},i[""+r]={marginBottom:"4px"},i[""+a]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},i[""+n]={display:"inline-block",float:"right",marginLeft:"30px"},i);module.exports=s;
},{"../const":"SPpV"}],"qyXX":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../component"),i=require("../util"),r=function(e){t(s,e);var r=s.prototype;function s(t){var i;return(i=e.call(this,t)||this)._init_(),i.render(),i}return r.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return i.mix({},t,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})},r._init_=function(){var t,e=this.get("plot");t="rect"===this.type?e.addGroup({zIndex:0}):e.addGroup(),this.set("container",t)},r._addLineShape=function(t,e){var i=this.get("container").addShape("line",{capture:!1,attrs:t});return this.set("crossLineShape"+e,i),i},r._renderHorizontalLine=function(t,e){var r=i.mix(this.get("lineStyle"),this.get("style")),s=i.mix({x1:e?e.bl.x:t.get("width"),y1:0,x2:e?e.br.x:0,y2:0},r);this._addLineShape(s,"X")},r._renderVerticalLine=function(t,e){var r=i.mix(this.get("lineStyle"),this.get("style")),s=i.mix({x1:0,y1:e?e.bl.y:t.get("height"),x2:0,y2:e?e.tl.y:0},r);this._addLineShape(s,"Y")},r._renderBackground=function(t,e){var r=i.mix(this.get("rectStyle"),this.get("style")),s=this.get("container"),n=i.mix({x:e?e.tl.x:0,y:e?e.tl.y:t.get("height"),width:e?e.br.x-e.bl.x:t.get("width"),height:e?Math.abs(e.tl.y-e.bl.y):t.get("height")},r),a=s.addShape("rect",{attrs:n,capture:!1});return this.set("crosshairsRectShape",a),a},r._updateRectShape=function(t){var e,r=this.get("crosshairsRectShape"),s=this.get("isTransposed"),n=t[0],a=t[t.length-1],h=s?"y":"x",o=s?"height":"width",c=n[h];if(t.length>1&&n[h]>a[h]&&(c=a[h]),this.get("width"))r.attr(h,c-this.get("crosshairs").width/2),r.attr(o,this.get("width"));else if(i.isArray(n.point[h])&&!n.size){var l=n.point[h][1]-n.point[h][0];r.attr(h,n.point[h][0]),r.attr(o,l)}else e=3*n.size/4,r.attr(h,c-e),1===t.length?r.attr(o,3*n.size/2):r.attr(o,Math.abs(a[h]-n[h])+2*e)},r.render=function(){var t=this.get("canvas"),e=this.get("plotRange"),i=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(t,e);break;case"y":this._renderVerticalLine(t,e);break;case"cross":this._renderHorizontalLine(t,e),this._renderVerticalLine(t,e);break;case"rect":this._renderBackground(t,e);break;default:i?this._renderHorizontalLine(t,e):this._renderVerticalLine(t,e)}},r.show=function(){var t=this.get("container");e.prototype.show.call(this),t.show()},r.hide=function(){var t=this.get("container");e.prototype.hide.call(this),t.hide()},r.clear=function(){var t=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),e.prototype.clear.call(this),t.clear()},r.destroy=function(){var t=this.get("container");e.prototype.destroy.call(this),t.remove()},r.setPosition=function(t,e,i){var r=this.get("crossLineShapeX"),s=this.get("crossLineShapeY"),n=this.get("crosshairsRectShape");s&&!s.get("destroyed")&&s.move(t,0),r&&!r.get("destroyed")&&r.move(0,e),n&&!n.get("destroyed")&&this._updateRectShape(i)},s}(e);module.exports=r;
},{"../component":"KZUR","../util":"Zkxp"}],"p5Xc":[function(require,module,exports) {
var t=20,o={_calcTooltipPosition:function(t,o,n,e,i,r){var a=0,c=0,s=20;if(r){var l=r.getBBox();a=l.width,c=l.height,t=l.x,o=l.y,s=5}switch(n){case"inside":t=t+a/2-e/2,o=o+c/2-i/2;break;case"top":t=t+a/2-e/2,o=o-i-s;break;case"left":t=t-e-s,o=o+c/2-i/2;break;case"right":t=t+a+s,o=o+c/2-i/2;break;case"bottom":default:t=t+a/2-e/2,o=o+c+s}return[t,o]},_constraintPositionInBoundary:function(o,n,e,i,r,a){return o+e+t>r?o=(o-=e+t)<0?0:o:o+t<0?o=t:o+=t,n+i+t>a?n=(n-=i+t)<0?0:n:n+t<0?n=t:n+=t,[o,n]},_constraintPositionInPlot:function(o,n,e,i,r,a){return o+e>r.tr.x&&(o-=a?e+1:e+2*t),o<r.tl.x&&(o=r.tl.x),a||(n+i>r.bl.y&&(n-=i+2*t),n<r.tl.y&&(n=r.tl.y)),[o,n]}};module.exports=o;
},{}],"HkGD":[function(require,module,exports) {
var r=require("../../util"),e={setMarkers:function(e,a){var o=this.get("markerGroup"),t=this.get("frontPlot");o?o.clear():(o=t.addGroup({zIndex:1,capture:!1}),this.set("markerGroup",o)),r.each(e,function(e){var t=r.mix({fill:e.color,symbol:"circle",shadowColor:e.color},a,{x:e.x,y:e.y});e.marker&&e.marker.activeSymbol&&(t.symbol=e.marker.activeSymbol),o.addShape("marker",{color:e.color,attrs:t})}),this.set("markerItems",e)},clearMarkers:function(){var r=this.get("markerGroup");r&&r.clear()}};module.exports=e;
},{"../../util":"Zkxp"}],"YeBQ":[function(require,module,exports) {
function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r=require("@antv/g/lib"),n=require("./base"),s=require("../util"),o=s.DomUtil,a=require("./theme"),l=require("./crosshair"),h=require("./mixin/position"),c=require("./mixin/marker-group"),g="g2-tooltip",p="g2-tooltip-title",u="g2-tooltip-list",d="g2-tooltip-marker",v="g2-tooltip-value",y="g2-tooltip-list-item",m=5,f=r.Marker;function b(t,e){return t.getElementsByClassName(e)[0]}function C(t,e){return Object.keys(t).forEach(function(i){e[i]&&(t[i]=s.mix(t[i],e[i]))}),t}var _=function(r){i(_,r);var n=_.prototype;function _(t){var i;i=r.call(this,t)||this,s.assign(e(i),h),s.assign(e(i),c);var n=a;i.style=C(n,t),i._init_(),i.get("items")&&i.render();var o=i.get("crosshairs");if(o){var g="rect"===o.type?i.get("backPlot"):i.get("frontPlot"),p=new l(s.mix({plot:g,plotRange:i.get("plotRange"),canvas:i.get("canvas")},i.get("crosshairs")));p.hide(),i.set("crosshairGroup",p)}return i}return n.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return s.mix({},t,{containerTpl:' <div class="'+g+'"> <div class="'+p+'"></div><ul class="'+u+'"></ul></div>',itemTpl:'<li data-index={index}>\n      <svg viewBox="0 0 '+m+" "+m+'" class="'+d+'"></svg>\n      {name}<span class="'+v+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})},n._init_=function(){var t,e=this.get("containerTpl"),i=this.get("canvas").get("el").parentNode;if(!this.get("htmlContent")){if(/^\#/.test(e)){var r=e.replace("#","");t=document.getElementById(r)}else t=o.createDom(e),o.modifyCSS(t,this.style[g]),i.appendChild(t),i.style.position="relative";this.set("container",t)}},n.render=function(){if(this.clear(),this.get("htmlContent")){var t=this.get("canvas").get("el").parentNode,e=this._getHtmlContent();t.appendChild(e),this.set("container",e)}else this._renderTpl()},n._renderTpl=function(){var t=this,e=t.get("showTitle"),i=t.get("titleContent"),r=t.get("container"),n=b(r,p),a=b(r,u),l=t.get("items");n&&e&&(o.modifyCSS(n,t.style[p]),n.innerHTML=i),a&&(o.modifyCSS(a,t.style[u]),s.each(l,function(e,i){a.appendChild(t._addItem(e,i))}))},n.clear=function(){var t=this.get("container");if(this.get("htmlContent"))t&&t.remove();else{var e=b(t,p),i=b(t,u);e&&(e.innerHTML=""),i&&(i.innerHTML="")}},n.show=function(){var t=this.get("container");if(t&&!this.destroyed){t.style.visibility="visible",t.style.display="block";var e=this.get("crosshairGroup");e&&e.show();var i=this.get("markerGroup");i&&i.show(),r.prototype.show.call(this),this.get("canvas").draw()}},n.hide=function(){var t=this.get("container");if(t&&!this.destroyed){t.style.visibility="hidden",t.style.display="none";var e=this.get("crosshairGroup");e&&e.hide();var i=this.get("markerGroup");i&&i.hide(),r.prototype.hide.call(this),this.get("canvas").draw()}},n.destroy=function(){var t=this.get("container"),e=this.get("containerTpl");t&&!/^\#/.test(e)&&t.parentNode.removeChild(t);var i=this.get("crosshairGroup");i&&i.destroy();var n=this.get("markerGroup");n&&n.remove(),r.prototype.destroy.call(this)},n._getMarkerSvg=function(t){var e,i=t.marker||{},r=i.activeSymbol||i.symbol;return s.isFunction(r)?e=r:s.isString(r)&&(e=f.Symbols[r]),'<path d="'+(e=s.isFunction(e)?e:f.Symbols.circle)(m/2,m/2,m/2).reduce(function(t,e){return""+t+e[0]+e.slice(1).join(",")},"")+'" fill="'+(i.fill||"none")+'" stroke="'+(i.stroke||"none")+'" />'},n._addItem=function(e,i){var r=this.get("itemTpl"),n=s.substitute(r,s.mix({index:i},e)),a=o.createDom(n);o.modifyCSS(a,this.style[y]);var l=b(a,d);if(l){o.modifyCSS(l,t({},this.style[d],{borderRadius:"unset"}));var h=this._getMarkerSvg(e);l.innerHTML=h}var c=b(a,v);return c&&o.modifyCSS(c,this.style[v]),a},n._getHtmlContent=function(){var t=this.get("htmlContent")(this.get("titleContent"),this.get("items"));return o.createDom(t)},n.setPosition=function(t,e,i){var n,a=this.get("container"),l=this.get("canvas").get("el"),h=o.getWidth(l),c=o.getHeight(l),g=a.clientWidth,p=a.clientHeight,u=t,d=e,v=this.get("prePosition")||{x:0,y:0};if(g||(a.style.display="block",g=a.clientWidth,p=a.clientHeight,a.style.display="none"),this.get("enterable")?(n=[t,e-=a.clientHeight/2],v&&t-v.x>0?t-=a.clientWidth+1:t+=1):this.get("position")?(t=(n=this._calcTooltipPosition(t,e,this.get("position"),g,p,i))[0],e=n[1]):(t=(n=this._constraintPositionInBoundary(t,e,g,p,h,c))[0],e=n[1]),this.get("inPlot")){var y=this.get("plotRange");t=(n=this._constraintPositionInPlot(t,e,g,p,y,this.get("enterable")))[0],e=n[1]}var m=this.get("markerItems");s.isEmpty(m)||(u=m[0].x,d=m[0].y),this.set("prePosition",n),this.get("follow")&&(a.style.left=t+"px",a.style.top=e+"px");var f=this.get("crosshairGroup");if(f){var b=this.get("items");f.setPosition(u,d,b)}r.prototype.setPosition.call(this,t,e)},_}(n);module.exports=_;
},{"@antv/g/lib":"nBh7","./base":"mnQJ","../util":"Zkxp","./theme":"XJm3","./crosshair":"qyXX","./mixin/position":"p5Xc","./mixin/marker-group":"HkGD"}],"TIjS":[function(require,module,exports) {
function t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=require("@antv/g/lib"),r=require("./crosshair"),a=require("./mixin/marker-group"),o=require("./mixin/position"),s=require("./base"),n=require("../util"),h=require("../const"),g=h.FONT_FAMILY,l=n.DomUtil,d=n.MatrixUtil,p=function(s){e(p,s);var h=p.prototype;function p(e){var i;i=s.call(this,e)||this,n.assign(t(i),o),n.assign(t(i),a);var h=i.get("crosshairs");if(h){var g="rect"===h.type?i.get("backPlot"):i.get("frontPlot"),l=new r(n.mix({plot:g,plotRange:i.get("plotRange"),canvas:i.get("canvas")},i.get("crosshairs")));l.hide(),i.set("crosshairGroup",l)}return i._init_(),i.get("items")&&i.render(),i}return h.getDefaultCfg=function(){var t=s.prototype.getDefaultCfg.call(this);return n.mix({},t,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:g,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:g,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:g,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})},h._init_=function(){var t=this.get("padding"),e=this.get("frontPlot"),i=e.addGroup({capture:!1});this.set("markerGroup",i);var r=e.addGroup();r.hide(),this.set("container",r);var a=r.addShape("rect",{attrs:n.mix({},this.get("boardStyle"))});this.set("board",a);var o=this.get("titleStyle");if(this.get("showTitle")){var s=r.addShape("text",{attrs:n.mix({x:t.left,y:t.top},o)});this.set("titleShape",s),s.name="tooltip-title"}var h=r.addGroup();h.move(t.left,t.top+o.lineHeight+o.padding),this.set("itemsGroup",h)},h.render=function(){var t=this;t.clear();var e=t.get("container"),i=t.get("board"),r=t.get("showTitle"),a=t.get("titleContent"),o=this.get("titleShape"),s=this.get("itemsGroup"),h=t.get("items"),g=t.get("padding");if(o&&r&&o.attr("text",a),s){var l=t.get("itemGap"),d=0;n.each(h,function(e){var i=t._addItem(e);i.move(0,d),s.add(i);var r=i.getBBox().height;d+=r+l})}var p=e.getBBox(),c=p.width+g.right,u=p.height+g.bottom;i.attr("width",c),i.attr("height",u),t._alignToRight(c)},h.clear=function(){var t=this.get("titleShape"),e=this.get("itemsGroup"),i=this.get("board");t.text="",e.clear(),i.attr("width",0),i.attr("height",0)},h.show=function(){this.get("container").show();var t=this.get("crosshairGroup");t&&t.show();var e=this.get("markerGroup");e&&e.show(),s.prototype.show.call(this),this.get("canvas").draw()},h.hide=function(){this.get("container").hide();var t=this.get("crosshairGroup");t&&t.hide();var e=this.get("markerGroup");e&&e.hide(),s.prototype.hide.call(this),this.get("canvas").draw()},h.destroy=function(){var t=this.get("container"),e=this.get("crosshairGroup");e&&e.destroy();var i=this.get("markerGroup");i&&i.remove(),s.prototype.destroy.call(this),t.remove()},h.setPosition=function(t,e,i){var r,a=this.get("container"),o=this.get("canvas").get("el"),h=l.getWidth(o),g=l.getHeight(o),p=a.getBBox(),c=p.width,u=p.height,m=t,v=e;if(this.get("position")){var f=p.width,x=p.height;t=(r=this._calcTooltipPosition(t,e,this.get("position"),f,x,i))[0],e=r[1]}else t=(r=this._constraintPositionInBoundary(t,e,c,u,h,g))[0],e=r[1];if(this.get("inPlot")){var y=this.get("plotRange");t=(r=this._constraintPositionInPlot(t,e,c,u,y,this.get("enterable")))[0],e=r[1]}var S=this.get("markerItems");n.isEmpty(S)||(m=S[0].x,v=S[0].y);var b=d.transform([1,0,0,0,1,0,0,0,1],[["t",t,e]]);a.stopAnimate(),a.animate({matrix:b},this.get("animationDuration"));var w=this.get("crosshairGroup");if(w){var G=this.get("items");w.setPosition(m,v,G)}s.prototype.setPosition.call(this,t,e)},h._addItem=function(t){var e=new i.Group,r=this.get("markerStyle").radius;if(t.marker){var a=n.mix({},t.marker,{x:t.marker.radius/2,y:0,symbol:t.marker.activeSymbol||t.marker.symbol});e.addShape("marker",{attrs:a}),r=t.marker.radius}var o=this.get("nameStyle");e.addShape("text",{attrs:n.mix({x:r+o.padding,y:0,text:t.name},o)});var s=this.get("valueStyle");return e.addShape("text",{attrs:n.mix({x:e.getBBox().width+s.padding,y:0,text:t.value},s)}),e},h._alignToRight=function(t){var e=this,i=this.get("itemsGroup").get("children");n.each(i,function(i){var r=i.get("children")[2],a=r.getBBox().width,o=t-a-2*e.get("padding").right;r.attr("x",o)})},p}(s);module.exports=p;
},{"@antv/g/lib":"nBh7","./crosshair":"qyXX","./mixin/marker-group":"HkGD","./mixin/position":"p5Xc","./base":"mnQJ","../util":"Zkxp","../const":"SPpV"}],"ynwE":[function(require,module,exports) {
function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var e=require("../util"),i=require("./canvas"),a=require("../const"),r=a.FONT_FAMILY,h=e.DomUtil,g=e.MatrixUtil,n=function(i){function a(){return i.apply(this,arguments)||this}t(a,i);var n=a.prototype;return n.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return e.mix({},t,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:r,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},n._init_=function(){var t=this.get("padding"),i=this.get("frontPlot").addGroup();this.set("container",i);var a=i.addShape("rect",{attrs:e.mix({},this.get("boardStyle"))});this.set("board",a);var r=i.addShape("path",{attrs:{fill:this.get("boardStyle").fill}});this.set("triangleShape",r);var h=i.addGroup();h.move(t.left,t.top);var g=h.addShape("text",{attrs:e.mix({},this.get("valueStyle"))});this.set("valueShape",g)},n.render=function(){this.clear();var t=this.get("board"),e=this.get("valueShape"),i=this.get("padding"),a=this.get("items")[0];e&&e.attr("text",a.value);var r=e?e.getBBox():{width:80,height:30},h=i.left+r.width+i.right,g=i.top+r.height+i.bottom;t.attr("width",h),t.attr("height",g),this._centerTriangleShape()},n.clear=function(){this.get("valueShape").attr("text","")},n.setPosition=function(t,e,i){var a=this.get("container"),r=this.get("plotRange"),n=a.getBBox(),l=n.width,o=n.height;(t-=l/2,!i||"point"!==i.name&&"interval"!==i.name)||(e=i.getBBox().y);if(e-=o,this.get("inPlot"))t<r.tl.x?(t=r.tl.x,this._leftTriangleShape()):t+l/2>r.tr.x?(t=r.tr.x-l,this._rightTriangleShape()):this._centerTriangleShape(),e<r.tl.y?e=r.tl.y:e+o>r.bl.y&&(e=r.bl.y-o);else{var s=this.get("canvas").get("el"),p=h.getWidth(s),d=h.getHeight(s);t<0?(t=0,this._leftTriangleShape()):t+l/2>p?(t=p-l,this._rightTriangleShape()):this._centerTriangleShape(),e<0?e=0:e+o>d&&(e=d-o)}var f=g.transform([1,0,0,0,1,0,0,0,1],[["t",t,e]]);a.stopAnimate(),a.animate({matrix:f},this.get("animationDuration"))},n._centerTriangleShape=function(){var t=this.get("triangleShape"),e=this.get("triangleWidth"),i=this.get("triangleHeight"),a=this.get("board").getBBox(),r=a.width,h=a.height,g=[["M",0,0],["L",e,0],["L",e/2,i],["L",0,0],["Z"]];t.attr("path",g),t.move(r/2-e/2,h-1)},n._leftTriangleShape=function(){var t=this.get("triangleShape"),e=this.get("triangleWidth"),i=this.get("triangleHeight"),a=this.get("board").getBBox().height,r=[["M",0,0],["L",e,0],["L",0,i+3],["L",0,0],["Z"]];t.attr("path",r),t.move(0,a-3)},n._rightTriangleShape=function(){var t=this.get("triangleShape"),e=this.get("triangleWidth"),i=this.get("triangleHeight"),a=this.get("board").getBBox(),r=a.width,h=a.height,g=[["M",0,0],["L",e,0],["L",e,i+4],["L",0,0],["Z"]];t.attr("path",g),t.move(r-e-1,h-4)},a}(i);module.exports=n;
},{"../util":"Zkxp","./canvas":"TIjS","../const":"SPpV"}],"dkYU":[function(require,module,exports) {
var e=require("./base");e.Html=require("./html"),e.Canvas=require("./canvas"),e.Mini=require("./mini"),module.exports=e;
},{"./base":"mnQJ","./html":"YeBQ","./canvas":"TIjS","./mini":"ynwE"}],"TP3c":[function(require,module,exports) {
module.exports={Axis:require("./axis/"),Component:require("./base"),Guide:require("./guide/"),Label:require("./label/"),Legend:require("./legend/"),Tooltip:require("./tooltip/")};
},{"./axis/":"rkK3","./base":"nk5T","./guide/":"IYWe","./label/":"ZsTn","./legend/":"kGZC","./tooltip/":"dkYU"}],"zENB":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/toConsumableArray")),l=require("../../renderer"),i=l.Group,n=require("@antv/component/lib"),s=n.Label,a=require("../../global"),r=require("../../util"),o=["line","point","path"],f="_origin";function u(e){var t=0;return r.each(e,function(e){t+=e}),t/e.length}function g(e,t){if(r.isNumber(e)&&r.isNumber(t))return[e,t];for(var l,i,n=-1,s=0,a=0,o=e.length-1,f=0;++n<e.length;)l=o,o=n,f+=i=e[l]*t[o]-e[o]*t[l],s+=(e[l]+e[o])*i,a+=(t[l]+t[o])*i;return[s/(f*=3),a/f]}var c=function e(t){e.superclass.constructor.call(this,t)};r.extend(c,i),r.augment(c,{getDefaultCfg:function(){return{label:a.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){c.superclass._renderUI.call(this),this.initLabelsCfg();var e=this.addGroup(),t=this.addGroup({elCls:"x-line-group"}),l=this.get("labelRenderer");this.set("labelsGroup",e),this.set("lineGroup",t),this.get("labelRenderer").set("group",e),l.set("group",e),l.set("lineGroup",t)},initLabelsCfg:function(){var e=new s,t=this.getDefaultLabelCfg(),l=this.get("labelCfg");r.deepMix(t,l.globalCfg||l.cfg),e.set("config",!1),t.labelLine&&e.set("labelLine",t.labelLine),e.set("coord",this.get("coord")),this.set("labelRenderer",e),this.set("label",t)},getDefaultLabelCfg:function(){var e=this.get("labelCfg").cfg||this.get("labelCfg").globalCfg,t=this.get("geomType"),l=this.get("viewTheme")||a;return"polygon"===t||e&&e.offset<0&&-1===r.indexOf(o,t)?r.deepMix({},this.get("label"),l.innerLabels,e):r.deepMix({},this.get("label"),l.label,e)},getLabelsItems:function(e,t){var l=this,i=[],n=l.get("geom"),s=l.get("coord");l._getLabelCfgs(e,t);var a=l.get("labelItemCfgs");return r.each(e,function(e,t){var o=e[f],u=a[t];if(u){r.isArray(u.text)||(u.text=[u.text]);var g=u.text.length;r.each(u.text,function(t,a){if(r.isNil(t)||""===t)i.push(null);else{var f=l.getLabelPoint(u,e,a);(f=r.mix({},u,f)).textAlign||(f.textAlign=l.getLabelAlign(f,a,g)),n&&(f._id=n._getShapeId(o)+"-glabel-"+a+"-"+f.text),f.coord=s,i.push(f)}})}else i.push(null)}),i},adjustItems:function(e){return r.each(e,function(e){e&&(e.offsetX&&(e.x+=e.offsetX),e.offsetY&&(e.y+=e.offsetY))}),e},drawLines:function(e){var t=this;r.each(e,function(e){e&&e.offset>0&&t.lineToLabel(e)})},lineToLabel:function(){},getLabelPoint:function(e,t,l){var i=this.get("coord"),n=e.text.length;function s(t,l){return r.isArray(t)&&(t=1===e.text.length?t.length<=2?t[t.length-1]:u(t):t[l]),t}var a={text:e.text[l]};if(t&&"polygon"===this.get("geomType")){var o=g(t.x,t.y);a.x=o[0],a.y=o[1]}else a.x=s(t.x,l),a.y=s(t.y,l);if(t&&t.nextPoints&&("funnel"===t.shape||"pyramid"===t.shape)){var f=-1/0;t.nextPoints.forEach(function(e){(e=i.convert(e)).x>f&&(f=e.x)}),a.x=(a.x+f)/2}"pyramid"===t.shape&&!t.nextPoints&&t.points&&t.points.forEach(function(e){e=i.convert(e),(r.isArray(e.x)&&!t.x.includes(e.x)||r.isNumber(e.x)&&t.x!==e.x)&&(a.x=(a.x+e.x)/2)}),e.position&&this.setLabelPosition(a,t,l,e.position);var c=this.getLabelOffset(e,l,n);return e.offsetX&&(c.x+=e.offsetX),e.offsetY&&(c.y+=e.offsetY),this.transLabelPoint(a),a.start={x:a.x,y:a.y},a.x+=c.x,a.y+=c.y,a.color=t.color,a},setLabelPosition:function(){},transLabelPoint:function(e){var t=this.get("coord").applyMatrix(e.x,e.y,1);e.x=t[0],e.y=t[1]},getOffsetVector:function(e){var t=e.offset||0,l=this.get("coord");return l.isTransposed?l.applyMatrix(t,0):l.applyMatrix(0,t)},getDefaultOffset:function(e){var t=0,l=this.get("coord"),i=this.getOffsetVector(e);t=l.isTransposed?i[0]:i[1];var n=this.get("yScale");n&&e.point&&(e.point[n.field]<0&&(t*=-1));return t},getLabelOffset:function(e,t,l){var i=this.getDefaultOffset(e),n=this.get("coord").isTransposed,s=n?"x":"y",a=n?1:-1,r={x:0,y:0};return r[s]=t>0||1===l?i*a:i*a*-1,r},getLabelAlign:function(e,t,l){var i="center";if(this.get("coord").isTransposed){var n=this.getDefaultOffset(e);i=n<0?"right":0===n?"center":"left",l>1&&0===t&&("right"===i?i="left":"left"===i&&(i="right"))}return i},_getLabelValue:function(e,t){r.isArray(t)||(t=[t]);var l=[];return r.each(t,function(t){var i=e[t.field];if(r.isArray(i)){var n=[];r.each(i,function(e){n.push(t.getText(e))}),i=n}else i=t.getText(i);(r.isNil(i)||""===i)&&l.push(null),l.push(i)}),l},_getLabelCfgs:function(e){var l=this,i=this.get("labelCfg"),n=i.scales,s=this.get("label"),o=l.get("viewTheme")||a,u=[];i.globalCfg&&i.globalCfg.type&&l.set("type",i.globalCfg.type),r.each(e,function(e,a){var g={},c=e[f],h=l._getLabelValue(c,n);if(i.callback){var b=n.map(function(e){return c[e.field]});g=i.callback.apply(null,[].concat((0,t.default)(b),[e,a]))}if(g||0===g){if(r.isString(g)||r.isNumber(g)?g={text:g}:(g.text=g.content||h[0],delete g.content),g=r.mix({},s,i.globalCfg||{},g),e.point=c,g.point=c,g.htmlTemplate&&(g.useHtml=!0,g.text=g.htmlTemplate.call(null,g.text,e,a),delete g.htmlTemplate),g.formatter&&(g.text=g.formatter.call(null,g.text,e,a),delete g.formatter),g.label){var x=g.label;delete g.label,g=r.mix(g,x)}if(g.textStyle){delete g.textStyle.offset;var p=g.textStyle;r.isFunction(p)&&(g.textStyle=p.call(null,g.text,e,a))}g.labelLine&&(g.labelLine=r.mix({},s.labelLine,g.labelLine)),g.textStyle=r.mix({},s.textStyle,o.label.textStyle,g.textStyle),delete g.items,u.push(g)}else u.push(null)}),this.set("labelItemCfgs",u)},showLabels:function(e,t){var l=this.get("labelRenderer"),i=this.getLabelsItems(e,t);t=[].concat(t);var n=this.get("type");i=this.adjustItems(i,t),this.drawLines(i),l.set("items",i.filter(function(e,l){return!!e||(t.splice(l,1),!1)})),n&&(l.set("shapes",t),l.set("type",n),l.set("points",e)),l.set("canvas",this.get("canvas")),l.draw()},destroy:function(){this.get("labelRenderer").destroy(),c.superclass.destroy.call(this)}}),module.exports=c;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/toConsumableArray":"Fhqp","../../renderer":"MVGo","@antv/component/lib":"TP3c","../../global":"xYEG","../../util":"e9Mz"}],"JZYd":[function(require,module,exports) {
"use strict";var r=require("../../util").MatrixUtil,a=r.vec2;function e(r,e,i,t){var n,s,u,l,h=[],v=!!t;if(v){u=[1/0,1/0],l=[-1/0,-1/0];for(var c=0,m=r.length;c<m;c++){var f=r[c];u=a.min([],u,f),l=a.max([],l,f)}u=a.min([],u,t[0]),l=a.max([],l,t[1])}for(var o=0,p=r.length;o<p;o++){var d=r[o];if(i)n=r[o?o-1:p-1],s=r[(o+1)%p];else{if(0===o||o===p-1){h.push(d);continue}n=r[o-1],s=r[o+1]}var x=[];x=a.sub(x,s,n),x=a.scale(x,x,e);var g=a.distance(d,n),b=a.distance(d,s),C=g+b;0!==C&&(g/=C,b/=C);var q=a.scale([],x,-g),z=a.scale([],x,b),M=a.add([],d,q),R=a.add([],d,z);v&&(M=a.max([],M,u),M=a.min([],M,l),R=a.max([],R,u),R=a.min([],R,l)),h.push(M),h.push(R)}return i&&h.push(h.shift()),h}function i(r,a,i){for(var t=!!a,n=[],s=0,u=r.length;s<u;s+=2)n.push([r[s],r[s+1]]);for(var l,h,v,c=e(n,.4,t,i),m=n.length,f=[],o=0;o<m-1;o++)l=c[2*o],h=c[2*o+1],v=n[o+1],f.push(["C",l[0],l[1],h[0],h[1],v[0],v[1]]);return t&&(l=c[m],h=c[m+1],v=n[0],f.push(["C",l[0],l[1],h[0],h[1],v[0],v[1]])),f}module.exports={catmullRom2bezier:i};
},{"../../util":"e9Mz"}],"ER9l":[function(require,module,exports) {
"use strict";var e=require("../../util"),t=require("./spline");function n(e,t){if(!e.length)return[];for(var n=[],r=0,a=e.length;r<a;r++){var u=e[r];0===r?n.push(["M",u.x,u.y]):n.push(["L",u.x,u.y])}return t&&n.push(["Z"]),n}function r(e,t){var n=e.getCenter();return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function a(e,t){for(var n=e.length,r=[e[0]],a=1;a<n;a+=2){var u=t.convertPoint({x:e[a],y:e[a+1]});r.push(u.x,u.y)}return r}function u(e,t,n){var a=n.isTransposed,u=n.startAngle,o=n.endAngle,s={x:e[1],y:e[2]},c={x:t[1],y:t[2]},i=[],h=a?"y":"x",l=Math.abs(c[h]-s[h])*(o-u),f=c[h]>=s[h]?1:0,x=l>Math.PI?1:0,p=n.convertPoint(c),y=r(n,p);if(y>=.5)if(l===2*Math.PI){var v={x:(c.x+s.x)/2,y:(c.y+s.y)/2},g=n.convertPoint(v);i.push(["A",y,y,0,x,f,g.x,g.y]),i.push(["A",y,y,0,x,f,p.x,p.y])}else i.push(["A",y,y,0,x,f,p.x,p.y]);return i}function o(t){e.each(t,function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],a=t[n+1];a&&"a"===a[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&a&&"l"===a[0].toLowerCase()&&(a[0]="M")}})}var s={getLinePath:function(e,t){return n(e,t)},getSplinePath:function(n,r,a){var u=[],o=n[0],c=null;if(n.length<=2)return s.getLinePath(n,r);e.each(n,function(e){c&&c.x===e.x&&c.y===e.y||(u.push(e.x),u.push(e.y),c=e)}),a=a||[[0,0],[1,1]];var i=t.catmullRom2bezier(u,r,a);return i.unshift(["M",o.x,o.y]),i},getPointRadius:function(e,t){return r(e,t)},getPointAngle:function(e,t){var n=e.getCenter();return Math.atan2(t.y-n.y,t.x-n.x)},convertNormalPath:function(t,n){var r=[];return e.each(n,function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":r.push(a(e,t));break;case"z":default:r.push(e)}}),r},convertPolarPath:function(t,n){var r,s,c,i=[];return e.each(n,function(e,o){switch(e[0].toLowerCase()){case"m":case"c":case"q":i.push(a(e,t));break;case"l":r=n[o-1],s=e,c=t.isTransposed,(c?r[r.length-2]===s[1]:r[r.length-1]===s[2])?i=i.concat(u(r,s,t)):i.push(a(e,t));break;case"z":default:i.push(e)}}),o(i),i}};module.exports=s;
},{"../../util":"e9Mz","./spline":"JZYd"}],"rhFN":[function(require,module,exports) {
"use strict";var t=require("./geom-labels"),e=require("../util/path"),i=require("../../util"),r=function t(e){t.superclass.constructor.call(this,e)};i.extend(r,t),i.augment(r,{getPointRauis:function(t,i){return e.getPointRadius(t,i)},getCirclePoint:function(t,e,i){var r=this.get("coord"),n=r.getCenter(),a=this._isEmitLabels(),s=this.getPointRauis(r,i);if(0===s)return null;r.isTransposed&&s>e&&!a?t+=2*Math.asin(e/(2*s)):s+=e;return{x:n.x+s*Math.cos(t),y:n.y+s*Math.sin(t),angle:t,r:s}},getArcPoint:function(t,e){var r;return e=e||0,r=i.isArray(t.x)||i.isArray(t.y)?{x:i.isArray(t.x)?t.x[e]:t.x,y:i.isArray(t.y)?t.y[e]:t.y}:t,this.transLabelPoint(r),r},getPointAngle:function(t){var i=this.get("coord");return e.getPointAngle(i,t)},getMiddlePoint:function(t){var e=this.get("coord"),r=t.length,n={x:0,y:0};return i.each(t,function(t){n.x+=t.x,n.y+=t.y}),n.x/=r,n.y/=r,n=e.convert(n)},_isToMiddle:function(t){return t.x.length>2},getLabelPoint:function(t,e,i){var r,n=t.text[i],a=1;this._isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.text.length&&0===i?i=1:0===i&&(a=-1),r=this.getArcPoint(e,i));var s=this.getDefaultOffset(t);s*=a;var o=this.getPointAngle(r),l=this.getCirclePoint(o,s,r);if(l?(l.text=n,l.angle=o,l.color=e.color):l={text:""},t.autoRotate||void 0===t.autoRotate){var g=l.textStyle?l.textStyle.rotate:null;g||(g=l.rotate||this.getLabelRotate(o,s,e)),l.rotate=g}return l.start={x:r.x,y:r.y},l},_isEmitLabels:function(){return this.get("label").labelEmit},getLabelRotate:function(t){var e;return e=180*t/Math.PI,e+=90,this._isEmitLabels()&&(e-=90),e&&(e>90?e-=180:e<-90&&(e+=180)),e/180*Math.PI},getLabelAlign:function(t){var e,i=this.get("coord");if(this._isEmitLabels())e=t.angle<=Math.PI/2&&t.angle>-Math.PI/2?"left":"right";else if(i.isTransposed){var r=i.getCenter(),n=this.getDefaultOffset(t);e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?n>0?"left":"right":n>0?"right":"left"}else e="center";return e}}),module.exports=r;
},{"./geom-labels":"zENB","../util/path":"ER9l","../../util":"e9Mz"}],"iUM0":[function(require,module,exports) {
"use strict";var t=require("../../util"),e=require("./polar-labels"),r=require("../util/path"),n=require("../../global"),a=5;function i(t,e,r){return{x:t.x+r*Math.cos(e),y:t.y+r*Math.sin(e)}}function s(t,e,r,n,a){var i,s=!0,o=r.start,l=r.end,u=Math.min(o.y,l.y),g=Math.abs(o.y-l.y),c=0,f=Number.MIN_VALUE,h=t.map(function(t){return t.y>c&&(c=t.y),t.y<f&&(f=t.y),{size:e,targets:[t.y-u]}});for(f-=u,c-u>g&&(g=c-u);s;)for(h.forEach(function(t){var e=(Math.min.apply(f,t.targets)+Math.max.apply(f,t.targets))/2;t.pos=Math.min(Math.max(f,e-t.size/2),g-t.size)}),s=!1,i=h.length;i--;)if(i>0){var y=h[i-1],p=h[i];y.pos+y.size>p.pos&&(y.size+=p.size,y.targets=y.targets.concat(p.targets),y.pos+y.size>g&&(y.pos=g-y.size),h.splice(i,1),s=!0)}i=0,h.forEach(function(r){var n=u+e/2;r.targets.forEach(function(){t[i].y=r.pos+n,n+=e,i++})}),t.forEach(function(t){var e=t.r*t.r,r=Math.pow(Math.abs(t.y-n.y),2);if(e<r)t.x=n.x;else{var i=Math.sqrt(e-r);t.x=a?n.x+i:n.x-i}})}var o=function t(e){t.superclass.constructor.call(this,e)};t.extend(o,e),t.augment(o,{getDefaultCfg:function(){return{label:n.thetaLabels}},getDefaultOffset:function(t){return t.offset||0},adjustItems:function(t){var e=t[0]?t[0].offset:0;return e>0&&(t=this._distribute(t,e)),o.superclass.adjustItems.call(this,t)},_distribute:function(t,e){var r=this.get("coord"),n=r.getRadius(),a=this.get("label").labelHeight,i=r.getCenter(),o=2*(n+e)+2*a,l={start:r.start,end:r.end},u=this.get("geom");if(u){var g=u.get("view");l=g.getViewRegion()}var c=[[],[]];return t.forEach(function(t){t&&("right"===t.textAlign?c[0].push(t):c[1].push(t))}),c.forEach(function(t,e){var r=parseInt(o/a,10);t.length>r&&(t.sort(function(t,e){return e["..percent"]-t["..percent"]}),t.splice(r,t.length-r)),t.sort(function(t,e){return t.y-e.y}),s(t,a,l,i,e)}),c[0].concat(c[1])},lineToLabel:function(t){var e=this.get("coord"),r=e.getRadius(),n=t.offset,s=t.orignAngle||t.angle,o=e.getCenter(),l=i(o,s,r+a/2),u=i(o,s,r+n/2);t.labelLine||(t.labelLine=this.get("label").labelLine||{}),t.labelLine.path=["M"+l.x,l.y+" Q"+u.x,u.y+" "+t.x,t.y].join(",")},getLabelRotate:function(t,e){var r;return e<0&&((r=180*t/Math.PI)>90&&(r-=180),r<-90&&(r+=180)),r/180*Math.PI},getLabelAlign:function(t){var e,r=this.get("coord").getCenter();return e=t.angle<=Math.PI/2&&t.x>=r.x?"left":"right",this.getDefaultOffset(t)<=0&&(e="right"===e?"left":"right"),e},getArcPoint:function(t){return t},getPointAngle:function(e){var n=this.get("coord"),a={x:t.isArray(e.x)?e.x[0]:e.x,y:e.y[0]};this.transLabelPoint(a);var i,s={x:t.isArray(e.x)?e.x[1]:e.x,y:e.y[1]};this.transLabelPoint(s);var o=r.getPointAngle(n,a);if(e.points&&e.points[0].y===e.points[1].y)i=o;else{var l=r.getPointAngle(n,s);o>=l&&(l+=2*Math.PI),i=o+(l-o)/2}return i},getCirclePoint:function(t,e){var r=this.get("coord"),n=r.getCenter(),a=r.getRadius()+e,s=i(n,t,a);return s.angle=t,s.r=a,s}}),module.exports=o;
},{"../../util":"e9Mz","./polar-labels":"rhFN","../util/path":"ER9l","../../global":"xYEG"}],"ZQq2":[function(require,module,exports) {
"use strict";var t=require("../../util"),e=require("./geom-labels"),i=function t(e){t.superclass.constructor.call(this,e)};t.extend(i,e),t.augment(i,{setLabelPosition:function(e,i,n,l){t.isFunction(l)&&(l=l(e.text,i._origin,n));var x=this.get("coord"),r=x.isTransposed,s=x.convertPoint(i.points[0]),g=x.convertPoint(i.points[2]),o=(s.x-g.x)/2*(r?-1:1),c=(s.y-g.y)/2*(r?-1:1);switch(l){case"right":r?(e.x-=o,e.y+=c,e.textAlign=e.textAlign||"center"):(e.x-=o,e.y+=c,e.textAlign=e.textAlign||"left");break;case"left":r?(e.x-=o,e.y-=c,e.textAlign=e.textAlign||"center"):(e.x+=o,e.y+=c,e.textAlign=e.textAlign||"right");break;case"bottom":r?(e.x-=2*o,e.textAlign=e.textAlign||"left"):(e.y+=2*c,e.textAlign=e.textAlign||"center");break;case"middle":r?e.x-=o:e.y+=c,e.textAlign=e.textAlign||"center";break;case"top":e.textAlign=r?e.textAlign||"left":e.textAlign||"center"}}}),module.exports=i;
},{"../../util":"e9Mz","./geom-labels":"zENB"}],"YTIA":[function(require,module,exports) {
"use strict";var e=require("./geom-labels"),r=require("./polar-labels"),l=require("./pie-labels"),a=require("./interval-labels"),s={getLabelsClass:function(s,t){var i=e;return"polar"===s?i=r:"theta"===s?i=l:"interval"!==t&&"polygon"!==t||(i=a),i}};module.exports=s;
},{"./geom-labels":"zENB","./polar-labels":"rhFN","./pie-labels":"iUM0","./interval-labels":"ZQq2"}],"oHc5":[function(require,module,exports) {
"use strict";var t=require("../../util"),r=require("../util/path"),e=t.PathUtil,n={},i={_coord:null,draw:function(t,r){return this.drawShape?this.drawShape(t,r):null},setCoord:function(t){this._coord=t},parsePath:function(t,n){var i=this._coord;return t=e.parsePathString(t),t=i.isPolar&&!1!==n?r.convertPolarPath(i,t):r.convertNormalPath(i,t)},parsePoint:function(t){return this._coord.convertPoint(t)},parsePoints:function(r){var e=this._coord,n=[];return t.each(r,function(t){n.push(e.convertPoint(t))}),n}},a={defaultShapeType:null,setCoord:function(t){this._coord=t},getShape:function(r){t.isArray(r)&&(r=r[0]);var e=this[r]||this[this.defaultShapeType];return e._coord=this._coord,e},getShapePoints:function(t,r){var e=this.getShape(t);return(e.getPoints||e.getShapePoints||this.getDefaultPoints)(r)},getDefaultPoints:function(){return[]},getMarkerCfg:function(t,r){var e=this.getShape(t);if(!e.getMarkerCfg){var n=this.defaultShapeType;e=this.getShape(n)}return e.getMarkerCfg(r)},getSelectedCfg:function(){return{}},drawShape:function(t,r,e){var n=this.getShape(t).draw(r,e);return n&&(n.setSilent("origin",r.origin),n._id=r.yIndex?r._id+r.yIndex:r._id,n.name=this.name),n}};n.registerFactory=function(r,e){var i=t.upperFirst(r),o=t.assign({},a,e);return n[i]=o,o.name=r,o},n.registerShape=function(r,e,a){var o=t.upperFirst(r),s=n[o],u=t.assign({},i,a);return s[e]=u,u},n.getShapeFactory=function(r){return r=r||"point",this[t.upperFirst(r)]},module.exports=n;
},{"../../util":"e9Mz","../util/path":"ER9l"}],"QQY9":[function(require,module,exports) {
"use strict";var e=require("../../util"),t=require("../../global"),i=t.defaultColor,r="_origin";function a(e){return e.alias||e.field}var n={_getIntervalSize:function(t){var i=null,a=this.get("type"),n=this.get("coord");if(n.isRect&&("interval"===a||"schema"===a)){i=this.getSize(t[r]);var l=n.isTransposed?"y":"x";if(e.isArray(t[l]))i=i<Math.abs(t[l][1]-t[l][0])?null:i}return i},_snapEqual:function(t,i,r){return t=r.translate(t),i=r.translate(i),r.isCategory?t===i:e.snapEqual(t,i)},_getScaleValueByPoint:function(e){var t=0,i=this.get("coord"),r=this.getXScale(),a=i.invert(e).x;return this.isInCircle()&&a>(1+r.rangeMax())/2&&(a=r.rangeMin()),t=r.invert(a),r.isCategory&&(t=r.translate(t)),t},_getOriginByPoint:function(e){var t=this.getXScale(),i=this.getYScale(),r=t.field,a=i.field,n=this.get("coord").invert(e),l=t.invert(n.x),s=i.invert(n.y),o={};return o[r]=l,o[a]=s,o},_getScale:function(t){var i=this.get("scales"),r=null;return e.each(i,function(e){if(e.field===t)return r=e,!1}),r},_getTipValueScale:function(){var t,i=this.getAttrsForLegend();e.each(i,function(e){var i=e.getScale(e.type);if(i.isLinear)return t=i,!1});var r=this.getXScale(),a=this.getYScale();return!t&&a&&"..y"===a.field?r:t||a||r},_getTipTitleScale:function(t){if(t)return this._getScale(t);var i,r=this.getAttr("position").getFields();return e.each(r,function(e){if(!e.includes(".."))return i=e,!1}),this._getScale(i)},_filterValue:function(t,i){var a=this.get("coord"),n=this.getYScale(),l=n.field,s=a.invert(i).y;s=n.invert(s);var o=t[t.length-1];return e.each(t,function(e){var t=e[r];if(t[l][0]<=s&&t[l][1]>=s)return o=e,!1}),o},getXDistance:function(){var t=this.get("xDistance");if(!t){var i=this.getXScale();if(i.isCategory)t=1;else{var r=i.values,a=i.translate(r[0]),n=a;e.each(r,function(e){(e=i.translate(e))<a&&(a=e),e>n&&(n=e)});var l=r.length;t=(n-a)/(l-1)}this.set("xDistance",t)}return t},findPoint:function(t,i){var a=this,n=a.get("type"),l=a.getXScale(),s=a.getYScale(),o=l.field,u=s.field,c=null;if(e.indexOf(["heatmap","point"],n)>-1){var g=a.get("coord").invert(t),f=l.invert(g.x),h=s.invert(g.y),v=1/0;return e.each(i,function(e){var t=Math.pow(e[r][o]-f,2)+Math.pow(e[r][u]-h,2);t<v&&(v=t,c=e)}),c}var p=i[0],d=i[i.length-1];if(!p)return c;var y=a._getScaleValueByPoint(t),S=p[r][o],T=p[r][u],_=d[r][o],x=s.isLinear&&e.isArray(T);if(e.isArray(S))e.each(i,function(t){var i=t[r];if(l.translate(i[o][0])<=y&&l.translate(i[o][1])>=y){if(!x)return c=t,!1;e.isArray(c)||(c=[]),c.push(t)}}),e.isArray(c)&&(c=this._filterValue(c,t));else{var m;if(l.isLinear||"timeCat"===l.type){if((y>l.translate(_)||y<l.translate(S))&&(y>l.max||y<l.min))return null;for(var A,V=0,M=i.length-1;V<=M;){A=Math.floor((V+M)/2);var X=i[A][r][o];if(a._snapEqual(X,y,l))return i[A];l.translate(X)<=l.translate(y)?(V=A+1,d=i[A],m=i[A+1]):(0===M&&(d=i[0]),M=A-1)}}else e.each(i,function(t,n){var s=t[r];if(a._snapEqual(s[o],y,l)){if(!x)return c=t,!1;e.isArray(c)||(c=[]),c.push(t)}else l.translate(s[o])<=y&&(d=t,m=i[n+1])}),e.isArray(c)&&(c=this._filterValue(c,t));d&&m&&Math.abs(l.translate(d[r][o])-y)>Math.abs(l.translate(m[r][o])-y)&&(d=m)}var C=a.getXDistance();return!c&&Math.abs(l.translate(d[r][o])-y)<=C/2&&(c=d),c},getTipTitle:function(e,t){var i="",r=this._getTipTitleScale(t);if(r){var a=e[r.field];i=r.getText(a)}else if("heatmap"===this.get("type")){var n=this.getXScale(),l=this.getYScale();i="( "+n.getText(e[n.field])+", "+l.getText(e[l.field])+" )"}return i},getTipValue:function(t,i){var r,a=i.field,n=t.key;if(r=t[a],e.isArray(r)){var l=[];e.each(r,function(e){l.push(i.getText(e))}),r=l.join("-")}else r=i.getText(r,n);return r},getTipName:function(t){var i,r,n=this._getGroupScales();if(n.length&&e.each(n,function(e){return r=e,!1}),r){var l=r.field;i=r.getText(t[l])}else{i=a(this._getTipValueScale())}return i},getTipItems:function(t,n){var l,s,o=this,u=t[r],c=o.getTipTitle(u,n),g=o.get("tooltipCfg"),f=[];function h(r,a,n){if(!e.isNil(a)&&""!==a){var l={title:c,point:t,name:r||c,value:a,color:t.color||i,marker:!0};l.size=o._getIntervalSize(t),f.push(e.mix({},l,n))}}if(g){var v=g.fields,p=g.cfg,d=[];if(e.each(v,function(e){d.push(u[e])}),p){e.isFunction(p)&&(p=p.apply(null,d));var y=e.mix({},{point:t,title:c,color:t.color||i,marker:!0},p);y.size=o._getIntervalSize(t),f.push(y)}else e.each(v,function(t){if(!e.isNil(u[t])){var i=o._getScale(t);l=a(i),s=i.getText(u[t]),h(l,s)}})}else{var S=o._getTipValueScale();e.isNil(u[S.field])||(s=o.getTipValue(u,S),h(l=o.getTipName(u),s))}return f},isShareTooltip:function(){var t,i=this.get("shareTooltip"),r=this.get("type"),a=this.get("view");if(t=a.get("parent")?a.get("parent").get("options"):a.get("options"),"interval"===r){var n=this.get("coord"),l=n.type;("theta"===l||"polar"===l&&n.isTransposed)&&(i=!1)}else this.getYScale()&&!e.inArray(["contour","point","polygon","edge"],r)||(i=!1);return t.tooltip&&e.isBoolean(t.tooltip.shared)&&(i=t.tooltip.shared),i}};module.exports=n;
},{"../../util":"e9Mz","../../global":"xYEG"}],"K21K":[function(require,module,exports) {
"use strict";module.exports={toFront:function(e){var t=e.get("parent").get("children").indexOf(e);e.set("_originIndex",t),e.toFront()},resetZIndex:function(e){var t=e.get("parent"),n=e.get("_originIndex"),i=t.get("children"),r=i.indexOf(e);n>=0&&n!==r&&(i.splice(r,1),i.splice(n,0,e))}};
},{}],"ZO2m":[function(require,module,exports) {
"use strict";var t=require("../../util"),e="_origin",i=require("./zindex-util"),a="_originActiveAttrs";function n(e,i){if(t.isNil(e)||t.isNil(i))return!1;var a=e.get("origin"),n=i.get("origin");return t.isEqual(a,n)}function s(e,i){if(!e)return!0;if(e.length!==i.length)return!0;var a=!1;return t.each(i,function(t,i){if(!n(t,e[i]))return a=!0,!1}),a}function r(e,i){var a={};return t.each(e,function(e,n){var s=i.attr(n);t.isArray(s)&&(s=t.cloneDeep(s)),a[n]=s}),a}var h={_isAllowActive:function(){var e=this.get("allowActive");if(!t.isNil(e))return e;var i=this.get("view"),a=this.isShareTooltip();return!1===i.get("options").tooltip||!a},_onMouseenter:function(t){var e=t.shape,i=this.get("shapeContainer");e&&i.contain(e)&&this._isAllowActive()&&this.setShapesActived(e)},_onMouseleave:function(){var t=this.get("view").get("canvas");this.get("activeShapes")&&(this.clearActivedShapes(),t.draw())},_bindActiveAction:function(){var e=this.get("view"),i=this.get("type");e.on(i+":mouseenter",t.wrapBehavior(this,"_onMouseenter")),e.on(i+":mouseleave",t.wrapBehavior(this,"_onMouseleave"))},_offActiveAction:function(){var e=this.get("view"),i=this.get("type");e.off(i+":mouseenter",t.getWrapBehavior(this,"_onMouseenter")),e.off(i+":mouseleave",t.getWrapBehavior(this,"_onMouseleave"))},_setActiveShape:function(e){var n=this.get("activedOptions")||{},s=e.get("origin"),h=s.shape||this.getDefaultValue("shape");t.isArray(h)&&(h=h[0]);var o=this.get("shapeFactory"),g=t.mix({},e.attr(),{origin:s}),v=o.getActiveCfg(h,g);n.style&&t.mix(v,n.style);var c=r(v,e);e.setSilent(a,c),n.animate?e.animate(v,300):e.attr(v),i.toFront(e)},setShapesActived:function(e){var i=this;t.isArray(e)||(e=[e]);var a=i.get("activeShapes");if(s(a,e)){var n=i.get("view").get("canvas"),r=i.get("activedOptions");r&&r.highlight?(t.each(e,function(t){t.get("animating")&&t.stopAnimate()}),i.highlightShapes(e)):(a&&i.clearActivedShapes(),t.each(e,function(t){t.get("animating")&&t.stopAnimate(),t.get("visible")&&i._setActiveShape(t)})),i.set("activeShapes",e),n.draw()}},clearActivedShapes:function(){var e=this.get("shapeContainer"),n=this.get("activedOptions"),s=n&&n.animate;if(e&&!e.get("destroyed")){var r=this.get("activeShapes");if(t.each(r,function(t){var e=t.get(a);s?(t.stopAnimate(),t.animate(e,300)):t.attr(e),i.resetZIndex(t),t.setSilent(a,null)}),this.get("preHighlightShapes")){var h=e.get("children");t.each(h,function(t){var e=t.get(a);e&&(s?(t.stopAnimate(),t.animate(e,300)):t.attr(e),i.resetZIndex(t),t.setSilent(a,null))})}this.set("activeShapes",null),this.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(i){var a=this.get("shapeContainer"),n=[];if(a){var s=this.getXScale().field,r=this.getShapes(),h=this._getOriginByPoint(i);t.each(r,function(t){var i=t.get("origin");t.get("visible")&&i&&(i[e][s]===h[s]&&n.push(t))})}return n},getSingleShapeByPoint:function(t){var e,i=this.get("shapeContainer"),a=i.get("canvas").get("pixelRatio");if(i&&(e=i.getShape(t.x*a,t.y*a)),e&&e.get("origin"))return e},highlightShapes:function(e,n){t.isArray(e)||(e=[e]);var h=this.get("activeShapes");if(s(h,e)){h&&this.clearActivedShapes();var o=this.getShapes(),g=this.get("activedOptions"),v=g&&g.animate,c=g&&g.style;t.each(o,function(s){var h={};s.stopAnimate(),-1!==t.indexOf(e,s)?(t.mix(h,c,n),i.toFront(s)):(t.mix(h,{fillOpacity:.3,opacity:.3}),i.resetZIndex(s));var o=r(h,s);s.setSilent(a,o),v?s.animate(h,300):s.attr(h)}),this.set("preHighlightShapes",e),this.set("activeShapes",e)}}};module.exports=h;
},{"../../util":"e9Mz","./zindex-util":"K21K"}],"Bf45":[function(require,module,exports) {
"use strict";var t=require("../../util"),e="_origin",i=require("./zindex-util");function s(e,i){if(t.isNil(e)||t.isNil(i))return!1;var s=e.get("origin"),a=i.get("origin");return t.isEqual(s,a)}function a(e,i){var s={};return t.each(e,function(e,a){"transform"===a&&(a="matrix");var r=i.attr(a);t.isArray(r)&&(r=t.cloneDeep(r)),s[a]=r}),s}var r={_isAllowSelect:function(){var e=this.get("allowSelect");if(!t.isNil(e))return e;var i=this.get("type"),s=this.get("coord"),a=s&&s.type;return"interval"===i&&"theta"===a},_onClick:function(t){if(this._isAllowSelect()){var e=t.shape,i=this.get("shapeContainer");e&&i.contain(e)&&this.setShapeSelected(e)}},_bindSelectedAction:function(){var e=this.get("view"),i=this.get("type");e.on(i+":click",t.wrapBehavior(this,"_onClick"))},_offSelectedAction:function(){var e=this.get("view"),i=this.get("type");e.off(i+":click",t.getWrapBehavior(this,"_onClick"))},_setShapeStatus:function(e,s){var r=this.get("view"),n=this.get("selectedOptions")||{},o=!1!==n.animate,h=r.get("canvas");e.set("selected",s);var c=e.get("origin");if(s){var l=c.shape||this.getDefaultValue("shape");t.isArray(l)&&(l=l[0]);var g=this.get("shapeFactory"),u=t.mix({geom:this,point:c},n),p=g.getSelectedCfg(l,u);t.mix(p,u.style),e.get("_originAttrs")||(e.get("animating")&&e.stopAnimate(),e.set("_originAttrs",a(p,e))),n.toFront&&i.toFront(e),o?e.animate(p,300):(e.attr(p),h.draw())}else{var S=e.get("_originAttrs");n.toFront&&i.resetZIndex(e),e.set("_originAttrs",null),o?e.animate(S,300):(e.attr(S),h.draw())}},setShapeSelected:function(e){var i=this._getSelectedShapes(),a=this.get("selectedOptions")||{},r=!1!==a.cancelable;if("multiple"===a.mode)-1===t.indexOf(i,e)?(i.push(e),this._setShapeStatus(e,!0)):r&&(t.Array.remove(i,e),this._setShapeStatus(e,!1));else{var n=i[0];r&&(e=s(n,e)?null:e),s(n,e)||(n&&this._setShapeStatus(n,!1),e&&this._setShapeStatus(e,!0))}},clearSelected:function(){var e=this,i=e.get("shapeContainer");if(i&&!i.get("destroyed")){var s=e._getSelectedShapes();t.each(s,function(t){e._setShapeStatus(t,!1),t.set("_originAttrs",null)})}},setSelected:function(i){var s=this,a=s.getShapes();return t.each(a,function(t){var a=t.get("origin");a&&a[e]===i&&s.setShapeSelected(t)}),this},_getSelectedShapes:function(){var e=this.getShapes(),i=[];return t.each(e,function(t){t.get("selected")&&i.push(t)}),this.set("selectedShapes",i),i}};module.exports=r;
},{"../../util":"e9Mz","./zindex-util":"K21K"}],"qVps":[function(require,module,exports) {
"use strict";var r=require("../../util");module.exports=function(i){return r.isArray(i)?i:r.isString(i)?i.split("*"):[i]};
},{"../../util":"e9Mz"}],"TmXc":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),e=t(require("@babel/runtime/helpers/assertThisInitialized")),i=t(require("@babel/runtime/helpers/inheritsLoose")),s=require("@antv/attr/lib"),a=require("@antv/adjust/lib"),n=require("../base"),r=require("../util"),o=require("../global"),l=require("./label/index"),h=require("./shape/shape"),u=require("./mixin/tooltip"),c=require("./mixin/active"),g=require("./mixin/select"),f=require("./util/parse-fields"),p=["color","shape","size"],v="_origin";function d(t){return(r.isString(t)||r.isPlainObject(t))&&(t=[t]),r.each(t,function(e,i){r.isObject(e)||(t[i]={type:e})}),t}var y=function(t){(0,i.default)(y,t);var n=y.prototype;function y(i){var s;return(s=t.call(this,i)||this).viewTheme=s.get("viewTheme"),r.assign((0,e.default)(s),u,c,g),s.get("container")&&s._initContainer(),s._initOptions(),s}return n.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}},n._initOptions=function(){var t=this.get("adjusts");t&&(t=d(t),this.set("adjusts",t))},n._createScale=function(t,e){var i=this.get("scales"),s=i[t];return s||(s=this.get("view").createScale(t,e),i[t]=s),s},n._setAttrOptions=function(t,e){this.get("attrOptions")[t]=e},n._createAttrOption=function(t,e,i,s){var a={};a.field=e,i?r.isFunction(i)?a.callback=i:a.values=i:"color"!==t&&(a.values=s),this._setAttrOptions(t,a)},n.position=function(t){return this._setAttrOptions("position",{field:t}),this},n.color=function(t,e){var i=this.viewTheme||o;return this._createAttrOption("color",t,e,i.colors),this},n.size=function(t,e){var i=this.viewTheme||o;return this._createAttrOption("size",t,e,i.sizes),this},n.shape=function(t,e){var i=this.viewTheme||o,s=this.get("type"),a=i.shapes[s]||[];return this._createAttrOption("shape",t,e,a),this},n.opacity=function(t,e){var i=this.viewTheme||o;return this._createAttrOption("opacity",t,e,i.opacities),this},n.style=function(t,e){var i,s=this.get("styleOptions");return s||(s={},this.set("styleOptions",s)),r.isObject(t)&&(e=t,t=null),t&&(i=f(t)),s.fields=i,s.style=e,this},n.label=function(t,e,i){var s,a=this.get("labelCfg");return a||(a={},this.set("labelCfg",a)),t&&(s=f(t)),a.fields=s,r.isFunction(e)?(i||(i={}),a.callback=e):r.isObject(e)&&(i=e),a.globalCfg=i,this},n.tooltip=function(t,e){var i,s=this.get("tooltipCfg");(s||(s={}),!1===t)?this.set("tooltipCfg",!1):(t&&(i=f(t)),s.fields=i,s.cfg=e);return this.set("tooltipCfg",s),this},n.animate=function(t){return this.set("animateCfg",t),this},n.active=function(t,e){return!1===t?this.set("allowActive",!1):r.isObject(t)?(this.set("allowActive",!0),this.set("activedOptions",t)):(this.set("allowActive",!0),this.set("activedOptions",e)),this},n.adjust=function(t){return this.get("hasDefaultAdjust")||(t&&(t=d(t)),this.set("adjusts",t)),this},n.select=function(t,e){return!1===t?this.set("allowSelect",!1):r.isObject(t)?(this.set("allowSelect",!0),this.set("selectedOptions",t)):(this.set("allowSelect",!0),this.set("selectedOptions",e)),this},n.hasAdjust=function(t){var e=this.get("adjusts");if(!t)return!1;var i=!1;return r.each(e,function(e){if(e.type===t)return i=!0,!1}),i},n.hasStack=function(){var t=this.get("isStacked");return r.isNil(t)&&(t=this.hasAdjust("stack"),this.set("isStacked",t)),t},n.isInCircle=function(){var t=this.get("coord");return t&&t.isPolar},n._initContainer=function(){var t=this.get("shapeContainer");if(!t){var e=this.get("container"),i=this.get("view"),s=i&&i.get("_id");t=e.addGroup({viewId:s,visible:this.get("visible")}),this.set("shapeContainer",t)}},n.init=function(){var t=this;if(t._initContainer(),t._initAttrs(),t.get("tooltipCfg")&&t.get("tooltipCfg").fields){var e=t.get("tooltipCfg").fields;r.each(e,function(e){t._createScale(e)})}var i=t._processData();t.get("adjusts")&&t._adjust(i),t.set("dataArray",i)},n._initAttrs=function(){var t=this.get("attrs"),e=this.get("attrOptions"),i=this.get("coord"),a=this.viewTheme||o,n=!1;for(var l in e)if(e.hasOwnProperty(l)){var h=e[l],u=r.upperFirst(l),c=f(h.field);"position"===l&&(h.coord=i,1===c.length&&"theta"===i.type&&(c.unshift("1"),n=!0));for(var g=[],p=0;p<c.length;p++){var v=c[p],d=this._createScale(v);"color"===l&&r.isNil(h.values)&&(d.values.length<=8?h.values=n?a.colors_pie:a.colors:d.values.length<=16?h.values=n?a.colors_pie_16:a.colors_16:h.values=a.colors_24,r.isNil(h.values)&&(h.values=a.colors)),g.push(d)}if("theta"===i.type&&"position"===l&&g.length>1){var y=g[1],_=Math.max.apply(null,y.values);isFinite(_)||(_=1),y.change({nice:!1,min:0,max:_})}h.scales=g;var m=new s[u](h);t[l]=m}},n._processData=function(){for(var t=this.get("data"),e=[],i=this._groupData(t),s=0;s<i.length;s++){var a=i[s],n=this._saveOrigin(a);e.push(this._numberic(n))}return e},n._groupData=function(t){var e=this._getGroupScales().map(function(t){return t.field});return r.Array.group(t,e)},n._saveOrigin=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i],a={};for(var n in s)a[n]=s[n];a[v]=s,e.push(a)}return e},n._numberic=function(t){for(var e=this.getAttr("position").scales,i=[],s=0;s<t.length;s++){for(var a=t[s],n=!0,r=0;r<Math.min(2,e.length);r++){var o=e[r];if(o.isCategory){var l=o.field;a[l]=o.translate(a[l]),Number.isNaN(a[l])&&(n=!1)}}n&&i.push(a)}return i},n._getGroupScales=function(){var t=this.get("groupScales");if(!t){t=[];var e=this.get("attrs");r.each(e,function(e){if(p.includes(e.type)){var i=e.scales;r.each(i,function(e){e.isCategory&&-1===r.indexOf(t,e)&&t.push(e)})}}),this.set("groupScales",t)}return t},n._updateStackRange=function(t,e,i){for(var s=r.Array.merge(i),a=e.min,n=e.max,o=0;o<s.length;o++){var l=s[o];if(r.isArray(l[t])){var h=Math.min.apply(null,l[t]),u=Math.max.apply(null,l[t]);h<a&&(a=h),u>n&&(n=u)}}(a<e.min||n>e.max)&&e.change({min:a,max:n})},n._adjust=function(t){if(t&&t.length){var e=this,i=e.get("adjusts"),s=this.viewTheme||o,n=e.getYScale(),l=e.getXScale(),h=l.field,u=n?n.field:null;r.each(i,function(i){var o=r.mix({xField:h,yField:u},i),c=r.upperFirst(i.type);if("Dodge"===c){var g=[];if(l.isCategory||l.isIdentity)g.push("x");else{if(n)throw new Error("dodge is not support linear attribute, please use category attribute!");g.push("y")}o.adjustNames=g,o.dodgeRatio=o.dodgeRatio||s.widthRatio.column}else if("Stack"===c){var f=e.get("coord");if(!n){o.height=f.getHeight();var p=e.getDefaultValue("size")||3;o.size=p}!f.isTransposed&&r.isNil(o.reverseOrder)&&(o.reverseOrder=!0)}new a[c](o).processAdjust(t),"Stack"===c&&n&&e._updateStackRange(u,n,t)})}},n.setCoord=function(t){this.set("coord",t);var e=this.getAttr("position");this.get("shapeContainer").setMatrix(t.matrix),e&&(e.coord=t)},n.paint=function(){var t=this.get("dataArray"),e=[],i=this.getShapeFactory();i.setCoord(this.get("coord")),this.set("shapeFactory",i);var s=this.get("shapeContainer");this._beforeMapping(t);for(var a=0;a<t.length;a++){var n=t[a],o=a;n=this._mapping(n),e.push(n),this.draw(n,s,i,o)}this.get("labelCfg")&&this._addLabels(r.union.apply(null,e),s.get("children")),this.get("sortable")?this.set("dataArray",e):this._sort(e)},n._sort=function(t){var e=this.getXScale(),i=e.field;r.each(t,function(t){t.sort(function(t,s){return e.translate(t[v][i])-e.translate(s[v][i])})}),this.set("dataArray",t)},n._beforeMapping=function(t){var e=this;if(e.get("sortable")){var i=e.getXScale(),s=i.field;r.each(t,function(t){t.sort(function(t,e){return i.translate(t[s])-i.translate(e[s])})})}e.get("generatePoints")&&(r.each(t,function(t){e._generatePoints(t)}),r.each(t,function(e,i){var s=t[i+1];s&&(e[0].nextPoints=s[0].points)}))},n._addLabels=function(t,e){var i=this,s=i.get("type"),a=i.get("viewTheme")||o,n=i.get("coord"),h=l.getLabelsClass(n.type,s),u=i.get("container"),c=r.map(i.get("labelCfg").fields,function(t){return i._createScale(t)}),g=u.addGroup(h,{_id:this.get("_id"),labelCfg:r.mix({scales:c},i.get("labelCfg")),coord:n,geom:i,geomType:s,yScale:i.getYScale(),viewTheme:a,visible:i.get("visible")});g.showLabels(t,e),i.set("labelContainer",g)},n.getShapeFactory=function(){var t=this.get("shapeFactory");if(!t){var e=this.get("shapeType");t=h.getShapeFactory(e),this.set("shapeFactory",t)}return t},n._generatePoints=function(t){for(var e=this.getShapeFactory(),i=this.getAttr("shape"),s=0;s<t.length;s++){var a=t[s],n=this.createShapePointsCfg(a),r=i?this._getAttrValues(i,a):null,o=e.getShapePoints(r,n);a.points=o}},n.createShapePointsCfg=function(t){var e=this.getXScale(),i=this.getYScale();return{x:this._normalizeValues(t[e.field],e),y:i?this._normalizeValues(t[i.field],i):t.y?t.y:.1,y0:i?i.scale(this.getYMinValue()):void 0}},n.getYMinValue=function(){var t=this.getYScale(),e=t.min,i=t.max;return e>=0?e:i<=0?i:0},n._normalizeValues=function(t,e){var i=[];if(r.isArray(t))for(var s=0;s<t.length;s++){var a=t[s];i.push(e.scale(a))}else i=e.scale(t);return i},n._mapping=function(t){for(var e=this.get("attrs"),i=[],s=0;s<t.length;s++){var a=t[s],n={};for(var o in n[v]=a[v],n.points=a.points,n.nextPoints=a.nextPoints,e)if(e.hasOwnProperty(o)){var l=e[o],h=l.names,u=this._getAttrValues(l,a);if(h.length>1)for(var c=0;c<u.length;c++){var g=u[c];n[h[c]]=r.isArray(g)&&1===g.length?g[0]:g}else n[h[0]]=1===u.length?u[0]:u}i.push(n)}return i},n._getAttrValues=function(t,e){for(var i=t.scales,s=[],a=0;a<i.length;a++){var n=i[a],r=n.field;"identity"===n.type?s.push(n.value):s.push(e[r])}return t.mapping.apply(t,s)},n.getAttrValue=function(t,e){var i=this.getAttr(t),s=null;i&&(s=this._getAttrValues(i,e)[0]);return s},n.getDefaultValue=function(t){var e=this.get(t),i=this.getAttr(t);if(i){var s=i.getScale(t);"identity"===s.type&&(e=s.value)}return e},n.draw=function(t,e,i,s){for(var a=0;a<t.length;a++){var n=t[a];this.drawPoint(n,e,i,s+a)}},n.getCallbackCfg=function(t,e,i){if(!t)return e;var s={},a=t.map(function(t){return i[t]});return r.each(e,function(t,e){r.isFunction(t)?s[e]=t.apply(null,a):s[e]=t}),s},n._getShapeId=function(t){var e=this.get("_id"),i=this.get("keyFields");if(i&&i.length>0)r.each(i,function(i){e+="-"+t[i]});else{var s,a=this.get("type"),n=this.getXScale(),o=this.getYScale(),l=n.field||"x",h=o.field||"y",u=t[h];s=n.isIdentity?n.value:t[l],e+="interval"===a||"schema"===a?"-"+s:"line"===a||"area"===a||"path"===a?"-"+a:"-"+s+"-"+u;var c=this._getGroupScales();r.isEmpty(c)||r.each(c,function(i){var s=i.field;"identity"!==i.type&&(e+="-"+t[s])})}return e},n.getDrawCfg=function(t){var e={origin:t,x:t.x,y:t.y,color:t.color,size:t.size,shape:t.shape,isInCircle:this.isInCircle(),opacity:t.opacity},i=this.get("styleOptions");return i&&i.style&&(e.style=this.getCallbackCfg(i.fields,i.style,t[v])),this.get("generatePoints")&&(e.points=t.points,e.nextPoints=t.nextPoints),this.get("animate")&&(e._id=this._getShapeId(t[v])),e},n.appendShapeInfo=function(t,e){t&&(t.setSilent("index",e),t.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&t.setSilent("animateCfg",this.get("animateCfg")))},n._applyViewThemeShapeStyle=function(t,e,i){var s=this.viewTheme||o,a=i.name;e?e&&(e.indexOf("hollow")>-1||e.indexOf("liquid")>-1)&&(a="hollow"+r.upperFirst(a)):i.defaultShapeType.indexOf("hollow")>-1&&(a="hollow"+r.upperFirst(a));var n=s.shape[a]||{};t.style=r.mix({},n,t.style)},n.drawPoint=function(t,e,i,s){var a=t.shape,n=this.getDrawCfg(t);this._applyViewThemeShapeStyle(n,a,i);var r=i.drawShape(a,n,e);this.appendShapeInfo(r,s)},n.getAttr=function(t){return this.get("attrs")[t]},n.getXScale=function(){return this.getAttr("position").scales[0]},n.getYScale=function(){return this.getAttr("position").scales[1]},n.getShapes=function(){var t=[],e=this.get("shapeContainer").get("children");return r.each(e,function(e){e.get("origin")&&t.push(e)}),t},n.getAttrsForLegend=function(){var t=this.get("attrs"),e=[];return r.each(t,function(t){p.includes(t.type)&&e.push(t)}),e},n.getFieldsForLegend=function(){var t=[],e=this.get("attrOptions");return r.each(p,function(i){var s=e[i];s&&s.field&&r.isString(s.field)&&(t=t.concat(s.field.split("*")))}),r.uniq(t)},n.changeVisible=function(t,e){this.set("visible",t);var i=this.get("shapeContainer");i&&i.set("visible",t);var s=this.get("labelContainer");(s&&s.set("visible",t),!e&&i)&&i.get("canvas").draw()},n.reset=function(){this.set("attrOptions",{}),this.clearInner()},n.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var t=this.get("shapeContainer");t&&t.clear();var e=this.get("labelContainer");e&&e.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},n.clear=function(){this.clearInner(),this.set("scales",{})},n.destroy=function(){this.clear();var e=this.get("shapeContainer");e&&e.remove(),this.offEvents(),t.prototype.destroy.call(this)},n.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},n.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},y}(n);module.exports=y;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inheritsLoose":"HOM9","@antv/attr/lib":"Mhpd","@antv/adjust/lib":"BGxg","../base":"iLmk","../util":"e9Mz","../global":"xYEG","./label/index":"YTIA","./shape/shape":"oHc5","./mixin/tooltip":"QQY9","./mixin/active":"ZO2m","./mixin/select":"Bf45","./util/parse-fields":"qVps"}],"O59g":[function(require,module,exports) {
"use strict";var e=require("@antv/scale/lib"),t=require("../../util"),i=/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,r={LINEAR:"linear",CAT:"cat",TIME:"time"},a=function(){function a(e){this.defs={},this.viewTheme={scales:{}},this.filters={},t.assign(this,e)}var s=a.prototype;return s._getDef=function(e){var i=this.defs,r=this.viewTheme,a=null;return(r.scales[e]||i[e])&&(a=t.mix({},r.scales[e]),t.each(i[e],function(e,i){t.isNil(e)?delete a[i]:a[i]=e}),this.filters[e]&&(delete a.min,delete a.max)),a},s._getDefaultType=function(e,a){var s=r.LINEAR,n=t.Array.firstValue(a,e);return t.isArray(n)&&(n=n[0]),i.test(n)?s=r.TIME:t.isString(n)&&(s=r.CAT),s},s._getScaleCfg=function(i,r,a){var s={field:r},n=t.Array.values(a,r);if(s.values=n,!e.isCategory(i)&&"time"!==i){var l=t.Array.getRange(n);s.min=l.min,s.max=l.max,s.nice=!0}return"time"===i&&(s.nice=!1),s},s.createScale=function(i,r){var a,s=this._getDef(i),n=r||[],l=t.Array.firstValue(n,i);if(t.isNumber(i)||t.isNil(l)&&!s)a=e.identity({value:i,field:i.toString(),values:[i]});else{var u;s&&(u=s.type),u=u||this._getDefaultType(i,n);var f=this._getScaleCfg(u,i,n);s&&t.mix(f,s),a=e[u](f)}return a},a}();module.exports=a;
},{"@antv/scale/lib":"vJDD","../../util":"e9Mz"}],"HydB":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=require("@antv/util/lib/matrix/"),i=require("@antv/util/lib/mix"),a=r.mat3,s=r.vec3,u=function(){function e(n){t(this,e);var r=this.getDefaultCfg();i(this,r,n),this.init()}return n(e,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]),n(e,[{key:"init",value:function(){var t=this.start,e=this.end,n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};this.center=n,this.width=Math.abs(e.x-t.x),this.height=Math.abs(e.y-t.y)}},{key:"_swapDim",value:function(t){var e=this[t];if(e){var n=e.start;e.start=e.end,e.end=n}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(t,e){var n=this[e],r=n.start;return r+t*(n.end-r)}},{key:"invertDim",value:function(t,e){var n=this[e],r=n.start;return(t-r)/(n.end-r)}},{key:"convertPoint",value:function(t){return t}},{key:"invertPoint",value:function(t){return t}},{key:"applyMatrix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.matrix,i=[t,e,n];return s.transformMat3(i,i,r),i}},{key:"invertMatrix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.matrix,i=a.invert([],r),u=[t,e,n];return s.transformMat3(u,u,i),u}},{key:"convert",value:function(t){var e=this.convertPoint(t),n=e.x,r=e.y,i=this.applyMatrix(n,r,1);return{x:i[0],y:i[1]}}},{key:"invert",value:function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})}},{key:"rotate",value:function(t){var e=this.matrix,n=this.center;return a.translate(e,e,[-n.x,-n.y]),a.rotate(e,e,t),a.translate(e,e,[n.x,n.y]),this}},{key:"reflect",value:function(t){switch(t){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(t,e){var n=this.matrix,r=this.center;return a.translate(n,n,[-r.x,-r.y]),a.scale(n,n,[t,e]),a.translate(n,n,[r.x,r.y]),this}},{key:"translate",value:function(t,e){var n=this.matrix;return a.translate(n,n,[t,e]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),e}();module.exports=u;
},{"@antv/util/lib/matrix/":"yUKR","@antv/util/lib/mix":"eGDv"}],"Io3n":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=a(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=require("@antv/util/lib/mix"),y=require("./base"),p=function(t){function r(t){var o;return e(this,r),(o=n(this,s(r).call(this,t)))._init(),o}return u(r,y),i(r,[{key:"getDefaultCfg",value:function(){var t=f(s(r.prototype),"getDefaultCfg",this).call(this);return l({},t,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]),i(r,[{key:"_init",value:function(){var t=this.start,e=this.end,n={start:t.x,end:e.x},r={start:t.y,end:e.y};this.x=n,this.y=r}},{key:"convertPoint",value:function(t){var e,n;return this.isTransposed?(e=t.y,n=t.x):(e=t.x,n=t.y),{x:this.convertDim(e,"x"),y:this.convertDim(n,"y")}}},{key:"invertPoint",value:function(t){var e=this.invertDim(t.x,"x"),n=this.invertDim(t.y,"y");return this.isTransposed?{x:n,y:e}:{x:e,y:n}}}]),r}();module.exports=p;
},{"@antv/util/lib/mix":"eGDv","./base":"HydB"}],"aqmX":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=require("@antv/util/lib/matrix/"),f=require("@antv/util/lib/math/is-number-equal"),y=require("@antv/util/lib/mix"),p=require("./base"),m=l.mat3,v=l.vec2,b=l.vec3,g=function(t){function r(t){var i;return e(this,r),(i=n(this,h(r).call(this,t)))._init(),i}return o(r,p),a(r,[{key:"getDefaultCfg",value:function(){var t=u(h(r.prototype),"getDefaultCfg",this).call(this);return y({},t,{startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,type:"polar",isPolar:!0})}}]),a(r,[{key:"_init",value:function(){for(var t=this.radius,e=this.innerRadius,n=this.center,r=this.startAngle,i=this.endAngle;i<r;)i+=2*Math.PI;this.endAngle=i;var a,o,s=this.getOneBox(),u=s.maxX-s.minX,c=s.maxY-s.minY,h=Math.abs(s.minX)/u,l=Math.abs(s.minY)/c,f=this.width,y=this.height;y/c>f/u?(a=f/u,o={x:n.x-(.5-h)*f,y:n.y-(.5-l)*a*c}):(a=y/c,o={x:n.x-(.5-h)*a*u,y:n.y-(.5-l)*y}),t?t>0&&t<=1?t*=a:(t<=0||t>a)&&(t=a):t=a;var p={start:r,end:i},m={start:e*t,end:t};this.x=p,this.y=m,this.radius=t,this.circleCentre=o,this.center=o}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(t){var e=this.getCenter(),n=this.isTransposed?t.y:t.x,r=this.isTransposed?t.x:t.y;return n=this.convertDim(n,"x"),r=this.convertDim(r,"y"),{x:e.x+Math.cos(n)*r,y:e.y+Math.sin(n)*r}}},{key:"invertPoint",value:function(t){var e=this.getCenter(),n=[t.x-e.x,t.y-e.y],r=this.x,i=[1,0,0,0,1,0,0,0,1];m.rotate(i,i,r.start);var a=[1,0,0];b.transformMat3(a,a,i),a=[a[0],a[1]];var o=v.angleTo(a,n,r.end<r.start);f(o,2*Math.PI)&&(o=0);var s=v.length(n),u=o/(r.end-r.start);u=r.end-r.start>0?u:-u;var c=this.invertDim(s,"y"),h={};return h.x=this.isTransposed?c:u,h.y=this.isTransposed?u:c,h}}]),r}();module.exports=g;
},{"@antv/util/lib/matrix/":"yUKR","@antv/util/lib/math/is-number-equal":"JGRU","@antv/util/lib/mix":"eGDv","./base":"HydB"}],"XFPd":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?r(e):n}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=require("@antv/util/lib/matrix/"),h=require("@antv/util/lib/math/is-number-equal"),y=require("@antv/util/lib/mix"),p=require("./base"),v=f.vec2,b=function(t){function r(t){var i;return e(this,r),(i=n(this,l(r).call(this,t)))._init(),i}return u(r,p),o(r,[{key:"getDefaultCfg",value:function(){var t=s(l(r.prototype),"getDefaultCfg",this).call(this);return y({},t,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]),o(r,[{key:"_init",value:function(){var t=this.width,e=this.height,n=this.radius,r=this.innerRadius,i=this.startAngle,o=this.endAngle,u=(o-i)/(2*Math.PI)+1,a=Math.min(t,e)/2;n&&n>=0&&n<=1&&(a*=n);var s=Math.floor(a*(1-r)/u),c=s/(2*Math.PI),l={start:i,end:o},f={start:r*a,end:r*a+.99*s};this.a=c,this.d=s,this.x=l,this.y=f}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(t){var e,n,r=this.a,i=this.center;this.isTransposed?(e=t.y,n=t.x):(e=t.x,n=t.y);var o=this.convertDim(e,"x"),u=r*o,a=this.convertDim(n,"y");return{x:i.x+Math.cos(o)*(u+a),y:i.y+Math.sin(o)*(u+a)}}},{key:"invertPoint",value:function(t){var e=this.center,n=this.a,r=this.d+this.y.start,i=v.subtract([],[t.x,t.y],[e.x,e.y]),o=v.angleTo(i,[1,0],!0),u=o*n;v.length(i)<u&&(u=v.length(i));var a=n*(o=2*Math.floor((v.length(i)-u)/r)*Math.PI+o),s=v.length(i)-a;s=h(s,0)?0:s;var c=this.invertDim(o,"x"),l=this.invertDim(s,"y");c=h(c,0)?0:c,l=h(l,0)?0:l;var f={};return f.x=this.isTransposed?l:c,f.y=this.isTransposed?c:l,f}}]),r}();module.exports=b;
},{"@antv/util/lib/matrix/":"yUKR","@antv/util/lib/math/is-number-equal":"JGRU","@antv/util/lib/mix":"eGDv","./base":"HydB"}],"OHe4":[function(require,module,exports) {
"use strict";var e=require("./base");e.Cartesian=require("./cartesian"),e.Rect=e.Cartesian,e.Polar=require("./polar"),e.Helix=require("./helix"),module.exports=e;
},{"./base":"HydB","./cartesian":"Io3n","./polar":"aqmX","./helix":"XFPd"}],"n1VJ":[function(require,module,exports) {
"use strict";var t=require("../../util"),i=require("@antv/coord/lib/"),s=function(){function s(i){this.type="rect",this.actions=[],this.cfg={},t.mix(this,i),this.option=i||{}}var n=s.prototype;return n.reset=function(t){return this.actions=t.actions||[],this.type=t.type,this.cfg=t.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},n._execActions=function(i){var s=this.actions;t.each(s,function(t){var s=t[0];i[s](t[1],t[2])})},n.hasAction=function(i){var s=this.actions,n=!1;return t.each(s,function(t){if(i===t[0])return n=!0,!1}),n},n.createCoord=function(s,n){var e,o,r=this.type,c=this.cfg,h=t.mix({start:s,end:n},c);return"theta"===r?(e=i.Polar,this.hasAction("transpose")||this.transpose(),(o=new e(h)).type=r):o=new(e=i[t.upperFirst(r||"")]||i.Rect)(h),this._execActions(o),o},n.rotate=function(t){return t=t*Math.PI/180,this.actions.push(["rotate",t]),this},n.reflect=function(t){return this.actions.push(["reflect",t]),this},n.scale=function(t,i){return this.actions.push(["scale",t,i]),this},n.transpose=function(){return this.actions.push(["transpose"]),this},s}();module.exports=s;
},{"../../util":"e9Mz","@antv/coord/lib/":"OHe4"}],"u2eH":[function(require,module,exports) {
"use strict";var e=require("../../util"),t=require("@antv/component/lib"),i=t.Axis,r=e.MatrixUtil.vec2;function n(e){var t=[];if(e.length>0){var i=(t=e.slice(0))[0],r=t[t.length-1];0!==i.value&&t.unshift({value:0}),1!==r.value&&t.push({value:1})}return t}function a(e,t,i){var r=[];return e.length<1?r:(e.length>=2&&t&&i&&r.push({text:"",tickValue:"",value:0}),0!==e[0].value&&r.push({text:"",tickValue:"",value:0}),1!==(r=r.concat(e))[r.length-1].value&&r.push({text:"",tickValue:"",value:1}),r)}function s(e,t){return void 0===t&&(t=0),"middle"===e&&(t=.5),e.includes("%")&&(t=parseInt(e,10)/100),t}var l=function(){function t(t){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],e.mix(this,t)}var l=t.prototype;return l._isHide=function(e){var t=this.options;return!(!t||!1!==t[e])},l._getMiddleValue=function(e,t,i,r){if(0===e&&!r)return 0;if(1===e)return 1;var n=t[i+1].value;return r||1!==n?(e+n)/2:1},l._getLineRange=function(e,t,i,r){var n,a,l,o=t.field,c=this.options,u="";if(c[o]&&c[o].position&&(u=c[o].position),"x"===i){var x="top"===u?1:0;n={x:0,y:x=s(u,x)},a={x:1,y:x},l=!1}else{if(r){var d="left"===u?0:1;n={x:d=s(u,d),y:0},a={x:d,y:1}}else{var h="right"===u?1:0;n={x:h=s(u,h),y:0},a={x:h,y:1}}l=!0}return{start:n=e.convert(n),end:a=e.convert(a),isVertical:l}},l._getLineCfg=function(e,t,i,r){var n=this._getLineRange(e,t,i,r),a=n.isVertical,s=n.start,l=n.end,o=e.center;return e.isTransposed&&(a=!a),{isVertical:a,factor:a&&s.x>o.x||!a&&s.y>o.y?1:-1,start:s,end:l}},l._getCircleCfg=function(e){var t,i={},n=e.x,a=e.y,s=a.start>a.end;t=e.isTransposed?{x:s?0:1,y:0}:{x:0,y:s?0:1},t=e.convert(t);var l,o=e.circleCentre,c=[t.x-o.x,t.y-o.y],u=[1,0],x=(l=t.y>o.y?r.angle(c,u):-1*r.angle(c,u))+(n.end-n.start);return i.startAngle=l,i.endAngle=x,i.center=o,i.radius=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)),i.inner=e.innerRadius||0,i},l._getRadiusCfg=function(e){var t,i,r=e.x.start<0?-1:1;return e.isTransposed?(t={x:0,y:0},i={x:1,y:0}):(t={x:0,y:0},i={x:0,y:1}),{factor:r,start:e.convert(t),end:e.convert(i)}},l._getAxisPosition=function(e,t,i,r){var n="",a=this.options;if(a[r]&&a[r].position)n=a[r].position;else{var s=e.type;e.isRect?"x"===t?n="bottom":"y"===t&&(n=i?"right":"left"):n="helix"===s?"helix":"x"===t?e.isTransposed?"radius":"circle":e.isTransposed?"circle":"radius"}return n},l._getAxisDefaultCfg=function(t,i,r,n){var a=this.viewTheme,s={},l=this.options,o=i.field;if((s=e.deepMix({},a.axis[n],s,l[o])).viewTheme=a,s.title){var c=e.isPlainObject(s.title)?s.title:{};c.text=c.text||i.alias||o,e.deepMix(s,{title:c})}return s.ticks=i.getTicks(),t.isPolar&&!i.isCategory&&"x"===r&&Math.abs(t.endAngle-t.startAngle)===2*Math.PI&&s.ticks.pop(),s.coord=t,s.label&&e.isNil(s.label.autoRotate)&&(s.label.autoRotate=!0),l.hasOwnProperty("xField")&&l.xField.hasOwnProperty("grid")&&"left"===s.position&&e.deepMix(s,l.xField),s},l._getAxisCfg=function(t,i,r,s,l,o){void 0===l&&(l="");var c=this,u=c._getAxisPosition(t,s,l,i.field),x=c._getAxisDefaultCfg(t,i,s,u);if(!e.isEmpty(x.grid)&&r){var d=[],h=[],v=n(r.getTicks());if(v.length){var g=a(x.ticks,i.isLinear,"center"===x.grid.align);e.each(g,function(r,n){h.push(r.tickValue);var a=[],u=r.value;if("center"===x.grid.align&&(u=c._getMiddleValue(u,g,n,i.isLinear)),!e.isNil(u)){var f=t.x,p=t.y;e.each(v,function(e){var i="x"===s?u:e.value,r="x"===s?e.value:u,n=t.convert({x:i,y:r});if(t.isPolar){var l=t.circleCentre;p.start>p.end&&(r=1-r),n.flag=f.start>f.end?0:1,n.radius=Math.sqrt(Math.pow(n.x-l.x,2)+Math.pow(n.y-l.y,2))}a.push(n)}),d.push({_id:o+"-"+s+l+"-grid-"+r.tickValue,points:a})}})}x.grid.items=d,x.grid.tickValues=h}return x.type=i.type,x},l._getHelixCfg=function(e){for(var t={},i=e.a,r=e.startAngle,n=e.endAngle,a=[],s=0;s<=100;s++){var l=e.convert({x:s/100,y:0});a.push(l.x),a.push(l.y)}var o=e.convert({x:0,y:0});return t.a=i,t.startAngle=r,t.endAngle=n,t.crp=a,t.axisStart=o,t.center=e.center,t.inner=e.y.start,t},l._drawAxis=function(t,r,n,a,s,l,o){var c,u,x=this.container,d=this.canvas;"cartesian"===t.type?(c=i.Line,u=this._getLineCfg(t,r,a,o)):"helix"===t.type&&"x"===a?(c=i.Helix,u=this._getHelixCfg(t)):"x"===a?(c=i.Circle,u=this._getCircleCfg(t)):(c=i.Line,u=this._getRadiusCfg(t));var h=this._getAxisCfg(t,r,n,a,o,s);h=e.mix({},h,u),"y"===a&&l&&"circle"===l.get("type")&&(h.circle=l),h._id=s+"-"+a,e.isNil(o)||(h._id=s+"-"+a+o),e.mix(h,{canvas:d,group:x.addGroup({viewId:s})});var v=new c(h);return v.render(),this.axes.push(v),v},l.createAxis=function(t,i,r){var n,a=this,s=this.coord,l=s.type;"theta"===l||"polar"===l&&s.isTransposed||(t&&!a._isHide(t.field)&&(n=a._drawAxis(s,t,i[0],"x",r)),e.isEmpty(i)||"helix"===l||e.each(i,function(e,i){a._isHide(e.field)||a._drawAxis(s,e,t,"y",r,n,i)}))},l.changeVisible=function(t){var i=this.axes;e.each(i,function(e){e.set("visible",t)})},l.clear=function(){var t=this.axes;e.each(t,function(e){e.destroy()}),this.axes=[]},t}();module.exports=l;
},{"../../util":"e9Mz","@antv/component/lib":"TP3c"}],"IxaC":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/inheritsLoose")),r=require("../../util"),i=require("@antv/component/lib/guide/base"),n=require("@antv/g/lib"),a=n.Path,l=function(e){function i(){return e.apply(this,arguments)||this}(0,t.default)(i,e);var n=i.prototype;return n.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return r.mix({},t,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},n.render=function(e,t,r,i){var n=this,a=t.addGroup();a.name="guide-region-filter",i.once("afterpaint",function(){if(!a.get("destroyed")){n._drawShapes(i,a);var t=n._drawClip(e);a.attr({clip:t}),n.set("clip",t),n.get("appendInfo")&&a.setSilent("appendInfo",n.get("appendInfo")),n.set("el",a)}})},n._drawShapes=function(e,t){var i=this,n=[];return e.getAllGeoms().map(function(e){var a=e.getShapes(),l=e.get("type");return i._geomFilter(l)&&a.map(function(e){var a=e.type,l=r.cloneDeep(e.attr());i._adjustDisplay(l);var o=t.addShape(a,{attrs:l});return n.push(o),e}),e}),n},n._drawClip=function(e){var t=this.parsePoint(e,this.get("start")),r=this.parsePoint(e,this.get("end")),i=[["M",t.x,t.y],["L",r.x,t.y],["L",r.x,r.y],["L",t.x,r.y],["z"]];return new a({attrs:{path:i,opacity:1}})},n._adjustDisplay=function(e){var t=this.get("color");e.fill&&(e.fill=e.fillStyle=t),e.stroke=e.strokeStyle=t},n._geomFilter=function(e){var t=this.get("apply");return!t||r.contains(t,e)},n.clear=function(){e.prototype.clear.call(this);var t=this.get("clip");t&&t.remove()},i}(i);module.exports=l;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","../../util":"e9Mz","@antv/component/lib/guide/base":"JgeO","@antv/g/lib":"nBh7"}],"efB4":[function(require,module,exports) {
"use strict";var e=require("@antv/component/lib"),r=e.Guide,i=require("./region-filter");r.RegionFilter=i,module.exports=r;
},{"@antv/component/lib":"TP3c","./region-filter":"IxaC"}],"Ks8S":[function(require,module,exports) {
"use strict";var i=require("../../util"),t=require("../../component/guide"),e=function(){function e(t){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,i.mix(this,t)}var n=e.prototype;return n._creatGuides=function(){var e=this,n=this.options,o=this.xScales,s=this.yScales,r=this.view,u=this.viewTheme;return this.backContainer&&r&&(this.backGroup=this.backContainer.addGroup({viewId:r.get("_id")})),this.frontContainer&&r&&(this.frontGroup=this.frontContainer.addGroup({viewId:r.get("_id")})),n.forEach(function(n){var r=n.type,h=i.deepMix({xScales:o,yScales:s,viewTheme:u},u?u.guide[r]:{},n);r=i.upperFirst(r);var a=new t[r](h);e.guides.push(a)}),e.guides},n.line=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"line"},t)),this},n.arc=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"arc"},t)),this},n.text=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"text"},t)),this},n.image=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"image"},t)),this},n.region=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"region"},t)),this},n.regionFilter=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"regionFilter"},t)),this},n.dataMarker=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"dataMarker"},t)),this},n.dataRegion=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"dataRegion"},t)),this},n.html=function(t){return void 0===t&&(t={}),this.options.push(i.mix({type:"html"},t)),this},n.render=function(t){var e=this,n=e.view,o=n&&n.get("data"),s=e._creatGuides();i.each(s,function(i){var s;s=i.get("top")?e.frontGroup||e.frontContainer:e.backGroup||e.backContainer,i.render(t,s,o,n)})},n.clear=function(){this.options=[],this.reset()},n.changeVisible=function(t){var e=this.guides;i.each(e,function(i){i.changeVisible(t)})},n.reset=function(){var t=this.guides;i.each(t,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},e}();module.exports=e;
},{"../../util":"e9Mz","../../component/guide":"efB4"}],"dLyZ":[function(require,module,exports) {
function r(){return module.exports=r=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},r.apply(this,arguments)}module.exports=r;
},{}],"TGZK":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),e=t(require("@babel/runtime/helpers/inheritsLoose")),a=require("../../util"),r=require("@antv/component/lib"),i=require("../../global"),n=r.Legend,o=n.Category,s=function(t){function r(){return t.apply(this,arguments)||this}(0,e.default)(r,t);var n=r.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return a.mix({},e,{type:"tail-legend",layout:"vertical",autoLayout:!0})},n._addItem=function(t){var e=this.get("itemsGroup"),r=this._getNextX(),i=this.get("unCheckColor"),n=e.addGroup({x:0,y:0,value:t.value,scaleValue:t.scaleValue,checked:t.checked});n.translate(r,0),n.set("viewId",e.get("viewId"));var o=this.get("textStyle"),s=this.get("_wordSpaceing"),h=0;if(t.marker){var l=a.mix({},t.marker,{x:t.marker.radius,y:0});t.checked||(l.fill&&(l.fill=i),l.stroke&&(l.stroke=i));var g=n.addShape("marker",{type:"marker",attrs:l});g.attr("cursor","pointer"),g.name="legend-marker",h+=g.getBBox().width+s}var u=a.mix({},o,{x:h,y:0,text:this._formatItemValue(t.value)});t.checked||a.mix(u,{fill:i});var p=n.addShape("text",{attrs:u});p.attr("cursor","pointer"),p.name="legend-text",this.get("appendInfo")&&p.setSilent("appendInfo",this.get("appendInfo"));var d=n.getBBox(),c=this.get("itemWidth"),f=n.addShape("rect",{attrs:{x:r,y:0-d.height/2,fill:"#fff",fillOpacity:0,width:c||d.width,height:d.height}});return f.attr("cursor","pointer"),f.setSilent("origin",t),f.name="legend-item",this.get("appendInfo")&&f.setSilent("appendInfo",this.get("appendInfo")),n.name="legendGroup",n},n._adjust=function(){if(this.get("geom")){this.get("group").attr("matrix")[7]=0;var t=this.get("geom").get("dataArray"),e=this.get("itemsGroup").get("children"),r=0;a.each(e,function(e){var i=t[r],n=i[i.length-1].y;a.isArray(n)&&(n=n[1]);var o=e.getBBox().height,s=e.get("x"),h=n-o/2;e.translate(s,h),r++}),this.get("autoLayout")&&this._antiCollision(e)}},n.render=function(){var e=this;t.prototype.render.call(this),this.get("chart").once("afterpaint",function(){e._adjust()})},n._getPreviousY=function(t){return t.attr("matrix")[7]+t.getBBox().height},n._adjustDenote=function(t,e,a){var r=2*-i.legend.legendMargin;t.addShape("path",{attrs:{path:"M-2,"+e+"L"+r+","+(a+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},n._antiCollision=function(t){if(void 0===t&&(t=[]),t.length){var e=this;t.sort(function(t,e){return t.attr("matrix")[7]-e.attr("matrix")[7]});var a=!0,r=e.get("chart").get("plotRange"),i=r.tl.y,n=Math.abs(i-r.bl.y),o=t[0].getBBox().height,s=Number.MIN_VALUE,h=0,l=t.map(function(t){var e=t.attr("matrix")[7];return e>h&&(h=e),e<s&&(s=e),{size:t.getBBox().height,targets:[e-i]}});s-=i;for(var g=0;a;){for(var u=0;u<l.length;u++){var p=l[u],d=(Math.min.apply(s,p.targets)+Math.max.apply(s,p.targets))/2;p.pos=Math.min(Math.max(s,d-p.size/2),n-p.size)}for(a=!1,g=l.length;g--;)if(g>0){var c=l[g-1],f=l[g];c.pos+c.size>f.pos&&(c.size+=f.size,c.targets=c.targets.concat(f.targets),l.splice(g,1),a=!0)}}g=0;var m=this.get("itemsGroup").addGroup();l.forEach(function(a){var r=i+o;a.targets.forEach(function(){var i=t[g].attr("matrix")[7],n=a.pos+r-o/2;Math.abs(i-n)>o/2&&e._adjustDenote(m,n,i-e.get("group").attr("matrix")[7]/2),t[g].translate(0,-i),t[g].translate(0,n),r+=o,g++})})}},r}(o);module.exports=s;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","../../util":"e9Mz","@antv/component/lib":"TP3c","../../global":"xYEG"}],"WEC9":[function(require,module,exports) {
"use strict";module.exports=function(m,a){return{minX:Math.min(m.minX,a.minX),minY:Math.min(m.minY,a.minY),maxX:Math.max(m.maxX,a.maxX),maxY:Math.max(m.maxY,a.maxY)}};
},{}],"zkk5":[function(require,module,exports) {
"use strict";var e=require("../../renderer"),r=require("../../util"),n=require("./merge-bbox");function t(e,n,t){void 0===t&&(t=1);var i=[e.x,e.y,t];return r.vec3.transformMat3(i,i,n),{x:i[0],y:i[1]}}function i(e){var r=e.getBBox(),n={x:r.minX,y:r.minY},i={x:r.maxX,y:r.maxY},a=e.attr("matrix");return n=t(n,a),i=t(i,a),{minX:n.x,minY:n.y,maxX:i.x,maxY:i.y}}module.exports=function(t,a){var o=a;return r.each(t.get("children"),function(t){t instanceof e.Group&&r.each(t.get("children"),function(r){if(r instanceof e.Group&&r.get("children").length||r instanceof e.Path)o=n(o,r.getBBox());else if(r instanceof e.Text){var t=i(r);o=n(o,t)}})}),o};
},{"../../renderer":"MVGo","../../util":"e9Mz","./merge-bbox":"WEC9"}],"rg71":[function(require,module,exports) {
"use strict";module.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}};
},{}],"orqb":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/extends")),i=e(require("@babel/runtime/helpers/toConsumableArray")),n=require("../../util"),a=require("@antv/component/lib"),r=a.Legend,l=require("../../component/legend/tail"),o=require("../../geom/shape/shape"),s=require("../util/bbox-of-back-plot"),g=require("../util/plot-range2bbox"),c=require("../../global"),u="_origin",h=4.5,d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,f=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function v(e,t,i){return!n.isNil(i)&&(e=i.translate(e),t=i.translate(t),i.isCategory?e===t:Math.abs(e-t)<=1)}function p(e,t){var i;return n.each(e,function(e){if(e.get("visible")&&e.getYScale().field===t)return void(i=e)}),i}var m=function(){function e(e){this.options={},n.mix(this,e),this.clear();var t=this.chart;this.container=t.get("frontPlot"),this.plotRange=t.get("plotRange")}var a=e.prototype;return a.clear=function(){var e=this.legends;this.backRange=null,n.each(e,function(e){n.each(e,function(e){e.destroy()})}),this.legends={}},a.getBackRange=function(){var e=this.backRange;if(!e){var t=this.chart.get("backPlot");e=s(t,g(this.chart.get("plotRange")));var i=this.plotRange;e.maxX-e.minX<i.br.x-i.tl.x&&e.maxY-e.minY<i.br.y-i.tl.y&&(e={minX:i.tl.x,minY:i.tl.y,maxX:i.br.x,maxY:i.br.y}),this.backRange=e}return e},a._isFieldInView=function(e,t,i){var a=!1,r=i.get("scales")[e];return r&&r.values&&(a=n.inArray(r.values,t)),a},a._bindClickEvent=function(e,t,i){var a=this,r=a.chart,l=r.get("views"),o=t.field,s=a.options;e.on("itemclick",function(t){if(s.onClick&&!0!==s.defaultClickHandlerEnabled)s.onClick(t);else{var g=t.item,c=t.checked,u="single"===e.get("selectedMode"),h=g.dataValue;c?(n.Array.remove(i,h),a._isFieldInView(o,h,r)&&r.filter(o,function(e){return u?e===h:!n.inArray(i,e)}),n.each(l,function(e){a._isFieldInView(o,h,e)&&e.filter(o,function(e){return u?e===h:!n.inArray(i,e)})})):u||(i.push(h),a._isFieldInView(o,h,r)&&r.filter(o,function(e){return!n.inArray(i,e)}),n.each(l,function(e){a._isFieldInView(o,h,e)&&e.filter(o,function(e){return!n.inArray(i,e)})})),s.onClick&&s.onClick(t),r.set("keepLegend",!0),r.set("keepPadding",!0),r.repaint(),r.set("keepPadding",!1),r.set("keepLegend",!1)}})},a._bindClickEventForMix=function(e){var t=this.chart.getAllGeoms();e.on("itemclick",function(e){var i=e.item.field;e.checked?n.each(t,function(e){e.getYScale().field===i&&e.show()}):n.each(t,function(e){e.getYScale().field===i&&e.hide()})})},a._filterLabels=function(e,t,i){if(e.get("gLabel"))e.get("gLabel").set("visible",i);else{var a=t.get("labelCfg");if(a&&a.fields&&a.fields.length>0){var r=t.getXScale(),l=t.getYScale(),o=r.field,s=l.field,g=e.get("origin")._origin,c=t.get("labelContainer").get("labelsGroup").get("children");n.each(c,function(t){var n=t.get("origin")||[];n[o]===g[o]&&n[s]===g[s]&&(t.set("visible",i),e.set("gLabel",t))})}}},a._bindFilterEvent=function(e,t){var i=this,a=this.chart,r=t.field;e.on("itemfilter",function(e){var t=e.range;a.filterShape(function(e,a,l){if(!n.isNil(e[r])){var o=e[r]>=t[0]&&e[r]<=t[1];return i._filterLabels(a,l,o),o}return!0});for(var l=a.getAllGeoms()||[],o=function(e){var i=l[e];"heatmap"===i.get("type")&&d(function(){i.drawWithRange(t)})},s=0;s<l.length;s++)o(s)})},a._getShapeData=function(e){var t=e.get("origin");return n.isArray(t)&&(t=t[0]),t[u]},a._bindHoverEvent=function(e,t){var i=this,a=i.chart,r=a.getAllGeoms(),l=i.options,o=a.get("canvas");e.on("itemhover",function(e){var a=e.item.value,s=i.pre;if(s){if(s===a)return}else n.each(r,function(r){var s=r.get("shapeContainer"),g=r.getShapes(),c=[];if(t){var u=r.get("scales")[t];n.each(g,function(e){var n=i._getShapeData(e);n&&v(n[t],a,u)&&c.push(e)})}else r.getYScale().field===a&&(c=g);n.isEmpty(c)||(e.shapes=c,e.geom=r,l.onHover?(l.onHover(e),s.sort(),o.draw()):r.setShapesActived(c))}),i.pre=a}),e.on("itemunhover",function(e){i.pre=null,l.onUnhover&&l.onUnhover(e),n.each(r,function(e){e.get("activeShapes")&&(e.clearActivedShapes(),o.draw())})})},a._isFiltered=function(e,t,i){if(!e.isCategory)return!0;var a=!0;return i=e.invert(i),n.each(t,function(t){if(e.getText(t)===e.getText(i))return a=!1,!1}),a},a._alignLegend=function(e,t,i,n){var a=this.viewTheme,r=this.container.get("canvas"),l=r.get("width"),o=r.get("height"),s=this.totalRegion,g=this.plotRange,c=this.getBackRange(),u=e.get("offset")[0]||0,h=e.get("offset")[1]||0,d=e.getHeight(),f=e.getWidth(),v=a.legend.margin,p=a.legend.legendMargin,m=this.legends[n].length,b=n.split("-"),k=0,y=0,_=m>1?s:i;if("left"===b[0]||"right"===b[0])o=g.br.y,k=this._getXAlign(b[0],l,i,c,f,v),y=t?(t.get("y")||t.get("group").get("y"))+t.getHeight()+p:this._getYAlignVertical(b[1],o,_,c,0,v,r.get("height"));else if("top"===b[0]||"bottom"===b[0])if(y=this._getYAlignHorizontal(b[0],o,i,c,d,v),t){var w=t.getWidth();k=(t.get("x")||t.get("group").get("x"))+w+p}else k=this._getXAlign(b[1],l,_,c,0,v),"right"===b[1]&&(k=g.br.x-_.totalWidth);e.move(k+u,y+h)},a._getXAlign=function(e,t,i,n,a,r){var l=n.minX-a-r[3]<0?0:n.minX-a-r[3],o="left"===e?l:n.maxX+r[1];return"center"===e&&(o=(t-i.totalWidth)/2),o},a._getYAlignHorizontal=function(e,t,i,n,a,r){return"top"===e?n.minY-a-r[0]:n.maxY+r[2]},a._getYAlignVertical=function(e,t,i,n,a,r,l){var o="top"===e?n.minY-a-r[0]:t-i.totalHeight;return"center"===e&&(o=(l-i.totalHeight)/2),o},a._getSubRegion=function(e){var t=0,i=0,a=0,r=0;return n.each(e,function(e){var n=e.getWidth(),l=e.getHeight();t<n&&(t=n),a+=n,i<l&&(i=l),r+=l}),{maxWidth:t,totalWidth:a,maxHeight:i,totalHeight:r}},a._getRegion=function(){var e=this,t=e.viewTheme,i=e.legends,a=t.legend.legendMargin,r=[],l=0,o=0;return n.each(i,function(t){var i=e._getSubRegion(t);r.push(i),l+=i.totalWidth+a,o+=i.totalHeight+a}),{totalWidth:l,totalHeight:o,subs:r}},a._addCategoryLegend=function(e,a,s,g,u){var h=this,d=e.field,f=h.options,v=f[d];v&&(f=v);var p=h.legends;p[u]=p[u]||[];var m=h.container,b=[],k=e.getTicks(),y=!0,_=s.get("shapeType")||"point",w=s.getDefaultValue("shape")||"circle";f[d]&&f[d].marker?(w=f[d].marker,_="point",y=!1):f.marker&&(w=f.marker,_="point",y=!1);var C=h.chart,S=h.viewTheme,x=C.get("canvas"),A=h.plotRange,L=u.split("-"),R="right"===L[0]||"left"===L[0]?A.bl.y-A.tr.y:x.get("width");n.each(k,function(t){var a=t.text,r=t.value,l=e.invert(r),u={isInCircle:s.isInCircle()},d=!g||h._isFiltered(e,g,r),f=s.getAttr("color"),v=s.getAttr("shape");if(f)if(f.callback&&f.callback.length>1){var p=Array(f.callback.length-1).fill("");u.color=f.mapping.apply(f,[l].concat((0,i.default)(p))).join("")||S.defaultColor}else u.color=f.mapping(l).join("")||S.defaultColor;if(y&&v)if(v.callback&&v.callback.length>1){var m=Array(v.callback.length-1).fill("");w=v.mapping.apply(v,[l].concat((0,i.default)(m))).join("")}else w=v.mapping(l).join("");var k=o.getShapeFactory(_).getMarkerCfg(w,u);c.legendMarkerRadius&&(k.radius=c.legendMarkerRadius),n.isFunction(w)&&(k.symbol=w),b.push({value:a,dataValue:l,checked:d,marker:k})});var H,T=n.deepMix({},S.legend[L[0]],f[d]||f,{viewId:C.get("_id"),maxLength:R,items:b,container:m,position:[0,0]});if(T.title&&n.deepMix(T,{title:{text:e.alias||e.field}}),h._isTailLegend(f,s))T.chart=h.chart,T.geom=s,H=new l(T);else if(f.useHtml){var M=m.get("canvas").get("el");if(m=f.container,n.isString(m)&&/^\#/.test(m)){var E=m.replace("#","");m=document.getElementById(E)}m||(m=M.parentNode),T.container=m,void 0===T.legendStyle&&(T.legendStyle={}),T.legendStyle.CONTAINER_CLASS=(0,t.default)({},T.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":""===M.style.zIndex?1:parseInt(M.style.zIndex,10)+1}),f.flipPage?(T.legendStyle.CONTAINER_CLASS.height="right"===L[0]||"left"===L[0]?R+"px":"auto",T.legendStyle.CONTAINER_CLASS.width="right"!==L[0]&&"left"!==L[0]?R+"px":"auto",H=new r.CatPageHtml(T)):H=new r.CatHtml(T)}else H=new r.Category(T);return h._bindClickEvent(H,e,g),p[u].push(H),H},a._bindChartMove=function(e){var t=this.chart,i=this.legends;t.on("plotmove",function(t){var a=!1;if(t.target){var r=t.target.get("origin");if(r){var l=r[u]||r[0][u],o=e.field;if(l){var s=l[o];n.each(i,function(e){n.each(e,function(e){a=!0,!e.destroyed&&e.activate(s)})})}}}a||n.each(i,function(e){n.each(e,function(e){!e.destroyed&&e.deactivate()})})})},a._addContinuousLegend=function(e,t,i){var a=this.legends;a[i]=a[i]||[];var l,o,s,g=this.container,c=e.field,u=e.getTicks(),h=[],d=this.viewTheme;n.each(u,function(i){var n=i.value,a=e.invert(n),r=t.mapping(a).join("");h.push({value:i.tickValue,attrValue:r,color:r,scaleValue:n}),0===n&&(o=!0),1===n&&(s=!0)}),o||h.push({value:e.min,attrValue:t.mapping(0).join(""),color:t.mapping(0).join(""),scaleValue:0}),s||h.push({value:e.max,attrValue:t.mapping(1).join(""),color:t.mapping(1).join(""),scaleValue:1});var f=this.options,v=i.split("-"),p=d.legend[v[0]];(f&&!1===f.slidable||f[c]&&!1===f[c].slidable)&&(p=n.mix({},p,d.legend.gradient));var m=n.deepMix({},p,f[c]||f,{items:h,attr:t,formatter:e.formatter,container:g,position:[0,0]});if(m.title&&n.deepMix(m,{title:{text:e.alias||e.field}}),"color"===t.type)l=new r.Color(m);else{if("size"!==t.type)return;l=f&&"circle"===f.sizeType?new r.CircleSize(m):new r.Size(m)}return this._bindFilterEvent(l,e),a[i].push(l),l},a._isTailLegend=function(e,t){if(e.hasOwnProperty("attachLast")&&e.attachLast){var i=t.get("type");if("line"===i||"lineStack"===i||"area"===i||"areaStack"===i)return!0}return!1},a._adjustPosition=function(e,t){var i;if(t)i="right-top";else if(n.isArray(e))i=String(e[0])+"-"+String(e[1]);else{var a=e.split("-");1===a.length?("left"===a[0]&&(i="left-bottom"),"right"===a[0]&&(i="right-bottom"),"top"===a[0]&&(i="top-center"),"bottom"===a[0]&&(i="bottom-center")):i=e}return i},a.addLegend=function(e,t,i,n){var a=this.options,r=e.field,l=a[r],o=this.viewTheme;if(!1===l)return null;if(l&&l.custom)this.addCustomLegend(r);else{var s,g=a.position||o.defaultLegendPosition;g=this._adjustPosition(g,this._isTailLegend(a,i)),l&&l.position&&(g=this._adjustPosition(l.position,this._isTailLegend(l,i))),(s=e.isLinear?this._addContinuousLegend(e,t,g):this._addCategoryLegend(e,t,i,n,g))&&(this._bindHoverEvent(s,r),a.reactive&&this._bindChartMove(e))}},a.addCustomLegend=function(e){var t=this.chart,i=this.viewTheme,a=this.container,l=this.options;e&&(l=l[e]);var o=l.position||i.defaultLegendPosition;o=this._adjustPosition(o);var s=this.legends;s[o]=s[o]||[];var g=l.items;if(g){var u=t.getAllGeoms();n.each(g,function(e){var t=p(u,e.value);n.isPlainObject(e.marker)?e.marker.radius=e.marker.radius||c.legendMarkerRadius||h:(e.marker={symbol:e.marker||"circle",radius:c.legendMarkerRadius||h},-1!==n.indexOf(f,e.marker.symbol)?e.marker.stroke=e.fill:e.marker.fill=e.fill);var i=e.marker.symbol;n.isString(i)&&-1!==i.indexOf("hollow")&&(e.marker.symbol=n.lowerFirst(i.substr(6))),e.checked=!!n.isNil(e.checked)||e.checked,e.geom=t});var d,v=t.get("canvas"),m=this.plotRange,b=o.split("-"),k="right"===b[0]||"left"===b[0]?m.bl.y-m.tr.y:v.get("width"),y=n.deepMix({},i.legend[b[0]],l,{maxLength:k,items:g,container:a,position:[0,0]});if(l.useHtml){var _=l.container;if(/^\#/.test(a)){var w=_.replace("#","");_=document.getElementById(w)}else _||(_=a.get("canvas").get("el").parentNode);y.container=_,void 0===y.legendStyle&&(y.legendStyle={}),y.legendStyle.CONTAINER_CLASS||(y.legendStyle.CONTAINER_CLASS={height:"right"===b[0]||"left"===b[0]?k+"px":"auto",width:"right"!==b[0]&&"left"!==b[0]?k+"px":"auto",position:"absolute",overflow:"auto"}),d=l.flipPage?new r.CatPageHtml(y):new r.CatHtml(y)}else d=new r.Category(y);return s[o].push(d),d.on("itemclick",function(e){l.onClick&&l.onClick(e)}),this._bindHoverEvent(d),d}},a.addMixedLegend=function(e,t){var i=this.options,a=[];n.each(e,function(e){var r=e.alias||e.field,l=i[e.field];n.each(t,function(t){if(t.getYScale()===e&&e.values&&e.values.length>0&&!1!==l){var i=t.get("shapeType")||"point",n=t.getDefaultValue("shape")||"circle",s=o.getShapeFactory(i),g={color:t.getDefaultValue("color")},u=s.getMarkerCfg(n,g);c.legendMarkerRadius&&(u.radius=c.legendMarkerRadius);var h={value:r,marker:u,field:e.field};a.push(h)}})});var r={custom:!0,items:a};this.options=n.deepMix({},r,this.options);var l=this.addCustomLegend();this._bindClickEventForMix(l)},a.alignLegends=function(){var e=this,t=e.legends,i=e._getRegion(t);e.totalRegion=i;var a=0;return n.each(t,function(t,r){var l=i.subs[a];n.each(t,function(i,n){var a=t[n-1];i.get("useHtml")&&!i.get("autoPosition")||e._alignLegend(i,a,l,r)}),a++}),this},e}();module.exports=m;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/extends":"dLyZ","@babel/runtime/helpers/toConsumableArray":"Fhqp","../../util":"e9Mz","@antv/component/lib":"TP3c","../../component/legend/tail":"TGZK","../../geom/shape/shape":"oHc5","../util/bbox-of-back-plot":"zkk5","../util/plot-range2bbox":"rg71","../../global":"xYEG"}],"CkX4":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),e=t(require("@babel/runtime/helpers/extends")),i=require("../../util"),o=require("../../geom/shape/shape"),r=require("@antv/component/lib"),n=r.Tooltip,a=i.MatrixUtil,s=a.vec2,l=["line","area","path","areaStack"],h=["line","area"],c=["marker","showMarker"];function p(t,e){var o=-1;return i.each(t,function(t,r){var n=!0;for(var a in e)if(e.hasOwnProperty(a)&&!c.includes(a)&&!i.isObject(e[a])&&e[a]!==t[a]){n=!1;break}if(n)return o=r,!1}),o}function u(t,e){if(!t)return!1;return!!t.className&&(i.isNil(t.className.baseVal)?t.className:t.className.baseVal).includes(e)}function f(t,e){for(var i=t.parentNode,o=!1;i&&i!==document.body;){if(u(i,e)){o=!0;break}i=i.parentNode}return o}function v(t){var e=[];return i.each(t,function(t){var i=p(e,t);-1===i?e.push(t):e[i]=t}),e}var g=function(){function t(t){i.assign(this,t),this.timeStamp=0,this.locked=!1}var r=t.prototype;return r._normalizeEvent=function(t){var e=this.chart,i=this._getCanvas(),o=i.getPointByClient(t.clientX,t.clientY),r=i.get("pixelRatio");o.x=o.x/r,o.y=o.y/r;var n=e.getViewsByPoint(o);return o.views=n,o},r._getCanvas=function(){return this.chart.get("canvas")},r._getTriggerEvent=function(){var t,e=this.options.triggerOn;return e&&"mousemove"!==e?"click"===e?t="plotclick":"none"===e&&(t=null):t="plotmove",t},r._getDefaultTooltipCfg=function(){var t=this.chart,e=this.viewTheme,o=this.options,r=i.mix({},e.tooltip),n=t.getAllGeoms().filter(function(t){return t.get("visible")}),a=[];i.each(n,function(t){var e=t.get("type"),o=t.get("adjusts"),r=!1;o&&i.each(o,function(t){if("symmetric"===t.type||"Symmetric"===t.type)return r=!0,!1}),-1!==i.indexOf(a,e)||r||a.push(e)});var s,l=!(!n.length||!n[0].get("coord"))&&n[0].get("coord").isTransposed;if(n.length&&n[0].get("coord")&&"cartesian"===n[0].get("coord").type)if("interval"===a[0]&&!1!==o.shared){var c=i.mix({},e.tooltipCrosshairsRect);c.isTransposed=l,s={zIndex:0,crosshairs:c}}else if(i.indexOf(h,a[0])>-1){var p=i.mix({},e.tooltipCrosshairsLine);p.isTransposed=l,s={crosshairs:p}}return i.mix(r,s,{})},r._bindEvent=function(){var t=this.chart,e=this._getTriggerEvent();e&&(t.on(e,i.wrapBehavior(this,"onMouseMove")),t.on("plotleave",i.wrapBehavior(this,"onMouseOut")))},r._offEvent=function(){var t=this.chart,e=this._getTriggerEvent();e&&(t.off(e,i.getWrapBehavior(this,"onMouseMove")),t.off("plotleave",i.getWrapBehavior(this,"onMouseOut")))},r._setTooltip=function(t,e,o,r){var n=this.tooltip,a=this.prePoint;if(!a||a.x!==t.x||a.y!==t.y){e=v(e),this.prePoint=t;var s=this.chart,l=this.viewTheme,h=i.isArray(t.x)?t.x[t.x.length-1]:t.x,c=i.isArray(t.y)?t.y[t.y.length-1]:t.y;n.get("visible")||s.emit("tooltip:show",{x:h,y:c,tooltip:n});var p=e[0],u=p.title||p.name;n.isContentChange(u,e)&&(s.emit("tooltip:change",{tooltip:n,x:h,y:c,items:e}),u=e[0].title||e[0].name,n.setContent(u,e),i.isEmpty(o)?(n.clearMarkers(),n.set("markerItems",[])):!0===this.options.hideMarkers?n.set("markerItems",o):n.setMarkers(o,l.tooltipMarker)),r===this._getCanvas()&&"mini"===n.get("type")?n.hide():(n.setPosition(h,c,r),n.show())}},r.hideTooltip=function(){var t=this.tooltip,e=this.chart,i=this._getCanvas();this.prePoint=null,t.hide(),e.emit("tooltip:hide",{tooltip:t}),i.draw()},r.onMouseMove=function(t){if(!i.isEmpty(t.views)&&!this.locked){var e=this.timeStamp,o=+new Date,r={x:t.x,y:t.y};o-e>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(r,t.views,t.shape),this.timeStamp=o)}},r.onMouseOut=function(t){var e=this.tooltip;e.get("visible")&&e.get("follow")&&!this.locked&&(t&&t.toElement&&(u(t.toElement,"g2-tooltip")||f(t.toElement,"g2-tooltip"))||this.hideTooltip())},r.renderTooltip=function(){var t=this;if(!t.tooltip){var e,o=t.chart,r=t.viewTheme,a=t._getCanvas(),s=t._getDefaultTooltipCfg(),l=t.options;(l=i.deepMix({plotRange:o.get("plotRange"),capture:!1,canvas:a,frontPlot:o.get("frontPlot"),viewTheme:r.tooltip,backPlot:o.get("backPlot")},s,l)).crosshairs&&"rect"===l.crosshairs.type&&(l.zIndex=0),l.visible=!1,"mini"===l.type?(l.crosshairs=!1,l.position="top",e=new n.Mini(l)):e=l.useHtml?new n.Html(l):new n.Canvas(l),t.tooltip=e;var h=t._getTriggerEvent(),c=e.get("container");e.get("enterable")||"plotmove"!==h||c&&(c.onmousemove=function(e){var i=t._normalizeEvent(e);o.emit(h,i)}),c&&(c.onmouseleave=function(){t.locked||t.hideTooltip()}),t._bindEvent()}},r._formatMarkerOfItem=function(t,e,o){var r=this.options,n=o.point;if(n&&n.x&&n.y){var a=i.isArray(n.x)?n.x[n.x.length-1]:n.x,s=i.isArray(n.y)?n.y[n.y.length-1]:n.y;n=t.applyMatrix(a,s,1),o.x=n[0],o.y=n[1],o.showMarker=!0,"l("!==o.color.substring(0,2)||r.hasOwnProperty("useHtml")&&!r.useHtml||(o.color=o.color.split(" ")[1].substring(2));var h=this._getItemMarker(e,o);if(o.marker=h,-1!==i.indexOf(l,e.get("type")))return o}return null},r.lockTooltip=function(){this.locked=!0},r.unlockTooltip=function(){this.locked=!1},r.showTooltip=function(t,e,o){var r=this,n=this;if(!i.isEmpty(e)&&t){this.tooltip||this.renderTooltip();var a=n.options,l=[],h=[];if(i.each(e,function(e){if(!e.get("tooltipEnable"))return!0;var o=e.get("geoms"),s=e.get("coord");i.each(o,function(e){var o=e.get("type");if(e.get("visible")&&!1!==e.get("tooltipCfg")){var c=e.get("dataArray");if(e.isShareTooltip()||!1===a.shared&&i.inArray(["area","line","path","polygon"],o)){var p=e.getXScale(),u=e.getAttr("color"),f=u?u.field:void 0;if("interval"===o&&p.field===f&&e.hasAdjust("dodge")){var v=i.find(c,function(i){return!!e.findPoint(t,i)});i.each(v,function(t){var o=e.getTipItems(t,a.title);i.each(o,function(t){var i=n._formatMarkerOfItem(s,e,t);i&&l.push(i)}),h=h.concat(o)})}else i.each(c,function(o){var r=e.findPoint(t,o);if(r){var c=e.getTipItems(r,a.title);i.each(c,function(t){var i=n._formatMarkerOfItem(s,e,t);i&&l.push(i)}),h=h.concat(c)}})}else{var g=e.get("shapeContainer"),m=g.get("canvas").get("pixelRatio"),y=g.getShape(t.x*m,t.y*m);y&&y.get("visible")&&y.get("origin")&&(h=e.getTipItems(y.get("origin"),a.title)),i.each(h,function(t){var i=r._formatMarkerOfItem(s,e,t);i&&l.push(i)})}}}),i.each(h,function(t){var e=t.point,o=i.isArray(e.x)?e.x[e.x.length-1]:e.x,r=i.isArray(e.y)?e.y[e.y.length-1]:e.y;e=s.applyMatrix(o,r,1),t.x=e[0],t.y=e[1]})}),h.length){var c=h[0];if(!h.every(function(t){return t.title===c.title})){var p=c,u=1/0;h.forEach(function(e){var i=s.distance([t.x,t.y],[e.x,e.y]);i<u&&(u=i,p=e)}),h=h.filter(function(t){return t.title===p.title}),l=l.filter(function(t){return t.title===p.title})}if(!1===a.shared&&h.length>1){var f=h[0],v=Math.abs(t.y-f.y);i.each(h,function(e){Math.abs(t.y-e.y)<=v&&(f=e,v=Math.abs(t.y-e.y))}),f&&f.x&&f.y&&(l=[f]),h=[f]}n._setTooltip(t,h,l,o)}else n.hideTooltip()}},r.clear=function(){var t=this.tooltip;t&&t.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},r._getItemMarker=function(t,r){var n=this.options.marker||this.viewTheme.tooltip.marker;if(i.isFunction(n)){var a=t.get("shapeType")||"point",s=t.getDefaultValue("shape")||"circle",l=o.getShapeFactory(a),h={color:r.color};return n(l.getMarkerCfg(s,h),r)}return(0,e.default)({fill:r.color},n)},t}();module.exports=g;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/extends":"dLyZ","../../util":"e9Mz","../../geom/shape/shape":"oHc5","@antv/component/lib":"TP3c"}],"nH4G":[function(require,module,exports) {
"use strict";var e=require("../../util");function t(t,i){if(e.isNil(t)||e.isNil(i))return!1;var n=t.get("origin"),h=i.get("origin");return e.isNil(n)&&e.isNil(h)?e.isEqual(t,i):e.isEqual(n,h)}function i(e){e.shape&&e.shape.get("origin")&&(e.data=e.shape.get("origin"))}var n=function(){function n(t){this.view=null,this.canvas=null,e.assign(this,t),this._init()}var h=n.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(e){return{x:e.x/this.pixelRatio,y:e.y/this.pixelRatio,target:e.target,toElement:e.event.toElement||e.event.relatedTarget}},h._getShape=function(e,t){return this.view.get("canvas").getShape(e,t)},h._getPointInfo=function(e){var t=this.view,i={x:e.x/this.pixelRatio,y:e.y/this.pixelRatio},n=t.getViewsByPoint(i);return i.views=n,i},h._getEventObj=function(e,t,i){return{x:t.x,y:t.y,target:e.target,toElement:e.event.toElement||e.event.relatedTarget,views:i}},h.bindEvents=function(){var t=this.canvas;t.on("mousedown",e.wrapBehavior(this,"onDown")),t.on("mousemove",e.wrapBehavior(this,"onMove")),t.on("mouseleave",e.wrapBehavior(this,"onOut")),t.on("mouseup",e.wrapBehavior(this,"onUp")),t.on("click",e.wrapBehavior(this,"onClick")),t.on("dblclick",e.wrapBehavior(this,"onClick")),t.on("touchstart",e.wrapBehavior(this,"onTouchstart")),t.on("touchmove",e.wrapBehavior(this,"onTouchmove")),t.on("touchend",e.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(e,t,i){if(e&&e.name&&!e.get("destroyed")){var n=this.view;if(n.isShapeInView(e)){var h=e.name+":"+t;i.view=n,i.appendInfo=e.get("appendInfo"),n.emit(h,i);var o=n.get("parent");o&&o.emit(h,i)}}},h.onDown=function(e){var t=this.view,n=this._getShapeEventObj(e);n.shape=this.currentShape,i(n),t.emit("mousedown",n),this._triggerShapeEvent(this.currentShape,"mousedown",n)},h.onMove=function(e){var n=this.view,h=this.currentShape;h&&h.get("destroyed")&&(h=null,this.currentShape=null);var o=this._getShape(e.x,e.y)||e.currentTarget,r=this._getShapeEventObj(e);if(r.shape=o,i(r),n.emit("mousemove",r),this._triggerShapeEvent(o,"mousemove",r),h&&!t(h,o)){var a=this._getShapeEventObj(e);a.shape=h,a.toShape=o,i(a),this._triggerShapeEvent(h,"mouseleave",a)}if(o&&!t(h,o)){var s=this._getShapeEventObj(e);s.shape=o,s.fromShape=h,i(s),this._triggerShapeEvent(o,"mouseenter",s)}this.currentShape=o;var v=this._getPointInfo(e),p=this.curViews||[];0===p.length&&v.views.length&&n.emit("plotenter",this._getEventObj(e,v,v.views)),p.length&&0===v.views.length&&n.emit("plotleave",this._getEventObj(e,v,p)),v.views.length&&((r=this._getEventObj(e,v,v.views)).shape=o,i(r),n.emit("plotmove",r)),this.curViews=v.views},h.onOut=function(e){var t=this.view,i=this._getPointInfo(e),n=this.curViews||[],h=this._getEventObj(e,i,n);!this.curViews||0===this.curViews.length||h.toElement&&"CANVAS"===h.toElement.tagName||(t.emit("plotleave",h),this.curViews=[])},h.onUp=function(e){var t=this.view,i=this._getShapeEventObj(e);i.shape=this.currentShape,t.emit("mouseup",i),this._triggerShapeEvent(this.currentShape,"mouseup",i)},h.onClick=function(t){var n=this.view,h=this._getShape(t.x,t.y)||t.currentTarget,o=this._getShapeEventObj(t);o.shape=h,i(o),n.emit("click",o),this._triggerShapeEvent(h,t.type,o),this.currentShape=h;var r=this._getPointInfo(t),a=r.views;if(!e.isEmpty(a)){var s=this._getEventObj(t,r,a);if(this.currentShape){var v=this.currentShape;s.shape=v,i(s)}"dblclick"===t.type?(n.emit("plotdblclick",s),n.emit("dblclick",o)):n.emit("plotclick",s)}},h.onTouchstart=function(e){var t=this.view,n=this._getShape(e.x,e.y)||e.currentTarget,h=this._getShapeEventObj(e);h.shape=n,i(h),t.emit("touchstart",h),this._triggerShapeEvent(n,"touchstart",h),this.currentShape=n},h.onTouchmove=function(e){var t=this.view,n=this._getShape(e.x,e.y)||e.currentTarget,h=this._getShapeEventObj(e);h.shape=n,i(h),t.emit("touchmove",h),this._triggerShapeEvent(n,"touchmove",h),this.currentShape=n},h.onTouchend=function(e){var t=this.view,n=this._getShapeEventObj(e);n.shape=this.currentShape,i(n),t.emit("touchend",n),this._triggerShapeEvent(this.currentShape,"touchend",n)},h.clearEvents=function(){var t=this.canvas;t.off("mousemove",e.getWrapBehavior(this,"onMove")),t.off("mouseleave",e.getWrapBehavior(this,"onOut")),t.off("mousedown",e.getWrapBehavior(this,"onDown")),t.off("mouseup",e.getWrapBehavior(this,"onUp")),t.off("click",e.getWrapBehavior(this,"onClick")),t.off("dblclick",e.getWrapBehavior(this,"onClick")),t.off("touchstart",e.getWrapBehavior(this,"onTouchstart")),t.off("touchmove",e.getWrapBehavior(this,"onTouchmove")),t.off("touchend",e.getWrapBehavior(this,"onTouchend"))},n}();module.exports=n;
},{"../../util":"e9Mz"}],"jaW0":[function(require,module,exports) {
"use strict";module.exports={Scale:require("./scale"),Coord:require("./coord"),Axis:require("./axis"),Guide:require("./guide"),Legend:require("./legend"),Tooltip:require("./tooltip"),Event:require("./event")};
},{"./scale":"O59g","./coord":"n1VJ","./axis":"u2eH","./guide":"Ks8S","./legend":"orqb","./tooltip":"CkX4","./event":"nH4G"}],"nmFm":[function(require,module,exports) {
"use strict";var e=require("../util"),t=require("./animate"),a=e.MatrixUtil,i=a.mat3;function n(t,a){var i=[];if(!1===t.get("animate"))return[];var r=t.get("children");return e.each(r,function(e){if(e.isGroup)i=i.concat(n(e,a));else if(e.isShape&&e._id){var t=e._id;(t=t.split("-")[0])===a&&i.push(e)}}),i}function r(t){var a={};return e.each(t,function(t){if(t._id&&!t.isClip){var i=t._id;a[i]={_id:i,type:t.get("type"),attrs:e.cloneDeep(t.attr()),name:t.name,index:t.get("index"),animateCfg:t.get("animateCfg"),coord:t.get("coord")}}}),a}function c(e,a,i,n){return n?t.Action[i][n]:t.getAnimation(e,a,i)}function o(a,i,n){var r=t.getAnimateCfg(a,i);return n&&n[i]?e.deepMix({},r,n[i]):r}function u(t,a,n,r){var u,d,f=!1;if(r){var g=[],s=[];e.each(a,function(e){var a=t[e._id];a?(e.setSilent("cacheShape",a),g.push(e),delete t[e._id]):s.push(e)}),e.each(t,function(t){var a=t.name,r=t.coord,g=t._id,s=t.attrs,l=t.index,m=t.type;if(d=o(a,"leave",t.animateCfg),u=c(a,r,"leave",d.animation),e.isFunction(u)){var p=n.addShape(m,{attrs:s,index:l});if(p._id=g,p.name=a,r&&"label"!==a){var h=p.getMatrix(),v=i.multiply([],h,r.matrix);p.setMatrix(v)}f=!0,u(p,d,r)}}),e.each(g,function(t){var a=t.name,i=t.get("coord"),n=t.get("cacheShape").attrs;if(!e.isEqual(n,t.attr())){if(d=o(a,"update",t.get("animateCfg")),u=c(a,i,"update",d.animation),e.isFunction(u))u(t,d,i);else{var r=e.cloneDeep(t.attr());t.attr(n),t.animate(r,d.duration,d.easing,function(){t.setSilent("cacheShape",null)})}f=!0}}),e.each(s,function(t){var a=t.name,i=t.get("coord");d=o(a,"enter",t.get("animateCfg")),u=c(a,i,"enter",d.animation),e.isFunction(u)&&(u(t,d,i),f=!0)})}else e.each(a,function(t){var a=t.name,i=t.get("coord");d=o(a,"appear",t.get("animateCfg")),u=c(a,i,"appear",d.animation),e.isFunction(u)&&(u(t,d,i),f=!0)});return f}module.exports={execAnimation:function(e,t){var a=e.get("middlePlot"),i=e.get("backPlot"),c=e.get("_id"),o=e.get("canvas"),d=o.get(c+"caches")||[];0===d.length&&(t=!1);var f=n(a,c),g=n(i,c),s=f.concat(g);o.setSilent(c+"caches",r(s)),u(d,t?s:f,o,t)||o.draw()}};
},{"../util":"e9Mz","./animate":"oGWs"}],"BGyn":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/assertThisInitialized")),i=e(require("@babel/runtime/helpers/inheritsLoose")),n=require("../base"),s=require("../geom/base"),r=require("../util"),a=require("./controller/index"),o=require("../global"),h=require("../theme/index"),l="_origin",c=require("../animate/index");function g(e){var t=e.startAngle,i=e.endAngle;return!(!r.isNil(t)&&!r.isNil(i)&&i-t<2*Math.PI)}function u(e,t,i){var n=(e-t)/(i-t);return n>=0&&n<=1}function f(e,t){var i=!1;if(e)if("theta"===e.type){var n=e.start,s=e.end;i=u(t.x,n.x,s.x)&&u(t.y,n.y,s.y)}else{var r=e.invert(t);i=r.x>=0&&r.y>=0&&r.x<=1&&r.y<=1}return i}var d={};r.each(s,function(e,t){var i=r.lowerFirst(t);d[i]=function(t){var i=new e(t);return this.addGeom(i),i}});var v=function(e){(0,i.default)(u,e);var n=u.prototype;function u(i){var n;n=e.call(this,i)||this;var a=(0,t.default)(n);return a._setTheme(),r.each(s,function(e,t){var i=r.lowerFirst(t);a[i]=function(t){void 0===t&&(t={}),t.viewTheme=a.get("viewTheme");var i=new e(t);return a.addGeom(i),i}}),a.init(),n}return n.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:o.animate,visible:!0}},n._setTheme=function(){var e=this.get("theme"),t={},i={};r.isObject(e)?i=e:-1!==r.indexOf(Object.keys(h),e)&&(i=h[e]),r.deepMix(t,o,i),this.set("viewTheme",t)},n.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},n._initOptions=function(){var e=this,t=r.mix({},e.get("options"));t.scales||(t.scales={}),t.coord||(t.coord={}),!1===t.animate&&this.set("animate",!1),(!1===t.tooltip||r.isNull(t.tooltip))&&this.set("tooltipEnable",!1),t.geoms&&t.geoms.length&&r.each(t.geoms,function(t){e._createGeom(t)});var i=e.get("scaleController");i&&(i.defs=t.scales);var n=e.get("coordController");n&&n.reset(t.coord),this.set("options",t)},n._createGeom=function(e){var t,i=e.type;this[i]&&(t=this[i](),r.each(e,function(e,i){var n;t[i]&&(r.isObject(e)&&e.field?"label"===e?t[i](e.field,e.callback,e.cfg):(r.each(e,function(e,t){"field"!==t&&(n=e)}),t[i](e.field,n)):t[i](e))}))},n._initControllers=function(){var e=this.get("options"),t=this.get("viewTheme"),i=this.get("canvas"),n=new a.Scale({viewTheme:t,defs:e.scales}),s=new a.Coord(e.coord);this.set("scaleController",n),this.set("coordController",s);var r=new a.Axis({canvas:i,viewTheme:t});this.set("axisController",r);var o=new a.Guide({viewTheme:t,options:e.guides||[]});this.set("guideController",o)},n._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},n._initGeoms=function(){for(var e=this.get("geoms"),t=this.get("filteredData"),i=this.get("coord"),n=this.get("_id"),s=0;s<e.length;s++){var r=e[s];r.set("data",t),r.set("coord",i),r.set("_id",n+"-geom"+s),r.set("keyFields",this.get("keyFields")),r.init()}},n._clearGeoms=function(){for(var e=this.get("geoms"),t=0;t<e.length;t++){e[t].clear()}},n._removeGeoms=function(){for(var e=this.get("geoms");e.length>0;){e.shift().destroy()}},n._drawGeoms=function(){this.emit("beforedrawgeoms");for(var e=this.get("geoms"),t=this.get("coord"),i=0;i<e.length;i++){var n=e[i];n.setCoord(t),n.paint()}this.emit("afterdrawgeoms")},n.isShapeInView=function(e){var t=this.get("_id"),i=e._id;if(i)return i.split("-")[0]===t;for(var n=e;n;){if(n.get("viewId")===t)return!0;n=n.get("parent")}return!1},n.getViewRegion=function(){var e,t,i=this.get("parent");if(i){var n=i.getViewRegion(),s=this._getViewRegion(n.start,n.end);e=s.start,t=s.end}else e=this.get("start"),t=this.get("end");return{start:e,end:t}},n._getViewRegion=function(e,t){var i=this.get("start"),n=this.get("end"),s=i.x,a=1-n.y,o=n.x,h=1-i.y,l=this.get("padding"),c=r.toAllPadding(l),g=c[0],u=c[1],f=c[2],d=c[3];return{start:{x:s*(t.x-e.x)+e.x+d,y:a*(t.y-e.y)+e.y-f},end:{x:o*(t.x-e.x)+e.x-u,y:h*(t.y-e.y)+e.y+g}}},n._createCoord=function(){var e=this.get("coordController"),t=this.getViewRegion(),i=e.createCoord(t.start,t.end);this.set("coord",i)},n._renderAxes=function(){var e=this.get("options").axes;if(!1!==e){var t=this.get("axisController");t.container=this.get("backPlot"),t.coord=this.get("coord"),t.options=e||{};var i=this.getXScale(),n=this.getYScales(),s=this.get("_id");t.createAxis(i,n,s)}},n._renderGuides=function(){var e=this.get("guideController");if(!r.isEmpty(e.options)){var t=this.get("coord");e.view=this,e.backContainer=this.get("backPlot"),e.frontContainer=this.get("frontPlot"),e.xScales=this._getScales("x"),e.yScales=this._getScales("y"),e.render(t)}},n._bindEvents=function(){var e=new a.Event({view:this,canvas:this.get("canvas")});e.bindEvents(),this.set("eventController",e)},n._clearEvents=function(){var e=this.get("eventController");e&&e.clearEvents()},n._getScales=function(e){for(var t=this.get("geoms"),i={},n=0;n<t.length;n++){var s=t[n],r="x"===e?s.getXScale():s.getYScale();r&&!i[r.field]&&(i[r.field]=r)}return i},n._adjustScale=function(){this._setCatScalesRange();for(var e=this.get("geoms"),t=this.get("scaleController").defs,i=0;i<e.length;i++){var n=e[i];if("interval"===n.get("type")){var s=n.getYScale(),r=s.field,a=s.min,o=s.max,h=s.type;t[r]&&t[r].min||"time"===h||(a>0?s.change({min:0}):o<=0&&s.change({max:0}))}}},n._setCatScalesRange=function(){var e=this.get("coord"),t=this.get("viewTheme"),i=this.getXScale(),n=this.getYScales(),s=[];i&&s.push(i),s=s.concat(n);var a=e.isPolar&&g(e),o=this.get("scaleController").defs;r.each(s,function(i){if((i.isCategory||i.isIdentity)&&i.values&&(!o[i.field]||!o[i.field].range)){var n,s=i.values.length;if(1===s)n=[.5,1];else{var r=0;n=a?e.isTransposed?[(r=1/s*t.widthRatio.multiplePie)/2,1-r/2]:[0,1-1/s]:[r=1/s*1/2,1-r]}i.range=n}})},n.getXScale=function(){var e=this.get("geoms"),t=null;return r.isEmpty(e)||(t=e[0].getXScale()),t},n.getYScales=function(){for(var e=this.get("geoms"),t=[],i=0;i<e.length;i++){var n=e[i].getYScale();n&&-1===r.indexOf(t,n)&&t.push(n)}return t},n.getXY=function(e){var t,i,n=this.get("coord"),s=this._getScales("x"),a=this._getScales("y");for(var o in e)s[o]&&(t=s[o].scale(e[o])),a[o]&&(i=a[o].scale(e[o]));return r.isNil(t)||r.isNil(i)?null:n.convert({x:t,y:i})},n.getSnapRecords=function(e){var t=this.get("geoms"),i=[];return r.each(t,function(t){var n,s=t.get("dataArray");r.each(s,function(s){(n=t.findPoint(e,s))&&i.push(n)})}),i},n.addGeom=function(e){this.get("geoms").push(e),e.set("view",this);var t=this.get("viewContainer");e.set("container",t),e.set("animate",this.get("animate")),e.bindEvents()},n.removeGeom=function(e){var t=this.get("geoms");r.Array.remove(t,e),e.destroy()},n.createScale=function(e,t){var i=this.get("scales"),n=this.get("parent"),s=i[e];if(!t){var r=this.get("filteredData"),a=this._getFieldsForLegend();t=r.length&&!a.includes(e)?r:this.get("data")}var o=this.get("scaleController");if(s){if(s.sync){var h=o.createScale(e,t);this._syncScale(s,h)}}else{if((s=o.createScale(e,t)).sync&&n){var l=n.createScale(e,t);s=this._getSyncScale(l,s)}i[e]=s}return s},n._getFieldsForLegend=function(){var e=[],t=this.get("geoms");return r.each(t,function(t){var i=t.getFieldsForLegend();e=e.concat(i)}),r.uniq(e)},n._getSyncScale=function(e,t){return e.type!==t.type?t:(this._syncScale(e,t),e)},n._syncScale=function(e,t){var i=r.union(e.values,t.values);if(t.isLinear){var n=Math.max(e.max,t.max),s=Math.min(e.min,t.min);e.max===n&&e.min===s||e.change({min:s,max:n,values:i})}i.length!==e.values.length&&e.change({values:i})},n.getFilteredValues=function(e){var t=this.get("scales")[e].values,i=this._getFilters();return i&&i[e]?t.filter(i[e]):t.slice(0)},n.getFilteredOutValues=function(e){var t=this.get("scales")[e].values,i=this._getFilters();return i&&i[e]?t.filter(function(){return!i[e].apply(i,arguments)}):[]},n.filter=function(e,t){var i=this.get("options");i.filters||(i.filters={}),i.filters[e]=t,this.get("scaleController").filters=i.filters},n._getFilters=function(){return this.get("options").filters},n.execFilter=function(e){var t=this._getFilters();return t&&(e=e.filter(function(e){var i=!0;return r.each(t,function(t,n){if(t&&!(i=t(e[n],e)))return!1}),i})),e},n.axis=function(e,t){var i=this.get("options");!1===e?i.axes=!1:(i.axes||(i.axes={}),i.axes[e]=t);return this},n.guide=function(){return this.get("guideController")},n._getKeyFields=function(e){var t=[];r.each(e,function(e,i){e.key&&t.push(i)}),this.set("keyFields",t)},n.scale=function(e,t){var i=this.get("options").scales;return r.isObject(e)?r.mix(i,e):i[e]=t,this._getKeyFields(i),this},n.tooltip=function(e){return this.set("tooltipEnable",e),this},n.animate=function(e){return this.get("options").animate=e,this.set("animate",e),this},n.changeOptions=function(e){return this.set("options",e),this._initOptions(e),this},n.getViewsByPoint=function(e){var t=[],i=this.get("views");return f(this.get("coord"),e)&&t.push(this),r.each(i,function(i){i.get("visible")&&f(i.get("coord"),e)&&t.push(i)}),t},n.eachShape=function(e){var t=this,i=t.get("views"),n=t.get("canvas");r.each(i,function(t){t.eachShape(e)});var s=this.get("geoms");return r.each(s,function(i){var n=i.getShapes();r.each(n,function(n){var s=n.get("origin");if(r.isArray(s)){var a=s.map(function(e){return e[l]});e(a,n,i,t)}else{var o=s[l];e(o,n,i,t)}})}),n.draw(),this},n.filterShape=function(e){return this.eachShape(function(t,i,n,s){e(t,i,n,s)?i.show():i.hide()}),this},n.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner"),this.get("options").geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},n.clear=function(){return this.get("options").filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},n.coord=function(e,t){var i=this.get("coordController");return i.reset({type:e,cfg:t}),i},n.resetCoord=function(){this._createCoord()},n.source=function(e,t){return this._initData(e),t&&this.scale(t),this.emit("setdata"),this},n.changeData=function(e){return this.emit("beforechangedata"),this._initData(e),this.emit("afterchangedata"),this.repaint(),this},n._initData=function(e){var t=this.get("dataView");t&&(t.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),e&&e.isDataView&&(e.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",e),e=e.rows),this.set("data",e)},n._onViewChange=function(){this.emit("beforechangedata");var e=this.get("dataView").rows;this.set("data",e),this.emit("afterchangedata"),this.repaint()},n.beforeRender=function(){var e=this.get("views");r.each(e,function(e){e.beforeRender()}),this.initView()},n.drawComponents=function(){var e=this.get("views");r.each(e,function(e){e.drawComponents()}),this._renderAxes(),this._renderGuides()},n.drawCanvas=function(e){if(!e){var t=this.get("views");this.get("backPlot").sort();var i=this.get("canvas");if(this.get("animate")){var n=this.get("isUpdate");r.each(t,function(e){c.execAnimation(e,n)}),c.execAnimation(this,n)}else i.draw()}},n.render=function(e){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(e),this.emit("afterrender"),this.set("rendered",!0),this},n.initView=function(){var e=this.get("data")||[],t=this.execFilter(e);this.set("filteredData",t),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},n.paint=function(){var e=this.get("views");r.each(e,function(e){e.paint()});var t=this.get("data");r.isEmpty(t)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},n.changeVisible=function(e,t){var i=this.get("geoms");(r.each(i,function(t){t.changeVisible(e,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(e),this.get("guideController")&&this.get("guideController").changeVisible(e),t)||this.get("canvas").draw()},n.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},n.destroy=function(){this._clearEvents();var t=this.get("dataView");t&&t.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),e.prototype.destroy.call(this)},u}(n);module.exports=v;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inheritsLoose":"HOM9","../base":"iLmk","../geom/base":"TmXc","../util":"e9Mz","./controller/index":"jaW0","../global":"xYEG","../theme/index":"DDzN","../animate/index":"nmFm"}],"fUXC":[function(require,module,exports) {
"use strict";var t=require("../util"),e=require("../renderer"),i=e.Group,a="auto",r=function t(e){t.superclass.constructor.call(this,e)};t.extend(r,i),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var e=this.get("background");if(e){var i=this.get("canvas"),a={x:0,y:0,width:this.get("width")||i.get("width"),height:this.get("height")||i.get("height")},r=this.get("backgroundShape");r?r.attr(a):(r=this.addShape("rect",{attrs:t.mix(a,e)}),this.set("backgroundShape",r))}},_renderPlotBackground:function(){var e=this.get("plotBackground");if(e){var i=this.get("plotRange"),a=i.br.x-i.bl.x,r=i.br.y-i.tr.y,n=i.tl,h={x:n.x,y:n.y,width:a,height:r},g=this.get("plotBackShape");g?g.attr(h):(e.image?(h.img=e.image,g=this.addShape("image",{attrs:h})):(t.mix(h,e),g=this.addShape("rect",{attrs:h})),this.set("plotBackShape",g))}},_convert:function(e,i){if(t.isString(e))if(e===a)e=0;else if(e.includes("%")){var r=this.get("canvas"),n=this.get("width")||r.get("width"),h=this.get("height")||r.get("height");e=parseInt(e,10)/100,e=i?e*n:e*h}return e},_calculateRange:function(){var e=this.get("plotRange");t.isNil(e)&&(e={});var i=this.get("padding"),a=this.get("canvas"),r=this.get("width")||a.get("width"),n=this.get("height")||a.get("height"),h=t.toAllPadding(i),g=this._convert(h[0],!1),s=this._convert(h[1],!0),c=this._convert(h[2],!1),o=this._convert(h[3],!0),d=Math.min(o,r-s),u=Math.max(o,r-s),l=Math.min(n-c,g),p=Math.max(n-c,g);e.tl={x:d,y:l},e.tr={x:u,y:l},e.bl={x:d,y:p},e.br={x:u,y:p},e.cc={x:(u+d)/2,y:(p+l)/2},this.set("plotRange",e)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),module.exports=r;
},{"../util":"e9Mz","../renderer":"MVGo"}],"TGrn":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),e=t(require("@babel/runtime/helpers/inheritsLoose")),i=require("../util"),n=require("./view"),o=require("../renderer"),r=o.Canvas,a=i.DomUtil,s=require("../global"),l=require("../component/plot"),h=require("./controller/index"),g=require("./util/merge-bbox"),d=require("./util/bbox-of-back-plot"),c=require("./util/plot-range2bbox"),p="auto";function u(t,e){var n=!1;return i.each(t,function(t){var i=[].concat(t.values),o=[].concat(e.values);t.type!==e.type||t.field!==e.field||i.sort().toString()!==o.sort().toString()||(n=!0)}),n}function v(t,e){return i.isEqualWith(t,e,function(t,e){return t===e})}var f=function(t){function o(){return t.apply(this,arguments)||this}(0,e.default)(o,t);var f=o.prototype;return f.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix(e,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:s.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:s.renderer,views:[]})},f.init=function(){var e=this.get("viewTheme");this._initCanvas(),this._initPlot(),this._initEvents(),t.prototype.init.call(this);var i=new h.Tooltip({chart:this,viewTheme:e,options:{}});this.set("tooltipController",i);var n=new h.Legend({chart:this,viewTheme:e});this.set("legendController",n),this.set("_id","chart"),this.emit("afterinit")},f._isAutoPadding=function(){var t=this.get("padding");return i.isArray(t)?t.includes(p):t===p},f._getAutoPadding=function(){for(var t=this.get("padding"),e=this.get("frontPlot").getBBox(),n=this.get("backPlot"),o=d(n,c(this.get("plotRange"))),r=g(e,o),a=[0-r.minY,r.maxX-this.get("width"),r.maxY-this.get("height"),0-r.minX],s=i.toAllPadding(t),l=0;l<s.length;l++)if(s[l]===p){var h=Math.max(0,a[l]);s[l]=h+this.get("autoPaddingAppend")}return s},f._initCanvas=function(){var t=this.get("container"),e=this.get("id");!t&&e&&(t=e,this.set("container",e));var n=this.get("width"),o=this.get("height");if(i.isString(t)){if(!(t=document.getElementById(t)))throw new Error("Please specify the container for the chart!");this.set("container",t)}var s=a.createDom('<div style="position:relative;"></div>');t.appendChild(s),this.set("wrapperEl",s),this.get("forceFit")&&(n=a.getWidth(t,n),this.set("width",n));var l=this.get("renderer"),h=new r({containerDOM:s,width:n,height:o,pixelRatio:"svg"===l?1:this.get("pixelRatio"),renderer:l});this.set("canvas",h)},f._initPlot=function(){this._initPlotBack();var t=this.get("canvas"),e=t.addGroup({zIndex:1}),i=t.addGroup({zIndex:0}),n=t.addGroup({zIndex:3});this.set("backPlot",e),this.set("middlePlot",i),this.set("frontPlot",n)},f._initPlotBack=function(){var t=this.get("canvas"),e=this.get("viewTheme"),n=t.addGroup(l,{padding:this.get("padding"),plotBackground:i.mix({},e.plotBackground,this.get("plotBackground")),background:i.mix({},e.background,this.get("background"))});this.set("plot",n),this.set("plotRange",n.get("plotRange"))},f._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",i.wrapBehavior(this,"_initForceFitEvent"))},f._initForceFitEvent=function(){var t=setTimeout(i.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",t)},f._renderLegends=function(){var t=this.get("options").legends;if(i.isNil(t)||!1!==t){var e=this.get("legendController");if(e.options=t||{},e.plotRange=this.get("plotRange"),t&&t.custom)e.addCustomLegend();else{var n=this.getAllGeoms(),o=[];i.each(n,function(t){var n=t.get("view"),r=t.getAttrsForLegend();i.each(r,function(i){var r=i.type,a=i.getScale(r);if(a.field&&"identity"!==a.type&&!u(o,a)){o.push(a);var s=n.getFilteredOutValues(a.field);e.addLegend(a,i,t,s)}})});var r=this.getYScales();0===o.length&&r.length>1&&e.addMixedLegend(r,n)}e.alignLegends()}},f._renderTooltips=function(){var t=this.get("options");if(i.isNil(t.tooltip)||!1!==t.tooltip){var e=this.get("tooltipController");e.options=t.tooltip||{},e.renderTooltip()}},f.getAllGeoms=function(){var t=[];t=t.concat(this.get("geoms"));var e=this.get("views");return i.each(e,function(e){t=t.concat(e.get("geoms"))}),t},f.forceFit=function(){if(this&&!this.destroyed){var t=this.get("container"),e=this.get("width"),i=a.getWidth(t,e);if(0!==i&&i!==e){var n=this.get("height");this.changeSize(i,n)}return this}},f.resetPlot=function(){var t=this.get("plot"),e=this.get("padding");v(e,t.get("padding"))||(t.set("padding",e),t.repaint())},f.changeSize=function(t,e){this.get("canvas").changeSize(t,e);var i=this.get("plot");return this.set("width",t),this.set("height",e),i.repaint(),this.set("keepPadding",!0),this.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),this},f.changeWidth=function(t){return this.changeSize(t,this.get("height"))},f.changeHeight=function(t){return this.changeSize(this.get("width"),t)},f.view=function(t){(t=t||{}).theme=this.get("theme"),t.parent=this,t.backPlot=this.get("backPlot"),t.middlePlot=this.get("middlePlot"),t.frontPlot=this.get("frontPlot"),t.canvas=this.get("canvas"),i.isNil(t.animate)&&(t.animate=this.get("animate")),t.options=i.mix({},this._getSharedOptions(),t.options);var e=new n(t);return e.set("_id","view"+this.get("views").length),this.get("views").push(e),this.emit("addview",{view:e}),e},f.removeView=function(t){var e=this.get("views");i.Array.remove(e,t),t.destroy()},f._getSharedOptions=function(){var t=this.get("options"),e={};return i.each(["scales","coord","axes"],function(n){e[n]=i.cloneDeep(t[n])}),e},f.getViewRegion=function(){var t=this.get("plotRange");return{start:t.bl,end:t.tr}},f.legend=function(t,e){var n=this.get("options");n.legends||(n.legends={});var o={};return!1===t?n.legends=!1:i.isObject(t)?o=t:i.isString(t)?o[t]=e:o=e,i.mix(n.legends,o),this},f.tooltip=function(t,e){var n=this.get("options");return n.tooltip||(n.tooltip={}),!1===t?n.tooltip=!1:i.isObject(t)?i.mix(n.tooltip,t):i.mix(n.tooltip,e),this},f.clear=function(){this.emit("beforeclear");for(var e=this.get("views");e.length>0;){e.shift().destroy()}t.prototype.clear.call(this);var i=this.get("canvas");return this.resetPlot(),i.draw(),this.emit("afterclear"),this},f.clearInner=function(){var e=this.get("views");i.each(e,function(t){t.clearInner()});var n=this.get("tooltipController");if(n&&n.clear(),!this.get("keepLegend")){var o=this.get("legendController");o&&o.clear()}t.prototype.clearInner.call(this)},f.drawComponents=function(){t.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},f.render=function(){if(!this.get("keepPadding")&&this._isAutoPadding()){this.beforeRender(),this.drawComponents();var e=this._getAutoPadding(),n=this.get("plot");v(n.get("padding"),e)||(n.set("padding",e),n.repaint())}var o=this.get("middlePlot");if(this.get("limitInPlot")&&!o.attr("clip")){var r=i.getClipByRange(this.get("plotRange"));o.attr("clip",r)}t.prototype.render.call(this),this._renderTooltips()},f.repaint=function(){this.get("keepPadding")||this.resetPlot(),t.prototype.repaint.call(this)},f.changeVisible=function(t){var e=t?"":"none";this.get("wrapperEl").style.display=e},f.toDataURL=function(){var t=this.get("canvas"),e=this.get("renderer"),i=t.get("el"),n="";if("svg"===e){var o=i.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),a=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);a.replaceChild(o,a.documentElement);var s=(new XMLSerializer).serializeToString(a);n="data:image/svg+xml;charset=utf8,"+encodeURIComponent(s)}else"canvas"===e&&(n=i.toDataURL("image/png"));return n},f.downloadImage=function(t){var e=this,i=document.createElement("a"),n=e.get("renderer"),o=(t||"chart")+("svg"===n?".svg":".png");e.get("canvas").get("timeline").stopAllAnimations(),setTimeout(function(){var t=e.toDataURL();if(window.Blob&&window.URL&&"svg"!==n){for(var r=t.split(","),a=r[0].match(/:(.*?);/)[1],s=atob(r[1]),l=s.length,h=new Uint8Array(l);l--;)h[l]=s.charCodeAt(l);var g=new Blob([h],{type:a});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,o):i.addEventListener("click",function(){i.download=o,i.href=window.URL.createObjectURL(g)})}else i.addEventListener("click",function(){i.download=o,i.href=t});var d=document.createEvent("MouseEvents");d.initEvent("click",!1,!1),i.dispatchEvent(d)},16)},f.showTooltip=function(t){var e=this.getViewsByPoint(t);e.length&&this.get("tooltipController").showTooltip(t,e);return this},f.lockTooltip=function(){return this.get("tooltipController").lockTooltip(),this},f.unlockTooltip=function(){return this.get("tooltipController").unlockTooltip(),this},f.hideTooltip=function(){return this.get("tooltipController").hideTooltip(),this},f.getTooltipItems=function(t){var e=this.getViewsByPoint(t),n=[];return i.each(e,function(e){var o=e.get("geoms");i.each(o,function(e){var o=e.get("dataArray"),r=[];i.each(o,function(i){var n=e.findPoint(t,i);if(n){var o=e.getTipItems(n);r=r.concat(o)}}),n=n.concat(r)})}),n},f.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var e=this.get("canvas"),n=this.get("wrapperEl");n.parentNode.removeChild(n),t.prototype.destroy.call(this),e.destroy(),window.removeEventListener("resize",i.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},o}(n);module.exports=f;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","../util":"e9Mz","./view":"BGyn","../renderer":"MVGo","../global":"xYEG","../component/plot":"fUXC","./controller/index":"jaW0","./util/merge-bbox":"WEC9","./util/bbox-of-back-plot":"zkk5","./util/plot-range2bbox":"rg71"}],"fbT2":[function(require,module,exports) {
"use strict";var e=require("@antv/scale/lib"),r=require("./renderer"),i=require("./animate/animate"),t=require("./chart/chart"),a=require("./global"),n=require("./geom/shape/shape"),o=require("./util"),l={version:a.version,Animate:i,Chart:t,Global:a,Scale:e,Shape:n,Util:o,G:r,DomUtil:o.DomUtil,MatrixUtil:o.MatrixUtil,PathUtil:o.PathUtil,track:function(){console.warn("G2 tracks nothing ;-)")}};"undefined"!=typeof window&&(window.G2?console.warn("There are multiple versions of G2. Version "+l.version+"'s reference is 'window.G2_3'"):window.G2=l),module.exports=l;
},{"@antv/scale/lib":"vJDD","./renderer":"MVGo","./animate/animate":"oGWs","./chart/chart":"TGrn","./global":"xYEG","./geom/shape/shape":"oHc5","./util":"e9Mz"}],"NHyE":[function(require,module,exports) {
"use strict";var i=require("../../util"),e=require("../../global");module.exports={splitData:function(t){var r=this.get("viewTheme")||e;if(!t.length)return[];var l,s=[],u=[],n=this.getYScale().field;return i.each(t,function(e){l=e._origin?e._origin[n]:e[n],r.connectNulls?i.isNil(l)||u.push(e):i.isArray(l)&&i.isNil(l[0])||i.isNil(l)?u.length&&(s.push(u),u=[]):u.push(e)}),u.length&&s.push(u),s}};
},{"../../util":"e9Mz","../../global":"xYEG"}],"fCvN":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/assertThisInitialized")),r=e(require("@babel/runtime/helpers/inheritsLoose")),i=require("./base"),a=require("./mixin/split"),s=require("../util"),n=function(e){(0,r.default)(n,e);var i=n.prototype;function n(r){var i;return i=e.call(this,r)||this,s.assign((0,t.default)(i),a),i}return i.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.type="path",t.shapeType="line",t},i.getDrawCfg=function(t){var r=e.prototype.getDrawCfg.call(this,t);return r.isStack=this.hasStack(),r},i.draw=function(e,t,r,i){var a=this,n=this.splitData(e),p=this.getDrawCfg(e[0]);a._applyViewThemeShapeStyle(p,p.shape,r),p.origin=e,s.each(n,function(e,n){if(!s.isEmpty(e)){p.splitedIndex=n,p.points=e;var u=r.drawShape(p.shape,p,t);a.appendShapeInfo(u,i+n)}})},n}(i);i.Path=n,module.exports=n;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inheritsLoose":"HOM9","./base":"TmXc","./mixin/split":"NHyE","../util":"e9Mz"}],"cgEG":[function(require,module,exports) {
"use strict";var t=require("../../util"),i={splitPoints:function(i){var o=[],r=i.x,c=i.y;return c=t.isArray(c)?c:[c],t.each(c,function(i,c){var a={x:t.isArray(r)?r[c]:r,y:i};o.push(a)}),o},addFillAttrs:function(i,o){o.color&&(i.fill=o.color),t.isNumber(o.opacity)&&(i.opacity=i.fillOpacity=o.opacity)},addStrokeAttrs:function(i,o){o.color&&(i.stroke=o.color),t.isNumber(o.opacity)&&(i.opacity=i.strokeOpacity=o.opacity)}};module.exports=i;
},{"../../util":"e9Mz"}],"a9RW":[function(require,module,exports) {
"use strict";var t=require("../../util"),r=require("../util/path"),n=require("../util/shape"),e=require("./shape"),i=require("../../global"),a=[1,1],u=[5.5,1];function h(r){var e=i.shape.line,a=t.mix({},e,r.style);return n.addStrokeAttrs(a,r),r.size&&(a.lineWidth=r.size),a}function s(r){var e=i.shape.line,a=t.mix({lineWidth:2,radius:6},e,r.style);return n.addStrokeAttrs(a,r),a}function o(t,r,e,i){for(var a=[],u=i.isStack,h=[],s=0;s<t.length;s++){var o=t[s],c=n.splitPoints(o);h.push(c[0]),a.push(c[1])}var f=p(a,r,e,i),d=p(h,r,e,i);return u?f:f.concat(d)}function p(t,n,e,i){var a;if(n){var u=i.constraint;e&&t.length&&t.push({x:t[0].x,y:t[0].y}),a=r.getSplinePath(t,!1,u)}else a=r.getLinePath(t,!1),e&&a.push(["Z"]);return a}function c(r,n){var e=r.points,i=r.isInCircle,a=e[0];return t.isArray(a.y)?o(e,n,i,r):p(e,n,i,r)}function f(r,n){var e=[];return t.each(r,function(t,i){var a=r[i+1];e.push(t),a&&(e=e.concat(n(t,a)))}),e}function d(r){var n=[];return t.each(r,function(t,r){var e=0===r?["M",t.x,t.y]:["L",t.x,t.y];n.push(e)}),n}function l(t,r){return d(f(t.points,r))}function g(t,r,n){return[["M",t-n,r],["L",t+n,r]]}function v(t,r,n){return[["M",t-n,r],["A",n/2,n/2,0,1,1,t,r],["A",n/2,n/2,0,1,0,t+n,r]]}function x(r,n){return t.mix({symbol:n?v:g},s(r))}function y(r,n){return t.mix({symbol:n},s(r))}function S(r,n,e){var i=n.points[0];return e.addShape("circle",{attrs:t.mix({x:i.x,y:i.y,r:2,fill:n.color},n.style)})}var m=e.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(t,r){return{lineWidth:(r.lineWidth||0)+1}},getDefaultPoints:function(t){return n.splitPoints(t)},drawShape:function(t,r,n){var e,a=this.getShape(t);return(e=1===r.points.length&&i.showSinglePoint?S(this,r,n):a.draw(r,n))&&(e.set("origin",r.origin),e._id=r.splitedIndex?r._id+r.splitedIndex:r._id,e.name=this.name),e}});e.registerShape("line","line",{draw:function(r,n){var e=h(r),i=c(r,!1);return n.addShape("path",{attrs:t.mix(e,{path:i})})},getMarkerCfg:function(t){return x(t)}}),e.registerShape("line","dot",{draw:function(r,n){var e=h(r),i=c(r,!1);return n.addShape("path",{attrs:t.mix(e,{path:i,lineDash:a})})},getMarkerCfg:function(t){var r=x(t,!1);return r.lineDash=a,r}}),e.registerShape("line","dash",{draw:function(r,n){var e=h(r),i=c(r,!1);return n.addShape("path",{attrs:t.mix({path:i,lineDash:u},e)})},getMarkerCfg:function(t){var r=x(t,!1);return r.lineDash=r.lineDash||u,r}}),e.registerShape("line","smooth",{draw:function(r,n){var e=h(r),i=this._coord;r.constraint=[[i.start.x,i.end.y],[i.end.x,i.start.y]];var a=c(r,!0);return n.addShape("path",{attrs:t.mix(e,{path:a})})},getMarkerCfg:function(t){return x(t,!0)}}),e.registerShape("line","hv",{draw:function(r,n){var e=h(r),i=l(r,function(t,r){var n=[];return n.push({x:r.x,y:t.y}),n});return n.addShape("path",{attrs:t.mix(e,{path:i})})},getMarkerCfg:function(t){return y(t,function(t,r,n){return[["M",t-n-1,r-2.5],["L",t,r-2.5],["L",t,r+2.5],["L",t+n+1,r+2.5]]})}}),e.registerShape("line","vh",{draw:function(r,n){var e=h(r),i=l(r,function(t,r){var n=[];return n.push({x:t.x,y:r.y}),n});return n.addShape("path",{attrs:t.mix(e,{path:i})})},getMarkerCfg:function(t){return y(t,function(t,r,n){return[["M",t-n-1,r+2.5],["L",t,r+2.5],["L",t,r-2.5],["L",t+n+1,r-2.5]]})}}),e.registerShape("line","hvh",{draw:function(r,n){var e=h(r),i=l(r,function(t,r){var n=[],e=(r.x-t.x)/2+t.x;return n.push({x:e,y:t.y}),n.push({x:e,y:r.y}),n});return n.addShape("path",{attrs:t.mix(e,{path:i})})},getMarkerCfg:function(t){return y(t,function(t,r,n){return[["M",t-(n+1),r+2.5],["L",t-n/2,r+2.5],["L",t-n/2,r-2.5],["L",t+n/2,r-2.5],["L",t+n/2,r+2.5],["L",t+n+1,r+2.5]]})}}),e.registerShape("line","vhv",{draw:function(r,n){var e=h(r),i=l(r,function(t,r){var n=[],e=(r.y-t.y)/2+t.y;return n.push({x:t.x,y:e}),n.push({x:r.x,y:e}),n});return n.addShape("path",{attrs:t.mix(e,{path:i})})},getMarkerCfg:function(t){return y(t,function(t,r){return[["M",t-5,r+2.5],["L",t-5,r],["L",t,r],["L",t,r-3],["L",t,r+3],["L",t+6.5,r+3]]})}}),m.spline=m.smooth,module.exports=m;
},{"../../util":"e9Mz","../util/path":"ER9l","../util/shape":"cgEG","./shape":"oHc5","../../global":"xYEG"}],"fImh":[function(require,module,exports) {
"use strict";var e=require("@babel/runtime/helpers/interopRequireDefault"),t=e(require("@babel/runtime/helpers/inheritsLoose")),r=require("./base"),u=require("./path");require("./shape/line");var i=function(e){function r(){return e.apply(this,arguments)||this}return(0,t.default)(r,e),r.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.type="line",t.sortable=!0,t},r}(u),a=function(e){function r(){return e.apply(this,arguments)||this}return(0,t.default)(r,e),r.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.hasDefaultAdjust=!0,t.adjusts=[{type:"stack"}],t},r}(i);i.Stack=a,r.Line=i,r.LineStack=a,module.exports=i;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","./base":"TmXc","./path":"fCvN","./shape/line":"a9RW"}],"Smcd":[function(require,module,exports) {
"use strict";var r=require("../../util"),t=require("../util/shape"),e=require("../../global"),i=require("./shape"),a=require("../../renderer"),n=a.Marker,s=r.PathUtil,o=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],u=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],p=Math.sqrt(3);function l(i){var a=e.shape.point,n=r.mix({},a,i.style);return t.addFillAttrs(n,i),r.isNumber(i.size)&&(n.radius=i.size),n}function h(i){var a=e.shape.hollowPoint,n=r.mix({},a,i.style);return t.addStrokeAttrs(n,i),r.isNumber(i.size)&&(n.radius=i.size),n}r.mix(n.Symbols,{hexagon:function(r,t,e){var i=e/2*p;return[["M",r,t-e],["L",r+i,t-e/2],["L",r+i,t+e/2],["L",r,t+e],["L",r-i,t+e/2],["L",r-i,t-e/2],["Z"]]},bowtie:function(r,t,e){var i=e-1.5;return[["M",r-e,t-i],["L",r+e,t+i],["L",r+e,t-i],["L",r-e,t+i],["Z"]]},cross:function(r,t,e){return[["M",r-e,t-e],["L",r+e,t+e],["M",r+e,t-e],["L",r-e,t+e]]},tick:function(r,t,e){return[["M",r-e/2,t-e],["L",r+e/2,t-e],["M",r,t-e],["L",r,t+e],["M",r-e/2,t+e],["L",r+e/2,t+e]]},plus:function(r,t,e){return[["M",r-e,t],["L",r+e,t],["M",r,t-e],["L",r,t+e]]},hyphen:function(r,t,e){return[["M",r-e,t],["L",r+e,t]]},line:function(r,t,e){return[["M",r,t-e],["L",r,t+e]]}});var d=i.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(t,e){var i,a=e.radius;return{radius:a+1,shadowBlur:a,shadowColor:i=t&&(0===t.indexOf("hollow")||-1!==r.indexOf(u,t))||!t?e.stroke||e.strokeStyle:e.fill||e.fillStyle,stroke:i,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(r){return t.splitPoints(r)}});function c(r){var t=r.points[0].x,e=r.points[0].y,i=r.size[0],a=r.size[1];return[["M",t-.5*i,e-.5*a],["L",t+.5*i,e-.5*a],["L",t+.5*i,e+.5*a],["L",t-.5*i,e+.5*a],["z"]]}i.registerShape("point","rect",{draw:function(t,e){var i=l(t),a=c(t);return a=this.parsePath(a),e.addShape("path",{attrs:r.mix(i,{path:a})})},getMarkerCfg:function(r){var t=l(r);return t.symbol="rect",t.radius=4.5,t}}),r.each(o,function(t){i.registerShape("point",t,{draw:function(e,i){var a=l(e);return i.addShape("Marker",{attrs:r.mix(a,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(r){var e=l(r);return e.symbol=t,e.radius=4.5,e}}),i.registerShape("point","hollow"+r.upperFirst(t),{draw:function(e,i){var a=h(e);return i.addShape("Marker",{attrs:r.mix(a,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(r){var e=h(r);return e.symbol=t,e.radius=4.5,e}})}),r.each(u,function(t){i.registerShape("point",t,{draw:function(e,i){var a=h(e);return i.addShape("Marker",{attrs:r.mix(a,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(r){var e=h(r);return e.symbol=t,e.radius=4.5,e}})}),i.registerShape("point","image",{draw:function(r,t){return r.points=this.parsePoints(r.points),t.addShape("image",{attrs:{x:r.points[0].x-r.size/2,y:r.points[0].y-r.size,width:r.size,height:r.size,img:r.shape[1]}})}});var f={};i.registerShape("point","path",{draw:function(t,e){var i,a=r.mix({},h(t),l(t)),n=t.shape[1],o=t.size||10;if(f[n])i=f[n];else{var u=s.parsePathString(n),p=r.flatten(u).filter(function(t){return r.isNumber(t)});f[n]=i={range:Math.max.apply(null,p)-Math.min.apply(null,p),segments:u}}var d=o/i.range,c=[];a.rotate&&(c.push(["r",a.rotate/180*Math.PI]),delete a.rotate);var g=e.addShape("path",{attrs:r.mix(a,{path:i.segments})});return c.push(["s",d,d],["t",t.x,t.y]),g.transform(c),g}}),module.exports=d;
},{"../../util":"e9Mz","../util/shape":"cgEG","../../global":"xYEG","./shape":"oHc5","../../renderer":"MVGo"}],"DqTl":[function(require,module,exports) {
"use strict";var t=require("@babel/runtime/helpers/interopRequireDefault"),e=t(require("@babel/runtime/helpers/inheritsLoose")),r=require("./base"),a=require("../util");require("./shape/point");var i=function(t){function r(){return t.apply(this,arguments)||this}(0,e.default)(r,t);var i=r.prototype;return i.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="point",e.shapeType="point",e.generatePoints=!0,e},i.drawPoint=function(t,e,r,i){var n,u=this,p=t.shape,o=u.getDrawCfg(t);if(u._applyViewThemeShapeStyle(o,p,r),a.isArray(t.y)){var s=u.hasStack();a.each(t.y,function(t,a){o.y=t,o.yIndex=a,s&&0===a||(n=r.drawShape(p,o,e),u.appendShapeInfo(n,i+a))})}else a.isNil(t.y)||(n=r.drawShape(p,o,e),u.appendShapeInfo(n,i))},r}(r),n=function(t){function r(){return t.apply(this,arguments)||this}return(0,e.default)(r,t),r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"jitter"}],e},r}(i),u=function(t){function r(){return t.apply(this,arguments)||this}return(0,e.default)(r,t),r.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"stack"}],e},r}(i);i.Jitter=n,i.Stack=u,r.Point=i,r.PointJitter=n,r.PointStack=u,module.exports=i;
},{"@babel/runtime/helpers/interopRequireDefault":"SpGf","@babel/runtime/helpers/inheritsLoose":"HOM9","./base":"TmXc","../util":"e9Mz","./shape/point":"Smcd"}],"Qa38":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderLiner=void 0;var e=require("@antv/g2/lib/core");require("@antv/g2/lib/geom/line"),require("@antv/g2/lib/geom/point");var t=function(){var t=new e.Chart({container:"c1",width:600,height:300});fetch("https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/cases_time/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=Report_Date%20asc&outSR=102100&resultOffset=0&resultRecordCount=2000&cacheHint=true").then(function(e){return e.json()}).then(function(e){var o=[];e.features.map(function(e){var t=e.attributes,a=t.Total_Confirmed,i=t.Mainland_China,r=t.Other_Locations,n=t.Report_Date;n=new Date(n).toLocaleDateString(),a&&(o.push({type:"总数",value:a,date:n}),o.push({type:"国内",value:i,date:n}),o.push({type:"国外",value:r,date:n}))}),t.source(o,{data:{type:"linear"}}),t.tooltip({crosshairs:!0}),t.axis("Mainland_China",{position:"left"}),t.axis("Other_Locations",{position:"left"}),t.line().position("date*value").shape("smooth").color("type"),t.line().position("date*value").shape("smooth").color("type"),t.line().position("date*value").shape("smooth").color("type"),t.point().position("date*value"),t.point().position("date*value"),t.point().position("date*value"),t.render()})};exports.renderLiner=t;
},{"@antv/g2/lib/core":"fbT2","@antv/g2/lib/geom/line":"fImh","@antv/g2/lib/geom/point":"DqTl"}],"kpD3":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"npqE":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var t,e=arguments[3],r=require("process");!function(t){!function(n){var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=u(t);function u(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===i.Reflect?i.Reflect=t:o=u(i.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,a={__proto__:[]}instanceof Array,f=!u&&!a,c={create:u?function(){return I(Object.create(null))}:a?function(){return I({__proto__:null})}:function(){return I({})},has:f?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:f?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},s=Object.getPrototypeOf(Function),h="object"==typeof r&&r.env&&!1,y=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,u)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function i(t,e){return e}function u(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new y}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,l=new(h||"function"!=typeof WeakMap?function(){var t=16,r=c.create(),n=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){var r=o(t,!0);return r[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+a()}while(c.has(r,t));return r[t]=!0,t}function o(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function u(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(){var e=function(t){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):u(new Uint8Array(t),t);return u(new Array(t),t)}(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var i=e[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function v(t,e,r){var n=l.get(t);if(k(n)){if(!r)return;n=new y,l.set(t,n)}var i=n.get(e);if(k(i)){if(!r)return;i=new y,n.set(e,i)}return i}function _(t,e,r){var n=v(e,r,!1);return!k(n)&&!!n.has(t)}function d(t,e,r){var n=v(e,r,!1);if(!k(n))return n.get(t)}function w(t,e,r,n){var i=v(r,n,!0);i.set(t,e)}function g(t,e){var r=[],n=v(t,e,!1);if(k(n))return r;for(var i=n.keys(),u=function(t){var e=A(t,o);if(!x(e))throw new TypeError;var r=e.call(t);if(!O(r))throw new TypeError;return r}(i),a=0;;){var f=S(u);if(!f)return r.length=a,r;var c=f.value;try{r[a]=c}catch(s){try{P(u)}finally{throw s}}a++}}function b(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function k(t){return void 0===t}function m(t){return null===t}function O(t){return"object"==typeof t?null!==t:"function"==typeof t}function E(t,e){switch(b(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",n=A(t,i);if(void 0!==n){var o=n.call(t,r);if(O(o))throw new TypeError;return o}return function(t,e){if("string"===e){var r=t.toString;if(x(r)){var n=r.call(t);if(!O(n))return n}var i=t.valueOf;if(x(i)){var n=i.call(t);if(!O(n))return n}}else{var i=t.valueOf;if(x(i)){var n=i.call(t);if(!O(n))return n}var o=t.toString;if(x(o)){var n=o.call(t);if(!O(n))return n}}throw new TypeError}(t,"default"===r?"number":r)}function T(t){var e=E(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function j(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function x(t){return"function"==typeof t}function M(t){return"function"==typeof t}function A(t,e){var r=t[e];if(null!=r){if(!x(r))throw new TypeError;return r}}function S(t){var e=t.next();return!e.done&&e}function P(t){var e=t.return;e&&e.call(t)}function K(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===s)return e;if(e!==s)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var i=n.constructor;return"function"!=typeof i?e:i===t?e:i}function I(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,r,n){if(k(r)){if(!j(t))throw new TypeError;if(!M(e))throw new TypeError;return function(t,e){for(var r=t.length-1;r>=0;--r){var n=t[r],i=n(e);if(!k(i)&&!m(i)){if(!M(i))throw new TypeError;e=i}}return e}(t,e)}if(!j(t))throw new TypeError;if(!O(e))throw new TypeError;if(!O(n)&&!k(n)&&!m(n))throw new TypeError;return m(n)&&(n=void 0),r=T(r),function(t,e,r,n){for(var i=t.length-1;i>=0;--i){var o=t[i],u=o(e,r,n);if(!k(u)&&!m(u)){if(!O(u))throw new TypeError;n=u}}return n}(t,e,r,n)}),t("metadata",function(t,e){return function(r,n){if(!O(r))throw new TypeError;if(!k(n)&&!function(t){switch(b(t)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;w(t,e,r,n)}}),t("defineMetadata",function(t,e,r,n){if(!O(r))throw new TypeError;k(n)||(n=T(n));return w(t,e,r,n)}),t("hasMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return function t(e,r,n){var i=_(e,r,n);if(i)return!0;var o=K(r);if(!m(o))return t(e,o,n);return!1}(t,e,r)}),t("hasOwnMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return _(t,e,r)}),t("getMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return function t(e,r,n){var i=_(e,r,n);if(i)return d(e,r,n);var o=K(r);if(!m(o))return t(e,o,n);return}(t,e,r)}),t("getOwnMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));return d(t,e,r)}),t("getMetadataKeys",function(t,e){if(!O(t))throw new TypeError;k(e)||(e=T(e));return function t(e,r){var n=g(e,r);var i=K(e);if(null===i)return n;var o=t(i,r);if(o.length<=0)return n;if(n.length<=0)return o;var u=new p;var a=[];for(var f=0,c=n;f<c.length;f++){var s=c[f],h=u.has(s);h||(u.add(s),a.push(s))}for(var y=0,l=o;y<l.length;y++){var s=l[y],h=u.has(s);h||(u.add(s),a.push(s))}return a}(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!O(t))throw new TypeError;k(e)||(e=T(e));return g(t,e)}),t("deleteMetadata",function(t,e,r){if(!O(e))throw new TypeError;k(r)||(r=T(r));var n=v(e,r,!1);if(k(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var i=l.get(e);return i.delete(r),i.size>0||(l.delete(e),!0)})}(o)}()}(t||(t={}));
},{"process":"kpD3"}],"JJlS":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"wM96":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NAMED_TAG="named",exports.NAME_TAG="name",exports.UNMANAGED_TAG="unmanaged",exports.OPTIONAL_TAG="optional",exports.INJECT_TAG="inject",exports.MULTI_INJECT_TAG="multi_inject",exports.TAGGED="inversify:tagged",exports.TAGGED_PROP="inversify:tagged_props",exports.PARAM_TYPES="inversify:paramtypes",exports.DESIGN_PARAM_TYPES="design:paramtypes",exports.POST_CONSTRUCT="post_construct";
},{}],"KPLa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={Request:"Request",Singleton:"Singleton",Transient:"Transient"};exports.BindingScopeEnum=e;var n={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};exports.BindingTypeEnum=n;var t={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};exports.TargetTypeEnum=t;
},{}],"ePY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=0;function r(){return e++}exports.id=r;
},{}],"gbv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/literal_types"),i=require("../utils/id"),e=function(){function e(e,n){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=n,this.type=t.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();exports.Binding=e;
},{"../constants/literal_types":"KPLa","../utils/id":"ePY8"}],"ozdg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",exports.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",exports.NULL_ARGUMENT="NULL argument",exports.KEY_NOT_FOUND="Key Not Found",exports.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",exports.CANNOT_UNBIND="Could not unbind serviceIdentifier:",exports.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",exports.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",exports.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",exports.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},exports.CIRCULAR_DEPENDENCY="Circular dependency found:",exports.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",exports.INVALID_BINDING_TYPE="Invalid binding type:",exports.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",exports.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",exports.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",exports.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",exports.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",exports.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",exports.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",exports.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},exports.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},exports.STACK_OVERFLOW="Maximum call stack size exceeded";
},{}],"cGpo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(e.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(e.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(e.TAGGED_PROP,t)||[]},t}();exports.MetadataReader=t;
},{"../constants/metadata_keys":"wM96"}],"AyTk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};exports.BindingCount=e;
},{}],"zg9t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs");function r(r){return r instanceof RangeError||r.message===e.STACK_OVERFLOW}exports.isStackOverflowExeption=r;
},{"../constants/error_msgs":"ozdg"}],"XWMX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs");function t(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function n(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(e){var t="Object";null!==e.implementationType&&(t=a(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)})),r}function r(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||r(e.parentRequest,t))}function i(e){return function e(n,r){void 0===r&&(r=[]);var i=t(n.serviceIdentifier);return r.push(i),null!==n.parentRequest?e(n.parentRequest,r):r}(e).reverse().join(" --\x3e ")}function o(t){t.childRequests.forEach(function(t){if(r(t,t.serviceIdentifier)){var n=i(t);throw new Error(e.CIRCULAR_DEPENDENCY+" "+n)}o(t)})}function u(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(e){n+=e.toString()+"\n"})," "+e+"\n "+e+" - "+n}return" "+e}function a(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}exports.getServiceIdentifierAsString=t,exports.listRegisteredBindingsForServiceIdentifier=n,exports.circularDependencyToException=o,exports.listMetadataForTarget=u,exports.getFunctionName=a;
},{"../constants/error_msgs":"ozdg"}],"M0Da":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../utils/id"),e=function(){function e(e){this.id=t.id(),this.container=e}return e.prototype.addPlan=function(t){this.plan=t},e.prototype.setCurrentRequest=function(t){this.currentRequest=t},e}();exports.Context=e;
},{"../utils/id":"ePY8"}],"DalN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/metadata_keys"),e=function(){function e(t,e){this.key=t,this.value=e}return e.prototype.toString=function(){return this.key===t.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();exports.Metadata=e;
},{"../constants/metadata_keys":"wM96"}],"yLDP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,e){this.parentContext=t,this.rootRequest=e}}();exports.Plan=t;
},{}],"BUfm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs"),t=require("../constants/metadata_keys");function r(e,r,o,a){n(t.TAGGED,e,r,a,o)}function o(e,r,o){n(t.TAGGED_PROP,e.constructor,r,o)}function n(t,r,o,n,a){var c={},f="number"==typeof a,i=void 0!==a&&f?a.toString():o;if(f&&void 0!==o)throw new Error(e.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,r)&&(c=Reflect.getMetadata(t,r));var s=c[i];if(Array.isArray(s))for(var u=0,d=s;u<d.length;u++){var y=d[u];if(y.key===n.key)throw new Error(e.DUPLICATED_METADATA+" "+y.key.toString())}else s=[];s.push(n),c[i]=s,Reflect.defineMetadata(t,c,r)}function a(e,t){Reflect.decorate(e,t)}function c(e,t){return function(r,o){t(r,o,e)}}function f(e,t,r){"number"==typeof r?a([c(r,e)],t):"string"==typeof r?Reflect.decorate([e],t,r):a([e],t)}exports.tagParameter=r,exports.tagProperty=o,exports.decorate=f;
},{"../constants/error_msgs":"ozdg","../constants/metadata_keys":"wM96"}],"lnlY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs"),r=require("../constants/metadata_keys"),t=require("../planning/metadata"),n=require("./decorator_utils"),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();function o(a){return function(o,i,u){if(void 0===a)throw new Error(e.UNDEFINED_INJECT_ANNOTATION(o.name));var s=new t.Metadata(r.INJECT_TAG,a);"number"==typeof u?n.tagParameter(o,i,u,s):n.tagProperty(o,i,s)}}exports.LazyServiceIdentifer=a,exports.inject=o;
},{"../constants/error_msgs":"ozdg","../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"Uls2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var r,e=t.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},e)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();exports.QueryableString=t;
},{}],"Kc9B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/metadata_keys"),e=require("../utils/id"),r=require("./metadata"),a=require("./queryable_string"),n=function(){function n(n,i,s,u){this.id=e.id(),this.type=n,this.serviceIdentifier=s,this.name=new a.QueryableString(i||""),this.metadata=new Array;var o=null;"string"==typeof u?o=new r.Metadata(t.NAMED_TAG,u):u instanceof r.Metadata&&(o=u),null!==o&&this.metadata.push(o)}return n.prototype.hasTag=function(t){for(var e=0,r=this.metadata;e<r.length;e++){if(r[e].key===t)return!0}return!1},n.prototype.isArray=function(){return this.hasTag(t.MULTI_INJECT_TAG)},n.prototype.matchesArray=function(e){return this.matchesTag(t.MULTI_INJECT_TAG)(e)},n.prototype.isNamed=function(){return this.hasTag(t.NAMED_TAG)},n.prototype.isTagged=function(){return this.metadata.some(function(e){return e.key!==t.INJECT_TAG&&e.key!==t.MULTI_INJECT_TAG&&e.key!==t.NAME_TAG&&e.key!==t.UNMANAGED_TAG&&e.key!==t.NAMED_TAG})},n.prototype.isOptional=function(){return this.matchesTag(t.OPTIONAL_TAG)(!0)},n.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===t.NAMED_TAG})[0]:null},n.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return e.key!==t.INJECT_TAG&&e.key!==t.MULTI_INJECT_TAG&&e.key!==t.NAME_TAG&&e.key!==t.UNMANAGED_TAG&&e.key!==t.NAMED_TAG}):null},n.prototype.matchesNamedTag=function(e){return this.matchesTag(t.NAMED_TAG)(e)},n.prototype.matchesTag=function(t){var e=this;return function(r){for(var a=0,n=e.metadata;a<n.length;a++){var i=n[a];if(i.key===t&&i.value===r)return!0}return!1}},n}();exports.Target=n;
},{"../constants/metadata_keys":"wM96","../utils/id":"ePY8","./metadata":"DalN","./queryable_string":"Uls2"}],"W8Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../annotation/inject"),e=require("../constants/error_msgs"),r=require("../constants/literal_types"),n=require("../constants/metadata_keys"),a=require("../utils/serialization");exports.getFunctionName=a.getFunctionName;var o=require("./target");function u(t,e){return c(t,a.getFunctionName(e),e,!1)}function c(t,r,n,a){var o=t.getConstructorMetadata(n),u=o.compilerGeneratedMetadata;if(void 0===u){var c=e.MISSING_INJECTABLE_ANNOTATION+" "+r+".";throw new Error(c)}var i=o.userGeneratedMetadata,l=Object.keys(i),p=s(a,r,u,i,0===n.length&&l.length>0?l.length:n.length),f=g(t,n);return p.concat(f)}function i(n,a,u,c,i){var s=i[n.toString()]||[],g=p(s),l=!0!==g.unmanaged,f=c[n],N=g.inject||g.multiInject;if((f=N||f)instanceof t.LazyServiceIdentifer&&(f=f.unwrap()),l){var m=f===Object,v=f===Function;if(!a&&(m||v||void 0===f)){var T=e.MISSING_INJECT_ANNOTATION+" argument "+n+" in class "+u+".";throw new Error(T)}var d=new o.Target(r.TargetTypeEnum.ConstructorArgument,g.targetName,f);return d.metadata=s,d}return null}function s(t,e,r,n,a){for(var o=[],u=0;u<a;u++){var c=i(u,t,e,r,n);null!==c&&o.push(c)}return o}function g(t,e){for(var n=t.getPropertiesMetadata(e),a=[],u=0,c=Object.keys(n);u<c.length;u++){var i=c[u],s=n[i],l=p(n[i]),f=l.targetName||i,N=l.inject||l.multiInject,m=new o.Target(r.TargetTypeEnum.ClassProperty,f,N);m.metadata=s,a.push(m)}var v=Object.getPrototypeOf(e.prototype).constructor;if(v!==Object){var T=g(t,v);a=a.concat(T)}return a}function l(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var o=c(t,a.getFunctionName(r),r,!0),u=o.map(function(t){return t.metadata.filter(function(t){return t.key===n.UNMANAGED_TAG})}),i=[].concat.apply([],u).length,s=o.length-i;return s>0?s:l(t,r)}return 0}function p(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[n.INJECT_TAG],multiInject:e[n.MULTI_INJECT_TAG],targetName:e[n.NAME_TAG],unmanaged:e[n.UNMANAGED_TAG]}}exports.getDependencies=u,exports.getBaseClassDependencyCount=l;
},{"../annotation/inject":"lnlY","../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","../constants/metadata_keys":"wM96","../utils/serialization":"XWMX","./target":"Kc9B"}],"aXtn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../utils/id"),e=function(){function e(e,i,s,r,n){this.id=t.id(),this.serviceIdentifier=e,this.parentContext=i,this.parentRequest=s,this.target=n,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===s?new Map:null}return e.prototype.addChildRequest=function(t,i,s){var r=new e(t,this.parentContext,this,i,s);return this.childRequests.push(r),r},e}();exports.Request=e;
},{"../utils/id":"ePY8"}],"RiEO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../bindings/binding_count"),n=require("../constants/error_msgs"),i=require("../constants/literal_types"),t=require("../constants/metadata_keys"),r=require("../utils/exceptions"),a=require("../utils/serialization"),o=require("./context"),s=require("./metadata"),u=require("./plan"),c=require("./reflection_utils"),l=require("./request"),d=require("./target");function f(e){return e._bindingDictionary}function p(e,n,i,r,a,o){var u=e?t.MULTI_INJECT_TAG:t.INJECT_TAG,c=new s.Metadata(u,i),l=new d.Target(n,r,i,c);if(void 0!==a){var f=new s.Metadata(a,o);l.metadata.push(f)}return l}function v(n,i,t,r,a){var o=T(t.container,a.serviceIdentifier),s=[];return o.length===e.BindingCount.NoBindingsAvailable&&t.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&n.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(t.container.bind(a.serviceIdentifier).toSelf(),o=T(t.container,a.serviceIdentifier)),s=i?o:o.filter(function(e){var n=new l.Request(e.serviceIdentifier,t,r,e,a);return e.constraint(n)}),g(a.serviceIdentifier,s,a,t.container),s}function g(i,t,r,o){switch(t.length){case e.BindingCount.NoBindingsAvailable:if(r.isOptional())return t;var s=a.getServiceIdentifierAsString(i),u=n.NOT_REGISTERED;throw u+=a.listMetadataForTarget(s,r),u+=a.listRegisteredBindingsForServiceIdentifier(o,s,T),new Error(u);case e.BindingCount.OnlyOneBindingAvailable:if(!r.isArray())return t;case e.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return t;s=a.getServiceIdentifierAsString(i),u=n.AMBIGUOUS_MATCH+" "+s;throw u+=a.listRegisteredBindingsForServiceIdentifier(o,s,T),new Error(u)}}function I(e,t,r,a,o,s){var d,f;if(null===o){d=v(e,t,a,null,s),f=new l.Request(r,a,null,d,s);var p=new u.Plan(a,f);a.addPlan(p)}else d=v(e,t,a,o,s),f=o.addChildRequest(s.serviceIdentifier,d,s);d.forEach(function(t){var r=null;if(s.isArray())r=f.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;r=f}if(t.type===i.BindingTypeEnum.Instance&&null!==t.implementationType){var o=c.getDependencies(e,t.implementationType);if(!a.container.options.skipBaseClassChecks){var u=c.getBaseClassDependencyCount(e,t.implementationType);if(o.length<u){var l=n.ARGUMENTS_LENGTH_MISMATCH(c.getFunctionName(t.implementationType));throw new Error(l)}}o.forEach(function(n){I(e,!1,n.serviceIdentifier,a,r,n)})}})}function T(e,n){var i=[],t=f(e);return t.hasKey(n)?i=t.get(n):null!==e.parent&&(i=T(e.parent,n)),i}function y(e,n,i,t,s,u,c,l){void 0===l&&(l=!1);var d=new o.Context(n),f=p(i,t,s,"",u,c);try{return I(e,l,s,d,null,f),d}catch(v){throw r.isStackOverflowExeption(v)&&d.plan&&a.circularDependencyToException(d.plan.rootRequest),v}}function q(e,n,t,r){var a=new d.Target(i.TargetTypeEnum.Variable,"",n,new s.Metadata(t,r)),u=new o.Context(e);return new l.Request(n,u,null,[],a)}exports.getBindingDictionary=f,exports.plan=y,exports.createMockRequest=q;
},{"../bindings/binding_count":"AyTk","../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","../constants/metadata_keys":"wM96","../utils/exceptions":"zg9t","../utils/serialization":"XWMX","./context":"M0Da","./metadata":"DalN","./plan":"yLDP","./reflection_utils":"W8Q8","./request":"aXtn","./target":"Kc9B"}],"Ga1m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs"),t=require("../constants/literal_types"),r=require("../constants/metadata_keys");function n(e,r,n){var a=r.filter(function(e){return null!==e.target&&e.target.type===t.TargetTypeEnum.ClassProperty}),u=a.map(n);return a.forEach(function(t,r){var n;n=t.target.name.value();var a=u[r];e[n]=a}),e}function a(e,t){return new(e.bind.apply(e,[void 0].concat(t)))}function u(t,n){if(Reflect.hasMetadata(r.POST_CONSTRUCT,t)){var a=Reflect.getMetadata(r.POST_CONSTRUCT,t);try{n[a.value]()}catch(u){throw new Error(e.POST_CONSTRUCT_ERROR(t.name,u.message))}}}function o(e,r,o){var s=null;r.length>0?s=n(s=a(e,r.filter(function(e){return null!==e.target&&e.target.type===t.TargetTypeEnum.ConstructorArgument}).map(o)),r,o):s=new e;return u(e,s),s}exports.resolveInstance=o;
},{"../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","../constants/metadata_keys":"wM96"}],"oJLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs"),t=require("../constants/literal_types"),n=require("../utils/exceptions"),r=require("../utils/serialization"),i=require("./instantiation"),a=function(t,r,i){try{return i()}catch(a){throw n.isStackOverflowExeption(a)?new Error(e.CIRCULAR_DEPENDENCY_IN_FACTORY(t,r.toString())):a}},o=function(n){return function(u){u.parentContext.setCurrentRequest(u);var s=u.bindings,c=u.childRequests,p=u.target&&u.target.isArray(),l=!(u.parentRequest&&u.parentRequest.target&&u.target&&u.parentRequest.target.matchesArray(u.target.serviceIdentifier));if(p&&l)return c.map(function(e){return o(n)(e)});var d=null;if(!u.target.isOptional()||0!==s.length){var f=s[0],y=f.scope===t.BindingScopeEnum.Singleton,g=f.scope===t.BindingScopeEnum.Request;if(y&&f.activated)return f.cache;if(g&&null!==n&&n.has(f.id))return n.get(f.id);if(f.type===t.BindingTypeEnum.ConstantValue)d=f.cache;else if(f.type===t.BindingTypeEnum.Function)d=f.cache;else if(f.type===t.BindingTypeEnum.Constructor)d=f.implementationType;else if(f.type===t.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)d=a("toDynamicValue",f.serviceIdentifier,function(){return f.dynamicValue(u.parentContext)});else if(f.type===t.BindingTypeEnum.Factory&&null!==f.factory)d=a("toFactory",f.serviceIdentifier,function(){return f.factory(u.parentContext)});else if(f.type===t.BindingTypeEnum.Provider&&null!==f.provider)d=a("toProvider",f.serviceIdentifier,function(){return f.provider(u.parentContext)});else{if(f.type!==t.BindingTypeEnum.Instance||null===f.implementationType){var v=r.getServiceIdentifierAsString(u.serviceIdentifier);throw new Error(e.INVALID_BINDING_TYPE+" "+v)}d=i.resolveInstance(f.implementationType,c,o(n))}return"function"==typeof f.onActivation&&(d=f.onActivation(u.parentContext,d)),y&&(f.cache=d,f.activated=!0),g&&null!==n&&!n.has(f.id)&&n.set(f.id,d),d}}};function u(e){return o(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}exports.resolve=u;
},{"../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","../utils/exceptions":"zg9t","../utils/serialization":"XWMX","./instantiation":"Ga1m"}],"b0Sz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/metadata_keys"),e=require("../planning/metadata"),n=function(t,e){var r=t.parentRequest;return null!==r&&(!!e(r)||n(r,e))};exports.traverseAncerstors=n;var r=function(t){return function(n){var r=function(e){return null!==e&&null!==e.target&&e.target.matchesTag(t)(n)};return r.metaData=new e.Metadata(t,n),r}};exports.taggedConstraint=r;var a=r(t.NAMED_TAG);exports.namedConstraint=a;var i=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}};exports.typeConstraint=i;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN"}],"BHOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./binding_on_syntax"),t=require("./constraint_helpers"),i=function(){function i(n){this._binding=n}return i.prototype.when=function(t){return this._binding.constraint=t,new n.BindingOnSyntax(this._binding)},i.prototype.whenTargetNamed=function(i){return this._binding.constraint=t.namedConstraint(i),new n.BindingOnSyntax(this._binding)},i.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(n){return null!==n.target&&!n.target.isNamed()&&!n.target.isTagged()},new n.BindingOnSyntax(this._binding)},i.prototype.whenTargetTagged=function(i,e){return this._binding.constraint=t.taggedConstraint(i)(e),new n.BindingOnSyntax(this._binding)},i.prototype.whenInjectedInto=function(i){return this._binding.constraint=function(n){return t.typeConstraint(i)(n.parentRequest)},new n.BindingOnSyntax(this._binding)},i.prototype.whenParentNamed=function(i){return this._binding.constraint=function(n){return t.namedConstraint(i)(n.parentRequest)},new n.BindingOnSyntax(this._binding)},i.prototype.whenParentTagged=function(i,e){return this._binding.constraint=function(n){return t.taggedConstraint(i)(e)(n.parentRequest)},new n.BindingOnSyntax(this._binding)},i.prototype.whenAnyAncestorIs=function(i){return this._binding.constraint=function(n){return t.traverseAncerstors(n,t.typeConstraint(i))},new n.BindingOnSyntax(this._binding)},i.prototype.whenNoAncestorIs=function(i){return this._binding.constraint=function(n){return!t.traverseAncerstors(n,t.typeConstraint(i))},new n.BindingOnSyntax(this._binding)},i.prototype.whenAnyAncestorNamed=function(i){return this._binding.constraint=function(n){return t.traverseAncerstors(n,t.namedConstraint(i))},new n.BindingOnSyntax(this._binding)},i.prototype.whenNoAncestorNamed=function(i){return this._binding.constraint=function(n){return!t.traverseAncerstors(n,t.namedConstraint(i))},new n.BindingOnSyntax(this._binding)},i.prototype.whenAnyAncestorTagged=function(i,e){return this._binding.constraint=function(n){return t.traverseAncerstors(n,t.taggedConstraint(i)(e))},new n.BindingOnSyntax(this._binding)},i.prototype.whenNoAncestorTagged=function(i,e){return this._binding.constraint=function(n){return!t.traverseAncerstors(n,t.taggedConstraint(i)(e))},new n.BindingOnSyntax(this._binding)},i.prototype.whenAnyAncestorMatches=function(i){return this._binding.constraint=function(n){return t.traverseAncerstors(n,i)},new n.BindingOnSyntax(this._binding)},i.prototype.whenNoAncestorMatches=function(i){return this._binding.constraint=function(n){return!t.traverseAncerstors(n,i)},new n.BindingOnSyntax(this._binding)},i}();exports.BindingWhenSyntax=i;
},{"./binding_on_syntax":"QyVB","./constraint_helpers":"b0Sz"}],"QyVB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./binding_when_syntax"),i=function(){function i(n){this._binding=n}return i.prototype.onActivation=function(i){return this._binding.onActivation=i,new n.BindingWhenSyntax(this._binding)},i}();exports.BindingOnSyntax=i;
},{"./binding_when_syntax":"BHOz"}],"OWaV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./binding_on_syntax"),t=require("./binding_when_syntax"),e=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new t.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new n.BindingOnSyntax(this._binding)}return e.prototype.when=function(n){return this._bindingWhenSyntax.when(n)},e.prototype.whenTargetNamed=function(n){return this._bindingWhenSyntax.whenTargetNamed(n)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(n,t){return this._bindingWhenSyntax.whenTargetTagged(n,t)},e.prototype.whenInjectedInto=function(n){return this._bindingWhenSyntax.whenInjectedInto(n)},e.prototype.whenParentNamed=function(n){return this._bindingWhenSyntax.whenParentNamed(n)},e.prototype.whenParentTagged=function(n,t){return this._bindingWhenSyntax.whenParentTagged(n,t)},e.prototype.whenAnyAncestorIs=function(n){return this._bindingWhenSyntax.whenAnyAncestorIs(n)},e.prototype.whenNoAncestorIs=function(n){return this._bindingWhenSyntax.whenNoAncestorIs(n)},e.prototype.whenAnyAncestorNamed=function(n){return this._bindingWhenSyntax.whenAnyAncestorNamed(n)},e.prototype.whenAnyAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(n,t)},e.prototype.whenNoAncestorNamed=function(n){return this._bindingWhenSyntax.whenNoAncestorNamed(n)},e.prototype.whenNoAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenNoAncestorTagged(n,t)},e.prototype.whenAnyAncestorMatches=function(n){return this._bindingWhenSyntax.whenAnyAncestorMatches(n)},e.prototype.whenNoAncestorMatches=function(n){return this._bindingWhenSyntax.whenNoAncestorMatches(n)},e.prototype.onActivation=function(n){return this._bindingOnSyntax.onActivation(n)},e}();exports.BindingWhenOnSyntax=e;
},{"./binding_on_syntax":"QyVB","./binding_when_syntax":"BHOz"}],"bmDA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../constants/literal_types"),i=require("./binding_when_on_syntax"),e=function(){function e(n){this._binding=n}return e.prototype.inRequestScope=function(){return this._binding.scope=n.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=n.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=n.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();exports.BindingInSyntax=e;
},{"../constants/literal_types":"KPLa","./binding_when_on_syntax":"OWaV"}],"xSru":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./binding_in_syntax"),t=require("./binding_on_syntax"),e=require("./binding_when_syntax"),i=function(){function i(i){this._binding=i,this._bindingWhenSyntax=new e.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new t.BindingOnSyntax(this._binding),this._bindingInSyntax=new n.BindingInSyntax(i)}return i.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},i.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},i.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},i.prototype.when=function(n){return this._bindingWhenSyntax.when(n)},i.prototype.whenTargetNamed=function(n){return this._bindingWhenSyntax.whenTargetNamed(n)},i.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},i.prototype.whenTargetTagged=function(n,t){return this._bindingWhenSyntax.whenTargetTagged(n,t)},i.prototype.whenInjectedInto=function(n){return this._bindingWhenSyntax.whenInjectedInto(n)},i.prototype.whenParentNamed=function(n){return this._bindingWhenSyntax.whenParentNamed(n)},i.prototype.whenParentTagged=function(n,t){return this._bindingWhenSyntax.whenParentTagged(n,t)},i.prototype.whenAnyAncestorIs=function(n){return this._bindingWhenSyntax.whenAnyAncestorIs(n)},i.prototype.whenNoAncestorIs=function(n){return this._bindingWhenSyntax.whenNoAncestorIs(n)},i.prototype.whenAnyAncestorNamed=function(n){return this._bindingWhenSyntax.whenAnyAncestorNamed(n)},i.prototype.whenAnyAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(n,t)},i.prototype.whenNoAncestorNamed=function(n){return this._bindingWhenSyntax.whenNoAncestorNamed(n)},i.prototype.whenNoAncestorTagged=function(n,t){return this._bindingWhenSyntax.whenNoAncestorTagged(n,t)},i.prototype.whenAnyAncestorMatches=function(n){return this._bindingWhenSyntax.whenAnyAncestorMatches(n)},i.prototype.whenNoAncestorMatches=function(n){return this._bindingWhenSyntax.whenNoAncestorMatches(n)},i.prototype.onActivation=function(n){return this._bindingOnSyntax.onActivation(n)},i}();exports.BindingInWhenOnSyntax=i;
},{"./binding_in_syntax":"bmDA","./binding_on_syntax":"QyVB","./binding_when_syntax":"BHOz"}],"lhQt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../constants/error_msgs"),i=require("../constants/literal_types"),t=require("./binding_in_when_on_syntax"),e=require("./binding_when_on_syntax"),o=function(){function o(n){this._binding=n}return o.prototype.to=function(n){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=n,new t.BindingInWhenOnSyntax(this._binding)},o.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+n.INVALID_TO_SELF_VALUE);var i=this._binding.serviceIdentifier;return this.to(i)},o.prototype.toConstantValue=function(n){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=n,this._binding.dynamicValue=null,this._binding.implementationType=null,new e.BindingWhenOnSyntax(this._binding)},o.prototype.toDynamicValue=function(n){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=n,this._binding.implementationType=null,new t.BindingInWhenOnSyntax(this._binding)},o.prototype.toConstructor=function(n){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=n,new e.BindingWhenOnSyntax(this._binding)},o.prototype.toFactory=function(n){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=n,new e.BindingWhenOnSyntax(this._binding)},o.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(n.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,e},o.prototype.toAutoFactory=function(n){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(i){return function(){return i.container.get(n)}},new e.BindingWhenOnSyntax(this._binding)},o.prototype.toProvider=function(n){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=n,new e.BindingWhenOnSyntax(this._binding)},o.prototype.toService=function(n){this.toDynamicValue(function(i){return i.container.get(n)})},o}();exports.BindingToSyntax=o;
},{"../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","./binding_in_when_on_syntax":"xSru","./binding_when_on_syntax":"OWaV"}],"jmiq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.of=function(n,r){var t=new e;return t.bindings=n,t.middleware=r,t},e}();exports.ContainerSnapshot=e;
},{}],"ej4u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/error_msgs"),r=function(){function r(){this._map=new Map}return r.prototype.getMap=function(){return this._map},r.prototype.add=function(r,o){if(null==r)throw new Error(t.NULL_ARGUMENT);if(null==o)throw new Error(t.NULL_ARGUMENT);var e=this._map.get(r);void 0!==e?(e.push(o),this._map.set(r,e)):this._map.set(r,[o])},r.prototype.get=function(r){if(null==r)throw new Error(t.NULL_ARGUMENT);var o=this._map.get(r);if(void 0!==o)return o;throw new Error(t.KEY_NOT_FOUND)},r.prototype.remove=function(r){if(null==r)throw new Error(t.NULL_ARGUMENT);if(!this._map.delete(r))throw new Error(t.KEY_NOT_FOUND)},r.prototype.removeByCondition=function(t){var r=this;this._map.forEach(function(o,e){var n=o.filter(function(r){return!t(r)});n.length>0?r._map.set(e,n):r._map.delete(e)})},r.prototype.hasKey=function(r){if(null==r)throw new Error(t.NULL_ARGUMENT);return this._map.has(r)},r.prototype.clone=function(){var t=new r;return this._map.forEach(function(r,o){r.forEach(function(r){return t.add(o,r.clone())})}),t},r.prototype.traverse=function(t){this._map.forEach(function(r,o){t(o,r)})},r}();exports.Lookup=r;
},{"../constants/error_msgs":"ozdg"}],"Nreh":[function(require,module,exports) {
"use strict";var n=this&&this.__awaiter||function(n,t,e,i){return new(e||(e=Promise))(function(r,o){function a(n){try{s(i.next(n))}catch(t){o(t)}}function u(n){try{s(i.throw(n))}catch(t){o(t)}}function s(n){n.done?r(n.value):new e(function(t){t(n.value)}).then(a,u)}s((i=i.apply(n,t||[])).next())})},t=this&&this.__generator||function(n,t){var e,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(n,a)}catch(u){o=[6,u],i=0}finally{e=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../bindings/binding"),i=require("../constants/error_msgs"),r=require("../constants/literal_types"),o=require("../constants/metadata_keys"),a=require("../planning/metadata_reader"),u=require("../planning/planner"),s=require("../resolution/resolver"),c=require("../syntax/binding_to_syntax"),d=require("../utils/id"),l=require("../utils/serialization"),p=require("./container_snapshot"),f=require("./lookup"),h=function(){function h(n){var t=n||{};if("object"!=typeof t)throw new Error(""+i.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=r.BindingScopeEnum.Transient;else if(t.defaultScope!==r.BindingScopeEnum.Singleton&&t.defaultScope!==r.BindingScopeEnum.Transient&&t.defaultScope!==r.BindingScopeEnum.Request)throw new Error(""+i.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+i.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+i.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=d.id(),this._bindingDictionary=new f.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new a.MetadataReader}return h.merge=function(n,t){var e=new h,i=u.getBindingDictionary(e),r=u.getBindingDictionary(n),o=u.getBindingDictionary(t);function a(n,t){n.traverse(function(n,e){e.forEach(function(n){t.add(n.serviceIdentifier,n.clone())})})}return a(r,i),a(o,i),e},h.prototype.load=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=this._getContainerModuleHelpersFactory(),i=0,r=n;i<r.length;i++){var o=r[i],a=e(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},h.prototype.loadAsync=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n(this,void 0,void 0,function(){var n,i,r,o,a;return t(this,function(t){switch(t.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,r=e,t.label=1;case 1:return i<r.length?(o=r[i],a=n(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:t.sent(),t.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},h.prototype.unload=function(){for(var n=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){var e,i=(e=t.id,function(n){return n.moduleId===e});n._bindingDictionary.removeByCondition(i)})},h.prototype.bind=function(n){var t=this.options.defaultScope||r.BindingScopeEnum.Transient,i=new e.Binding(n,t);return this._bindingDictionary.add(n,i),new c.BindingToSyntax(i)},h.prototype.rebind=function(n){return this.unbind(n),this.bind(n)},h.prototype.unbind=function(n){try{this._bindingDictionary.remove(n)}catch(t){throw new Error(i.CANNOT_UNBIND+" "+l.getServiceIdentifierAsString(n))}},h.prototype.unbindAll=function(){this._bindingDictionary=new f.Lookup},h.prototype.isBound=function(n){var t=this._bindingDictionary.hasKey(n);return!t&&this.parent&&(t=this.parent.isBound(n)),t},h.prototype.isBoundNamed=function(n,t){return this.isBoundTagged(n,o.NAMED_TAG,t)},h.prototype.isBoundTagged=function(n,t,e){var i=!1;if(this._bindingDictionary.hasKey(n)){var r=this._bindingDictionary.get(n),o=u.createMockRequest(this,n,t,e);i=r.some(function(n){return n.constraint(o)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(n,t,e)),i},h.prototype.snapshot=function(){this._snapshots.push(p.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},h.prototype.restore=function(){var n=this._snapshots.pop();if(void 0===n)throw new Error(i.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=n.bindings,this._middleware=n.middleware},h.prototype.createChild=function(n){var t=new h(n||this.options);return t.parent=this,t},h.prototype.applyMiddleware=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=this._middleware?this._middleware:this._planAndResolve();this._middleware=n.reduce(function(n,t){return t(n)},e)},h.prototype.applyCustomMetadataReader=function(n){this._metadataReader=n},h.prototype.get=function(n){return this._get(!1,!1,r.TargetTypeEnum.Variable,n)},h.prototype.getTagged=function(n,t,e){return this._get(!1,!1,r.TargetTypeEnum.Variable,n,t,e)},h.prototype.getNamed=function(n,t){return this.getTagged(n,o.NAMED_TAG,t)},h.prototype.getAll=function(n){return this._get(!0,!0,r.TargetTypeEnum.Variable,n)},h.prototype.getAllTagged=function(n,t,e){return this._get(!1,!0,r.TargetTypeEnum.Variable,n,t,e)},h.prototype.getAllNamed=function(n,t){return this.getAllTagged(n,o.NAMED_TAG,t)},h.prototype.resolve=function(n){var t=this.createChild();return t.bind(n).toSelf(),t.get(n)},h.prototype._getContainerModuleHelpersFactory=function(){var n=this,t=function(n,t){n._binding.moduleId=t},e=function(e){return function(i){var r=n.rebind.bind(n)(i);return t(r,e),r}};return function(i){return{bindFunction:(r=i,function(e){var i=n.bind.bind(n)(e);return t(i,r),i}),isboundFunction:function(t){return n.isBound.bind(n)(t)},rebindFunction:e(i),unbindFunction:function(t){n.unbind.bind(n)(t)}};var r}},h.prototype._get=function(n,t,e,r,o,a){var u=null,s={avoidConstraints:n,contextInterceptor:function(n){return n},isMultiInject:t,key:o,serviceIdentifier:r,targetType:e,value:a};if(this._middleware){if(null==(u=this._middleware(s)))throw new Error(i.INVALID_MIDDLEWARE_RETURN)}else u=this._planAndResolve()(s);return u},h.prototype._planAndResolve=function(){var n=this;return function(t){var e=u.plan(n._metadataReader,n,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return e=t.contextInterceptor(e),s.resolve(e)}},h}();exports.Container=h;
},{"../bindings/binding":"gbv5","../constants/error_msgs":"ozdg","../constants/literal_types":"KPLa","../constants/metadata_keys":"wM96","../planning/metadata_reader":"cGpo","../planning/planner":"RiEO","../resolution/resolver":"oJLS","../syntax/binding_to_syntax":"lhQt","../utils/id":"ePY8","../utils/serialization":"XWMX","./container_snapshot":"jmiq","./lookup":"ej4u"}],"BAeF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../utils/id"),e=function(){return function(e){this.id=t.id(),this.registry=e}}();exports.ContainerModule=e;var i=function(){return function(e){this.id=t.id(),this.registry=e}}();exports.AsyncContainerModule=i;
},{"../utils/id":"ePY8"}],"nVo5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/error_msgs"),t=require("../constants/metadata_keys");function r(){return function(r){if(Reflect.hasOwnMetadata(t.PARAM_TYPES,r))throw new Error(e.DUPLICATED_INJECTABLE_DECORATOR);var a=Reflect.getMetadata(t.DESIGN_PARAM_TYPES,r)||[];return Reflect.defineMetadata(t.PARAM_TYPES,a,r),r}}exports.injectable=r;
},{"../constants/error_msgs":"ozdg","../constants/metadata_keys":"wM96"}],"ZrAH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../planning/metadata"),t=require("./decorator_utils");function r(r,a){return function(n,o,u){var i=new e.Metadata(r,a);"number"==typeof u?t.tagParameter(n,o,u,i):t.tagProperty(n,o,i)}}exports.tagged=r;
},{"../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"ozGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=require("../planning/metadata"),r=require("./decorator_utils");function a(a){return function(n,o,u){var i=new t.Metadata(e.NAMED_TAG,a);"number"==typeof u?r.tagParameter(n,o,u,i):r.tagProperty(n,o,i)}}exports.named=a;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"JVMA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=require("../planning/metadata"),r=require("./decorator_utils");function a(){return function(a,n,o){var u=new t.Metadata(e.OPTIONAL_TAG,!0);"number"==typeof o?r.tagParameter(a,n,o,u):r.tagProperty(a,n,u)}}exports.optional=a;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"Xv7D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=require("../planning/metadata"),a=require("./decorator_utils");function r(){return function(r,n,u){var i=new t.Metadata(e.UNMANAGED_TAG,!0);a.tagParameter(r,n,u,i)}}exports.unmanaged=r;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"at3P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=require("../planning/metadata"),r=require("./decorator_utils");function a(a){return function(n,u,o){var i=new t.Metadata(e.MULTI_INJECT_TAG,a);"number"==typeof o?r.tagParameter(n,u,o,i):r.tagProperty(n,u,i)}}exports.multiInject=a;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"xoKS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../constants/metadata_keys"),t=require("../planning/metadata"),a=require("./decorator_utils");function r(r){return function(n,u,i){var o=new t.Metadata(e.NAME_TAG,r);a.tagParameter(n,u,i,o)}}exports.targetName=r;
},{"../constants/metadata_keys":"wM96","../planning/metadata":"DalN","./decorator_utils":"BUfm"}],"tSN6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../constants/error_msgs"),e=require("../constants/metadata_keys"),r=require("../planning/metadata");function a(){return function(a,n,o){var s=new r.Metadata(e.POST_CONSTRUCT,n);if(Reflect.hasOwnMetadata(e.POST_CONSTRUCT,a.constructor))throw new Error(t.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(e.POST_CONSTRUCT,s,a.constructor)}}exports.postConstruct=a;
},{"../constants/error_msgs":"ozdg","../constants/metadata_keys":"wM96","../planning/metadata":"DalN"}],"qSPU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiBindToService=function(e){return function(r){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.bind(t).toService(r)})}}};
},{}],"PR7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./constants/metadata_keys");exports.METADATA_KEY=e;var t=require("./container/container");exports.Container=t.Container;var r=require("./constants/literal_types");exports.BindingScopeEnum=r.BindingScopeEnum,exports.BindingTypeEnum=r.BindingTypeEnum,exports.TargetTypeEnum=r.TargetTypeEnum;var n=require("./container/container_module");exports.AsyncContainerModule=n.AsyncContainerModule,exports.ContainerModule=n.ContainerModule;var a=require("./annotation/injectable");exports.injectable=a.injectable;var i=require("./annotation/tagged");exports.tagged=i.tagged;var o=require("./annotation/named");exports.named=o.named;var s=require("./annotation/inject");exports.inject=s.inject,exports.LazyServiceIdentifer=s.LazyServiceIdentifer;var u=require("./annotation/optional");exports.optional=u.optional;var p=require("./annotation/unmanaged");exports.unmanaged=p.unmanaged;var d=require("./annotation/multi_inject");exports.multiInject=d.multiInject;var c=require("./annotation/target_name");exports.targetName=c.targetName;var g=require("./annotation/post_construct");exports.postConstruct=g.postConstruct;var l=require("./planning/metadata_reader");exports.MetadataReader=l.MetadataReader;var v=require("./utils/id");exports.id=v.id;var x=require("./annotation/decorator_utils");exports.decorate=x.decorate;var m=require("./syntax/constraint_helpers");exports.traverseAncerstors=m.traverseAncerstors,exports.taggedConstraint=m.taggedConstraint,exports.namedConstraint=m.namedConstraint,exports.typeConstraint=m.typeConstraint;var q=require("./utils/serialization");exports.getServiceIdentifierAsString=q.getServiceIdentifierAsString;var y=require("./utils/binding_utils");exports.multiBindToService=y.multiBindToService;
},{"./constants/metadata_keys":"wM96","./container/container":"Nreh","./constants/literal_types":"KPLa","./container/container_module":"BAeF","./annotation/injectable":"nVo5","./annotation/tagged":"ZrAH","./annotation/named":"ozGY","./annotation/inject":"lnlY","./annotation/optional":"JVMA","./annotation/unmanaged":"Xv7D","./annotation/multi_inject":"at3P","./annotation/target_name":"xoKS","./annotation/post_construct":"tSN6","./planning/metadata_reader":"cGpo","./utils/id":"ePY8","./annotation/decorator_utils":"BUfm","./syntax/constraint_helpers":"b0Sz","./utils/serialization":"XWMX","./utils/binding_utils":"qSPU"}],"nj0G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Symbol.for("INJECTION");function e(e,n,r,o){Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(t,this,n)&&Reflect.defineMetadata(t,r(),this,n),Reflect.hasMetadata(t,this,n)?Reflect.getMetadata(t,this,n):r()},set:function(e){Reflect.defineMetadata(t,e,this,n)}})}function n(t,n){return function(r){return function(o,u){e(o,u,function(){return t.get(r)},n)}}}function r(t,n){return function(r,o){return function(u,c){e(u,c,function(){return t.getNamed(r,o)},n)}}}function o(t,n){return function(r,o,u){return function(c,a){e(c,a,function(){return t.getTagged(r,o,u)},n)}}}function u(t,n){return function(r){return function(o,u){e(o,u,function(){return t.getAll(r)},n)}}}exports.makePropertyInjectDecorator=n,exports.makePropertyInjectNamedDecorator=r,exports.makePropertyInjectTaggedDecorator=o,exports.makePropertyMultiInjectDecorator=u;
},{}],"zF2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./decorators");function r(r,t){return void 0===t&&(t=!0),{lazyInject:e.makePropertyInjectDecorator(r,t),lazyInjectNamed:e.makePropertyInjectNamedDecorator(r,t),lazyInjectTagged:e.makePropertyInjectTaggedDecorator(r,t),lazyMultiInject:e.makePropertyMultiInjectDecorator(r,t)}}exports.default=r;
},{"./decorators":"nj0G"}],"m6Ky":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TYPES=void 0;var e={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")};exports.TYPES=e;
},{}],"IxO8":[function(require,module,exports) {
function e(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}module.exports=e;
},{}],"fcMS":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"P8NW":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"MuhJ":[function(require,module,exports) {
"use strict";function r(r){var t=0;r+="x";for(var e=Math.floor(65745979961613.07),o=0;o<r.length;o++)t>e&&(t=Math.floor(t/137)),t=131*t+r.charCodeAt(o);return t}function t(r){for(var t=5381,e=(r=r.toString()).length;e;)t=33*t^r.charCodeAt(--e);return t>>>0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BKDRHash=r,exports.djb2hash=t;
},{}],"ytEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContainer=t,exports.trim=n,exports.splitWords=s,exports.create=i,exports.remove=o,exports.addClass=a,exports.removeClass=c,exports.hasClass=l,exports.setClass=d,exports.getClass=u,exports.empty=f,exports.setTransform=m,exports.triggerResize=v,exports.printCanvas=x;var e=window.document.documentElement.style;function t(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function n(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function s(e){return n(e).split(/\s+/)}function r(t){if(!e)return t[0];for(var n in t)if(t[n]&&t[n]in e)return t[n];return t[0]}function i(e,t,n){var s=document.createElement(e);return s.className=t||"",n&&n.appendChild(s),s}function o(e){var t=e.parentNode;t&&t.removeChild(e)}function a(e,t){if(void 0!==e.classList)for(var n=s(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!l(e,t)){var o=u(e);d(e,(o?o+" ":"")+t)}}function c(e,t){void 0!==e.classList?e.classList.remove(t):d(e,n((" "+u(e)+" ").replace(" "+t+" "," ")))}function l(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=u(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function d(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function u(e){return e instanceof SVGElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function f(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var p=r(["transform","WebkitTransform"]);function m(e,t){e.style[p]=t}function v(){if("function"==typeof Event)window.dispatchEvent(new Event("resize"));else{var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}function x(e){var t=["padding: "+(e.height/2-8)+"px "+e.width/2+"px;","line-height: "+e.height+"px;","background-image: url("+e.toDataURL()+");"];console.log("%c\n",t.join(""))}
},{}],"b9XL":[function(require,module,exports) {
function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=o=function(o){return typeof o}:module.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}module.exports=o;
},{}],"pxk2":[function(require,module,exports) {
var e=require("../helpers/typeof"),r=require("./assertThisInitialized");function t(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?r(t):i}module.exports=t;
},{"../helpers/typeof":"b9XL","./assertThisInitialized":"E7HD"}],"UJE0":[function(require,module,exports) {
function t(e){return module.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}module.exports=t;
},{}],"AkAO":[function(require,module,exports) {
function t(o,e){return module.exports=t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},t(o,e)}module.exports=t;
},{}],"d4H2":[function(require,module,exports) {
var e=require("./setPrototypeOf");function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&e(r,t)}module.exports=r;
},{"./setPrototypeOf":"AkAO"}],"vNP7":[function(require,module,exports) {
function n(n){return-1!==Function.toString.call(n).indexOf("[native code]")}module.exports=n;
},{}],"dJhE":[function(require,module,exports) {
var t=require("./setPrototypeOf");function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function r(n,o,u){return e()?module.exports=r=Reflect.construct:module.exports=r=function(e,r,n){var o=[null];o.push.apply(o,r);var u=new(Function.bind.apply(e,o));return n&&t(u,n.prototype),u},r.apply(null,arguments)}module.exports=r;
},{"./setPrototypeOf":"AkAO"}],"ozpi":[function(require,module,exports) {
var e=require("./getPrototypeOf"),r=require("./setPrototypeOf"),t=require("./isNativeFunction"),o=require("./construct");function n(u){var i="function"==typeof Map?new Map:void 0;return module.exports=n=function(n){if(null===n||!t(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,u)}function u(){return o(n,arguments,e(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r(u,n)},n(u)}module.exports=n;
},{"./getPrototypeOf":"UJE0","./setPrototypeOf":"AkAO","./isNativeFunction":"vNP7","./construct":"dJhE"}],"UY5Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImage=exports.getArrayBuffer=exports.getJSON=void 0;var e=o(require("@babel/runtime/helpers/classCallCheck")),t=o(require("@babel/runtime/helpers/createClass")),r=o(require("@babel/runtime/helpers/possibleConstructorReturn")),n=o(require("@babel/runtime/helpers/getPrototypeOf")),s=o(require("@babel/runtime/helpers/inherits")),a=o(require("@babel/runtime/helpers/wrapNativeSuper"));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(a){function o(t,s,a){var u;return(0,e.default)(this,o),(u=(0,r.default)(this,(0,n.default)(o).call(this,t))).status=void 0,u.url=void 0,u.status=s,u.url=a,u.name=u.constructor.name,u.message=t,u}return(0,s.default)(o,a),(0,t.default)(o,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),o}((0,a.default)(Error));function i(e){var t=new XMLHttpRequest;for(var r in t.open("GET",e.url,!0),e.headers)e.headers.hasOwnProperty(r)&&t.setRequestHeader(r,e.headers[r]);return t.withCredentials="include"===e.credentials,t}var l=function(e,t){var r=i(e);return r.setRequestHeader("Accept","application/json"),r.onerror=function(){t(new Error(r.statusText))},r.onload=function(){if(r.status>=200&&r.status<300&&r.response){var n;try{n=JSON.parse(r.response)}catch(s){return t(s)}t(null,n)}else 401===r.status?t(new u("".concat(r.statusText),r.status,e.url)):t(new u(r.statusText,r.status,e.url))},r.send(),r};exports.getJSON=l;var c=function(e,t){var r=i(e);return r.responseType="arraybuffer",r.onerror=function(){t(new Error(r.statusText))},r.onload=function(){var n=r.response;if(0===n.byteLength&&200===r.status)return t(new Error("http status 200 returned without content."));r.status>=200&&r.status<300&&r.response?t(null,{data:n,cacheControl:r.getResponseHeader("Cache-Control"),expires:r.getResponseHeader("Expires")}):t(new u(r.statusText,r.status,e.url))},r.send(),r};function d(e){var t=window.document.createElement("a");return t.href=e,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}exports.getArrayBuffer=c;var p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",f=function(e,t){return c(e,function(e,r){if(e)t(e);else if(r){var n=new window.Image;n.crossOrigin="anonymous";var s=window.URL||window.webkitURL;n.onload=function(){t(null,n),s.revokeObjectURL(n.src)};var a=new window.Blob([new Uint8Array(r.data)],{type:"image/png"});n.src=r.data.byteLength?s.createObjectURL(a):p}})};exports.getImage=f;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/wrapNativeSuper":"ozpi"}],"OUZ9":[function(require,module,exports) {
function r(r){if(Array.isArray(r))return r}module.exports=r;
},{}],"vKPt":[function(require,module,exports) {
function t(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],o=!0,n=!1,l=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done)&&(e.push(i.value),!r||e.length!==r);o=!0);}catch(u){n=!0,l=u}finally{try{o||null==a.return||a.return()}finally{if(n)throw l}}return e}}module.exports=t;
},{}],"Rom6":[function(require,module,exports) {
function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}module.exports=t;
},{}],"HETk":[function(require,module,exports) {
var r=require("./arrayWithHoles"),e=require("./iterableToArrayLimit"),i=require("./nonIterableRest");function t(t,a){return r(t)||e(t,a)||i()}module.exports=t;
},{"./arrayWithHoles":"OUZ9","./iterableToArrayLimit":"vKPt","./nonIterableRest":"Rom6"}],"udfb":[function(require,module,exports) {
"use strict";function e(e,r,t){void 0===t&&(t={});var o={type:"Feature"};return(0===t.id||t.id)&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.properties=r||{},o.geometry=e,o}function r(e,r,o){switch(void 0===o&&(o={}),e){case"Point":return t(r).geometry;case"LineString":return s(r).geometry;case"Polygon":return n(r).geometry;case"MultiPoint":return m(r).geometry;case"MultiLineString":return d(r).geometry;case"MultiPolygon":return c(r).geometry;default:throw new Error(e+" is invalid")}}function t(r,t,o){return void 0===o&&(o={}),e({type:"Point",coordinates:r},t,o)}function o(e,r,o){return void 0===o&&(o={}),u(e.map(function(e){return t(e,r)}),o)}function n(r,t,o){void 0===o&&(o={});for(var n=0,i=r;n<i.length;n++){var s=i[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:r},t,o)}function i(e,r,t){return void 0===t&&(t={}),u(e.map(function(e){return n(e,r)}),t)}function s(r,t,o){if(void 0===o&&(o={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:r},t,o)}function a(e,r,t){return void 0===t&&(t={}),u(e.map(function(e){return s(e,r)}),t)}function u(e,r){void 0===r&&(r={});var t={type:"FeatureCollection"};return r.id&&(t.id=r.id),r.bbox&&(t.bbox=r.bbox),t.features=e,t}function d(r,t,o){return void 0===o&&(o={}),e({type:"MultiLineString",coordinates:r},t,o)}function m(r,t,o){return void 0===o&&(o={}),e({type:"MultiPoint",coordinates:r},t,o)}function c(r,t,o){return void 0===o&&(o={}),e({type:"MultiPolygon",coordinates:r},t,o)}function l(r,t,o){return void 0===o&&(o={}),e({type:"GeometryCollection",geometries:r},t,o)}function h(e,r){if(void 0===r&&(r=0),r&&!(r>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,r||0);return Math.round(e*t)/t}function p(e,r){void 0===r&&(r="kilometers");var t=exports.factors[r];if(!t)throw new Error(r+" units is invalid");return e*t}function f(e,r){void 0===r&&(r="kilometers");var t=exports.factors[r];if(!t)throw new Error(r+" units is invalid");return e/t}function x(e,r){return w(f(e,r))}function g(e){var r=e%360;return r<0&&(r+=360),r}function w(e){return 180*(e%(2*Math.PI))/Math.PI}function b(e){return e%360*Math.PI/180}function v(e,r,t){if(void 0===r&&(r="kilometers"),void 0===t&&(t="kilometers"),!(e>=0))throw new Error("length must be a positive number");return p(f(e,r),t)}function y(e,r,t){if(void 0===r&&(r="meters"),void 0===t&&(t="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=exports.areaFactors[r];if(!o)throw new Error("invalid original units");var n=exports.areaFactors[t];if(!n)throw new Error("invalid final units");return e/o*n}function E(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}function R(e){return!!e&&e.constructor===Object}function P(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!E(e))throw new Error("bbox must only contain numbers")})}function T(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}function M(){throw new Error("method has been renamed to `radiansToDegrees`")}function k(){throw new Error("method has been renamed to `degreesToRadians`")}function A(){throw new Error("method has been renamed to `lengthToDegrees`")}function L(){throw new Error("method has been renamed to `lengthToRadians`")}function D(){throw new Error("method has been renamed to `radiansToLength`")}function F(){throw new Error("method has been renamed to `bearingToAzimuth`")}function S(){throw new Error("method has been renamed to `convertLength`")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.earthRadius=6371008.8,exports.factors={centimeters:100*exports.earthRadius,centimetres:100*exports.earthRadius,degrees:exports.earthRadius/111325,feet:3.28084*exports.earthRadius,inches:39.37*exports.earthRadius,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:1e3*exports.earthRadius,millimetres:1e3*exports.earthRadius,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius/1.0936},exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1/1.0936},exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},exports.feature=e,exports.geometry=r,exports.point=t,exports.points=o,exports.polygon=n,exports.polygons=i,exports.lineString=s,exports.lineStrings=a,exports.featureCollection=u,exports.multiLineString=d,exports.multiPoint=m,exports.multiPolygon=c,exports.geometryCollection=l,exports.round=h,exports.radiansToLength=p,exports.lengthToRadians=f,exports.lengthToDegrees=x,exports.bearingToAzimuth=g,exports.radiansToDegrees=w,exports.degreesToRadians=b,exports.convertLength=v,exports.convertArea=y,exports.isNumber=E,exports.isObject=R,exports.validateBBox=P,exports.validateId=T,exports.radians2degrees=M,exports.degrees2radians=k,exports.distanceToDegrees=A,exports.distanceToRadians=L,exports.radiansToDistance=D,exports.bearingToAngle=F,exports.convertDistance=S;
},{}],"oiPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extent=n,exports.tranfrormCoord=i,exports.lngLatToMeters=h,exports.metersToLngLat=s,exports.longitude=M,exports.latitude=l,exports.validateLngLat=c,exports.aProjectFlat=d,exports.unProjectFlat=f,exports.lnglatDistance=p,exports.project=g;var t=e(require("@babel/runtime/helpers/slicedToArray")),r=require("@turf/helpers");function e(t){return t&&t.__esModule?t:{default:t}}var a=2*Math.PI*6378137/2;function n(t){var r=[1/0,1/0,-1/0,-1/0];return t.forEach(function(t){var e=t.coordinates;o(r,e)}),r}function o(t,r){return Array.isArray(r[0])?r.forEach(function(r){o(t,r)}):(t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])),t}function i(t,r){return u(t,r)}function u(t,r){return Array.isArray(t[0])?t.map(function(t){return u(t,r)}):r(t)}function h(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1},n=(t=c(t,r))[0],o=t[1],i=n*a/180,u=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return u=u*a/180,e.enable&&(i=Number(i.toFixed(e.decimal)),u=Number(u.toFixed(e.decimal))),3===t.length?[i,u,t[2]]:[i,u]}function s(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,e=t[0],n=t[1],o=e/a*180,i=n/a*180;return i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2),null!=r&&(o=Number(o.toFixed(r)),i=Number(i.toFixed(r))),3===t.length?[o,i,t[2]]:[o,i]}function M(t){if(null==t)throw new Error("lng is required");return(t>180||t<-180)&&((t%=360)>180&&(t=-360+t),t<-180&&(t=360+t),0===t&&(t=0)),t}function l(t){if(null==t)throw new Error("lat is required");return(t>90||t<-90)&&((t%=180)>90&&(t=-180+t),t<-90&&(t=180+t),0===t&&(t=0)),t}function c(t,r){if(!1===r)return t;var e=M(t[0]),a=l(t[1]);return a>85&&(a=85),a<-85&&(a=-85),3===t.length?[e,a,t[2]]:[e,a]}function d(t){var r=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),e=Math.PI/180,a=t[0]*e,n=r*e;n=Math.log(Math.tan(Math.PI/4+n/2));return a=(256<<20)*(.5/Math.PI*a+.5),n=(256<<20)*(-.5/Math.PI*n+(e=.5)),[parseInt(a.toString(),10),parseInt(n.toString(),10)]}function f(r){var e=.5/Math.PI,a=-.5/Math.PI,n=.5,o=(0,t.default)(r,2),i=o[0],u=o[1];return i=(i/(256<<20)-.5)/e,u=(u/(256<<20)-n)/a,u=2*(Math.atan(Math.pow(Math.E,u))-Math.PI/4),[i/(n=Math.PI/180),u/n]}function p(t,e,a){var n=(0,r.degreesToRadians)(e[1]-t[1]),o=(0,r.degreesToRadians)(e[0]-t[0]),i=(0,r.degreesToRadians)(t[1]),u=(0,r.degreesToRadians)(e[1]),h=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(i)*Math.cos(u);return(0,r.radiansToLength)(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),"meters")}function g(t){var r=Math.PI/180,e=85.0511287798,a=Math.max(Math.min(e,t[1]),-e),n=Math.sin(a*r);return[6378137*t[0]*r,6378137*Math.log((1+n)/(1-n))/2]}
},{"@babel/runtime/helpers/slicedToArray":"HETk","@turf/helpers":"udfb"}],"Zpnv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRUCache=void 0;var e=r(require("@babel/runtime/helpers/classCallCheck")),t=r(require("@babel/runtime/helpers/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1?arguments[1]:void 0;(0,e.default)(this,r),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=t,this.destroy=i||this.defaultDestroy,this.order=[],this.clear()}return(0,t.default)(r,[{key:"clear",value:function(){var e=this;this.order.forEach(function(t){e.delete(t)}),this.cache={},this.order=[]}},{key:"get",value:function(e){var t=this.cache[e];return t&&(this.deleteOrder(e),this.appendOrder(e)),t}},{key:"set",value:function(e,t){this.cache[e]?(this.delete(e),this.cache[e]=t,this.appendOrder(e)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[e]=t,this.appendOrder(e))}},{key:"delete",value:function(e){var t=this.cache[e];t&&(this.deleteCache(e),this.deleteOrder(e),this.destroy(t,e))}},{key:"deleteCache",value:function(e){delete this.cache[e]}},{key:"deleteOrder",value:function(e){var t=this.order.findIndex(function(t){return t===e});t>=0&&this.order.splice(t,1)}},{key:"appendOrder",value:function(e){this.order.push(e)}},{key:"defaultDestroy",value:function(e,t){return null}}]),r}();exports.LRUCache=i;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"w8HU":[function(require,module,exports) {
"use strict";function e(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindAll=e;
},{}],"Ceac":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2arr=a,exports.decodePickingColor=i,exports.encodePickingColor=u,exports.generateColorRamp=l;var e=n(require("@babel/runtime/helpers/slicedToArray")),r=o(require("d3-color"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function n(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=r.color(e),o=[0,0,0,0];return null!=t&&(o[0]=t.r/255,o[1]=t.g/255,o[2]=t.b/255,o[3]=t.opacity),o}function i(r){var t=(0,e.default)(r,3);return t[0]+256*t[1]+65536*t[2]-1}function u(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function l(e){var r=document.createElement("canvas"),t=r.getContext("2d");r.width=256,r.height=1;for(var o,n=t.createLinearGradient(0,0,256,0),a=e.positions[0],i=e.positions[e.positions.length-1],u=0;u<e.colors.length;++u){var l=(e.positions[u]-a)/(i-a);n.addColorStop(l,e.colors[u])}return t.fillStyle=n,t.fillRect(0,0,256,1),o=new Uint8ClampedArray(t.getImageData(0,0,256,1).data),new ImageData(o,16,16)}
},{"@babel/runtime/helpers/slicedToArray":"HETk","d3-color":"Peej"}],"nTEC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={djb2hash:!0,BKDRHash:!0,DOM:!0};Object.defineProperty(exports,"djb2hash",{enumerable:!0,get:function(){return r.djb2hash}}),Object.defineProperty(exports,"BKDRHash",{enumerable:!0,get:function(){return r.BKDRHash}}),exports.DOM=void 0;var r=require("./hash"),t=p(require("./dom"));exports.DOM=t;var o=require("./fetchData");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=require("./geo");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var u=require("./lru_cache");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});var a=require("./event");Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return a[r]}}))});var c=require("./color");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return c[r]}}))});
},{"./hash":"MuhJ","./dom":"ytEF","./fetchData":"UY5Q","./geo":"oiPS","./lru_cache":"Zpnv","./event":"w8HU","./color":"Ceac"}],"TWhu":[function(require,module,exports) {
"use strict";module.exports=i,module.exports.default=i;var t=1e20;function i(t,i,s,h,e,r){this.fontSize=t||24,this.buffer=void 0===i?3:i,this.cutoff=h||.25,this.fontFamily=e||"sans-serif",this.fontWeight=r||"normal",this.radius=s||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,i,s,e,r,a,n){for(var o=0;o<i;o++){for(var f=0;f<s;f++)e[f]=t[f*i+o];for(h(e,r,a,n,s),f=0;f<s;f++)t[f*i+o]=r[f]}for(f=0;f<s;f++){for(o=0;o<i;o++)e[o]=t[f*i+o];for(h(e,r,a,n,i),o=0;o<i;o++)t[f*i+o]=Math.sqrt(r[o])}}function h(i,s,h,e,r){h[0]=0,e[0]=-t,e[1]=+t;for(var a=1,n=0;a<r;a++){for(var o=(i[a]+a*a-(i[h[n]]+h[n]*h[n]))/(2*a-2*h[n]);o<=e[n];)n--,o=(i[a]+a*a-(i[h[n]]+h[n]*h[n]))/(2*a-2*h[n]);h[++n]=a,e[n]=o,e[n+1]=+t}for(a=0,n=0;a<r;a++){for(;e[n+1]<a;)n++;s[a]=(a-h[n])*(a-h[n])+i[h[n]]}}i.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var h=this.ctx.getImageData(0,0,this.size,this.size),e=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var a=h.data[4*r+3]/255;this.gridOuter[r]=1===a?0:0===a?t:Math.pow(Math.max(0,.5-a),2),this.gridInner[r]=1===a?t:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var n=this.gridOuter[r]-this.gridInner[r];e[r]=Math.max(0,Math.min(255,Math.round(255-255*(n/this.radius+this.cutoff))))}return e};
},{}],"O1sC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildMapping=o,exports.buildIconMaping=a,exports.nextPowOfTwo=c;var e=t(require("@babel/runtime/helpers/defineProperty"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach(function(r){(0,e.default)(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var i=30;function o(e){var t=e.characterSet,r=e.getFontWidth,n=e.fontHeight,o=e.buffer,a=e.maxCanvasWidth,f=e.mapping,u=void 0===f?{}:f,l=e.xOffset,p=void 0===l?0:l,s=e.yOffset,h=void 0===s?0:s,v=0,y=p;Array.from(t).forEach(function(e,t){if(!u[e]){var n=r(e,t);y+i>a&&(y=0,v++),u[e]={x:y,y:h+v*i,width:i,height:i,advance:n},y+=i}});var O=n+2*o;return{mapping:u,xOffset:y,yOffset:h+v*O,canvasHeight:c(h+(v+1)*O)}}function a(e,t,r){var n=0,i=0,o=0,a=[],u={},l=!0,p=!1,s=void 0;try{for(var h,v=e[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var y=h.value;if(!u[y.id]){var O=y.height,d=y.width;n+d+t>r&&(f(u,a,i),n=0,i=o+i+t,o=0,a=[]),a.push({icon:y,xOffset:n}),n=n+d+t,o=Math.max(o,O)}}}catch(b){p=!0,s=b}finally{try{l||null==v.return||v.return()}finally{if(p)throw s}}return a.length>0&&f(u,a,i),{mapping:u,canvasHeight:c(o+i+t)}}function f(e,t,r){var i=!0,o=!1,a=void 0;try{for(var f,c=t[Symbol.iterator]();!(i=(f=c.next()).done);i=!0){var u=f.value,l=u.icon,p=u.xOffset;e[l.id]=n({},l,{x:p,y:r,image:l.image})}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}function c(e){return Math.pow(2,Math.ceil(Math.log2(e)))}
},{"@babel/runtime/helpers/defineProperty":"IxO8"}],"Oar6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DEFAULT_RADIUS=exports.DEFAULT_CUTOFF=exports.DEFAULT_BUFFER=exports.DEFAULT_FONT_SIZE=exports.DEFAULT_FONT_WEIGHT=exports.DEFAULT_FONT_FAMILY=exports.DEFAULT_CHAR_SET=void 0;var t,e,r,n=u(require("@babel/runtime/helpers/defineProperty")),a=u(require("@babel/runtime/helpers/classCallCheck")),i=u(require("@babel/runtime/helpers/createClass")),o=require("@antv/l7-utils"),s=u(require("@mapbox/tiny-sdf")),f=require("inversify"),c=require("../../utils/font_util");function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach(function(e){(0,n.default)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var p=E();exports.DEFAULT_CHAR_SET=p;var y="sans-serif";exports.DEFAULT_FONT_FAMILY=y;var v="800";exports.DEFAULT_FONT_WEIGHT=v;var g=24;exports.DEFAULT_FONT_SIZE=g;var d=3;exports.DEFAULT_BUFFER=d;var O=.25;exports.DEFAULT_CUTOFF=O;var F=8;exports.DEFAULT_RADIUS=F;var b=1024,x=1,m=1,T=3,_=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function E(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function A(t,e,r,n){t.font="".concat(n," ").concat(r,"px ").concat(e),t.fillStyle="black",t.textBaseline="middle"}function D(t,e){for(var r=0;r<t.length;r++)e.data[4*r+3]=t[r]}var k=(t=(0,f.injectable)())(e=r=function(){function t(){(0,a.default)(this,t),this.fontAtlas=void 0,this.fontOptions=void 0,this.key=void 0,this.cache=new o.LRUCache(T)}return(0,i.default)(t,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:y,fontWeight:v,characterSet:p,fontSize:g,buffer:d,sdf:!0,cutoff:O,radius:F},this.key=""}},{key:"setFontOptions",value:function(t){this.fontOptions=l({},this.fontOptions,{},t),this.key=this.getKey();var e=this.getNewChars(this.key,this.fontOptions.characterSet),r=this.cache.get(this.key);if(!r||0!==e.length){var n=this.generateFontAtlas(this.key,e,r);this.fontAtlas=n,this.cache.set(this.key,n)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(t,e,r){var n=this.fontOptions,a=n.fontFamily,i=n.fontWeight,o=n.fontSize,f=n.buffer,u=n.sdf,h=n.radius,p=n.cutoff,y=r&&r.data;y||((y=document.createElement("canvas")).width=b);var v=y.getContext("2d");A(v,a,o,i);var g=(0,c.buildMapping)(l({getFontWidth:function(t){return v.measureText(t).width},fontHeight:o*m,buffer:f,characterSet:e,maxCanvasWidth:b},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset})),d=g.mapping,O=g.canvasHeight,F=g.xOffset,T=g.yOffset;if(y.height!==O){var _=v.getImageData(0,0,y.width,y.height);y.height=O,v.putImageData(_,0,0)}if(A(v,a,o,i),u){var E=new s.default(o,f,h,p,a,i),k=v.getImageData(0,0,E.size,E.size),S=!0,U=!1,w=void 0;try{for(var L,j=e[Symbol.iterator]();!(S=(L=j.next()).done);S=!0){var C=L.value;D(E.draw(C),k),v.putImageData(k,d[C].x,d[C].y)}}catch(z){U=!0,w=z}finally{try{S||null==j.return||j.return()}finally{if(U)throw w}}}else{var I=!0,P=!1,N=void 0;try{for(var W,q=e[Symbol.iterator]();!(I=(W=q.next()).done);I=!0){var R=W.value;v.fillText(R,d[R].x,d[R].y+o*x)}}catch(z){P=!0,N=z}finally{try{I||null==q.return||q.return()}finally{if(P)throw N}}}return{xOffset:F,yOffset:T,mapping:d,data:y,width:y.width,height:y.height}}},{key:"getKey",value:function(){var t=this.fontOptions,e=t.fontFamily,r=t.fontWeight,n=t.fontSize,a=t.buffer,i=t.sdf,o=t.radius,s=t.cutoff;return i?"".concat(e," ").concat(r," ").concat(n," ").concat(a," ").concat(o," ").concat(s):"".concat(e," ").concat(r," ").concat(n," ").concat(a)}},{key:"getNewChars",value:function(t,e){var r=this.cache.get(t);if(!r)return e;var n=[],a=r.mapping,i=new Set(Object.keys(a));return new Set(e).forEach(function(t){i.has(t)||n.push(t)}),n}},{key:"scale",get:function(){return m}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping}}]),t}())||e;exports.default=k;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-utils":"nTEC","@mapbox/tiny-sdf":"TWhu","inversify":"PR7M","../../utils/font_util":"O1sC"}],"BRjp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,a,i=l(require("@babel/runtime/helpers/classCallCheck")),n=l(require("@babel/runtime/helpers/createClass")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),o=l(require("@babel/runtime/helpers/getPrototypeOf")),u=l(require("@babel/runtime/helpers/inherits")),s=require("eventemitter3"),c=require("inversify"),h=require("../../utils/font_util");function l(e){return e&&e.__esModule?e:{default:e}}var d=3,v=1024,f=64,p=(e=(0,c.injectable)())(t=a=function(e){function t(){var e,a;(0,i.default)(this,t);for(var n=arguments.length,u=new Array(n),s=0;s<n;s++)u[s]=arguments[s];return(a=(0,r.default)(this,(e=(0,o.default)(t)).call.apply(e,[this].concat(u)))).canvasHeight=void 0,a.textrure=void 0,a.canvas=void 0,a.iconData=void 0,a.iconMap=void 0,a.ctx=void 0,a}return(0,u.default)(t,e),(0,n.default)(t,[{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(e,t){var a=this,i=new Image;if(this.hasImage(e))throw new Error("Image Id already exists");this.iconData.push({id:e,width:f,height:f}),this.updateIconMap(),this.loadImage(t).then(function(t){i=t;var n=a.iconData.find(function(t){return t.id===e});n&&(n.image=i),a.update()})}},{key:"getTexture",value:function(){return this.textrure}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(e){return this.iconMap.hasOwnProperty(e)}},{key:"removeImage",value:function(e){this.hasImage(e)&&(this.iconData=this.iconData.filter(function(t){return t.id!==e}),delete this.iconMap[e],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var e=this;this.canvas.width=v,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(t){var a=e.iconMap[t],i=a.x,n=a.y,r=a.image;r&&e.ctx.drawImage(r,i,n,f,f)})}},{key:"updateIconMap",value:function(){var e=(0,h.buildIconMaping)(this.iconData,d,v),t=e.mapping,a=e.canvasHeight;this.iconMap=t,this.canvasHeight=a}},{key:"loadImage",value:function(e){return new Promise(function(t,a){if(e instanceof HTMLImageElement)t(e);else{var i=new Image;i.crossOrigin="anonymous",i.onload=function(){t(i)},i.onerror=function(){a(new Error("Could not load image at "+e))},i.src=e instanceof File?URL.createObjectURL(e):e}})}}]),t}(s.EventEmitter))||t;exports.default=p;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","eventemitter3":"JJlS","inversify":"PR7M","../../utils/font_util":"O1sC"}],"PxDr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"hSOw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.copy=a,exports.identity=u,exports.fromValues=s,exports.set=i,exports.transpose=c,exports.invert=p,exports.adjoint=f,exports.determinant=x,exports.multiply=l,exports.rotate=M,exports.scale=h,exports.fromRotation=b,exports.fromScaling=v,exports.str=y,exports.frob=d,exports.LDU=m,exports.add=P,exports.subtract=O,exports.exactEquals=A,exports.equals=j,exports.multiplyScalar=E,exports.multiplyScalarAndAdd=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function i(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function c(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function f(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function x(t){return t[0]*t[3]-t[2]*t[1]}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*c+a*p,t[3]=o*c+u*p,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function h(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function b(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function v(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function y(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function d(t){return Math.hypot(t[0],t[1],t[2],t[3])}function m(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function O(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function A(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function j(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}function E(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function R(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var Y=l;exports.mul=Y;var _=O;exports.sub=_;
},{"./common.js":"PxDr"}],"n7Ma":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=a,exports.copy=o,exports.identity=u,exports.fromValues=s,exports.set=i,exports.invert=c,exports.determinant=p,exports.multiply=f,exports.rotate=x,exports.scale=l,exports.translate=M,exports.fromRotation=h,exports.fromScaling=b,exports.fromTranslation=v,exports.str=m,exports.frob=y,exports.add=d,exports.subtract=P,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=A,exports.exactEquals=E,exports.equals=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,n,a,o,u){var s=new t.ARRAY_TYPE(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=a,s[4]=o,s[5]=u,s}function i(t,r,e,n,a,o,u){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=u,t}function c(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],u=r[4],s=r[5],i=e*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t[4]=(a*s-o*u)*i,t[5]=(n*u-e*s)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function f(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return t[0]=n*c+o*p,t[1]=a*c+u*p,t[2]=n*f+o*x,t[3]=a*f+u*x,t[4]=n*l+o*M+s,t[5]=a*l+u*M+i,t}function x(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=Math.sin(e),p=Math.cos(e);return t[0]=n*p+o*c,t[1]=a*p+u*c,t[2]=n*-c+o*p,t[3]=a*-c+u*p,t[4]=s,t[5]=i,t}function l(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n*c,t[1]=a*c,t[2]=o*p,t[3]=u*p,t[4]=s,t[5]=i,t}function M(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=u,t[4]=n*c+o*p+s,t[5]=a*c+u*p+i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function d(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function P(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function A(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t}function E(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function R(r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-x)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-M)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var S=f;exports.mul=S;var j=P;exports.sub=j;
},{"./common.js":"PxDr"}],"SRDq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"PxDr"}],"WdlT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"PxDr"}],"Ijz7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=A,exports.inverse=q,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=I,exports.rotateX=N,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function I(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=s(t[0],t[1],t[2]),n=s(r[0],r[1],r[2]);g(e,e),g(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=P;exports.sqrDist=C;var G=a;exports.len=G;var H=O;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"PxDr"}],"QGfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"PxDr"}],"PXH2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"PxDr","./mat3.js":"SRDq","./vec3.js":"Ijz7","./vec4.js":"QGfo"}],"BYXr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=o,exports.clone=s,exports.fromValues=u,exports.fromRotationTranslationValues=p,exports.fromRotationTranslation=i,exports.fromTranslation=c,exports.fromRotation=f,exports.fromMat4=x,exports.copy=h,exports.identity=l,exports.set=M,exports.getDual=b,exports.setDual=m,exports.getTranslation=d,exports.translate=R,exports.rotateX=y,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=L,exports.add=Y,exports.multiply=q,exports.scale=T,exports.lerp=w,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=W,exports.equals=X,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=n(require("./common.js")),r=n(require("./quat.js")),e=n(require("./mat4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=n?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(e,o,s):e[o]=t[o]}return e.default=t,r&&r.set(t,e),e}function o(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function s(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function u(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function p(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,c=.5*s,f=.5*u;return p[4]=i*n+c*a-f*e,p[5]=c*n+f*r-i*a,p[6]=f*n+i*e-c*r,p[7]=-i*r-c*e-f*a,p}function i(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function c(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function x(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),i(a,o,s),a}function h(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function b(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var P=r.copy;function m(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function d(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],c=r[4],f=r[5],x=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+c,t[5]=s*p+o*u-a*i+f,t[6]=s*i+a*p-n*u+x,t[7]=-a*u-n*p-o*i+h,t}function y(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],c=r[3];return t[0]=u*s+c*a+p*o-i*n,t[1]=p*s+c*n+i*a-u*o,t[2]=i*s+c*o+u*n-p*a,t[3]=c*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],c=r[7],t[4]=u*s+c*a+p*o-i*n,t[5]=p*s+c*n+i*a-u*o,t[6]=i*s+c*o+u*n-p*a,t[7]=c*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],c=e[3];return t[0]=a*c+s*u+n*i-o*p,t[1]=n*c+s*p+o*u-a*i,t[2]=o*c+s*i+a*p-n*u,t[3]=s*c-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],c=e[7],t[4]=a*c+s*u+n*i-o*p,t[5]=n*c+s*p+o*u-a*i,t[6]=o*c+s*i+a*p-n*u,t[7]=s*c-a*u-n*p-o*i,t}function L(r,e,a,n){if(Math.abs(n)<t.EPSILON)return h(r,e);var o=Math.hypot(a[0],a[1],a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,c=Math.cos(n),f=e[0],x=e[1],l=e[2],M=e[3];r[0]=f*c+M*u+x*i-l*p,r[1]=x*c+M*p+l*u-f*i,r[2]=l*c+M*i+f*p-x*u,r[3]=M*c-f*u-x*p-l*i;var v=e[4],b=e[5],P=e[6],m=e[7];return r[4]=v*c+m*u+b*i-P*p,r[5]=b*c+m*p+P*u-v*i,r[6]=P*c+m*i+v*p-b*u,r[7]=m*c-v*u-b*p-P*i,r}function Y(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function q(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],c=e[7],f=r[4],x=r[5],h=r[6],l=r[7],M=e[0],v=e[1],b=e[2],P=e[3];return t[0]=a*P+s*M+n*b-o*v,t[1]=n*P+s*v+o*M-a*b,t[2]=o*P+s*b+a*v-n*M,t[3]=s*P-a*M-n*v-o*b,t[4]=a*c+s*u+n*i-o*p+f*P+l*M+x*b-h*v,t[5]=n*c+s*p+o*u-a*i+x*P+l*v+h*M-f*b,t[6]=o*c+s*i+a*p-n*u+h*P+l*b+f*v-x*M,t[7]=s*c-a*u-n*p-o*i+l*P-f*M-x*v-h*b,t}exports.setReal=P;var j=q;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=j;var _=r.dot;function w(t,r,e,a){var n=1-a;return _(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=k(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=_;var S=r.length;exports.length=S;var D=S;exports.len=D;var k=r.squaredLength;exports.squaredLength=k;var B=k;function Q(t,r){var e=k(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],c=r[7],f=a*u+n*p+o*i+s*c;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*f)/e,t[5]=(p-n*f)/e,t[6]=(i-o*f)/e,t[7]=(c-s*f)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function W(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function X(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],c=r[7],f=e[0],x=e[1],h=e[2],l=e[3],M=e[4],v=e[5],b=e[6],P=e[7];return Math.abs(a-f)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-x)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(u-M)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(p-v)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-P)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"PxDr","./quat.js":"PXH2","./mat4.js":"WdlT"}],"cHtt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=v,exports.min=h,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=I,exports.angle=T,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=e(require("./common.js"));function t(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return t=function(){return r},r}function e(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=t();if(e&&e.has(r))return e.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var u=o?Object.getOwnPropertyDescriptor(r,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=r[a]}return n.default=r,e&&e.set(r,n),n}function n(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function u(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function i(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function c(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function p(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function f(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function v(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function h(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function M(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function l(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function d(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function m(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.hypot(e,n)}function y(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function P(r){var t=r[0],e=r[1];return Math.hypot(t,e)}function q(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function g(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function E(r,t){return r[0]*t[0]+r[1]*t[1]}function R(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function j(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function L(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function I(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],u=Math.sin(n),s=Math.cos(n);return r[0]=o*s-a*u+e[0],r[1]=o*u+a*s+e[1],r}function T(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],u=e*e+n*n;u>0&&(u=1/Math.sqrt(u));var s=o*o+a*a;s>0&&(s=1/Math.sqrt(s));var i=(e*o+n*a)*u*s;return i>1?0:i<-1?Math.PI:Math.acos(i)}function N(r){return r[0]=0,r[1]=0,r}function k(r){return"vec2("+r[0]+", "+r[1]+")"}function z(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],u=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var r=n();return function(t,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,s=n;s<i;s+=e)r[0]=t[s],r[1]=t[s+1],a(r,r,u),t[s]=r[0],t[s+1]=r[1];return t}}();exports.forEach=J;
},{"./common.js":"PxDr"}],"CPlc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=v(require("./common.js"));exports.glMatrix=e;var r=v(require("./mat2.js"));exports.mat2=r;var t=v(require("./mat2d.js"));exports.mat2d=t;var o=v(require("./mat3.js"));exports.mat3=o;var a=v(require("./mat4.js"));exports.mat4=a;var s=v(require("./quat.js"));exports.quat=s;var u=v(require("./quat2.js"));exports.quat2=u;var p=v(require("./vec2.js"));exports.vec2=p;var i=v(require("./vec3.js"));exports.vec3=i;var n=v(require("./vec4.js"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}exports.vec4=n;
},{"./common.js":"PxDr","./mat2.js":"hSOw","./mat2d.js":"n7Ma","./mat3.js":"SRDq","./mat4.js":"WdlT","./quat.js":"PXH2","./quat2.js":"BYXr","./vec2.js":"cHtt","./vec3.js":"Ijz7","./vec4.js":"QGfo"}],"spo7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,i,r=s(require("@babel/runtime/helpers/slicedToArray")),o=s(require("@babel/runtime/helpers/classCallCheck")),a=s(require("@babel/runtime/helpers/createClass")),n=require("gl-matrix"),u=require("inversify");function s(e){return e&&e.__esModule?e:{default:e}}var c=(e=(0,u.injectable)())(t=i=function(){function e(){(0,o.default)(this,e),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return(0,a.default)(e,[{key:"init",value:function(){}},{key:"update",value:function(e){this.viewport=e,this.viewMatrixInverse=n.mat4.invert(n.mat4.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var e=this.viewport.getCenter(),t=(0,r.default)(e,2);return[t[0],t[1]]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}},{key:"setViewProjectionMatrix",value:function(e){this.overridedViewProjectionMatrix=e}},{key:"jitterProjectionMatrix",value:function(e,t){var i=n.mat4.fromTranslation(n.mat4.create(),[e,t,0]);this.jitteredProjectionMatrix=n.mat4.multiply(n.mat4.create(),i,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=n.mat4.multiply(n.mat4.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||t;exports.default=c;
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","gl-matrix":"CPlc","inversify":"PR7M"}],"L6IG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t,e,o,r=a(require("@babel/runtime/helpers/classCallCheck")),n=a(require("@babel/runtime/helpers/createClass")),i=require("@antv/l7-utils"),s=require("inversify"),l=require("../../types");function a(t){return t&&t.__esModule?t:{default:t}}var c=(t=(0,s.injectable)())(e=o=function(){function t(){(0,r.default)(this,t),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return(0,n.default)(t,[{key:"init",value:function(t,e){this.container=t.container,this.scene=e,this.mapsService=e.get(l.TYPES.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,e){e.get(l.TYPES.IMapService).map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"removeControl",value:function(t){var e=this.controls.indexOf(t);return e>-1&&this.controls.splice(e,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach(function(e){e.addTo(t.scene),t.controls.push(e)}),this.unAddControls=[]}},{key:"destroy",value:function(){var t=!0,e=!1,o=void 0;try{for(var r,n=this.controls[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.remove()}}catch(i){e=!0,o=i}finally{try{t||null==n.return||n.return()}finally{if(e)throw o}}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var t=this.controlCorners={},e="l7-",o=this.controlContainer=i.DOM.create("div",e+"control-container",this.container);function r(r,n){var s=e+r+" "+e+n;t[r+n]=i.DOM.create("div",s,o)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&i.DOM.remove(this.controlCorners[t]);this.controlContainer&&i.DOM.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),t}())||e;exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-utils":"nTEC","inversify":"PR7M","../../types":"m6Ky"}],"mVWR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,s,a=u(require("@babel/runtime/helpers/classCallCheck")),i=u(require("@babel/runtime/helpers/createClass")),t=require("inversify"),n=require("../../types");function u(e){return e&&e.__esModule?e:{default:e}}var d=(e=(0,t.injectable)())(r=s=function(){function e(){(0,a.default)(this,e),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return(0,i.default)(e,[{key:"addMarkerLayer",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(e),e.addTo(this.scene)):this.unAddMarkerLayers.push(e)}},{key:"removeMarkerLayer",value:function(e){e.destroy(),this.markerLayers.indexOf(e);var r=this.markerLayers.indexOf(e);r>-1&&this.markerLayers.splice(r,1)}},{key:"addMarker",value:function(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(e),e.addTo(this.scene)):this.unAddMarkers.push(e)}},{key:"addMarkers",value:function(){var e=this;this.unAddMarkers.forEach(function(r){r.addTo(e.scene),e.markers.push(r)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var e=this;this.unAddMarkerLayers.forEach(function(r){e.markerLayers.push(r),r.addTo(e.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(e){e.remove(),this.markers.indexOf(e);var r=this.markers.indexOf(e);r>-1&&this.markers.splice(r,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(n.TYPES.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(e){e.remove()}),this.markers=[],this.markerLayers.forEach(function(e){e.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(e){e.destroy()}}]),e}())||r;exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M","../../types":"m6Ky"}],"AUtA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,i,t,u=r(require("@babel/runtime/helpers/classCallCheck")),p=r(require("@babel/runtime/helpers/createClass")),s=require("inversify"),o=require("../../types");function r(e){return e&&e.__esModule?e:{default:e}}var n=(e=(0,s.injectable)())(i=t=function(){function e(){(0,u.default)(this,e),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return(0,p.default)(e,[{key:"removePopup",value:function(e){e.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(e){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(e.addTo(this.scene),this.popup=e):this.unAddPopup=e}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(e){this.scene=e,this.mapsService=e.get(o.TYPES.IMapService)}}]),e}())||i;exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M","../../types":"m6Ky"}],"He9F":[function(require,module,exports) {
function i(i,e,r,n,l){var a={};return Object.keys(n).forEach(function(i){a[i]=n[i]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(i,e,r)||r},a),l&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(l):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(i,e,a),a=null),a}module.exports=i;
},{}],"s9iF":[function(require,module,exports) {
function t(){this.__data__=[],this.size=0}module.exports=t;
},{}],"LIpy":[function(require,module,exports) {
function e(e,n){return e===n||e!=e&&n!=n}module.exports=e;
},{}],"yEjJ":[function(require,module,exports) {
var r=require("./eq");function e(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}module.exports=e;
},{"./eq":"LIpy"}],"bWyl":[function(require,module,exports) {
var e=require("./_assocIndexOf"),r=Array.prototype,t=r.splice;function a(r){var a=this.__data__,o=e(a,r);return!(o<0)&&(o==a.length-1?a.pop():t.call(a,o,1),--this.size,!0)}module.exports=a;
},{"./_assocIndexOf":"yEjJ"}],"Ewuv":[function(require,module,exports) {
var r=require("./_assocIndexOf");function e(e){var a=this.__data__,o=r(a,e);return o<0?void 0:a[o][1]}module.exports=e;
},{"./_assocIndexOf":"yEjJ"}],"xDQX":[function(require,module,exports) {
var e=require("./_assocIndexOf");function r(r){return e(this.__data__,r)>-1}module.exports=r;
},{"./_assocIndexOf":"yEjJ"}],"h0zV":[function(require,module,exports) {
var s=require("./_assocIndexOf");function e(e,r){var t=this.__data__,i=s(t,e);return i<0?(++this.size,t.push([e,r])):t[i][1]=r,this}module.exports=e;
},{"./_assocIndexOf":"yEjJ"}],"Xk23":[function(require,module,exports) {
var e=require("./_listCacheClear"),t=require("./_listCacheDelete"),r=require("./_listCacheGet"),l=require("./_listCacheHas"),o=require("./_listCacheSet");function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var l=e[t];this.set(l[0],l[1])}}a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=l,a.prototype.set=o,module.exports=a;
},{"./_listCacheClear":"s9iF","./_listCacheDelete":"bWyl","./_listCacheGet":"Ewuv","./_listCacheHas":"xDQX","./_listCacheSet":"h0zV"}],"y4DG":[function(require,module,exports) {
var e=require("./_ListCache");function i(){this.__data__=new e,this.size=0}module.exports=i;
},{"./_ListCache":"Xk23"}],"TpjK":[function(require,module,exports) {
function e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}module.exports=e;
},{}],"skbs":[function(require,module,exports) {
function t(t){return this.__data__.get(t)}module.exports=t;
},{}],"ocJ6":[function(require,module,exports) {
function t(t){return this.__data__.has(t)}module.exports=t;
},{}],"j3D9":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],"MIhM":[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":"j3D9"}],"wppe":[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":"MIhM"}],"uiOY":[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(n){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":"wppe"}],"lPmd":[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],"e5TX":[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":"wppe","./_getRawTag":"uiOY","./_objectToString":"lPmd"}],"u9vI":[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],"dRuq":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObject"),t="[object AsyncFunction]",n="[object Function]",o="[object GeneratorFunction]",c="[object Proxy]";function u(u){if(!r(u))return!1;var i=e(u);return i==n||i==o||i==t||i==c}module.exports=u;
},{"./_baseGetTag":"e5TX","./isObject":"u9vI"}],"q3B8":[function(require,module,exports) {
var r=require("./_root"),e=r["__core-js_shared__"];module.exports=e;
},{"./_root":"MIhM"}],"qpNZ":[function(require,module,exports) {
var e=require("./_coreJsData"),r=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(e){return!!r&&r in e}module.exports=n;
},{"./_coreJsData":"q3B8"}],"g55O":[function(require,module,exports) {
var t=Function.prototype,r=t.toString;function n(t){if(null!=t){try{return r.call(t)}catch(n){}try{return t+""}catch(n){}}return""}module.exports=n;
},{}],"iEGD":[function(require,module,exports) {
var e=require("./isFunction"),r=require("./_isMasked"),t=require("./isObject"),o=require("./_toSource"),n=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,p=i.toString,s=u.hasOwnProperty,a=RegExp("^"+p.call(s).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(n){return!(!t(n)||r(n))&&(e(n)?a:c).test(o(n))}module.exports=l;
},{"./isFunction":"dRuq","./_isMasked":"qpNZ","./isObject":"u9vI","./_toSource":"g55O"}],"Nk5W":[function(require,module,exports) {
function n(n,o){return null==n?void 0:n[o]}module.exports=n;
},{}],"bViC":[function(require,module,exports) {
var e=require("./_baseIsNative"),r=require("./_getValue");function u(u,a){var i=r(u,a);return e(i)?i:void 0}module.exports=u;
},{"./_baseIsNative":"iEGD","./_getValue":"Nk5W"}],"K9uV":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Map");module.exports=o;
},{"./_getNative":"bViC","./_root":"MIhM"}],"FTXF":[function(require,module,exports) {
var e=require("./_getNative"),r=e(Object,"create");module.exports=r;
},{"./_getNative":"bViC"}],"RxSq":[function(require,module,exports) {
var e=require("./_nativeCreate");function t(){this.__data__=e?e(null):{},this.size=0}module.exports=t;
},{"./_nativeCreate":"FTXF"}],"qBl2":[function(require,module,exports) {
function t(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}module.exports=t;
},{}],"hClK":[function(require,module,exports) {
var e=require("./_nativeCreate"),r="__lodash_hash_undefined__",t=Object.prototype,a=t.hasOwnProperty;function _(t){var _=this.__data__;if(e){var o=_[t];return o===r?void 0:o}return a.call(_,t)?_[t]:void 0}module.exports=_;
},{"./_nativeCreate":"FTXF"}],"YIaf":[function(require,module,exports) {
var e=require("./_nativeCreate"),r=Object.prototype,t=r.hasOwnProperty;function a(r){var a=this.__data__;return e?void 0!==a[r]:t.call(a,r)}module.exports=a;
},{"./_nativeCreate":"FTXF"}],"Ag0p":[function(require,module,exports) {
var e=require("./_nativeCreate"),_="__lodash_hash_undefined__";function i(i,t){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&void 0===t?_:t,this}module.exports=i;
},{"./_nativeCreate":"FTXF"}],"C8N4":[function(require,module,exports) {
var e=require("./_hashClear"),r=require("./_hashDelete"),t=require("./_hashGet"),h=require("./_hashHas"),o=require("./_hashSet");function a(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var h=e[r];this.set(h[0],h[1])}}a.prototype.clear=e,a.prototype.delete=r,a.prototype.get=t,a.prototype.has=h,a.prototype.set=o,module.exports=a;
},{"./_hashClear":"RxSq","./_hashDelete":"qBl2","./_hashGet":"hClK","./_hashHas":"YIaf","./_hashSet":"Ag0p"}],"lBq7":[function(require,module,exports) {
var e=require("./_Hash"),i=require("./_ListCache"),r=require("./_Map");function a(){this.size=0,this.__data__={hash:new e,map:new(r||i),string:new e}}module.exports=a;
},{"./_Hash":"C8N4","./_ListCache":"Xk23","./_Map":"K9uV"}],"XJYD":[function(require,module,exports) {
function o(o){var n=typeof o;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o}module.exports=o;
},{}],"ZC1a":[function(require,module,exports) {
var r=require("./_isKeyable");function e(e,a){var t=e.__data__;return r(a)?t["string"==typeof a?"string":"hash"]:t.map}module.exports=e;
},{"./_isKeyable":"XJYD"}],"cDyG":[function(require,module,exports) {
var e=require("./_getMapData");function t(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}module.exports=t;
},{"./_getMapData":"ZC1a"}],"G3gK":[function(require,module,exports) {
var e=require("./_getMapData");function t(t){return e(this,t).get(t)}module.exports=t;
},{"./_getMapData":"ZC1a"}],"ueph":[function(require,module,exports) {
var e=require("./_getMapData");function r(r){return e(this,r).has(r)}module.exports=r;
},{"./_getMapData":"ZC1a"}],"UY82":[function(require,module,exports) {
var e=require("./_getMapData");function t(t,i){var s=e(this,t),r=s.size;return s.set(t,i),this.size+=s.size==r?0:1,this}module.exports=t;
},{"./_getMapData":"ZC1a"}],"wtMJ":[function(require,module,exports) {
var e=require("./_mapCacheClear"),r=require("./_mapCacheDelete"),t=require("./_mapCacheGet"),a=require("./_mapCacheHas"),p=require("./_mapCacheSet");function o(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=t,o.prototype.has=a,o.prototype.set=p,module.exports=o;
},{"./_mapCacheClear":"lBq7","./_mapCacheDelete":"cDyG","./_mapCacheGet":"G3gK","./_mapCacheHas":"ueph","./_mapCacheSet":"UY82"}],"fwYF":[function(require,module,exports) {
var e=require("./_ListCache"),i=require("./_Map"),t=require("./_MapCache"),s=200;function _(_,a){var r=this.__data__;if(r instanceof e){var h=r.__data__;if(!i||h.length<s-1)return h.push([_,a]),this.size=++r.size,this;r=this.__data__=new t(h)}return r.set(_,a),this.size=r.size,this}module.exports=_;
},{"./_ListCache":"Xk23","./_Map":"K9uV","./_MapCache":"wtMJ"}],"I84N":[function(require,module,exports) {
var e=require("./_ListCache"),t=require("./_stackClear"),r=require("./_stackDelete"),a=require("./_stackGet"),s=require("./_stackHas"),o=require("./_stackSet");function i(t){var r=this.__data__=new e(t);this.size=r.size}i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=s,i.prototype.set=o,module.exports=i;
},{"./_ListCache":"Xk23","./_stackClear":"y4DG","./_stackDelete":"TpjK","./_stackGet":"skbs","./_stackHas":"ocJ6","./_stackSet":"fwYF"}],"kAdy":[function(require,module,exports) {
var e=require("./_getNative"),r=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch(t){}}();module.exports=r;
},{"./_getNative":"bViC"}],"d05L":[function(require,module,exports) {
var e=require("./_defineProperty");function r(r,o,u){"__proto__"==o&&e?e(r,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):r[o]=u}module.exports=r;
},{"./_defineProperty":"kAdy"}],"Tdbd":[function(require,module,exports) {
var e=require("./_baseAssignValue"),i=require("./eq");function r(r,o,u){(void 0===u||i(r[o],u))&&(void 0!==u||o in r)||e(r,o,u)}module.exports=r;
},{"./_baseAssignValue":"d05L","./eq":"LIpy"}],"oVe7":[function(require,module,exports) {
function r(r){return function(e,n,t){for(var o=-1,u=Object(e),f=t(e),a=f.length;a--;){var c=f[r?a:++o];if(!1===n(u[c],c,u))break}return e}}module.exports=r;
},{}],"mduf":[function(require,module,exports) {
var e=require("./_createBaseFor"),r=e();module.exports=r;
},{"./_createBaseFor":"oVe7"}],"s4SJ":[function(require,module,exports) {

var e=require("./_root"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof module&&module&&!module.nodeType&&module,t=r&&r.exports===o,p=t?e.Buffer:void 0,u=p?p.allocUnsafe:void 0;function n(e,o){if(o)return e.slice();var r=e.length,t=u?u(r):new e.constructor(r);return e.copy(t),t}module.exports=n;
},{"./_root":"MIhM"}],"yfX1":[function(require,module,exports) {
var r=require("./_root"),e=r.Uint8Array;module.exports=e;
},{"./_root":"MIhM"}],"zb3a":[function(require,module,exports) {
var e=require("./_Uint8Array");function r(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}module.exports=r;
},{"./_Uint8Array":"yfX1"}],"jXAN":[function(require,module,exports) {
var r=require("./_cloneArrayBuffer");function e(e,f){var t=f?r(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}module.exports=e;
},{"./_cloneArrayBuffer":"zb3a"}],"Mkgn":[function(require,module,exports) {
function r(r,e){var n=-1,o=r.length;for(e||(e=Array(o));++n<o;)e[n]=r[n];return e}module.exports=r;
},{}],"ga8q":[function(require,module,exports) {
var r=require("./isObject"),e=Object.create,t=function(){function t(){}return function(n){if(!r(n))return{};if(e)return e(n);t.prototype=n;var o=new t;return t.prototype=void 0,o}}();module.exports=t;
},{"./isObject":"u9vI"}],"oss3":[function(require,module,exports) {
function n(n,r){return function(t){return n(r(t))}}module.exports=n;
},{}],"CXf5":[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.getPrototypeOf,Object);module.exports=r;
},{"./_overArg":"oss3"}],"nhsl":[function(require,module,exports) {
var t=Object.prototype;function o(o){var r=o&&o.constructor;return o===("function"==typeof r&&r.prototype||t)}module.exports=o;
},{}],"qE2F":[function(require,module,exports) {
var e=require("./_baseCreate"),r=require("./_getPrototype"),t=require("./_isPrototype");function o(o){return"function"!=typeof o.constructor||t(o)?{}:e(r(o))}module.exports=o;
},{"./_baseCreate":"ga8q","./_getPrototype":"CXf5","./_isPrototype":"nhsl"}],"OuyB":[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],"pK4Y":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Arguments]";function u(u){return r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":"e5TX","./isObjectLike":"OuyB"}],"tilN":[function(require,module,exports) {
var e=require("./_baseIsArguments"),r=require("./isObjectLike"),t=Object.prototype,l=t.hasOwnProperty,n=t.propertyIsEnumerable,u=e(function(){return arguments}())?e:function(e){return r(e)&&l.call(e,"callee")&&!n.call(e,"callee")};module.exports=u;
},{"./_baseIsArguments":"pK4Y","./isObjectLike":"OuyB"}],"p0cq":[function(require,module,exports) {
var r=Array.isArray;module.exports=r;
},{}],"GmNU":[function(require,module,exports) {
var e=9007199254740991;function r(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=e}module.exports=r;
},{}],"LN6c":[function(require,module,exports) {
var e=require("./isFunction"),n=require("./isLength");function r(r){return null!=r&&n(r.length)&&!e(r)}module.exports=r;
},{"./isFunction":"dRuq","./isLength":"GmNU"}],"FwQQ":[function(require,module,exports) {
var e=require("./isArrayLike"),r=require("./isObjectLike");function i(i){return r(i)&&e(i)}module.exports=i;
},{"./isArrayLike":"LN6c","./isObjectLike":"OuyB"}],"PYZb":[function(require,module,exports) {
function e(){return!1}module.exports=e;
},{}],"iyC2":[function(require,module,exports) {

var e=require("./_root"),o=require("./stubFalse"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=r&&"object"==typeof module&&module&&!module.nodeType&&module,p=t&&t.exports===r,u=p?e.Buffer:void 0,d=u?u.isBuffer:void 0,s=d||o;module.exports=s;
},{"./_root":"MIhM","./stubFalse":"PYZb"}],"ES04":[function(require,module,exports) {
var t=require("./_baseGetTag"),e=require("./_getPrototype"),r=require("./isObjectLike"),o="[object Object]",c=Function.prototype,n=Object.prototype,u=c.toString,i=n.hasOwnProperty,a=u.call(Object);function l(c){if(!r(c)||t(c)!=o)return!1;var n=e(c);if(null===n)return!0;var l=i.call(n,"constructor")&&n.constructor;return"function"==typeof l&&l instanceof l&&u.call(l)==a}module.exports=l;
},{"./_baseGetTag":"e5TX","./_getPrototype":"CXf5","./isObjectLike":"OuyB"}],"L2LX":[function(require,module,exports) {
var e=require("./_baseGetTag"),t=require("./isLength"),r=require("./isObjectLike"),o="[object Arguments]",b="[object Array]",c="[object Boolean]",j="[object Date]",a="[object Error]",n="[object Function]",i="[object Map]",A="[object Number]",y="[object Object]",u="[object RegExp]",g="[object Set]",l="[object String]",p="[object WeakMap]",s="[object ArrayBuffer]",m="[object DataView]",U="[object Float32Array]",f="[object Float64Array]",q="[object Int8Array]",F="[object Int16Array]",I="[object Int32Array]",d="[object Uint8Array]",h="[object Uint8ClampedArray]",k="[object Uint16Array]",x="[object Uint32Array]",B={};function D(o){return r(o)&&t(o.length)&&!!B[e(o)]}B[U]=B[f]=B[q]=B[F]=B[I]=B[d]=B[h]=B[k]=B[x]=!0,B[o]=B[b]=B[s]=B[c]=B[m]=B[j]=B[a]=B[n]=B[i]=B[A]=B[y]=B[u]=B[g]=B[l]=B[p]=!1,module.exports=D;
},{"./_baseGetTag":"e5TX","./isLength":"GmNU","./isObjectLike":"OuyB"}],"PnXa":[function(require,module,exports) {
function n(n){return function(r){return n(r)}}module.exports=n;
},{}],"PBPf":[function(require,module,exports) {
var e=require("./_freeGlobal"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=o&&"object"==typeof module&&module&&!module.nodeType&&module,t=r&&r.exports===o,p=t&&e.process,u=function(){try{var e=r&&r.require&&r.require("util").types;return e||p&&p.binding&&p.binding("util")}catch(o){}}();module.exports=u;
},{"./_freeGlobal":"j3D9"}],"kwIb":[function(require,module,exports) {
var e=require("./_baseIsTypedArray"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isTypedArray,s=i?r(i):e;module.exports=s;
},{"./_baseIsTypedArray":"L2LX","./_baseUnary":"PnXa","./_nodeUtil":"PBPf"}],"vW3g":[function(require,module,exports) {
function o(o,t){if(("constructor"!==t||"function"!=typeof o[t])&&"__proto__"!=t)return o[t]}module.exports=o;
},{}],"pS95":[function(require,module,exports) {
var e=require("./_baseAssignValue"),r=require("./eq"),o=Object.prototype,a=o.hasOwnProperty;function i(o,i,t){var n=o[i];a.call(o,i)&&r(n,t)&&(void 0!==t||i in o)||e(o,i,t)}module.exports=i;
},{"./_baseAssignValue":"d05L","./eq":"LIpy"}],"dtkN":[function(require,module,exports) {
var r=require("./_assignValue"),e=require("./_baseAssignValue");function a(a,i,u,n){var o=!u;u||(u={});for(var s=-1,v=i.length;++s<v;){var l=i[s],t=n?n(u[l],a[l],l,u,a):void 0;void 0===t&&(t=a[l]),o?e(u,l,t):r(u,l,t)}return u}module.exports=a;
},{"./_assignValue":"pS95","./_baseAssignValue":"d05L"}],"r8MY":[function(require,module,exports) {
function r(r,o){for(var e=-1,n=Array(r);++e<r;)n[e]=o(e);return n}module.exports=r;
},{}],"AGrE":[function(require,module,exports) {
var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function t(t,n){var o=typeof t;return!!(n=null==n?e:n)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<n}module.exports=t;
},{}],"VcLW":[function(require,module,exports) {
var e=require("./_baseTimes"),r=require("./isArguments"),t=require("./isArray"),i=require("./isBuffer"),n=require("./_isIndex"),s=require("./isTypedArray"),u=Object.prototype,f=u.hasOwnProperty;function a(u,a){var o=t(u),p=!o&&r(u),y=!o&&!p&&i(u),g=!o&&!p&&!y&&s(u),h=o||p||y||g,l=h?e(u.length,String):[],q=l.length;for(var b in u)!a&&!f.call(u,b)||h&&("length"==b||y&&("offset"==b||"parent"==b)||g&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||n(b,q))||l.push(b);return l}module.exports=a;
},{"./_baseTimes":"r8MY","./isArguments":"tilN","./isArray":"p0cq","./isBuffer":"iyC2","./_isIndex":"AGrE","./isTypedArray":"kwIb"}],"uy4o":[function(require,module,exports) {
function r(r){var n=[];if(null!=r)for(var u in Object(r))n.push(u);return n}module.exports=r;
},{}],"FASg":[function(require,module,exports) {
var r=require("./isObject"),e=require("./_isPrototype"),t=require("./_nativeKeysIn"),o=Object.prototype,i=o.hasOwnProperty;function n(o){if(!r(o))return t(o);var n=e(o),u=[];for(var s in o)("constructor"!=s||!n&&i.call(o,s))&&u.push(s);return u}module.exports=n;
},{"./isObject":"u9vI","./_isPrototype":"nhsl","./_nativeKeysIn":"uy4o"}],"UACB":[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeysIn"),i=require("./isArrayLike");function u(u){return i(u)?e(u,!0):r(u)}module.exports=u;
},{"./_arrayLikeKeys":"VcLW","./_baseKeysIn":"FASg","./isArrayLike":"LN6c"}],"s5pp":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./keysIn");function u(u){return e(u,r(u))}module.exports=u;
},{"./_copyObject":"dtkN","./keysIn":"UACB"}],"XsjK":[function(require,module,exports) {
var e=require("./_assignMergeValue"),r=require("./_cloneBuffer"),i=require("./_cloneTypedArray"),u=require("./_copyArray"),q=require("./_initCloneObject"),s=require("./isArguments"),t=require("./isArray"),a=require("./isArrayLikeObject"),n=require("./isBuffer"),o=require("./isFunction"),c=require("./isObject"),l=require("./isPlainObject"),f=require("./isTypedArray"),y=require("./_safeGet"),d=require("./toPlainObject");function v(v,A,_,b,j,O,g){var p=y(v,_),m=y(A,_),B=g.get(m);if(B)e(v,_,B);else{var P=O?O(p,m,_+"",v,A,g):void 0,T=void 0===P;if(T){var k=t(m),x=!k&&n(m),C=!k&&!x&&f(m);P=m,k||x||C?t(p)?P=p:a(p)?P=u(p):x?(T=!1,P=r(m,!0)):C?(T=!1,P=i(m,!0)):P=[]:l(m)||s(m)?(P=p,s(p)?P=d(p):c(p)&&!o(p)||(P=q(m))):T=!1}T&&(g.set(m,P),j(P,m,b,O,g),g.delete(m)),e(v,_,P)}}module.exports=v;
},{"./_assignMergeValue":"Tdbd","./_cloneBuffer":"s4SJ","./_cloneTypedArray":"jXAN","./_copyArray":"Mkgn","./_initCloneObject":"qE2F","./isArguments":"tilN","./isArray":"p0cq","./isArrayLikeObject":"FwQQ","./isBuffer":"iyC2","./isFunction":"dRuq","./isObject":"u9vI","./isPlainObject":"ES04","./isTypedArray":"kwIb","./_safeGet":"vW3g","./toPlainObject":"s5pp"}],"WqwZ":[function(require,module,exports) {
var e=require("./_Stack"),r=require("./_assignMergeValue"),i=require("./_baseFor"),u=require("./_baseMergeDeep"),s=require("./isObject"),a=require("./keysIn"),n=require("./_safeGet");function o(q,t,_,c,f){q!==t&&i(t,function(i,a){if(f||(f=new e),s(i))u(q,t,a,_,o,c,f);else{var v=c?c(n(q,a),i,a+"",q,t,f):void 0;void 0===v&&(v=i),r(q,a,v)}},a)}module.exports=o;
},{"./_Stack":"I84N","./_assignMergeValue":"Tdbd","./_baseFor":"mduf","./_baseMergeDeep":"XsjK","./isObject":"u9vI","./keysIn":"UACB","./_safeGet":"vW3g"}],"Jpv1":[function(require,module,exports) {
function e(e){return e}module.exports=e;
},{}],"aZQm":[function(require,module,exports) {
function e(e,l,r){switch(r.length){case 0:return e.call(l);case 1:return e.call(l,r[0]);case 2:return e.call(l,r[0],r[1]);case 3:return e.call(l,r[0],r[1],r[2])}return e.apply(l,r)}module.exports=e;
},{}],"qXFa":[function(require,module,exports) {
var r=require("./_apply"),t=Math.max;function a(a,e,n){return e=t(void 0===e?a.length-1:e,0),function(){for(var o=arguments,u=-1,i=t(o.length-e,0),f=Array(i);++u<i;)f[u]=o[e+u];u=-1;for(var h=Array(e+1);++u<e;)h[u]=o[u];return h[e]=n(f),r(a,this,h)}}module.exports=a;
},{"./_apply":"aZQm"}],"WMV8":[function(require,module,exports) {
function n(n){return function(){return n}}module.exports=n;
},{}],"UJWv":[function(require,module,exports) {
var e=require("./constant"),r=require("./_defineProperty"),t=require("./identity"),i=r?function(t,i){return r(t,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;module.exports=i;
},{"./constant":"WMV8","./_defineProperty":"kAdy","./identity":"Jpv1"}],"NNlz":[function(require,module,exports) {
var r=800,e=16,n=Date.now;function t(t){var o=0,u=0;return function(){var a=n(),i=e-(a-u);if(u=a,i>0){if(++o>=r)return arguments[0]}else o=0;return t.apply(void 0,arguments)}}module.exports=t;
},{}],"KRxT":[function(require,module,exports) {
var e=require("./_baseSetToString"),r=require("./_shortOut"),t=r(e);module.exports=t;
},{"./_baseSetToString":"UJWv","./_shortOut":"NNlz"}],"f4Fl":[function(require,module,exports) {
var e=require("./identity"),r=require("./_overRest"),t=require("./_setToString");function i(i,u){return t(r(i,u,e),i+"")}module.exports=i;
},{"./identity":"Jpv1","./_overRest":"qXFa","./_setToString":"KRxT"}],"R62e":[function(require,module,exports) {
var e=require("./eq"),r=require("./isArrayLike"),i=require("./_isIndex"),n=require("./isObject");function u(u,t,q){if(!n(q))return!1;var s=typeof t;return!!("number"==s?r(q)&&i(t,q.length):"string"==s&&t in q)&&e(q[t],u)}module.exports=u;
},{"./eq":"LIpy","./isArrayLike":"LN6c","./_isIndex":"AGrE","./isObject":"u9vI"}],"gmQJ":[function(require,module,exports) {
var e=require("./_baseRest"),r=require("./_isIterateeCall");function t(t){return e(function(e,o){var i=-1,n=o.length,u=n>1?o[n-1]:void 0,v=n>2?o[2]:void 0;for(u=t.length>3&&"function"==typeof u?(n--,u):void 0,v&&r(o[0],o[1],v)&&(u=n<3?void 0:u,n=1),e=Object(e);++i<n;){var a=o[i];a&&t(e,a,i,u)}return e})}module.exports=t;
},{"./_baseRest":"f4Fl","./_isIterateeCall":"R62e"}],"yubd":[function(require,module,exports) {
var e=require("./_baseMerge"),r=require("./_createAssigner"),i=r(function(r,i,s){e(r,i,s)});module.exports=i;
},{"./_baseMerge":"WqwZ","./_createAssigner":"gmQJ"}],"wWOq":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,r=arguments[3];!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof e&&e.amd?e(["exports"],t):t(r.URI=r.URI||{})}(this,function(e){"use strict";function r(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length>1){r[0]=r[0].slice(0,-1);for(var n=r.length-1,o=1;o<n;++o)r[o]=r[o].slice(1,-1);return r[n]=r[n].slice(1),r.join("")}return r[0]}function t(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function a(e){var n=r("[0-9]","[A-Fa-f]"),o=t(t("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+t("%[89A-Fa-f]"+n+"%"+n+n)+"|"+t("%"+n+n)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",i=r("[\\:\\/\\?\\#\\[\\]\\@]",a),s=e?"[\\uE000-\\uF8FF]":"[]",u=r("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=t("[A-Za-z]"+r("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),p=t(t(o+"|"+r(u,a,"[\\:]"))+"*"),h=(t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("[1-9][0-9]")+"|[0-9]"),t(t("25[0-5]")+"|"+t("2[0-4][0-9]")+"|"+t("1[0-9][0-9]")+"|"+t("0?[1-9][0-9]")+"|0?0?[0-9]")),f=t(h+"\\."+h+"\\."+h+"\\."+h),l=t(n+"{1,4}"),v=t(t(l+"\\:"+l)+"|"+f),d=t(t(l+"\\:")+"{6}"+v),g=t("\\:\\:"+t(l+"\\:")+"{5}"+v),m=t(t(l)+"?\\:\\:"+t(l+"\\:")+"{4}"+v),E=t(t(t(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+t(l+"\\:")+"{3}"+v),C=t(t(t(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+t(l+"\\:")+"{2}"+v),y=t(t(t(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+v),S=t(t(t(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+v),A=t(t(t(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),D=t(t(t(l+"\\:")+"{0,6}"+l)+"?\\:\\:"),w=t([d,g,m,E,C,y,S,A,D].join("|")),b=t(t(u+"|"+o)+"+"),x=(t(w+"\\%25"+b),t(w+t("\\%25|\\%(?!"+n+"{2})")+b)),O=t("[vV]"+n+"+\\."+r(u,a,"[\\:]")+"+"),I=t("\\["+t(x+"|"+w+"|"+O)+"\\]"),F=t(t(o+"|"+r(u,a))+"*"),N=t(I+"|"+f+"(?!"+F+")|"+F),R=t("[0-9]*"),T=t(t(p+"@")+"?"+N+t("\\:"+R)+"?"),_=t(o+"|"+r(u,a,"[\\:\\@]")),P=t(_+"*"),U=t(_+"+"),j=t(t(o+"|"+r(u,a,"[\\@]"))+"+"),q=t(t("\\/"+P)+"*"),H=t("\\/"+t(U+q)+"?"),z=t(j+q),L=t(U+q),$="(?!"+_+")",V=(t(q+"|"+H+"|"+z+"|"+L+"|"+$),t(t(_+"|"+r("[\\/\\?]",s))+"*")),M=t(t(_+"|[\\/\\?]")+"*"),Z=t(t("\\/\\/"+T+q)+"|"+H+"|"+L+"|"+$),k=t(c+"\\:"+Z+t("\\?"+V)+"?"+t("\\#"+M)+"?"),G=t(t("\\/\\/"+T+q)+"|"+H+"|"+z+"|"+$),Q=t(G+t("\\?"+V)+"?"+t("\\#"+M)+"?");t(k+"|"+Q),t(c+"\\:"+Z+t("\\?"+V)+"?"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+L+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+z+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t(t("\\/\\/("+t("("+p+")@")+"?("+N+")"+t("\\:("+R+")")+"?)")+"?("+q+"|"+H+"|"+L+"|"+$+")"),t("\\?("+V+")"),t("\\#("+M+")"),t("("+p+")@"),t("\\:("+R+")");return{NOT_SCHEME:new RegExp(r("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",u,i),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+t(t("\\%25|\\%(?!"+n+"{2})")+"("+b+")")+"?\\]?$")}}var i=a(!1),s=a(!0),u=function(){return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(u){o=!0,a=u}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=2147483647,p=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,d=String.fromCharCode;function g(e){throw new RangeError(l[e])}function m(e,r){var t=e.split("@"),n="";t.length>1&&(n=t[0]+"@",e=t[1]);var o=function(e,r){for(var t=[],n=e.length;n--;)t[n]=r(e[n]);return t}((e=e.replace(f,".")).split("."),r).join(".");return n+o}function E(e){for(var r=[],t=0,n=e.length;t<n;){var o=e.charCodeAt(t++);if(o>=55296&&o<=56319&&t<n){var a=e.charCodeAt(t++);56320==(64512&a)?r.push(((1023&o)<<10)+(1023&a)+65536):(r.push(o),t--)}else r.push(o)}return r}var C=function(e,r){return e+22+75*(e<26)-((0!=r)<<5)},y=function(e,r,t){var n=0;for(e=t?v(e/700):e>>1,e+=v(e/r);e>455;n+=36)e=v(e/35);return v(n+36*e/(e+38))},S=function(e){var r,t=[],n=e.length,o=0,a=128,i=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&g("not-basic"),t.push(e.charCodeAt(u));for(var p=s>0?s+1:0;p<n;){for(var h=o,f=1,l=36;;l+=36){p>=n&&g("invalid-input");var d=(r=e.charCodeAt(p++))-48<10?r-22:r-65<26?r-65:r-97<26?r-97:36;(d>=36||d>v((c-o)/f))&&g("overflow"),o+=d*f;var m=l<=i?1:l>=i+26?26:l-i;if(d<m)break;var E=36-m;f>v(c/E)&&g("overflow"),f*=E}var C=t.length+1;i=y(o-h,C,0==h),v(o/C)>c-a&&g("overflow"),a+=v(o/C),o%=C,t.splice(o++,0,a)}return String.fromCodePoint.apply(String,t)},A=function(e){var r=[],t=(e=E(e)).length,n=128,o=0,a=72,i=!0,s=!1,u=void 0;try{for(var p,h=e[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var f=p.value;f<128&&r.push(d(f))}}catch(L){s=!0,u=L}finally{try{!i&&h.return&&h.return()}finally{if(s)throw u}}var l=r.length,m=l;for(l&&r.push("-");m<t;){var S=c,A=!0,D=!1,w=void 0;try{for(var b,x=e[Symbol.iterator]();!(A=(b=x.next()).done);A=!0){var O=b.value;O>=n&&O<S&&(S=O)}}catch(L){D=!0,w=L}finally{try{!A&&x.return&&x.return()}finally{if(D)throw w}}var I=m+1;S-n>v((c-o)/I)&&g("overflow"),o+=(S-n)*I,n=S;var F=!0,N=!1,R=void 0;try{for(var T,_=e[Symbol.iterator]();!(F=(T=_.next()).done);F=!0){var P=T.value;if(P<n&&++o>c&&g("overflow"),P==n){for(var U=o,j=36;;j+=36){var q=j<=a?1:j>=a+26?26:j-a;if(U<q)break;var H=U-q,z=36-q;r.push(d(C(q+H%z,0))),U=v(H/z)}r.push(d(C(U,0))),a=y(o,I,m==l),o=0,++m}}}catch(L){N=!0,R=L}finally{try{!F&&_.return&&_.return()}finally{if(N)throw R}}++o,++n}return r.join("")},D={version:"2.1.0",ucs2:{decode:E,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(e))}},decode:S,encode:A,toASCII:function(e){return m(e,function(e){return h.test(e)?"xn--"+A(e):e})},toUnicode:function(e){return m(e,function(e){return p.test(e)?S(e.slice(4).toLowerCase()):e})}},w={};function b(e){var r=e.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function x(e){for(var r="",t=0,n=e.length;t<n;){var o=parseInt(e.substr(t+1,2),16);if(o<128)r+=String.fromCharCode(o),t+=3;else if(o>=194&&o<224){if(n-t>=6){var a=parseInt(e.substr(t+4,2),16);r+=String.fromCharCode((31&o)<<6|63&a)}else r+=e.substr(t,6);t+=6}else if(o>=224){if(n-t>=9){var i=parseInt(e.substr(t+4,2),16),s=parseInt(e.substr(t+7,2),16);r+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}else r+=e.substr(t,9);t+=9}else r+=e.substr(t,3),t+=3}return r}function O(e,r){function t(e){var t=x(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,b).replace(r.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,b).replace(r.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,b).replace(r.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,b).replace(r.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,b).replace(r.PCT_ENCODED,o)),e}function I(e){return e.replace(/^0*(.*)/,"$1")||"0"}function F(e,r){var t=e.match(r.IPV4ADDRESS)||[],n=u(t,2)[1];return n?n.split(".").map(I).join("."):e}function N(e,r){var t=e.match(r.IPV6ADDRESS)||[],n=u(t,3),o=n[1],a=n[2];if(o){for(var i=o.toLowerCase().split("::").reverse(),s=u(i,2),c=s[0],p=s[1],h=p?p.split(":").map(I):[],f=c.split(":").map(I),l=r.IPV4ADDRESS.test(f[f.length-1]),v=l?7:8,d=f.length-v,g=Array(v),m=0;m<v;++m)g[m]=h[m]||f[d+m]||"";l&&(g[v-1]=F(g[v-1],r));var E=g.reduce(function(e,r,t){if(!r||"0"===r){var n=e[e.length-1];n&&n.index+n.length===t?n.length++:e.push({index:t,length:1})}return e},[]).sort(function(e,r){return r.length-e.length})[0],C=void 0;if(E&&E.length>1){var y=g.slice(0,E.index),S=g.slice(E.index+E.length);C=y.join(":")+"::"+S.join(":")}else C=g.join(":");return a&&(C+="%"+a),C}return e}var R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,T=void 0==="".match(/(){0}/)[1];function _(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={},n=!1!==r.iri?s:i;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);var o=e.match(R);if(o){T?(t.scheme=o[1],t.userinfo=o[3],t.host=o[4],t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=o[7],t.fragment=o[8],isNaN(t.port)&&(t.port=o[5])):(t.scheme=o[1]||void 0,t.userinfo=-1!==e.indexOf("@")?o[3]:void 0,t.host=-1!==e.indexOf("//")?o[4]:void 0,t.port=parseInt(o[5],10),t.path=o[6]||"",t.query=-1!==e.indexOf("?")?o[7]:void 0,t.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(t.port)&&(t.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),t.host&&(t.host=N(F(t.host,n),n)),void 0!==t.scheme||void 0!==t.userinfo||void 0!==t.host||void 0!==t.port||t.path||void 0!==t.query?void 0===t.scheme?t.reference="relative":void 0===t.fragment?t.reference="absolute":t.reference="uri":t.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==t.reference&&(t.error=t.error||"URI is not a "+r.reference+" reference.");var a=w[(r.scheme||t.scheme||"").toLowerCase()];if(r.unicodeSupport||a&&a.unicodeSupport)O(t,n);else{if(t.host&&(r.domainHost||a&&a.domainHost))try{t.host=D.toASCII(t.host.replace(n.PCT_ENCODED,x).toLowerCase())}catch(u){t.error=t.error||"Host's domain name can not be converted to ASCII via punycode: "+u}O(t,i)}a&&a.parse&&a.parse(t,r)}else t.error=t.error||"URI can not be parsed.";return t}var P=/^\.\.?\//,U=/^\/\.(\/|$)/,j=/^\/\.\.(\/|$)/,q=/^\/?(?:.|\n)*?(?=\/|$)/;function H(e){for(var r=[];e.length;)if(e.match(P))e=e.replace(P,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(j))e=e.replace(j,"/"),r.pop();else if("."===e||".."===e)e="";else{var t=e.match(q);if(!t)throw new Error("Unexpected dot segment condition");var n=t[0];e=e.slice(n.length),r.push(n)}return r.join("")}function z(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.iri?s:i,n=[],o=w[(r.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,r),e.host)if(t.IPV6ADDRESS.test(e.host));else if(r.domainHost||o&&o.domainHost)try{e.host=r.iri?D.toUnicode(e.host):D.toASCII(e.host.replace(t.PCT_ENCODED,x).toLowerCase())}catch(c){e.error=e.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+c}O(e,t),"suffix"!==r.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=function(e,r){var t=!1!==r.iri?s:i,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(N(F(String(e.host),t),t).replace(t.IPV6ADDRESS,function(e,r,t){return"["+r+(t?"%25"+t:"")+"]"})),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}(e,r);if(void 0!==a&&("suffix"!==r.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;r.absolutePath||o&&o.absolutePath||(u=H(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function L(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};return arguments[3]||(e=_(z(e,t),t),r=_(z(r,t),t)),!(t=t||{}).tolerant&&r.scheme?(n.scheme=r.scheme,n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=H(r.path||""),n.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(n.userinfo=r.userinfo,n.host=r.host,n.port=r.port,n.path=H(r.path||""),n.query=r.query):(r.path?("/"===r.path.charAt(0)?n.path=H(r.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:n.path=r.path:n.path="/"+r.path,n.path=H(n.path)),n.query=r.query):(n.path=e.path,void 0!==r.query?n.query=r.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=r.fragment,n}function $(e,r){return e&&e.toString().replace(r&&r.iri?s.PCT_ENCODED:i.PCT_ENCODED,x)}var V={scheme:"http",domainHost:!0,parse:function(e,r){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,r){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},M={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},Z={},k="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",Q=t(t("%[EFef][0-9A-Fa-f]%"+G+G+"%"+G+G)+"|"+t("%[89A-Fa-f][0-9A-Fa-f]%"+G+G)+"|"+t("%"+G+G)),Y=r("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),B=new RegExp(k,"g"),J=new RegExp(Q,"g"),K=new RegExp(r("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Y),"g"),W=new RegExp(r("[^]",k,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),X=W;function ee(e){var r=x(e);return r.match(B)?r:e}var re={scheme:"mailto",parse:function(e,r){var t=e,n=t.to=t.path?t.path.split(","):[];if(t.path=void 0,t.query){for(var o=!1,a={},i=t.query.split("&"),s=0,u=i.length;s<u;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var p=c[1].split(","),h=0,f=p.length;h<f;++h)n.push(p[h]);break;case"subject":t.subject=$(c[1],r);break;case"body":t.body=$(c[1],r);break;default:o=!0,a[$(c[0],r)]=$(c[1],r)}}o&&(t.headers=a)}t.query=void 0;for(var l=0,v=n.length;l<v;++l){var d=n[l].split("@");if(d[0]=$(d[0]),r.unicodeSupport)d[1]=$(d[1],r).toLowerCase();else try{d[1]=D.toASCII($(d[1],r).toLowerCase())}catch(g){t.error=t.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}n[l]=d.join("@")}return t},serialize:function(e,r){var t,n=e,a=null!=(t=e.to)?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[];if(a){for(var i=0,s=a.length;i<s;++i){var u=String(a[i]),c=u.lastIndexOf("@"),p=u.slice(0,c).replace(J,ee).replace(J,o).replace(K,b),h=u.slice(c+1);try{h=r.iri?D.toUnicode(h):D.toASCII($(h,r).toLowerCase())}catch(d){n.error=n.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+d}a[i]=p+"@"+h}n.path=a.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var l=[];for(var v in f)f[v]!==Z[v]&&l.push(v.replace(J,ee).replace(J,o).replace(W,b)+"="+f[v].replace(J,ee).replace(J,o).replace(X,b));return l.length&&(n.query=l.join("&")),n}},te=/^([^\:]+)\:(.*)/,ne={scheme:"urn",parse:function(e,r){var t=e.path&&e.path.match(te),n=e;if(t){var o=r.scheme||n.scheme||"urn",a=t[1].toLowerCase(),i=t[2],s=o+":"+(r.nid||a),u=w[s];n.nid=a,n.nss=i,n.path=void 0,u&&(n=u.parse(n,r))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,r){var t=r.scheme||e.scheme||"urn",n=e.nid,o=t+":"+(r.nid||n),a=w[o];a&&(e=a.serialize(e,r));var i=e,s=e.nss;return i.path=(n||r.nid)+":"+s,i}},oe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ae={scheme:"urn:uuid",parse:function(e,r){var t=e;return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&t.uuid.match(oe)||(t.error=t.error||"UUID is not valid."),t},serialize:function(e,r){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t}};w[V.scheme]=V,w[M.scheme]=M,w[re.scheme]=re,w[ne.scheme]=ne,w[ae.scheme]=ae,e.SCHEMES=w,e.pctEncChar=b,e.pctDecChars=x,e.parse=_,e.removeDotSegments=H,e.serialize=z,e.resolveComponents=L,e.resolve=function(e,r,t){var n=function(e,r){var t=e;if(r)for(var n in r)t[n]=r[n];return t}({scheme:"null"},t);return z(L(_(e,n),_(r,n),n,!0),n)},e.normalize=function(e,r){return"string"==typeof e?e=z(_(e,r),r):"object"===n(e)&&(e=_(z(e,r),r)),e},e.equal=function(e,r,t){return"string"==typeof e?e=z(_(e,t),t):"object"===n(e)&&(e=z(e,t)),"string"==typeof r?r=z(_(r,t),t):"object"===n(r)&&(r=z(r,t)),e===r},e.escapeComponent=function(e,r){return e&&e.toString().replace(r&&r.iri?s.ESCAPE:i.ESCAPE,b)},e.unescapeComponent=$,Object.defineProperty(e,"__esModule",{value:!0})});
},{}],"jIGR":[function(require,module,exports) {
"use strict";module.exports=function r(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var o,n,u;if(Array.isArray(t)){if((o=t.length)!=e.length)return!1;for(n=o;0!=n--;)if(!r(t[n],e[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if((o=(u=Object.keys(t)).length)!==Object.keys(e).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(e,u[n]))return!1;for(n=o;0!=n--;){var f=u[n];if(!r(t[f],e[f]))return!1}return!0}return t!=t&&e!=e};
},{}],"n4OK":[function(require,module,exports) {
"use strict";module.exports=function(r){for(var t,e=0,o=r.length,c=0;c<o;)e++,(t=r.charCodeAt(c++))>=55296&&t<=56319&&c<o&&56320==(64512&(t=r.charCodeAt(c)))&&c++;return e};
},{}],"S6qf":[function(require,module,exports) {
"use strict";function r(r,e){for(var t in e=e||{},r)e[t]=r[t];return e}function e(r,e,t){var n=t?" !== ":" === ",a=t?" || ":" && ",o=t?"!":"",u=t?"":"!";switch(r){case"null":return e+n+"null";case"array":return o+"Array.isArray("+e+")";case"object":return"("+o+e+a+"typeof "+e+n+'"object"'+a+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+a+u+"("+e+" % 1)"+a+e+n+e+")";default:return"typeof "+e+n+'"'+r+'"'}}function t(r,t){switch(r.length){case 1:return e(r[0],t,!0);default:var n="",a=o(r);for(var u in a.array&&a.object&&(n=a.null?"(":"(!"+t+" || ",n+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)n+=(n?" && ":"")+e(u,t,!0);return n}}module.exports={copy:r,checkDataType:e,checkDataTypes:t,coerceToTypes:a,toHash:o,getProperty:l,escapeQuotes:i,equal:require("fast-deep-equal"),ucs2length:require("./ucs2length"),varOccurences:s,varReplace:f,cleanUpCode:h,finalCleanUpCode:R,schemaHasRules:C,schemaHasRulesExcept:x,schemaUnknownRules:j,toQuotedString:P,getPathExpr:U,getPath:q,getData:J,unescapeFragment:_,unescapeJsonPointer:O,escapeFragment:k,escapeJsonPointer:H};var n=o(["string","number","integer","boolean","null"]);function a(r,e){if(Array.isArray(e)){for(var t=[],a=0;a<e.length;a++){var o=e[a];n[o]?t[t.length]=o:"array"===r&&"array"===o&&(t[t.length]=o)}if(t.length)return t}else{if(n[e])return[e];if("array"===r&&"array"===e)return["array"]}}function o(r){for(var e={},t=0;t<r.length;t++)e[r[t]]=!0;return e}var u=/^[a-z$_][a-z$_0-9]*$/i,c=/'|\\/g;function l(r){return"number"==typeof r?"["+r+"]":u.test(r)?"."+r:"['"+i(r)+"']"}function i(r){return r.replace(c,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function s(r,e){e+="[^0-9]";var t=r.match(new RegExp(e,"g"));return t?t.length:0}function f(r,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),r.replace(new RegExp(e,"g"),t+"$1")}var p=/else\s*{\s*}/g,g=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,v=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;function h(r){return r.replace(p,"").replace(g,"").replace(v,"if (!($1))")}var y=/[^v.]errors/g,d=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,w="return errors === 0;",$="validate.errors = null; return true;",b=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,E="return data;",A=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,D=/if \(rootData === undefined\) rootData = data;/;function R(r,e){var t=r.match(y);return t&&2==t.length&&(r=e?r.replace(m,"").replace(b,E):r.replace(d,"").replace(w,$)),(t=r.match(A))&&3===t.length?r.replace(D,""):r}function C(r,e){if("boolean"==typeof r)return!r;for(var t in r)if(e[t])return!0}function x(r,e,t){if("boolean"==typeof r)return!r&&"not"!=t;for(var n in r)if(n!=t&&e[n])return!0}function j(r,e){if("boolean"!=typeof r)for(var t in r)if(!e[t])return t}function P(r){return"'"+i(r)+"'"}function U(r,e,t,n){return T(r,t?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")}function q(r,e,t){return T(r,P(t?"/"+H(e):l(e)))}var z=/^\/(?:[^~]|~0|~1)*$/,I=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function J(r,e,t){var n,a,o,u;if(""===r)return"rootData";if("/"==r[0]){if(!z.test(r))throw new Error("Invalid JSON-pointer: "+r);a=r,o="rootData"}else{if(!(u=r.match(I)))throw new Error("Invalid JSON-pointer: "+r);if(n=+u[1],"#"==(a=u[2])){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return t[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(o="data"+(e-n||""),!a)return o}for(var c=o,i=a.split("/"),s=0;s<i.length;s++){var f=i[s];f&&(c+=" && "+(o+=l(O(f))))}return c}function T(r,e){return'""'==r?e:(r+" + "+e).replace(/' \+ '/g,"")}function _(r){return O(decodeURIComponent(r))}function k(r){return encodeURIComponent(H(r))}function H(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}function O(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}
},{"fast-deep-equal":"jIGR","./ucs2length":"n4OK"}],"h0OD":[function(require,module,exports) {
"use strict";var t=require("./util");function e(e){t.copy(e,this)}module.exports=e;
},{"./util":"S6qf"}],"uMRE":[function(require,module,exports) {
"use strict";var e=module.exports=function(e,i,t){"function"==typeof i&&(t=i,i={}),r(i,"function"==typeof(t=i.cb||t)?t:t.pre||function(){},t.post||function(){},e,"",e)};function r(t,n,o,s,a,m,p,f,u,y){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var c in n(s,a,m,p,f,u,y),s){var d=s[c];if(Array.isArray(d)){if(c in e.arrayKeywords)for(var l=0;l<d.length;l++)r(t,n,o,d[l],a+"/"+c+"/"+l,m,a,c,s,l)}else if(c in e.propsKeywords){if(d&&"object"==typeof d)for(var w in d)r(t,n,o,d[w],a+"/"+c+"/"+i(w),m,a,c,s,w)}else(c in e.keywords||t.allKeys&&!(c in e.skipKeywords))&&r(t,n,o,d,a+"/"+c,m,a,c,s)}o(s,a,m,p,f,u,y)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};
},{}],"FmMj":[function(require,module,exports) {
"use strict";var e=require("uri-js"),r=require("fast-deep-equal"),t=require("./util"),i=require("./schema_obj"),s=require("json-schema-traverse");function a(e,r,t){var s=this._refs[t];if("string"==typeof s){if(!this._refs[s])return a.call(this,e,r,s);s=this._refs[s]}if((s=s||this._schemas[t])instanceof i)return u(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var o,f,c,h=n.call(this,r,t);return h&&(o=h.schema,r=h.root,c=h.baseId),o instanceof i?f=o.validate||e.call(this,o.schema,r,void 0,c):void 0!==o&&(f=u(o,this._opts.inlineRefs)?o:e.call(this,o,r,void 0,c)),f}function n(r,t){var s=e.parse(t),a=d(s),n=v(this._getId(r.schema));if(0===Object.keys(r.schema).length||a!==n){var f=g(a),h=this._refs[f];if("string"==typeof h)return o.call(this,r,h,s);if(h instanceof i)h.validate||this._compile(h),r=h;else{if(!((h=this._schemas[f])instanceof i))return;if(h.validate||this._compile(h),f==g(t))return{schema:h,root:r,baseId:n};r=h}if(!r.schema)return;n=v(this._getId(r.schema))}return c.call(this,s,n,r.schema,r)}function o(e,r,t){var i=n.call(this,e,r);if(i){var s=i.schema,a=i.baseId;e=i.root;var o=this._getId(s);return o&&(a=_(a,o)),c.call(this,t,a,s,e)}}module.exports=a,a.normalizeId=g,a.fullPath=v,a.url=_,a.ids=y,a.inlineRef=u,a.schema=n;var f=t.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,r,i,s){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var a=e.fragment.split("/"),o=1;o<a.length;o++){var c=a[o];if(c){if(void 0===(i=i[c=t.unescapeFragment(c)]))break;var h;if(!f[c]&&((h=this._getId(i))&&(r=_(r,h)),i.$ref)){var u=_(r,i.$ref),l=n.call(this,s,u);l&&(i=l.schema,s=l.root,r=l.baseId)}}}return void 0!==i&&i!==s.schema?{schema:i,root:s,baseId:r}:void 0}}var h=t.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function u(e,r){return!1!==r&&(void 0===r||!0===r?l(e):r?m(e)<=r:void 0)}function l(e){var r;if(Array.isArray(e)){for(var t=0;t<e.length;t++)if("object"==typeof(r=e[t])&&!l(r))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(r=e[i])&&!l(r))return!1}return!0}function m(e){var r,t=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(r=e[i])&&(t+=m(r)),t==1/0)return 1/0}else for(var s in e){if("$ref"==s)return 1/0;if(h[s])t++;else if("object"==typeof(r=e[s])&&(t+=m(r)+1),t==1/0)return 1/0}return t}function v(r,t){return!1!==t&&(r=g(r)),d(e.parse(r))}function d(r){return e.serialize(r).split("#")[0]+"#"}var p=/#\/?$/;function g(e){return e?e.replace(p,""):""}function _(r,t){return t=g(t),e.resolve(r,t)}function y(i){var a=g(this._getId(i)),n={"":a},o={"":v(a,!1)},f={},c=this;return s(i,{allKeys:!0},function(i,s,a,h,u,l,m){if(""!==s){var v=c._getId(i),d=n[h],p=o[h]+"/"+u;if(void 0!==m&&(p+="/"+("number"==typeof m?m:t.escapeFragment(m))),"string"==typeof v){v=d=g(d?e.resolve(d,v):v);var _=c._refs[v];if("string"==typeof _&&(_=c._refs[_]),_&&_.schema){if(!r(i,_.schema))throw new Error('id "'+v+'" resolves to more than one schema')}else if(v!=g(p))if("#"==v[0]){if(f[v]&&!r(i,f[v]))throw new Error('id "'+v+'" resolves to more than one schema');f[v]=i}else c._refs[v]=p}n[s]=d,o[s]=p}}),f}
},{"uri-js":"wWOq","fast-deep-equal":"jIGR","./util":"S6qf","./schema_obj":"h0OD","json-schema-traverse":"uMRE"}],"yAtQ":[function(require,module,exports) {
"use strict";var e=require("./resolve");function t(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}function i(t,s,r){this.message=r||i.message(t,s),this.missingRef=e.url(t,s),this.missingSchema=e.normalizeId(e.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}module.exports={Validation:s(t),MissingRef:s(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e};
},{"./resolve":"FmMj"}],"Xb3N":[function(require,module,exports) {
"use strict";module.exports=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var e,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(e=t.cmp,function(r){return function(t,n){var i={key:t,value:r[t]},u={key:n,value:r[n]};return e(i,u)}}),u=[];return function r(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var e,o;if(Array.isArray(t)){for(o="[",e=0;e<t.length;e++)e&&(o+=","),o+=r(t[e])||"null";return o+"]"}if(null===t)return"null";if(-1!==u.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=u.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(o="",e=0;e<c.length;e++){var l=c[e],y=r(t[l]);y&&(o&&(o+=","),o+=JSON.stringify(l)+":"+y)}return u.splice(f,1),"{"+o+"}"}}(r)};
},{}],"XNwE":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t="",s=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var i=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(i){var n="unknown keyword: "+i;if("log"!==e.opts.strictKeywords)throw new Error(n);e.logger.warn(n)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" /*# sourceURL="+l+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var f=e.level,h=e.dataLevel,c=e.schema["false schema"],u=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",d=!e.opts.allErrors,m="data"+(h||""),v="valid"+f;if(!1===e.schema){e.isTop?d=!0:t+=" var "+v+" = false; ",(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?t+=s?" return data; ":" validate.errors = null; return true; ":t+=" var "+v+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var g=e.isTop;f=e.level=0,h=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var w="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{f=e.level,m="data"+((h=e.dataLevel)||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+f+" = errors;"}v="valid"+f,d=!e.opts.allErrors;var E="",P="",b=e.schema.type,D=Array.isArray(b);if(b&&e.opts.nullable&&!0===e.schema.nullable&&(D?-1==b.indexOf("null")&&(b=b.concat("null")):"null"!=b&&(b=[b,"null"],D=!0)),D&&1==b.length&&(b=b[0],D=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),b){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,b);var R=e.RULES.types[b];if(S||D||!0===R||R&&!Y(R)){u=e.schemaPath+".type",p=e.errSchemaPath+"/type",u=e.schemaPath+".type",p=e.errSchemaPath+"/type";var T=D?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[T](b,m,!0)+") { ",S){var k="dataType"+f,$="coerced"+f;t+=" var "+k+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(t+=" if ("+k+" == 'object' && Array.isArray("+m+")) "+k+" = 'array'; "),t+=" var "+$+" = undefined; ";var L="",U=S;if(U)for(var j,A=-1,I=U.length-1;A<I;)j=U[A+=1],A&&(t+=" if ("+$+" === undefined) { ",L+="}"),"array"==e.opts.coerceTypes&&"array"!=j&&(t+=" if ("+k+" == 'array' && "+m+".length == 1) { "+$+" = "+m+" = "+m+"[0]; "+k+" = typeof "+m+";  } "),"string"==j?t+=" if ("+k+" == 'number' || "+k+" == 'boolean') "+$+" = '' + "+m+"; else if ("+m+" === null) "+$+" = ''; ":"number"==j||"integer"==j?(t+=" if ("+k+" == 'boolean' || "+m+" === null || ("+k+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==j&&(t+=" && !("+m+" % 1)"),t+=")) "+$+" = +"+m+"; "):"boolean"==j?t+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+$+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+$+" = true; ":"null"==j?t+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+$+" = null; ":"array"==e.opts.coerceTypes&&"array"==j&&(t+=" if ("+k+" == 'string' || "+k+" == 'number' || "+k+" == 'boolean' || "+m+" == null) "+$+" = ["+m+"]; ");t+=" "+L+" if ("+$+" === undefined) {   ",(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  ";var x=h?"data"+(h-1||""):"parentData";t+=" "+m+" = "+$+"; ",h||(t+="if ("+x+" !== undefined)"),t+=" "+x+"["+(h?e.dataPathArr[h]:"parentDataProperty")+"] = "+$+"; } "}else{(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!o)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(t+=" } if (errors === ",t+=g?"0":"errs_"+f,t+=") { ",P+="}");else{var _=e.RULES;if(_)for(var C=-1,V=_.length-1;C<V;)if(Y(R=_[C+=1])){if(R.type&&(t+=" if ("+e.util.checkDataType(R.type,m)+") { "),e.opts.useDefaults)if("object"==R.type&&e.schema.properties){c=e.schema.properties;var O=Object.keys(c);if(O)for(var Q,J=-1,K=O.length-1;J<K;){if(void 0!==(q=c[Q=O[J+=1]]).default){var N=m+e.util.getProperty(Q);if(e.compositeRule){if(e.opts.strictDefaults){w="default is ignored for: "+N;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else t+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(t+=" || "+N+" === null || "+N+" === '' "),t+=" ) "+N+" = ","shared"==e.opts.useDefaults?t+=" "+e.useDefault(q.default)+" ":t+=" "+JSON.stringify(q.default)+" ",t+="; "}}}else if("array"==R.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){A=-1;for(var q,z=H.length-1;A<z;)if(void 0!==(q=H[A+=1]).default){N=m+"["+A+"]";if(e.compositeRule){if(e.opts.strictDefaults){w="default is ignored for: "+N;if("log"!==e.opts.strictDefaults)throw new Error(w);e.logger.warn(w)}}else t+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(t+=" || "+N+" === null || "+N+" === '' "),t+=" ) "+N+" = ","shared"==e.opts.useDefaults?t+=" "+e.useDefault(q.default)+" ":t+=" "+JSON.stringify(q.default)+" ",t+="; "}}}var B=R.rules;if(B)for(var F,G=-1,M=B.length-1;G<M;)if(Z(F=B[G+=1])){var W=F.code(e,F.keyword,R.type);W&&(t+=" "+W+" ",d&&(E+="}"))}if(d&&(t+=" "+E+" ",E=""),R.type&&(t+=" } ",b&&b===R.type&&!S)){t+=" else { ";var X;u=e.schemaPath+".type",p=e.errSchemaPath+"/type";(X=X||[]).push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",t+=D?""+b.join(","):""+b,t+="' } ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=D?""+b.join(","):""+b,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";y=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+y+"]); ":t+=" validate.errors = ["+y+"]; return false; ":t+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}d&&(t+=" if (errors === ",t+=g?"0":"errs_"+f,t+=") { ",P+="}")}}function Y(e){for(var r=e.rules,a=0;a<r.length;a++)if(Z(r[a]))return!0}function Z(r){return void 0!==e.schema[r.keyword]||r.implements&&function(r){for(var a=r.implements,t=0;t<a.length;t++)if(void 0!==e.schema[a[t]])return!0}(r)}return d&&(t+=" "+P+" "),g?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+v+" = errors === errs_"+f+";",t=e.util.cleanUpCode(t),g&&(t=e.util.finalCleanUpCode(t,s)),t};
},{}],"IFqB":[function(require,module,exports) {
"use strict";var e=require("./resolve"),r=require("./util"),t=require("./error_classes"),i=require("fast-json-stable-stringify"),o=require("../dotjs/validate"),a=r.ucs2length,n=require("fast-deep-equal"),s=t.Validation;function l(f,g,y,w){var R=this,V=this._opts,S=[void 0],_={},b=[],E={},q=[],j={},x=[];g=g||{schema:f,refVal:S,refs:_};var $=c.call(this,f,g,w),k=this._compilations[$.index];if($.compiling)return k.callValidate=function e(){var r=k.validate;var t=r.apply(this,arguments);e.errors=r.errors;return t};var C=this._formats,P=this.RULES;try{var I=U(f,g,y,w);k.validate=I;var L=k.callValidate;return L&&(L.schema=I.schema,L.errors=null,L.refs=I.refs,L.refVal=I.refVal,L.root=I.root,L.$async=I.$async,V.sourceCode&&(L.source=I.source)),I}finally{u.call(this,f,g,w)}function U(i,c,u,f){var y=!c||c&&c.schema==i;if(c.schema!=g.schema)return l.call(R,i,c,u,f);var w,E=!0===i.$async,j=o({isTop:!0,schema:i,isRoot:y,baseId:f,root:c,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:t.MissingRef,RULES:P,validate:o,util:r,resolve:e,resolveRef:M,usePattern:T,useDefault:D,useCustomRule:F,opts:V,formats:C,logger:R.logger,self:R});j=p(S,h)+p(b,d)+p(q,v)+p(x,m)+j,V.processCode&&(j=V.processCode(j));try{w=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",j)(R,P,C,g,S,q,x,n,a,s),S[0]=w}catch($){throw R.logger.error("Error compiling schema, function code:",j),$}return w.schema=i,w.errors=null,w.refs=_,w.refVal=S,w.root=y?w:c,E&&(w.$async=!0),!0===V.sourceCode&&(w.source={code:j,patterns:b,defaults:q}),w}function M(r,t,i){t=e.url(r,t);var o,a,n=_[t];if(void 0!==n)return Q(o=S[n],a="refVal["+n+"]");if(!i&&g.refs){var s=g.refs[t];if(void 0!==s)return Q(o=g.refVal[s],a=O(t,o))}a=O(t);var c=e.call(R,U,g,t);if(void 0===c){var u=y&&y[t];u&&(c=e.inlineRef(u,V.inlineRefs)?u:l.call(R,u,g,y,r))}if(void 0!==c)return function(e,r){var t=_[e];S[t]=r}(t,c),Q(c,a);!function(e){delete _[e]}(t)}function O(e,r){var t=S.length;return S[t]=r,_[e]=t,"refVal"+t}function Q(e,r){return"object"==typeof e||"boolean"==typeof e?{code:r,schema:e,inline:!0}:{code:r,$async:e&&!!e.$async}}function T(e){var r=E[e];return void 0===r&&(r=E[e]=b.length,b[r]=e),"pattern"+r}function D(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return r.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),o=j[t];return void 0===o&&(o=j[t]=q.length,q[o]=e),"default"+o}}function F(e,r,t,i){if(!1!==R._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every(function(e){return Object.prototype.hasOwnProperty.call(t,e)}))throw new Error("parent schema must have all required keywords: "+o.join(","));var a=e.definition.validateSchema;if(a)if(!a(r)){var n="keyword schema is invalid: "+R.errorsText(a.errors);if("log"!=R._opts.validateSchema)throw new Error(n);R.logger.error(n)}}var s,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)s=l.call(R,r,t,i);else if(u)s=u.call(R,r,t,i),!1!==V.validateSchema&&R.validateSchema(s,!0);else if(c)s=c.call(R,i,e.keyword,r,t);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=x.length;return x[f]=s,{code:"customRule"+f,validate:s}}}function c(e,r,t){var i=f.call(this,e,r,t);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:r,baseId:t},{index:i,compiling:!1})}function u(e,r,t){var i=f.call(this,e,r,t);i>=0&&this._compilations.splice(i,1)}function f(e,r,t){for(var i=0;i<this._compilations.length;i++){var o=this._compilations[i];if(o.schema==e&&o.root==r&&o.baseId==t)return i}return-1}function d(e,t){return"var pattern"+e+" = new RegExp("+r.toQuotedString(t[e])+");"}function v(e){return"var default"+e+" = defaults["+e+"];"}function h(e,r){return void 0===r[e]?"":"var refVal"+e+" = refVal["+e+"];"}function m(e){return"var customRule"+e+" = customRules["+e+"];"}function p(e,r){if(!e.length)return"";for(var t="",i=0;i<e.length;i++)t+=r(i,e);return t}module.exports=l;
},{"./resolve":"FmMj","./util":"S6qf","./error_classes":"yAtQ","fast-json-stable-stringify":"Xb3N","../dotjs/validate":"XNwE","fast-deep-equal":"jIGR"}],"wSeG":[function(require,module,exports) {
"use strict";var t=module.exports=function(){this._cache={}};t.prototype.put=function(t,e){this._cache[t]=e},t.prototype.get=function(t){return this._cache[t]},t.prototype.del=function(t){delete this._cache[t]},t.prototype.clear=function(){this._cache={}};
},{}],"SmGS":[function(require,module,exports) {
"use strict";var d=require("./util"),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,u=[0,31,28,31,30,31,30,31,31,30,31,30,31],F=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,f=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,D=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,t=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,r=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,i=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,z=/^(?:\/(?:[^~\/]|~0|~1)*)*$/,n=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,$=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;function s(a){return a="full"==a?"full":"fast",d.copy(s[a])}function x(d){return d%4==0&&(d%100!=0||d%400==0)}function _(d){var F=d.match(a);if(!F)return!1;var f=+F[1],D=+F[2],t=+F[3];return D>=1&&D<=12&&t>=1&&t<=(2==D&&x(f)?29:u[D])}function o(d,a){var u=d.match(F);if(!u)return!1;var f=u[1],D=u[2],t=u[3],e=u[5];return(f<=23&&D<=59&&t<=59||23==f&&59==D&&60==t)&&(!a||e)}module.exports=s,s.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":e,url:r,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:f,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:i,"json-pointer":z,"json-pointer-uri-fragment":n,"relative-json-pointer":$},s.full={date:_,time:o,"date-time":B,uri:p,"uri-reference":t,"uri-template":e,url:r,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:l,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:i,"json-pointer":z,"json-pointer-uri-fragment":n,"relative-json-pointer":$};var E=/t|\s/i;function B(d){var a=d.split(E);return 2==a.length&&_(a[0])&&o(a[1],!0)}function l(d){return d.length<=255&&f.test(d)}var C=/\/|:/;function p(d){return C.test(d)&&D.test(d)}var v=/[^\\]\\Z/;function c(d){if(v.test(d))return!1;try{return new RegExp(d),!0}catch(a){return!1}}
},{"./util":"S6qf"}],"xcTN":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var s,t,o=" ",i=r.level,l=r.dataLevel,c=r.schema[e],n=r.errSchemaPath+"/"+e,h=!r.opts.allErrors,v="data"+(l||""),f="valid"+i;if("#"==c||"#/"==c)r.isRoot?(s=r.async,t="validate"):(s=!0===r.root.schema.$async,t="root.refVal[0]");else{var d=r.resolveRef(r.baseId,c,r.isRoot);if(void 0===d){var p=r.MissingRefError.message(r.baseId,c);if("fail"==r.opts.missingRefs){r.logger.error(p),(g=g||[]).push(o),o="",!1!==r.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(n)+" , params: { ref: '"+r.util.escapeQuotes(c)+"' } ",!1!==r.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+r.util.escapeQuotes(c)+"' "),r.opts.verbose&&(o+=" , schema: "+r.util.toQuotedString(c)+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+v+" "),o+=" } "):o+=" {} ";var m=o;o=g.pop(),!r.compositeRule&&h?r.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(o+=" if (false) { ")}else{if("ignore"!=r.opts.missingRefs)throw new r.MissingRefError(r.baseId,c,p);r.logger.warn(p),h&&(o+=" if (true) { ")}}else if(d.inline){var u=r.util.copy(r);u.level++;var E="valid"+u.level;u.schema=d.schema,u.schemaPath="",u.errSchemaPath=c,o+=" "+r.validate(u).replace(/validate\.schema/g,d.code)+" ",h&&(o+=" if ("+E+") { ")}else s=!0===d.$async||r.async&&!1!==d.$async,t=d.code}if(t){var g;(g=g||[]).push(o),o="",r.opts.passContext?o+=" "+t+".call(this, ":o+=" "+t+"( ",o+=" "+v+", (dataPath || '')",'""'!=r.errorPath&&(o+=" + "+r.errorPath);var y=o+=" , "+(l?"data"+(l-1||""):"parentData")+" , "+(l?r.dataPathArr[l]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),s){if(!r.async)throw new Error("async schema referenced by sync schema");h&&(o+=" var "+f+"; "),o+=" try { await "+y+"; ",h&&(o+=" "+f+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(o+=" "+f+" = false; "),o+=" } ",h&&(o+=" if ("+f+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+t+".errors; else vErrors = vErrors.concat("+t+".errors); errors = vErrors.length; } ",h&&(o+=" else { ")}return o};
},{}],"jiJK":[function(require,module,exports) {
"use strict";module.exports=function(e,t,a){var l=" ",r=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,i=e.util.copy(e),o="";i.level++;var u="valid"+i.level,m=i.baseId,d=!0,p=r;if(p)for(var v,f=-1,n=p.length-1;f<n;)v=p[f+=1],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all))&&(d=!1,i.schema=v,i.schemaPath=s+"["+f+"]",i.errSchemaPath=c+"/"+f,l+="  "+e.validate(i)+" ",i.baseId=m,h&&(l+=" if ("+u+") { ",o+="}"));return h&&(l+=d?" if (true) { ":" "+o.slice(0,-1)+" "),l=e.util.cleanUpCode(l)};
},{}],"Pnof":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,o=e.dataLevel,l=e.schema[r],i=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,v="data"+(o||""),m="valid"+t,u="errs__"+t,n=e.util.copy(e),d="";n.level++;var p="valid"+n.level;if(l.every(function(r){return e.opts.strictKeywords?"object"==typeof r&&Object.keys(r).length>0:e.util.schemaHasRules(r,e.RULES.all)})){var f=n.baseId;s+=" var "+u+" = errors; var "+m+" = false;  ";var E=e.compositeRule;e.compositeRule=n.compositeRule=!0;var y=l;if(y)for(var P,R=-1,g=y.length-1;R<g;)P=y[R+=1],n.schema=P,n.schemaPath=i+"["+R+"]",n.errSchemaPath=c+"/"+R,s+="  "+e.validate(n)+" ",n.baseId=f,s+=" "+m+" = "+m+" || "+p+"; if (!"+m+") { ",d+="}";e.compositeRule=n.compositeRule=E,s+=" "+d+" if (!"+m+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } "),s=e.util.cleanUpCode(s)}else h&&(s+=" if (true) { ");return s};
},{}],"Vdgo":[function(require,module,exports) {
"use strict";module.exports=function(t,o,e){var r=" ",s=t.schema[o],n=t.errSchemaPath+"/"+o,c=(t.opts.allErrors,t.util.toQuotedString(s));return!0===t.opts.$comment?r+=" console.log("+c+");":"function"==typeof t.opts.$comment&&(r+=" self._opts.$comment("+c+", "+t.util.toQuotedString(n)+", validate.root.schema);"),r};
},{}],"z0a6":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t=" ",s=a.level,o=a.dataLevel,l=a.schema[e],h=a.schemaPath+a.util.getProperty(e),c=a.errSchemaPath+"/"+e,d=!a.opts.allErrors,m="data"+(o||""),v="valid"+s,u=a.opts.$data&&l&&l.$data;u&&(t+=" var schema"+s+" = "+a.util.getData(l.$data,o,a.dataPathArr)+"; "),u||(t+=" var schema"+s+" = validate.schema"+h+";"),t+="var "+v+" = equal("+m+", schema"+s+"); if (!"+v+") {   ";var i=i||[];i.push(t),t="",!1!==a.createErrors?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(c)+" , params: { allowedValue: schema"+s+" } ",!1!==a.opts.messages&&(t+=" , message: 'should be equal to constant' "),a.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var n=t;return t=i.pop(),!a.compositeRule&&d?a.async?t+=" throw new ValidationError(["+n+"]); ":t+=" validate.errors = ["+n+"]; return false; ":t+=" var err = "+n+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t};
},{}],"IaHK":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t=" ",s=e.level,l=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),v=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,h="data"+(l||""),u="valid"+s,d="errs__"+s,p=e.util.copy(e);p.level++;var m="valid"+p.level,n="i"+s,P=p.dataLevel=e.dataLevel+1,f="data"+P,E=e.baseId,g=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all);if(t+="var "+d+" = errors;var "+u+";",g){var R=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=i,p.errSchemaPath=v,t+=" var "+m+" = false; for (var "+n+" = 0; "+n+" < "+h+".length; "+n+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,n,e.opts.jsonPointers,!0);var y=h+"["+n+"]";p.dataPathArr[P]=n;var b=e.validate(p);p.baseId=E,e.util.varOccurences(b,f)<2?t+=" "+e.util.varReplace(b,f,y)+" ":t+=" var "+f+" = "+y+"; "+b+" ",t+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=R,t+="  if (!"+m+") {"}else t+=" if ("+h+".length == 0) {";var S=S||[];S.push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(v)+" , params: {} ",!1!==e.opts.messages&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=S.pop(),!e.compositeRule&&c?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",g&&(t+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t=e.util.cleanUpCode(t)};
},{}],"BMaw":[function(require,module,exports) {
"use strict";module.exports=function(e,r,t){var a=" ",s=e.level,o=e.dataLevel,p=e.schema[r],i=e.schemaPath+e.util.getProperty(r),l=e.errSchemaPath+"/"+r,u=!e.opts.allErrors,n="data"+(o||""),h="errs__"+s,c=e.util.copy(e),d="";c.level++;var v="valid"+c.level,P={},m={},y=e.opts.ownProperties;for(j in p){var g=p[j],f=Array.isArray(g)?m:P;f[j]=g}a+="var "+h+" = errors;";var Q=e.errorPath;for(var j in a+="var missing"+s+";",m)if((f=m[j]).length){if(a+=" if ( "+n+e.util.getProperty(j)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(j)+"') "),u){a+=" && ( ";var w=f;if(w)for(var E=-1,b=w.length-1;E<b;){R=w[E+=1],E&&(a+=" || "),a+=" ( ( "+(I=n+(D=e.util.getProperty(R)))+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(R)+"') "),a+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:D)+") ) "}a+=")) {  ";var O="missing"+s,S="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(Q,O,!0):Q+" + "+O);var _=_||[];_.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+S+"', depsCount: "+f.length+", deps: '"+e.util.escapeQuotes(1==f.length?f[0]:f.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==f.length?a+="property "+e.util.escapeQuotes(f[0]):a+="properties "+e.util.escapeQuotes(f.join(", ")),a+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),a+=" } "):a+=" {} ";var k=a;a=_.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+k+"]); ":a+=" validate.errors = ["+k+"]; return false; ":a+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{a+=" ) { ";var C=f;if(C)for(var R,x=-1,A=C.length-1;x<A;){R=C[x+=1];var D=e.util.getProperty(R),I=(S=e.util.escapeQuotes(R),n+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Q,R,e.opts.jsonPointers)),a+=" if ( "+I+" === undefined ",y&&(a+=" || ! Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(R)+"') "),a+=") {  var err =   ",!1!==e.createErrors?(a+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(j)+"', missingProperty: '"+S+"', depsCount: "+f.length+", deps: '"+e.util.escapeQuotes(1==f.length?f[0]:f.join(", "))+"' } ",!1!==e.opts.messages&&(a+=" , message: 'should have ",1==f.length?a+="property "+e.util.escapeQuotes(f[0]):a+="properties "+e.util.escapeQuotes(f.join(", ")),a+=" when property "+e.util.escapeQuotes(j)+" is present' "),e.opts.verbose&&(a+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a+=" }   ",u&&(d+="}",a+=" else { ")}e.errorPath=Q;var L=c.baseId;for(var j in P){g=P[j];(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all))&&(a+=" "+v+" = true; if ( "+n+e.util.getProperty(j)+" !== undefined ",y&&(a+=" && Object.prototype.hasOwnProperty.call("+n+", '"+e.util.escapeQuotes(j)+"') "),a+=") { ",c.schema=g,c.schemaPath=i+e.util.getProperty(j),c.errSchemaPath=l+"/"+e.util.escapeFragment(j),a+="  "+e.validate(c)+" ",c.baseId=L,a+=" }  ",u&&(a+=" if ("+v+") { ",d+="}"))}return u&&(a+="   "+d+" if ("+h+" == errors) {"),a=e.util.cleanUpCode(a)};
},{}],"mbmc":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t=" ",s=a.level,l=a.dataLevel,o=a.schema[e],h=a.schemaPath+a.util.getProperty(e),d=a.errSchemaPath+"/"+e,i=!a.opts.allErrors,u="data"+(l||""),m="valid"+s,v=a.opts.$data&&o&&o.$data;v&&(t+=" var schema"+s+" = "+a.util.getData(o.$data,l,a.dataPathArr)+"; ");var c="i"+s,n="schema"+s;v||(t+=" var "+n+" = validate.schema"+h+";"),t+="var "+m+";",v&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=m+" = false;for (var "+c+"=0; "+c+"<"+n+".length; "+c+"++) if (equal("+u+", "+n+"["+c+"])) { "+m+" = true; break; }",v&&(t+="  }  "),t+=" if (!"+m+") {   ";var p=p||[];p.push(t),t="",!1!==a.createErrors?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(d)+" , params: { allowedValues: schema"+s+" } ",!1!==a.opts.messages&&(t+=" , message: 'should be equal to one of the allowed values' "),a.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var f=t;return t=p.pop(),!a.compositeRule&&i?a.async?t+=" throw new ValidationError(["+f+"]); ":t+=" validate.errors = ["+f+"]; return false; ":t+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",i&&(t+=" else { "),t};
},{}],"Bkge":[function(require,module,exports) {
"use strict";module.exports=function(a,t,r){var e=" ",o=a.level,s=a.dataLevel,i=a.schema[t],n=a.schemaPath+a.util.getProperty(t),f=a.errSchemaPath+"/"+t,c=!a.opts.allErrors,u="data"+(s||"");if(!1===a.opts.format)return c&&(e+=" if (true) { "),e;var m,h=a.opts.$data&&i&&i.$data;h?(e+=" var schema"+o+" = "+a.util.getData(i.$data,s,a.dataPathArr)+"; ",m="schema"+o):m=i;var l=a.opts.unknownFormats,d=Array.isArray(l);if(h){e+=" var "+(p="format"+o)+" = formats["+m+"]; var "+(v="isObject"+o)+" = typeof "+p+" == 'object' && !("+p+" instanceof RegExp) && "+p+".validate; var "+(y="formatType"+o)+" = "+v+" && "+p+".type || 'string'; if ("+v+") { ",a.async&&(e+=" var async"+o+" = "+p+".async; "),e+=" "+p+" = "+p+".validate; } if (  ",h&&(e+=" ("+m+" !== undefined && typeof "+m+" != 'string') || "),e+=" (","ignore"!=l&&(e+=" ("+m+" && !"+p+" ",d&&(e+=" && self._opts.unknownFormats.indexOf("+m+") == -1 "),e+=") || "),e+=" ("+p+" && "+y+" == '"+r+"' && !(typeof "+p+" == 'function' ? ",a.async?e+=" (async"+o+" ? await "+p+"("+u+") : "+p+"("+u+")) ":e+=" "+p+"("+u+") ",e+=" : "+p+".test("+u+"))))) {"}else{var p;if(!(p=a.formats[i])){if("ignore"==l)return a.logger.warn('unknown format "'+i+'" ignored in schema at path "'+a.errSchemaPath+'"'),c&&(e+=" if (true) { "),e;if(d&&l.indexOf(i)>=0)return c&&(e+=" if (true) { "),e;throw new Error('unknown format "'+i+'" is used in schema at path "'+a.errSchemaPath+'"')}var v,y=(v="object"==typeof p&&!(p instanceof RegExp)&&p.validate)&&p.type||"string";if(v){var g=!0===p.async;p=p.validate}if(y!=r)return c&&(e+=" if (true) { "),e;if(g){if(!a.async)throw new Error("async format in sync schema");e+=" if (!(await "+(w="formats"+a.util.getProperty(i)+".validate")+"("+u+"))) { "}else{e+=" if (! ";var w="formats"+a.util.getProperty(i);v&&(w+=".validate"),e+="function"==typeof p?" "+w+"("+u+") ":" "+w+".test("+u+") ",e+=") { "}}var P=P||[];P.push(e),e="",!1!==a.createErrors?(e+=" { keyword: 'format' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(f)+" , params: { format:  ",e+=h?""+m:""+a.util.toQuotedString(i),e+="  } ",!1!==a.opts.messages&&(e+=" , message: 'should match format \"",e+=h?"' + "+m+" + '":""+a.util.escapeQuotes(i),e+="\"' "),a.opts.verbose&&(e+=" , schema:  ",e+=h?"validate.schema"+n:""+a.util.toQuotedString(i),e+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+u+" "),e+=" } "):e+=" {} ";var E=e;return e=P.pop(),!a.compositeRule&&c?a.async?e+=" throw new ValidationError(["+E+"]); ":e+=" validate.errors = ["+E+"]; return false; ":e+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",e+=" } ",c&&(e+=" else { "),e};
},{}],"nUqN":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,l=e.dataLevel,h=e.schema[r],o=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,i=!e.opts.allErrors,m="data"+(l||""),v="valid"+t,u="errs__"+t,d=e.util.copy(e);d.level++;var n="valid"+d.level,p=e.schema.then,P=e.schema.else,f=void 0!==p&&(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all)),E=void 0!==P&&(e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all)),y=d.baseId;if(f||E){var R;d.createErrors=!1,d.schema=h,d.schemaPath=o,d.errSchemaPath=c,s+=" var "+u+" = errors; var "+v+" = true;  ";var S=e.compositeRule;e.compositeRule=d.compositeRule=!0,s+="  "+e.validate(d)+" ",d.baseId=y,d.createErrors=!0,s+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=S,f?(s+=" if ("+n+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",s+="  "+e.validate(d)+" ",d.baseId=y,s+=" "+v+" = "+n+"; ",f&&E?s+=" var "+(R="ifClause"+t)+" = 'then'; ":R="'then'",s+=" } ",E&&(s+=" else { ")):s+=" if (!"+n+") { ",E&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",s+="  "+e.validate(d)+" ",d.baseId=y,s+=" "+v+" = "+n+"; ",f&&E?s+=" var "+(R="ifClause"+t)+" = 'else'; ":R="'else'",s+=" } "),s+=" if (!"+v+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+R+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match \"' + "+R+" + '\" schema' "),e.opts.verbose&&(s+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&i&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" }   ",i&&(s+=" else { "),s=e.util.cleanUpCode(s)}else i&&(s+=" if (true) { ");return s};
},{}],"veNu":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t=" ",s=e.level,l=e.dataLevel,h=e.schema[a],o=e.schemaPath+e.util.getProperty(a),i=e.errSchemaPath+"/"+a,c=!e.opts.allErrors,v="data"+(l||""),d="valid"+s,n="errs__"+s,m=e.util.copy(e),u="";m.level++;var P="valid"+m.level,p="i"+s,f=m.dataLevel=e.dataLevel+1,g="data"+f,y=e.baseId;if(t+="var "+n+" = errors;var "+d+";",Array.isArray(h)){var b=e.schema.additionalItems;if(!1===b){t+=" "+d+" = "+v+".length <= "+h.length+"; ";var E=i;i=e.errSchemaPath+"/additionalItems",t+="  if (!"+d+") {   ";var S=S||[];S.push(t),t="",!1!==e.createErrors?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(i)+" , params: { limit: "+h.length+" } ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+h.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),t+=" } "):t+=" {} ";var j=t;t=S.pop(),!e.compositeRule&&c?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",i=E,c&&(u+="}",t+=" else { ")}var R=h;if(R)for(var I,O=-1,k=R.length-1;O<k;)if(I=R[O+=1],e.opts.strictKeywords?"object"==typeof I&&Object.keys(I).length>0:e.util.schemaHasRules(I,e.RULES.all)){t+=" "+P+" = true; if ("+v+".length > "+O+") { ";var w=v+"["+O+"]";m.schema=I,m.schemaPath=o+"["+O+"]",m.errSchemaPath=i+"/"+O,m.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),m.dataPathArr[f]=O;var L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",t+=" }  ",c&&(t+=" if ("+P+") { ",u+="}")}if("object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))){m.schema=b,m.schemaPath=e.schemaPath+".additionalItems",m.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+P+" = true; if ("+v+".length > "+h.length+") {  for (var "+p+" = "+h.length+"; "+p+" < "+v+".length; "+p+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,!0);w=v+"["+p+"]";m.dataPathArr[f]=p;L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",c&&(t+=" if (!"+P+") break; "),t+=" } }  ",c&&(t+=" if ("+P+") { ",u+="}")}}else if(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:e.util.schemaHasRules(h,e.RULES.all)){m.schema=h,m.schemaPath=o,m.errSchemaPath=i,t+="  for (var "+p+" = 0; "+p+" < "+v+".length; "+p+"++) { ",m.errorPath=e.util.getPathExpr(e.errorPath,p,e.opts.jsonPointers,!0);w=v+"["+p+"]";m.dataPathArr[f]=p;L=e.validate(m);m.baseId=y,e.util.varOccurences(L,g)<2?t+=" "+e.util.varReplace(L,g,w)+" ":t+=" var "+g+" = "+w+"; "+L+" ",c&&(t+=" if (!"+P+") break; "),t+=" }"}return c&&(t+=" "+u+" if ("+n+" == errors) {"),t=e.util.cleanUpCode(t)};
},{}],"QYf9":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t,s=" ",o=e.level,i=e.dataLevel,m=e.schema[a],h=e.schemaPath+e.util.getProperty(a),l=e.errSchemaPath+"/"+a,d=!e.opts.allErrors,u="data"+(i||""),c=e.opts.$data&&m&&m.$data;c?(s+=" var schema"+o+" = "+e.util.getData(m.$data,i,e.dataPathArr)+"; ",t="schema"+o):t=m;var n="maximum"==a,v=n?"exclusiveMaximum":"exclusiveMinimum",p=e.schema[v],f=e.opts.$data&&p&&p.$data,P=n?"<":">",b=n?">":"<",x=void 0;if(f){var E=e.util.getData(p.$data,i,e.dataPathArr),y="exclusive"+o,g="exclType"+o,S="exclIsNumber"+o,w="' + "+(k="op"+o)+" + '";s+=" var schemaExcl"+o+" = "+E+"; ",s+=" var "+y+"; var "+g+" = typeof "+(E="schemaExcl"+o)+"; if ("+g+" != 'boolean' && "+g+" != 'undefined' && "+g+" != 'number') { ";var $;x=v;($=$||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(x||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: '"+v+" should be boolean' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var M=s;s=$.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+g+" == 'number' ? ( ("+y+" = "+t+" === undefined || "+E+" "+P+"= "+t+") ? "+u+" "+b+"= "+E+" : "+u+" "+b+" "+t+" ) : ( ("+y+" = "+E+" === true) ? "+u+" "+b+"= "+t+" : "+u+" "+b+" "+t+" ) || "+u+" !== "+u+") { var op"+o+" = "+y+" ? '"+P+"' : '"+P+"='; ",void 0===m&&(x=v,l=e.errSchemaPath+"/"+v,t=E,c=f)}else{w=P;if((S="number"==typeof p)&&c){var k="'"+w+"'";s+=" if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" ( "+t+" === undefined || "+p+" "+P+"= "+t+" ? "+u+" "+b+"= "+p+" : "+u+" "+b+" "+t+" ) || "+u+" !== "+u+") { "}else{S&&void 0===m?(y=!0,x=v,l=e.errSchemaPath+"/"+v,t=p,b+="="):(S&&(t=Math[n?"min":"max"](p,m)),p===(!S||t)?(y=!0,x=v,l=e.errSchemaPath+"/"+v,b+="="):(y=!1,w+="="));k="'"+w+"'";s+=" if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+u+" "+b+" "+t+" || "+u+" !== "+u+") { "}}x=x||a,($=$||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(x||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+k+", limit: "+t+", exclusive: "+y+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be "+w+" ",s+=c?"' + "+t:t+"'"),e.opts.verbose&&(s+=" , schema:  ",s+=c?"validate.schema"+h:""+m,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";M=s;return s=$.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+M+"]); ":s+=" validate.errors = ["+M+"]; return false; ":s+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",d&&(s+=" else { "),s};
},{}],"YoMQ":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",o=a.level,h=a.dataLevel,m=a.schema[e],l=a.schemaPath+a.util.getProperty(e),i=a.errSchemaPath+"/"+e,d=!a.opts.allErrors,c="data"+(h||""),u=a.opts.$data&&m&&m.$data;u?(s+=" var schema"+o+" = "+a.util.getData(m.$data,h,a.dataPathArr)+"; ",t="schema"+o):t=m,s+="if ( ",u&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" "+c+".length "+("maxItems"==e?">":"<")+" "+t+") { ";var n=e,v=v||[];v.push(s),s="",!1!==a.createErrors?(s+=" { keyword: '"+(n||"_limitItems")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { limit: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxItems"==e?"more":"fewer",s+=" than ",s+=u?"' + "+t+" + '":""+m,s+=" items' "),a.opts.verbose&&(s+=" , schema:  ",s+=u?"validate.schema"+l:""+m,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+c+" "),s+=" } "):s+=" {} ";var p=s;return s=v.pop(),!a.compositeRule&&d?a.async?s+=" throw new ValidationError(["+p+"]); ":s+=" validate.errors = ["+p+"]; return false; ":s+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s};
},{}],"jIsr":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",o=a.level,h=a.dataLevel,l=a.schema[e],m=a.schemaPath+a.util.getProperty(e),n=a.errSchemaPath+"/"+e,c=!a.opts.allErrors,d="data"+(h||""),i=a.opts.$data&&l&&l.$data;i?(s+=" var schema"+o+" = "+a.util.getData(l.$data,h,a.dataPathArr)+"; ",t="schema"+o):t=l;var u="maxLength"==e?">":"<";s+="if ( ",i&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),!1===a.opts.unicode?s+=" "+d+".length ":s+=" ucs2length("+d+") ",s+=" "+u+" "+t+") { ";var p=e,v=v||[];v.push(s),s="",!1!==a.createErrors?(s+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(n)+" , params: { limit: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should NOT be ",s+="maxLength"==e?"longer":"shorter",s+=" than ",s+=i?"' + "+t+" + '":""+l,s+=" characters' "),a.opts.verbose&&(s+=" , schema:  ",s+=i?"validate.schema"+m:""+l,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;return s=v.pop(),!a.compositeRule&&c?a.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",c&&(s+=" else { "),s};
},{}],"GAVZ":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var t,s=" ",o=e.level,h=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),m=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,p="data"+(h||""),c=e.opts.$data&&i&&i.$data;c?(s+=" var schema"+o+" = "+e.util.getData(i.$data,h,e.dataPathArr)+"; ",t="schema"+o):t=i,s+="if ( ",c&&(s+=" ("+t+" !== undefined && typeof "+t+" != 'number') || "),s+=" Object.keys("+p+").length "+("maxProperties"==r?">":"<")+" "+t+") { ";var u=r,n=n||[];n.push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(u||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(m)+" , params: { limit: "+t+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have ",s+="maxProperties"==r?"more":"fewer",s+=" than ",s+=c?"' + "+t+" + '":""+i,s+=" properties' "),e.opts.verbose&&(s+=" , schema:  ",s+=c?"validate.schema"+l:""+i,s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),s+=" } "):s+=" {} ";var v=s;return s=n.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",d&&(s+=" else { "),s};
},{}],"X86S":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var t,s=" ",i=a.level,o=a.dataLevel,l=a.schema[e],d=a.schemaPath+a.util.getProperty(e),h=a.errSchemaPath+"/"+e,n=!a.opts.allErrors,m="data"+(o||""),p=a.opts.$data&&l&&l.$data;p?(s+=" var schema"+i+" = "+a.util.getData(l.$data,o,a.dataPathArr)+"; ",t="schema"+i):t=l,s+="var division"+i+";if (",p&&(s+=" "+t+" !== undefined && ( typeof "+t+" != 'number' || "),s+=" (division"+i+" = "+m+" / "+t+", ",a.opts.multipleOfPrecision?s+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+a.opts.multipleOfPrecision+" ":s+=" division"+i+" !== parseInt(division"+i+") ",s+=" ) ",p&&(s+="  )  "),s+=" ) {   ";var u=u||[];u.push(s),s="",!1!==a.createErrors?(s+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(h)+" , params: { multipleOf: "+t+" } ",!1!==a.opts.messages&&(s+=" , message: 'should be multiple of ",s+=p?"' + "+t:t+"'"),a.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+d:""+l,s+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ";var v=s;return s=u.pop(),!a.compositeRule&&n?a.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",n&&(s+=" else { "),s};
},{}],"WoJe":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var s=" ",t=r.level,o=r.dataLevel,l=r.schema[e],h=r.schemaPath+r.util.getProperty(e),c=r.errSchemaPath+"/"+e,i=!r.opts.allErrors,m="data"+(o||""),v="errs__"+t,p=r.util.copy(r);p.level++;var u="valid"+p.level;if(r.opts.strictKeywords?"object"==typeof l&&Object.keys(l).length>0:r.util.schemaHasRules(l,r.RULES.all)){p.schema=l,p.schemaPath=h,p.errSchemaPath=c,s+=" var "+v+" = errors;  ";var d,E=r.compositeRule;r.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(d=p.opts.allErrors,p.opts.allErrors=!1),s+=" "+r.validate(p)+" ",p.createErrors=!0,d&&(p.opts.allErrors=d),r.compositeRule=p.compositeRule=E,s+=" if ("+u+") {   ";var n=n||[];n.push(s),s="",!1!==r.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: {} ",!1!==r.opts.messages&&(s+=" , message: 'should NOT be valid' "),r.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ";var P=s;s=n.pop(),!r.compositeRule&&i?r.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",r.opts.allErrors&&(s+=" } ")}else s+="  var err =   ",!1!==r.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(c)+" , params: {} ",!1!==r.opts.messages&&(s+=" , message: 'should NOT be valid' "),r.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i&&(s+=" if (false) { ");return s};
},{}],"Pd8h":[function(require,module,exports) {
"use strict";module.exports=function(e,r,a){var s=" ",t=e.level,l=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,v="data"+(l||""),m="valid"+t,u="errs__"+t,n=e.util.copy(e),p="";n.level++;var d="valid"+n.level,f=n.baseId,E="prevValid"+t,P="passingSchemas"+t;s+="var "+u+" = errors , "+E+" = false , "+m+" = false , "+P+" = null; ";var g=e.compositeRule;e.compositeRule=n.compositeRule=!0;var y=o;if(y)for(var R,S=-1,b=y.length-1;S<b;)R=y[S+=1],(e.opts.strictKeywords?"object"==typeof R&&Object.keys(R).length>0:e.util.schemaHasRules(R,e.RULES.all))?(n.schema=R,n.schemaPath=i+"["+S+"]",n.errSchemaPath=c+"/"+S,s+="  "+e.validate(n)+" ",n.baseId=f):s+=" var "+d+" = true; ",S&&(s+=" if ("+d+" && "+E+") { "+m+" = false; "+P+" = ["+P+", "+S+"]; } else { ",p+="}"),s+=" if ("+d+") { "+m+" = "+E+" = true; "+P+" = "+S+"; }";return e.compositeRule=n.compositeRule=g,s+=p+"if (!"+m+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+P+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+="} else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }",e.opts.allErrors&&(s+=" } "),s};
},{}],"hgZn":[function(require,module,exports) {
"use strict";module.exports=function(e,t,a){var r,s=" ",o=e.level,h=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,i=!e.opts.allErrors,n="data"+(h||""),p=e.opts.$data&&l&&l.$data;p?(s+=" var schema"+o+" = "+e.util.getData(l.$data,h,e.dataPathArr)+"; ",r="schema"+o):r=l,s+="if ( ",p&&(s+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),s+=" !"+(p?"(new RegExp("+r+"))":e.usePattern(l))+".test("+n+") ) {   ";var c=c||[];c.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",s+=p?""+r:""+e.util.toQuotedString(l),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match pattern \"",s+=p?"' + "+r+" + '":""+e.util.escapeQuotes(l),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=p?"validate.schema"+u:""+e.util.toQuotedString(l),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),s+=" } "):s+=" {} ";var m=s;return s=c.pop(),!e.compositeRule&&i?e.async?s+=" throw new ValidationError(["+m+"]); ":s+=" validate.errors = ["+m+"]; return false; ":s+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+="} ",i&&(s+=" else { "),s};
},{}],"PyFz":[function(require,module,exports) {
"use strict";module.exports=function(e,r,t){var a=" ",s=e.level,o=e.dataLevel,i=e.schema[r],l=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,d="data"+(o||""),c="errs__"+s,P=e.util.copy(e),n="";P.level++;var u="valid"+P.level,v="key"+s,f="idx"+s,m=P.dataLevel=e.dataLevel+1,g="data"+m,y="dataProperties"+s,b=Object.keys(i||{}),j=e.schema.patternProperties||{},O=Object.keys(j),S=e.schema.additionalProperties,E=b.length||O.length,R=!1===S,k="object"==typeof S&&Object.keys(S).length,w=e.opts.removeAdditional,Q=R||k||w,_=e.opts.ownProperties,A=e.baseId,D=e.schema.required;if(D&&(!e.opts.$data||!D.$data)&&D.length<e.opts.loopRequired)var q=e.util.toHash(D);if(a+="var "+c+" = errors;var "+u+" = true;",_&&(a+=" var "+y+" = undefined;"),Q){if(a+=_?" "+y+" = "+y+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+y+".length; "+f+"++) { var "+v+" = "+y+"["+f+"]; ":" for (var "+v+" in "+d+") { ",E){if(a+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)a+=" || validate.schema"+l+".hasOwnProperty("+v+") ";else{var x=b;if(x)for(var I=-1,L=x.length-1;I<L;)J=x[I+=1],a+=" || "+v+" == "+e.util.toQuotedString(J)+" "}if(O.length){var H=O;if(H)for(var U=-1,F=H.length-1;U<F;)se=H[U+=1],a+=" || "+e.usePattern(se)+".test("+v+") "}a+=" ); if (isAdditional"+s+") { "}if("all"==w)a+=" delete "+d+"["+v+"]; ";else{var K=e.errorPath,V="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),R)if(w)a+=" delete "+d+"["+v+"]; ";else{a+=" "+u+" = false; ";var $=h;h=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+V+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is an invalid additional property":a+="should NOT have additional properties",a+="' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var C=a;a=re.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=$,p&&(a+=" break; ")}else if(k)if("failing"==w){a+=" var "+c+" = errors;  ";var N=e.compositeRule;e.compositeRule=P.compositeRule=!0,P.schema=S,P.schemaPath=e.schemaPath+".additionalProperties",P.errSchemaPath=e.errSchemaPath+"/additionalProperties",P.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var T=d+"["+v+"]";P.dataPathArr[m]=v;var z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",a+=" if (!"+u+") { errors = "+c+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+v+"]; }  ",e.compositeRule=P.compositeRule=N}else{P.schema=S,P.schemaPath=e.schemaPath+".additionalProperties",P.errSchemaPath=e.errSchemaPath+"/additionalProperties",P.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);T=d+"["+v+"]";P.dataPathArr[m]=v;z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",p&&(a+=" if (!"+u+") break; ")}e.errorPath=K}E&&(a+=" } "),a+=" }  ",p&&(a+=" if ("+u+") { ",n+="}")}var B=e.opts.useDefaults&&!e.compositeRule;if(b.length){var G=b;if(G)for(var J,M=-1,W=G.length-1;M<W;){var X=i[J=G[M+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){var Y=e.util.getProperty(J),Z=(T=d+Y,B&&void 0!==X.default);P.schema=X,P.schemaPath=l+Y,P.errSchemaPath=h+"/"+e.util.escapeFragment(J),P.errorPath=e.util.getPath(e.errorPath,J,e.opts.jsonPointers),P.dataPathArr[m]=e.util.toQuotedString(J);z=e.validate(P);if(P.baseId=A,e.util.varOccurences(z,g)<2){z=e.util.varReplace(z,g,T);var ee=T}else{ee=g;a+=" var "+g+" = "+T+"; "}if(Z)a+=" "+z+" ";else{if(q&&q[J]){a+=" if ( "+ee+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+u+" = false; ";K=e.errorPath,$=h;var re,te=e.util.escapeQuotes(J);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(K,J,e.opts.jsonPointers)),h=e.errSchemaPath+"/required",(re=re||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",!1!==e.opts.messages&&(a+=" , message: '",e.opts._errorDataPathProperty?a+="is a required property":a+="should have required property \\'"+te+"\\'",a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";C=a;a=re.pop(),!e.compositeRule&&p?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=$,e.errorPath=K,a+=" } else { "}else p?(a+=" if ( "+ee+" === undefined ",_&&(a+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=") { "+u+" = true; } else { "):(a+=" if ("+ee+" !== undefined ",_&&(a+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(J)+"') "),a+=" ) { ");a+=" "+z+" } "}}p&&(a+=" if ("+u+") { ",n+="}")}}if(O.length){var ae=O;if(ae)for(var se,oe=-1,ie=ae.length-1;oe<ie;){X=j[se=ae[oe+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){P.schema=X,P.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),P.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),a+=_?" "+y+" = "+y+" || Object.keys("+d+"); for (var "+f+"=0; "+f+"<"+y+".length; "+f+"++) { var "+v+" = "+y+"["+f+"]; ":" for (var "+v+" in "+d+") { ",a+=" if ("+e.usePattern(se)+".test("+v+")) { ",P.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);T=d+"["+v+"]";P.dataPathArr[m]=v;z=e.validate(P);P.baseId=A,e.util.varOccurences(z,g)<2?a+=" "+e.util.varReplace(z,g,T)+" ":a+=" var "+g+" = "+T+"; "+z+" ",p&&(a+=" if (!"+u+") break; "),a+=" } ",p&&(a+=" else "+u+" = true; "),a+=" }  ",p&&(a+=" if ("+u+") { ",n+="}")}}}return p&&(a+=" "+n+" if ("+c+" == errors) {"),a=e.util.cleanUpCode(a)};
},{}],"B9D0":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var t=" ",s=r.level,o=r.dataLevel,l=r.schema[e],i=r.schemaPath+r.util.getProperty(e),v=r.errSchemaPath+"/"+e,c=!r.opts.allErrors,p="data"+(o||""),m="errs__"+s,d=r.util.copy(r);d.level++;var h="valid"+d.level;if(t+="var "+m+" = errors;",r.opts.strictKeywords?"object"==typeof l&&Object.keys(l).length>0:r.util.schemaHasRules(l,r.RULES.all)){d.schema=l,d.schemaPath=i,d.errSchemaPath=v;var u="key"+s,n="idx"+s,y="i"+s,E="' + "+u+" + '",P="data"+(d.dataLevel=r.dataLevel+1),f="dataProperties"+s,R=r.opts.ownProperties,b=r.baseId;R&&(t+=" var "+f+" = undefined; "),t+=R?" "+f+" = "+f+" || Object.keys("+p+"); for (var "+n+"=0; "+n+"<"+f+".length; "+n+"++) { var "+u+" = "+f+"["+n+"]; ":" for (var "+u+" in "+p+") { ",t+=" var startErrs"+s+" = errors; ";var g=u,k=r.compositeRule;r.compositeRule=d.compositeRule=!0;var w=r.validate(d);d.baseId=b,r.util.varOccurences(w,P)<2?t+=" "+r.util.varReplace(w,P,g)+" ":t+=" var "+P+" = "+g+"; "+w+" ",r.compositeRule=d.compositeRule=k,t+=" if (!"+h+") { for (var "+y+"=startErrs"+s+"; "+y+"<errors; "+y+"++) { vErrors["+y+"].propertyName = "+u+"; }   var err =   ",!1!==r.createErrors?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(v)+" , params: { propertyName: '"+E+"' } ",!1!==r.opts.messages&&(t+=" , message: 'property name \\'"+E+"\\' is invalid' "),r.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+p+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!r.compositeRule&&c&&(r.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),c&&(t+=" break; "),t+=" } }"}return c&&(t+="  if ("+m+" == errors) {"),t=r.util.cleanUpCode(t)};
},{}],"oRre":[function(require,module,exports) {
"use strict";module.exports=function(r,e,a){var t=" ",s=r.level,o=r.dataLevel,i=r.schema[e],h=r.schemaPath+r.util.getProperty(e),p=r.errSchemaPath+"/"+e,l=!r.opts.allErrors,d="data"+(o||""),u="valid"+s,P=r.opts.$data&&i&&i.$data;P&&(t+=" var schema"+s+" = "+r.util.getData(i.$data,o,r.dataPathArr)+"; ");var n="schema"+s;if(!P)if(i.length<r.opts.loopRequired&&r.schema.properties&&Object.keys(r.schema.properties).length){var c=[],m=i;if(m)for(var v,y=-1,g=m.length-1;y<g;){v=m[y+=1];var f=r.schema.properties[v];f&&(r.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:r.util.schemaHasRules(f,r.RULES.all))||(c[c.length]=v)}}else c=i;if(P||c.length){var E=r.errorPath,q=P||c.length>=r.opts.loopRequired,w=r.opts.ownProperties;if(l)if(t+=" var missing"+s+"; ",q){P||(t+=" var "+n+" = validate.schema"+h+"; ");var b="' + "+(_="schema"+s+"["+(D="i"+s)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(E,_,r.opts.jsonPointers)),t+=" var "+u+" = true; ",P&&(t+=" if (schema"+s+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+s+")) "+u+" = false; else {"),t+=" for (var "+D+" = 0; "+D+" < "+n+".length; "+D+"++) { "+u+" = "+d+"["+n+"["+D+"]] !== undefined ",w&&(t+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+n+"["+D+"]) "),t+="; if (!"+u+") break; } ",P&&(t+="  }  "),t+="  if (!"+u+") {   ",(Q=Q||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var S=t;t=Q.pop(),!r.compositeRule&&l?r.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var j=c;if(j)for(var D=-1,O=j.length-1;D<O;){R=j[D+=1],D&&(t+=" || "),t+=" ( ( "+(L=d+($=r.util.getProperty(R)))+" === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(R)+"') "),t+=") && (missing"+s+" = "+r.util.toQuotedString(r.opts.jsonPointers?R:$)+") ) "}t+=") {  ";var Q;b="' + "+(_="missing"+s)+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.opts.jsonPointers?r.util.getPathExpr(E,_,!0):E+" + "+_),(Q=Q||[]).push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";S=t;t=Q.pop(),!r.compositeRule&&l?r.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(q){P||(t+=" var "+n+" = validate.schema"+h+"; ");var _;b="' + "+(_="schema"+s+"["+(D="i"+s)+"]")+" + '";r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(E,_,r.opts.jsonPointers)),P&&(t+=" if ("+n+" && !Array.isArray("+n+")) {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+n+" !== undefined) { "),t+=" for (var "+D+" = 0; "+D+" < "+n+".length; "+D+"++) { if ("+d+"["+n+"["+D+"]] === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+n+"["+D+"]) "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",P&&(t+="  }  ")}else{var k=c;if(k)for(var R,A=-1,x=k.length-1;A<x;){R=k[A+=1];var $=r.util.getProperty(R),L=(b=r.util.escapeQuotes(R),d+$);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(E,R,r.opts.jsonPointers)),t+=" if ( "+L+" === undefined ",w&&(t+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+r.util.escapeQuotes(R)+"') "),t+=") {  var err =   ",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(p)+" , params: { missingProperty: '"+b+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+b+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r.errorPath=E}else l&&(t+=" if (true) {");return t};
},{}],"Ylu6":[function(require,module,exports) {
"use strict";module.exports=function(e,a,r){var t,i=" ",s=e.level,o=e.dataLevel,m=e.schema[a],l=e.schemaPath+e.util.getProperty(a),c=e.errSchemaPath+"/"+a,d=!e.opts.allErrors,u="data"+(o||""),h="valid"+s,n=e.opts.$data&&m&&m.$data;if(n?(i+=" var schema"+s+" = "+e.util.getData(m.$data,o,e.dataPathArr)+"; ",t="schema"+s):t=m,(m||n)&&!1!==e.opts.uniqueItems){n&&(i+=" var "+h+"; if ("+t+" === false || "+t+" === undefined) "+h+" = true; else if (typeof "+t+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+u+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,v=Array.isArray(f);if(!f||"object"==f||"array"==f||v&&(f.indexOf("object")>=0||f.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var p="checkDataType"+(v?"s":"");i+=" if ("+e.util[p](f,"item",!0)+") continue; ",v&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",n&&(i+="  }  "),i+=" if (!"+h+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=n?"validate.schema"+l:""+m,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var j=i;i=y.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+j+"]); ":i+=" validate.errors = ["+j+"]; return false; ":i+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",d&&(i+=" else { ")}else d&&(i+=" if (true) { ");return i};
},{}],"BTrq":[function(require,module,exports) {
"use strict";module.exports={$ref:require("./ref"),allOf:require("./allOf"),anyOf:require("./anyOf"),$comment:require("./comment"),const:require("./const"),contains:require("./contains"),dependencies:require("./dependencies"),enum:require("./enum"),format:require("./format"),if:require("./if"),items:require("./items"),maximum:require("./_limit"),minimum:require("./_limit"),maxItems:require("./_limitItems"),minItems:require("./_limitItems"),maxLength:require("./_limitLength"),minLength:require("./_limitLength"),maxProperties:require("./_limitProperties"),minProperties:require("./_limitProperties"),multipleOf:require("./multipleOf"),not:require("./not"),oneOf:require("./oneOf"),pattern:require("./pattern"),properties:require("./properties"),propertyNames:require("./propertyNames"),required:require("./required"),uniqueItems:require("./uniqueItems"),validate:require("./validate")};
},{"./ref":"xcTN","./allOf":"jiJK","./anyOf":"Pnof","./comment":"Vdgo","./const":"z0a6","./contains":"IaHK","./dependencies":"BMaw","./enum":"mbmc","./format":"Bkge","./if":"nUqN","./items":"veNu","./_limit":"QYf9","./_limitItems":"YoMQ","./_limitLength":"jIsr","./_limitProperties":"GAVZ","./multipleOf":"X86S","./not":"WoJe","./oneOf":"Pd8h","./pattern":"hgZn","./properties":"PyFz","./propertyNames":"B9D0","./required":"oRre","./uniqueItems":"Ylu6","./validate":"XNwE"}],"e07p":[function(require,module,exports) {
"use strict";var e=require("../dotjs"),t=require("./util").toHash;module.exports=function(){var n=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"];return n.all=t(r),n.types=t(["number","integer","string","array","object","boolean","null"]),n.forEach(function(t){t.rules=t.rules.map(function(t){var i;if("object"==typeof t){var o=Object.keys(t)[0];i=t[o],t=o,i.forEach(function(e){r.push(e),n.all[e]=!0})}return r.push(t),n.all[t]={keyword:t,code:e[t],implements:i}}),n.all.$comment={keyword:"$comment",code:e.$comment},t.type&&(n.types[t.type]=t)}),n.keywords=t(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),n.custom={},n};
},{"../dotjs":"BTrq","./util":"S6qf"}],"f9Xx":[function(require,module,exports) {
"use strict";var e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];module.exports=function(t,i){for(var r=0;r<i.length;r++){t=JSON.parse(JSON.stringify(t));var m,n=i[r].split("/"),a=t;for(m=1;m<n.length;m++)a=a[n[m]];for(m=0;m<e.length;m++){var s=e[m],o=a[s];o&&(a[s]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return t};
},{}],"edJK":[function(require,module,exports) {
"use strict";var n=require("./error_classes").MissingRef;function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var a=c(t).then(function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(a){if(a instanceof n)return function o(e){var o=e.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+e.missingRef+" cannot be resolved");var a=i._loadingSchemas[o];a||(a=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(s,s);return a.then(function(n){if(!h(o))return c(n).then(function(){h(o)||i.addSchema(n,o,void 0,r)})}).then(function(){return function t(o){try{return i._compile(o)}catch(e){if(e instanceof n)return a(e);throw e}function a(n){var e=n.missingSchema;if(h(e))throw new Error("Schema "+e+" is loaded but "+n.missingRef+" cannot be resolved");var a=i._loadingSchemas[e];return a||(a=i._loadingSchemas[e]=i._opts.loadSchema(e)).then(s,s),a.then(function(n){if(!h(e))return c(n).then(function(){h(e)||i.addSchema(n,e,void 0,r)})}).then(function(){return t(o)});function s(){delete i._loadingSchemas[e]}function h(n){return i._refs[n]||i._schemas[n]}}}(t)});function s(){delete i._loadingSchemas[o]}function h(n){return i._refs[n]||i._schemas[n]}}(a);throw a}function o(n){var o=n.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var a=i._loadingSchemas[o];return a||(a=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(s,s),a.then(function(n){if(!h(o))return c(n).then(function(){h(o)||i.addSchema(n,o,void 0,r)})}).then(function(){return e(t)});function s(){delete i._loadingSchemas[o]}function h(n){return i._refs[n]||i._schemas[n]}}}(e)});return o&&a.then(function(n){o(null,n)},o),a;function c(n){var t=n.$schema;return t&&!i.getSchema(t)?e.call(i,{$ref:t},!0):Promise.resolve()}}module.exports=e;
},{"./error_classes":"yAtQ"}],"JvpR":[function(require,module,exports) {
"use strict";module.exports=function(a,r,e){var t,s,o=" ",i=a.level,h=a.dataLevel,d=a.schema[r],l=a.schemaPath+a.util.getProperty(r),v=a.errSchemaPath+"/"+r,c=!a.opts.allErrors,n="data"+(h||""),m="valid"+i,u="errs__"+i,p=a.opts.$data&&d&&d.$data;p?(o+=" var schema"+i+" = "+a.util.getData(d.$data,h,a.dataPathArr)+"; ",s="schema"+i):s=d;var f,P,y,E,w,k="definition"+i,g=this.definition,R="";if(p&&g.$data){w="keywordValidate"+i;var S=g.validateSchema;o+=" var "+k+" = RULES.custom['"+r+"'].definition; var "+w+" = "+k+".validate;"}else{if(!(E=a.useCustomRule(this,d,a.schema,a)))return;s="validate.schema"+l,w=E.code,f=g.compile,P=g.inline,y=g.macro}var b=w+".errors",$="i"+i,A="ruleErr"+i,D=g.async;if(D&&!a.async)throw new Error("async keyword in sync schema");if(P||y||(o+=b+" = null;"),o+="var "+u+" = errors;var "+m+";",p&&g.$data&&(R+="}",o+=" if ("+s+" === undefined) { "+m+" = true; } else { ",S&&(R+="}",o+=" "+m+" = "+k+".validateSchema("+s+"); if ("+m+") { ")),P)g.statements?o+=" "+E.validate+" ":o+=" "+m+" = "+E.validate+"; ";else if(y){var V=a.util.copy(a);R="";V.level++;var x="valid"+V.level;V.schema=E.validate,V.schemaPath="";var C=a.compositeRule;a.compositeRule=V.compositeRule=!0;var L=a.validate(V).replace(/validate\.schema/g,w);a.compositeRule=V.compositeRule=C,o+=" "+L}else{(j=j||[]).push(o),o="",o+="  "+w+".call( ",a.opts.passContext?o+="this":o+="self",f||!1===g.schema?o+=" , "+n+" ":o+=" , "+s+" , "+n+" , validate.schema"+a.schemaPath+" ",o+=" , (dataPath || '')",'""'!=a.errorPath&&(o+=" + "+a.errorPath);var Q=h?"data"+(h-1||""):"parentData",_=h?a.dataPathArr[h]:"parentDataProperty",U=o+=" , "+Q+" , "+_+" , rootData )  ";o=j.pop(),!1===g.errors?(o+=" "+m+" = ",D&&(o+="await "),o+=U+"; "):o+=D?" var "+(b="customErrors"+i)+" = null; try { "+m+" = await "+U+"; } catch (e) { "+m+" = false; if (e instanceof ValidationError) "+b+" = e.errors; else throw e; } ":" "+b+" = null; "+m+" = "+U+"; "}if(g.modifying&&(o+=" if ("+Q+") "+n+" = "+Q+"["+_+"];"),o+=""+R,g.valid)c&&(o+=" if (true) { ");else{var j;o+=" if ( ",void 0===g.valid?(o+=" !",o+=y?""+x:""+m):o+=" "+!g.valid+" ",o+=") { ",t=this.keyword,(j=j||[]).push(o),o="",(j=j||[]).push(o),o="",!1!==a.createErrors?(o+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(v)+" , params: { keyword: '"+this.keyword+"' } ",!1!==a.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),a.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+n+" "),o+=" } "):o+=" {} ";var q=o;o=j.pop(),!a.compositeRule&&c?a.async?o+=" throw new ValidationError(["+q+"]); ":o+=" validate.errors = ["+q+"]; return false; ":o+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var z=o;o=j.pop(),P?g.errors?"full"!=g.errors&&(o+="  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+v+'"; } ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } "):!1===g.errors?o+=" "+z+" ":(o+=" if ("+u+" == errors) { "+z+" } else {  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+v+'"; } ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==a.createErrors?(o+=" { keyword: '"+(t||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(v)+" , params: { keyword: '"+this.keyword+"' } ",!1!==a.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),a.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+n+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!a.compositeRule&&c&&(a.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===g.errors?o+=" "+z+" ":(o+=" if (Array.isArray("+b+")) { if (vErrors === null) vErrors = "+b+"; else vErrors = vErrors.concat("+b+"); errors = vErrors.length;  for (var "+$+"="+u+"; "+$+"<errors; "+$+"++) { var "+A+" = vErrors["+$+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+a.errorPath+";  "+A+'.schemaPath = "'+v+'";  ',a.opts.verbose&&(o+=" "+A+".schema = "+s+"; "+A+".data = "+n+"; "),o+=" } } else { "+z+" } "),o+=" } ",c&&(o+=" else { ")}return o};
},{}],"iOul":[function(require,module,exports) {
module.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};
},{}],"zJWc":[function(require,module,exports) {
"use strict";var e=require("./refs/json-schema-draft-07.json");module.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:e.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:e.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}};
},{"./refs/json-schema-draft-07.json":"iOul"}],"fFQ4":[function(require,module,exports) {
"use strict";var e=/^[a-z_$][a-z0-9_$-]*$/i,r=require("./dotjs/custom"),t=require("./definition_schema");function i(t,i){var o=this.RULES;if(o.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!e.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(i){this.validateKeyword(i,!0);var s=i.type;if(Array.isArray(s))for(var a=0;a<s.length;a++)d(t,s[a],i);else d(t,s,i);var n=i.metaSchema;n&&(i.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),i.validateSchema=this.compile(n,!0))}function d(e,t,i){for(var s,a=0;a<o.length;a++){var n=o[a];if(n.type==t){s=n;break}}s||(s={type:t,rules:[]},o.push(s));var d={keyword:e,definition:i,custom:!0,code:r,implements:i.implements};s.rules.push(d),o.custom[e]=d}return o.keywords[t]=o.all[t]=!0,this}function o(e){var r=this.RULES.custom[e];return r?r.definition:this.RULES.keywords[e]||!1}function s(e){var r=this.RULES;delete r.keywords[e],delete r.all[e],delete r.custom[e];for(var t=0;t<r.length;t++)for(var i=r[t].rules,o=0;o<i.length;o++)if(i[o].keyword==e){i.splice(o,1);break}return this}function a(e,r){a.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(t,!0);if(i(e))return!0;if(a.errors=i.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1}module.exports={add:i,get:o,remove:s,validate:a};
},{"./dotjs/custom":"JvpR","./definition_schema":"zJWc"}],"lsXB":[function(require,module,exports) {
module.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};
},{}],"PQkV":[function(require,module,exports) {
"use strict";var e=require("./compile"),t=require("./compile/resolve"),r=require("./cache"),a=require("./compile/schema_obj"),i=require("fast-json-stable-stringify"),s=require("./compile/formats"),o=require("./compile/rules"),h=require("./data"),n=require("./compile/util");module.exports=p,p.prototype.validate=u,p.prototype.compile=v,p.prototype.addSchema=_,p.prototype.addMetaSchema=g,p.prototype.validateSchema=y,p.prototype.getSchema=S,p.prototype.removeSchema=q,p.prototype.addFormat=A,p.prototype.errorsText=x,p.prototype._addSchema=E,p.prototype._compile=I,p.prototype.compileAsync=require("./compile/async");var c=require("./keyword");p.prototype.addKeyword=c.add,p.prototype.getKeyword=c.get,p.prototype.removeKeyword=c.remove,p.prototype.validateKeyword=c.validate;var d=require("./compile/error_classes");p.ValidationError=d.Validation,p.MissingRefError=d.MissingRef,p.$dataMetaSchema=h;var l="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],f=["/properties"];function p(e){if(!(this instanceof p))return new p(e);e=this._opts=n.copy(e)||{},F(this),this._schemas={},this._refs={},this._fragments={},this._formats=s(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=o(),this._getId=M(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=i),this._metaOpts=T(this),e.formats&&P(this),V(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),D(this)}function u(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var a=this._addSchema(e);r=a.validate||this._compile(a)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i}function v(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)}function _(e,r,a,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,a,i);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return k(this,r=t.normalizeId(r||o)),this._schemas[r]=this._addSchema(e,a,i,!0),this}function g(e,t,r){return this.addSchema(e,t,r,!0),this}function y(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||w(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var a=this.validate(r,e);if(!a&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return a}function w(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(l)?l:void 0,e._opts.defaultMeta}function S(e){var t=$(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return b(this,e)}}function b(r,i){var s=t.schema.call(r,{schema:{}},i);if(s){var o=s.schema,h=s.root,n=s.baseId,c=e.call(r,o,h,void 0,n);return r._fragments[i]=new a({ref:i,fragment:!0,schema:o,root:h,baseId:n,validate:c}),c}}function $(e,r){return r=t.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function q(e){if(e instanceof RegExp)return j(this,this._schemas,e),j(this,this._refs,e),this;switch(typeof e){case"undefined":return j(this,this._schemas),j(this,this._refs),this._cache.clear(),this;case"string":var r=$(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var a=this._opts.serialize,i=a?a(e):e;this._cache.del(i);var s=this._getId(e);s&&(s=t.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this}function j(e,t,r){for(var a in t){var i=t[a];i.meta||r&&!r.test(a)||(e._cache.del(i.cacheKey),delete t[a])}}function E(e,r,i,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,h=o?o(e):e,n=this._cache.get(h);if(n)return n;s=s||!1!==this._opts.addUsedSchema;var c=t.normalizeId(this._getId(e));c&&s&&k(this,c);var d,l=!1!==this._opts.validateSchema&&!r;l&&!(d=c&&c==t.normalizeId(e.$schema))&&this.validateSchema(e,!0);var m=t.ids.call(this,e),f=new a({id:c,schema:e,localRefs:m,cacheKey:h,meta:i});return"#"!=c[0]&&s&&(this._refs[c]=f),this._cache.put(h,f),l&&d&&this.validateSchema(e,!0),f}function I(t,r){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=r||s,!0===t.schema.$async&&(s.$async=!0),s;var a,i;t.compiling=!0,t.meta&&(a=this._opts,this._opts=this._metaOpts);try{i=e.call(this,t.schema,r,t.localRefs)}catch(o){throw delete t.validate,o}finally{t.compiling=!1,t.meta&&(this._opts=a)}return t.validate=i,t.refs=i.refs,t.refVal=i.refVal,t.root=i.root,i;function s(){var e=t.validate,r=e.apply(this,arguments);return s.errors=e.errors,r}}function M(e){switch(e.schemaId){case"auto":return K;case"id":return z;default:return R}}function z(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function R(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function K(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function x(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,a=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var o=e[s];o&&(i+=a+o.dataPath+" "+o.message+r)}return i.slice(0,-r.length)}function A(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this}function V(e){var t;if(e._opts.$data&&(t=require("./refs/data.json"),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=require("./refs/json-schema-draft-07.json");e._opts.$data&&(r=h(r,f)),e.addMetaSchema(r,l,!0),e._refs["http://json-schema.org/schema"]=l}}function D(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}function P(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function T(e){for(var t=n.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}function F(e){var t=e._opts.logger;if(!1===t)e.logger={log:O,warn:O,error:O};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function O(){}
},{"./compile":"IFqB","./compile/resolve":"FmMj","./cache":"wSeG","./compile/schema_obj":"h0OD","fast-json-stable-stringify":"Xb3N","./compile/formats":"SmGS","./compile/rules":"e07p","./data":"f9Xx","./compile/util":"S6qf","./compile/async":"edJK","./keyword":"fFQ4","./compile/error_classes":"yAtQ","./refs/data.json":"lsXB","./refs/json-schema-draft-07.json":"iOul"}],"Ts88":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var m={properties:{zoom:{type:"number",minimum:-1,maximum:24},minZoom:{type:"number",minimum:-1,maximum:24},maxZoom:{type:"number",minimum:-1,maximum:24},center:{type:"array",items:{type:"number"},maxItems:2,minItems:2},pitch:{type:"number"}}};exports.default=m;
},{}],"HR6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={properties:{id:{type:"string"}}};exports.default=e;
},{}],"k48d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={MapToken:"您正在使用 Demo测试地图token，如果生产环境中使用去对应地图请注册Token",SDK:"请确认引入了mapbox-gl api且在L7之前引入"},o=e;exports.default=o;
},{}],"yRGC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,a,n=C(require("@babel/runtime/helpers/defineProperty")),o=C(require("@babel/runtime/helpers/classCallCheck")),l=C(require("@babel/runtime/helpers/createClass")),c=C(require("@babel/runtime/helpers/applyDecoratedDescriptor")),s=C(require("lodash/merge")),u=C(require("ajv")),f=require("inversify"),g=C(require("./mapConfigSchema")),h=C(require("./sceneConfigSchema")),d=C(require("./warnInfo"));function C(e){return e&&e.__esModule?e:{default:e}}function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach(function(r){(0,n.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var y={id:"map"},v={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!0,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},m=new u.default({allErrors:!0,verbose:!0}),O=(e=(0,f.injectable)(),r=(0,f.postConstruct)(),e((i=a=function(){function e(){(0,o.default)(this,e),this.sceneConfigCache={},this.sceneConfigValidator=void 0,this.mapConfigValidator=void 0,this.layerConfigCache={},this.layerConfigValidatorCache={}}return(0,l.default)(e,[{key:"getSceneConfig",value:function(e){return this.sceneConfigCache[e]}},{key:"getSceneWarninfo",value:function(e){return d.default[e]}},{key:"setSceneConfig",value:function(e,r){this.sceneConfigCache[e]=b({},y,{},r)}},{key:"validateSceneConfig",value:function(e){return this.validate(this.sceneConfigValidator,e)}},{key:"validateMapConfig",value:function(e){return this.validate(this.mapConfigValidator,e)}},{key:"getLayerConfig",value:function(e){return this.layerConfigCache[e]}},{key:"setLayerConfig",value:function(e,r,t){this.layerConfigCache[r]=b({},(0,s.default)({},this.sceneConfigCache[e],v,t))}},{key:"registerLayerConfigSchemaValidator",value:function(e,r){this.layerConfigValidatorCache[e]||(this.layerConfigValidatorCache[e]=m.compile(r))}},{key:"validateLayerConfig",value:function(e,r){return this.validate(this.layerConfigValidatorCache[e],r)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}},{key:"registerSceneConfigSchemaValidator",value:function(){this.sceneConfigValidator=m.compile(h.default),this.mapConfigValidator=m.compile(g.default)}},{key:"validate",value:function(e,r){if(e){var t=e(r);if(!t)return{valid:t,errors:e.errors,errorText:m.errorsText(e.errors)}}return{valid:!0,errors:null,errorText:null}}}]),e}(),(0,c.default)(i.prototype,"registerSceneConfigSchemaValidator",[r],Object.getOwnPropertyDescriptor(i.prototype,"registerSceneConfigSchemaValidator"),i.prototype),t=i))||t);exports.default=O;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","lodash/merge":"yubd","ajv":"PQkV","inversify":"PR7M","./mapConfigSchema":"Ts88","./sceneConfigSchema":"HR6k","./warnInfo":"k48d"}],"foml":[function(require,module,exports) {
function e(e,i,l,r){l&&Object.defineProperty(e,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(r):void 0})}module.exports=e;
},{}],"Ajpk":[function(require,module,exports) {
function r(r,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}module.exports=r;
},{}],"kLAK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistanceScales=s;var e=Math.PI/180,r=512,i=4003e4;function s(s){var P=s.latitude,t=void 0===P?0:P,l=s.zoom,x=void 0===l?0:l,p=s.scale,o=s.highPrecision,a=void 0!==o&&o,d=s.flipY,g=void 0!==d&&d;p=void 0!==p?p:Math.pow(2,x);var M={},v=r*p,c=Math.cos(t*e),n=v/360,D=n/c,h=v/i/c;if(M.pixelsPerMeter=[h,-h,h],M.metersPerPixel=[1/h,-1/h,1/h],M.pixelsPerDegree=[n,-D,h],M.degreesPerPixel=[1/n,-1/D,1/h],a){var u=e*Math.tan(t*e)/c,f=n*u/2,m=v/i*u,_=m/D*h;M.pixelsPerDegree2=[0,-f,m],M.pixelsPerMeter2=[_,0,_],g&&(M.pixelsPerDegree2[1]=-M.pixelsPerDegree2[1],M.pixelsPerMeter2[1]=-M.pixelsPerMeter2[1])}return g&&(M.pixelsPerMeter[1]=-M.pixelsPerMeter[1],M.metersPerPixel[1]=-M.metersPerPixel[1],M.pixelsPerDegree[1]=-M.pixelsPerDegree[1],M.degreesPerPixel[1]=-M.degreesPerPixel[1]),M}
},{}],"PNjM":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoordinateUniform=exports.CoordinateSystem=void 0,exports.CoordinateSystem=e,function(e){e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET"}(e||(exports.CoordinateSystem=e={}));var r={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"};exports.CoordinateUniform=r;
},{}],"ClKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,s,a,o=P(require("@babel/runtime/helpers/initializerDefineProperty")),n=P(require("@babel/runtime/helpers/classCallCheck")),l=P(require("@babel/runtime/helpers/createClass")),c=P(require("@babel/runtime/helpers/applyDecoratedDescriptor")),u=P(require("@babel/runtime/helpers/initializerWarningHelper")),h=require("gl-matrix"),p=require("inversify"),m=require("../../types"),v=require("../../utils/project"),d=require("./ICoordinateSystemService");function P(e){return e&&e.__esModule?e:{default:e}}var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],g=(e=(0,p.injectable)(),t=(0,p.inject)(m.TYPES.ICameraService),e((i=a=function(){function e(){(0,n.default)(this,e),this.needRefresh=!0,(0,o.default)(this,"cameraService",s,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return(0,l.default)(e,[{key:"refresh",value:function(){var e=this.cameraService.getZoom(),t=this.cameraService.getZoomScale(),r=this.cameraService.getCenter(),i=(0,v.getDistanceScales)({latitude:r[1],zoom:e}),s=i.pixelsPerMeter,a=i.pixelsPerDegree;this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=s,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===d.CoordinateSystem.LNGLAT||this.coordinateSystem===d.CoordinateSystem.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===d.CoordinateSystem.LNGLAT_OFFSET?this.calculateLnglatOffset(r,e):this.coordinateSystem===d.CoordinateSystem.P20_OFFSET&&this.calculateLnglatOffset(r,e,t,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(e){this.coordinateSystem=e}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(e,t,r,i){var s=(0,v.getDistanceScales)({latitude:e[1],zoom:t,scale:r,flipY:i,highPrecision:!0}),a=s.pixelsPerMeter,o=s.pixelsPerDegree,n=s.pixelsPerDegree2,l=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),u=h.mat4.multiply([],c,l),p=this.cameraService.projectFlat([Math.fround(e[0]),Math.fround(e[1])],Math.pow(2,t));this.viewportCenterProjection=h.vec4.transformMat4([],[p[0],p[1],0,1],u),l=this.cameraService.getViewMatrixUncentered()||l,u=h.mat4.multiply([],c,l),u=h.mat4.multiply([],u,f),this.cameraService.setViewProjectionMatrix(u),this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=n}}]),e}(),s=(0,c.default)(i.prototype,"cameraService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=i))||r);exports.default=g;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","gl-matrix":"CPlc","inversify":"PR7M","../../types":"m6Ky","../../utils/project":"kLAK","./ICoordinateSystemService":"PNjM"}],"vhjd":[function(require,module,exports) {
var define;
var t;!function(e,i,n,r){"use strict";var s,o=["","webkit","Moz","MS","ms","o"],a=i.createElement("div"),h="function",u=Math.round,c=Math.abs,l=Date.now;function p(t,e,i){return setTimeout(y(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])}return e}:Object.assign;var m=d(function(t,e,i){for(var n=Object.keys(e),s=0;s<n.length;)(!i||i&&t[n[s]]===r)&&(t[n[s]]=e[n[s]]),s++;return t},"extend","Use `assign`."),g=d(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function T(t,e,i){var n,r=e.prototype;(n=t.prototype=Object.create(r)).constructor=t,n._super=r,i&&s(n,i)}function y(t,e){return function(){return t.apply(e,arguments)}}function E(t,e){return typeof t==h?t.apply(e&&e[0]||r,e):t}function I(t,e){return t===r?e:t}function A(t,e,i){v(b(e),function(e){t.addEventListener(e,i,!1)})}function _(t,e,i){v(b(e),function(e){t.removeEventListener(e,i,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function P(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];P(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function w(t,e){for(var i,n,s=e[0].toUpperCase()+e.slice(1),a=0;a<o.length;){if((n=(i=o[a])?i+s:e)in t)return n;a++}return r}var O=1;function R(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}var M="ontouchstart"in e,z=w(e,"PointerEvent")!==r,N=M&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),X=25,Y=1,F=2,W=4,q=8,k=1,H=2,L=4,U=8,V=16,j=H|L,G=U|V,Z=j|G,B=["x","y"],$=["clientX","clientY"];function J(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){E(t.options.enable,[t])&&i.handler(e)},this.init()}function K(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&Y&&n-s==0,a=e&(W|q)&&n-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=Q(e));s>1&&!i.firstMultiple?i.firstMultiple=Q(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,h=a?a.center:o.center,u=e.center=tt(n);e.timeStamp=l(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=rt(h,u),e.distance=nt(h,u),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Y&&s.eventType!==W||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=it(e.deltaX,e.deltaY);var p=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,v=n,nt(v[0],v[1],$)/nt(f[0],f[1],$)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],$)+rt(t[1],t[0],$)}(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,s,o,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=q&&(h>X||a.velocity===r)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=et(h,u,l);n=p.x,s=p.y,i=c(p.x)>c(p.y)?p.x:p.y,o=it(u,l),t.lastInterval=e}else i=a.velocity,n=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=s,e.direction=o}(i,e);var f,v;var d=t.element;C(e.srcEvent.target,d)&&(d=e.srcEvent.target);e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function Q(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:l(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:u(i/e),y:u(n/e)}}function et(t,e,i){return{x:e/t||0,y:i/t||0}}function it(t,e){return t===e?k:c(t)>=c(e)?t<0?H:L:e<0?U:V}function nt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function rt(t,e,i){i||(i=B);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(R(this.element),this.evWin,this.domHandler)}};var st={mousedown:Y,mousemove:F,mouseup:W},ot="mousedown",at="mousemove mouseup";function ht(){this.evEl=ot,this.evWin=at,this.pressed=!1,J.apply(this,arguments)}T(ht,J,{handler:function(t){var e=st[t.type];e&Y&&0===t.button&&(this.pressed=!0),e&F&&1!==t.which&&(e=W),this.pressed&&(e&W&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:Y,pointermove:F,pointerup:W,pointercancel:q,pointerout:q},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},lt="pointerdown",pt="pointermove pointerup pointercancel";function ft(){this.evEl=lt,this.evWin=pt,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(lt="MSPointerDown",pt="MSPointerMove MSPointerUp MSPointerCancel"),T(ft,J,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ut[n],s=ct[t.pointerType]||t.pointerType,o="touch"==s,a=P(e,t.pointerId,"pointerId");r&Y&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(W|q)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var vt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},dt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=dt,this.evWin=mt,this.started=!1,J.apply(this,arguments)}T(gt,J,{handler:function(t){var e=vt[t.type];if(e===Y&&(this.started=!0),this.started){var i=function(t,e){var i=D(t.touches),n=D(t.changedTouches);e&(W|q)&&(i=x(i.concat(n),"identifier",!0));return[i,n]}.call(this,t,e);e&(W|q)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Tt={touchstart:Y,touchmove:F,touchend:W,touchcancel:q},yt="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.targetIds={},J.apply(this,arguments)}T(Et,J,{handler:function(t){var e=Tt[t.type],i=function(t,e){var i=D(t.touches),n=this.targetIds;if(e&(Y|F)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=D(t.changedTouches),a=[],h=this.target;if(s=i.filter(function(t){return C(t.target,h)}),e===Y)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(W|q)&&delete n[o[r].identifier],r++;if(!a.length)return;return[x(s.concat(a),"identifier",!0),a]}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var It=2500,At=25;function _t(){J.apply(this,arguments);var t=y(this.handler,this);this.touch=new Et(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)},It)}}T(_t,J,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&Y?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(W|q)&&Ct.call(this,e)}).call(this,e,i);else if(r&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=At&&o<=At)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=w(a.style,"touchAction"),bt=St!==r,Pt="auto",Dt="manipulation",xt="none",wt="pan-x",Ot="pan-y",Rt=function(){if(!bt)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){"compute"==t&&(t=this.compute()),bt&&this.manager.element.style&&Rt[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){E(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,xt))return xt;var e=S(t,wt),i=S(t,Ot);if(e&&i)return xt;if(e||i)return e?wt:Ot;if(S(t,Dt))return Dt;return Pt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=S(n,xt)&&!Rt[xt],s=S(n,Ot)&&!Rt[Ot],o=S(n,wt)&&!Rt[wt];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&i&j||o&&i&G?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,Nt=2,Xt=4,Yt=8,Ft=Yt,Wt=16;function qt(t){this.options=s({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function kt(t){return t&Wt?"cancel":t&Yt?"end":t&Xt?"move":t&Nt?"start":""}function Ht(t){return t==V?"down":t==U?"up":t==H?"left":t==L?"right":""}function Lt(t,e){var i=e.manager;return i?i.get(t):t}function Ut(){qt.apply(this,arguments)}function Vt(){Ut.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Ut.apply(this,arguments)}function Gt(){qt.apply(this,arguments),this._timer=null,this._input=null}function Zt(){Ut.apply(this,arguments)}function Bt(){Ut.apply(this,arguments)}function $t(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Jt(t,e){return(e=e||{}).recognizers=I(e.recognizers,Jt.defaults.preset),new Kt(t,e)}qt.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Lt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)?this:(t=Lt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=Lt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Lt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<Yt&&n(e.options.event+kt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=Yt&&n(e.options.event+kt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|zt)))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!E(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|Wt|32)&&(this.state=zt),this.state=this.process(e),this.state&(Nt|Xt|Yt|Wt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},T(Ut,qt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Nt|Xt),r=this.attrTest(t);return n&&(i&q||!r)?e|Wt:n||r?i&W?e|Yt:e&Nt?e|Xt:Nt:32}}),T(Vt,Ut,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&j&&e.push(Ot),t&G&&e.push(wt),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&j?(r=0===s?k:s<0?H:L,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?k:o<0?U:V,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return Ut.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ht(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),T(jt,Ut,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),T(Gt,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(W|q)&&!r)this.reset();else if(t.eventType&Y)this.reset(),this._timer=p(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&W)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&W?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}}),T(Zt,Ut,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),T(Bt,Ut,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:j|G,pointers:1},getTouchAction:function(){return Vt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(j|G)?e=t.overallVelocity:i&j?e=t.overallVelocityX:i&G&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&W},emit:function(t){var e=Ht(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),T($t,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Dt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Y&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=W)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ft,this.tryEmit()},e.interval,this),Nt):Ft}return 32},failTimeout:function(){return this._timer=p(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Jt.VERSION="2.0.7",Jt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Zt,{enable:!1}],[jt,{enable:!1},["rotate"]],[Bt,{direction:j}],[Vt,{direction:j},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var i;this.options=s({},Jt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(z?ft:N?Et:M?_t:ht))(i,K),this.touchAction=new Mt(this,this.options.touchAction),Qt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var i,n=t.element;n.style&&(v(t.options.cssProps,function(r,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Ft)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(Nt|Xt|Yt)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof qt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=P(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return v(b(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return v(b(t),function(t){e?i[t]&&i[t].splice(P(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=i.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Jt,{INPUT_START:Y,INPUT_MOVE:F,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:zt,STATE_BEGAN:Nt,STATE_CHANGED:Xt,STATE_ENDED:Yt,STATE_RECOGNIZED:Ft,STATE_CANCELLED:Wt,STATE_FAILED:32,DIRECTION_NONE:k,DIRECTION_LEFT:H,DIRECTION_RIGHT:L,DIRECTION_UP:U,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:j,DIRECTION_VERTICAL:G,DIRECTION_ALL:Z,Manager:Kt,Input:J,TouchAction:Mt,TouchInput:Et,MouseInput:ht,PointerEventInput:ft,TouchMouseInput:_t,SingleTouchInput:gt,Recognizer:qt,AttrRecognizer:Ut,Tap:$t,Pan:Vt,Swipe:Bt,Pinch:jt,Rotate:Zt,Press:Gt,on:A,off:_,each:v,merge:g,extend:m,assign:s,inherit:T,bindFn:y,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Jt,"function"==typeof t&&t.amd?t(function(){return Jt}):"undefined"!=typeof module&&module.exports?module.exports=Jt:e.Hammer=Jt}(window,document);
},{}],"Op3C":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.InteractionEvent=void 0,exports.InteractionEvent=e,function(e){e.Hover="hover",e.Click="click",e.Select="select",e.Active="active"}(e||(exports.InteractionEvent=e={}));
},{}],"ceFR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,n,a,o,l,s=H(require("@babel/runtime/helpers/initializerDefineProperty")),u=H(require("@babel/runtime/helpers/classCallCheck")),v=H(require("@babel/runtime/helpers/createClass")),c=H(require("@babel/runtime/helpers/possibleConstructorReturn")),m=H(require("@babel/runtime/helpers/getPrototypeOf")),d=H(require("@babel/runtime/helpers/assertThisInitialized")),p=H(require("@babel/runtime/helpers/inherits")),h=H(require("@babel/runtime/helpers/applyDecoratedDescriptor")),f=H(require("@babel/runtime/helpers/initializerWarningHelper")),b=H(require("eventemitter3")),g=H(require("hammerjs")),y=require("inversify"),E=require("../../types"),L=require("./IInteractionService");function H(e){return e&&e.__esModule?e:{default:e}}var q=(e=(0,y.injectable)(),t=(0,y.inject)(E.TYPES.IMapService),r=(0,y.inject)(E.TYPES.ILogService),e((n=l=function(e){function t(){var e,r;(0,u.default)(this,t);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return r=(0,c.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),(0,s.default)(r,"mapService",a,(0,d.default)(r)),(0,s.default)(r,"logger",o,(0,d.default)(r)),r.hammertime=void 0,r.onHover=function(e){var t=e.x,i=e.y,n=e.type,a=r.mapService.getMapContainer();if(a){var o=a.getBoundingClientRect(),l=o.top;t-=o.left,i-=l}var s=r.mapService.containerToLngLat([t,i]);r.emit(L.InteractionEvent.Hover,{x:t,y:i,lngLat:s,type:n})},r}return(0,p.default)(t,e),(0,v.default)(t,[{key:"init",value:function(){this.addEventListenerOnMap()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(L.InteractionEvent.Hover)}},{key:"triggerHover",value:function(e){var t=e.x,r=e.y;this.emit(L.InteractionEvent.Hover,{x:t,y:r})}},{key:"triggerSelect",value:function(e){this.emit(L.InteractionEvent.Select,{featureId:e})}},{key:"triggerActive",value:function(e){this.emit(L.InteractionEvent.Active,{featureId:e})}},{key:"addEventListenerOnMap",value:function(){var e=this.mapService.getMapContainer();if(e){var t=new g.default(e);t.get("pan").set({direction:g.default.DIRECTION_ALL}),t.get("pinch").set({enable:!0}),e.addEventListener("mousemove",this.onHover),e.addEventListener("click",this.onHover),e.addEventListener("mousedown",this.onHover),e.addEventListener("mouseup",this.onHover),e.addEventListener("dblclick",this.onHover),e.addEventListener("contextmenu",this.onHover),this.hammertime=t,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var e=this.mapService.getMapContainer();e&&(e.removeEventListener("mousemove",this.onHover),e.removeEventListener("click",this.onHover),e.removeEventListener("mousedown",this.onHover),e.removeEventListener("mouseup",this.onHover),e.removeEventListener("dblclick",this.onHover),e.removeEventListener("contextmenu",this.onHover))}}]),t}(b.default),a=(0,h.default)(n.prototype,"mapService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,h.default)(n.prototype,"logger",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=n))||i);exports.default=q;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","eventemitter3":"JJlS","hammerjs":"vhjd","inversify":"PR7M","../../types":"m6Ky","./IInteractionService":"Op3C"}],"av5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){function i(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,e.default)(this,i),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=t}return(0,t.default)(i,[{key:"start",value:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),i}();exports.default=r;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"AsFq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,n,i,a,s,l,u=p(require("@babel/runtime/helpers/initializerDefineProperty")),o=p(require("@babel/runtime/helpers/classCallCheck")),c=p(require("@babel/runtime/helpers/createClass")),d=p(require("@babel/runtime/helpers/applyDecoratedDescriptor")),h=p(require("@babel/runtime/helpers/initializerWarningHelper")),f=require("inversify"),y=require("../../types"),v=p(require("../../utils/clock"));function p(e){return e&&e.__esModule?e:{default:e}}var b=(e=(0,f.injectable)(),r=(0,f.inject)(y.TYPES.IRendererService),t=(0,f.inject)(y.TYPES.IGlobalConfigService),e((i=l=function(){function e(){(0,o.default)(this,e),this.clock=new v.default,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,this.alreadyInRendering=!1,(0,u.default)(this,"renderService",a,this),(0,u.default)(this,"configService",s,this)}return(0,c.default)(e,[{key:"add",value:function(e){this.layers.push(e)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(e){e.inited||e.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(e){return this.layers.find(function(r){return r.name===e})}},{key:"remove",value:function(e){var r=this.layers.indexOf(e);r>-1&&this.layers.splice(r,1),e.emit("remove",null),e.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.layers.filter(function(e){return e.isVisible()}).forEach(function(e){e.hooks.beforeRenderData.call(!0),e.hooks.beforeRender.call(),e.render(),e.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(e,r){return e.zIndex-r.zIndex}),this.renderLayers()}},{key:"destroy",value:function(){this.layers.forEach(function(e){return e.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){0==this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0==--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),e}(),a=(0,d.default)(i.prototype,"renderService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,d.default)(i.prototype,"configService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=i))||n);exports.default=b;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","inversify":"PR7M","../../types":"m6Ky","../../utils/clock":"av5C"}],"t2zx":[function(require,module,exports) {
function e(e,n){if(null==e)return{};var r,t,u={},f=Object.keys(e);for(t=0;t<f.length;t++)r=f[t],n.indexOf(r)>=0||(u[r]=e[r]);return u}module.exports=e;
},{}],"U8F3":[function(require,module,exports) {
var e=require("./objectWithoutPropertiesLoose");function r(r,t){if(null==r)return{};var o,n,l=e(r,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(r);for(n=0;n<p.length;n++)o=p[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(r,o)&&(l[o]=r[o])}return l}module.exports=r;
},{"./objectWithoutPropertiesLoose":"t2zx"}],"Hbi5":[function(require,module,exports) {
"use strict";var E;Object.defineProperty(exports,"__esModule",{value:!0}),exports.gl=void 0,exports.gl=E,function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"}(E||(exports.gl=E={}));
},{}],"gGJU":[function(require,module,exports) {
function n(n){return null==n}module.exports=n;
},{}],"LXdf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/classCallCheck")),t=r(require("@babel/runtime/helpers/createClass")),i=r(require("lodash/isNil"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function r(t){var i=this;(0,e.default)(this,r),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:1/0},this.vertexAttribute=void 0,this.defaultCallback=function(e){var t;return 0===e.length?(null===(t=i.scale)||void 0===t?void 0:t.values)||[]:e.map(function(e,t){var r;return(0,(null===(r=i.scale)||void 0===r?void 0:r.scalers)[t].func)(e)})},this.setProps(t)}return(0,t.default)(r,[{key:"setProps",value:function(e){Object.assign(this,e)}},{key:"mapping",value:function(e){var t;if(null===(t=this.scale)||void 0===t?void 0:t.callback){var r,s=null===(r=this.scale)||void 0===r?void 0:r.callback(e);if(!(0,i.default)(s))return[s]}return this.defaultCallback(e)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),r}();exports.default=s;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","lodash/isNil":"gGJU"}],"O09z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,u,a,n,s=m(require("@babel/runtime/helpers/objectWithoutProperties")),l=m(require("@babel/runtime/helpers/toConsumableArray")),f=m(require("@babel/runtime/helpers/initializerDefineProperty")),o=m(require("@babel/runtime/helpers/classCallCheck")),c=m(require("@babel/runtime/helpers/createClass")),b=m(require("@babel/runtime/helpers/applyDecoratedDescriptor")),p=m(require("@babel/runtime/helpers/initializerWarningHelper")),d=m(require("@babel/runtime/helpers/defineProperty")),h=require("inversify"),v=require("../../types"),y=require("../renderer/gl"),g=m(require("./StyleAttribute"));function m(e){return e&&e.__esModule?e:{default:e}}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=(e={},(0,d.default)(e,y.gl.FLOAT,4),(0,d.default)(e,y.gl.UNSIGNED_BYTE,1),(0,d.default)(e,y.gl.UNSIGNED_SHORT,2),e),E=0,P=(t=(0,h.injectable)(),r=(0,h.inject)(v.TYPES.IRendererService),t((u=n=function(){function e(){(0,o.default)(this,e),this.attributesAndIndices=void 0,(0,f.default)(this,"rendererService",a,this),this.attributes=[],this.triangulation=void 0,this.c=E++,this.featureLayout={sizePerElement:0,elements:[]}}return(0,c.default)(e,[{key:"registerStyleAttribute",value:function(e){var t=this.getLayerStyleAttribute(e.name||"");return t?t.setProps(e):(t=new g.default(e),this.attributes.push(t)),t}},{key:"updateStyleAttribute",value:function(e,t,r){var i=this.getLayerStyleAttribute(e);i||(i=this.registerStyleAttribute(O({},t,{name:e})));var u=t.scale;u&&i&&(i.scale=u,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,r&&r.featureRange&&(i.featureRange=r.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(e){return this.attributes.find(function(t){return t.name===e})}},{key:"updateAttributeByFeatureRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,u=this.attributes.find(function(t){return t.name===e});if(u&&u.descriptor){var a=u.descriptor,n=a.update,s=a.buffer,f=a.size,o=void 0===f?0:f,c=S[s.type||y.gl.FLOAT];if(n){var b=this.featureLayout,p=b.elements,d=b.sizePerElement,h=p.slice(r,i);if(!h.length)return;var v=h[0].offset*o*c,g=h.map(function(e,r){for(var i=e.featureIdx,u=e.vertices,a=e.normals,s=u.length/d,f=[],o=0;o<s;o++){var c=a?a.slice(3*o,3*o+3):[];f.push.apply(f,(0,l.default)(n(t[i],i,u.slice(o*d,o*d+d),r,c)))}return f}).reduce(function(e,t){return e.push.apply(e,(0,l.default)(t)),e},[]);u.vertexAttribute.updateBuffer({data:g,offset:v})}}}},{key:"createAttributesAndIndices",value:function(e,t){var r=this;t&&(this.triangulation=t);var i=this.attributes.map(function(e){return e.resetDescriptor(),e.descriptor}),u=0,a=[],n=[],f=[],o=3;e.forEach(function(e,t){var s=r.triangulation(e),c=s.indices,b=s.vertices,p=s.normals,d=s.size;c.forEach(function(e){n.push(e+u)}),b.forEach(function(e){a.push(e)}),p&&p.forEach(function(e){f.push(e)}),o=d;var h=b.length/d;r.featureLayout.sizePerElement=o,r.featureLayout.elements.push({featureIdx:t,vertices:b,normals:p,offset:u}),u+=h;for(var v=function(r){i.forEach(function(i,u){if(i&&i.update){var a,n=(null==p?void 0:p.slice(3*r,3*r+3))||[];(a=i.buffer.data).push.apply(a,(0,l.default)(i.update(e,t,b.slice(r*d,r*d+d),r,n)))}})},y=0;y<h;y++)v(y)});var c=this.rendererService,b=c.createAttribute,p=c.createBuffer,d=c.createElements,h={};i.forEach(function(e,t){if(e){var i=e.buffer,u=(e.update,e.name,(0,s.default)(e,["buffer","update","name"])),a=b(O({buffer:p(i)},u));h[e.name||""]=a,r.attributes[t].vertexAttribute=a}});var v=d({data:n,type:y.gl.UNSIGNED_INT,count:n.length});return this.attributesAndIndices={attributes:h,elements:v},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){this.attributes.forEach(function(e){e.vertexAttribute&&e.vertexAttribute.destroy()}),this.attributes=[]}}]),e}(),a=(0,b.default)(u.prototype,"rendererService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=u))||i);exports.default=P;
},{"@babel/runtime/helpers/objectWithoutProperties":"U8F3","@babel/runtime/helpers/toConsumableArray":"Fhqp","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@babel/runtime/helpers/defineProperty":"IxO8","inversify":"PR7M","../../types":"m6Ky","../renderer/gl":"Hbi5","./StyleAttribute":"LXdf"}],"xLw6":[function(require,module,exports) {
"use strict";function t(o){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?exports.default=t=function(t){return typeof t}:exports.default=t=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"EqAc":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=n(require("@babel/runtime/helpers/esm/typeof"));function n(e){return e&&e.__esModule?e:{default:e}}function t(n){if("undefined"!=typeof window&&"object"===(0,r.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,r.default)(e.versions)&&Boolean(e.versions.electron))return!0;var t="object"===("undefined"==typeof navigator?"undefined":(0,r.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,o=n||t;return!!(o&&o.indexOf("Electron")>=0)}
},{"@babel/runtime/helpers/esm/typeof":"xLw6","process":"kpD3"}],"i60V":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.isBrowserMainThread=o;var r=u(require("@babel/runtime/helpers/esm/typeof")),t=u(require("./is-electron"));function u(e){return e&&e.__esModule?e:{default:e}}function n(){return!("object"===(void 0===e?"undefined":(0,r.default)(e))&&"[object process]"===String(e)&&!1)||(0,t.default)()}function o(){return n()&&"undefined"!=typeof document}
},{"@babel/runtime/helpers/esm/typeof":"xLw6","./is-electron":"EqAc","process":"kpD3"}],"z2pG":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.console=exports.process=exports.document=exports.global=exports.window=exports.self=void 0;var s=r(require("@babel/runtime/helpers/esm/typeof"));function r(e){return e&&e.__esModule?e:{default:e}}var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===o?"undefined":(0,s.default)(o))&&o},n=t.self||t.window||t.global;exports.self=n;var d=t.window||t.self||t.global;exports.window=d;var l=t.global||t.self||t.window;exports.global=l;var p=t.document||{};exports.document=p;var u=t.process||{};exports.process=u;var f=console;exports.console=f;
},{"@babel/runtime/helpers/esm/typeof":"xLw6","process":"kpD3"}],"YLz2":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return n.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return n.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return n.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return n.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return n.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return n.console}}),exports.isBrowser=exports.VERSION=void 0;var t=o(require("../env/is-browser")),n=require("../env/globals");function o(e){return e&&e.__esModule?e:{default:e}}var u="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";exports.VERSION=u;var s=(0,t.default)();exports.isBrowser=s;
},{"../env/is-browser":"i60V","../env/globals":"z2pG","process":"kpD3"}],"IyIv":[function(require,module,exports) {

"use strict";var l=require("./utils/globals");l.global.probe={};
},{"./utils/globals":"YLz2"}],"vw6u":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"bG0g":[function(require,module,exports) {
"use strict";function t(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"gdEH":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to spread non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Qv3s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=u(require("./arrayWithoutHoles")),r=u(require("./iterableToArray")),t=u(require("./nonIterableSpread"));function u(e){return e&&e.__esModule?e:{default:e}}function a(u){return(0,e.default)(u)||(0,r.default)(u)||(0,t.default)()}
},{"./arrayWithoutHoles":"vw6u","./iterableToArray":"bG0g","./nonIterableSpread":"gdEH"}],"gpd2":[function(require,module,exports) {
"use strict";function e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"VEjx":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"l5p4":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"rWQ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/esm/classCallCheck")),e=i(require("@babel/runtime/helpers/esm/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){try{var e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch(s){return null}}var r=function(){function i(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,t.default)(this,i),this.storage=s(n),this.id=e,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return(0,e.default)(i,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:"updateConfiguration",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:"_loadConfiguration",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),i}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4"}],"l6u9":[function(require,module,exports) {
"use strict";function t(t){return t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s")}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(t).concat(" ".repeat(r))}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.isInteger,n=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return o(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return n?"0":"0.";if(n)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}function o(t,e){for(var r=e.maxElts,o=void 0===r?16:r,a=e.size,c=void 0===a?1:a,i="[",s=0;s<t.length&&s<o;++s)s>0&&(i+=",".concat(s%c==0?" ":"")),i+=n(t[s],e);var u=t.length>o?"...":"]";return"".concat(i).concat(u)}function a(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,o=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(r=Math.min(r,n/t.width));var a=t.width*r,c=t.height*r,i=["font-size:1px;","padding:".concat(Math.floor(c/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(c,"px;"),"background:url(".concat(o,");"),"background-size:".concat(a,"px ").concat(c,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),i]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatTime=t,exports.leftPad=e,exports.rightPad=r,exports.formatValue=n,exports.formatImage=a;
},{}],"kBB3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addColor=r,exports.COLOR=void 0;var e=require("./globals"),t={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function o(e){return"string"==typeof e?t[e.toUpperCase()]||t.WHITE:e}function r(t,r,E){return e.isBrowser||"string"!=typeof t||(r&&(r=o(r),t="[".concat(r,"m").concat(t,"[39m")),E&&(r=o(E),t="[".concat(E+10,"m").concat(t,"[49m"))),t}exports.COLOR=t;
},{"./globals":"YLz2"}],"pF1O":[function(require,module,exports) {
"use strict";function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),o=!0,i=!1,u=void 0;try{for(var c,f=function(){var r=c.value;"function"==typeof t[r]&&(e.find(function(t){return r===t})||(t[r]=t[r].bind(t)))},a=n[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)f()}catch(l){i=!0,u=l}finally{try{o||null==a.return||a.return()}finally{if(i)throw u}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.autobind=t;
},{}],"RHpI":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"Assertion failed")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"cH1b":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./globals");function r(){var r;if(e.isBrowser&&e.window.performance)r=e.window.performance.now();else if(e.process.hrtime){var o=e.process.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}
},{"./globals":"YLz2"}],"CEVT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArguments=k,exports.default=void 0;var e=f(require("@babel/runtime/helpers/esm/typeof")),t=f(require("@babel/runtime/helpers/esm/toConsumableArray")),o=f(require("@babel/runtime/helpers/esm/defineProperty")),n=f(require("@babel/runtime/helpers/esm/classCallCheck")),r=f(require("@babel/runtime/helpers/esm/createClass")),i=require("../utils/globals"),a=f(require("../utils/local-storage")),s=require("../utils/formatters"),u=require("../utils/color"),l=require("../utils/autobind"),c=f(require("../utils/assert")),g=f(require("../utils/hi-res-timestamp"));function f(e){return e&&e.__esModule?e:{default:e}}var d={debug:i.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},v={enabled:!0,level:0};function h(){}var m={},p={once:!0};function y(e){for(var t in e)for(var o in e[t])return o||"untitled";return"empty"}var b=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;(0,n.default)(this,e),this.id=t,this.VERSION=i.VERSION,this._startTs=(0,g.default)(),this._deltaTs=(0,g.default)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new a.default("__probe-".concat(this.id,"__"),v),this.userData={},this.timeStamp("".concat(this.id," started")),(0,l.autobind)(this),Object.seal(this)}return(0,r.default)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number(((0,g.default)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,g.default)()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){(0,c.default)(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,d.warn,arguments,p)}},{key:"error",value:function(e){return this._getLogFunction(0,e,d.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,d.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,d.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,d.debug||d.info,arguments,p)}},{key:"table",value:function(e,t,o){return t?this._getLogFunction(e,t,console.table||h,o&&[o],{tag:y(t)}):h}},{key:"image",value:function(e){var t=e.logLevel,o=e.priority,n=e.image,r=e.message,a=void 0===r?"":r,s=e.scale,u=void 0===s?1:s;return this._shouldLog(t||o)?i.isBrowser?E({image:n,message:a,scale:u}):w({image:n,message:a,scale:u}):h}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration((0,o.default)({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||h)}},{key:"group",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},n=(o=k({logLevel:e,message:t,opts:o})).collapsed;return o.method=(n?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}},{key:"groupCollapsed",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},o,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||h)}},{key:"withGroup",value:function(e,t,o){this.group(e,t)();try{o()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=_(e)}},{key:"_getLogFunction",value:function(e,o,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var a;i=k({logLevel:e,message:o,args:r,opts:i}),n=n||i.method,(0,c.default)(n),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=(0,g.default)();var s=i.tag||i.message;if(i.once){if(m[s])return h;m[s]=(0,g.default)()}return o=L(this.id,i.message,i),(a=n).bind.apply(a,[console,o].concat((0,t.default)(i.args)))}return h}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function _(t){if(!t)return 0;var o;switch((0,e.default)(t)){case"number":o=t;break;case"object":o=t.logLevel||t.priority||0;break;default:return 0}return(0,c.default)(Number.isFinite(o)&&o>=0),o}function k(t){var o=t.logLevel,n=t.message;t.logLevel=_(o);for(var r=t.args?Array.from(t.args):[];r.length&&r.shift()!==n;);switch(t.args=r,(0,e.default)(o)){case"string":case"function":void 0!==n&&r.unshift(n),t.message=o;break;case"object":Object.assign(t,o)}"function"==typeof t.message&&(t.message=t.message());var i=(0,e.default)(t.message);return(0,c.default)("string"===i||"object"===i),Object.assign(t,t.opts)}function L(e,t,o){if("string"==typeof t){var n=o.time?(0,s.leftPad)((0,s.formatTime)(o.total)):"";t=o.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=(0,u.addColor)(t,o.color,o.background)}return t}function w(e){var t=e.image,o=(e.message,e.scale),n=void 0===o?1:o,r=null;try{r=module.require("asciify-image")}catch(i){}return r?function(){return r(t,{fit:"box",width:"".concat(Math.round(80*n),"%")}).then(function(e){return console.log(e)})}:h}function E(e){var o=e.image,n=e.message,r=void 0===n?"":n,i=e.scale,a=void 0===i?1:i;if("string"==typeof o){var u=new Image;return u.onload=function(){var e,o=(0,s.formatImage)(u,r,a);(e=console).log.apply(e,(0,t.default)(o))},u.src=o,h}var l,c=o.nodeName||"";if("img"===c.toLowerCase())return(l=console).log.apply(l,(0,t.default)((0,s.formatImage)(o,r,a))),h;if("canvas"===c.toLowerCase()){var g=new Image;return g.onload=function(){var e;return(e=console).log.apply(e,(0,t.default)((0,s.formatImage)(g,r,a)))},g.src=o.toDataURL(),h}return h}exports.default=b,b.VERSION=i.VERSION;
},{"@babel/runtime/helpers/esm/typeof":"xLw6","@babel/runtime/helpers/esm/toConsumableArray":"Qv3s","@babel/runtime/helpers/esm/defineProperty":"gpd2","@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4","../utils/globals":"YLz2","../utils/local-storage":"rWQ3","../utils/formatters":"l6u9","../utils/color":"kBB3","../utils/autobind":"pF1O","../utils/assert":"RHpI","../utils/hi-res-timestamp":"cH1b"}],"JBXe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=o,exports.default=t;var e=require("./globals"),r=i(require("./is-browser")),n=i(require("./is-electron"));function i(e){return e&&e.__esModule?e:{default:e}}function o(){return void 0!==e.window.orientation}function t(i){if(!i&&!(0,r.default)())return"Node";if((0,n.default)(i))return"Electron";var o="undefined"!=typeof navigator?navigator:{},t=i||o.userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";var u=-1!==t.indexOf("MSIE "),d=-1!==t.indexOf("Trident/");return u||d?"IE":e.window.chrome?"Chrome":e.window.safari?"Safari":e.window.mozInnerScreenX?"Firefox":"Unknown"}
},{"./globals":"z2pG","./is-browser":"i60V","./is-electron":"EqAc"}],"lmzz":[function(require,module,exports) {
var process = require("process");
var e=require("process");function r(){var r;if("undefined"!=typeof window&&window.performance)r=window.performance.now();else if(void 0!==e&&e.hrtime){var o=e.hrtime();r=1e3*o[0]+o[1]/1e6}else r=Date.now();return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{"process":"kpD3"}],"bTGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("@babel/runtime/helpers/esm/classCallCheck")),e=s(require("@babel/runtime/helpers/esm/createClass")),i=s(require("../utils/hi-res-timestamp"));function s(t){return t&&t.__esModule?t:{default:t}}var n=function(){function s(e,i){(0,t.default)(this,s),this.name=e,this.type=i,this.sampleSize=1,this.reset()}return(0,e.default)(s,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=(0,i.default)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime((0,i.default)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),s}();exports.default=n;
},{"@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4","../utils/hi-res-timestamp":"lmzz"}],"oMsU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("@babel/runtime/helpers/esm/classCallCheck")),e=a(require("@babel/runtime/helpers/esm/createClass")),s=a(require("./stat"));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){function a(e){var s=e.id,r=e.stats;(0,t.default)(this,a),this.id=s,this.stats={},this._initializeStats(r),Object.seal(this)}return(0,e.default)(a,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach(function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}},{key:"_initializeStats",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){return t._getOrCreate(e)})}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,a=t.type;return this.stats[e]||(t instanceof s.default?this.stats[e]=t:this.stats[e]=new s.default(e,a)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),a}();exports.default=r;
},{"@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4","./stat":"bTGq"}],"UVil":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"_getHiResTimestamp",{enumerable:!0,get:function(){return r.default}});var e=u(require("./lib/stats")),t=u(require("./lib/stat")),r=u(require("./utils/hi-res-timestamp"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./lib/stats":"oMsU","./lib/stat":"bTGq","./utils/hi-res-timestamp":"lmzz"}],"z0g1":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"VERSION",{enumerable:!0,get:function(){return n.VERSION}}),Object.defineProperty(exports,"self",{enumerable:!0,get:function(){return o.self}}),Object.defineProperty(exports,"window",{enumerable:!0,get:function(){return o.window}}),Object.defineProperty(exports,"global",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(exports,"document",{enumerable:!0,get:function(){return o.document}}),Object.defineProperty(exports,"process",{enumerable:!0,get:function(){return o.process}}),Object.defineProperty(exports,"console",{enumerable:!0,get:function(){return o.console}}),Object.defineProperty(exports,"isBrowser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"isBrowserMainThread",{enumerable:!0,get:function(){return u.isBrowserMainThread}}),Object.defineProperty(exports,"getBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"isMobile",{enumerable:!0,get:function(){return i.isMobile}}),Object.defineProperty(exports,"isElectron",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"assert",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"COLOR",{enumerable:!0,get:function(){return s.COLOR}}),Object.defineProperty(exports,"addColor",{enumerable:!0,get:function(){return s.addColor}}),Object.defineProperty(exports,"leftPad",{enumerable:!0,get:function(){return f.leftPad}}),Object.defineProperty(exports,"rightPad",{enumerable:!0,get:function(){return f.rightPad}}),Object.defineProperty(exports,"autobind",{enumerable:!0,get:function(){return c.autobind}}),Object.defineProperty(exports,"LocalStorage",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"getHiResTimestamp",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Stats",{enumerable:!0,get:function(){return d.Stats}}),Object.defineProperty(exports,"Stat",{enumerable:!0,get:function(){return d.Stat}}),exports.default=void 0,require("./init");var t=y(require("./lib/log")),n=require("./utils/globals"),o=require("./env/globals"),u=O(require("./env/is-browser")),i=O(require("./env/get-browser")),a=y(require("./env/is-electron")),l=y(require("./utils/assert")),s=require("./utils/color"),f=require("./utils/formatters"),c=require("./utils/autobind"),p=y(require("./utils/local-storage")),b=y(require("./utils/hi-res-timestamp")),d=require("@probe.gl/stats");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function y(e){return e&&e.__esModule?e:{default:e}}var P=new t.default({id:"probe.gl"});exports.default=P;
},{"./init":"IyIv","./lib/log":"CEVT","./utils/globals":"YLz2","./env/globals":"z2pG","./env/is-browser":"i60V","./env/get-browser":"JBXe","./env/is-electron":"EqAc","./utils/assert":"RHpI","./utils/color":"kBB3","./utils/formatters":"l6u9","./utils/autobind":"pF1O","./utils/local-storage":"rWQ3","./utils/hi-res-timestamp":"cH1b","@probe.gl/stats":"UVil","process":"kpD3"}],"PphG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,u=a(require("@babel/runtime/helpers/classCallCheck")),n=a(require("@babel/runtime/helpers/createClass")),t=require("inversify"),i=require("probe.gl");function a(e){return e&&e.__esModule?e:{default:e}}var l=new i.Log({id:"L7"}).enable(!1);l.priority=5;var o=(e=(0,t.injectable)())(r=function(){function e(){(0,u.default)(this,e)}return(0,n.default)(e,[{key:"error",value:function(e){l.error(e)()}},{key:"warn",value:function(e){l.warn(e)()}},{key:"info",value:function(e){l.info(3,e)()}},{key:"debug",value:function(e){l.probe(4,e)()}}]),e}())||r;exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M","probe.gl":"z0g1"}],"QVnC":[function(require,module,exports) {
var t=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={};function v(){}function d(){}function g(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,L=w&&w(w(G([])));L&&L!==e&&n.call(L,i)&&(m=L);var x=g.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function b(t){var r;this._invoke=function(e,o){function i(){return new Promise(function(r,i){!function r(e,o,i,a){var c=h(t[e],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&n.call(f,"__await")?Promise.resolve(f.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(f).then(function(t){u.value=t,i(u)},function(t){return r("throw",t,i,a)})}a(c.arg)}(e,o,r,i)})}return r=r?r.then(i,i):i()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}return d.prototype=x.constructor=g,g.constructor=d,g[c]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(r,e,n,o){var i=new b(u(r,e,n,o));return t.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}
},{}],"PMvg":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"QVnC"}],"agGE":[function(require,module,exports) {
function n(n,t,o,r,e,i,u){try{var c=n[i](u),v=c.value}catch(a){return void o(a)}c.done?t(v):Promise.resolve(v).then(r,e)}function t(t){return function(){var o=this,r=arguments;return new Promise(function(e,i){var u=t.apply(o,r);function c(t){n(u,e,i,c,v,"next",t)}function v(t){n(u,e,i,c,v,"throw",t)}c(void 0)})}}module.exports=t;
},{}],"MZRW":[function(require,module,exports) {
function e(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame(function(){var i=t.__resizeTrigger__,r=i&&i.__resizeListeners__;r&&r.forEach(function(t){t.call(i,e)})})}var t=function(t,i){var r,_=this.document,n=_.attachEvent;if("undefined"!=typeof navigator&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],n)t.__resizeTrigger__=t,t.attachEvent("onresize",e);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var s=t.__resizeTrigger__=_.createElement("object");s.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),s.setAttribute("class","resize-sensor"),s.setAttribute("tabindex","-1"),s.__resizeElement__=t,s.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",e)},s.type="text/html",r&&t.appendChild(s),s.data="about:blank",r||t.appendChild(s)}t.__resizeListeners__.push(i)};module.exports="undefined"==typeof window?t:t.bind(window),module.exports.unbind=function(t,i){var r=document.attachEvent,_=t.__resizeListeners__||[];if(i){var n=_.indexOf(i);-1!==n&&_.splice(n,1)}else _=t.__resizeListeners__=[];if(!_.length){if(r)t.detachEvent("onresize",e);else if(t.__resizeTrigger__){var s=t.__resizeTrigger__.contentDocument,a=s&&s.defaultView;a&&(a.removeEventListener("resize",e),delete a.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}};
},{}],"Hc8y":[function(require,module,exports) {
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],"HAnN":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],"hhHb":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,u=o.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=u)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<u;c=o[++n])h(c)||!S(c)?s+=" "+c:s+=" "+i(c);return s},exports.deprecate=function(t,r){if(void 0!==e&&!0===e.noDeprecation)return t;if(void 0===e)return function(){return exports.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),p(r,e,r.depth)}function u(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&P(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),u=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(t);if(0===i.length){if(P(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(z(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return f(t)}var b,h="",m=!1,x=["{","}"];(d(t)&&(m=!0,x=["[","]"]),P(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return w(t)&&(h=" "+RegExp.prototype.toString.call(t)),z(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+f(t)),0!==i.length||m&&0!=t.length?r<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),b=m?a(e,t,r,u,i):i.map(function(n){return y(e,t,r,u,n,m)}),e.seen.pop(),g(b,h,x)):x[0]+h+x[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return x(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,r,n,o){for(var i=[],u=0,s=t.length;u<s;++u)A(t,String(u))?i.push(y(e,t,r,n,String(u),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(y(e,t,r,n,o,!0))}),i}function y(e,t,r,n,o,i){var u,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,o)||(u="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),j(u)){if(i&&o.match(/^\d+$/))return s;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+s}function g(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return null==e}function x(e){return"number"==typeof e}function v(e){return"string"==typeof e}function O(e){return"symbol"==typeof e}function j(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===T(e)}function S(e){return"object"==typeof e&&null!==e}function z(e){return S(e)&&"[object Date]"===T(e)}function E(e){return S(e)&&("[object Error]"===T(e)||e instanceof Error)}function P(e){return"function"==typeof e}function D(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(t){if(j(n)&&(n=""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=e.pid;o[t]=function(){var e=exports.format.apply(exports,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=b,exports.isNull=h,exports.isNullOrUndefined=m,exports.isNumber=x,exports.isString=v,exports.isSymbol=O,exports.isUndefined=j,exports.isRegExp=w,exports.isObject=S,exports.isDate=z,exports.isError=E,exports.isFunction=P,exports.isPrimitive=D,exports.isBuffer=require("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",k(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var J="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function H(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');function n(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};r.apply(this,t).then(function(t){e.nextTick(u,null,t)},function(t){e.nextTick(R,t,u)})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,t(r)),n}exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(J&&e[J]){var r;if("function"!=typeof(r=e[J]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(u){r(u)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),J&&Object.defineProperty(r,J,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},exports.promisify.custom=J,exports.callbackify=H;
},{"./support/isBuffer":"Hc8y","inherits":"HAnN","process":"kpD3"}],"yrVm":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=require("util"),r=s.deprecate(function(){},"Hook.context is deprecated and will be removed"),o=function(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)},a=function(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)},c=function(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)},p=function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;e(this,i),this._args=t,this.name=n,this.taps=[],this.interceptors=[],this._call=o,this.call=o,this._callAsync=a,this.callAsync=a,this._promise=c,this.promise=c,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}return n(i,[{key:"compile",value:function(t){throw new Error("Abstract: should be overridden")}},{key:"_createCall",value:function(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}},{key:"_tap",value:function(e,i,n){if("string"==typeof i)i={name:i};else if("object"!==t(i)||null===i)throw new Error("Invalid tap options");if("string"!=typeof i.name||""===i.name)throw new Error("Missing name for tap");void 0!==i.context&&r(),i=Object.assign({type:e,fn:n},i),i=this._runRegisterInterceptors(i),this._insert(i)}},{key:"tap",value:function(t,e){this._tap("sync",t,e)}},{key:"tapAsync",value:function(t,e){this._tap("async",t,e)}},{key:"tapPromise",value:function(t,e){this._tap("promise",t,e)}},{key:"_runRegisterInterceptors",value:function(t){for(var e of this.interceptors)if(e.register){var i=e.register(t);void 0!==i&&(t=i)}return t}},{key:"withOptions",value:function(t){var e=this,i=function(e){return Object.assign({},t,"string"==typeof e?{name:e}:e)};return{name:this.name,tap:function(t,n){return e.tap(i(t),n)},tapAsync:function(t,n){return e.tapAsync(i(t),n)},tapPromise:function(t,n){return e.tapPromise(i(t),n)},intercept:function(t){return e.intercept(t)},isUsed:function(){return e.isUsed()},withOptions:function(t){return e.withOptions(i(t))}}}},{key:"isUsed",value:function(){return this.taps.length>0||this.interceptors.length>0}},{key:"intercept",value:function(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(var e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}},{key:"_resetCompilation",value:function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}},{key:"_insert",value:function(t){var e;this._resetCompilation(),"string"==typeof t.before?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));var i=0;"number"==typeof t.stage&&(i=t.stage);for(var n=this.taps.length;n>0;){n--;var s=this.taps[n];this.taps[n+1]=s;var r=s.stage||0;if(e){if(e.has(s.name)){e.delete(s.name);continue}if(e.size>0)continue}if(!(r>i)){n++;break}}this.taps[n]=t}}]),i}();Object.setPrototypeOf(p.prototype,null),module.exports=p;
},{"util":"hhHb"}],"yexV":[function(require,module,exports) {
"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,r,o){return r&&t(n.prototype,r),o&&t(n,o),n}var o=function(){function t(r){n(this,t),this.config=r,this.options=void 0,this._args=void 0}return r(t,[{key:"create",value:function(n){var t;switch(this.init(n),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(n){return"throw ".concat(n,";\n")},onResult:function(n){return"return ".concat(n,";\n")},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(n){return"_callback(".concat(n,");\n")},onResult:function(n){return"_callback(null, ".concat(n,");\n")},onDone:function(){return"_callback();\n"}}));break;case"promise":var r=!1,o=this.contentWithInterceptors({onError:function(n){return r=!0,"_error(".concat(n,");\n")},onResult:function(n){return"_resolve(".concat(n,");\n")},onDone:function(){return"_resolve();\n"}}),e="";e+='"use strict";\n',e+="return new Promise((_resolve, _reject) => {\n",r&&(e+="var _sync = true;\n",e+="function _error(_err) {\n",e+="if(_sync)\n",e+="_resolve(Promise.resolve().then(() => { throw _err; }));\n",e+="else\n",e+="_reject(_err);\n",e+="};\n"),e+=this.header(),e+=o,r&&(e+="_sync = false;\n"),e+="});\n",t=new Function(this.args(),e)}return this.deinit(),t}},{key:"setup",value:function(n,t){n._x=t.taps.map(function(n){return n.fn})}},{key:"init",value:function(n){this.options=n,this._args=n.args.slice()}},{key:"deinit",value:function(){this.options=void 0,this._args=void 0}},{key:"contentWithInterceptors",value:function(n){var t=this;if(this.options.interceptors.length>0){var r=n.onError,o=n.onResult,e=n.onDone;return this.content(Object.assign(n,{onError:r&&function(n){for(var o="",e=0;e<t.options.interceptors.length;e++){t.options.interceptors[e].error&&(o+="".concat(t.getInterceptor(e),".error(").concat(n,");\n"))}return o+=r(n)},onResult:o&&function(n){for(var r="",e=0;e<t.options.interceptors.length;e++){t.options.interceptors[e].result&&(r+="".concat(t.getInterceptor(e),".result(").concat(n,");\n"))}return r+=o(n)},onDone:e&&function(){for(var n="",r=0;r<t.options.interceptors.length;r++){t.options.interceptors[r].done&&(n+="".concat(t.getInterceptor(r),".done();\n"))}return n+=e()}}))}return this.content(n)}},{key:"header",value:function(){var n="";this.needContext()?n+="var _context = {};\n":n+="var _context;\n",n+="var _x = this._x;\n",this.options.interceptors.length>0&&(n+="var _taps = this.taps;\n",n+="var _interceptors = this.interceptors;\n");for(var t=0;t<this.options.interceptors.length;t++){var r=this.options.interceptors[t];r.call&&(n+="".concat(this.getInterceptor(t),".call(").concat(this.args({before:r.context?"_context":void 0}),");\n"))}return n}},{key:"needContext",value:function(){for(var n of this.options.taps)if(n.context)return!0;return!1}},{key:"callTap",value:function(n,t){for(var{onError:r,onResult:o,onDone:e,rethrowIfPossible:c}=t,s="",i=!1,a=0;a<this.options.interceptors.length;a++){var u=this.options.interceptors[a];u.tap&&(i||(s+="var _tap".concat(n," = ").concat(this.getTap(n),";\n"),i=!0),s+="".concat(this.getInterceptor(a),".tap(").concat(u.context?"_context, ":"","_tap").concat(n,");\n"))}s+="var _fn".concat(n," = ").concat(this.getTapFn(n),";\n");var l=this.options.taps[n];switch(l.type){case"sync":c||(s+="var _hasError".concat(n," = false;\n"),s+="try {\n"),s+=o?"var _result".concat(n," = _fn").concat(n,"(").concat(this.args({before:l.context?"_context":void 0}),");\n"):"_fn".concat(n,"(").concat(this.args({before:l.context?"_context":void 0}),");\n"),c||(s+="} catch(_err) {\n",s+="_hasError".concat(n," = true;\n"),s+=r("_err"),s+="}\n",s+="if(!_hasError".concat(n,") {\n")),o&&(s+=o("_result".concat(n))),e&&(s+=e()),c||(s+="}\n");break;case"async":var p="";p+=o?"(_err".concat(n,", _result").concat(n,") => {\n"):"_err".concat(n," => {\n"),p+="if(_err".concat(n,") {\n"),p+=r("_err".concat(n)),p+="} else {\n",o&&(p+=o("_result".concat(n))),e&&(p+=e()),p+="}\n",p+="}",s+="_fn".concat(n,"(").concat(this.args({before:l.context?"_context":void 0,after:p}),");\n");break;case"promise":s+="var _hasResult".concat(n," = false;\n"),s+="var _promise".concat(n," = _fn").concat(n,"(").concat(this.args({before:l.context?"_context":void 0}),");\n"),s+="if (!_promise".concat(n," || !_promise").concat(n,".then)\n"),s+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise".concat(n," + ')');\n"),s+="_promise".concat(n,".then(_result").concat(n," => {\n"),s+="_hasResult".concat(n," = true;\n"),o&&(s+=o("_result".concat(n))),e&&(s+=e()),s+="}, _err".concat(n," => {\n"),s+="if(_hasResult".concat(n,") throw _err").concat(n,";\n"),s+=r("_err".concat(n)),s+="});\n"}return s}},{key:"callTapsSeries",value:function(n){var t=this,{onError:r,onResult:o,resultReturns:e,onDone:c,doneReturns:s,rethrowIfPossible:i}=n;if(0===this.options.taps.length)return c();for(var a=this.options.taps.findIndex(function(n){return"sync"!==n.type}),u=e||s||!1,l="",p=c,f=function(n){var e=n;p!==c&&"sync"!==t.options.taps[e].type&&(l+="function _next".concat(e,"() {\n"),l+=p(),l+="}\n",p=function(){return"".concat(u?"return ":"","_next").concat(e,"();\n")});var s=p,f=function(n){return n?"":c()},h=t.callTap(e,{onError:function(n){return r(e,n,s,f)},onResult:o&&function(n){return o(e,n,s,f)},onDone:!o&&s,rethrowIfPossible:i&&(a<0||e<a)});p=function(){return h}},h=this.options.taps.length-1;h>=0;h--)f(h);return l+=p()}},{key:"callTapsLooping",value:function(n){var{onError:t,onDone:r,rethrowIfPossible:o}=n;if(0===this.options.taps.length)return r();var e=this.options.taps.every(function(n){return"sync"===n.type}),c="";e||(c+="var _looper = () => {\n",c+="var _loopAsync = false;\n"),c+="var _loop;\n",c+="do {\n",c+="_loop = false;\n";for(var s=0;s<this.options.interceptors.length;s++){var i=this.options.interceptors[s];i.loop&&(c+="".concat(this.getInterceptor(s),".loop(").concat(this.args({before:i.context?"_context":void 0}),");\n"))}return c+=this.callTapsSeries({onError:t,onResult:function(n,t,r,o){var c="";return c+="if(".concat(t," !== undefined) {\n"),c+="_loop = true;\n",e||(c+="if(_loopAsync) _looper();\n"),c+=o(!0),c+="} else {\n",c+=r(),c+="}\n"},onDone:r&&function(){var n="";return n+="if(!_loop) {\n",n+=r(),n+="}\n"},rethrowIfPossible:o&&e}),c+="} while(_loop);\n",e||(c+="_loopAsync = true;\n",c+="};\n",c+="_looper();\n"),c}},{key:"callTapsParallel",value:function(n){var t=this,{onError:r,onResult:o,onDone:e,rethrowIfPossible:c,onTap:s=function(n,t){return t()}}=n;if(this.options.taps.length<=1)return this.callTapsSeries({onError:r,onResult:o,onDone:e,rethrowIfPossible:c});var i="";i+="do {\n",i+="var _counter = ".concat(this.options.taps.length,";\n"),e&&(i+="var _done = () => {\n",i+=e(),i+="};\n");for(var a=function(n){var a=function(){return e?"if(--_counter === 0) _done();\n":"--_counter;"},u=function(n){return n||!e?"_counter = 0;\n":"_counter = 0;\n_done();\n"};i+="if(_counter <= 0) break;\n",i+=s(n,function(){return t.callTap(n,{onError:function(t){var o="";return o+="if(_counter > 0) {\n",o+=r(n,t,a,u),o+="}\n"},onResult:o&&function(t){var r="";return r+="if(_counter > 0) {\n",r+=o(n,t,a,u),r+="}\n"},onDone:!o&&function(){return a()},rethrowIfPossible:c})},a,u)},u=0;u<this.options.taps.length;u++)a(u);return i+="} while(false);\n"}},{key:"args",value:function(){var{before:n,after:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this._args;return n&&(r=[n].concat(r)),t&&(r=r.concat(t)),0===r.length?"":r.join(", ")}},{key:"getTapFn",value:function(n){return"_x[".concat(n,"]")}},{key:"getTap",value:function(n){return"_taps[".concat(n,"]")}},{key:"getInterceptor",value:function(n){return"_interceptors[".concat(n,"]")}}]),t}();module.exports=o;
},{}],"xhbF":[function(require,module,exports) {
"use strict";function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}function o(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function e(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}function r(o,e){return!e||"object"!==t(e)&&"function"!=typeof e?u(o):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&f(t,o)}function f(t,o){return(f=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var p=require("./Hook"),s=require("./HookCodeFactory"),a=function(t){function e(){return o(this,e),r(this,i(e).apply(this,arguments))}return c(e,s),n(e,[{key:"content",value:function(t){var{onError:o,onDone:e,rethrowIfPossible:n}=t;return this.callTapsSeries({onError:function(t,e){return o(e)},onDone:e,rethrowIfPossible:n})}}]),e}(),l=new a,y=function(){throw new Error("tapAsync is not supported on a SyncHook")},b=function(){throw new Error("tapPromise is not supported on a SyncHook")},h=function(t){return l.setup(this,t),l.create(t)};function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new p(t,o);return e.constructor=w,e.tapAsync=y,e.tapPromise=b,e.compile=h,e}w.prototype=null,module.exports=w;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"ve1Y":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function e(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}function r(n,o){return!o||"object"!==t(o)&&"function"!=typeof o?u(n):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var s=require("./Hook"),l=require("./HookCodeFactory"),a=function(t){function o(){return n(this,o),r(this,i(o).apply(this,arguments))}return c(o,l),e(o,[{key:"content",value:function(t){var{onError:n,onResult:o,resultReturns:e,onDone:r,rethrowIfPossible:u}=t;return this.callTapsSeries({onError:function(t,o){return n(o)},onResult:function(t,n,e){return"if(".concat(n," !== undefined) {\n").concat(o(n),";\n} else {\n").concat(e(),"}\n")},resultReturns:e,onDone:r,rethrowIfPossible:u})}}]),o}(),p=new a,y=function(){throw new Error("tapAsync is not supported on a SyncBailHook")},b=function(){throw new Error("tapPromise is not supported on a SyncBailHook")},h=function(t){return p.setup(this,t),p.create(t)};function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=new s(t,n);return o.constructor=w,o.tapAsync=y,o.tapPromise=b,o.compile=h,o}w.prototype=null,module.exports=w;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"Q8vJ":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function e(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}function r(n,o){return!o||"object"!==t(o)&&"function"!=typeof o?u(n):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var a=require("./Hook"),s=require("./HookCodeFactory"),l=function(t){function o(){return n(this,o),r(this,i(o).apply(this,arguments))}return c(o,s),e(o,[{key:"content",value:function(t){var n=this,{onError:o,onResult:e,resultReturns:r,rethrowIfPossible:u}=t;return this.callTapsSeries({onError:function(t,n){return o(n)},onResult:function(t,o,e){var r="";return r+="if(".concat(o," !== undefined) {\n"),r+="".concat(n._args[0]," = ").concat(o,";\n"),r+="}\n",r+=e()},onDone:function(){return e(n._args[0])},doneReturns:r,rethrowIfPossible:u})}}]),o}(),p=new l,y=function(){throw new Error("tapAsync is not supported on a SyncWaterfallHook")},b=function(){throw new Error("tapPromise is not supported on a SyncWaterfallHook")},h=function(t){return p.setup(this,t),p.create(t)};function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");var o=new a(t,n);return o.constructor=w,o.tapAsync=y,o.tapPromise=b,o.compile=h,o}w.prototype=null,module.exports=w;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"dela":[function(require,module,exports) {
"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function t(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function n(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function e(o,t,e){return t&&n(o.prototype,t),e&&n(o,e),o}function r(t,n){return!n||"object"!==o(n)&&"function"!=typeof n?u(t):n}function u(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function i(o){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function c(o,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),t&&f(o,t)}function f(o,t){return(f=Object.setPrototypeOf||function(o,t){return o.__proto__=t,o})(o,t)}var p=require("./Hook"),s=require("./HookCodeFactory"),a=function(o){function n(){return t(this,n),r(this,i(n).apply(this,arguments))}return c(n,s),e(n,[{key:"content",value:function(o){var{onError:t,onDone:n,rethrowIfPossible:e}=o;return this.callTapsLooping({onError:function(o,n){return t(n)},onDone:n,rethrowIfPossible:e})}}]),n}(),l=new a,y=function(){throw new Error("tapAsync is not supported on a SyncLoopHook")},b=function(){throw new Error("tapPromise is not supported on a SyncLoopHook")},h=function(o){return l.setup(this,o),l.create(o)};function w(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=new p(o,t);return n.constructor=w,n.tapAsync=y,n.tapPromise=b,n.compile=h,n}w.prototype=null,module.exports=w;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"lQrX":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function r(e,o){return!o||"object"!==t(o)&&"function"!=typeof o?u(e):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("./Hook"),a=require("./HookCodeFactory"),p=function(t){function o(){return e(this,o),r(this,i(o).apply(this,arguments))}return c(o,a),n(o,[{key:"content",value:function(t){var{onError:e,onDone:o}=t;return this.callTapsParallel({onError:function(t,o,n,r){return e(o)+r(!0)},onDone:o})}}]),o}(),y=new p,s=function(t){return y.setup(this,t),y.create(t)};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=new l(t,e);return o.constructor=b,o.compile=s,o._call=void 0,o.call=void 0,o}b.prototype=null,module.exports=b;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"u1et":[function(require,module,exports) {
"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function r(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?u(t):e}function u(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function c(n){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function i(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&l(n,t)}function l(n,t){return(l=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}var s=require("./Hook"),a=require("./HookCodeFactory"),f=function(n){function e(){return t(this,e),o(this,c(e).apply(this,arguments))}return i(e,a),r(e,[{key:"content",value:function(n){var{onError:t,onResult:e,onDone:r}=n,o="";return o+="var _results = new Array(".concat(this.options.taps.length,");\n"),o+="var _checkDone = () => {\n",o+="for(var i = 0; i < _results.length; i++) {\n",o+="var item = _results[i];\n",o+="if(item === undefined) return false;\n",o+="if(item.result !== undefined) {\n",o+=e("item.result"),o+="return true;\n",o+="}\n",o+="if(item.error) {\n",o+=t("item.error"),o+="return true;\n",o+="}\n",o+="}\n",o+="return false;\n",o+="}\n",o+=this.callTapsParallel({onError:function(n,t,e,r){var o="";return o+="if(".concat(n," < _results.length && ((_results.length = ").concat(n+1,"), (_results[").concat(n,"] = { error: ").concat(t," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=e(),o+="}\n"},onResult:function(n,t,e,r){var o="";return o+="if(".concat(n," < _results.length && (").concat(t," !== undefined && (_results.length = ").concat(n+1,"), (_results[").concat(n,"] = { result: ").concat(t," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=e(),o+="}\n"},onTap:function(n,t,e,r){var o="";return n>0&&(o+="if(".concat(n," >= _results.length) {\n"),o+=e(),o+="} else {\n"),o+=t(),n>0&&(o+="}\n"),o},onDone:r})}}]),e}(),p=new f,y=function(n){return p.setup(this,n),p.create(n)};function h(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new s(n,t);return e.constructor=h,e.compile=y,e._call=void 0,e.call=void 0,e}h.prototype=null,module.exports=h;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"t40K":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function r(e,o){return!o||"object"!==t(o)&&"function"!=typeof o?u(e):o}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=require("./Hook"),a=require("./HookCodeFactory"),p=function(t){function o(){return e(this,o),r(this,i(o).apply(this,arguments))}return c(o,a),n(o,[{key:"content",value:function(t){var{onError:e,onDone:o}=t;return this.callTapsSeries({onError:function(t,o,n,r){return e(o)+r(!0)},onDone:o})}}]),o}(),s=new p,y=function(t){return s.setup(this,t),s.create(t)};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=new l(t,e);return o.constructor=b,o.compile=y,o._call=void 0,o.call=void 0,o}b.prototype=null,module.exports=b;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"JO6a":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function r(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?u(n):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var l=require("./Hook"),a=require("./HookCodeFactory"),s=function(t){function e(){return n(this,e),r(this,i(e).apply(this,arguments))}return c(e,a),o(e,[{key:"content",value:function(t){var{onError:n,onResult:e,resultReturns:o,onDone:r}=t;return this.callTapsSeries({onError:function(t,e,o,r){return n(e)+r(!0)},onResult:function(t,n,o){return"if(".concat(n," !== undefined) {\n").concat(e(n),";\n} else {\n").concat(o(),"}\n")},resultReturns:o,onDone:r})}}]),e}(),p=new s,y=function(t){return p.setup(this,t),p.create(t)};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new l(t,n);return e.constructor=b,e.compile=y,e._call=void 0,e.call=void 0,e}b.prototype=null,module.exports=b;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"fyOg":[function(require,module,exports) {
"use strict";function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}function o(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function e(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}function r(o,e){return!e||"object"!==t(e)&&"function"!=typeof e?u(o):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&f(t,o)}function f(t,o){return(f=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var l=require("./Hook"),p=require("./HookCodeFactory"),a=function(t){function e(){return o(this,e),r(this,i(e).apply(this,arguments))}return c(e,p),n(e,[{key:"content",value:function(t){var{onError:o,onDone:e}=t;return this.callTapsLooping({onError:function(t,e,n,r){return o(e)+r(!0)},onDone:e})}}]),e}(),y=new a,s=function(t){return y.setup(this,t),y.create(t)};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new l(t,o);return e.constructor=b,e.compile=s,e._call=void 0,e.call=void 0,e}b.prototype=null,module.exports=b;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"F4JO":[function(require,module,exports) {
"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function r(n,e){return!e||"object"!==t(e)&&"function"!=typeof e?u(n):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var a=require("./Hook"),l=require("./HookCodeFactory"),s=function(t){function e(){return n(this,e),r(this,i(e).apply(this,arguments))}return c(e,l),o(e,[{key:"content",value:function(t){var n=this,{onError:e,onResult:o,onDone:r}=t;return this.callTapsSeries({onError:function(t,n,o,r){return e(n)+r(!0)},onResult:function(t,e,o){var r="";return r+="if(".concat(e," !== undefined) {\n"),r+="".concat(n._args[0]," = ").concat(e,";\n"),r+="}\n",r+=o()},onDone:function(){return o(n._args[0])}})}}]),e}(),p=new s,y=function(t){return p.setup(this,t),p.create(t)};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");var e=new a(t,n);return e.constructor=b,e.compile=y,e._call=void 0,e.call=void 0,e}b.prototype=null,module.exports=b;
},{"./Hook":"yrVm","./HookCodeFactory":"yexV"}],"AQTS":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}var o=require("util"),n=function(t,e){return e},a=function(){function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;t(this,e),this._map=new Map,this.name=o,this._factory=r,this._interceptors=[]}return r(e,[{key:"get",value:function(t){return this._map.get(t)}},{key:"for",value:function(t){var e=this.get(t);if(void 0!==e)return e;for(var r=this._factory(t),o=this._interceptors,n=0;n<o.length;n++)r=o[n].factory(t,r);return this._map.set(t,r),r}},{key:"intercept",value:function(t){this._interceptors.push(Object.assign({factory:n},t))}}]),e}();a.prototype.tap=o.deprecate(function(t,e,r){return this.for(t).tap(e,r)},"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),a.prototype.tapAsync=o.deprecate(function(t,e,r){return this.for(t).tapAsync(e,r)},"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),a.prototype.tapPromise=o.deprecate(function(t,e,r){return this.for(t).tapPromise(e,r)},"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead."),module.exports=a;
},{"util":"hhHb"}],"Xbna":[function(require,module,exports) {
"use strict";function o(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function t(o,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}function e(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}var n=require("./Hook"),r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;o(this,t),this.hooks=e,this.name=n}return e(t,[{key:"tap",value:function(o,t){for(var e of this.hooks)e.tap(o,t)}},{key:"tapAsync",value:function(o,t){for(var e of this.hooks)e.tapAsync(o,t)}},{key:"tapPromise",value:function(o,t){for(var e of this.hooks)e.tapPromise(o,t)}},{key:"isUsed",value:function(){for(var o of this.hooks)if(o.isUsed())return!0;return!1}},{key:"intercept",value:function(o){for(var t of this.hooks)t.intercept(o)}},{key:"withOptions",value:function(o){return new t(this.hooks.map(function(t){return t.withOptions(o)}),this.name)}}]),t}();module.exports=r;
},{"./Hook":"yrVm"}],"WAFq":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.SyncHook=require("./SyncHook"),exports.SyncBailHook=require("./SyncBailHook"),exports.SyncWaterfallHook=require("./SyncWaterfallHook"),exports.SyncLoopHook=require("./SyncLoopHook"),exports.AsyncParallelHook=require("./AsyncParallelHook"),exports.AsyncParallelBailHook=require("./AsyncParallelBailHook"),exports.AsyncSeriesHook=require("./AsyncSeriesHook"),exports.AsyncSeriesBailHook=require("./AsyncSeriesBailHook"),exports.AsyncSeriesLoopHook=require("./AsyncSeriesLoopHook"),exports.AsyncSeriesWaterfallHook=require("./AsyncSeriesWaterfallHook"),exports.HookMap=require("./HookMap"),exports.MultiHook=require("./MultiHook");
},{"./SyncHook":"xhbF","./SyncBailHook":"ve1Y","./SyncWaterfallHook":"Q8vJ","./SyncLoopHook":"dela","./AsyncParallelHook":"lQrX","./AsyncParallelBailHook":"u1et","./AsyncSeriesHook":"t40K","./AsyncSeriesBailHook":"JO6a","./AsyncSeriesLoopHook":"fyOg","./AsyncSeriesWaterfallHook":"F4JO","./HookMap":"AQTS","./MultiHook":"Xbna"}],"FxYn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRendererContainer=t;var e=window.document.documentElement.style,n=0;function t(e){var t=e;if("string"==typeof e&&(t=document.getElementById(e)),t){var o=document.createElement("div");return o.style.cssText+="\n      position: absolute;\n      top: 0;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",o.id="l7-scene-".concat(n++),o.classList.add("l7-scene"),t.appendChild(o),o}return null}
},{}],"OO1R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,i,t,n,a,l,o,u,c,d,s,f,p,v,h,S,b,g,m,y,w,P,k,z,C,j,M,x,E,T,q,I,Y,R=ee(require("@babel/runtime/regenerator")),O=ee(require("@babel/runtime/helpers/asyncToGenerator")),L=ee(require("@babel/runtime/helpers/initializerDefineProperty")),W=ee(require("@babel/runtime/helpers/classCallCheck")),$=ee(require("@babel/runtime/helpers/createClass")),D=ee(require("@babel/runtime/helpers/possibleConstructorReturn")),_=ee(require("@babel/runtime/helpers/getPrototypeOf")),B=ee(require("@babel/runtime/helpers/assertThisInitialized")),H=ee(require("@babel/runtime/helpers/inherits")),A=ee(require("@babel/runtime/helpers/applyDecoratedDescriptor")),G=ee(require("@babel/runtime/helpers/initializerWarningHelper")),F=require("@antv/l7-utils"),N=Z(require("element-resize-event")),U=require("eventemitter3"),J=require("inversify"),K=require("tapable"),Q=require("../../types"),V=require("../../utils/dom");function X(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return X=function(){return e},e}function Z(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=X();if(r&&r.has(e))return r.get(e);var i={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=t?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}function ee(e){return e&&e.__esModule?e:{default:e}}var re=(e=(0,J.injectable)(),r=(0,J.inject)(Q.TYPES.SceneID),i=(0,J.inject)(Q.TYPES.IIconService),t=(0,J.inject)(Q.TYPES.IFontService),n=(0,J.inject)(Q.TYPES.IControlService),a=(0,J.inject)(Q.TYPES.ILogService),l=(0,J.inject)(Q.TYPES.IGlobalConfigService),o=(0,J.inject)(Q.TYPES.IMapService),u=(0,J.inject)(Q.TYPES.ICoordinateSystemService),c=(0,J.inject)(Q.TYPES.IRendererService),d=(0,J.inject)(Q.TYPES.ILayerService),s=(0,J.inject)(Q.TYPES.ICameraService),f=(0,J.inject)(Q.TYPES.IInteractionService),p=(0,J.inject)(Q.TYPES.IShaderModuleService),v=(0,J.inject)(Q.TYPES.IMarkerService),h=(0,J.inject)(Q.TYPES.IPopupService),e((b=Y=function(e){function r(){var e;return(0,W.default)(this,r),e=(0,D.default)(this,(0,_.default)(r).call(this)),(0,L.default)(e,"id",g,(0,B.default)(e)),(0,L.default)(e,"iconService",m,(0,B.default)(e)),(0,L.default)(e,"fontService",y,(0,B.default)(e)),(0,L.default)(e,"controlService",w,(0,B.default)(e)),(0,L.default)(e,"logger",P,(0,B.default)(e)),(0,L.default)(e,"configService",k,(0,B.default)(e)),(0,L.default)(e,"map",z,(0,B.default)(e)),(0,L.default)(e,"coordinateSystemService",C,(0,B.default)(e)),(0,L.default)(e,"rendererService",j,(0,B.default)(e)),(0,L.default)(e,"layerService",M,(0,B.default)(e)),(0,L.default)(e,"cameraService",x,(0,B.default)(e)),(0,L.default)(e,"interactionService",E,(0,B.default)(e)),(0,L.default)(e,"shaderModuleService",T,(0,B.default)(e)),(0,L.default)(e,"markerService",q,(0,B.default)(e)),(0,L.default)(e,"popupService",I,(0,B.default)(e)),e.inited=!1,e.initPromise=void 0,e.rendering=!1,e.$container=void 0,e.hooks=void 0,e.handleWindowResized=function(){if(e.emit("resize"),e.$container){var r=window.devicePixelRatio,i=window.innerWidth,t=window.innerHeight;if(e.$container!==document.body){var n=e.$container.getBoundingClientRect();i=n.right-n.left,t=n.bottom-n.top}e.rendererService.viewport({x:0,y:0,width:r*i,height:r*t}),F.DOM.triggerResize(),e.coordinateSystemService.needRefresh=!0,e.render()}},e.handleMapCameraChanged=function(r){e.cameraService.update(r),e.render()},e.hooks={init:new K.AsyncParallelHook(["config"])},e}return(0,H.default)(r,e),(0,$.default)(r,[{key:"init",value:function(e){var r=this;this.configService.setSceneConfig(this.id,e);var i=this.configService.validateSceneConfig(this.configService.getSceneConfig(this.id)),t=i.valid,n=i.errorText;t?(this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",(0,O.default)(R.default.mark(function e(){return R.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){r.map.onCameraChanged(function(i){r.cameraService.init(),r.cameraService.update(i),e()}),r.map.init()});case 2:r.map.onCameraChanged(r.handleMapCameraChanged),r.map.addMarkerContainer(),r.markerService.addMarkers(),r.markerService.addMarkerLayers(),r.popupService.initPopup(),r.interactionService.init(),r.logger.debug("map ".concat(r.id," loaded"));case 9:case"end":return e.stop()}},e)}))),this.hooks.init.tapPromise("initRenderer",(0,O.default)(R.default.mark(function e(){var i;return R.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,V.createRendererContainer)(r.configService.getSceneConfig(r.id).id||""),r.$container=i,!i){e.next=9;break}return e.next=5,r.rendererService.init(i);case 5:(0,N.default)(r.$container,r.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(r.handleWindowResized),e.next=10;break;case 9:r.logger.error("容器 id 不存在");case 10:r.logger.debug("scene ".concat(r.id," renderer loaded"));case 11:case"end":return e.stop()}},e)}))),this.initPromise=this.hooks.init.promise(this.configService.getSceneConfig(this.id)),this.render()):this.logger.error(n||"")}},{key:"addLayer",value:function(e){this.logger.debug("add layer ".concat(e.name," to scene ").concat(this.id)),this.layerService.add(e),this.render()}},{key:"render",value:function(){var e=(0,O.default)(R.default.mark(function e(){return R.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.rendering){e.next=2;break}return e.abrupt("return");case 2:if(this.rendering=!0,this.inited){e.next=10;break}return e.next=6,this.initPromise;case 6:this.logger.info(" render inited"),this.controlService.addControls(),this.emit("loaded"),this.inited=!0;case 10:this.layerService.initLayers(),this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"ExportMap2Png",value:function(){var e,r=null===(e=this.$container)||void 0===e?void 0:e.getElementsByTagName("canvas")[0];return this.render(),null==r?void 0:r.toDataURL()}},{key:"destroy",value:function(){this.emit("destroy"),this.inited=!1,this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.rendererService.destroy(),this.map.destroy(),(0,N.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}}]),r}(U.EventEmitter),g=(0,A.default)(b.prototype,"id",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,A.default)(b.prototype,"iconService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,A.default)(b.prototype,"fontService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,A.default)(b.prototype,"controlService",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=(0,A.default)(b.prototype,"logger",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,A.default)(b.prototype,"configService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=(0,A.default)(b.prototype,"map",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,A.default)(b.prototype,"coordinateSystemService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=(0,A.default)(b.prototype,"rendererService",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,A.default)(b.prototype,"layerService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,A.default)(b.prototype,"cameraService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,A.default)(b.prototype,"interactionService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,A.default)(b.prototype,"shaderModuleService",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=(0,A.default)(b.prototype,"markerService",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=(0,A.default)(b.prototype,"popupService",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=b))||S);exports.default=re;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-utils":"nTEC","element-resize-event":"MZRW","eventemitter3":"JJlS","inversify":"PR7M","tapable":"WAFq","../../types":"m6Ky","../../utils/dom":"FxYn"}],"r0rT":[function(require,module,exports) {
var _="__lodash_hash_undefined__";function t(t){return this.__data__.set(t,_),this}module.exports=t;
},{}],"thFQ":[function(require,module,exports) {
var e=require("./_MapCache"),t=require("./_setCacheAdd"),r=require("./_setCacheHas");function a(t){var r=-1,a=null==t?0:t.length;for(this.__data__=new e;++r<a;)this.add(t[r])}a.prototype.add=a.prototype.push=t,a.prototype.has=r,module.exports=a;
},{"./_MapCache":"wtMJ","./_setCacheAdd":"r0rT","./_setCacheHas":"ocJ6"}],"IiHL":[function(require,module,exports) {
function r(r,e,n,t){for(var o=r.length,u=n+(t?1:-1);t?u--:++u<o;)if(e(r[u],u,r))return u;return-1}module.exports=r;
},{}],"hgJw":[function(require,module,exports) {
function e(e){return e!=e}module.exports=e;
},{}],"SftN":[function(require,module,exports) {
function r(r,e,n){for(var t=n-1,o=r.length;++t<o;)if(r[t]===e)return t;return-1}module.exports=r;
},{}],"Ro2m":[function(require,module,exports) {
var e=require("./_baseFindIndex"),r=require("./_baseIsNaN"),i=require("./_strictIndexOf");function n(n,u,s){return u==u?i(n,u,s):e(n,r,s)}module.exports=n;
},{"./_baseFindIndex":"IiHL","./_baseIsNaN":"hgJw","./_strictIndexOf":"SftN"}],"mBEK":[function(require,module,exports) {
var e=require("./_baseIndexOf");function n(n,r){return!!(null==n?0:n.length)&&e(n,r,0)>-1}module.exports=n;
},{"./_baseIndexOf":"Ro2m"}],"hjtK":[function(require,module,exports) {
function r(r,n,e){for(var t=-1,u=null==r?0:r.length;++t<u;)if(e(n,r[t]))return!0;return!1}module.exports=r;
},{}],"qxaq":[function(require,module,exports) {
function e(e,n){return e.has(n)}module.exports=e;
},{}],"IVes":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"Set");module.exports=t;
},{"./_getNative":"bViC","./_root":"MIhM"}],"uTXi":[function(require,module,exports) {
function o(){}module.exports=o;
},{}],"ZEJm":[function(require,module,exports) {
function r(r){var n=-1,o=Array(r.size);return r.forEach(function(r){o[++n]=r}),o}module.exports=r;
},{}],"vPIz":[function(require,module,exports) {
var e=require("./_Set"),r=require("./noop"),n=require("./_setToArray"),o=1/0,u=e&&1/n(new e([,-0]))[1]==o?function(r){return new e(r)}:r;module.exports=u;
},{"./_Set":"IVes","./noop":"uTXi","./_setToArray":"ZEJm"}],"NH1q":[function(require,module,exports) {
var e=require("./_SetCache"),r=require("./_arrayIncludes"),u=require("./_arrayIncludesWith"),a=require("./_cacheHas"),i=require("./_createSet"),n=require("./_setToArray"),s=200;function t(t,l,h){var c=-1,f=r,o=t.length,q=!0,_=[],p=_;if(h)q=!1,f=u;else if(o>=s){var v=l?null:i(t);if(v)return n(v);q=!1,f=a,p=new e}else p=l?[]:_;e:for(;++c<o;){var d=t[c],y=l?l(d):d;if(d=h||0!==d?d:0,q&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue e;l&&p.push(y),_.push(d)}else f(p,y,h)||(p!==_&&p.push(y),_.push(d))}return _}module.exports=t;
},{"./_SetCache":"thFQ","./_arrayIncludes":"mBEK","./_arrayIncludesWith":"hjtK","./_cacheHas":"qxaq","./_createSet":"vPIz","./_setToArray":"ZEJm"}],"oUkM":[function(require,module,exports) {
var e=require("./_baseUniq");function r(r){return r&&r.length?e(r):[]}module.exports=r;
},{"./_baseUniq":"NH1q"}],"M4U2":[function(require,module,exports) {
"use strict";function e(e){var c=0;switch(e){case"vec2":case"ivec2":c=2;break;case"vec3":case"ivec3":c=3;break;case"vec4":case"ivec4":case"mat2":c=4;break;case"mat3":c=9;break;case"mat4":c=16}return c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformLengthByType=e,exports.extractUniforms=a;var c=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function a(a){var t={};return{content:a=a.replace(c,function(c,a,r){var s=r.split(":"),i=s[0].trim(),n="";switch(s.length>1&&(n=s[1].trim()),a){case"bool":n="true"===n;break;case"float":case"int":n=Number(n);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":n=n?n.replace("[","").replace("]","").split(",").reduce(function(e,c){return e.push(Number(c.trim())),e},[]):new Array(e(a)).fill(0)}return t[i]=n,"uniform ".concat(a," ").concat(i,";\n")}),uniforms:t}}
},{}],"Yzm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,n,t,i=s(require("@babel/runtime/helpers/defineProperty")),o=s(require("@babel/runtime/helpers/classCallCheck")),r=s(require("@babel/runtime/helpers/createClass")),c=s(require("lodash/uniq")),l=require("inversify"),a=require("../../utils/shader-module");function s(e){return e&&e.__esModule?e:{default:e}}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){(0,i.default)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var p="#define PI 3.14159265359",_="#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(const float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(const vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}",d="#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(reverse_offset_normal(vec3(1, 10.5, 12)));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",g="// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance + \n//           light.quadratic * (distance * distance));    \n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}",v="varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    // float highLightAlpha = highLightColor.a;\n    // float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    // vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return highLightColor;\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, 1.0) : color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n",h="attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n",m="\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n",C="#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n  return vector;\n}\n\nvec4 project_position(vec4 position) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  // TODO: 瓦片坐标系 & 常规世界坐标系\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  return pixel;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  return pixel;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n",S="/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  const float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  const vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);    \n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  const vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  const vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  const vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b) \n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}",P=/precision\s+(high|low|medium)p\s+float/,T="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n",I=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,x=(e=(0,l.injectable)())(n=t=function(){function e(){(0,o.default)(this,e),this.moduleCache={},this.rawContentCache={}}return(0,r.default)(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:p,fs:p}),this.registerModule("decode",{vs:_,fs:""}),this.registerModule("projection",{vs:C,fs:""}),this.registerModule("project",{vs:m,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:S}),this.registerModule("lighting",{vs:g,fs:""}),this.registerModule("light",{vs:d,fs:""}),this.registerModule("picking",{vs:h,fs:v})}},{key:"registerModule",value:function(e,n){if(!this.rawContentCache[e]){var t=n.vs,i=n.fs,o=n.uniforms,r=(0,a.extractUniforms)(t),c=r.content,l=r.uniforms,s=(0,a.extractUniforms)(i),f=s.content,p=s.uniforms;this.rawContentCache[e]={fs:f,uniforms:u({},l,{},p,{},o),vs:c}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var n=this;if(this.moduleCache[e])return this.moduleCache[e];var t=this.rawContentCache[e].vs,i=this.rawContentCache[e].fs,o=this.processModule(t,[],"vs"),r=o.content,l=o.includeList,a=this.processModule(i,[],"fs"),s=a.content,f=a.includeList,p=s,_=(0,c.default)(l.concat(f).concat(e)).reduce(function(e,t){return u({},e,{},n.rawContentCache[t].uniforms)},{});return P.test(s)||(p=T+s),this.moduleCache[e]={fs:p.trim(),uniforms:_,vs:r.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,n,t){var i=this;return{content:e.replace(I,function(e,o){var r=o.split(" ")[0].replace(/"/g,"");if(n.indexOf(r)>-1)return"";var c=i.rawContentCache[r][t];return n.push(r),i.processModule(c,n,t).content}),includeList:n}}}]),e}())||n;exports.default=x;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","lodash/uniq":"oUkM","inversify":"PR7M","../../utils/shader-module":"M4U2"}],"aYhM":[function(require,module,exports) {
var r=require("./getPrototypeOf");function e(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}module.exports=e;
},{"./getPrototypeOf":"UJE0"}],"J5UC":[function(require,module,exports) {
var e=require("./superPropBase");function t(r,o,u){return"undefined"!=typeof Reflect&&Reflect.get?module.exports=t=Reflect.get:module.exports=t=function(t,r,o){var u=e(t,r);if(u){var l=Object.getOwnPropertyDescriptor(u,r);return l.get?l.get.call(o):l.value}},t(r,o,u||r)}module.exports=t;
},{"./superPropBase":"aYhM"}],"F4Zo":[function(require,module,exports) {
"use strict";var s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PassType=void 0,exports.PassType=s,function(s){s.Normal="normal",s.PostProcessing="post-processing"}(s||(exports.PassType=s={}));
},{}],"jJTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,i,t,a,n,l=h(require("@babel/runtime/helpers/initializerDefineProperty")),u=h(require("@babel/runtime/helpers/classCallCheck")),c=h(require("@babel/runtime/helpers/createClass")),o=h(require("@babel/runtime/helpers/applyDecoratedDescriptor")),s=h(require("@babel/runtime/helpers/initializerWarningHelper")),v=require("inversify"),d=require("../../../types"),S=require("../IMultiPassRenderer");function h(e){return e&&e.__esModule?e:{default:e}}var p=(e=(0,v.injectable)(),r=(0,v.inject)(d.TYPES.IShaderModuleService),e((t=n=function(){function e(){(0,u.default)(this,e),(0,l.default)(this,"shaderModuleService",a,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return(0,c.default)(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return S.PassType.Normal}},{key:"init",value:function(e,r){this.config=r,this.rendererService=e.getContainer().get(d.TYPES.IRendererService),this.cameraService=e.getContainer().get(d.TYPES.ICameraService),this.mapService=e.getContainer().get(d.TYPES.IMapService),this.interactionService=e.getContainer().get(d.TYPES.IInteractionService),this.layerService=e.getContainer().get(d.TYPES.ILayerService)}},{key:"render",value:function(e){}}]),e}(),a=(0,o.default)(t.prototype,"shaderModuleService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=t))||i);exports.default=p;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","inversify":"PR7M","../../../types":"m6Ky","../IMultiPassRenderer":"F4Zo"}],"ld5g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=o(require("@babel/runtime/helpers/classCallCheck")),u=o(require("@babel/runtime/helpers/createClass")),l=o(require("@babel/runtime/helpers/possibleConstructorReturn")),i=o(require("@babel/runtime/helpers/getPrototypeOf")),a=o(require("@babel/runtime/helpers/get")),n=o(require("@babel/runtime/helpers/inherits")),s=require("inversify"),f=o(require("./BaseNormalPass"));function o(e){return e&&e.__esModule?e:{default:e}}var c=(e=(0,s.injectable)())(r=function(e){function r(){return(0,t.default)(this,r),(0,l.default)(this,(0,i.default)(r).apply(this,arguments))}return(0,n.default)(r,e),(0,u.default)(r,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(e,t){(0,a.default)((0,i.default)(r.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),r}(f.default))||r;exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/get":"J5UC","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","./BaseNormalPass":"jJTB"}],"o0oB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,s,i,n,a=v(require("@babel/runtime/regenerator")),u=v(require("@babel/runtime/helpers/asyncToGenerator")),l=v(require("@babel/runtime/helpers/initializerDefineProperty")),o=v(require("@babel/runtime/helpers/classCallCheck")),c=v(require("@babel/runtime/helpers/createClass")),p=v(require("@babel/runtime/helpers/applyDecoratedDescriptor")),h=v(require("@babel/runtime/helpers/initializerWarningHelper")),d=require("inversify"),f=require("../../../types"),y=require("../IMultiPassRenderer");function v(e){return e&&e.__esModule?e:{default:e}}var b=(e=(0,d.injectable)(),r=(0,d.inject)(f.TYPES.IPostProcessor),e((s=n=function(){function e(){(0,o.default)(this,e),this.passes=[],(0,l.default)(this,"postProcessor",i,this),this.layer=void 0,this.renderFlag=void 0}return(0,c.default)(e,[{key:"setLayer",value:function(e){this.layer=e}},{key:"setRenderFlag",value:function(e){this.renderFlag=e}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var e=(0,u.default)(a.default.mark(function e(){var r,t,s,i,n,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,t=!1,s=void 0,e.prev=3,i=this.passes[Symbol.iterator]();case 5:if(r=(n=i.next()).done){e.next=12;break}return u=n.value,e.next=9,u.render(this.layer);case 9:r=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),t=!0,s=e.t0;case 18:e.prev=18,e.prev=19,r||null==i.return||i.return();case 21:if(e.prev=21,!t){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:return e.next=28,this.postProcessor.render(this.layer);case 28:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"resize",value:function(e,r){this.postProcessor.resize(e,r)}},{key:"add",value:function(e,r){e.getType()===y.PassType.PostProcessing?this.postProcessor.add(e,this.layer,r):(e.init(this.layer,r),this.passes.push(e))}},{key:"insert",value:function(e,r,t){e.init(this.layer,r),this.passes.splice(t,0,e)}}]),e}(),i=(0,p.default)(s.prototype,"postProcessor",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t=s))||t);exports.default=b;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","inversify":"PR7M","../../../types":"m6Ky","../IMultiPassRenderer":"F4Zo"}],"LqrK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,n,a,l=S(require("@babel/runtime/helpers/slicedToArray")),u=S(require("@babel/runtime/helpers/defineProperty")),o=S(require("@babel/runtime/helpers/initializerDefineProperty")),c=S(require("@babel/runtime/helpers/classCallCheck")),s=S(require("@babel/runtime/helpers/createClass")),d=S(require("@babel/runtime/helpers/possibleConstructorReturn")),h=S(require("@babel/runtime/helpers/assertThisInitialized")),g=S(require("@babel/runtime/helpers/getPrototypeOf")),f=S(require("@babel/runtime/helpers/get")),y=S(require("@babel/runtime/helpers/inherits")),p=S(require("@babel/runtime/helpers/applyDecoratedDescriptor")),v=S(require("@babel/runtime/helpers/initializerWarningHelper")),b=require("@antv/l7-utils"),k=require("inversify"),P=require("../../../types"),O=require("../../interaction/IInteractionService"),m=require("../gl"),w=require("../IMultiPassRenderer"),F=S(require("./BaseNormalPass"));function S(e){return e&&e.__esModule?e:{default:e}}function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function q(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach(function(r){(0,u.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var R=(e=(0,k.injectable)(),r=(0,k.inject)(P.TYPES.ILogService),e((i=a=function(e){function r(){var e,t;(0,c.default)(this,r);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=(0,d.default)(this,(e=(0,g.default)(r)).call.apply(e,[this].concat(a))),(0,o.default)(t,"logger",n,(0,h.default)(t)),t.pickingFBO=void 0,t.layer=void 0,t.alreadyInRendering=!1,t.pickFromPickingFBO=function(e){var r,i=e.x,n=e.y,a=e.lngLat,l=e.type;if(t.layer.isVisible()){var u,o=t.rendererService,c=o.getViewportSize,s=o.readPixels,d=o.useFramebuffer,h=c(),g=h.width,f=h.height,y=t.layer.getLayerConfig(),p=y.enableHighlight,v=y.enableSelect,k=i*window.devicePixelRatio,P=n*window.devicePixelRatio;if(!(k>g||k<0||P>f||P<0))d(t.pickingFBO,function(){if(0!==(u=s({x:Math.round(k),y:Math.round(f-(n+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}))[0]||0!==u[1]||0!==u[2]){t.logger.debug("picked");var e=(0,b.decodePickingColor)(u),r=t.layer.getSource().getFeatureById(e),o={x:i,y:n,type:l,lngLat:a,featureId:e,feature:r};r&&(t.layer.setCurrentPickId(e),t.triggerHoverOnLayer(o))}else{var c={x:i,y:n,lngLat:a,type:null===t.layer.getCurrentPickId()?"un"+l:"mouseout",featureId:null,feature:null};t.triggerHoverOnLayer(q({},c,{type:"unpick"})),t.triggerHoverOnLayer(c),t.layer.setCurrentPickId(null)}}),p&&t.highlightPickedFeature(u),v&&"click"===l&&(null===(r=u)||void 0===r?void 0:r.toString())!==[0,0,0,0].toString()&&t.selectFeature(u)}},t}return(0,y.default)(r,e),(0,s.default)(r,[{key:"getType",value:function(){return w.PassType.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(e,t){(0,f.default)((0,g.default)(r.prototype),"init",this).call(this,e,t),this.layer=e;var i=this.rendererService,n=i.createTexture2D,a=i.createFramebuffer,l=(0,i.getViewportSize)(),u=l.width,o=l.height;this.pickingFBO=a({color:n({width:u,height:o,wrapS:m.gl.CLAMP_TO_EDGE,wrapT:m.gl.CLAMP_TO_EDGE})}),this.interactionService.on(O.InteractionEvent.Hover,this.pickFromPickingFBO),this.interactionService.on(O.InteractionEvent.Select,this.selectFeatureHander.bind(this)),this.interactionService.on(O.InteractionEvent.Active,this.highlightFeatureHander.bind(this))}},{key:"render",value:function(e){var r=this;if(!this.alreadyInRendering){var t=this.rendererService,i=t.getViewportSize,n=t.useFramebuffer,a=t.clear,l=i(),u=l.width,o=l.height;this.alreadyInRendering=!0,this.pickingFBO.resize({width:u,height:o}),n(this.pickingFBO,function(){a({framebuffer:r.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var t=r.layer.multiPassRenderer.getRenderFlag();r.layer.multiPassRenderer.setRenderFlag(!1),e.hooks.beforePickingEncode.call(),e.render(),e.hooks.afterPickingEncode.call(),r.layer.multiPassRenderer.setRenderFlag(t),r.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(e){this.layer.emit(e.type,e)}},{key:"highlightPickedFeature",value:function(e){var r=(0,l.default)(e,3),t=r[0],i=r[1],n=r[2];this.layer.hooks.beforeHighlight.call([t,i,n]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(e){var r=(0,l.default)(e,3),t=r[0],i=r[1],n=r[2];this.layer.hooks.beforeSelect.call([t,i,n]),this.layerService.renderLayers()}},{key:"selectFeatureHander",value:function(e){var r=e.featureId,t=(0,b.encodePickingColor)(r);this.selectFeature(new Uint8Array(t))}},{key:"highlightFeatureHander",value:function(e){var r=e.featureId,t=(0,b.encodePickingColor)(r);this.highlightPickedFeature(new Uint8Array(t))}}]),r}(F.default),n=(0,p.default)(i.prototype,"logger",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t=i))||t);exports.default=R;
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/get":"J5UC","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-utils":"nTEC","inversify":"PR7M","../../../types":"m6Ky","../../interaction/IInteractionService":"Op3C","../gl":"Hbi5","../IMultiPassRenderer":"F4Zo","./BaseNormalPass":"jJTB"}],"Chbn":[function(require,module,exports) {
function r(r,e,n){var o=-1,t=r.length;e<0&&(e=-e>t?0:t+e),(n=n>t?t:n)<0&&(n+=t),t=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(t);++o<t;)a[o]=r[o+e];return a}module.exports=r;
},{}],"Kr2C":[function(require,module,exports) {
var e=require("./_baseSlice");function r(r,i,n){var o=r.length;return n=void 0===n?o:n,!i&&n>=o?r:e(r,i,n)}module.exports=r;
},{"./_baseSlice":"Chbn"}],"oxMD":[function(require,module,exports) {
var u="\\ud800-\\udfff",f="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff",t=f+e+d,r="\\ufe0e\\ufe0f",n="\\u200d",o=RegExp("["+n+u+t+r+"]");function p(u){return o.test(u)}module.exports=p;
},{}],"ACee":[function(require,module,exports) {
function t(t){return t.split("")}module.exports=t;
},{}],"NNKx":[function(require,module,exports) {
var f="\\ud800-\\udfff",u="\\u0300-\\u036f",d="\\ufe20-\\ufe2f",e="\\u20d0-\\u20ff",c=u+d+e,n="\\ufe0e\\ufe0f",o="["+f+"]",r="["+c+"]",t="\\ud83c[\\udffb-\\udfff]",i="(?:"+r+"|"+t+")",a="[^"+f+"]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",j="\\u200d",m=i+"?",p="["+n+"]?",x="(?:"+j+"(?:"+[a,b,g].join("|")+")"+p+m+")*",h=p+m+x,l="(?:"+[a+r+"?",r,b,g,o].join("|")+")",s=RegExp(t+"(?="+t+")|"+l+h,"g");function v(f){return f.match(s)||[]}module.exports=v;
},{}],"smkV":[function(require,module,exports) {
var r=require("./_asciiToArray"),e=require("./_hasUnicode"),i=require("./_unicodeToArray");function o(o){return e(o)?i(o):r(o)}module.exports=o;
},{"./_asciiToArray":"ACee","./_hasUnicode":"oxMD","./_unicodeToArray":"NNKx"}],"BblM":[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=Array(l);++e<l;)o[e]=n(r[e],e,r);return o}module.exports=r;
},{}],"bgO7":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":"e5TX","./isObjectLike":"OuyB"}],"w4yJ":[function(require,module,exports) {
var r=require("./_Symbol"),e=require("./_arrayMap"),i=require("./isArray"),t=require("./isSymbol"),o=1/0,u=r?r.prototype:void 0,n=u?u.toString:void 0;function a(r){if("string"==typeof r)return r;if(i(r))return e(r,a)+"";if(t(r))return n?n.call(r):"";var u=r+"";return"0"==u&&1/r==-o?"-0":u}module.exports=a;
},{"./_Symbol":"wppe","./_arrayMap":"BblM","./isArray":"p0cq","./isSymbol":"bgO7"}],"A8RV":[function(require,module,exports) {
var r=require("./_baseToString");function e(e){return null==e?"":r(e)}module.exports=e;
},{"./_baseToString":"w4yJ"}],"prUu":[function(require,module,exports) {
var r=require("./_castSlice"),e=require("./_hasUnicode"),i=require("./_stringToArray"),n=require("./toString");function t(t){return function(o){o=n(o);var u=e(o)?i(o):void 0,c=u?u[0]:o.charAt(0),a=u?r(u,1).join(""):o.slice(1);return c[t]()+a}}module.exports=t;
},{"./_castSlice":"Kr2C","./_hasUnicode":"oxMD","./_stringToArray":"smkV","./toString":"A8RV"}],"SwE8":[function(require,module,exports) {
var e=require("./_createCaseFirst"),r=e("toUpperCase");module.exports=r;
},{"./_createCaseFirst":"prUu"}],"NEda":[function(require,module,exports) {
var r=require("./toString"),e=require("./upperFirst");function t(t){return e(r(t).toLowerCase())}module.exports=t;
},{"./toString":"A8RV","./upperFirst":"SwE8"}],"FhVQ":[function(require,module,exports) {
function n(n,r,e,l){var o=-1,t=null==n?0:n.length;for(l&&t&&(e=n[++o]);++o<t;)e=r(e,n[o],o,n);return e}module.exports=n;
},{}],"IAIt":[function(require,module,exports) {
function n(n){return function(u){return null==n?void 0:n[u]}}module.exports=n;
},{}],"U25D":[function(require,module,exports) {
var e=require("./_basePropertyOf"),o={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n",ſ:"s"},a=e(o);module.exports=a;
},{"./_basePropertyOf":"IAIt"}],"zTb8":[function(require,module,exports) {
var e=require("./_deburrLetter"),r=require("./toString"),u=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f="\\u0300-\\u036f",x="\\ufe20-\\ufe2f",t="\\u20d0-\\u20ff",d=f+x+t,c="["+d+"]",g=RegExp(c,"g");function i(f){return(f=r(f))&&f.replace(u,e).replace(g,"")}module.exports=i;
},{"./_deburrLetter":"U25D","./toString":"A8RV"}],"RY7o":[function(require,module,exports) {
var x=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function r(r){return r.match(x)||[]}module.exports=r;
},{}],"bACJ":[function(require,module,exports) {
var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function t(t){return a.test(t)}module.exports=t;
},{}],"Wq7j":[function(require,module,exports) {
var u="\\ud800-\\udfff",f="\\u0300-\\u036f",d="\\ufe20-\\ufe2f",x="\\u20d0-\\u20ff",e=f+d+x,b="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",a="\\xac\\xb1\\xd7\\xf7",o="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",t="\\u2000-\\u206f",c=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",j=a+o+t+c,l="['’]",m="["+j+"]",s="["+e+"]",D="\\d+",E="["+b+"]",R="["+n+"]",T="[^"+u+j+D+b+n+r+"]",g="\\ud83c[\\udffb-\\udfff]",h="(?:"+s+"|"+g+")",p="[^"+u+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",z="[\\ud800-\\udbff][\\udc00-\\udfff]",A="["+r+"]",L="\\u200d",S="(?:"+R+"|"+T+")",Z="(?:"+A+"|"+T+")",$="(?:"+l+"(?:d|ll|m|re|s|t|ve))?",_="(?:"+l+"(?:D|LL|M|RE|S|T|VE))?",H=h+"?",M="["+i+"]?",N="(?:"+L+"(?:"+[p,v,z].join("|")+")"+M+H+")*",V="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",k="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",q=M+H+N,w="(?:"+[E,v,z].join("|")+")"+q,y=RegExp([A+"?"+R+"+"+$+"(?="+[m,A,"$"].join("|")+")",Z+"+"+_+"(?="+[m,A+S,"$"].join("|")+")",A+"?"+S+"+"+$,A+"+"+_,k,V,D,w].join("|"),"g");function B(u){return u.match(y)||[]}module.exports=B;
},{}],"y4UJ":[function(require,module,exports) {
var r=require("./_asciiWords"),e=require("./_hasUnicodeWord"),i=require("./toString"),o=require("./_unicodeWords");function d(d,u,n){return d=i(d),void 0===(u=n?void 0:u)?e(d)?o(d):r(d):d.match(u)||[]}module.exports=d;
},{"./_asciiWords":"RY7o","./_hasUnicodeWord":"bACJ","./toString":"A8RV","./_unicodeWords":"Wq7j"}],"JydJ":[function(require,module,exports) {
var r=require("./_arrayReduce"),e=require("./deburr"),u=require("./words"),n="['’]",i=RegExp(n,"g");function o(n){return function(o){return r(u(e(o).replace(i,"")),n,"")}}module.exports=o;
},{"./_arrayReduce":"FhVQ","./deburr":"zTb8","./words":"y4UJ"}],"SjCc":[function(require,module,exports) {
var e=require("./capitalize"),r=require("./_createCompounder"),o=r(function(r,o,t){return o=o.toLowerCase(),r+(t?e(o):o)});module.exports=o;
},{"./capitalize":"NEda","./_createCompounder":"JydJ"}],"dSMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,n,o,s=g(require("@babel/runtime/helpers/defineProperty")),u=g(require("@babel/runtime/helpers/initializerDefineProperty")),a=g(require("@babel/runtime/helpers/classCallCheck")),l=g(require("@babel/runtime/helpers/createClass")),c=g(require("@babel/runtime/helpers/applyDecoratedDescriptor")),d=g(require("@babel/runtime/helpers/initializerWarningHelper")),f=g(require("lodash/upperFirst")),p=g(require("lodash/isNil")),h=g(require("lodash/camelCase")),v=require("inversify"),b=require("../../../index"),y=require("../../../types"),m=require("../IMultiPassRenderer");function g(e){return e&&e.__esModule?e:{default:e}}function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach(function(r){(0,s.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var S="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",T=(e=(0,v.injectable)(),r=(0,v.inject)(y.TYPES.IShaderModuleService),e((i=o=function(){function e(){(0,a.default)(this,e),(0,u.default)(this,"shaderModuleService",n,this),this.rendererService=void 0,this.config=void 0,this.quad=S,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return(0,l.default)(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getType",value:function(){return m.PassType.PostProcessing}},{key:"init",value:function(e,r){this.config=r,this.rendererService=e.getContainer().get(y.TYPES.IRendererService);var t=this.rendererService,i=t.createAttribute,n=t.createBuffer,o=t.createModel,s=this.setupShaders(),u=s.vs,a=s.fs,l=s.uniforms;this.model=o({vs:u,fs:a,attributes:{a_Position:i({buffer:n({data:[-4,-4,4,-4,0,4],type:b.gl.FLOAT}),size:2})},uniforms:P({u_Texture:null},l,{},this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(e){var r=this,t=e.multiPassRenderer.getPostProcessor(),i=this.rendererService,n=i.useFramebuffer,o=i.getViewportSize,s=i.clear,u=o(),a=u.width,l=u.height;n(this.renderToScreen?null:t.getWriteFBO(),function(){s({framebuffer:t.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),r.model.draw({uniforms:P({u_Texture:t.getReadFBO(),u_ViewportSize:[a,l]},r.convertOptionsToUniforms(r.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){this.enabled=e}},{key:"setRenderToScreen",value:function(e){this.renderToScreen=e}},{key:"updateOptions",value:function(e){this.optionsToUpdate=P({},this.optionsToUpdate,{},e)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(e){var r={};return Object.keys(e).forEach(function(t){(0,p.default)(e[t])||(r["u_".concat((0,f.default)((0,h.default)(t)))]=e[t])}),r}}]),e}(),n=(0,c.default)(i.prototype,"shaderModuleService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t=i))||t);exports.default=T;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","lodash/upperFirst":"SwE8","lodash/isNil":"gGJU","lodash/camelCase":"SjCc","inversify":"PR7M","../../../index":"om0I","../../../types":"m6Ky","../IMultiPassRenderer":"F4Zo"}],"yZyB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=f(require("@babel/runtime/helpers/defineProperty")),i=f(require("@babel/runtime/helpers/classCallCheck")),n=f(require("@babel/runtime/helpers/createClass")),o=f(require("@babel/runtime/helpers/possibleConstructorReturn")),u=f(require("@babel/runtime/helpers/getPrototypeOf")),s=f(require("@babel/runtime/helpers/inherits")),l=f(require("lodash/isNil")),a=require("inversify"),c=f(require("../BasePostProcessingPass"));function f(e){return e&&e.__esModule?e:{default:e}}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function p(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?v(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var b="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",d="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",g=(e=(0,a.injectable)())(r=function(e){function r(){return(0,i.default)(this,r),(0,o.default)(this,(0,u.default)(r).apply(this,arguments))}return(0,s.default)(r,e),(0,n.default)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:d,fs:b});var e=this.shaderModuleService.getModule("blur-pass"),r=e.vs,t=e.fs,i=e.uniforms,n=this.rendererService.getViewportSize();return{vs:r,fs:t,uniforms:p({},i,{u_ViewportSize:[n.width,n.height]})}}},{key:"convertOptionsToUniforms",value:function(e){var r={};return(0,l.default)(e.blurRadius)||(r.u_BlurDir=[e.blurRadius,0]),r}}]),r}(c.default))||r;exports.default=g;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","lodash/isNil":"gGJU","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"rjrm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=f(require("@babel/runtime/helpers/defineProperty")),i=f(require("@babel/runtime/helpers/classCallCheck")),n=f(require("@babel/runtime/helpers/createClass")),o=f(require("@babel/runtime/helpers/possibleConstructorReturn")),u=f(require("@babel/runtime/helpers/getPrototypeOf")),s=f(require("@babel/runtime/helpers/inherits")),l=f(require("lodash/isNil")),a=require("inversify"),c=f(require("../BasePostProcessingPass"));function f(e){return e&&e.__esModule?e:{default:e}}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function p(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?v(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var b="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}",d="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",g=(e=(0,a.injectable)())(r=function(e){function r(){return(0,i.default)(this,r),(0,o.default)(this,(0,u.default)(r).apply(this,arguments))}return(0,s.default)(r,e),(0,n.default)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:d,fs:b});var e=this.shaderModuleService.getModule("blur-pass"),r=e.vs,t=e.fs,i=e.uniforms,n=this.rendererService.getViewportSize();return{vs:r,fs:t,uniforms:p({},i,{u_ViewportSize:[n.width,n.height]})}}},{key:"convertOptionsToUniforms",value:function(e){var r={};return(0,l.default)(e.blurRadius)||(r.u_BlurDir=[0,e.blurRadius]),r}}]),r}(c.default))||r;exports.default=g;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","lodash/isNil":"gGJU","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"fiZr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("@babel/runtime/helpers/defineProperty")),n=a(require("@babel/runtime/helpers/classCallCheck")),o=a(require("@babel/runtime/helpers/createClass")),i=a(require("@babel/runtime/helpers/possibleConstructorReturn")),l=a(require("@babel/runtime/helpers/getPrototypeOf")),u=a(require("@babel/runtime/helpers/inherits")),c=require("inversify"),s=a(require("../BasePostProcessingPass"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var v='varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}',m="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",d=(e=(0,c.injectable)())(r=function(e){function r(){return(0,n.default)(this,r),(0,i.default)(this,(0,l.default)(r).apply(this,arguments))}return(0,u.default)(r,e),(0,o.default)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:m,fs:v});var e=this.shaderModuleService.getModule("colorhalftone-pass"),r=e.vs,t=e.fs,n=e.uniforms,o=this.rendererService.getViewportSize();return{vs:r,fs:t,uniforms:p({},n,{u_ViewportSize:[o.width,o.height]})}}}]),r}(s.default))||r;exports.default=d;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"MwPK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=o(require("@babel/runtime/helpers/classCallCheck")),i=o(require("@babel/runtime/helpers/createClass")),s=o(require("@babel/runtime/helpers/possibleConstructorReturn")),u=o(require("@babel/runtime/helpers/getPrototypeOf")),n=o(require("@babel/runtime/helpers/inherits")),a=require("inversify"),l=o(require("../BasePostProcessingPass"));function o(e){return e&&e.__esModule?e:{default:e}}var d="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",v="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",c=(e=(0,a.injectable)())(r=function(e){function r(){return(0,t.default)(this,r),(0,s.default)(this,(0,u.default)(r).apply(this,arguments))}return(0,n.default)(r,e),(0,i.default)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:v,fs:d}),this.shaderModuleService.getModule("copy-pass")}}]),r}(l.default))||r;exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"CqDA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r=s(require("@babel/runtime/helpers/defineProperty")),n=s(require("@babel/runtime/helpers/classCallCheck")),i=s(require("@babel/runtime/helpers/createClass")),o=s(require("@babel/runtime/helpers/possibleConstructorReturn")),c=s(require("@babel/runtime/helpers/getPrototypeOf")),l=s(require("@babel/runtime/helpers/inherits")),a=require("inversify"),u=s(require("../BasePostProcessingPass"));function s(e){return e&&e.__esModule?e:{default:e}}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",p="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",h=(e=(0,a.injectable)())(t=function(e){function t(){return(0,n.default)(this,t),(0,o.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:p,fs:v});var e=this.shaderModuleService.getModule("hexagonalpixelate-pass"),t=e.vs,r=e.fs,n=e.uniforms,i=this.rendererService.getViewportSize();return{vs:t,fs:r,uniforms:f({},n,{u_ViewportSize:[i.width,i.height]})}}}]),t}(u.default))||t;exports.default=h;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"RqkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=c(require("@babel/runtime/helpers/defineProperty")),n=c(require("@babel/runtime/helpers/classCallCheck")),o=c(require("@babel/runtime/helpers/createClass")),i=c(require("@babel/runtime/helpers/possibleConstructorReturn")),a=c(require("@babel/runtime/helpers/getPrototypeOf")),l=c(require("@babel/runtime/helpers/inherits")),u=require("inversify"),s=c(require("../BasePostProcessingPass"));function c(e){return e&&e.__esModule?e:{default:e}}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var p="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}",g="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",b=(e=(0,u.injectable)())(r=function(e){function r(){return(0,n.default)(this,r),(0,i.default)(this,(0,a.default)(r).apply(this,arguments))}return(0,l.default)(r,e),(0,o.default)(r,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:g,fs:p});var e=this.shaderModuleService.getModule("ink-pass"),r=e.vs,t=e.fs,n=e.uniforms,o=this.rendererService.getViewportSize();return{vs:r,fs:t,uniforms:f({},n,{u_ViewportSize:[o.width,o.height]})}}}]),r}(s.default))||r;exports.default=b;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"w7ph":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("@babel/runtime/helpers/classCallCheck")),n=a(require("@babel/runtime/helpers/createClass")),o=a(require("@babel/runtime/helpers/possibleConstructorReturn")),i=a(require("@babel/runtime/helpers/getPrototypeOf")),s=a(require("@babel/runtime/helpers/inherits")),l=require("inversify"),u=a(require("../BasePostProcessingPass"));function a(e){return e&&e.__esModule?e:{default:e}}var f="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}",c="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",d=(e=(0,l.injectable)())(r=function(e){function r(){return(0,t.default)(this,r),(0,o.default)(this,(0,i.default)(r).apply(this,arguments))}return(0,s.default)(r,e),(0,n.default)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:c,fs:f}),this.shaderModuleService.getModule("noise-pass")}}]),r}(u.default))||r;exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"Uffx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("@babel/runtime/helpers/classCallCheck")),n=a(require("@babel/runtime/helpers/createClass")),o=a(require("@babel/runtime/helpers/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/getPrototypeOf")),i=a(require("@babel/runtime/helpers/inherits")),l=require("inversify"),s=a(require("../BasePostProcessingPass"));function a(e){return e&&e.__esModule?e:{default:e}}var c="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",_="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}",f=(e=(0,l.injectable)())(r=function(e){function r(){return(0,t.default)(this,r),(0,o.default)(this,(0,u.default)(r).apply(this,arguments))}return(0,i.default)(r,e),(0,n.default)(r,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:c,fs:_}),this.shaderModuleService.getModule("sepia-pass")}}]),r}(s.default))||r;exports.default=f;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../BasePostProcessingPass":"dSMP"}],"NDiE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,s,a,n,u=y(require("@babel/runtime/regenerator")),l=y(require("@babel/runtime/helpers/asyncToGenerator")),o=y(require("@babel/runtime/helpers/initializerDefineProperty")),h=y(require("@babel/runtime/helpers/classCallCheck")),c=y(require("@babel/runtime/helpers/createClass")),p=y(require("@babel/runtime/helpers/applyDecoratedDescriptor")),d=y(require("@babel/runtime/helpers/initializerWarningHelper")),f=require("inversify"),v=require("../../../types"),b=require("../gl");function y(e){return e&&e.__esModule?e:{default:e}}var g=(e=(0,f.injectable)(),r=(0,f.inject)(v.TYPES.IRendererService),t=(0,f.postConstruct)(),e((s=n=function(){function e(){(0,h.default)(this,e),(0,o.default)(this,"rendererService",a,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return(0,c.default)(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var e=(0,l.default)(u.default.mark(function e(r){var t,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.passes.length)){e.next=10;break}return(i=this.passes[t]).setRenderToScreen(this.isLastEnabledPass(t)),e.next=6,i.render(r);case 6:t!==this.passes.length-1&&this.swap();case 7:t++,e.next=1;break;case 10:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"resize",value:function(e,r){this.readFBO.resize({width:e,height:r}),this.writeFBO.resize({width:e,height:r})}},{key:"add",value:function(e,r,t){e.init(r,t),this.passes.push(e)}},{key:"insert",value:function(e,r,t,i){e.init(t,i),this.passes.splice(r,0,e)}},{key:"getPostProcessingPassByName",value:function(e){return this.passes.find(function(r){return r.getName()===e})}},{key:"init",value:function(){var e=this.rendererService,r=e.createFramebuffer,t=e.createTexture2D;this.readFBO=r({color:t({width:1,height:1,wrapS:b.gl.CLAMP_TO_EDGE,wrapT:b.gl.CLAMP_TO_EDGE})}),this.writeFBO=r({color:t({width:1,height:1,wrapS:b.gl.CLAMP_TO_EDGE,wrapT:b.gl.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(e){for(var r=e+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}},{key:"swap",value:function(){var e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=e}}]),e}(),a=(0,p.default)(s.prototype,"rendererService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(s.prototype,"init",[t],Object.getOwnPropertyDescriptor(s.prototype,"init"),s.prototype),i=s))||i);exports.default=g;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","inversify":"PR7M","../../../types":"m6Ky","../gl":"Hbi5"}],"qRsR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=f(require("@babel/runtime/helpers/classCallCheck")),u=f(require("@babel/runtime/helpers/createClass")),l=f(require("@babel/runtime/helpers/possibleConstructorReturn")),a=f(require("@babel/runtime/helpers/getPrototypeOf")),i=f(require("@babel/runtime/helpers/get")),s=f(require("@babel/runtime/helpers/inherits")),n=require("inversify"),o=require("../IMultiPassRenderer"),d=f(require("./BaseNormalPass"));function f(e){return e&&e.__esModule?e:{default:e}}var c=(e=(0,n.injectable)())(r=function(e){function r(){return(0,t.default)(this,r),(0,l.default)(this,(0,a.default)(r).apply(this,arguments))}return(0,s.default)(r,e),(0,u.default)(r,[{key:"getType",value:function(){return o.PassType.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(e,t){(0,i.default)((0,a.default)(r.prototype),"init",this).call(this,e,t)}},{key:"render",value:function(e){var r=this.rendererService,t=r.useFramebuffer,u=r.clear,l=e.multiPassRenderer.getPostProcessor().getReadFBO();t(l,function(){u({color:[0,0,0,0],depth:1,stencil:0,framebuffer:l}),e.multiPassRenderer.setRenderFlag(!1),e.render(),e.multiPassRenderer.setRenderFlag(!0)})}}]),r}(d.default))||r;exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/get":"J5UC","@babel/runtime/helpers/inherits":"d4H2","inversify":"PR7M","../IMultiPassRenderer":"F4Zo","./BaseNormalPass":"jJTB"}],"A1h0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,a,n,u,o,l=M(require("@babel/runtime/helpers/defineProperty")),s=M(require("@babel/runtime/helpers/initializerDefineProperty")),c=M(require("@babel/runtime/helpers/classCallCheck")),d=M(require("@babel/runtime/helpers/createClass")),h=M(require("@babel/runtime/helpers/possibleConstructorReturn")),f=M(require("@babel/runtime/helpers/assertThisInitialized")),g=M(require("@babel/runtime/helpers/getPrototypeOf")),p=M(require("@babel/runtime/helpers/get")),m=M(require("@babel/runtime/helpers/inherits")),v=M(require("@babel/runtime/helpers/applyDecoratedDescriptor")),b=M(require("@babel/runtime/helpers/initializerWarningHelper")),_=require("inversify"),y=require("../../../types"),T=require("../gl"),R=require("../IMultiPassRenderer"),P=M(require("./BaseNormalPass"));function M(e){return e&&e.__esModule?e:{default:e}}function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach(function(r){(0,l.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var S="uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n",D="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",E="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}";function q(e,r){for(var t=0,i=1/r,a=e;a>0;)t+=i*(a%r),a=Math.floor(a/r),i/=r;return t}var A=1,x=(e=(0,_.injectable)(),r=(0,_.inject)(y.TYPES.IShaderModuleService),t=(0,_.inject)(y.TYPES.ILogService),e((a=o=function(e){function r(){var e,t;(0,c.default)(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=(0,h.default)(this,(e=(0,g.default)(r)).call.apply(e,[this].concat(a))),(0,s.default)(t,"shaderModuleService",n,(0,f.default)(t)),(0,s.default)(t,"logger",u,(0,f.default)(t)),t.haltonSequence=[],t.accumulatingId=0,t.frame=0,t.timer=void 0,t.sampleRenderTarget=void 0,t.prevRenderTarget=void 0,t.outputRenderTarget=void 0,t.copyRenderTarget=void 0,t.blendModel=void 0,t.outputModel=void 0,t.copyModel=void 0,t}return(0,m.default)(r,e),(0,d.default)(r,[{key:"getType",value:function(){return R.PassType.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(e,t){(0,p.default)((0,g.default)(r.prototype),"init",this).call(this,e,t);var i=this.rendererService,a=i.createFramebuffer,n=i.createTexture2D;this.sampleRenderTarget=a({color:n({width:1,height:1,wrapS:T.gl.CLAMP_TO_EDGE,wrapT:T.gl.CLAMP_TO_EDGE})}),this.prevRenderTarget=a({color:n({width:1,height:1,wrapS:T.gl.CLAMP_TO_EDGE,wrapT:T.gl.CLAMP_TO_EDGE})}),this.outputRenderTarget=a({color:n({width:1,height:1,wrapS:T.gl.CLAMP_TO_EDGE,wrapT:T.gl.CLAMP_TO_EDGE})}),this.copyRenderTarget=a({color:n({width:1,height:1,wrapS:T.gl.CLAMP_TO_EDGE,wrapT:T.gl.CLAMP_TO_EDGE})});for(var u=0;u<30;u++)this.haltonSequence.push([q(u,2),q(u,3)]);this.blendModel=this.createTriangleModel("blend-pass",S),this.outputModel=this.createTriangleModel("copy-pass",D,{blend:{enable:!0,func:{srcRGB:T.gl.ONE,dstRGB:T.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:T.gl.ONE,dstAlpha:T.gl.ONE_MINUS_SRC_ALPHA},equation:{rgb:T.gl.FUNC_ADD,alpha:T.gl.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",D)}},{key:"render",value:function(e){var r=this,t=this.rendererService,i=t.clear,a=t.getViewportSize,n=t.useFramebuffer,u=a(),o=u.width,l=u.height;this.sampleRenderTarget.resize({width:o,height:l}),this.prevRenderTarget.resize({width:o,height:l}),this.outputRenderTarget.resize({width:o,height:l}),this.copyRenderTarget.resize({width:o,height:l}),this.resetFrame(),this.stopAccumulating();var s=e.multiPassRenderer.getPostProcessor().getReadFBO();n(s,function(){i({color:[0,0,0,0],depth:1,stencil:0,framebuffer:s}),e.multiPassRenderer.setRenderFlag(!1),e.render(),e.multiPassRenderer.setRenderFlag(!0)});this.accumulatingId=A++,this.timer=window.setTimeout(function(){!function t(i){r.accumulatingId&&i===r.accumulatingId&&(r.isFinished()||(r.doRender(e),requestAnimationFrame(function(){t(i)})))}(r.accumulatingId)},50)}},{key:"doRender",value:function(e){var r=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var t=this.rendererService,i=t.clear,a=t.getViewportSize,n=t.useFramebuffer,u=a(),o=u.width,l=u.height,s=e.getLayerConfig().jitterScale,c=void 0===s?1:s,d=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*d[0]-1)/o*c,(2*d[1]-1)/l*c),e.multiPassRenderer.setRenderFlag(!1),e.hooks.beforeRender.call(),n(this.sampleRenderTarget,function(){i({color:[0,0,0,0],depth:1,stencil:0,framebuffer:r.sampleRenderTarget}),e.render()}),e.hooks.afterRender.call(),e.multiPassRenderer.setRenderFlag(!0);var h=e.getLayerConfig();n(this.outputRenderTarget,function(){r.blendModel.draw({uniforms:{u_opacity:h.opacity||1,u_MixRatio:0===r.frame?1:.9,u_Diffuse1:r.sampleRenderTarget,u_Diffuse2:0===r.frame?e.multiPassRenderer.getPostProcessor().getReadFBO():r.prevRenderTarget}})}),0===this.frame&&i({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(n(this.copyRenderTarget,function(){r.outputModel.draw({uniforms:{u_Texture:r.outputRenderTarget}})}),n(e.multiPassRenderer.getPostProcessor().getReadFBO(),function(){r.copyModel.draw({uniforms:{u_Texture:r.copyRenderTarget}})}),e.multiPassRenderer.getPostProcessor().render(e));var f=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=f,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(e,r,t){this.shaderModuleService.registerModule(e,{vs:E,fs:r});var i=this.shaderModuleService.getModule(e),a=i.vs,n=i.fs,u=i.uniforms,o=this.rendererService,l=o.createAttribute,s=o.createBuffer;return(0,o.createModel)(O({vs:a,fs:n,attributes:{a_Position:l({buffer:s({data:[-4,-4,4,-4,0,4],type:T.gl.FLOAT}),size:2})},uniforms:O({},u),depth:{enable:!1},count:3},t))}}]),r}(P.default),n=(0,v.default)(a.prototype,"shaderModuleService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,v.default)(a.prototype,"logger",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=a))||i);exports.default=x;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/get":"J5UC","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","inversify":"PR7M","../../../types":"m6Ky","../gl":"Hbi5","../IMultiPassRenderer":"F4Zo","./BaseNormalPass":"jJTB"}],"NakN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSceneContainer=_,exports.createLayerContainer=R,exports.default=exports.lazyMultiInject=exports.lazyInject=void 0,require("reflect-metadata");var e=require("eventemitter3"),r=require("inversify"),s=j(require("inversify-inject-decorators")),i=require("./types"),n=j(require("./services/asset/FontService")),t=j(require("./services/asset/IconService")),o=j(require("./services/camera/CameraService")),a=j(require("./services/component/ControlService")),c=j(require("./services/component/MarkerService")),d=j(require("./services/component/PopupService")),u=j(require("./services/config/ConfigService")),S=j(require("./services/coordinate/CoordinateSystemService")),l=j(require("./services/interaction/InteractionService")),P=j(require("./services/layer/LayerService")),v=j(require("./services/layer/StyleAttributeService")),p=j(require("./services/log/LogService")),g=j(require("./services/scene/SceneService")),f=j(require("./services/shader/ShaderModuleService")),T=j(require("./services/renderer/passes/ClearPass")),I=j(require("./services/renderer/passes/MultiPassRenderer")),E=j(require("./services/renderer/passes/PixelPickingPass")),b=j(require("./services/renderer/passes/post-processing/BlurHPass")),m=j(require("./services/renderer/passes/post-processing/BlurVPass")),Y=j(require("./services/renderer/passes/post-processing/ColorHalfTonePass")),q=j(require("./services/renderer/passes/post-processing/CopyPass")),y=j(require("./services/renderer/passes/post-processing/HexagonalPixelatePass")),N=j(require("./services/renderer/passes/post-processing/InkPass")),h=j(require("./services/renderer/passes/post-processing/NoisePass")),C=j(require("./services/renderer/passes/post-processing/SepiaPass")),w=j(require("./services/renderer/passes/PostProcessor")),x=j(require("./services/renderer/passes/RenderPass")),M=j(require("./services/renderer/passes/TAAPass"));function j(e){return e&&e.__esModule?e:{default:e}}var z=new r.Container;z.bind(i.TYPES.IGlobalConfigService).to(u.default).inSingletonScope(),z.bind(i.TYPES.IShaderModuleService).to(f.default).inSingletonScope(),z.bind(i.TYPES.ILogService).to(p.default).inSingletonScope(),(0,r.decorate)((0,r.injectable)(),e.EventEmitter),z.bind(i.TYPES.IEventEmitter).to(e.EventEmitter);var k=(0,s.default)(z,!1),F=function(e){var r=k.lazyInject(e);return function(e,s,i){r.call(this,e,s),i&&(i.initializer=function(){return e[s]})}};exports.lazyInject=F;var H=function(e){var r=k.lazyMultiInject(e);return function(e,s,i){r.call(this,e,s),i&&(i.initializer=function(){return e[s]})}};exports.lazyMultiInject=H;var L=z;exports.default=L;var A=0;function _(){var e=new r.Container;return e.parent=z,e.bind(i.TYPES.SceneID).toConstantValue("".concat(A++)),e.bind(i.TYPES.ILayerService).to(P.default).inSingletonScope(),e.bind(i.TYPES.ISceneService).to(g.default).inSingletonScope(),e.bind(i.TYPES.ICameraService).to(o.default).inSingletonScope(),e.bind(i.TYPES.ICoordinateSystemService).to(S.default).inSingletonScope(),e.bind(i.TYPES.IInteractionService).to(l.default).inSingletonScope(),e.bind(i.TYPES.IControlService).to(a.default).inSingletonScope(),e.bind(i.TYPES.IMarkerService).to(c.default).inSingletonScope(),e.bind(i.TYPES.IIconService).to(t.default).inSingletonScope(),e.bind(i.TYPES.IFontService).to(n.default).inSingletonScope(),e.bind(i.TYPES.IPopupService).to(d.default).inSingletonScope(),e.bind(i.TYPES.INormalPass).to(T.default).whenTargetNamed("clear"),e.bind(i.TYPES.INormalPass).to(E.default).whenTargetNamed("pixelPicking"),e.bind(i.TYPES.INormalPass).to(x.default).whenTargetNamed("render"),e.bind(i.TYPES.INormalPass).to(M.default).whenTargetNamed("taa"),e.bind(i.TYPES.IFactoryNormalPass).toFactory(function(e){return function(r){return e.container.getNamed(i.TYPES.INormalPass,r)}}),e.bind(i.TYPES.IPostProcessingPass).to(q.default).whenTargetNamed("copy"),e.bind(i.TYPES.IPostProcessingPass).to(b.default).whenTargetNamed("blurH"),e.bind(i.TYPES.IPostProcessingPass).to(m.default).whenTargetNamed("blurV"),e.bind(i.TYPES.IPostProcessingPass).to(h.default).whenTargetNamed("noise"),e.bind(i.TYPES.IPostProcessingPass).to(C.default).whenTargetNamed("sepia"),e.bind(i.TYPES.IPostProcessingPass).to(Y.default).whenTargetNamed("colorHalftone"),e.bind(i.TYPES.IPostProcessingPass).to(y.default).whenTargetNamed("hexagonalPixelate"),e.bind(i.TYPES.IPostProcessingPass).to(N.default).whenTargetNamed("ink"),e.bind(i.TYPES.IFactoryPostProcessingPass).toFactory(function(e){return function(r){var s=e.container.getNamed(i.TYPES.IPostProcessingPass,r);return s.setName(r),s}}),e}function R(e){var s=new r.Container;return s.parent=e,s.bind(i.TYPES.IStyleAttributeService).to(v.default).inSingletonScope(),s.bind(i.TYPES.IMultiPassRenderer).to(I.default).inSingletonScope(),s.bind(i.TYPES.IPostProcessor).to(w.default).inSingletonScope(),s}
},{"reflect-metadata":"npqE","eventemitter3":"JJlS","inversify":"PR7M","inversify-inject-decorators":"zF2A","./types":"m6Ky","./services/asset/FontService":"Oar6","./services/asset/IconService":"BRjp","./services/camera/CameraService":"spo7","./services/component/ControlService":"L6IG","./services/component/MarkerService":"mVWR","./services/component/PopupService":"AUtA","./services/config/ConfigService":"yRGC","./services/coordinate/CoordinateSystemService":"ClKw","./services/interaction/InteractionService":"ceFR","./services/layer/LayerService":"AsFq","./services/layer/StyleAttributeService":"O09z","./services/log/LogService":"PphG","./services/scene/SceneService":"OO1R","./services/shader/ShaderModuleService":"Yzm0","./services/renderer/passes/ClearPass":"ld5g","./services/renderer/passes/MultiPassRenderer":"o0oB","./services/renderer/passes/PixelPickingPass":"LqrK","./services/renderer/passes/post-processing/BlurHPass":"yZyB","./services/renderer/passes/post-processing/BlurVPass":"rjrm","./services/renderer/passes/post-processing/ColorHalfTonePass":"fiZr","./services/renderer/passes/post-processing/CopyPass":"MwPK","./services/renderer/passes/post-processing/HexagonalPixelatePass":"CqDA","./services/renderer/passes/post-processing/InkPass":"RqkP","./services/renderer/passes/post-processing/NoisePass":"w7ph","./services/renderer/passes/post-processing/SepiaPass":"Uffx","./services/renderer/passes/PostProcessor":"NDiE","./services/renderer/passes/RenderPass":"qRsR","./services/renderer/passes/TAAPass":"A1h0"}],"l0ul":[function(require,module,exports) {
function o(o,d,e){return o==o&&(void 0!==e&&(o=o<=e?o:e),void 0!==d&&(o=o>=d?o:d)),o}module.exports=o;
},{}],"iS0Z":[function(require,module,exports) {
var e=require("./isObject"),r=require("./isSymbol"),t=NaN,i=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,n=/^0o[0-7]+$/i,s=parseInt;function a(a){if("number"==typeof a)return a;if(r(a))return t;if(e(a)){var o="function"==typeof a.valueOf?a.valueOf():a;a=e(o)?o+"":o}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var l=u.test(a);return l||n.test(a)?s(a.slice(2),l?2:8):f.test(a)?t:+a}module.exports=a;
},{"./isObject":"u9vI","./isSymbol":"bgO7"}],"Jqm6":[function(require,module,exports) {
var e=require("./_baseClamp"),r=require("./toNumber");function o(o,i,u){return void 0===u&&(u=i,i=void 0),void 0!==u&&(u=(u=r(u))==u?u:0),void 0!==i&&(i=(i=r(i))==i?i:0),e(r(o),i,u)}module.exports=o;
},{"./_baseClamp":"l0ul","./toNumber":"iS0Z"}],"A412":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShapeIndex=o,exports.sdf2DFunctions=void 0;var e=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function o(o){return e.indexOf(o)}exports.sdf2DFunctions=e;
},{}],"a41D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packUint8ToFloat=d,exports.packCircleVertex=h,exports.packOpacity=k,exports.LEFT_SHIFT25=exports.LEFT_SHIFT24=exports.LEFT_SHIFT23=exports.LEFT_SHIFT22=exports.LEFT_SHIFT21=exports.LEFT_SHIFT20=exports.LEFT_SHIFT19=exports.LEFT_SHIFT18=exports.LEFT_SHIFT17=exports.LEFT_SHIFT16=exports.LEFT_SHIFT15=exports.LEFT_SHIFT14=exports.LEFT_SHIFT13=exports.LEFT_SHIFT9=exports.LEFT_SHIFT8=exports.LEFT_SHIFT7=exports.LEFT_SHIFT6=exports.LEFT_SHIFT2=exports.LEFT_SHIFT1=void 0;var r=T(require("@babel/runtime/helpers/slicedToArray")),e=T(require("lodash/clamp")),t=require("./sdf-2d");function T(r){return r&&r.__esModule?r:{default:r}}var F=2;exports.LEFT_SHIFT1=F;var o=4;exports.LEFT_SHIFT2=o;var p=64;exports.LEFT_SHIFT6=p;var s=128;exports.LEFT_SHIFT7=s;var a=256;exports.LEFT_SHIFT8=a;var x=512;exports.LEFT_SHIFT9=x;var _=8192;exports.LEFT_SHIFT13=_;var E=16384;exports.LEFT_SHIFT14=E;var I=32768;exports.LEFT_SHIFT15=I;var S=65536;exports.LEFT_SHIFT16=S;var H=131072;exports.LEFT_SHIFT17=H;var L=262144;exports.LEFT_SHIFT18=L;var u=524288;exports.LEFT_SHIFT19=u;var c=1048576;exports.LEFT_SHIFT20=c;var v=2097152;exports.LEFT_SHIFT21=v;var i=4194304;exports.LEFT_SHIFT22=i;var f=8388608;exports.LEFT_SHIFT23=f;var n=16777216;exports.LEFT_SHIFT24=n;var l=33554432;function d(r,t){return 256*(r=(0,e.default)(Math.floor(r),0,255))+(t=(0,e.default)(Math.floor(t),0,255))}function h(e){var T=e.color,F=e.radius,o=e.tileX,s=e.tileY,a=e.shape,x=e.opacity,_=e.stroke,E=e.strokeWidth,I=e.strokeOpacity,S=[],L=[],c=[],i=[d(T[0],T[1]),d(T[2],T[3])],n=[d(_[0],_[1]),d(_[2],_[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(e){var T=(0,r.default)(e,2),_=T[0],l=T[1];S.push([].concat(i,[(_+1)*f+(l+1)*v+(0,t.getShapeIndex)(a)*H+F,(o+512)*u+(s+512)*p])),L.push([].concat(n,[E,I])),c.push([x,0,0,0])}),{packedBuffer:S,packedBuffer2:L,packedBuffer3:c}}function k(r,e){if(0===r&&!e)return 0;if(1===r&&e)return 4294967295;var t=e?1:0,T=Math.floor(127*r);return T*l+t*n+T*H+t*S+T*x+t*a+T*F+t}exports.LEFT_SHIFT25=l;
},{"@babel/runtime/helpers/slicedToArray":"HETk","lodash/clamp":"Jqm6","./sdf-2d":"A412"}],"d295":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlendType=void 0,exports.BlendType=e,function(e){e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max"}(e||(exports.BlendType=e={}));
},{}],"hGen":[function(require,module,exports) {
"use strict";var e,t,r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.AttributeType=exports.StyleScaleType=exports.ScaleTypes=void 0,exports.ScaleTypes=e,function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"}(e||(exports.ScaleTypes=e={})),exports.StyleScaleType=t,function(e){e.CONSTANT="constant",e.VARIABLE="variable"}(t||(exports.StyleScaleType=t={})),exports.AttributeType=r,function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"}(r||(exports.AttributeType=r={}));
},{}],"aYep":[function(require,module,exports) {

},{}],"ktnE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapServiceEvent=void 0;var e=["mapload"];exports.MapServiceEvent=e;
},{}],"IdKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraUniform=void 0;var o={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};exports.CameraUniform=o;
},{}],"UvUq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SceneEventList=void 0;var e=["loaded","maploaded","resize","destroy"];exports.SceneEventList=e;
},{}],"kkQf":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.PositionType=void 0,exports.PositionType=t,function(t){t.TOPRIGHT="topright",t.TOPLEFT="topleft",t.BOTTOMRIGHT="bottomright",t.BOTTOMLEFT="bottomleft"}(t||(exports.PositionType=t={}));
},{}],"om0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={container:!0,createLayerContainer:!0,createSceneContainer:!0,lazyInject:!0,lazyMultiInject:!0,BasePostProcessingPass:!0,TYPES:!0,packCircleVertex:!0};Object.defineProperty(exports,"container",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"createLayerContainer",{enumerable:!0,get:function(){return r.createLayerContainer}}),Object.defineProperty(exports,"createSceneContainer",{enumerable:!0,get:function(){return r.createSceneContainer}}),Object.defineProperty(exports,"lazyInject",{enumerable:!0,get:function(){return r.lazyInject}}),Object.defineProperty(exports,"lazyMultiInject",{enumerable:!0,get:function(){return r.lazyMultiInject}}),Object.defineProperty(exports,"BasePostProcessingPass",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"TYPES",{enumerable:!0,get:function(){return n.TYPES}}),Object.defineProperty(exports,"packCircleVertex",{enumerable:!0,get:function(){return o.packCircleVertex}});var r=L(require("./inversify.config")),t=C(require("./services/renderer/passes/BasePostProcessingPass")),n=require("./types"),o=require("./utils/vertex-compression"),c=require("./services/layer/ILayerService");Object.keys(c).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return c[r]}}))});var u=require("./services/layer/IStyleAttributeService");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});var a=require("./services/source/ISourceService");Object.keys(a).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return a[r]}}))});var i=require("./services/map/IMapService");Object.keys(i).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return i[r]}}))});var s=require("./services/coordinate/ICoordinateSystemService");Object.keys(s).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return s[r]}}))});var f=require("./services/renderer/IRendererService");Object.keys(f).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return f[r]}}))});var l=require("./services/camera/ICameraService");Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return l[r]}}))});var p=require("./services/config/IConfigService");Object.keys(p).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return p[r]}}))});var y=require("./services/scene/ISceneService");Object.keys(y).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return y[r]}}))});var b=require("./services/shader/IShaderModuleService");Object.keys(b).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return b[r]}}))});var O=require("./services/asset/IIconService");Object.keys(O).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return O[r]}}))});var d=require("./services/asset/IFontService");Object.keys(d).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return d[r]}}))});var j=require("./services/component/IControlService");Object.keys(j).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return j[r]}}))});var P=require("./services/component/IMarkerService");Object.keys(P).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return P[r]}}))});var v=require("./services/component/IPopupService");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return v[r]}}))});var _=require("./services/log/ILogService");Object.keys(_).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _[r]}}))});var h=require("./services/interaction/IInteractionService");Object.keys(h).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return h[r]}}))});var g=require("./services/renderer/IAttribute");Object.keys(g).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return g[r]}}))});var m=require("./services/renderer/IBuffer");Object.keys(m).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return m[r]}}))});var x=require("./services/renderer/IElements");Object.keys(x).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return x[r]}}))});var M=require("./services/renderer/IFramebuffer");Object.keys(M).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return M[r]}}))});var I=require("./services/renderer/IModel");Object.keys(I).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return I[r]}}))});var k=require("./services/renderer/IMultiPassRenderer");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var q=require("./services/renderer/IRenderbuffer");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var w=require("./services/renderer/ITexture2D");Object.keys(w).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return w[r]}}))});var E=require("./services/renderer/IUniform");Object.keys(E).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return E[r]}}))});var S=require("./services/renderer/gl");function C(e){return e&&e.__esModule?e:{default:e}}function z(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return z=function(){return e},e}function L(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=z();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(t,o,c):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}Object.keys(S).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return S[r]}}))});
},{"./inversify.config":"NakN","./services/renderer/passes/BasePostProcessingPass":"dSMP","./types":"m6Ky","./utils/vertex-compression":"a41D","./services/layer/ILayerService":"d295","./services/layer/IStyleAttributeService":"hGen","./services/source/ISourceService":"aYep","./services/map/IMapService":"ktnE","./services/coordinate/ICoordinateSystemService":"PNjM","./services/renderer/IRendererService":"aYep","./services/camera/ICameraService":"IdKw","./services/config/IConfigService":"aYep","./services/scene/ISceneService":"UvUq","./services/shader/IShaderModuleService":"aYep","./services/asset/IIconService":"aYep","./services/asset/IFontService":"aYep","./services/component/IControlService":"kkQf","./services/component/IMarkerService":"aYep","./services/component/IPopupService":"aYep","./services/log/ILogService":"aYep","./services/interaction/IInteractionService":"Op3C","./services/renderer/IAttribute":"aYep","./services/renderer/IBuffer":"aYep","./services/renderer/IElements":"aYep","./services/renderer/IFramebuffer":"aYep","./services/renderer/IModel":"aYep","./services/renderer/IMultiPassRenderer":"F4Zo","./services/renderer/IRenderbuffer":"aYep","./services/renderer/ITexture2D":"aYep","./services/renderer/IUniform":"aYep","./services/renderer/gl":"Hbi5"}],"afrS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.PositionType=void 0;var e,t=a(require("@babel/runtime/helpers/defineProperty")),r=a(require("@babel/runtime/helpers/classCallCheck")),i=a(require("@babel/runtime/helpers/createClass")),o=a(require("@babel/runtime/helpers/possibleConstructorReturn")),n=a(require("@babel/runtime/helpers/getPrototypeOf")),s=a(require("@babel/runtime/helpers/inherits")),c=require("@antv/l7-core"),l=require("@antv/l7-utils"),u=require("eventemitter3");function a(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function v(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?p(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}exports.PositionType=e,function(e){e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft"}(e||(exports.PositionType=e={}));var h=function(t){function u(e){var t;return(0,r.default)(this,u),(t=(0,o.default)(this,(0,n.default)(u).call(this))).controlOption=void 0,t.container=void 0,t.mapsService=void 0,t.renderService=void 0,t.layerService=void 0,t.controlService=void 0,t.isShow=void 0,t.controlOption=v({},t.getDefault(),{},e||{}),t}return(0,s.default)(u,t),(0,i.default)(u,[{key:"getDefault",value:function(){return{position:e.TOPRIGHT}}},{key:"setPosition",value:function(e){return this}},{key:"addTo",value:function(e){this.mapsService=e.get(c.TYPES.IMapService),this.renderService=e.get(c.TYPES.IRendererService),this.layerService=e.get(c.TYPES.ILayerService),this.controlService=e.get(c.TYPES.IControlService),this.isShow=!0,this.container=this.onAdd();var t=this.container,r=this.controlOption.position,i=this.controlService.controlCorners[r];return l.DOM.addClass(t,"l7-control"),-1!==r.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var e=this.container;l.DOM.addClass(e,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var e=this.container;l.DOM.removeClass(e,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;l.DOM.remove(this.container)}},{key:"_refocusOnMap",value:function(e){if(this.mapsService&&e&&e.screenX>0&&e.screenY>0){var t=this.mapsService.getContainer();null!==t&&t.focus()}}}]),u}(u.EventEmitter);exports.default=h;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","eventemitter3":"JJlS"}],"pagV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/classCallCheck")),t=h(require("@babel/runtime/helpers/createClass")),r=h(require("@babel/runtime/helpers/possibleConstructorReturn")),a=h(require("@babel/runtime/helpers/getPrototypeOf")),i=h(require("@babel/runtime/helpers/assertThisInitialized")),s=h(require("@babel/runtime/helpers/inherits")),n=require("@antv/l7-utils"),l=d(require("./BaseControl"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}var c=function(o){function d(t){var s;return(0,e.default)(this,d),(s=(0,r.default)(this,(0,a.default)(d).call(this,t))).layerControlInputs=void 0,s.layers=void 0,s.lastZIndex=void 0,s.handlingClick=void 0,s.layersLink=void 0,s.baseLayersList=void 0,s.separator=void 0,s.overlaysList=void 0,s.form=void 0,s.layerControlInputs=[],s.layers=[],s.lastZIndex=0,s.handlingClick=!1,s.initLayers(),(0,n.bindAll)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],(0,i.default)(s)),s}return(0,s.default)(d,o),(0,t.default)(d,[{key:"getDefault",value:function(){return{collapsed:!0,position:l.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1}}},{key:"onAdd",value:function(){var e=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(t){t.layer.on("remove",e.onLayerChange),t.layer.on("add",e.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(e,t){return this.addLayer(e,t,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var e=this.renderService.getViewportSize().height;n.DOM.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var t=e-(this.container.offsetTop+50);return t<this.form.clientHeight?(n.DOM.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=t+"px"):n.DOM.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return n.DOM.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"initLayout",value:function(){var e="l7-control-layers",t=this.container=n.DOM.create("div",e),r=this.controlOption.collapsed;t.setAttribute("aria-haspopup","true");var a=this.form=n.DOM.create("form",e+"-list");r&&(this.mapsService.on("click",this.collapse),t.addEventListener("mouseenter",this.expand),t.addEventListener("mouseleave",this.collapse)),this.layersLink=n.DOM.create("a",e+"-toggle",t),this.layersLink.title="Layers",r||this.expand(),this.expand(),this.baseLayersList=n.DOM.create("div",e+"-base",a),this.separator=n.DOM.create("div",e+"-separator",a),this.overlaysList=n.DOM.create("div",e+"-overlays",a),t.appendChild(a)}},{key:"initLayers",value:function(){var e=this,t=this.controlOption,r=t.baseLayers,a=void 0===r?{}:r,i=t.overlayers,s=void 0===i?{}:i;Object.keys(a).forEach(function(t,r){e.addLayer(a[t],t,!1)}),Object.keys(s).forEach(function(t,r){e.addLayer(s[t],t,!0)})}},{key:"update",value:function(){if(!this.container)return this;var e,t,r,a;n.DOM.empty(this.baseLayersList),n.DOM.empty(this.overlaysList),this.layerControlInputs=[];var i=0;for(r=0;r<this.layers.length;r++)a=this.layers[r],this.addItem(a),t=t||a.overlay,e=e||!a.overlay,i+=a.overlay?0:1;return this.controlOption.hideSingleBase&&(e=e&&i>1,this.baseLayersList.style.display=e?"":"none"),this.separator.style.display=t&&e?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var e,t,r=this.layerControlInputs,a=(this.mapsService.getZoom(),r.length-1);a>=0;a--)e=r[a],(t=this.layerService.getLayer(e.layerId))&&(e.disabled=!t.inited||!t.isVisible())}},{key:"addLayer",value:function(e,t,r){this.mapsService&&(e.on("add",this.onLayerChange),e.on("remove",this.onLayerChange)),this.layers.push({layer:e,name:t,overlay:r});var a=this.controlOption,i=a.sortLayers,s=a.sortFunction,n=a.autoZIndex;i&&this.layers.sort(function(e,t){return s(e.layer,t.layer,e.name,t.name)}),n&&e.setZIndex&&(this.lastZIndex++,e.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(e){this.handlingClick||this.update();var t=this.layerService.getLayer(e.target.layerId),r=(null==t?void 0:t.overlay)?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;r&&this.emit(r,t)}},{key:"createRadioElement",value:function(e,t){var r='<input type="radio" class="l7-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=r,a.firstChild}},{key:"addItem",value:function(e){var t,r=document.createElement("label"),a=this.layerService.getLayer(e.layer.id),i=a&&a.inited&&e.layer.isVisible();e.overlay?((t=document.createElement("input")).type="checkbox",t.className="l7-control-layers-selector",t.defaultChecked=i):t=this.createRadioElement("l7-base-layers",i),this.layerControlInputs.push(t),t.layerId=e.layer.id,t.addEventListener("click",this.onInputClick);var s=document.createElement("span");s.innerHTML=" "+e.name;var n=document.createElement("div");return r.appendChild(n),n.appendChild(t),n.appendChild(s),(e.overlay?this.overlaysList:this.baseLayersList).appendChild(r),this.checkDisabledLayers(),r}},{key:"onInputClick",value:function(){var e,t,r=this.layerControlInputs,a=[],i=[];this.handlingClick=!0;for(var s=r.length-1;s>=0;s--)e=r[s],t=this.layerService.getLayer(e.layerId),e.checked?a.push(t):e.checked||i.push(t);i.forEach(function(e){e.hide()}),a.forEach(function(e){e.show()}),this.handlingClick=!1}}]),d}(l.default);exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-utils":"nTEC","./BaseControl":"afrS"}],"YMW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("@babel/runtime/helpers/classCallCheck")),t=f(require("@babel/runtime/helpers/createClass")),r=f(require("@babel/runtime/helpers/possibleConstructorReturn")),n=f(require("@babel/runtime/helpers/getPrototypeOf")),l=f(require("@babel/runtime/helpers/inherits")),o=require("@antv/l7-utils"),u=i(require("./BaseControl"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}function f(e){return e&&e.__esModule?e:{default:e}}var s=function(a){function i(){return(0,e.default)(this,i),(0,r.default)(this,(0,n.default)(i).apply(this,arguments))}return(0,l.default)(i,a),(0,t.default)(i,[{key:"getDefault",value:function(){return{position:u.PositionType.BOTTOMLEFT}}},{key:"onAdd",value:function(){var e=o.DOM.create("div","l7-control-logo"),t=o.DOM.create("a","l7-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://antv.alipay.com/l7",t.setAttribute("aria-label","AntV logo"),t.setAttribute("rel","noopener nofollow"),e.appendChild(t),e}}]),i}(u.default);exports.default=s;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-utils":"nTEC","./BaseControl":"afrS"}],"B1Qf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/classCallCheck")),t=c(require("@babel/runtime/helpers/createClass")),r=c(require("@babel/runtime/helpers/possibleConstructorReturn")),i=c(require("@babel/runtime/helpers/getPrototypeOf")),a=c(require("@babel/runtime/helpers/assertThisInitialized")),n=c(require("@babel/runtime/helpers/inherits")),u=require("@antv/l7-utils"),l=s(require("./BaseControl"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=i?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(r,a,n):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}var d=function(o){function s(t){var n;return(0,e.default)(this,s),(n=(0,r.default)(this,(0,i.default)(s).call(this,t))).mScale=void 0,n.iScale=void 0,(0,u.bindAll)(["update"],(0,a.default)(n)),n}return(0,n.default)(s,o),(0,t.default)(s,[{key:"getDefault",value:function(){return{position:l.PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1}}},{key:"onAdd",value:function(){var e=u.DOM.create("div","l7-control-scale");this.addScales("l7-control-scale-line",e);var t=this.controlOption.updateWhenIdle;return this.mapsService.on(t?"moveend":"mapmove",this.update),this.update(),e}},{key:"onRemove",value:function(){var e=this.controlOption.updateWhenIdle;this.mapsService.off(e?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var e=this.mapsService,t=this.controlOption.maxWidth,r=e.getSize()[1]/2,i=e.containerToLngLat([0,r]),a=e.containerToLngLat([t,r]),n=(0,u.lnglatDistance)([i.lng,i.lat],[a.lng,a.lat]);this.updateScales(n)}},{key:"updateScales",value:function(e){var t=this.controlOption,r=t.metric,i=t.imperial;r&&e&&this.updateMetric(e),i&&e&&this.updateImperial(e)}},{key:"updateMetric",value:function(e){var t=this.getRoundNum(e),r=t<1e3?t+" m":t/1e3+" km";this.updateScale(this.mScale,r,t/e)}},{key:"updateImperial",value:function(e){var t,r,i,a=3.2808399*e;a>5280?(t=a/5280,r=this.getRoundNum(t),this.updateScale(this.iScale,r+" mi",r/t)):(i=this.getRoundNum(a),this.updateScale(this.iScale,i+" ft",i/a))}},{key:"updateScale",value:function(e,t,r){var i=this.controlOption.maxWidth;e.style.width=Math.round(i*r)+"px",e.innerHTML=t}},{key:"getRoundNum",value:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),r=e/t;return t*(r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1)}},{key:"addScales",value:function(e,t){var r=this.controlOption,i=r.metric,a=r.imperial;i&&(this.mScale=u.DOM.create("div",e,t)),a&&(this.iScale=u.DOM.create("div",e,t))}}]),s}(l.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-utils":"nTEC","./BaseControl":"afrS"}],"RBp4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/classCallCheck")),t=d(require("@babel/runtime/helpers/createClass")),o=d(require("@babel/runtime/helpers/possibleConstructorReturn")),i=d(require("@babel/runtime/helpers/getPrototypeOf")),r=d(require("@babel/runtime/helpers/assertThisInitialized")),n=d(require("@babel/runtime/helpers/inherits")),s=require("@antv/l7-utils"),a=l(require("./BaseControl"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=i?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=e[r]}return o.default=e,t&&t.set(e,o),o}function d(e){return e&&e.__esModule?e:{default:e}}var m=function(u){function l(t){var n;return(0,e.default)(this,l),(n=(0,o.default)(this,(0,i.default)(l).call(this,t))).disabled=void 0,n.zoomInButton=void 0,n.zoomOutButton=void 0,(0,s.bindAll)(["updateDisabled","zoomIn","zoomOut"],(0,r.default)(n)),n}return(0,n.default)(l,u),(0,t.default)(l,[{key:"getDefault",value:function(){return{position:a.PositionType.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"}}},{key:"onAdd",value:function(){var e=s.DOM.create("div","l7-control-zoom l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-control-zoom-in",e,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-control-zoom-out",e,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),e}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(e,t,o,i,r){var n=s.DOM.create("a",o,i);return n.innerHTML=e,n.href="#",n.addEventListener("click",r),n}},{key:"updateDisabled",value:function(){var e=this.mapsService;s.DOM.removeClass(this.zoomInButton,"l7-disabled"),s.DOM.removeClass(this.zoomOutButton,"l7-disabled"),(this.disabled||e.getZoom()<=e.getMinZoom())&&s.DOM.addClass(this.zoomOutButton,"l7-disabled"),(this.disabled||e.getZoom()>=e.getMaxZoom())&&s.DOM.addClass(this.zoomInButton,"l7-disabled")}}]),l}(a.default);exports.default=m;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-utils":"nTEC","./BaseControl":"afrS"}],"GUry":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyAnchorClass=a,exports.anchorTranslate=exports.anchorType=void 0,exports.anchorType=t,function(t){t.CENTER="center",t.TOP="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t.BOTTOM="bottom",t["BOTTOM-LEFT"]="bottom-left",t.LEFT="left",t.RIGHT="right"}(t||(exports.anchorType=t={}));var r={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function a(t,a,o){var e=t.classList;for(var n in r)r.hasOwnProperty(n)&&e.remove("l7-".concat(o,"-anchor-").concat(n));e.add("l7-".concat(o,"-anchor-").concat(a))}exports.anchorTranslate=r;
},{}],"IByJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/defineProperty")),t=h(require("@babel/runtime/helpers/classCallCheck")),r=h(require("@babel/runtime/helpers/createClass")),n=h(require("@babel/runtime/helpers/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/getPrototypeOf")),a=h(require("@babel/runtime/helpers/assertThisInitialized")),s=h(require("@babel/runtime/helpers/inherits")),o=require("@antv/l7-core"),u=require("@antv/l7-utils"),l=require("eventemitter3"),p=require("./utils/anchor");function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?d(Object(n),!0).forEach(function(r){(0,e.default)(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var c=function(e){function l(e){var r;return(0,t.default)(this,l),(r=(0,n.default)(this,(0,i.default)(l).call(this))).markerOption=void 0,r.defaultMarker=void 0,r.popup=void 0,r.mapsService=void 0,r.lngLat=void 0,r.scene=void 0,r.added=!1,r.eventHander=function(e){r.emit(e.type,{target:e,data:r.markerOption.extData,lngLat:r.lngLat})},r.markerOption=v({},r.getDefault(),{},e),(0,u.bindAll)(["update","onMove","onUp","addDragHandler","onMapClick"],(0,a.default)(r)),r.init(),r}return(0,s.default)(l,e),(0,r.default)(l,[{key:"getDefault",value:function(){return{element:void 0,anchor:p.anchorType.BOTTOM,offset:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(e){this.scene=e,this.mapsService=e.get(o.TYPES.IMapService);var t=this.markerOption,r=t.element;t.draggable;return this.mapsService.getMarkerContainer().appendChild(r),this.registerMarkerEvent(r),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var e=this.markerOption.element;return e&&u.DOM.remove(e),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(e){var t=this;if(!this.added)return this.once("added",function(){t.setElement(e)}),this;var r=this.markerOption.element;return r&&u.DOM.remove(r),this.markerOption.element=e,this.init(),this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.update(),this}},{key:"openPopup",value:function(){var e=this;if(!this.added)return this.once("added",function(){e.openPopup()}),this;var t=this.popup;return t?(t.isOpen()||t.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var e=this;this.added||this.once("added",function(){e.closePopup()});var t=this.popup;return t&&t.remove(),this}},{key:"setPopup",value:function(e){return this.popup=e,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var e=this.popup;return e?(e.isOpen()?e.remove():e.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offset}},{key:"setDraggable",value:function(e){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(e){this.markerOption.extData=e}},{key:"update",value:function(){if(this.mapsService){var e=this.markerOption,t=e.element,r=e.anchor;this.updatePosition(),u.DOM.setTransform(t,"".concat(p.anchorTranslate[r]))}}},{key:"onMapClick",value:function(e){var t=this.markerOption.element;this.popup&&t&&this.togglePopup()}},{key:"updatePosition",value:function(){if(this.mapsService){var e=this.markerOption.element,t=this.lngLat,r=t.lng,n=t.lat,i=this.mapsService.lngLatToContainer([r,n]);e&&(e.style.left=i.x+"px",e.style.top=i.y+"px")}}},{key:"init",value:function(){var e=this,t=this.markerOption.element,r=this.markerOption,n=r.color,i=r.anchor;if(!t){this.defaultMarker=!0,t=u.DOM.create("div"),this.markerOption.element=t;var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","48px"),a.setAttributeNS(null,"width","48px"),a.setAttributeNS(null,"viewBox","0 0 1024 1024");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),s.setAttributeNS(null,"fill",n),a.appendChild(s),t.appendChild(a)}u.DOM.addClass(t,"l7-marker"),t.addEventListener("click",function(t){e.onMapClick(t)}),t.addEventListener("click",this.eventHander),(0,p.applyAnchorClass)(t,i,"marker")}},{key:"registerMarkerEvent",value:function(e){e.addEventListener("mousemove",this.eventHander),e.addEventListener("click",this.eventHander),e.addEventListener("mousedown",this.eventHander),e.addEventListener("mouseup",this.eventHander),e.addEventListener("dblclick",this.eventHander),e.addEventListener("contextmenu",this.eventHander),e.addEventListener("mouseover",this.eventHander),e.addEventListener("mouseout",this.eventHander)}},{key:"unRegisterMarkerEvent",value:function(){var e=this.getElement();e.removeEventListener("mousemove",this.eventHander),e.removeEventListener("click",this.eventHander),e.removeEventListener("mousedown",this.eventHander),e.removeEventListener("mouseup",this.eventHander),e.removeEventListener("dblclick",this.eventHander),e.removeEventListener("contextmenu",this.eventHander),e.removeEventListener("mouseover",this.eventHander),e.removeEventListener("mouseout",this.eventHander)}},{key:"addDragHandler",value:function(e){throw new Error("Method not implemented.")}},{key:"onUp",value:function(e){throw new Error("Method not implemented.")}}]),l}(l.EventEmitter);exports.default=c;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","eventemitter3":"JJlS","./utils/anchor":"GUry"}],"cRNN":[function(require,module,exports) {
"use strict";function t(n,e,f,r,a,c){if(a-r<=f)return;const s=r+a>>1;o(n,e,s,r,a,c%2),t(n,e,f,r,s-1,c+1),t(n,e,f,s+1,a,c+1)}function o(t,e,f,r,a,c){for(;a>r;){if(a-r>600){const n=a-r+1,s=f-r+1,i=Math.log(n),u=.5*Math.exp(2*i/3),M=.5*Math.sqrt(i*u*(n-u)/n)*(s-n/2<0?-1:1);o(t,e,f,Math.max(r,Math.floor(f-s*u/n+M)),Math.min(a,Math.floor(f+(n-s)*u/n+M)),c)}const s=e[2*f+c];let i=r,u=a;for(n(t,e,r,f),e[2*a+c]>s&&n(t,e,r,a);i<u;){for(n(t,e,i,u),i++,u--;e[2*i+c]<s;)i++;for(;e[2*u+c]>s;)u--}e[2*r+c]===s?n(t,e,r,u):n(t,e,++u,a),u<=f&&(r=u+1),f<=u&&(a=u-1)}}function n(t,o,n,f){e(t,n,f),e(o,2*n,2*f),e(o,2*n+1,2*f+1)}function e(t,o,n){const e=t[o];t[o]=t[n],t[n]=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ZwoM":[function(require,module,exports) {
"use strict";function t(t,e,o,p,s,u,n){const h=[0,t.length-1,0],r=[];let c,l;for(;h.length;){const f=h.pop(),i=h.pop(),a=h.pop();if(i-a<=n){for(let n=a;n<=i;n++)c=e[2*n],l=e[2*n+1],c>=o&&c<=s&&l>=p&&l<=u&&r.push(t[n]);continue}const d=Math.floor((a+i)/2);c=e[2*d],l=e[2*d+1],c>=o&&c<=s&&l>=p&&l<=u&&r.push(t[d]);const g=(f+1)%2;(0===f?o<=c:p<=l)&&(h.push(a),h.push(d-1),h.push(g)),(0===f?s>=c:u>=l)&&(h.push(d+1),h.push(i),h.push(g))}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"z62Z":[function(require,module,exports) {
"use strict";function t(t,s,e,p,u,n){const r=[0,t.length-1,0],h=[],c=u*u;for(;r.length;){const f=r.pop(),l=r.pop(),i=r.pop();if(l-i<=n){for(let u=i;u<=l;u++)o(s[2*u],s[2*u+1],e,p)<=c&&h.push(t[u]);continue}const a=Math.floor((i+l)/2),d=s[2*a],g=s[2*a+1];o(d,g,e,p)<=c&&h.push(t[a]);const x=(f+1)%2;(0===f?e-u<=d:p-u<=g)&&(r.push(i),r.push(a-1),r.push(x)),(0===f?e+u>=d:p+u>=g)&&(r.push(a+1),r.push(l),r.push(x))}return h}function o(t,o,s,e){const p=t-s,u=o-e;return p*p+u*u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"sdrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./sort")),t=i(require("./range")),r=i(require("./within"));function i(e){return e&&e.__esModule?e:{default:e}}const s=e=>e[0],n=e=>e[1];class o{constructor(t,r=s,i=n,o=64,d=Float64Array){this.nodeSize=o,this.points=t;const u=t.length<65536?Uint16Array:Uint32Array,h=this.ids=new u(t.length),l=this.coords=new d(2*t.length);for(let e=0;e<t.length;e++)h[e]=e,l[2*e]=r(t[e]),l[2*e+1]=i(t[e]);(0,e.default)(h,l,o,0,h.length-1,0)}range(e,r,i,s){return(0,t.default)(this.ids,this.coords,e,r,i,s,this.nodeSize)}within(e,t,i){return(0,r.default)(this.ids,this.coords,e,t,i,this.nodeSize)}}exports.default=o;
},{"./sort":"cRNN","./range":"ZwoM","./within":"z62Z"}],"Ot57":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("kdbush"));function e(t){return t&&t.__esModule?t:{default:t}}const o={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:t=>t};class n{constructor(t){this.options=l(Object.create(o),t),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:o,minZoom:n,maxZoom:s,nodeSize:r}=this.options;o&&console.time("total time");const u=`prepare ${e.length} points`;o&&console.time(u),this.points=e;let a=[];for(let t=0;t<e.length;t++)e[t].geometry&&a.push(i(e[t],t));this.trees[s+1]=new t.default(a,d,m,r,Float32Array),o&&console.timeEnd(u);for(let i=s;i>=n;i--){const e=+Date.now();a=this._cluster(a,i),this.trees[i]=new t.default(a,d,m,r,Float32Array),o&&console.log("z%d: %d clusters in %dms",i,a.length,+Date.now()-e)}return o&&console.timeEnd("total time"),this}getClusters(t,e){let o=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let s=180===t[2]?180:((t[2]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)o=-180,s=180;else if(o>s){const t=this.getClusters([o,n,180,i],e),r=this.getClusters([-180,n,s,i],e);return t.concat(r)}const u=this.trees[this._limitZoom(e)],p=u.range(a(o),h(i),a(s),h(n)),c=[];for(const a of p){const t=u.points[a];c.push(t.numPoints?r(t):this.points[t.index])}return c}getChildren(t){const e=t>>5,o=t%32,n="No cluster with the specified id.",s=this.trees[o];if(!s)throw new Error(n);const i=s.points[e];if(!i)throw new Error(n);const u=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=s.within(i.x,i.y,u),h=[];for(const p of a){const e=s.points[p];e.parentId===t&&h.push(e.numPoints?r(e):this.points[e.index])}if(0===h.length)throw new Error(n);return h}getLeaves(t,e,o){e=e||10,o=o||0;const n=[];return this._appendLeaves(n,t,e,o,0),n}getTile(t,e,o){const n=this.trees[this._limitZoom(t)],s=Math.pow(2,t),{extent:i,radius:r}=this.options,u=r/i,a=(o-u)/s,h=(o+1+u)/s,p={features:[]};return this._addTileFeatures(n.range((e-u)/s,a,(e+1+u)/s,h),n.points,e,o,s,p),0===e&&this._addTileFeatures(n.range(1-u/s,a,1,h),n.points,s,o,s,p),e===s-1&&this._addTileFeatures(n.range(0,a,u/s,h),n.points,-1,o,s,p),p.features.length?p:null}getClusterExpansionZoom(t){let e=t%32-1;for(;e<=this.options.maxZoom;){const o=this.getChildren(t);if(e++,1!==o.length)break;t=o[0].properties.cluster_id}return e}_appendLeaves(t,e,o,n,s){const i=this.getChildren(e);for(const r of i){const e=r.properties;if(e&&e.cluster?s+e.point_count<=n?s+=e.point_count:s=this._appendLeaves(t,e.cluster_id,o,n,s):s<n?s++:t.push(r),t.length===o)break}return s}_addTileFeatures(t,e,o,n,s,i){for(const r of t){const t=e[r],a={type:1,geometry:[[Math.round(this.options.extent*(t.x*s-o)),Math.round(this.options.extent*(t.y*s-n))]],tags:t.numPoints?u(t):this.points[t.index].properties},h=t.numPoints?t.id:this.points[t.index].id;void 0!==h&&(a.id=h),i.features.push(a)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))}_cluster(t,e){const o=[],{radius:n,extent:i,reduce:r}=this.options,u=n/(i*Math.pow(2,e));for(let a=0;a<t.length;a++){const n=t[a];if(n.zoom<=e)continue;n.zoom=e;const i=this.trees[e+1],h=i.within(n.x,n.y,u);let p=n.numPoints||1,c=n.x*p,l=n.y*p,d=r&&p>1?this._map(n,!0):null;const m=(a<<5)+(e+1);for(const t of h){const o=i.points[t];if(o.zoom<=e)continue;o.zoom=e;const s=o.numPoints||1;c+=o.x*s,l+=o.y*s,p+=s,o.parentId=m,r&&(d||(d=this._map(n,!0)),r(d,this._map(o)))}1===p?o.push(n):(n.parentId=m,o.push(s(c/p,l/p,m,p,d)))}return o}_map(t,e){if(t.numPoints)return e?l({},t.properties):t.properties;const o=this.points[t.index].properties,n=this.options.map(o);return e&&n===o?l({},n):n}}function s(t,e,o,n,s){return{x:t,y:e,zoom:1/0,id:o,parentId:-1,numPoints:n,properties:s}}function i(t,e){const[o,n]=t.geometry.coordinates;return{x:a(o),y:h(n),zoom:1/0,index:e,parentId:-1}}function r(t){return{type:"Feature",id:t.id,properties:u(t),geometry:{type:"Point",coordinates:[p(t.x),c(t.y)]}}}function u(t){const e=t.numPoints,o=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?`${Math.round(e/100)/10}k`:e;return l(l({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:o})}function a(t){return t/360+.5}function h(t){const e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}function p(t){return 360*(t-.5)}function c(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function l(t,e){for(const o in e)t[o]=e[o];return t}function d(t){return t.x}function m(t){return t.y}exports.default=n;
},{"kdbush":"sdrn"}],"KLVU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/defineProperty")),r=p(require("@babel/runtime/helpers/classCallCheck")),t=p(require("@babel/runtime/helpers/createClass")),i=p(require("@babel/runtime/helpers/possibleConstructorReturn")),a=p(require("@babel/runtime/helpers/getPrototypeOf")),s=p(require("@babel/runtime/helpers/assertThisInitialized")),o=p(require("@babel/runtime/helpers/inherits")),n=require("@antv/l7-core"),u=require("@antv/l7-utils"),l=require("eventemitter3"),c=p(require("supercluster")),m=p(require("./marker"));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function d(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){(0,e.default)(r,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}var f=function(e){function l(e){var t,o;return(0,r.default)(this,l),(o=(0,i.default)(this,(0,a.default)(l).call(this))).markers=[],o.markerLayerOption=void 0,o.clusterIndex=void 0,o.points=[],o.clusterMarkers=[],o.mapsService=void 0,o.scene=void 0,o.zoom=void 0,o.markerLayerOption=d({},o.getDefault(),{},e),(0,u.bindAll)(["update"],(0,s.default)(o)),o.zoom=(null===(t=o.markerLayerOption.clusterOption)||void 0===t?void 0:t.zoom)||-99,o}return(0,o.default)(l,e),(0,t.default)(l,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:"",element:this.generateElement}}}},{key:"addTo",value:function(e){return this.scene=e,this.mapsService=e.get(n.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("zoom",this.update),this.mapsService.on("zoomchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(e){this.markerLayerOption.cluster&&this.addPoint(e),this.markers.push(e)}},{key:"removeMarker",value:function(e){this.markers.indexOf(e);var r=this.markers.indexOf(e);r>-1&&this.markers.splice(r,1)}},{key:"getMarkers",value:function(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var e=this;this.getMarkers().forEach(function(r){r.addTo(e.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(e){e.remove()}),this.mapsService.off("zoom",this.update),this.mapsService.off("zoomchange",this.update),this.markers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(e){var r=e.getLnglat(),t={geometry:{type:"Point",coordinates:[r.lng,r.lat]},properties:e.getExtData()};this.points.push(t)}},{key:"initCluster",value:function(){if(this.markerLayerOption.cluster){var e=this.markerLayerOption.clusterOption,r=e.radius,t=e.minZoom,i=void 0===t?0:t,a=e.maxZoom;this.clusterIndex=new c.default({radius:r,minZoom:i,maxZoom:a}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(e){var r=this,t=this.clusterIndex.getClusters([-180,-85,180,85],e);this.clusterMarkers.forEach(function(e){e.remove()}),this.clusterMarkers=[],t.forEach(function(e){var t=e.properties&&e.properties.hasOwnProperty("point_count")?r.clusterMarker(e):r.normalMarker(e);r.clusterMarkers.push(t),t.addTo(r.scene)})}},{key:"clusterMarker",value:function(e){var r=this.markerLayerOption.clusterOption.element;return new m.default({element:r(e)}).setLnglat({lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]})}},{key:"normalMarker",value:function(e){return(new m.default).setLnglat({lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]})}},{key:"update",value:function(){var e=this.mapsService.getZoom();Math.abs(e-this.zoom)>1&&(this.getClusterMarker(Math.floor(e)),this.zoom=Math.floor(e))}},{key:"generateElement",value:function(e){var r=u.DOM.create("div","l7-marker-cluster"),t=u.DOM.create("div","",r);return u.DOM.create("span","",t).textContent=e.properties.point_count,r}}]),l}(l.EventEmitter);exports.default=f;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","eventemitter3":"JJlS","supercluster":"Ot57","./marker":"IByJ"}],"ABiR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("@babel/runtime/helpers/defineProperty")),t=p(require("@babel/runtime/helpers/classCallCheck")),i=p(require("@babel/runtime/helpers/createClass")),n=p(require("@babel/runtime/helpers/possibleConstructorReturn")),o=p(require("@babel/runtime/helpers/getPrototypeOf")),r=p(require("@babel/runtime/helpers/assertThisInitialized")),s=p(require("@babel/runtime/helpers/inherits")),a=require("@antv/l7-core"),c=require("@antv/l7-utils"),u=require("eventemitter3"),l=require("./utils/anchor");function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function d(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?h(Object(n),!0).forEach(function(i){(0,e.default)(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var v=function(e){function u(e){var i;return(0,t.default)(this,u),(i=(0,n.default)(this,(0,o.default)(u).call(this))).popupOption=void 0,i.mapsService=void 0,i.lngLat=void 0,i.content=void 0,i.closeButton=void 0,i.timeoutInstance=void 0,i.container=void 0,i.tip=void 0,i.scene=void 0,i.popupOption=d({},i.getdefault(),{},e),(0,c.bindAll)(["update","onClickClose","remove"],(0,r.default)(i)),i}return(0,s.default)(u,e),(0,i.default)(u,[{key:"addTo",value:function(e){var t=this;return this.mapsService=e.get(a.TYPES.IMapService),this.mapsService.on("camerachange",this.update),this.scene=e,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){t.mapsService.on("click",t.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(e){var t,i=window.document.createDocumentFragment(),n=window.document.createElement("body");for(n.innerHTML=e;t=n.firstChild;)i.appendChild(t);return this.setDOMContent(i)}},{key:"setLnglat",value:function(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(e){return this.setDOMContent(window.document.createTextNode(e))}},{key:"setMaxWidth",value:function(e){return this.popupOption.maxWidth=e,this.update(),this}},{key:"setDOMContent",value:function(e){return this.createContent(),this.content.appendChild(e),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&c.DOM.remove(this.content),this.content=c.DOM.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=c.DOM.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(e,t,i){var n=window.document.createElement(e);return void 0!==t&&(n.className=t),i&&i.appendChild(n),n}},{key:"removeDom",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:l.anchorType.BOTTOM,className:""}}},{key:"onClickClose",value:function(e){e.stopPropagation&&e.stopPropagation(),this.remove()}},{key:"update",value:function(){var e=this,t=this.lngLat,i=this.popupOption,n=i.className,o=i.maxWidth,r=i.anchor;if(this.mapsService&&t&&this.content){var s=this.mapsService.getMarkerContainer();!this.container&&s&&(this.container=this.creatDom("div","l7-popup",s.parentNode),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),n&&n.split(" ").forEach(function(t){return e.container.classList.add(t)}),this.container.addEventListener("mousedown",function(e){e.stopPropagation()}),this.container.addEventListener("click",function(e){e.stopPropagation()})),o&&this.container.style.maxWidth!==o&&(this.container.style.maxWidth=o),this.updatePosition(),c.DOM.setTransform(this.container,"".concat(l.anchorTranslate[r])),(0,l.applyAnchorClass)(this.container,r,"popup")}}},{key:"updatePosition",value:function(){if(this.mapsService){var e=this.lngLat,t=e.lng,i=e.lat,n=this.popupOption.offsets,o=this.mapsService.lngLatToContainer([t,i]);this.container.style.left=o.x+n[0]+"px",this.container.style.top=o.y-n[1]+"px"}}}]),u}(u.EventEmitter);exports.default=v;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","eventemitter3":"JJlS","./utils/anchor":"GUry"}],"BV9J":[function(require,module,exports) {
function e(e,t){t||(t=document);var a=t.head||t.getElementsByTagName("head")[0];if(!a){a=t.createElement("head");var d=t.body||t.getElementsByTagName("body")[0];d?d.parentNode.insertBefore(a,d):t.documentElement.appendChild(a)}var n=t.createElement("style");return n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(t.createTextNode(e)),a.appendChild(n),n}module.exports=e;
},{}],"QgKN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Layers",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Logo",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Marker",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"MarkerLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Popup",{enumerable:!0,get:function(){return p.default}});var n=a(require("./control/BaseControl")),t=a(require("./control/layer")),o=a(require("./control/logo")),e=a(require("./control/scale")),r=a(require("./control/zoom")),l=a(require("./marker")),i=a(require("./markerlayer")),p=a(require("./popup"));function a(n){return n&&n.__esModule?n:{default:n}}require("load-styles")('/* @antv/l7-component */\n.l7-marker-container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n }\n\n.l7-marker {\n\tposition: absolute !important;\n\ttop: 0;\n\tleft: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n\n.l7-marker-cluster {\n  background-clip: padding-box;\n  border-radius: 20px;\n  background-color: rgba(181, 226, 140, 0.6);\n  width: 40px;\n  height: 40px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-left: 5px;\n  margin-top: 5px;\n  text-align: center;\n  border-radius: 15px;\n  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;\n  background-color: rgba(110, 204, 57, 0.6);\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n\n.l7-popup-anchor-left {\n    -webkit-flex-direction: row;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-flex;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\t-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t    -ms-user-select: none;\n\t        user-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: -webkit-box;\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\tborder-bottom: 1px solid #ccc;\n\twidth: 26px;\n\theight: 26px;\n\tline-height: 26px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: black;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 4px;\n\tborder-top-right-radius: 4px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-top,\n.l7-bottom {\n\tposition: absolute;\n\tz-index: 1000;\n\tpointer-events: none;\n\t}\n.l7-top {\n\ttop: 0;\n\t}\n.l7-right {\n\tright: 0;\n\t}\n.l7-bottom {\n\tbottom: 0;\n\t}\n.l7-left {\n\tleft: 0;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}\n.l7-right .l7-control {\n\tfloat: right;\n\t}\n.l7-top .l7-control {\n\tmargin-top: 10px;\n\t}\n.l7-bottom .l7-control {\n\tmargin-bottom: 10px;\n\t}\n.l7-left .l7-control {\n\tmargin-left: 10px;\n\t}\n.l7-right .l7-control {\n\tmargin-right: 10px;\n  }\n\n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n\tcolor: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n\tfont-size: 11px;\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #777;\n\tborder-top: none;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-webkit-box-sizing: border-box;\n\t        box-sizing: border-box;\n\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.5);\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\t-webkit-box-shadow: none;\n\t        box-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n\t}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 5px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC\');\n\twidth: 36px;\n\theight: 36px;\n\t}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n\n.l7-popup-anchor-left {\n    -webkit-flex-direction: row;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-flex;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\t-ms-flex-item-align: start;\n\t    align-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\t-ms-flex-item-align: end;\n\t    align-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\t-ms-flex-item-align: center;\n\t    align-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\t-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\t        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\t-webkit-user-select: none;\n\t   -moz-user-select: none;\n\t    -ms-user-select: none;\n\t        user-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: -webkit-box;\n\tdisplay: -webkit-flex;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\t-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\t        box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\twidth: 36px;\n\theight: 36px;\n  line-height: 30px;\n  font-size: 30px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: #8E9DAB;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 4px;\n\tborder-top-right-radius: 4px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-top,\n.l7-bottom {\n\tposition: absolute;\n\tz-index: 1000;\n\tpointer-events: none;\n\t}\n.l7-top {\n\ttop: 0;\n\t}\n.l7-right {\n\tright: 0;\n\t}\n.l7-bottom {\n\tbottom: 0;\n\t}\n.l7-left {\n\tleft: 0;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}\n.l7-right .l7-control {\n\tfloat: right;\n\t}\n.l7-top .l7-control {\n\tmargin-top: 10px;\n\t}\n.l7-bottom .l7-control {\n\tmargin-bottom: 10px;\n\t}\n.l7-left .l7-control {\n\tmargin-left: 10px;\n\t}\n.l7-right .l7-control {\n\tmargin-right: 10px;\n  }\n\n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n  color: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n  font-size: 11px;\n  padding: 5px 5px 2px 5px;\n  background: rgba(255, 255, 255, 0.7);\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #8E9DAB;\n  border-top: none;\n  color: #8e9dab;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-webkit-box-sizing: border-box;\n\t        box-sizing: border-box;\n\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.8);\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\t-webkit-box-shadow: none;\n\t        box-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n  }\n  /*logo */\n\n  .l7-ctrl-logo {\n    background-size: 100% 100%;\n    width: 89px;\n    height: 16px;\n    margin: 0 0 -3px -3px;\n    display: block;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC\');\n}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\t-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\t        box-shadow: 0 1px 8px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 2px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC\');\n\twidth: 36px;\n  height: 36px;\n  background-size: 26px 26px;\n\t}\n\n.l7-touch .l7-control-layers-toggle {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n\tdisplay: none;\n\t}\n.l7-control-layers-expanded .l7-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.l7-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tcolor: #59626B;\n\tbackground: #fff;\n\t}\n.l7-control-layers-scrollbar {\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tpadding-right: 5px;\n\t}\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.l7-control-layers label {\n  display: block;\n  padding: 8px;\n  }\n.l7-control-layers label input[type="radio"], input[type="checkbox"]{\n  width: 14px;\n  height: 14px;\n  margin: 0;\n  vertical-align: middle;\n}\n.l7-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #D8D8D8;\n\tmargin: 5px -10px 5px -6px;\n}\n\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n');
},{"./control/BaseControl":"afrS","./control/layer":"pagV","./control/logo":"YMW0","./control/scale":"B1Qf","./control/zoom":"RBp4","./marker":"IByJ","./markerlayer":"KLVU","./popup":"ABiR","load-styles":"BV9J"}],"Jx9Q":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof e&&e.amd?e(r):t.createREGL=r()}(this,function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},r="\n";function n(e){var t=new Error("(regl) "+e);throw console.error(t),t}function a(e,t){e||n(t)}function i(e){return e?": "+e:""}function o(e,t,r){t.indexOf(e)<0&&n("invalid value"+i(r)+". must be one of: "+t)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(e,t){for(e+="";e.length<t;)e=" "+e;return e}function s(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function c(e,t){this.number=e,this.line=t,this.errors=[]}function l(e,t,r){this.file=e,this.line=t,this.message=r}function d(){var e=new Error,t=(e.stack||e).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return n?n[1]:"unknown"}function m(){var e=new Error,t=(e.stack||e).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return n?n[1]:"unknown"}function p(e,t){var r,n=e.split("\n"),a=1,i=0,o={unknown:new s,0:new s};o.unknown.name=o[0].name=t||d(),o.unknown.lines.push(new c(0,""));for(var f=0;f<n.length;++f){var u=n[f],l=/^\s*\#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var m=/(\d+)(\s+\d+)?/.exec(l[2]);m&&(a=0|m[1],m[2]&&((i=0|m[2])in o||(o[i]=new s)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(o[i].name=p[1]?(r=p[2],"undefined"!=typeof atob?atob(r):"base64:"+r):p[2])}o[i].lines.push(new c(a++,u))}return Object.keys(o).forEach(function(e){var t=o[e];t.lines.forEach(function(e){t.index[e.number]=e})}),o}function h(e){e._commandRef=d()}function b(e,t){var r=m();n(e+" in command "+(t||d())+("unknown"===r?"":" called from "+r))}function g(e,t,r,n){typeof e!==t&&b("invalid parameter type"+i(r)+". expected "+t+", got "+typeof e,n||d())}var v=33071,y=9728,x=9984,w=9985,k=9986,A=9987,_=5126,S=32819,T=32820,E=33635,D=34042,j={};function O(e,t){return e===T||e===S||e===E?2:e===D?4:j[e]*t}function C(e){return!(e&e-1||!e)}j[5120]=j[5121]=1,j[5122]=j[5123]=j[36193]=j[E]=j[S]=j[T]=2,j[5124]=j[5125]=j[_]=j[D]=4;var F=t(a,{optional:function(e){e()},raise:n,commandRaise:b,command:function(e,t,r){e||b(t,r||d())},parameter:function(e,t,r){e in t||n("unknown parameter ("+e+")"+i(r)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,r,n){e in t||b("unknown parameter ("+e+")"+i(r)+". possible values: "+Object.keys(t).join(),n||d())},constructor:function(e){Object.keys(e).forEach(function(e){f.indexOf(e)<0&&n('invalid regl constructor argument "'+e+'". must be one of '+f)})},type:function(e,t,r){typeof e!==t&&n("invalid parameter type"+i(r)+". expected "+t+", got "+typeof e)},commandType:g,isTypedArray:function(t,r){e(t)||n("invalid parameter type"+i(r)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||n("invalid parameter type, ("+e+")"+i(t)+". must be a nonnegative integer")},oneOf:o,shaderError:function(e,t,n,i,o){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var f=e.getShaderInfoLog(t),s=i===e.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",s+" shader source must be a string",o);var c=p(n,o),d=function(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var r=/^ERROR\:\s+(\d+)\:(\d+)\:\s*(.*)$/.exec(e);r?t.push(new l(0|r[1],0|r[2],r[3].trim())):e.length>0&&t.push(new l("unknown",0,e))}}),t}(f);!function(e,t){t.forEach(function(t){var r=e[t.file];if(r){var n=r.index[t.line];if(n)return n.errors.push(t),void(r.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}(c,d),Object.keys(c).forEach(function(e){var t=c[e];if(t.hasErrors){var n=[""],a=[""];i("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach(function(e){if(e.errors.length>0){i(u(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(e.line+r,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach(function(n){var a=n.message,o=/^\s*\'(.*)\'\s*\:\s*(.*)$/.exec(a);if(o){var f=o[1];switch(a=o[2],f){case"assign":f="="}t=Math.max(e.line.indexOf(f,t),0)}else t=0;i(u("| ",6)),i(u("^^^",t+3)+r,"font-weight:bold"),i(u("| ",6)),i(a+r,"font-weight:bold")}),i(u("| ",6)+r)}else i(u(e.number,4)+"|  "),i(e.line+r,"color:red")}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(a[0]=n.join("%c"),console.log.apply(console,a))}function i(e,t){n.push(e),a.push(t||"")}}),a.raise("Error compiling "+s+" shader, "+c[0].name)}},linkError:function(e,t,n,i,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var f=e.getProgramInfoLog(t),u=p(n,o),s='Error linking program with vertex shader, "'+p(i,o)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+r+"%c"+f,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+r+f),a.raise(s)}},callSite:m,saveCommandRef:h,saveDrawInfo:function(e,t,r,n){function a(e){return e?n.id(e):0}function i(e,t){Object.keys(t).forEach(function(t){e[n.id(t)]=!0})}h(e),e._fragId=a(e.static.frag),e._vertId=a(e.static.vert);var o=e._uniformSet={};i(o,t.static),i(o,t.dynamic);var f=e._attributeSet={};i(f,r.static),i(f,r.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,r){e.texture?o(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):o(e.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(e,t,r){var n,i=t.width,o=t.height,f=t.channels;a(i>0&&i<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),e.wrapS===v&&e.wrapT===v||a(C(i)&&C(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==o&&a(e.minFilter!==x&&e.minFilter!==k&&e.minFilter!==w&&e.minFilter!==A,"min filter requires mipmap"):(a(C(i)&&C(o),"texture must be a square power of 2 to support mipmapping"),a(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===_&&(r.extensions.indexOf("oes_texture_float_linear")<0&&a(e.minFilter===y&&e.magFilter===y,"filter not supported, must enable oes_texture_float_linear"),a(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(n=0;n<16;++n)if(u[n]){var s=i>>n,c=o>>n;a(t.mipmask&1<<n,"missing mipmap data");var l=u[n];if(a(l.width===s&&l.height===c,"invalid shape for mip images"),a(l.format===t.format&&l.internalformat===t.internalformat&&l.type===t.type,"incompatible type for mip image"),l.compressed);else if(l.data){var d=Math.ceil(O(l.type,f)*s/l.unpackAlignment)*l.unpackAlignment;a(l.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else e.genMipmaps||a(0==(t.mipmask&1<<n),"extra mipmap data");t.compressed&&a(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,r,n){var i=e.width,o=e.height,f=e.channels;a(i>0&&i<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),a(i===o,"cube map must be square"),a(t.wrapS===v&&t.wrapT===v,"wrap mode not supported by cube map");for(var u=0;u<r.length;++u){var s=r[u];a(s.width===i&&s.height===o,"inconsistent cube map face shape"),t.genMipmaps&&(a(!s.compressed,"can not generate mipmap for compressed textures"),a(1===s.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=s.images,l=0;l<16;++l){var d=c[l];if(d){var m=i>>l,p=o>>l;a(s.mipmask&1<<l,"missing mipmap data"),a(d.width===m&&d.height===p,"invalid shape for mip images"),a(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed||(d.data?a(d.data.byteLength===m*p*Math.max(O(d.type,f),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}}),z=0,B=0;function P(e,t){this.id=z++,this.type=e,this.data=t}function I(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function R(e){return"["+function e(t){if(0===t.length)return[];var r=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&r===n&&('"'===r||"'"===r))return['"'+I(t.substr(1,t.length-2))+'"'];var a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(a)return e(t.substr(0,a.index)).concat(e(a[1])).concat(e(t.substr(a.index+a[0].length)));var i=t.split(".");if(1===i.length)return['"'+I(t)+'"'];for(var o=[],f=0;f<i.length;++f)o=o.concat(e(i[f]));return o}(e).join("][")+"]"}var L={DynamicVariable:P,define:function(e,t){return new P(e,R(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof P},unbox:function(e,t){return"function"==typeof e?new P(B,e):e},accessor:R},M={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},W="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function U(e){return"string"==typeof e?e.split():(F(Array.isArray(e),"invalid extension array"),e)}function H(e){return"string"==typeof e?(F("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function G(e){var r,n,a,i,o,f=e||{},u={},s=[],c=[],l="undefined"==typeof window?1:window.devicePixelRatio,d=!1,m=function(e){e&&F.raise(e)},p=function(){};if("string"==typeof f?(F("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),r=document.querySelector(f),F(r,"invalid query string for element")):"object"==typeof f?"string"==typeof(o=f).nodeName&&"function"==typeof o.appendChild&&"function"==typeof o.getBoundingClientRect?r=f:!function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(f)?(F.constructor(f),"gl"in f?i=f.gl:"canvas"in f?a=H(f.canvas):"container"in f&&(n=H(f.container)),"attributes"in f&&(u=f.attributes,F.type(u,"object","invalid context attributes")),"extensions"in f&&(s=U(f.extensions)),"optionalExtensions"in f&&(c=U(f.optionalExtensions)),"onDone"in f&&(F.type(f.onDone,"function","invalid or missing onDone callback"),m=f.onDone),"profile"in f&&(d=!!f.profile),"pixelRatio"in f&&(l=+f.pixelRatio,F(l>0,"invalid pixel ratio"))):a=(i=f).canvas:F.raise("invalid arguments to regl"),r&&("canvas"===r.nodeName.toLowerCase()?a=r:n=r),!i){if(!a){F("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var h=function(e,r,n){var a=document.createElement("canvas");function i(){var r=window.innerWidth,i=window.innerHeight;if(e!==document.body){var o=e.getBoundingClientRect();r=o.right-o.left,i=o.bottom-o.top}a.width=n*r,a.height=n*i,t(a.style,{width:r+"px",height:i+"px"})}return t(a.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(a),e===document.body&&(a.style.position="absolute",t(e.style,{margin:0,padding:0})),window.addEventListener("resize",i,!1),i(),{canvas:a,onDestroy:function(){window.removeEventListener("resize",i),e.removeChild(a)}}}(n||document.body,0,l);if(!h)return null;a=h.canvas,p=h.onDestroy}i=function(e,t){function r(r){try{return e.getContext(r,t)}catch(n){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(a,u)}return i?{gl:i,canvas:a,container:n,extensions:s,optionalExtensions:c,pixelRatio:l,profile:d,onDone:m,onDestroy:p}:(p(),m("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function q(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}var N=5120,Q=5121,V=5122,Y=5123,X=5124,$=5125,K=5126;function J(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1}function Z(){var e=q(8,function(){return[]});function t(t){var r=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),n=e[J(r)>>2];return n.length>0?n.pop():new ArrayBuffer(r)}function r(t){e[J(t.byteLength)>>2].push(t)}return{alloc:t,free:r,allocType:function(e,r){var n=null;switch(e){case N:n=new Int8Array(t(r),0,r);break;case Q:n=new Uint8Array(t(r),0,r);break;case V:n=new Int16Array(t(2*r),0,r);break;case Y:n=new Uint16Array(t(2*r),0,r);break;case X:n=new Int32Array(t(4*r),0,r);break;case $:n=new Uint32Array(t(4*r),0,r);break;case K:n=new Float32Array(t(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){r(e.buffer)}}}var ee=Z();ee.zero=Z();var te=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,a=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),a=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){var o=e.createTexture();e.bindTexture(3553,o),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var f=e.createFramebuffer();if(e.bindFramebuffer(36160,f),e.framebufferTexture2D(36160,36064,3553,o,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))i=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=ee.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?i=!1:(e.deleteFramebuffer(f),e.deleteTexture(o),i=1===u[0]),ee.freeType(u)}}var s=!0;if(!("undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)))){var c=e.createTexture(),l=ee.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,c),e.texImage2D(34069,0,6408,3,3,0,6408,5121,l),ee.freeType(l),e.bindTexture(34067,null),e.deleteTexture(c),s=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:s}};function re(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var ne=function(e){return Object.keys(e).map(function(t){return e[t]})},ae={shape:function(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t},flatten:function(e,t,r,n){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;var o=n||ee.allocType(r,a);switch(t.length){case 0:break;case 1:!function(e,t,r){for(var n=0;n<t;++n)r[n]=e[n]}(e,t[0],o);break;case 2:!function(e,t,r,n){for(var a=0,i=0;i<t;++i)for(var o=e[i],f=0;f<r;++f)n[a++]=o[f]}(e,t[0],t[1],o);break;case 3:ie(e,t[0],t[1],t[2],o,0);break;default:!function e(t,r,n,a,i){var o=1;for(var f=n+1;f<r.length;++f)o*=r[f];var u=r[n];if(r.length-n==4){var s=r[n+1],c=r[n+2],l=r[n+3];for(f=0;f<u;++f)ie(t[f],s,c,l,a,i),i+=o}else for(f=0;f<u;++f)e(t[f],r,n+1,a,i),i+=o}(e,t,0,o,0)}return o}};function ie(e,t,r,n,a,i){for(var o=i,f=0;f<t;++f)for(var u=e[f],s=0;s<r;++s)for(var c=u[s],l=0;l<n;++l)a[o++]=c[l]}var oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ue={dynamic:35048,stream:35040,static:35044},se=ae.flatten,ce=ae.shape,le=35044,de=35040,me=5121,pe=5126,he=[];function be(e){return 0|oe[Object.prototype.toString.call(e)]}function ge(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function ve(e,t,r,n,a,i,o){for(var f=0,u=0;u<r;++u)for(var s=0;s<n;++s)e[f++]=t[a*u+i*s+o]}he[5120]=1,he[5122]=2,he[5124]=4,he[5121]=1,he[5123]=2,he[5125]=4,he[5126]=4;var ye={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},xe=0,we=1,ke=4,Ae=5120,_e=5121,Se=5122,Te=5123,Ee=5124,De=5125,je=34963,Oe=35040,Ce=35044;var Fe=new Float32Array(1),ze=new Uint32Array(Fe.buffer),Be=5123;function Pe(e){for(var t=ee.allocType(Be,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-1/0)t[r]=64512;else{Fe[0]=e[r];var n=ze[0],a=n>>>31<<15,i=(n<<1>>>24)-127,o=n>>13&1023;if(i<-24)t[r]=a;else if(i<-14){var f=-14-i;t[r]=a+(o+1024>>f)}else t[r]=i>15?a+31744:a+(i+15<<10)+o}return t}function Ie(t){return Array.isArray(t)||e(t)}var Re=function(e){return!(e&e-1||!e)},Le=34467,Me=3553,We=34067,Ue=34069,He=6408,Ge=6406,qe=6407,Ne=6409,Qe=6410,Ve=32854,Ye=32855,Xe=36194,$e=32819,Ke=32820,Je=33635,Ze=34042,et=6402,tt=34041,rt=35904,nt=35906,at=36193,it=33776,ot=33777,ft=33778,ut=33779,st=35986,ct=35987,lt=34798,dt=35840,mt=35841,pt=35842,ht=35843,bt=36196,gt=5121,vt=5123,yt=5125,xt=5126,wt=10242,kt=10243,At=10497,_t=33071,St=33648,Tt=10240,Et=10241,Dt=9728,jt=9729,Ot=9984,Ct=9985,Ft=9986,zt=9987,Bt=33170,Pt=4352,It=4353,Rt=4354,Lt=34046,Mt=3317,Wt=37440,Ut=37441,Ht=37443,Gt=37444,qt=33984,Nt=[Ot,Ft,Ct,zt],Qt=[0,Ne,Qe,qe,He],Vt={};function Yt(e){return"[object "+e+"]"}Vt[Ne]=Vt[Ge]=Vt[et]=1,Vt[tt]=Vt[Qe]=2,Vt[qe]=Vt[rt]=3,Vt[He]=Vt[nt]=4;var Xt=Yt("HTMLCanvasElement"),$t=Yt("CanvasRenderingContext2D"),Kt=Yt("ImageBitmap"),Jt=Yt("HTMLImageElement"),Zt=Yt("HTMLVideoElement"),er=Object.keys(oe).concat([Xt,$t,Kt,Jt,Zt]),tr=[];tr[gt]=1,tr[xt]=4,tr[at]=2,tr[vt]=2,tr[yt]=4;var rr=[];function nr(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function ar(e){return!!Array.isArray(e)&&!(0===e.length||!Ie(e[0]))}function ir(e){return Object.prototype.toString.call(e)}function or(e){return ir(e)===Xt}function fr(e){if(!e)return!1;var t=ir(e);return er.indexOf(t)>=0||(nr(e)||ar(e)||re(e))}function ur(e){return 0|oe[Object.prototype.toString.call(e)]}function sr(e,t){return ee.allocType(e.type===at?xt:e.type,t)}function cr(e,t){e.type===at?(e.data=Pe(t),ee.freeType(t)):e.data=t}function lr(e,t,r,n,a,i){var o;if(o=void 0!==rr[e]?rr[e]:Vt[e]*tr[t],i&&(o*=6),a){for(var f=0,u=r;u>=1;)f+=o*u*u,u/=2;return f}return o*r*n}function dr(r,n,a,i,o,f,u){var s={"don't care":Pt,"dont care":Pt,nice:Rt,fast:It},c={repeat:At,clamp:_t,mirror:St},l={nearest:Dt,linear:jt},d=t({mipmap:zt,"nearest mipmap nearest":Ot,"linear mipmap nearest":Ct,"nearest mipmap linear":Ft,"linear mipmap linear":zt},l),m={none:0,browser:Gt},p={uint8:gt,rgba4:$e,rgb565:Je,"rgb5 a1":Ke},h={alpha:Ge,luminance:Ne,"luminance alpha":Qe,rgb:qe,rgba:He,rgba4:Ve,"rgb5 a1":Ye,rgb565:Xe},b={};n.ext_srgb&&(h.srgb=rt,h.srgba=nt),n.oes_texture_float&&(p.float32=p.float=xt),n.oes_texture_half_float&&(p.float16=p["half float"]=at),n.webgl_depth_texture&&(t(h,{depth:et,"depth stencil":tt}),t(p,{uint16:vt,uint32:yt,"depth stencil":Ze})),n.webgl_compressed_texture_s3tc&&t(b,{"rgb s3tc dxt1":it,"rgba s3tc dxt1":ot,"rgba s3tc dxt3":ft,"rgba s3tc dxt5":ut}),n.webgl_compressed_texture_atc&&t(b,{"rgb atc":st,"rgba atc explicit alpha":ct,"rgba atc interpolated alpha":lt}),n.webgl_compressed_texture_pvrtc&&t(b,{"rgb pvrtc 4bppv1":dt,"rgb pvrtc 2bppv1":mt,"rgba pvrtc 4bppv1":pt,"rgba pvrtc 2bppv1":ht}),n.webgl_compressed_texture_etc1&&(b["rgb etc1"]=bt);var g=Array.prototype.slice.call(r.getParameter(Le));Object.keys(b).forEach(function(e){var t=b[e];g.indexOf(t)>=0&&(h[e]=t)});var v=Object.keys(h);a.textureFormats=v;var y=[];Object.keys(h).forEach(function(e){var t=h[e];y[t]=e});var x=[];Object.keys(p).forEach(function(e){var t=p[e];x[t]=e});var w=[];Object.keys(l).forEach(function(e){var t=l[e];w[t]=e});var k=[];Object.keys(d).forEach(function(e){var t=d[e];k[t]=e});var A=[];Object.keys(c).forEach(function(e){var t=c[e];A[t]=e});var _=v.reduce(function(e,t){var r=h[t];return r===Ne||r===Ge||r===Ne||r===Qe||r===et||r===tt?e[r]=r:r===Ye||t.indexOf("rgba")>=0?e[r]=He:e[r]=qe,e},{});function S(){this.internalformat=He,this.format=He,this.type=gt,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Gt,this.width=0,this.height=0,this.channels=0}function T(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function E(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(F.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(F.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(F.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(F.parameter(t.colorSpace,m,"invalid colorSpace"),e.colorSpace=m[t.colorSpace]),"type"in t){var r=t.type;F(n.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),F(n.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),F(n.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(r,p,"invalid texture type"),e.type=p[r]}var i=e.width,o=e.height,f=e.channels,u=!1;"shape"in t?(F(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),i=t.shape[0],o=t.shape[1],3===t.shape.length&&(f=t.shape[2],F(f>0&&f<=4,"invalid number of channels"),u=!0),F(i>=0&&i<=a.maxTextureSize,"invalid width"),F(o>=0&&o<=a.maxTextureSize,"invalid height")):("radius"in t&&(i=o=t.radius,F(i>=0&&i<=a.maxTextureSize,"invalid radius")),"width"in t&&(i=t.width,F(i>=0&&i<=a.maxTextureSize,"invalid width")),"height"in t&&(o=t.height,F(o>=0&&o<=a.maxTextureSize,"invalid height")),"channels"in t&&(f=t.channels,F(f>0&&f<=4,"invalid number of channels"),u=!0)),e.width=0|i,e.height=0|o,e.channels=0|f;var s=!1;if("format"in t){var c=t.format;F(n.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(c,h,"invalid texture format");var l=e.internalformat=h[c];e.format=_[l],c in p&&("type"in t||(e.type=p[c])),c in b&&(e.compressed=!0),s=!0}!u&&s?e.channels=Vt[e.format]:u&&!s?e.channels!==Qt[e.format]&&(e.format=e.internalformat=Qt[e.channels]):s&&u&&F(e.channels===Vt[e.format],"number of channels inconsistent with specified format")}}function D(e){r.pixelStorei(Wt,e.flipY),r.pixelStorei(Ut,e.premultiplyAlpha),r.pixelStorei(Ht,e.colorSpace),r.pixelStorei(Mt,e.unpackAlignment)}function j(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function O(t,r){var n=null;if(fr(r)?n=r:r&&(F.type(r,"object","invalid pixel data type"),E(t,r),"x"in r&&(t.xOffset=0|r.x),"y"in r&&(t.yOffset=0|r.y),fr(r.data)&&(n=r.data)),F(!t.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),r.copy){F(!n,"can not specify copy and data field for the same texture");var i=o.viewportWidth,f=o.viewportHeight;t.width=t.width||i-t.xOffset,t.height=t.height||f-t.yOffset,t.needsCopy=!0,F(t.xOffset>=0&&t.xOffset<i&&t.yOffset>=0&&t.yOffset<f&&t.width>0&&t.width<=i&&t.height>0&&t.height<=f,"copy texture read out of bounds")}else if(n){if(e(n))t.channels=t.channels||4,t.data=n,"type"in r||t.type!==gt||(t.type=ur(n));else if(nr(n))t.channels=t.channels||4,function(e,t){var r=t.length;switch(e.type){case gt:case vt:case yt:case xt:var n=ee.allocType(e.type,r);n.set(t),e.data=n;break;case at:e.data=Pe(t);break;default:F.raise("unsupported texture type, must specify a typed array")}}(t,n),t.alignment=1,t.needsFree=!0;else if(re(n)){var u=n.data;Array.isArray(u)||t.type!==gt||(t.type=ur(u));var s,c,l,d,m,p,h=n.shape,b=n.stride;3===h.length?(l=h[2],p=b[2]):(F(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),s=h[0],c=h[1],d=b[0],m=b[1],t.alignment=1,t.width=s,t.height=c,t.channels=l,t.format=t.internalformat=Qt[l],t.needsFree=!0,function(e,t,r,n,a,i){for(var o=e.width,f=e.height,u=e.channels,s=sr(e,o*f*u),c=0,l=0;l<f;++l)for(var d=0;d<o;++d)for(var m=0;m<u;++m)s[c++]=t[r*d+n*l+a*m+i];cr(e,s)}(t,u,d,m,p,n.offset)}else if(or(n)||ir(n)===$t)or(n)?t.element=n:t.element=n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return ir(e)===Kt}(n))t.element=n,t.width=n.width,t.height=n.height,t.channels=4;else if(function(e){return ir(e)===Jt}(n))t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if(function(e){return ir(e)===Zt}(n))t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(ar(n)){var g=t.width||n[0].length,v=t.height||n.length,y=t.channels;y=Ie(n[0][0])?y||n[0][0].length:y||1;for(var x=ae.shape(n),w=1,k=0;k<x.length;++k)w*=x[k];var A=sr(t,w);ae.flatten(n,x,"",A),cr(t,A),t.alignment=1,t.width=g,t.height=v,t.channels=y,t.format=t.internalformat=Qt[y],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===xt?F(a.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===at&&F(a.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(e,t,n){var a=e.element,o=e.data,f=e.internalformat,u=e.format,s=e.type,c=e.width,l=e.height,d=e.channels;if(D(e),a)r.texImage2D(t,n,u,u,s,a);else if(e.compressed)r.compressedTexImage2D(t,n,f,c,l,0,o);else if(e.needsCopy)i(),r.copyTexImage2D(t,n,u,e.xOffset,e.yOffset,c,l,0);else{var m=!o;m&&(o=ee.zero.allocType(s,c*l*d)),r.texImage2D(t,n,u,c,l,0,u,s,o),m&&o&&ee.zero.freeType(o)}}function z(e,t,n,a,o){var f=e.element,u=e.data,s=e.internalformat,c=e.format,l=e.type,d=e.width,m=e.height;D(e),f?r.texSubImage2D(t,o,n,a,c,l,f):e.compressed?r.compressedTexSubImage2D(t,o,n,a,s,d,m,u):e.needsCopy?(i(),r.copyTexSubImage2D(t,o,n,a,e.xOffset,e.yOffset,d,m)):r.texSubImage2D(t,o,n,a,d,m,c,l,u)}var B=[];function P(){return B.pop()||new j}function I(e){e.needsFree&&ee.freeType(e.data),j.call(e),B.push(e)}function R(){S.call(this),this.genMipmaps=!1,this.mipmapHint=Pt,this.mipmask=0,this.images=Array(16)}function L(e,t,r){var n=e.images[0]=P();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function M(e,t){var r=null;if(fr(t))T(r=e.images[0]=P(),e),O(r,t),e.mipmask=1;else if(E(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,a=0;a<n.length;++a)T(r=e.images[a]=P(),e),r.width>>=a,r.height>>=a,O(r,n[a]),e.mipmask|=1<<a;else T(r=e.images[0]=P(),e),O(r,t),e.mipmask=1;T(e,e.images[0]),(e.compressed&&e.internalformat===it||e.internalformat===ot||e.internalformat===ft||e.internalformat===ut)&&F(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function W(e,t){for(var r=e.images,n=0;n<r.length;++n){if(!r[n])return;C(r[n],t,n)}}var U=[];function H(){var e=U.pop()||new R;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function G(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&I(t[r]),t[r]=null;U.push(e)}function q(){this.minFilter=Dt,this.magFilter=Dt,this.wrapS=_t,this.wrapT=_t,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Pt}function N(e,t){if("min"in t){var r=t.min;F.parameter(r,d),e.minFilter=d[r],Nt.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var n=t.mag;F.parameter(n,l),e.magFilter=l[n]}var i=e.wrapS,o=e.wrapT;if("wrap"in t){var f=t.wrap;"string"==typeof f?(F.parameter(f,c),i=o=c[f]):Array.isArray(f)&&(F.parameter(f[0],c),F.parameter(f[1],c),i=c[f[0]],o=c[f[1]])}else{if("wrapS"in t){var u=t.wrapS;F.parameter(u,c),i=c[u]}if("wrapT"in t){var m=t.wrapT;F.parameter(m,c),o=c[m]}}if(e.wrapS=i,e.wrapT=o,"anisotropic"in t){var p=t.anisotropic;F("number"==typeof p&&p>=1&&p<=a.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var h=!1;switch(typeof t.mipmap){case"string":F.parameter(t.mipmap,s,"invalid mipmap hint"),e.mipmapHint=s[t.mipmap],e.genMipmaps=!0,h=!0;break;case"boolean":h=e.genMipmaps=t.mipmap;break;case"object":F(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,h=!0;break;default:F.raise("invalid mipmap type")}!h||"min"in t||(e.minFilter=Ot)}}function Q(e,t){r.texParameteri(t,Et,e.minFilter),r.texParameteri(t,Tt,e.magFilter),r.texParameteri(t,wt,e.wrapS),r.texParameteri(t,kt,e.wrapT),n.ext_texture_filter_anisotropic&&r.texParameteri(t,Lt,e.anisotropic),e.genMipmaps&&(r.hint(Bt,e.mipmapHint),r.generateMipmap(t))}var V=0,Y={},X=a.maxTextureUnits,$=Array(X).map(function(){return null});function K(e){S.call(this),this.mipmask=0,this.internalformat=He,this.id=V++,this.refCount=1,this.target=e,this.texture=r.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new q,u.profile&&(this.stats={size:0})}function J(e){r.activeTexture(qt),r.bindTexture(e.target,e.texture)}function Z(){var e=$[0];e?r.bindTexture(e.target,e.texture):r.bindTexture(Me,null)}function te(e){var t=e.texture;F(t,"must not double destroy texture");var n=e.unit,a=e.target;n>=0&&(r.activeTexture(qt+n),r.bindTexture(a,null),$[n]=null),r.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete Y[e.id],f.textureCount--}return t(K.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var t=0;t<X;++t){var n=$[t];if(n){if(n.bindCount>0)continue;n.unit=-1}$[t]=this,e=t;break}e>=X&&F.raise("insufficient number of texture units"),u.profile&&f.maxTextureUnits<e+1&&(f.maxTextureUnits=e+1),this.unit=e,r.activeTexture(qt+e),r.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&te(this)}}),u.profile&&(f.getTotalTextureSize=function(){var e=0;return Object.keys(Y).forEach(function(t){e+=Y[t].stats.size}),e}),{create2D:function(e,t){var n=new K(Me);function i(e,t){var r=n.texInfo;q.call(r);var o=H();return"number"==typeof e?L(o,0|e,"number"==typeof t?0|t:0|e):e?(F.type(e,"object","invalid arguments to regl.texture"),N(r,e),M(o,e)):L(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),n.mipmask=o.mipmask,T(n,o),F.texture2D(r,o,a),n.internalformat=o.internalformat,i.width=o.width,i.height=o.height,J(n),W(o,Me),Q(r,Me),Z(),G(o),u.profile&&(n.stats.size=lr(n.internalformat,n.type,o.width,o.height,r.genMipmaps,!1)),i.format=y[n.internalformat],i.type=x[n.type],i.mag=w[r.magFilter],i.min=k[r.minFilter],i.wrapS=A[r.wrapS],i.wrapT=A[r.wrapT],i}return Y[n.id]=n,f.textureCount++,i(e,t),i.subimage=function(e,t,r,a){F(!!e,"must specify image data");var o=0|t,f=0|r,u=0|a,s=P();return T(s,n),s.width=0,s.height=0,O(s,e),s.width=s.width||(n.width>>u)-o,s.height=s.height||(n.height>>u)-f,F(n.type===s.type&&n.format===s.format&&n.internalformat===s.internalformat,"incompatible format for texture.subimage"),F(o>=0&&f>=0&&o+s.width<=n.width&&f+s.height<=n.height,"texture.subimage write out of bounds"),F(n.mipmask&1<<u,"missing mipmap data"),F(s.data||s.element||s.needsCopy,"missing image data"),J(n),z(s,Me,o,f,u),Z(),I(s),i},i.resize=function(e,t){var a,o=0|e,f=0|t||o;if(o===n.width&&f===n.height)return i;i.width=n.width=o,i.height=n.height=f,J(n);for(var s=n.channels,c=n.type,l=0;n.mipmask>>l;++l){var d=o>>l,m=f>>l;if(!d||!m)break;a=ee.zero.allocType(c,d*m*s),r.texImage2D(Me,l,n.format,d,m,0,n.format,n.type,a),a&&ee.zero.freeType(a)}return Z(),u.profile&&(n.stats.size=lr(n.internalformat,n.type,o,f,!1,!1)),i},i._reglType="texture2d",i._texture=n,u.profile&&(i.stats=n.stats),i.destroy=function(){n.decRef()},i},createCube:function(e,t,n,i,o,s){var c=new K(We);Y[c.id]=c,f.cubeCount++;var l=new Array(6);function d(e,t,r,n,i,o){var f,s=c.texInfo;for(q.call(s),f=0;f<6;++f)l[f]=H();if("number"!=typeof e&&e)if("object"==typeof e)if(t)M(l[0],e),M(l[1],t),M(l[2],r),M(l[3],n),M(l[4],i),M(l[5],o);else if(N(s,e),E(c,e),"faces"in e){var m=e.faces;for(F(Array.isArray(m)&&6===m.length,"cube faces must be a length 6 array"),f=0;f<6;++f)F("object"==typeof m[f]&&!!m[f],"invalid input for cube map face"),T(l[f],c),M(l[f],m[f])}else for(f=0;f<6;++f)M(l[f],e);else F.raise("invalid arguments to cube map");else{var p=0|e||1;for(f=0;f<6;++f)L(l[f],p,p)}for(T(c,l[0]),a.npotTextureCube||F(Re(c.width)&&Re(c.height),"your browser does not support non power or two texture dimensions"),s.genMipmaps?c.mipmask=(l[0].width<<1)-1:c.mipmask=l[0].mipmask,F.textureCube(c,s,l,a),c.internalformat=l[0].internalformat,d.width=l[0].width,d.height=l[0].height,J(c),f=0;f<6;++f)W(l[f],Ue+f);for(Q(s,We),Z(),u.profile&&(c.stats.size=lr(c.internalformat,c.type,d.width,d.height,s.genMipmaps,!0)),d.format=y[c.internalformat],d.type=x[c.type],d.mag=w[s.magFilter],d.min=k[s.minFilter],d.wrapS=A[s.wrapS],d.wrapT=A[s.wrapT],f=0;f<6;++f)G(l[f]);return d}return d(e,t,n,i,o,s),d.subimage=function(e,t,r,n,a){F(!!t,"must specify image data"),F("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var i=0|r,o=0|n,f=0|a,u=P();return T(u,c),u.width=0,u.height=0,O(u,t),u.width=u.width||(c.width>>f)-i,u.height=u.height||(c.height>>f)-o,F(c.type===u.type&&c.format===u.format&&c.internalformat===u.internalformat,"incompatible format for texture.subimage"),F(i>=0&&o>=0&&i+u.width<=c.width&&o+u.height<=c.height,"texture.subimage write out of bounds"),F(c.mipmask&1<<f,"missing mipmap data"),F(u.data||u.element||u.needsCopy,"missing image data"),J(c),z(u,Ue+e,i,o,f),Z(),I(u),d},d.resize=function(e){var t=0|e;if(t!==c.width){d.width=c.width=t,d.height=c.height=t,J(c);for(var n=0;n<6;++n)for(var a=0;c.mipmask>>a;++a)r.texImage2D(Ue+n,a,c.format,t>>a,t>>a,0,c.format,c.type,null);return Z(),u.profile&&(c.stats.size=lr(c.internalformat,c.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=c,u.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d},clear:function(){for(var e=0;e<X;++e)r.activeTexture(qt+e),r.bindTexture(Me,null),$[e]=null;ne(Y).forEach(te),f.cubeCount=0,f.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<X;++e){var t=$[e];t&&(t.bindCount=0,t.unit=-1,$[e]=null)}ne(Y).forEach(function(e){e.texture=r.createTexture(),r.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===Me)r.texImage2D(Me,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)r.texImage2D(Ue+n,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);Q(e.texInfo,e.target)})}}}rr[Ve]=2,rr[Ye]=2,rr[Xe]=2,rr[tt]=4,rr[it]=.5,rr[ot]=.5,rr[ft]=1,rr[ut]=1,rr[st]=.5,rr[ct]=1,rr[lt]=1,rr[dt]=.5,rr[mt]=.25,rr[pt]=.5,rr[ht]=.25,rr[bt]=.5;var mr=36161,pr=32854,hr=[];function br(e,t,r){return hr[e]*t*r}hr[pr]=2,hr[32855]=2,hr[36194]=2,hr[33189]=2,hr[36168]=1,hr[34041]=4,hr[35907]=4,hr[34836]=16,hr[34842]=8,hr[34843]=6;var gr=function(e,t,r,n,a){var i={rgba4:pr,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(i.srgba=35907),t.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),t.webgl_color_buffer_float&&(i.rgba32f=34836);var o=[];Object.keys(i).forEach(function(e){var t=i[e];o[t]=e});var f=0,u={};function s(e){this.id=f++,this.refCount=1,this.renderbuffer=e,this.format=pr,this.width=0,this.height=0,a.profile&&(this.stats={size:0})}function c(t){var r=t.renderbuffer;F(r,"must not double destroy renderbuffer"),e.bindRenderbuffer(mr,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete u[t.id],n.renderbufferCount--}return s.prototype.decRef=function(){--this.refCount<=0&&c(this)},a.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(u).forEach(function(t){e+=u[t].stats.size}),e}),{create:function(t,f){var c=new s(e.createRenderbuffer());function l(t,n){var f=0,u=0,s=pr;if("object"==typeof t&&t){var d=t;if("shape"in d){var m=d.shape;F(Array.isArray(m)&&m.length>=2,"invalid renderbuffer shape"),f=0|m[0],u=0|m[1]}else"radius"in d&&(f=u=0|d.radius),"width"in d&&(f=0|d.width),"height"in d&&(u=0|d.height);"format"in d&&(F.parameter(d.format,i,"invalid renderbuffer format"),s=i[d.format])}else"number"==typeof t?(f=0|t,u="number"==typeof n?0|n:f):t?F.raise("invalid arguments to renderbuffer constructor"):f=u=1;if(F(f>0&&u>0&&f<=r.maxRenderbufferSize&&u<=r.maxRenderbufferSize,"invalid renderbuffer size"),f!==c.width||u!==c.height||s!==c.format)return l.width=c.width=f,l.height=c.height=u,c.format=s,e.bindRenderbuffer(mr,c.renderbuffer),e.renderbufferStorage(mr,s,f,u),F(0===e.getError(),"invalid render buffer format"),a.profile&&(c.stats.size=br(c.format,c.width,c.height)),l.format=o[c.format],l}return u[c.id]=c,n.renderbufferCount++,l(t,f),l.resize=function(t,n){var i=0|t,o=0|n||i;return i===c.width&&o===c.height?l:(F(i>0&&o>0&&i<=r.maxRenderbufferSize&&o<=r.maxRenderbufferSize,"invalid renderbuffer size"),l.width=c.width=i,l.height=c.height=o,e.bindRenderbuffer(mr,c.renderbuffer),e.renderbufferStorage(mr,c.format,i,o),F(0===e.getError(),"invalid render buffer format"),a.profile&&(c.stats.size=br(c.format,c.width,c.height)),l)},l._reglType="renderbuffer",l._renderbuffer=c,a.profile&&(l.stats=c.stats),l.destroy=function(){c.decRef()},l},clear:function(){ne(u).forEach(c)},restore:function(){ne(u).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(mr,t.renderbuffer),e.renderbufferStorage(mr,t.format,t.width,t.height)}),e.bindRenderbuffer(mr,null)}}},vr=36160,yr=36161,xr=3553,wr=34069,kr=36064,Ar=36096,_r=36128,Sr=33306,Tr=36053,Er=6402,Dr=[6407,6408],jr=[];jr[6408]=4,jr[6407]=3;var Or=[];Or[5121]=1,Or[5126]=4,Or[36193]=2;var Cr=33189,Fr=36168,zr=34041,Br=[32854,32855,36194,35907,34842,34843,34836],Pr={};Pr[Tr]="complete",Pr[36054]="incomplete attachment",Pr[36057]="incomplete dimensions",Pr[36055]="incomplete, missing attachment",Pr[36061]="unsupported";var Ir=5126;function Rr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ir,this.offset=0,this.stride=0,this.divisor=0}var Lr=35632,Mr=35633,Wr=35718,Ur=35721;var Hr=6408,Gr=5121,qr=3333,Nr=5126;function Qr(t,r,n,a,i,o,f){function u(u){var s;null===r.next?(F(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),s=Gr):(F(null!==r.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),s=r.next.colorAttachments[0].texture._texture.type,o.oes_texture_float?(F(s===Gr||s===Nr,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),s===Nr&&F(f.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):F(s===Gr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,l=0,d=a.framebufferWidth,m=a.framebufferHeight,p=null;e(u)?p=u:u&&(F.type(u,"object","invalid arguments to regl.read()"),c=0|u.x,l=0|u.y,F(c>=0&&c<a.framebufferWidth,"invalid x offset for regl.read"),F(l>=0&&l<a.framebufferHeight,"invalid y offset for regl.read"),d=0|(u.width||a.framebufferWidth-c),m=0|(u.height||a.framebufferHeight-l),p=u.data||null),p&&(s===Gr?F(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):s===Nr&&F(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),F(d>0&&d+c<=a.framebufferWidth,"invalid width for read pixels"),F(m>0&&m+l<=a.framebufferHeight,"invalid height for read pixels"),n();var h=d*m*4;return p||(s===Gr?p=new Uint8Array(h):s===Nr&&(p=p||new Float32Array(h))),F.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),F(p.byteLength>=h,"data buffer for regl.read() too small"),t.pixelStorei(qr,4),t.readPixels(c,l,d,m,Hr,s,p),p}return function(e){return e&&"framebuffer"in e?function(e){var t;return r.setFBO({framebuffer:e.framebuffer},function(){t=u(e)}),t}(e):u(e)}}function Vr(e){return Array.prototype.slice.call(e)}function Yr(e){return Vr(e).join("")}var Xr="xyzw".split(""),$r=5121,Kr=1,Jr=2,Zr=0,en=1,tn=2,rn=3,nn=4,an="dither",on="blend.enable",fn="blend.color",un="blend.equation",sn="blend.func",cn="depth.enable",ln="depth.func",dn="depth.range",mn="depth.mask",pn="colorMask",hn="cull.enable",bn="cull.face",gn="frontFace",vn="lineWidth",yn="polygonOffset.enable",xn="polygonOffset.offset",wn="sample.alpha",kn="sample.enable",An="sample.coverage",_n="stencil.enable",Sn="stencil.mask",Tn="stencil.func",En="stencil.opFront",Dn="stencil.opBack",jn="scissor.enable",On="scissor.box",Cn="viewport",Fn="profile",zn="framebuffer",Bn="vert",Pn="frag",In="elements",Rn="primitive",Ln="count",Mn="offset",Wn="instances",Un=zn+"Width",Hn=zn+"Height",Gn=Cn+"Width",qn=Cn+"Height",Nn="drawingBufferWidth",Qn="drawingBufferHeight",Vn=[sn,un,Tn,En,Dn,An,Cn,On,xn],Yn=34962,Xn=34963,$n=3553,Kn=34067,Jn=2884,Zn=3042,ea=3024,ta=2960,ra=2929,na=3089,aa=32823,ia=32926,oa=32928,fa=5126,ua=35664,sa=35665,ca=35666,la=5124,da=35667,ma=35668,pa=35669,ha=35670,ba=35671,ga=35672,va=35673,ya=35674,xa=35675,wa=35676,ka=35678,Aa=35680,_a=4,Sa=1028,Ta=1029,Ea=2304,Da=2305,ja=32775,Oa=32776,Ca=519,Fa=7680,za=0,Ba=1,Pa=32774,Ia=513,Ra=36160,La=36064,Ma={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wa=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ua={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ha={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ga={frag:35632,vert:35633},qa={cw:Ea,ccw:Da};function Na(t){return Array.isArray(t)||e(t)||re(t)}function Qa(e){return e.sort(function(e,t){return e===Cn?-1:t===Cn?1:e<t?-1:1})}function Va(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function Ya(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function Xa(e){return new Va(!1,!1,!1,e)}function $a(e,t){var r=e.type;if(r===Zr){var n=e.data.length;return new Va(!0,n>=1,n>=2,t)}if(r===nn){var a=e.data;return new Va(a.thisDep,a.contextDep,a.propDep,t)}return new Va(r===rn,r===tn,r===en,t)}var Ka=new Va(!1,!1,!1,function(){});function Ja(e,r,n,a,i,o,f,u,s,c,l,d,m,p,h){var b=c.Record,g={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(g.min=ja,g.max=Oa);var v=n.angle_instanced_arrays,y=n.webgl_draw_buffers,x={dirty:!0,profile:h.profile},w={},k=[],A={},_={};function S(e){return e.replace(".","_")}function T(e,t,r){var n=S(e);k.push(e),w[n]=x[n]=!!r,A[n]=t}function E(e,t,r){var n=S(e);k.push(e),Array.isArray(r)?(x[n]=r.slice(),w[n]=r.slice()):x[n]=w[n]=r,_[n]=t}T(an,ea),T(on,Zn),E(fn,"blendColor",[0,0,0,0]),E(un,"blendEquationSeparate",[Pa,Pa]),E(sn,"blendFuncSeparate",[Ba,za,Ba,za]),T(cn,ra,!0),E(ln,"depthFunc",Ia),E(dn,"depthRange",[0,1]),E(mn,"depthMask",!0),E(pn,pn,[!0,!0,!0,!0]),T(hn,Jn),E(bn,"cullFace",Ta),E(gn,gn,Da),E(vn,vn,1),T(yn,aa),E(xn,"polygonOffset",[0,0]),T(wn,ia),T(kn,oa),E(An,"sampleCoverage",[1,!1]),T(_n,ta),E(Sn,"stencilMask",-1),E(Tn,"stencilFunc",[Ca,0,-1]),E(En,"stencilOpSeparate",[Sa,Fa,Fa,Fa]),E(Dn,"stencilOpSeparate",[Ta,Fa,Fa,Fa]),T(jn,na),E(On,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),E(Cn,Cn,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var D={gl:e,context:m,strings:r,next:w,current:x,draw:d,elements:o,buffer:i,shader:l,attributes:c.state,uniforms:s,framebuffer:u,extensions:n,timer:p,isBufferArgs:Na},j={primTypes:ye,compareFuncs:Ua,blendFuncs:Ma,blendEquations:g,stencilOps:Ha,glTypes:fe,orientationType:qa};F.optional(function(){D.isArrayLike=Ie}),y&&(j.backBuffer=[Ta],j.drawBuffer=q(a.maxDrawbuffers,function(e){return 0===e?[0]:q(e,function(e){return La+e})}));var O=0;function C(){var e=function(){var e=0,r=[],n=[];function a(){var r=[],n=[];return t(function(){r.push.apply(r,Vr(arguments))},{def:function(){var t="v"+e++;return n.push(t),arguments.length>0&&(r.push(t,"="),r.push.apply(r,Vr(arguments)),r.push(";")),t},toString:function(){return Yr([n.length>0?"var "+n.join(",")+";":"",Yr(r)])}})}function i(){var e=a(),r=a(),n=e.toString,i=r.toString;function o(t,n){r(t,n,"=",e.def(t,n),";")}return t(function(){e.apply(e,Vr(arguments))},{def:e.def,entry:e,exit:r,save:o,set:function(t,r,n){o(t,r),e(t,r,"=",n,";")},toString:function(){return n()+i()}})}var o=a(),f={};return{global:o,link:function(t){for(var a=0;a<n.length;++a)if(n[a]===t)return r[a];var i="g"+e++;return r.push(i),n.push(t),i},block:a,proc:function(e,r){var n=[];function a(){var e="a"+n.length;return n.push(e),e}r=r||0;for(var o=0;o<r;++o)a();var u=i(),s=u.toString;return f[e]=t(u,{arg:a,toString:function(){return Yr(["function(",n.join(),"){",s(),"}"])}})},scope:i,cond:function(){var e=Yr(arguments),r=i(),n=i(),a=r.toString,o=n.toString;return t(r,{then:function(){return r.apply(r,Vr(arguments)),this},else:function(){return n.apply(n,Vr(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Yr(["if(",e,"){",a(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(f).forEach(function(t){e.push('"',t,'":',f[t].toString(),",")}),e.push("}");var t=Yr(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,n)}}}(),n=e.link,a=e.global;e.id=O++,e.batchId="0";var i=n(D),o=e.shared={props:"a0"};Object.keys(D).forEach(function(e){o[e]=a.def(i,".",e)}),F.optional(function(){e.CHECK=n(F),e.commandStr=F.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},j.invalidBlendCombinations=Wa});var f=e.next={},u=e.current={};Object.keys(_).forEach(function(e){Array.isArray(x[e])&&(f[e]=a.def(o.next,".",e),u[e]=a.def(o.current,".",e))});var s=e.constants={};Object.keys(j).forEach(function(e){s[e]=a.def(JSON.stringify(j[e]))}),e.invoke=function(t,r){switch(r.type){case Zr:var a=["this",o.context,o.props,e.batchId];return t.def(n(r.data),".call(",a.slice(0,Math.max(r.data.length+1,4)),")");case en:return t.def(o.props,r.data);case tn:return t.def(o.context,r.data);case rn:return t.def("this",r.data);case nn:return r.data.append(e,t),r.data.ref}},e.attribCache={};var l={};return e.scopeAttrib=function(e){var t=r.id(e);if(t in l)return l[t];var a=c.scope[t];return a||(a=c.scope[t]=new b),l[t]=n(a)},e}function z(e,t,n,f,s){var c=e.static,d=e.dynamic;F.optional(function(){var e=[zn,Bn,Pn,In,Rn,Mn,Ln,Wn,Fn].concat(k);function t(t){Object.keys(t).forEach(function(t){F.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',s.commandStr)})}t(c),t(d)});var m=function(e,t){var r=e.static,n=e.dynamic;if(zn in r){var a=r[zn];return a?(a=u.getFramebuffer(a),F.command(a,"invalid framebuffer object"),Xa(function(e,t){var r=e.link(a),n=e.shared;t.set(n.framebuffer,".next",r);var i=n.context;return t.set(i,"."+Un,r+".width"),t.set(i,"."+Hn,r+".height"),r})):Xa(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+Un,n+"."+Nn),t.set(n,"."+Hn,n+"."+Qn),"null"})}if(zn in n){var i=n[zn];return $a(i,function(e,t){var r=e.invoke(t,i),n=e.shared,a=n.framebuffer,o=t.def(a,".getFramebuffer(",r,")");F.optional(function(){e.assert(t,"!"+r+"||"+o,"invalid framebuffer object")}),t.set(a,".next",o);var f=n.context;return t.set(f,"."+Un,o+"?"+o+".width:"+f+"."+Nn),t.set(f,"."+Hn,o+"?"+o+".height:"+f+"."+Qn),o})}return null}(e),p=function(e,t,r){var n=e.static,a=e.dynamic;function i(e){if(e in n){var i=n[e];F.commandType(i,"object","invalid "+e,r.commandStr);var o,f,u=!0,s=0|i.x,c=0|i.y;return"width"in i?(o=0|i.width,F.command(o>=0,"invalid "+e,r.commandStr)):u=!1,"height"in i?(f=0|i.height,F.command(f>=0,"invalid "+e,r.commandStr)):u=!1,new Va(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,function(e,t){var r=e.shared.context,n=o;"width"in i||(n=t.def(r,".",Un,"-",s));var a=f;return"height"in i||(a=t.def(r,".",Hn,"-",c)),[s,c,n,a]})}if(e in a){var l=a[e],d=$a(l,function(t,r){var n=t.invoke(r,l);F.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)});var a=t.shared.context,i=r.def(n,".x|0"),o=r.def(n,".y|0"),f=r.def('"width" in ',n,"?",n,".width|0:","(",a,".",Un,"-",i,")"),u=r.def('"height" in ',n,"?",n,".height|0:","(",a,".",Hn,"-",o,")");return F.optional(function(){t.assert(r,f+">=0&&"+u+">=0","invalid "+e)}),[i,o,f,u]});return t&&(d.thisDep=d.thisDep||t.thisDep,d.contextDep=d.contextDep||t.contextDep,d.propDep=d.propDep||t.propDep),d}return t?new Va(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",Un),t.def(r,".",Hn)]}):null}var o=i(Cn);if(o){var f=o;o=new Va(o.thisDep,o.contextDep,o.propDep,function(e,t){var r=f.append(e,t),n=e.shared.context;return t.set(n,"."+Gn,r[2]),t.set(n,"."+qn,r[3]),r})}return{viewport:o,scissor_box:i(On)}}(e,m,s),h=function(e,t){var r=e.static,n=e.dynamic,a=function(){if(In in r){var e=r[In];Na(e)?e=o.getElements(o.create(e,!0)):e&&(e=o.getElements(e),F.command(e,"invalid elements",t.commandStr));var a=Xa(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return a.value=e,a}if(In in n){var i=n[In];return $a(i,function(e,t){var r=e.shared,n=r.isBufferArgs,a=r.elements,o=e.invoke(t,i),f=t.def("null"),u=t.def(n,"(",o,")"),s=e.cond(u).then(f,"=",a,".createStream(",o,");").else(f,"=",a,".getElements(",o,");");return F.optional(function(){e.assert(s.else,"!"+o+"||"+f,"invalid elements")}),t.entry(s),t.exit(e.cond(u).then(a,".destroyStream(",f,");")),e.ELEMENTS=f,f})}return null}();function i(e,i){if(e in r){var o=0|r[e];return F.command(!i||o>=0,"invalid "+e,t.commandStr),Xa(function(e,t){return i&&(e.OFFSET=o),o})}if(e in n){var f=n[e];return $a(f,function(t,r){var n=t.invoke(r,f);return i&&(t.OFFSET=n,F.optional(function(){t.assert(r,n+">=0","invalid "+e)})),n})}return i&&a?Xa(function(e,t){return e.OFFSET="0",0}):null}var f=i(Mn,!0);return{elements:a,primitive:function(){if(Rn in r){var e=r[Rn];return F.commandParameter(e,ye,"invalid primitve",t.commandStr),Xa(function(t,r){return ye[e]})}if(Rn in n){var i=n[Rn];return $a(i,function(e,t){var r=e.constants.primTypes,n=e.invoke(t,i);return F.optional(function(){e.assert(t,n+" in "+r,"invalid primitive, must be one of "+Object.keys(ye))}),t.def(r,"[",n,"]")})}return a?Ya(a)?a.value?Xa(function(e,t){return t.def(e.ELEMENTS,".primType")}):Xa(function(){return _a}):new Va(a.thisDep,a.contextDep,a.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",_a)}):null}(),count:function(){if(Ln in r){var e=0|r[Ln];return F.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),Xa(function(){return e})}if(Ln in n){var i=n[Ln];return $a(i,function(e,t){var r=e.invoke(t,i);return F.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(a){if(Ya(a)){if(a)return f?new Va(f.thisDep,f.contextDep,f.propDep,function(e,t){var r=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return F.optional(function(){e.assert(t,r+">=0","invalid vertex offset/element buffer too small")}),r}):Xa(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var o=Xa(function(){return-1});return F.optional(function(){o.MISSING=!0}),o}var u=new Va(a.thisDep||f.thisDep,a.contextDep||f.contextDep,a.propDep||f.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")});return F.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:i(Wn,!1),offset:f}}(e,s),y=function(e,t){var r=e.static,n=e.dynamic,i={};return k.forEach(function(e){var o=S(e);function f(t,a){if(e in r){var f=t(r[e]);i[o]=Xa(function(){return f})}else if(e in n){var u=n[e];i[o]=$a(u,function(e,t){return a(e,t,e.invoke(t,u))})}}switch(e){case hn:case on:case an:case _n:case cn:case jn:case yn:case wn:case kn:case mn:return f(function(r){return F.commandType(r,"boolean",e,t.commandStr),r},function(t,r,n){return F.optional(function(){t.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+e,t.commandStr)}),n});case ln:return f(function(r){return F.commandParameter(r,Ua,"invalid "+e,t.commandStr),Ua[r]},function(t,r,n){var a=t.constants.compareFuncs;return F.optional(function(){t.assert(r,n+" in "+a,"invalid "+e+", must be one of "+Object.keys(Ua))}),r.def(a,"[",n,"]")});case dn:return f(function(e){return F.command(Ie(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,r){return F.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array")}),[t.def("+",r,"[0]"),t.def("+",r,"[1]")]});case sn:return f(function(e){F.commandType(e,"object","blend.func",t.commandStr);var r="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,a="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return F.commandParameter(r,Ma,o+".srcRGB",t.commandStr),F.commandParameter(n,Ma,o+".srcAlpha",t.commandStr),F.commandParameter(a,Ma,o+".dstRGB",t.commandStr),F.commandParameter(i,Ma,o+".dstAlpha",t.commandStr),F.command(-1===Wa.indexOf(r+", "+a),"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+a+")",t.commandStr),[Ma[r],Ma[a],Ma[n],Ma[i]]},function(t,r,n){var a=t.constants.blendFuncs;function i(i,o){var f=r.def('"',i,o,'" in ',n,"?",n,".",i,o,":",n,".",i);return F.optional(function(){t.assert(r,f+" in "+a,"invalid "+e+"."+i+o+", must be one of "+Object.keys(Ma))}),f}F.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object")});var o=i("src","RGB"),f=i("dst","RGB");F.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(r,e+".indexOf("+o+'+", "+'+f+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=r.def(a,"[",o,"]"),s=r.def(a,"[",i("src","Alpha"),"]");return[u,r.def(a,"[",f,"]"),s,r.def(a,"[",i("dst","Alpha"),"]")]});case un:return f(function(r){return"string"==typeof r?(F.commandParameter(r,g,"invalid "+e,t.commandStr),[g[r],g[r]]):"object"==typeof r?(F.commandParameter(r.rgb,g,e+".rgb",t.commandStr),F.commandParameter(r.alpha,g,e+".alpha",t.commandStr),[g[r.rgb],g[r.alpha]]):void F.commandRaise("invalid blend.equation",t.commandStr)},function(t,r,n){var a=t.constants.blendEquations,i=r.def(),o=r.def(),f=t.cond("typeof ",n,'==="string"');return F.optional(function(){function r(e,r,n){t.assert(e,n+" in "+a,"invalid "+r+", must be one of "+Object.keys(g))}r(f.then,e,n),t.assert(f.else,n+"&&typeof "+n+'==="object"',"invalid "+e),r(f.else,e+".rgb",n+".rgb"),r(f.else,e+".alpha",n+".alpha")}),f.then(i,"=",o,"=",a,"[",n,"];"),f.else(i,"=",a,"[",n,".rgb];",o,"=",a,"[",n,".alpha];"),r(f),[i,o]});case fn:return f(function(e){return F.command(Ie(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),q(4,function(t){return+e[t]})},function(e,t,r){return F.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array")}),q(4,function(e){return t.def("+",r,"[",e,"]")})});case Sn:return f(function(e){return F.commandType(e,"number",o,t.commandStr),0|e},function(e,t,r){return F.optional(function(){e.assert(t,"typeof "+r+'==="number"',"invalid stencil.mask")}),t.def(r,"|0")});case Tn:return f(function(r){F.commandType(r,"object",o,t.commandStr);var n=r.cmp||"keep",a=r.ref||0,i="mask"in r?r.mask:-1;return F.commandParameter(n,Ua,e+".cmp",t.commandStr),F.commandType(a,"number",e+".ref",t.commandStr),F.commandType(i,"number",e+".mask",t.commandStr),[Ua[n],a,i]},function(e,t,r){var n=e.constants.compareFuncs;return F.optional(function(){function a(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(r+"&&typeof ",r,'==="object"'),a('!("cmp" in ',r,")||(",r,".cmp in ",n,")")}),[t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",Fa),t.def(r,".ref|0"),t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case En:case Dn:return f(function(r){F.commandType(r,"object",o,t.commandStr);var n=r.fail||"keep",a=r.zfail||"keep",i=r.zpass||"keep";return F.commandParameter(n,Ha,e+".fail",t.commandStr),F.commandParameter(a,Ha,e+".zfail",t.commandStr),F.commandParameter(i,Ha,e+".zpass",t.commandStr),[e===Dn?Ta:Sa,Ha[n],Ha[a],Ha[i]]},function(t,r,n){var a=t.constants.stencilOps;function i(i){return F.optional(function(){t.assert(r,'!("'+i+'" in '+n+")||("+n+"."+i+" in "+a+")","invalid "+e+"."+i+", must be one of "+Object.keys(Ha))}),r.def('"',i,'" in ',n,"?",a,"[",n,".",i,"]:",Fa)}return F.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[e===Dn?Ta:Sa,i("fail"),i("zfail"),i("zpass")]});case xn:return f(function(e){F.commandType(e,"object",o,t.commandStr);var r=0|e.factor,n=0|e.units;return F.commandType(r,"number",o+".factor",t.commandStr),F.commandType(n,"number",o+".units",t.commandStr),[r,n]},function(t,r,n){return F.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[r.def(n,".factor|0"),r.def(n,".units|0")]});case bn:return f(function(e){var r=0;return"front"===e?r=Sa:"back"===e&&(r=Ta),F.command(!!r,o,t.commandStr),r},function(e,t,r){return F.optional(function(){e.assert(t,r+'==="front"||'+r+'==="back"',"invalid cull.face")}),t.def(r,'==="front"?',Sa,":",Ta)});case vn:return f(function(e){return F.command("number"==typeof e&&e>=a.lineWidthDims[0]&&e<=a.lineWidthDims[1],"invalid line width, must be a positive number between "+a.lineWidthDims[0]+" and "+a.lineWidthDims[1],t.commandStr),e},function(e,t,r){return F.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">="+a.lineWidthDims[0]+"&&"+r+"<="+a.lineWidthDims[1],"invalid line width")}),r});case gn:return f(function(e){return F.commandParameter(e,qa,o,t.commandStr),qa[e]},function(e,t,r){return F.optional(function(){e.assert(t,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(r+'==="cw"?'+Ea+":"+Da)});case pn:return f(function(e){return F.command(Ie(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,r){return F.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")}),q(4,function(e){return"!!"+r+"["+e+"]"})});case An:return f(function(e){F.command("object"==typeof e&&e,o,t.commandStr);var r="value"in e?e.value:1,n=!!e.invert;return F.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[r,n]},function(e,t,r){return F.optional(function(){e.assert(t,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',r,"?+",r,".value:1"),t.def("!!",r,".invert")]})}}),i}(e,s),x=function(e){var t=e.static,n=e.dynamic;function a(e){if(e in t){var a=r.id(t[e]);F.optional(function(){l.shader(Ga[e],a,F.guessCommand())});var i=Xa(function(){return a});return i.id=a,i}if(e in n){var o=n[e];return $a(o,function(t,r){var n=t.invoke(r,o),a=r.def(t.shared.strings,".id(",n,")");return F.optional(function(){r(t.shared.shader,".shader(",Ga[e],",",a,",",t.command,");")}),a})}return null}var i,o=a(Pn),f=a(Bn),u=null;return Ya(o)&&Ya(f)?(u=l.program(f.id,o.id),i=Xa(function(e,t){return e.link(u)})):i=new Va(o&&o.thisDep||f&&f.thisDep,o&&o.contextDep||f&&f.contextDep,o&&o.propDep||f&&f.propDep,function(e,t){var r,n=e.shared.shader;r=o?o.append(e,t):t.def(n,".",Pn);var a=n+".program("+(f?f.append(e,t):t.def(n,".",Bn))+","+r;return F.optional(function(){a+=","+e.command}),t.def(a+")")}),{frag:o,vert:f,progVar:i,program:u}}(e);function w(e){var t=p[e];t&&(y[e]=t)}w(Cn),w(S(On));var A=Object.keys(y).length>0,_={framebuffer:m,draw:h,shader:x,state:y,dirty:A};return _.profile=function(e){var t,r=e.static,n=e.dynamic;if(Fn in r){var a=!!r[Fn];(t=Xa(function(e,t){return a})).enable=a}else if(Fn in n){var i=n[Fn];t=$a(i,function(e,t){return e.invoke(t,i)})}return t}(e),_.uniforms=function(e,t){var r=e.static,n=e.dynamic,a={};return Object.keys(r).forEach(function(e){var n,i=r[e];if("number"==typeof i||"boolean"==typeof i)n=Xa(function(){return i});else if("function"==typeof i){var o=i._reglType;"texture2d"===o||"textureCube"===o?n=Xa(function(e){return e.link(i)}):"framebuffer"===o||"framebufferCube"===o?(F.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),n=Xa(function(e){return e.link(i.color[0])})):F.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else Ie(i)?n=Xa(function(t){return t.global.def("[",q(i.length,function(r){return F.command("number"==typeof i[r]||"boolean"==typeof i[r],"invalid uniform "+e,t.commandStr),i[r]}),"]")}):F.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);n.value=i,a[e]=n}),Object.keys(n).forEach(function(e){var t=n[e];a[e]=$a(t,function(e,r){return e.invoke(r,t)})}),a}(n,s),_.attributes=function(e,t){var n=e.static,a=e.dynamic,o={};return Object.keys(n).forEach(function(e){var a=n[e],f=r.id(e),u=new b;if(Na(a))u.state=Kr,u.buffer=i.getBuffer(i.create(a,Yn,!1,!0)),u.type=0;else{var s=i.getBuffer(a);if(s)u.state=Kr,u.buffer=s,u.type=0;else if(F.command("object"==typeof a&&a,"invalid data for attribute "+e,t.commandStr),"constant"in a){var c=a.constant;u.buffer="null",u.state=Jr,"number"==typeof c?u.x=c:(F.command(Ie(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,t.commandStr),Xr.forEach(function(e,t){t<c.length&&(u[e]=c[t])}))}else{s=Na(a.buffer)?i.getBuffer(i.create(a.buffer,Yn,!1,!0)):i.getBuffer(a.buffer),F.command(!!s,'missing buffer for attribute "'+e+'"',t.commandStr);var l=0|a.offset;F.command(l>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var d=0|a.stride;F.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var m=0|a.size;F.command(!("size"in a)||m>0&&m<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!a.normalized,h=0;"type"in a&&(F.commandParameter(a.type,fe,"invalid type for attribute "+e,t.commandStr),h=fe[a.type]);var g=0|a.divisor;"divisor"in a&&(F.command(0===g||v,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),F.command(g>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),F.optional(function(){var r=t.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(a).forEach(function(t){F.command(n.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+n+")",r)})}),u.buffer=s,u.state=Kr,u.size=m,u.normalized=p,u.type=h||s.dtype,u.offset=l,u.stride=d,u.divisor=g}}o[e]=Xa(function(e,t){var r=e.attribCache;if(f in r)return r[f];var n={isStream:!1};return Object.keys(u).forEach(function(e){n[e]=u[e]}),u.buffer&&(n.buffer=e.link(u.buffer),n.type=n.type||n.buffer+".dtype"),r[f]=n,n})}),Object.keys(a).forEach(function(e){var t=a[e];o[e]=$a(t,function(r,n){var a=r.invoke(n,t),i=r.shared,o=r.constants,f=i.isBufferArgs,u=i.buffer;F.optional(function(){r.assert(n,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+f+"("+a+")||"+u+".getBuffer("+a+")||"+u+".getBuffer("+a+".buffer)||"+f+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+i.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+e+'"')});var s={isStream:n.def(!1)},c=new b;c.state=Kr,Object.keys(c).forEach(function(e){s[e]=n.def(""+c[e])});var l=s.buffer,d=s.type;function m(e){n(s[e],"=",a,".",e,"|0;")}return n("if(",f,"(",a,")){",s.isStream,"=true;",l,"=",u,".createStream(",Yn,",",a,");",d,"=",l,".dtype;","}else{",l,"=",u,".getBuffer(",a,");","if(",l,"){",d,"=",l,".dtype;",'}else if("constant" in ',a,"){",s.state,"=",Jr,";","if(typeof "+a+'.constant === "number"){',s[Xr[0]],"=",a,".constant;",Xr.slice(1).map(function(e){return s[e]}).join("="),"=0;","}else{",Xr.map(function(e,t){return s[e]+"="+a+".constant.length>"+t+"?"+a+".constant["+t+"]:0;"}).join(""),"}}else{","if(",f,"(",a,".buffer)){",l,"=",u,".createStream(",Yn,",",a,".buffer);","}else{",l,"=",u,".getBuffer(",a,".buffer);","}",d,'="type" in ',a,"?",o.glTypes,"[",a,".type]:",l,".dtype;",s.normalized,"=!!",a,".normalized;"),m("size"),m("offset"),m("stride"),m("divisor"),n("}}"),n.exit("if(",s.isStream,"){",u,".destroyStream(",l,");","}"),s})}),o}(t,s),_.context=function(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach(function(e){var r=t[e];n[e]=Xa(function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)})}),Object.keys(r).forEach(function(e){var t=r[e];n[e]=$a(t,function(e,r){return e.invoke(r,t)})}),n}(f),_}function B(e,t,r){var n=e.shared.context,a=e.scope();Object.keys(r).forEach(function(i){t.save(n,"."+i);var o=r[i];a(n,".",i,"=",o.append(e,t),";")}),t(a)}function P(e,t,r,n){var a,i=e.shared,o=i.gl,f=i.framebuffer;y&&(a=t.def(i.extensions,".webgl_draw_buffers"));var u,s=e.constants,c=s.drawBuffer,l=s.backBuffer;u=r?r.append(e,t):t.def(f,".next"),n||t("if(",u,"!==",f,".cur){"),t("if(",u,"){",o,".bindFramebuffer(",Ra,",",u,".framebuffer);"),y&&t(a,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",Ra,",null);"),y&&t(a,".drawBuffersWEBGL(",l,");"),t("}",f,".cur=",u,";"),n||t("}")}function I(e,t,r){var n=e.shared,a=n.gl,i=e.current,o=e.next,f=n.current,u=n.next,s=e.cond(f,".dirty");k.forEach(function(t){var n,c,l=S(t);if(!(l in r.state))if(l in o){n=o[l],c=i[l];var d=q(x[l].length,function(e){return s.def(n,"[",e,"]")});s(e.cond(d.map(function(e,t){return e+"!=="+c+"["+t+"]"}).join("||")).then(a,".",_[l],"(",d,");",d.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";"))}else{n=s.def(u,".",l);var m=e.cond(n,"!==",f,".",l);s(m),l in A?m(e.cond(n).then(a,".enable(",A[l],");").else(a,".disable(",A[l],");"),f,".",l,"=",n,";"):m(a,".",_[l],"(",n,");",f,".",l,"=",n,";")}}),0===Object.keys(r.state).length&&s(f,".dirty=false;"),t(s)}function R(e,t,r,n){var a=e.shared,i=e.current,o=a.current,f=a.gl;Qa(Object.keys(r)).forEach(function(a){var u=r[a];if(!n||n(u)){var s=u.append(e,t);if(A[a]){var c=A[a];Ya(u)?t(f,s?".enable(":".disable(",c,");"):t(e.cond(s).then(f,".enable(",c,");").else(f,".disable(",c,");")),t(o,".",a,"=",s,";")}else if(Ie(s)){var l=i[a];t(f,".",_[a],"(",s,");",s.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";")}else t(f,".",_[a],"(",s,");",o,".",a,"=",s,";")}})}function M(e,t){v&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function W(e,t,r,n,a){var i,o,f,u=e.shared,s=e.stats,c=u.current,l=u.timer,d=r.profile;function m(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function h(e){e(i=t.def(),"=",m(),";"),"string"==typeof a?e(s,".count+=",a,";"):e(s,".count++;"),p&&(n?e(o=t.def(),"=",l,".getNumPendingQueries();"):e(l,".beginQuery(",s,");"))}function b(e){e(s,".cpuTime+=",m(),"-",i,";"),p&&(n?e(l,".pushScopeStats(",o,",",l,".getNumPendingQueries(),",s,");"):e(l,".endQuery();"))}function g(e){var r=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",r,";")}if(d){if(Ya(d))return void(d.enable?(h(t),b(t.exit),g("true")):g("false"));g(f=d.append(e,t))}else f=t.def(c,".profile");var v=e.block();h(v),t("if(",f,"){",v,"}");var y=e.block();b(y),t.exit("if(",f,"){",y,"}")}function U(e,t,r,n,a){var i=e.shared;n.forEach(function(n){var o,f=n.name,u=r.attributes[f];if(u){if(!a(u))return;o=u.append(e,t)}else{if(!a(Ka))return;var s=e.scopeAttrib(f);F.optional(function(){e.assert(t,s+".state","missing attribute "+f)}),o={},Object.keys(new b).forEach(function(e){o[e]=t.def(s,".",e)})}!function(r,n,a){var o=i.gl,f=t.def(r,".location"),u=t.def(i.attributes,"[",f,"]"),s=a.state,c=a.buffer,l=[a.x,a.y,a.z,a.w],d=["buffer","normalized","offset","stride"];function m(){t("if(!",u,".buffer){",o,".enableVertexAttribArray(",f,");}");var r,i=a.type;if(r=a.size?t.def(a.size,"||",n):n,t("if(",u,".type!==",i,"||",u,".size!==",r,"||",d.map(function(e){return u+"."+e+"!=="+a[e]}).join("||"),"){",o,".bindBuffer(",Yn,",",c,".buffer);",o,".vertexAttribPointer(",[f,r,i,a.normalized,a.stride,a.offset],");",u,".type=",i,";",u,".size=",r,";",d.map(function(e){return u+"."+e+"="+a[e]+";"}).join(""),"}"),v){var s=a.divisor;t("if(",u,".divisor!==",s,"){",e.instancing,".vertexAttribDivisorANGLE(",[f,s],");",u,".divisor=",s,";}")}}function p(){t("if(",u,".buffer){",o,".disableVertexAttribArray(",f,");",u,".buffer=null;","}if(",Xr.map(function(e,t){return u+"."+e+"!=="+l[t]}).join("||"),"){",o,".vertexAttrib4f(",f,",",l,");",Xr.map(function(e,t){return u+"."+e+"="+l[t]+";"}).join(""),"}")}s===Kr?m():s===Jr?p():(t("if(",s,"===",Kr,"){"),m(),t("}else{"),p(),t("}"))}(e.link(n),function(e){switch(e){case ua:case da:case ba:return 2;case sa:case ma:case ga:return 3;case ca:case pa:case va:return 4;default:return 1}}(n.info.type),o)})}function H(e,t,n,a,i){for(var o,f=e.shared,u=f.gl,s=0;s<a.length;++s){var c,l=a[s],d=l.name,m=l.info.type,p=n.uniforms[d],h=e.link(l)+".location";if(p){if(!i(p))continue;if(Ya(p)){var b=p.value;if(F.command(null!=b,'missing uniform "'+d+'"',e.commandStr),m===ka||m===Aa){F.command("function"==typeof b&&(m===ka&&("texture2d"===b._reglType||"framebuffer"===b._reglType)||m===Aa&&("textureCube"===b._reglType||"framebufferCube"===b._reglType)),"invalid texture for uniform "+d,e.commandStr);var g=e.link(b._texture||b.color[0]._texture);t(u,".uniform1i(",h,",",g+".bind());"),t.exit(g,".unbind();")}else if(m===ya||m===xa||m===wa){F.optional(function(){F.command(Ie(b),"invalid matrix for uniform "+d,e.commandStr),F.command(m===ya&&4===b.length||m===xa&&9===b.length||m===wa&&16===b.length,"invalid length for matrix uniform "+d,e.commandStr)});var v=e.global.def("new Float32Array(["+Array.prototype.slice.call(b)+"])"),y=2;m===xa?y=3:m===wa&&(y=4),t(u,".uniformMatrix",y,"fv(",h,",false,",v,");")}else{switch(m){case fa:F.commandType(b,"number","uniform "+d,e.commandStr),o="1f";break;case ua:F.command(Ie(b)&&2===b.length,"uniform "+d,e.commandStr),o="2f";break;case sa:F.command(Ie(b)&&3===b.length,"uniform "+d,e.commandStr),o="3f";break;case ca:F.command(Ie(b)&&4===b.length,"uniform "+d,e.commandStr),o="4f";break;case ha:F.commandType(b,"boolean","uniform "+d,e.commandStr),o="1i";break;case la:F.commandType(b,"number","uniform "+d,e.commandStr),o="1i";break;case ba:case da:F.command(Ie(b)&&2===b.length,"uniform "+d,e.commandStr),o="2i";break;case ga:case ma:F.command(Ie(b)&&3===b.length,"uniform "+d,e.commandStr),o="3i";break;case va:case pa:F.command(Ie(b)&&4===b.length,"uniform "+d,e.commandStr),o="4i"}t(u,".uniform",o,"(",h,",",Ie(b)?Array.prototype.slice.call(b):b,");")}continue}c=p.append(e,t)}else{if(!i(Ka))continue;c=t.def(f.uniforms,"[",r.id(d),"]")}m===ka?t("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):m===Aa&&t("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),F.optional(function(){function r(r,n){e.assert(t,r,'bad data or missing for uniform "'+d+'".  '+n)}function n(e){r("typeof "+c+'==="'+e+'"',"invalid type, expected "+e)}function a(t,n){r(f.isArrayLike+"("+c+")&&"+c+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function i(t){r("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(t===$n?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(m){case la:n("number");break;case da:a(2);break;case ma:a(3);break;case pa:a(4);break;case fa:n("number");break;case ua:a(2);break;case sa:a(3);break;case ca:a(4);break;case ha:n("boolean");break;case ba:a(2);break;case ga:a(3);break;case va:case ya:a(4);break;case xa:a(9);break;case wa:a(16);break;case ka:i($n);break;case Aa:i(Kn)}});var x=1;switch(m){case ka:case Aa:var w=t.def(c,"._texture");t(u,".uniform1i(",h,",",w,".bind());"),t.exit(w,".unbind();");continue;case la:case ha:o="1i";break;case da:case ba:o="2i",x=2;break;case ma:case ga:o="3i",x=3;break;case pa:case va:o="4i",x=4;break;case fa:o="1f";break;case ua:o="2f",x=2;break;case sa:o="3f",x=3;break;case ca:o="4f",x=4;break;case ya:o="Matrix2fv";break;case xa:o="Matrix3fv";break;case wa:o="Matrix4fv"}if(t(u,".uniform",o,"(",h,","),"M"===o.charAt(0)){var k=Math.pow(m-ya+2,2),A=e.global.def("new Float32Array(",k,")");t("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",q(k,function(e){return A+"["+e+"]="+c+"["+e+"]"}),",",A,")")}else t(x>1?q(x,function(e){return c+"["+e+"]"}):c);t(");")}}function G(e,t,r,n){var a=e.shared,i=a.gl,o=a.draw,f=n.draw;var u=function(){var a,u=f.elements,s=t;return u?((u.contextDep&&n.contextDynamic||u.propDep)&&(s=r),a=u.append(e,s)):a=s.def(o,".",In),a&&s("if("+a+")"+i+".bindBuffer("+Xn+","+a+".buffer.buffer);"),a}();function s(a){var i=f[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(e,r):i.append(e,t):t.def(o,".",a)}var c,l,d=s(Rn),m=s(Mn),p=function(){var a,i=f.count,u=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(u=r),a=i.append(e,u),F.optional(function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(u,a+">=0","missing vertex count")})):(a=u.def(o,".",Ln),F.optional(function(){e.assert(u,a+">=0","missing vertex count")})),a}();if("number"==typeof p){if(0===p)return}else r("if(",p,"){"),r.exit("}");v&&(c=s(Wn),l=e.instancing);var h=u+".type",b=f.elements&&Ya(f.elements);function g(){function e(){r(l,".drawElementsInstancedANGLE(",[d,p,h,m+"<<(("+h+"-"+$r+")>>1)",c],");")}function t(){r(l,".drawArraysInstancedANGLE(",[d,m,p,c],");")}u?b?e():(r("if(",u,"){"),e(),r("}else{"),t(),r("}")):t()}function y(){function e(){r(i+".drawElements("+[d,p,h,m+"<<(("+h+"-"+$r+")>>1)"]+");")}function t(){r(i+".drawArrays("+[d,m,p]+");")}u?b?e():(r("if(",u,"){"),e(),r("}else{"),t(),r("}")):t()}v&&("number"!=typeof c||c>=0)?"string"==typeof c?(r("if(",c,">0){"),g(),r("}else if(",c,"<0){"),y(),r("}")):g():y()}function N(e,t,r,n,a){var i=C(),o=i.proc("body",a);return F.optional(function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr)}),v&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays")),e(i,o,r,n),i.compile().body}function Q(e,t,r,n){M(e,t),U(e,t,r,n.attributes,function(){return!0}),H(e,t,r,n.uniforms,function(){return!0}),G(e,t,t,r)}function V(e,t,r,n){function a(){return!0}e.batchId="a1",M(e,t),U(e,t,r,n.attributes,a),H(e,t,r,n.uniforms,a),G(e,t,t,r)}function Y(e,t,r,n){M(e,t);var a=r.contextDep,i=t.def(),o=t.def();e.shared.props=o,e.batchId=i;var f=e.scope(),u=e.scope();function s(e){return e.contextDep&&a||e.propDep}function c(e){return!s(e)}if(t(f.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",o,"=","a0","[",i,"];",u,"}",f.exit),r.needsContext&&B(e,u,r.context),r.needsFramebuffer&&P(e,u,r.framebuffer),R(e,u,r.state,s),r.profile&&s(r.profile)&&W(e,u,r,!1,!0),n)U(e,f,r,n.attributes,c),U(e,u,r,n.attributes,s),H(e,f,r,n.uniforms,c),H(e,u,r,n.uniforms,s),G(e,f,u,r);else{var l=e.global.def("{}"),d=r.shader.progVar.append(e,u),m=u.def(d,".id"),p=u.def(l,"[",m,"]");u(e.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",l,"[",m,"]=",e.link(function(t){return N(V,e,r,t,2)}),"(",d,");}",p,".call(this,a0[",i,"],",i,");")}}function X(e,t,r){var n=t.static[r];if(n&&function(e){if("object"==typeof e&&!Ie(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(L.isDynamic(e[t[r]]))return!0;return!1}}(n)){var a=e.global,i=Object.keys(n),o=!1,f=!1,u=!1,s=e.global.def("{}");i.forEach(function(t){var r=n[t];if(L.isDynamic(r)){"function"==typeof r&&(r=n[t]=L.unbox(r));var i=$a(r,null);o=o||i.thisDep,u=u||i.propDep,f=f||i.contextDep}else{switch(a(s,".",t,"="),typeof r){case"number":a(r);break;case"string":a('"',r,'"');break;case"object":Array.isArray(r)&&a("[",r.join(),"]");break;default:a(e.link(r))}a(";")}}),t.dynamic[r]=new L.DynamicVariable(nn,{thisDep:o,contextDep:f,propDep:u,ref:s,append:function(e,t){i.forEach(function(r){var a=n[r];if(L.isDynamic(a)){var i=e.invoke(t,a);t(s,".",r,"=",i,";")}})}}),delete t.static[r]}}return{next:w,current:x,procs:function(){var e=C(),t=e.proc("poll"),r=e.proc("refresh"),n=e.block();t(n),r(n);var i,o=e.shared,f=o.gl,u=o.next,s=o.current;n(s,".dirty=false;"),P(e,t),P(e,r,null,!0),v&&(i=e.link(v));for(var c=0;c<a.maxAttributes;++c){var l=r.def(o.attributes,"[",c,"]"),d=e.cond(l,".buffer");d.then(f,".enableVertexAttribArray(",c,");",f,".bindBuffer(",Yn,",",l,".buffer.buffer);",f,".vertexAttribPointer(",c,",",l,".size,",l,".type,",l,".normalized,",l,".stride,",l,".offset);").else(f,".disableVertexAttribArray(",c,");",f,".vertexAttrib4f(",c,",",l,".x,",l,".y,",l,".z,",l,".w);",l,".buffer=null;"),r(d),v&&r(i,".vertexAttribDivisorANGLE(",c,",",l,".divisor);")}return Object.keys(A).forEach(function(a){var i=A[a],o=n.def(u,".",a),c=e.block();c("if(",o,"){",f,".enable(",i,")}else{",f,".disable(",i,")}",s,".",a,"=",o,";"),r(c),t("if(",o,"!==",s,".",a,"){",c,"}")}),Object.keys(_).forEach(function(a){var i,o,c=_[a],l=x[a],d=e.block();if(d(f,".",c,"("),Ie(l)){var m=l.length;i=e.global.def(u,".",a),o=e.global.def(s,".",a),d(q(m,function(e){return i+"["+e+"]"}),");",q(m,function(e){return o+"["+e+"]="+i+"["+e+"];"}).join("")),t("if(",q(m,function(e){return i+"["+e+"]!=="+o+"["+e+"]"}).join("||"),"){",d,"}")}else i=n.def(u,".",a),o=n.def(s,".",a),d(i,");",s,".",a,"=",i,";"),t("if(",i,"!==",o,"){",d,"}");r(d)}),e.compile()}(),compile:function(e,t,n,a,i){var o=C();o.stats=o.link(i),Object.keys(t.static).forEach(function(e){X(o,t,e)}),Vn.forEach(function(t){X(o,e,t)});var f=z(e,t,n,a,o);return function(e,t){var r=e.proc("draw",1);M(e,r),B(e,r,t.context),P(e,r,t.framebuffer),I(e,r,t),R(e,r,t.state),W(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)Q(e,r,t,t.shader.program);else{var a=e.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(e.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",e.link(function(r){return N(Q,e,t,r,1)}),"(",n,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}(o,f),function(e,t){var n=e.proc("scope",3);e.batchId="a2";var a=e.shared,i=a.current;function o(r){var i=t.shader[r];i&&n.set(a.shader,"."+r,i.append(e,n))}B(e,n,t.context),t.framebuffer&&t.framebuffer.append(e,n),Qa(Object.keys(t.state)).forEach(function(r){var i=t.state[r].append(e,n);Ie(i)?i.forEach(function(t,a){n.set(e.next[r],"["+a+"]",t)}):n.set(a.next,"."+r,i)}),W(e,n,t,!0,!0),[In,Mn,Ln,Wn,Rn].forEach(function(r){var i=t.draw[r];i&&n.set(a.draw,"."+r,""+i.append(e,n))}),Object.keys(t.uniforms).forEach(function(i){n.set(a.uniforms,"["+r.id(i)+"]",t.uniforms[i].append(e,n))}),Object.keys(t.attributes).forEach(function(r){var a=t.attributes[r].append(e,n),i=e.scopeAttrib(r);Object.keys(new b).forEach(function(e){n.set(i,"."+e,a[e])})}),o(Bn),o(Pn),Object.keys(t.state).length>0&&(n(i,".dirty=true;"),n.exit(i,".dirty=true;")),n("a1(",e.shared.context,",a0,",e.batchId,");")}(o,f),function(e,t){var r=e.proc("batch",2);e.batchId="0",M(e,r);var n=!1,a=!0;Object.keys(t.context).forEach(function(e){n=n||t.context[e].propDep}),n||(B(e,r,t.context),a=!1);var i=t.framebuffer,o=!1;function f(e){return e.contextDep&&n||e.propDep}i?(i.propDep?n=o=!0:i.contextDep&&n&&(o=!0),o||P(e,r,i)):P(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(n=!0),I(e,r,t),R(e,r,t.state,function(e){return!f(e)}),t.profile&&f(t.profile)||W(e,r,t,!1,"a1"),t.contextDep=n,t.needsContext=a,t.needsFramebuffer=o;var u=t.shader.progVar;if(u.contextDep&&n||u.propDep)Y(e,r,t,null);else{var s=u.append(e,r);if(r(e.shared.gl,".useProgram(",s,".program);"),t.shader.program)Y(e,r,t,t.shader.program);else{var c=e.global.def("{}"),l=r.def(s,".id"),d=r.def(c,"[",l,"]");r(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",l,"]=",e.link(function(r){return N(Y,e,t,r,2)}),"(",s,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}(o,f),o.compile()}}}var Za=34918,ei=34919,ti=35007,ri=function(e,t){if(!t.ext_disjoint_timer_query)return null;var r=[];function n(e){r.push(e)}var a=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var o=[];function f(e){o.push(e)}var u=[];function s(e,t,r){var n=o.pop()||new i;n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,u.push(n)}var c=[],l=[];return{beginQuery:function(e){var n=r.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(ti,n),a.push(n),s(a.length-1,a.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(ti)},pushScopeStats:s,update:function(){var e,r,i=a.length;if(0!==i){l.length=Math.max(l.length,i+1),c.length=Math.max(c.length,i+1),c[0]=0,l[0]=0;var o=0;for(e=0,r=0;r<a.length;++r){var s=a[r];t.ext_disjoint_timer_query.getQueryObjectEXT(s,ei)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,Za),n(s)):a[e++]=s,c[r+1]=o,l[r+1]=e}for(a.length=e,e=0,r=0;r<u.length;++r){var d=u[r],m=d.startQueryIndex,p=d.endQueryIndex;d.sum+=c[p]-c[m];var h=l[m],b=l[p];b===h?(d.stats.gpuTime+=d.sum/1e6,f(d)):(d.startQueryIndex=h,d.endQueryIndex=b,u[e++]=d)}u.length=e}},getNumPendingQueries:function(){return a.length},clear:function(){r.push.apply(r,a);for(var e=0;e<r.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(r[e]);a.length=0,r.length=0},restore:function(){a.length=0,r.length=0}}},ni=16384,ai=256,ii=1024,oi=34962,fi="webglcontextlost",ui="webglcontextrestored",si=1,ci=2,li=3;function di(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}return function(r){var n=G(r);if(!n)return null;var a=n.gl,i=a.getContextAttributes(),o=a.isContextLost(),f=function(e,t){var r={};function n(t){F.type(t,"string","extension name must be string");var n,a=t.toLowerCase();try{n=r[a]=e.getExtension(a)}catch(i){}return!!n}for(var a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!n(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!n(e))throw new Error("(regl): error restoring extension "+e)})}}}(a,n);if(!f)return null;var u,s,c=(u={"":0},s=[""],{id:function(e){var t=u[e];return t||(t=u[e]=s.length,s.push(e),t)},str:function(e){return s[e]}}),l={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=f.extensions,m=ri(a,d),p=W(),h=a.drawingBufferWidth,b=a.drawingBufferHeight,g={tick:0,time:0,viewportWidth:h,viewportHeight:b,framebufferWidth:h,framebufferHeight:b,drawingBufferWidth:h,drawingBufferHeight:b,pixelRatio:n.pixelRatio},v=te(a,d),y=function(e,t,r,n){for(var a=r.maxAttributes,i=new Array(a),o=0;o<a;++o)i[o]=new Rr;return{Record:Rr,scope:{},state:i}}(0,0,v),x=function(t,r,n,a){var i=0,o={};function f(e){this.id=i++,this.buffer=t.createBuffer(),this.type=e,this.usage=le,this.byteLength=0,this.dimension=1,this.dtype=me,this.persistentData=null,n.profile&&(this.stats={size:0})}f.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},f.prototype.destroy=function(){l(this)};var u=[];function s(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function c(t,r,n,a,i,o){var f,u;if(t.usage=n,Array.isArray(r)){if(t.dtype=a||pe,r.length>0)if(Array.isArray(r[0])){f=ce(r);for(var c=1,l=1;l<f.length;++l)c*=f[l];t.dimension=c,s(t,u=se(r,f,t.dtype),n),o?t.persistentData=u:ee.freeType(u)}else if("number"==typeof r[0]){t.dimension=i;var d=ee.allocType(t.dtype,r.length);ge(d,r),s(t,d,n),o?t.persistentData=d:ee.freeType(d)}else e(r[0])?(t.dimension=r[0].length,t.dtype=a||be(r[0])||pe,s(t,u=se(r,[r.length,r[0].length],t.dtype),n),o?t.persistentData=u:ee.freeType(u)):F.raise("invalid buffer data")}else if(e(r))t.dtype=a||be(r),t.dimension=i,s(t,r,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(r.buffer)));else if(re(r)){f=r.shape;var m=r.stride,p=r.offset,h=0,b=0,g=0,v=0;1===f.length?(h=f[0],b=1,g=m[0],v=0):2===f.length?(h=f[0],b=f[1],g=m[0],v=m[1]):F.raise("invalid shape"),t.dtype=a||be(r.data)||pe,t.dimension=b;var y=ee.allocType(t.dtype,h*b);ve(y,r.data,h,b,g,v,p),s(t,y,n),o?t.persistentData=y:ee.freeType(y)}else r instanceof ArrayBuffer?(t.dtype=me,t.dimension=i,s(t,r,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(r)))):F.raise("invalid buffer data")}function l(e){r.bufferCount--;for(var n=0;n<a.state.length;++n){var i=a.state[n];i.buffer===e&&(t.disableVertexAttribArray(n),i.buffer=null)}var f=e.buffer;F(f,"buffer must not be deleted already"),t.deleteBuffer(f),e.buffer=null,delete o[e.id]}return n.profile&&(r.getTotalBufferSize=function(){var e=0;return Object.keys(o).forEach(function(t){e+=o[t].stats.size}),e}),{create:function(a,i,u,s){r.bufferCount++;var d=new f(i);function m(r){var a=le,i=null,o=0,f=0,u=1;return Array.isArray(r)||e(r)||re(r)||r instanceof ArrayBuffer?i=r:"number"==typeof r?o=0|r:r&&(F.type(r,"object","buffer arguments must be an object, a number or an array"),"data"in r&&(F(null===i||Array.isArray(i)||e(i)||re(i),"invalid data for buffer"),i=r.data),"usage"in r&&(F.parameter(r.usage,ue,"invalid buffer usage"),a=ue[r.usage]),"type"in r&&(F.parameter(r.type,fe,"invalid buffer type"),f=fe[r.type]),"dimension"in r&&(F.type(r.dimension,"number","invalid dimension"),u=0|r.dimension),"length"in r&&(F.nni(o,"buffer length must be a nonnegative integer"),o=0|r.length)),d.bind(),i?c(d,i,a,f,u,s):(o&&t.bufferData(d.type,o,a),d.dtype=f||me,d.usage=a,d.dimension=u,d.byteLength=o),n.profile&&(d.stats.size=d.byteLength*he[d.dtype]),m}function p(e,r){F(r+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+r+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,r,e)}return o[d.id]=d,u||m(a),m._reglType="buffer",m._buffer=d,m.subdata=function(t,r){var n,a=0|(r||0);if(d.bind(),e(t)||t instanceof ArrayBuffer)p(t,a);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=ee.allocType(d.dtype,t.length);ge(i,t),p(i,a),ee.freeType(i)}else if(Array.isArray(t[0])||e(t[0])){n=ce(t);var o=se(t,n,d.dtype);p(o,a),ee.freeType(o)}else F.raise("invalid buffer data")}else if(re(t)){n=t.shape;var f=t.stride,u=0,s=0,c=0,l=0;1===n.length?(u=n[0],s=1,c=f[0],l=0):2===n.length?(u=n[0],s=n[1],c=f[0],l=f[1]):F.raise("invalid shape");var h=Array.isArray(t.data)?d.dtype:be(t.data),b=ee.allocType(h,u*s);ve(b,t.data,u,s,c,l,t.offset),p(b,a),ee.freeType(b)}else F.raise("invalid data for buffer subdata");return m},n.profile&&(m.stats=d.stats),m.destroy=function(){l(d)},m},createStream:function(e,t){var r=u.pop();return r||(r=new f(e)),r.bind(),c(r,t,de,0,1,!1),r},destroyStream:function(e){u.push(e)},clear:function(){ne(o).forEach(l),u.forEach(l)},getBuffer:function(e){return e&&e._buffer instanceof f?e._buffer:null},restore:function(){ne(o).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:c}}(a,l,n,y),w=function(t,r,n,a){var i={},o=0,f={uint8:_e,uint16:Te};function u(e){this.id=o++,i[this.id]=this,this.buffer=e,this.primType=ke,this.vertCount=0,this.type=0}r.oes_element_index_uint&&(f.uint32=De),u.prototype.bind=function(){this.buffer.bind()};var s=[];function c(a,i,o,f,u,s,c){if(a.buffer.bind(),i){var l=c;c||e(i)&&(!re(i)||e(i.data))||(l=r.oes_element_index_uint?De:Te),n._initBuffer(a.buffer,i,o,l,3)}else t.bufferData(je,s,o),a.buffer.dtype=d||_e,a.buffer.usage=o,a.buffer.dimension=3,a.buffer.byteLength=s;var d=c;if(!c){switch(a.buffer.dtype){case _e:case Ae:d=_e;break;case Te:case Se:d=Te;break;case De:case Ee:d=De;break;default:F.raise("unsupported type for element array")}a.buffer.dtype=d}a.type=d,F(d!==De||!!r.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var m=u;m<0&&(m=a.buffer.byteLength,d===Te?m>>=1:d===De&&(m>>=2)),a.vertCount=m;var p=f;if(f<0){p=ke;var h=a.buffer.dimension;1===h&&(p=xe),2===h&&(p=we),3===h&&(p=ke)}a.primType=p}function l(e){a.elementsCount--,F(null!==e.buffer,"must not double destroy elements"),delete i[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,r){var i=n.create(null,je,!0),o=new u(i._buffer);function s(t){if(t)if("number"==typeof t)i(t),o.primType=ke,o.vertCount=0|t,o.type=_e;else{var r=null,n=Ce,a=-1,u=-1,l=0,d=0;Array.isArray(t)||e(t)||re(t)?r=t:(F.type(t,"object","invalid arguments for elements"),"data"in t&&(r=t.data,F(Array.isArray(r)||e(r)||re(r),"invalid data for element buffer")),"usage"in t&&(F.parameter(t.usage,ue,"invalid element buffer usage"),n=ue[t.usage]),"primitive"in t&&(F.parameter(t.primitive,ye,"invalid element buffer primitive"),a=ye[t.primitive]),"count"in t&&(F("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),u=0|t.count),"type"in t&&(F.parameter(t.type,f,"invalid buffer type"),d=f[t.type]),"length"in t?l=0|t.length:(l=u,d===Te||d===Se?l*=2:d!==De&&d!==Ee||(l*=4))),c(o,r,n,a,u,l,d)}else i(),o.primType=ke,o.vertCount=0,o.type=_e;return s}return a.elementsCount++,s(t),s._reglType="elements",s._elements=o,s.subdata=function(e,t){return i.subdata(e,t),s},s.destroy=function(){l(o)},s},createStream:function(e){var t=s.pop();return t||(t=new u(n.create(null,je,!0,!1)._buffer)),c(t,e,Oe,-1,-1,0,0),t},destroyStream:function(e){s.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof u?e._elements:null},clear:function(){ne(i).forEach(l)}}}(a,d,x,l),k=function(e,t,r,n){var a={},i={};function o(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function f(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t)}function u(r,n,o){var f=r===Lr?a:i,u=f[n];if(!u){var s=t.str(n);u=e.createShader(r),e.shaderSource(u,s),e.compileShader(u),F.shaderError(e,u,s,r,o),f[n]=u}return u}var s={},c=[],l=0;function d(e,t){this.id=l++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function m(r,a){var i,s,c=u(Lr,r.fragId),l=u(Mr,r.vertId),d=r.program=e.createProgram();e.attachShader(d,c),e.attachShader(d,l),e.linkProgram(d),F.linkError(e,d,t.str(r.fragId),t.str(r.vertId),a);var m=e.getProgramParameter(d,Wr);n.profile&&(r.stats.uniformsCount=m);var p=r.uniforms;for(i=0;i<m;++i)if(s=e.getActiveUniform(d,i))if(s.size>1)for(var h=0;h<s.size;++h){var b=s.name.replace("[0]","["+h+"]");f(p,new o(b,t.id(b),e.getUniformLocation(d,b),s))}else f(p,new o(s.name,t.id(s.name),e.getUniformLocation(d,s.name),s));var g=e.getProgramParameter(d,Ur);n.profile&&(r.stats.attributesCount=g);var v=r.attributes;for(i=0;i<g;++i)(s=e.getActiveAttrib(d,i))&&f(v,new o(s.name,t.id(s.name),e.getAttribLocation(d,s.name),s))}return n.profile&&(r.getMaxUniformsCount=function(){var e=0;return c.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},r.getMaxAttributesCount=function(){var e=0;return c.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);ne(a).forEach(t),a={},ne(i).forEach(t),i={},c.forEach(function(t){e.deleteProgram(t.program)}),c.length=0,s={},r.shaderCount=0},program:function(e,t,n){F.command(e>=0,"missing vertex shader",n),F.command(t>=0,"missing fragment shader",n);var a=s[t];a||(a=s[t]={});var i=a[e];return i||(i=new d(t,e),r.shaderCount++,m(i,n),a[e]=i,c.push(i)),i},restore:function(){a={},i={};for(var e=0;e<c.length;++e)m(c[e])},shader:u,frag:-1,vert:-1}}(a,c,l,n),A=dr(a,d,v,function(){T.procs.poll()},g,l,n),_=gr(a,d,v,l,n),S=function(e,r,n,a,i,o){var f={cur:null,next:null,dirty:!1,setFBO:null},u=["rgba"],s=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&s.push("srgba"),r.ext_color_buffer_half_float&&s.push("rgba16f","rgb16f"),r.webgl_color_buffer_float&&s.push("rgba32f");var c=["uint8"];function l(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,a=0;t?(n=t.width,a=t.height):r&&(n=r.width,a=r.height),this.width=n,this.height=a}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function m(e,t,r){if(e)if(e.texture){var n=e.texture._texture,a=Math.max(1,n.width),i=Math.max(1,n.height);F(a===t&&i===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var o=e.renderbuffer._renderbuffer;F(o.width===t&&o.height===r,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function p(t,r){r&&(r.texture?e.framebufferTexture2D(vr,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(vr,t,yr,r.renderbuffer._renderbuffer.renderbuffer))}function h(e){var t=xr,r=null,n=null,a=e;"object"==typeof e&&(a=e.data,"target"in e&&(t=0|e.target)),F.type(a,"function","invalid attachment data");var i=a._reglType;return"texture2d"===i?(r=a,F(t===xr)):"textureCube"===i?(r=a,F(t>=wr&&t<wr+6,"invalid cube map target")):"renderbuffer"===i?(n=a,t=yr):F.raise("invalid regl object for attachment"),new l(t,r,n)}function b(e,t,r,n,o){if(r){var f=a.create2D({width:e,height:t,format:n,type:o});return f._texture.refCount=0,new l(xr,f,null)}var u=i.create({width:e,height:t,format:n});return u._renderbuffer.refCount=0,new l(yr,null,u)}function g(e){return e&&(e.texture||e.renderbuffer)}function v(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}r.oes_texture_half_float&&c.push("half float","float16"),r.oes_texture_float&&c.push("float","float32");var y=0,x={};function w(){this.id=y++,x[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function k(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function A(t){var r=t.framebuffer;F(r,"must not double destroy framebuffer"),e.deleteFramebuffer(r),t.framebuffer=null,o.framebufferCount--,delete x[t.id]}function _(t){var r;e.bindFramebuffer(vr,t.framebuffer);var a=t.colorAttachments;for(r=0;r<a.length;++r)p(kr+r,a[r]);for(r=a.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(vr,kr+r,xr,null,0);e.framebufferTexture2D(vr,Sr,xr,null,0),e.framebufferTexture2D(vr,Ar,xr,null,0),e.framebufferTexture2D(vr,_r,xr,null,0),p(Ar,t.depthAttachment),p(_r,t.stencilAttachment),p(Sr,t.depthStencilAttachment);var i=e.checkFramebufferStatus(vr);e.isContextLost()||i===Tr||F.raise("framebuffer configuration not supported, status = "+Pr[i]),e.bindFramebuffer(vr,f.next?f.next.framebuffer:null),f.cur=f.next,e.getError()}function S(e,a){var i=new w;function l(e,t){var a;F(f.next!==i,"can not update framebuffer which is currently in use");var o=0,d=0,p=!0,v=!0,y=null,x=!0,w="rgba",A="uint8",S=1,T=null,E=null,D=null,j=!1;if("number"==typeof e)o=0|e,d=0|t||o;else if(e){F.type(e,"object","invalid arguments for framebuffer");var O=e;if("shape"in O){var C=O.shape;F(Array.isArray(C)&&C.length>=2,"invalid shape for framebuffer"),o=C[0],d=C[1]}else"radius"in O&&(o=d=O.radius),"width"in O&&(o=O.width),"height"in O&&(d=O.height);("color"in O||"colors"in O)&&(y=O.color||O.colors,Array.isArray(y)&&F(1===y.length||r.webgl_draw_buffers,"multiple render targets not supported")),y||("colorCount"in O&&(S=0|O.colorCount,F(S>0,"invalid color buffer count")),"colorTexture"in O&&(x=!!O.colorTexture,w="rgba4"),"colorType"in O&&(A=O.colorType,x?(F(r.oes_texture_float||!("float"===A||"float32"===A),"you must enable OES_texture_float in order to use floating point framebuffer objects"),F(r.oes_texture_half_float||!("half float"===A||"float16"===A),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===A||"float16"===A?(F(r.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==A&&"float32"!==A||(F(r.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),F.oneOf(A,c,"invalid color type")),"colorFormat"in O&&(w=O.colorFormat,u.indexOf(w)>=0?x=!0:s.indexOf(w)>=0?x=!1:x?F.oneOf(O.colorFormat,u,"invalid color format for texture"):F.oneOf(O.colorFormat,s,"invalid color format for renderbuffer"))),("depthTexture"in O||"depthStencilTexture"in O)&&(j=!(!O.depthTexture&&!O.depthStencilTexture),F(!j||r.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in O&&("boolean"==typeof O.depth?p=O.depth:(T=O.depth,v=!1)),"stencil"in O&&("boolean"==typeof O.stencil?v=O.stencil:(E=O.stencil,p=!1)),"depthStencil"in O&&("boolean"==typeof O.depthStencil?p=v=O.depthStencil:(D=O.depthStencil,p=!1,v=!1))}else o=d=1;var z=null,B=null,P=null,I=null;if(Array.isArray(y))z=y.map(h);else if(y)z=[h(y)];else for(z=new Array(S),a=0;a<S;++a)z[a]=b(o,d,x,w,A);F(r.webgl_draw_buffers||z.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),F(z.length<=n.maxColorAttachments,"too many color attachments, not supported"),o=o||z[0].width,d=d||z[0].height,T?B=h(T):p&&!v&&(B=b(o,d,j,"depth","uint32")),E?P=h(E):v&&!p&&(P=b(o,d,!1,"stencil","uint8")),D?I=h(D):!T&&!E&&v&&p&&(I=b(o,d,j,"depth stencil","depth stencil")),F(!!T+!!E+!!D<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var R=null;for(a=0;a<z.length;++a)if(m(z[a],o,d),F(!z[a]||z[a].texture&&Dr.indexOf(z[a].texture._texture.format)>=0||z[a].renderbuffer&&Br.indexOf(z[a].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+a+" is invalid"),z[a]&&z[a].texture){var L=jr[z[a].texture._texture.format]*Or[z[a].texture._texture.type];null===R?R=L:F(R===L,"all color attachments much have the same number of bits per pixel.")}return m(B,o,d),F(!B||B.texture&&B.texture._texture.format===Er||B.renderbuffer&&B.renderbuffer._renderbuffer.format===Cr,"invalid depth attachment for framebuffer object"),m(P,o,d),F(!P||P.renderbuffer&&P.renderbuffer._renderbuffer.format===Fr,"invalid stencil attachment for framebuffer object"),m(I,o,d),F(!I||I.texture&&I.texture._texture.format===zr||I.renderbuffer&&I.renderbuffer._renderbuffer.format===zr,"invalid depth-stencil attachment for framebuffer object"),k(i),i.width=o,i.height=d,i.colorAttachments=z,i.depthAttachment=B,i.stencilAttachment=P,i.depthStencilAttachment=I,l.color=z.map(g),l.depth=g(B),l.stencil=g(P),l.depthStencil=g(I),l.width=i.width,l.height=i.height,_(i),l}return o.framebufferCount++,l(e,a),t(l,{resize:function(e,t){F(f.next!==i,"can not resize a framebuffer which is currently in use");var r=Math.max(0|e,1),n=Math.max(0|t||r,1);if(r===i.width&&n===i.height)return l;for(var a=i.colorAttachments,o=0;o<a.length;++o)v(a[o],r,n);return v(i.depthAttachment,r,n),v(i.stencilAttachment,r,n),v(i.depthStencilAttachment,r,n),i.width=l.width=r,i.height=l.height=n,_(i),l},_reglType:"framebuffer",_framebuffer:i,destroy:function(){A(i),k(i)},use:function(e){f.setFBO({framebuffer:l},e)}})}return t(f,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof w)return t}return null},create:S,createCube:function(e){var i=Array(6);function o(e){var n;F(i.indexOf(f.next)<0,"can not update framebuffer which is currently in use");var s,l={color:null},d=0,m=null,p="rgba",h="uint8",b=1;if("number"==typeof e)d=0|e;else if(e){F.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var v=g.shape;F(Array.isArray(v)&&v.length>=2,"invalid shape for framebuffer"),F(v[0]===v[1],"cube framebuffer must be square"),d=v[0]}else"radius"in g&&(d=0|g.radius),"width"in g?(d=0|g.width,"height"in g&&F(g.height===d,"must be square")):"height"in g&&(d=0|g.height);("color"in g||"colors"in g)&&(m=g.color||g.colors,Array.isArray(m)&&F(1===m.length||r.webgl_draw_buffers,"multiple render targets not supported")),m||("colorCount"in g&&(b=0|g.colorCount,F(b>0,"invalid color buffer count")),"colorType"in g&&(F.oneOf(g.colorType,c,"invalid color type"),h=g.colorType),"colorFormat"in g&&(p=g.colorFormat,F.oneOf(g.colorFormat,u,"invalid color format for texture"))),"depth"in g&&(l.depth=g.depth),"stencil"in g&&(l.stencil=g.stencil),"depthStencil"in g&&(l.depthStencil=g.depthStencil)}else d=1;if(m)if(Array.isArray(m))for(s=[],n=0;n<m.length;++n)s[n]=m[n];else s=[m];else{s=Array(b);var y={radius:d,format:p,type:h};for(n=0;n<b;++n)s[n]=a.createCube(y)}for(l.color=Array(s.length),n=0;n<s.length;++n){var x=s[n];F("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),d=d||x.width,F(x.width===d&&x.height===d,"invalid cube map shape"),l.color[n]={target:wr,data:s[n]}}for(n=0;n<6;++n){for(var w=0;w<s.length;++w)l.color[w].target=wr+n;n>0&&(l.depth=i[0].depth,l.stencil=i[0].stencil,l.depthStencil=i[0].depthStencil),i[n]?i[n](l):i[n]=S(l)}return t(o,{width:d,height:d,color:s})}return o(e),t(o,{faces:i,resize:function(e){var t,r=0|e;if(F(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===o.width)return o;var a=o.color;for(t=0;t<a.length;++t)a[t].resize(r);for(t=0;t<6;++t)i[t].resize(r);return o.width=o.height=r,o},_reglType:"framebufferCube",destroy:function(){i.forEach(function(e){e.destroy()})}})},clear:function(){ne(x).forEach(A)},restore:function(){f.cur=null,f.next=null,f.dirty=!0,ne(x).forEach(function(t){t.framebuffer=e.createFramebuffer(),_(t)})}})}(a,d,v,A,_,l),T=Ja(a,c,d,v,x,w,0,S,{},y,k,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,m,n),E=Qr(a,S,T.procs.poll,g,i,d,v),D=T.next,j=a.canvas,O=[],C=[],z=[],B=[n.onDestroy],P=null;function I(){if(0===O.length)return m&&m.update(),void(P=null);P=M.next(I),$();for(var e=O.length-1;e>=0;--e){var t=O[e];t&&t(g,null,0)}a.flush(),m&&m.update()}function R(){!P&&O.length>0&&(P=M.next(I))}function U(){P&&(M.cancel(I),P=null)}function H(e){e.preventDefault(),o=!0,U(),C.forEach(function(e){e()})}function q(e){a.getError(),o=!1,f.restore(),k.restore(),x.restore(),A.restore(),_.restore(),S.restore(),m&&m.restore(),T.procs.refresh(),R(),z.forEach(function(e){e()})}function N(e){function r(e){var t={},r={};return Object.keys(e).forEach(function(n){var a=e[n];L.isDynamic(a)?r[n]=L.unbox(a,n):t[n]=a}),{dynamic:r,static:t}}F(!!e,"invalid args to regl({...})"),F.type(e,"object","invalid args to regl({...})");var n=r(e.context||{}),a=r(e.uniforms||{}),i=r(e.attributes||{}),f=r(function(e){var r=t({},e);function n(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),r}(e)),u={gpuTime:0,cpuTime:0,count:0},s=T.compile(f,i,a,n,u),c=s.draw,l=s.batch,d=s.scope,m=[];return t(function(e,t){var r;if(o&&F.raise("context lost"),"function"==typeof e)return d.call(this,null,e,0);if("function"==typeof t){if("number"==typeof e){for(r=0;r<e;++r)d.call(this,null,t,r);return}if(Array.isArray(e)){for(r=0;r<e.length;++r)d.call(this,e[r],t,r);return}return d.call(this,e,t,0)}if("number"==typeof e){if(e>0)return l.call(this,function(e){for(;m.length<e;)m.push(null);return m}(0|e),0|e)}else{if(!Array.isArray(e))return c.call(this,e);if(e.length)return l.call(this,e,e.length)}},{stats:u})}j&&(j.addEventListener(fi,H,!1),j.addEventListener(ui,q,!1));var Q=S.setFBO=N({framebuffer:L.define.call(null,si,"framebuffer")});function V(e,t){var r=0;T.procs.poll();var n=t.color;n&&(a.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=ni),"depth"in t&&(a.clearDepth(+t.depth),r|=ai),"stencil"in t&&(a.clearStencil(0|t.stencil),r|=ii),F(!!r,"called regl.clear with no buffer specified"),a.clear(r)}function Y(e){return F.type(e,"function","regl.frame() callback must be a function"),O.push(e),R(),{cancel:function(){var t=di(O,e);F(t>=0,"cannot cancel a frame twice"),O[t]=function e(){var t=di(O,e);O[t]=O[O.length-1],O.length-=1,O.length<=0&&U()}}}}function X(){var e=D.viewport,t=D.scissor_box;e[0]=e[1]=t[0]=t[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=e[2]=t[2]=a.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=e[3]=t[3]=a.drawingBufferHeight}function $(){g.tick+=1,g.time=J(),X(),T.procs.poll()}function K(){X(),T.procs.refresh(),m&&m.update()}function J(){return(W()-p)/1e3}K();var Z=t(N,{clear:function(e){if(F("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var r=0;r<6;++r)Q(t({framebuffer:e.framebuffer.faces[r]},e),V);else Q(e,V);else V(0,e)},prop:L.define.bind(null,si),context:L.define.bind(null,ci),this:L.define.bind(null,li),draw:N({}),buffer:function(e){return x.create(e,oi,!1,!1)},elements:function(e){return w.create(e,!1)},texture:A.create2D,cube:A.createCube,renderbuffer:_.create,framebuffer:S.create,framebufferCube:S.createCube,attributes:i,frame:Y,on:function(e,t){var r;switch(F.type(t,"function","listener callback must be a function"),e){case"frame":return Y(t);case"lost":r=C;break;case"restore":r=z;break;case"destroy":r=B;break;default:F.raise("invalid event, must be one of frame,lost,restore,destroy")}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t)return r[e]=r[r.length-1],void r.pop()}}},limits:v,hasExtension:function(e){return v.extensions.indexOf(e.toLowerCase())>=0},read:E,destroy:function(){O.length=0,U(),j&&(j.removeEventListener(fi,H),j.removeEventListener(ui,q)),k.clear(),S.clear(),_.clear(),A.clear(),w.clear(),x.clear(),m&&m.clear(),B.forEach(function(e){e()})},_gl:a,_refresh:K,poll:function(){$(),m&&m.update()},now:J,stats:l});return n.onDone(null,Z),Z}});
},{}],"aV3E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/classCallCheck")),t=r(require("@babel/runtime/helpers/createClass"));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(){function r(t,i){(0,e.default)(this,r),this.attribute=void 0,this.buffer=void 0;var u=i.buffer,s=i.offset,f=i.stride,a=i.normalized,o=i.size,l=i.divisor;this.buffer=u,this.attribute={buffer:u.get(),offset:s||0,stride:f||0,normalized:a||!1,divisor:l||0},o&&(this.attribute.size=o)}return(0,t.default)(r,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),r}();exports.default=i;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"MPk6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cullFaceMap=exports.stencilOpMap=exports.stencilFuncMap=exports.blendFuncMap=exports.blendEquationMap=exports.depthFuncMap=exports.colorSpaceMap=exports.wrapModeMap=exports.filterMap=exports.mipmapMap=exports.formatMap=exports.dataTypeMap=exports.usageMap=exports.primitiveMap=void 0;var l,e,a,t,u,r,d,p,g,f,E,n,s,o,A=_(require("@babel/runtime/helpers/defineProperty")),N=require("@antv/l7-core");function _(l){return l&&l.__esModule?l:{default:l}}var R=(l={},(0,A.default)(l,N.gl.POINTS,"points"),(0,A.default)(l,N.gl.LINES,"lines"),(0,A.default)(l,N.gl.LINE_LOOP,"line loop"),(0,A.default)(l,N.gl.LINE_STRIP,"line strip"),(0,A.default)(l,N.gl.TRIANGLES,"triangles"),(0,A.default)(l,N.gl.TRIANGLE_FAN,"triangle fan"),(0,A.default)(l,N.gl.TRIANGLE_STRIP,"triangle strip"),l);exports.primitiveMap=R;var i=(e={},(0,A.default)(e,N.gl.STATIC_DRAW,"static"),(0,A.default)(e,N.gl.DYNAMIC_DRAW,"dynamic"),(0,A.default)(e,N.gl.STREAM_DRAW,"stream"),e);exports.usageMap=i;var T=(a={},(0,A.default)(a,N.gl.BYTE,"int8"),(0,A.default)(a,N.gl.UNSIGNED_INT,"int16"),(0,A.default)(a,N.gl.INT,"int32"),(0,A.default)(a,N.gl.UNSIGNED_BYTE,"uint8"),(0,A.default)(a,N.gl.UNSIGNED_SHORT,"uint16"),(0,A.default)(a,N.gl.UNSIGNED_INT,"uint32"),(0,A.default)(a,N.gl.FLOAT,"float"),a);exports.dataTypeMap=T;var M=(t={},(0,A.default)(t,N.gl.ALPHA,"alpha"),(0,A.default)(t,N.gl.LUMINANCE,"luminance"),(0,A.default)(t,N.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,A.default)(t,N.gl.RGB,"rgb"),(0,A.default)(t,N.gl.RGBA,"rgba"),(0,A.default)(t,N.gl.RGBA4,"rgba4"),(0,A.default)(t,N.gl.RGB5_A1,"rgb5 a1"),(0,A.default)(t,N.gl.RGB565,"rgb565"),(0,A.default)(t,N.gl.DEPTH_COMPONENT,"depth"),(0,A.default)(t,N.gl.DEPTH_STENCIL,"depth stencil"),t);exports.formatMap=M;var c=(u={},(0,A.default)(u,N.gl.DONT_CARE,"dont care"),(0,A.default)(u,N.gl.NICEST,"nice"),(0,A.default)(u,N.gl.FASTEST,"fast"),u);exports.mipmapMap=c;var S=(r={},(0,A.default)(r,N.gl.NEAREST,"nearest"),(0,A.default)(r,N.gl.LINEAR,"linear"),(0,A.default)(r,N.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,A.default)(r,N.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,A.default)(r,N.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,A.default)(r,N.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),r);exports.filterMap=S;var L=(d={},(0,A.default)(d,N.gl.REPEAT,"repeat"),(0,A.default)(d,N.gl.CLAMP_TO_EDGE,"clamp"),(0,A.default)(d,N.gl.MIRRORED_REPEAT,"mirror"),d);exports.wrapModeMap=L;var O=(p={},(0,A.default)(p,N.gl.NONE,"none"),(0,A.default)(p,N.gl.BROWSER_DEFAULT_WEBGL,"browser"),p);exports.colorSpaceMap=O;var I=(g={},(0,A.default)(g,N.gl.NEVER,"never"),(0,A.default)(g,N.gl.ALWAYS,"always"),(0,A.default)(g,N.gl.LESS,"less"),(0,A.default)(g,N.gl.LEQUAL,"lequal"),(0,A.default)(g,N.gl.GREATER,"greater"),(0,A.default)(g,N.gl.GEQUAL,"gequal"),(0,A.default)(g,N.gl.EQUAL,"equal"),(0,A.default)(g,N.gl.NOTEQUAL,"notequal"),g);exports.depthFuncMap=I;var m=(f={},(0,A.default)(f,N.gl.FUNC_ADD,"add"),(0,A.default)(f,N.gl.MIN_EXT,"min"),(0,A.default)(f,N.gl.MAX_EXT,"max"),(0,A.default)(f,N.gl.FUNC_SUBTRACT,"subtract"),(0,A.default)(f,N.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),f);exports.blendEquationMap=m;var C=(E={},(0,A.default)(E,N.gl.ZERO,"zero"),(0,A.default)(E,N.gl.ONE,"one"),(0,A.default)(E,N.gl.SRC_COLOR,"src color"),(0,A.default)(E,N.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,A.default)(E,N.gl.SRC_ALPHA,"src alpha"),(0,A.default)(E,N.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,A.default)(E,N.gl.DST_COLOR,"dst color"),(0,A.default)(E,N.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,A.default)(E,N.gl.DST_ALPHA,"dst alpha"),(0,A.default)(E,N.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,A.default)(E,N.gl.CONSTANT_COLOR,"constant color"),(0,A.default)(E,N.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,A.default)(E,N.gl.CONSTANT_ALPHA,"constant alpha"),(0,A.default)(E,N.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,A.default)(E,N.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),E);exports.blendFuncMap=C;var P=(n={},(0,A.default)(n,N.gl.NEVER,"never"),(0,A.default)(n,N.gl.ALWAYS,"always"),(0,A.default)(n,N.gl.LESS,"less"),(0,A.default)(n,N.gl.LEQUAL,"lequal"),(0,A.default)(n,N.gl.GREATER,"greater"),(0,A.default)(n,N.gl.GEQUAL,"gequal"),(0,A.default)(n,N.gl.EQUAL,"equal"),(0,A.default)(n,N.gl.NOTEQUAL,"notequal"),n);exports.stencilFuncMap=P;var x=(s={},(0,A.default)(s,N.gl.ZERO,"zero"),(0,A.default)(s,N.gl.KEEP,"keep"),(0,A.default)(s,N.gl.REPLACE,"replace"),(0,A.default)(s,N.gl.INVERT,"invert"),(0,A.default)(s,N.gl.INCR,"increment"),(0,A.default)(s,N.gl.DECR,"decrement"),(0,A.default)(s,N.gl.INCR_WRAP,"increment wrap"),(0,A.default)(s,N.gl.DECR_WRAP,"decrement wrap"),s);exports.stencilOpMap=x;var U=(o={},(0,A.default)(o,N.gl.FRONT,"front"),(0,A.default)(o,N.gl.BACK,"back"),o);exports.cullFaceMap=U;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@antv/l7-core":"om0I"}],"p8J9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),a=require("@antv/l7-core"),r=require("./constants");function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function u(t,s){(0,e.default)(this,u),this.buffer=void 0;var f=s.data,i=s.usage,l=s.type;this.buffer=t.buffer({data:f,usage:r.usageMap[i||a.gl.STATIC_DRAW],type:r.dataTypeMap[l||a.gl.UNSIGNED_BYTE]})}return(0,t.default)(u,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var t=e.data,a=e.offset;this.buffer.subdata(t,a)}}]),u}();exports.default=s;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-core":"om0I","./constants":"MPk6"}],"ijiN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),a=require("@antv/l7-core"),s=require("./constants");function u(e){return e&&e.__esModule?e:{default:e}}var r=function(){function u(t,r){(0,e.default)(this,u),this.elements=void 0;var n=r.data,l=r.usage,i=r.type,o=r.count;this.elements=t.elements({data:n,usage:s.usageMap[l||a.gl.STATIC_DRAW],type:s.dataTypeMap[i||a.gl.UNSIGNED_BYTE],count:o})}return(0,t.default)(u,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),u}();exports.default=r;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-core":"om0I","./constants":"MPk6"}],"vaJ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@babel/runtime/helpers/classCallCheck")),r=t(require("@babel/runtime/helpers/createClass"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function(){function t(r,u){(0,e.default)(this,t),this.framebuffer=void 0;var f=u.width,i=u.height,a=u.color,o=u.colors,s=(u.depth,u.stencil,{width:f,height:i});Array.isArray(o)&&(s.colors=o.map(function(e){return e.get()})),a&&"boolean"!=typeof a&&(s.color=a.get()),this.framebuffer=r.framebuffer(s)}return(0,r.default)(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var r=e.width,t=e.height;this.framebuffer.resize(r,t)}}]),t}();exports.default=u;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"WGsg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("@babel/runtime/helpers/typeof")),t=c(require("@babel/runtime/helpers/defineProperty")),r=c(require("@babel/runtime/helpers/classCallCheck")),a=c(require("@babel/runtime/helpers/createClass")),n=c(require("lodash/isTypedArray")),i=c(require("lodash/isPlainObject")),l=require("@antv/l7-core"),s=require("./constants");function c(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function u(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?o(Object(a),!0).forEach(function(r){(0,t.default)(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var f=function(){function t(e,a){(0,r.default)(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=a.vs,i=a.fs,c=a.attributes,o=a.uniforms,u=a.primitive,f=a.count,p=a.elements,d=a.depth,b=a.blend,m=a.stencil,v=a.cull,h=a.instances,y={};o&&(this.uniforms=this.extractUniforms(o),Object.keys(o).forEach(function(t){y[t]=e.prop(t)}));var O={};Object.keys(c).forEach(function(e){O[e]=c[e].get()});var E={attributes:O,frag:i,uniforms:y,vert:n,primitive:s.primitiveMap[void 0===u?l.gl.TRIANGLES:u]};h&&(E.instances=h),f&&(E.count=f),p&&(E.elements=p.get()),this.initDepthDrawParams({depth:d},E),this.initBlendDrawParams({blend:b},E),this.initStencilDrawParams({stencil:m},E),this.initCullDrawParams({cull:v},E),this.drawCommand=e(E)}return(0,a.default)(t,[{key:"addUniforms",value:function(e){this.uniforms=u({},this.uniforms,{},this.extractUniforms(e))}},{key:"draw",value:function(t){var r=u({},this.uniforms,{},this.extractUniforms(t.uniforms||{})),a={};Object.keys(r).forEach(function(t){var n=(0,e.default)(r[t]);"boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT?a[t]=r[t]:a[t]=r[t].get()}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){var r=e.depth;r&&(t.depth={enable:void 0===r.enable||!!r.enable,mask:void 0===r.mask||!!r.mask,func:s.depthFuncMap[r.func||l.gl.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var r=e.blend;if(r){var a=r.enable,n=r.func,i=r.equation,c=r.color,o=void 0===c?[0,0,0,0]:c;t.blend={enable:!!a,func:{srcRGB:s.blendFuncMap[n&&n.srcRGB||l.gl.SRC_ALPHA],srcAlpha:s.blendFuncMap[n&&n.srcAlpha||l.gl.SRC_ALPHA],dstRGB:s.blendFuncMap[n&&n.dstRGB||l.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:s.blendFuncMap[n&&n.dstAlpha||l.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:s.blendEquationMap[i&&i.rgb||l.gl.FUNC_ADD],alpha:s.blendEquationMap[i&&i.alpha||l.gl.FUNC_ADD]},color:o}}}},{key:"initStencilDrawParams",value:function(e,t){var r=e.stencil;if(r){var a=r.enable,n=r.mask,i=void 0===n?-1:n,c=r.func,o=void 0===c?{cmp:l.gl.ALWAYS,ref:0,mask:-1}:c,f=r.opFront,p=void 0===f?{fail:l.gl.KEEP,zfail:l.gl.KEEP,zpass:l.gl.KEEP}:f,d=r.opBack,b=void 0===d?{fail:l.gl.KEEP,zfail:l.gl.KEEP,zpass:l.gl.KEEP}:d;t.stencil={enable:!!a,mask:i,func:u({},o,{cmp:s.stencilFuncMap[o.cmp]}),opFront:{fail:s.stencilOpMap[p.fail],zfail:s.stencilOpMap[p.zfail],zpass:s.stencilOpMap[p.zpass]},opBack:{fail:s.stencilOpMap[b.fail],zfail:s.stencilOpMap[b.zfail],zpass:s.stencilOpMap[b.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var r=e.cull;if(r){var a=r.enable,n=r.face,i=void 0===n?l.gl.BACK:n;t.cull={enable:!!a,face:s.cullFaceMap[i]}}}},{key:"extractUniforms",value:function(e){var t=this,r={};return Object.keys(e).forEach(function(a){t.extractUniformsRecursively(a,e[a],r,"")}),r}},{key:"extractUniformsRecursively",value:function(e,t,r,a){var l=this;null===t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&"number"==typeof t[0]||(0,n.default)(t)||""===t||"resize"in t?r["".concat(a&&a+".").concat(e)]=t:((0,i.default)(t)&&Object.keys(t).forEach(function(n){l.extractUniformsRecursively(n,t[n],r,"".concat(a&&a+".").concat(e))}),Array.isArray(t)&&t.forEach(function(t,n){Object.keys(t).forEach(function(i){l.extractUniformsRecursively(i,t[i],r,"".concat(a&&a+".").concat(e,"[").concat(n,"]"))})}))}}]),t}();exports.default=f;
},{"@babel/runtime/helpers/typeof":"b9XL","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","lodash/isTypedArray":"kwIb","lodash/isPlainObject":"ES04","@antv/l7-core":"om0I","./constants":"MPk6"}],"Fp6m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/classCallCheck")),t=r(require("@babel/runtime/helpers/createClass")),a=require("@antv/l7-core"),i=require("./constants");function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function r(t,o){(0,e.default)(this,r),this.texture=void 0;var p=o.data,l=o.type,u=void 0===l?a.gl.UNSIGNED_BYTE:l,d=o.width,n=o.height,s=o.flipY,v=void 0!==s&&s,m=o.format,f=void 0===m?a.gl.RGBA:m,h=o.mipmap,c=void 0!==h&&h,g=o.wrapS,M=void 0===g?a.gl.CLAMP_TO_EDGE:g,y=o.wrapT,E=void 0===y?a.gl.CLAMP_TO_EDGE:y,w=o.aniso,x=void 0===w?0:w,_=o.alignment,S=void 0===_?1:_,T=o.premultiplyAlpha,b=void 0!==T&&T,A=o.mag,N=void 0===A?a.gl.NEAREST:A,C=o.min,k=void 0===C?a.gl.NEAREST:C,q=o.colorSpace,G=void 0===q?a.gl.NONE:q,O={width:d,height:n,type:i.dataTypeMap[u],format:i.formatMap[f],wrapS:i.wrapModeMap[M],wrapT:i.wrapModeMap[E],mag:i.filterMap[N],min:i.filterMap[k],alignment:S,flipY:v,colorSpace:i.colorSpaceMap[G],premultiplyAlpha:b,aniso:x};p&&(O.data=p),"number"==typeof c?O.mipmap=i.mipmapMap[c]:"boolean"==typeof c&&(O.mipmap=c),this.texture=t.texture(O)}return(0,t.default)(r,[{key:"get",value:function(){return this.texture}},{key:"resize",value:function(e){var t=e.width,a=e.height;this.texture.resize(t,a)}},{key:"destroy",value:function(){this.texture.destroy()}}]),r}();exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-core":"om0I","./constants":"MPk6"}],"HNAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,n=p(require("@babel/runtime/regenerator")),i=p(require("@babel/runtime/helpers/asyncToGenerator")),u=p(require("@babel/runtime/helpers/classCallCheck")),l=p(require("@babel/runtime/helpers/createClass")),a=require("inversify"),f=p(require("regl")),s=p(require("./ReglAttribute")),o=p(require("./ReglBuffer")),c=p(require("./ReglElements")),h=p(require("./ReglFramebuffer")),d=p(require("./ReglModel")),g=p(require("./ReglTexture2D"));function p(e){return e&&e.__esModule?e:{default:e}}var _=(e=(0,a.injectable)())(t=r=function(){function e(){var t=this;(0,u.default)(this,e),this.gl=void 0,this.$container=void 0,this.createModel=function(e){return new d.default(t.gl,e)},this.createAttribute=function(e){return new s.default(t.gl,e)},this.createBuffer=function(e){return new o.default(t.gl,e)},this.createElements=function(e){return new c.default(t.gl,e)},this.createTexture2D=function(e){return new g.default(t.gl,e)},this.createFramebuffer=function(e){return new h.default(t.gl,e)},this.useFramebuffer=function(e,r){t.gl({framebuffer:e?e.get():null})(r)},this.clear=function(e){var r=e.color,n=e.depth,i=e.stencil,u=e.framebuffer,l=void 0===u?null:u,a={color:r,depth:n,stencil:i};a.framebuffer=null===l?l:l.get(),t.gl.clear(a)},this.viewport=function(e){var r,n=e.x,i=e.y,u=e.width,l=e.height,a=null===(r=t.$container)||void 0===r?void 0:r.getElementsByTagName("canvas")[0];a&&(a.width=u,a.height=l,a.style.width=u/2+"px",a.style.height=l/2+"px"),t.gl._gl.viewport(n,i,u,l),t.gl._refresh()},this.readPixels=function(e){var r=e.framebuffer,n={x:e.x,y:e.y,width:e.width,height:e.height};return r&&(n.framebuffer=r.get()),t.gl.read(n)},this.getViewportSize=function(){return{width:t.gl._gl.drawingBufferWidth,height:t.gl._gl.drawingBufferHeight}},this.getContainer=function(){return t.$container},this.destroy=function(){t.gl.destroy()}}return(0,l.default)(e,[{key:"init",value:function(){var e=(0,i.default)(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.$container=t,e.next=3,new Promise(function(e,r){(0,f.default)({container:t,attributes:{alpha:!0,antialias:!0,premultipliedAlpha:!0},extensions:["OES_element_index_uint","EXT_blend_minmax","OES_standard_derivatives","WEBGL_depth_texture","angle_instanced_arrays","EXT_texture_filter_anisotropic"],optionalExtensions:["oes_texture_float_linear","OES_texture_float"],profile:!0,onDone:function(t,n){!t&&n||r(t),e(n)}})});case 3:this.gl=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}())||t;exports.default=_;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M","regl":"Jx9Q","./ReglAttribute":"aV3E","./ReglBuffer":"p8J9","./ReglElements":"ijiN","./ReglFramebuffer":"vaJ6","./ReglModel":"WGsg","./ReglTexture2D":"Fp6m"}],"qGtK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ReglRendererService",{enumerable:!0,get:function(){return e.default}});var e=r(require("./regl"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./regl":"HNAd"}],"mCbX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var e=a(require("@babel/runtime/helpers/classCallCheck")),t=a(require("@babel/runtime/helpers/createClass")),i=require("@antv/l7-component"),r=require("@antv/l7-core"),n=require("@antv/l7-renderer"),o=require("@antv/l7-utils");function a(e){return e&&e.__esModule?e:{default:e}}var c=function(){function a(t){(0,e.default)(this,a),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.container=void 0;var o=t.id,c=t.map,v=(0,r.createSceneContainer)();this.container=v,c.setContainer(v,o),v.bind(r.TYPES.IRendererService).to(n.ReglRendererService).inSingletonScope(),this.sceneService=v.get(r.TYPES.ISceneService),this.mapService=v.get(r.TYPES.IMapService),this.iconService=v.get(r.TYPES.IIconService),this.controlService=v.get(r.TYPES.IControlService),this.layerService=v.get(r.TYPES.ILayerService),this.markerService=v.get(r.TYPES.IMarkerService),this.popupService=v.get(r.TYPES.IPopupService),this.initComponent(o),this.sceneService.init(t),this.addControl(new i.Logo)}return(0,t.default)(a,[{key:"getMapService",value:function(){return this.mapService}},{key:"ExportMap2Png",value:function(){return this.sceneService.ExportMap2Png()}},{key:"addLayer",value:function(e){var t=(0,r.createLayerContainer)(this.container);e.setContainer(t),this.sceneService.addLayer(e)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(e){return this.layerService.getLayer(e)}},{key:"removeLayer",value:function(e){this.layerService.remove(e)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(e,t){this.iconService.addImage(e,t)}},{key:"hasImage",value:function(e){this.iconService.hasImage(e)}},{key:"removeImage",value:function(e){this.iconService.removeImage(e)}},{key:"addControl",value:function(e){this.controlService.addControl(e,this.container)}},{key:"removeControl",value:function(e){this.controlService.removeControl(e)}},{key:"addMarker",value:function(e){this.markerService.addMarker(e)}},{key:"addMarkerLayer",value:function(e){this.markerService.addMarkerLayer(e)}},{key:"removeMarkerLayer",value:function(e){this.markerService.removeMarkerLayer(e)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(e){this.popupService.addPopup(e)}},{key:"on",value:function(e,t){-1===r.SceneEventList.indexOf(e)?this.mapService.on(e,t):this.sceneService.on(e,t)}},{key:"off",value:function(e,t){-1===r.SceneEventList.indexOf(e)?this.mapService.off(e,t):this.sceneService.off(e,t)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(){return this.mapService.getCenter()}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(e){this.mapService.setRotation(e)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(e){this.mapService.panTo(e)}},{key:"panBy",value:function(e){this.mapService.panTo(e)}},{key:"setZoom",value:function(e){this.mapService.setZoom(e)}},{key:"fitBounds",value:function(e){this.mapService.fitBounds(e)}},{key:"setZoomAndCenter",value:function(e,t){this.mapService.setZoomAndCenter(e,t)}},{key:"setMapStyle",value:function(e){this.mapService.setMapStyle(e)}},{key:"pixelToLngLat",value:function(e){return this.mapService.pixelToLngLat(e)}},{key:"lngLatToPixel",value:function(e){return this.mapService.lngLatToPixel(e)}},{key:"containerToLngLat",value:function(e){return this.mapService.containerToLngLat(e)}},{key:"lngLatToContainer",value:function(e){return this.mapService.lngLatToContainer(e)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(e,t){this.container.bind(r.TYPES.IPostProcessingPass).to(e).whenTargetNamed(t)}},{key:"initComponent",value:function(e){this.controlService.init({container:o.DOM.getContainer(e)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"map",get:function(){return this.mapService.map}}]),a}();exports.Scene=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-component":"QgKN","@antv/l7-core":"om0I","@antv/l7-renderer":"qGtK","@antv/l7-utils":"nTEC"}],"Y0Yi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,n,o,l=b(require("@babel/runtime/helpers/defineProperty")),a=b(require("@babel/runtime/helpers/initializerDefineProperty")),c=b(require("@babel/runtime/helpers/classCallCheck")),u=b(require("@babel/runtime/helpers/createClass")),s=b(require("@babel/runtime/helpers/applyDecoratedDescriptor")),f=b(require("@babel/runtime/helpers/initializerWarningHelper")),p=require("@antv/l7-core");function b(e){return e&&e.__esModule?e:{default:e}}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach(function(r){(0,l.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var h=(e=(0,p.lazyInject)(p.TYPES.ILogService),r=(0,p.lazyInject)(p.TYPES.IGlobalConfigService),t=o=function(){function e(r){(0,c.default)(this,e),(0,a.default)(this,"logger",i,this),(0,a.default)(this,"configService",n,this),this.config=void 0,this.config=r}return(0,u.default)(e,[{key:"setContainer",value:function(e,r){var t=this.configService.validateMapConfig(this.config),i=t.valid,n=t.errorText;i?(e.bind(p.TYPES.MapConfig).toConstantValue(d({},this.config,{id:r})),e.bind(p.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()):this.logger.error(n||"")}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),i=(0,s.default)(t.prototype,"logger",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=(0,s.default)(t.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t);exports.default=h;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I"}],"Bk0U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapTheme=void 0;var e={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/12db649ba3493333b098127ed892c0cb?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"};exports.MapTheme=e;
},{}],"G7Ji":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/slicedToArray")),t=a(require("@babel/runtime/helpers/classCallCheck")),i=a(require("@babel/runtime/helpers/createClass")),r=require("gl-matrix");function a(e){return e&&e.__esModule?e:{default:e}}var o=Math.PI/180,n=function(){function a(){(0,t.default)(this,a),this.projectionMatrix=r.mat4.create(),this.viewMatrix=r.mat4.create(),this.viewProjectionMatrix=r.mat4.create(),this.viewUncenteredMatrix=r.mat4.create(),this.zoom=void 0,this.center=void 0}return(0,i.default)(a,[{key:"syncWithMapCamera",value:function(e){var t=e.zoom,i=void 0===t?1:t,a=e.pitch,n=void 0===a?0:a,c=e.bearing,s=void 0===c?0:c,u=e.center,h=void 0===u?[0,0]:u,v=e.offsetOrigin,l=void 0===v?[0,0]:v,M=e.cameraHeight,f=void 0===M?1:M,m=e.aspect,d=void 0===m?1:m,x=e.near,p=void 0===x?.1:x,w=e.far,y=void 0===w?1e3:w,g=e.fov,k=void 0===g?0:g;this.zoom=i,this.center=h;var j=n*o,P=(360-s)*o;r.mat4.perspective(this.projectionMatrix,k,d,p,y);var b=r.vec3.fromValues(f*Math.sin(j)*Math.sin(P),-f*Math.sin(j)*Math.cos(P),f*Math.cos(j)),V=r.vec3.fromValues(-Math.cos(j)*Math.sin(P),Math.cos(j)*Math.cos(P),Math.sin(j));r.mat4.lookAt(this.viewMatrix,b,r.vec3.fromValues(0,0,0),V),this.viewUncenteredMatrix=r.mat4.clone(this.viewMatrix),r.mat4.translate(this.viewMatrix,this.viewMatrix,r.vec3.fromValues(-l[0],l[1],0)),r.mat4.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var t=(0,e.default)(this.center,2);return[t[0],t[1]]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e,t){var i=Math.max(Math.min(85.0511287798,e[1]),-85.0511287798),r=Math.PI/180,a=e[0]*r,o=i*r;o=Math.log(Math.tan(Math.PI/4+o/2));return[a=(256<<20)*(.5/Math.PI*a+.5)-215440491,o=-((256<<20)*(-.5/Math.PI*o+(r=.5))-106744817)]}}]),a}();exports.default=n;
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","gl-matrix":"CPlc"}],"LTV6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,n,a,i,r,o,u,l,c,s,p,m,g,f=O(require("@babel/runtime/regenerator")),h=O(require("@babel/runtime/helpers/defineProperty")),v=O(require("@babel/runtime/helpers/objectWithoutProperties")),d=O(require("@babel/runtime/helpers/asyncToGenerator")),y=O(require("@babel/runtime/helpers/initializerDefineProperty")),b=O(require("@babel/runtime/helpers/classCallCheck")),C=O(require("@babel/runtime/helpers/createClass")),k=O(require("@babel/runtime/helpers/applyDecoratedDescriptor")),S=O(require("@babel/runtime/helpers/initializerWarningHelper")),w=require("@antv/l7-core"),M=require("@antv/l7-utils"),L=require("inversify"),P=require("./theme"),E=O(require("./Viewport"));function O(e){return e&&e.__esModule?e:{default:e}}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,h.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=0,z="15cd8a57710d40c9b7c0e3cc120f1200",A="1.4.15",q="amap-script",Z=!1,B=[],D=12,I=(e=(0,L.injectable)(),t=(0,L.inject)(w.TYPES.IGlobalConfigService),n=(0,L.inject)(w.TYPES.ILogService),a=(0,L.inject)(w.TYPES.MapConfig),i=(0,L.inject)(w.TYPES.ICoordinateSystemService),r=(0,L.inject)(w.TYPES.IEventEmitter),e((u=g=function(){function e(){var t=this;(0,b.default)(this,e),this.map=void 0,(0,y.default)(this,"configService",l,this),(0,y.default)(this,"logger",c,this),(0,y.default)(this,"config",s,this),(0,y.default)(this,"coordinateSystemService",p,this),(0,y.default)(this,"eventEmitter",m,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(e){var n=e.camera,a=n.fov,i=n.near,r=n.far,o=n.height,u=n.pitch,l=n.rotation,c=n.aspect,s=n.position,p=t.getCenter(),m=p.lng,g=p.lat;t.cameraChangedCallback&&(t.viewport.syncWithMapCamera({aspect:c,bearing:360-l,far:r,fov:a,cameraHeight:o,near:i,pitch:u,zoom:t.map.getZoom()-1,center:[m,g],offsetOrigin:[s.x,s.y]}),t.viewport.getZoom()>D?t.coordinateSystemService.setCoordinateSystem(w.CoordinateSystem.P20_OFFSET):t.coordinateSystemService.setCoordinateSystem(w.CoordinateSystem.P20),t.cameraChangedCallback(t.viewport))}}return(0,C.default)(e,[{key:"addMarkerContainer",value:function(){var e=this.map.getContainer();if(null!==e){var t=e.getElementsByClassName("amap-maps")[0];this.markerContainer=M.DOM.create("div","l7-marker-container",t)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(e,t){-1!==w.MapServiceEvent.indexOf(e)?this.eventEmitter.on(e,t):this.map.on(e,t)}},{key:"off",value:function(e,t){-1!==w.MapServiceEvent.indexOf(e)?this.eventEmitter.off(e,t):this.map.off(e,t)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){var e=this.map.getSize();return[e.getWidth(),e.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(e){return this.map.setZoom(e)}},{key:"getCenter",value:function(){var e=this.map.getCenter();return{lng:e.getLng(),lat:e.getLat()}}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var e=this.map.getBounds().toBounds(),t=e.getNorthEast(),n=e.getSouthWest(),a=this.getCenter(),i=a.lng>t.getLng()||a.lng<n.getLng()?180-t.getLng():t.getLng();return[[a.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[i,t.getLat()]]}},{key:"getMinZoom",value:function(){return this.map.get("zooms")[0]-1}},{key:"getMaxZoom",value:function(){return this.map.get("zooms")[1]-1}},{key:"setRotation",value:function(e){return this.map.setRotation(e)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"panBy",value:function(e){this.map.panTo(e)}},{key:"fitBounds",value:function(e){this.map.setBounds(new AMap.Bounds([e[0][0],e[0][1],e[1][0],e[1][1]]))}},{key:"setZoomAndCenter",value:function(e,t){this.map.setZoomAndCenter(e,t)}},{key:"setMapStyle",value:function(e){this.map.setMapStyle(this.getMapStyle(e))}},{key:"pixelToLngLat",value:function(e){var t=this.map.pixelToLngLat(new AMap.Pixel(e[0],e[1]));return{lng:t.getLng(),lat:t.getLat()}}},{key:"lngLatToPixel",value:function(e){var t=this.map.lnglatToPixel(new AMap.LngLat(e[0],e[1]));return{x:t.getX(),y:t.getY()}}},{key:"containerToLngLat",value:function(e){var t=new AMap.Pixel(e[0],e[1]),n=this.map.containerToLngLat(t);return{lng:null==n?void 0:n.getLng(),lat:null==n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(e){var t=new AMap.LngLat(e[0],e[1]),n=this.map.lngLatToContainer(t);return{x:n.getX(),y:n.getY()}}},{key:"init",value:function(){var e=(0,d.default)(f.default.mark(function e(){var t,n,a,i,r,o,u,l,c,s,p,m,g,h,d=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config,n=t.id,a=t.style,i=void 0===a?"light":a,r=t.minZoom,o=void 0===r?0:r,u=t.maxZoom,l=void 0===u?18:u,c=t.token,s=void 0===c?z:c,p=t.mapInstance,m=t.plugin,g=void 0===m?[]:m,h=(0,v.default)(t,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),e.next=3,new Promise(function(e){var t=function(){if(p)d.map=p,d.$mapContainer=d.map.getContainer(),setTimeout(function(){d.map.on("camerachange",d.handleCameraChanged),e()},30);else{d.$mapContainer=d.creatAmapContainer(n);var t=new AMap.Map(d.$mapContainer,j({mapStyle:d.getMapStyle(i),zooms:[o,l],viewMode:"3D"},h));t.on("camerachange",d.handleCameraChanged),d.map=t,setTimeout(function(){e()},10)}};Z||p?Z&&window.AMap||p?t():B.push(t):(s===z&&d.logger.warn(d.configService.getSceneWarninfo("MapToken")),Z=!0,d.loadAMapScript("https://webapi.amap.com/maps?v=".concat(A,"&key=").concat(s,"&plugin=Map3D").concat(g.join(","))).then(function(){t(),B.length&&(B.forEach(function(e){return e()}),B=[])}))});case 3:this.viewport=new E.default;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"emit",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=this.eventEmitter).emit.apply(t,[e].concat(a))}},{key:"once",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];(t=this.eventEmitter).once.apply(t,[e].concat(a))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var e=document.getElementById(q);e&&document.head.removeChild(e)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"getMapStyle",value:function(e){return P.MapTheme[e]?P.MapTheme[e]:e}},{key:"creatAmapContainer",value:function(e){var t=e;"string"==typeof e&&(t=document.getElementById(e));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_amap_div"+x++,t.appendChild(n),n}},{key:"loadAMapScript",value:function(e){return new Promise(function(t,n){var a=document.createElement("script");a.src=e,a.onload=function(){t()},a.onerror=n,document.head.appendChild(a)})}}]),e}(),l=(0,k.default)(u.prototype,"configService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,k.default)(u.prototype,"logger",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,k.default)(u.prototype,"config",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,k.default)(u.prototype,"coordinateSystemService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,k.default)(u.prototype,"eventEmitter",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=u))||o);exports.default=I;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/objectWithoutProperties":"U8F3","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","inversify":"PR7M","./theme":"Bk0U","./Viewport":"G7Ji"}],"q7h7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),r=s(require("@babel/runtime/helpers/createClass")),t=s(require("@babel/runtime/helpers/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/getPrototypeOf")),l=s(require("@babel/runtime/helpers/inherits")),a=s(require("../BaseMapWrapper")),i=s(require("./index"));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(a){function s(){return(0,e.default)(this,s),(0,t.default)(this,(0,u.default)(s).apply(this,arguments))}return(0,l.default)(s,a),(0,r.default)(s,[{key:"getServiceConstructor",value:function(){return i.default}}]),s}(a.default);exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../BaseMapWrapper":"Y0Yi","./index":"LTV6"}],"OvAl":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,i){"object"===("undefined"==typeof exports?"undefined":r(exports))&&"undefined"!=typeof module?module.exports=i():"function"==typeof t&&t.amd?t(i):(e=e||self).mapboxgl=i()}(this,function(){"use strict";var t,e,i;function n(r,n){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(i=n(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=n;else t=n}return n(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n;function n(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=r,this.p2y=i}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var r,i,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if((n=t)<(r=0))return r;if(n>(i=1))return i;for(;r<i;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;t>o?r=n:i=n,n=.5*(i-r)+r}return n},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var o=a;function a(t,e){this.x=t,this.y=e}function s(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!s(t[i],e[i]))return!1;return!0}if("object"==r(t)&&null!==t&&null!==e){if("object"!=r(e))return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!s(t[n],e[n]))return!1;return!0}return t===e}function l(t,e,r,n){var o=new i(t,e,r,n);return function(t){return o.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=e*this.x-r*this.y,n=r*this.x+e*this.y;return this.x=i,this.y=n,this},_rotateAround:function(t,e){var r=Math.cos(t),i=Math.sin(t),n=e.x+r*(this.x-e.x)-i*(this.y-e.y),o=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var u=l(.25,.1,.25,1);function c(t,e,r){return Math.min(r,Math.max(e,t))}function p(t,e,r){var i=r-e,n=((t-e)%i+i)%i+e;return n===e?r:n}function h(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t}var f=1;function d(){return f++}function m(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function y(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function _(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function g(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,r){var i={};for(var n in t)i[n]=e.call(r||this,t[n],n,t);return i}function x(t,e,r){var i={};for(var n in t)e.call(r||this,t[n],n,t)&&(i[n]=t[n]);return i}function b(t){return Array.isArray(t)?t.map(b):"object"==r(t)&&t?v(t,b):t}var w={};function S(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function E(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function T(t){for(var e=0,r=0,i=t.length,n=i-1,o=void 0,a=void 0;r<i;n=r++)o=t[r],e+=((a=t[n]).x-o.x)*(o.y+a.y);return e}function I(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function A(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,r,i,n){var o=i||n;return e[r]=!o||o.toLowerCase(),""}),e["max-age"]){var r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}var z=null;function C(t){if(null==z){var e=t.navigator?t.navigator.userAgent:null;z=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return z}function k(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var P,M,L,D,B=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),R=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,F=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,O={now:B,frame:function(t){var e=R(t);return{cancel:function(){return F(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var r=self.document.createElement("canvas"),i=r.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return r.width=t.width,r.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return P||(P=self.document.createElement("a")),P.href=t,P.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==M&&(M=self.matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}},U={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},V={supported:!1,testSupport:function(t){!N&&D&&(j?q(t):L=t)}},N=!1,j=!1;function q(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,D),t.isContextLost())return;V.supported=!0}catch(t){}t.deleteTexture(e),N=!0}self.document&&((D=self.document.createElement("img")).onload=function(){L&&q(L),L=null,j=!0},D.onerror=function(){N=!0,L=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Z="01",G=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function X(t){return 0===t.indexOf("mapbox:")}G.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Z,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},G.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},G.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},G.prototype.normalizeStyleURL=function(t,e){if(!X(t))return t;var r=Y(t);return r.path="/styles/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeGlyphsURL=function(t,e){if(!X(t))return t;var r=Y(t);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeSourceURL=function(t,e){if(!X(t))return t;var r=Y(t);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)},G.prototype.normalizeSpriteURL=function(t,e,r,i){var n=Y(t);return X(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+r,this._makeAPIURL(n,this._customAccessToken||i)):(n.path+=""+e+r,J(n))},G.prototype.normalizeTileURL=function(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),!e||!X(e))return t;var i=Y(t),n=O.devicePixelRatio>=2||512===r?"@2x":"",o=V.supported?".webp":"$1";return i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+n+o),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path,U.REQUIRE_ACCESS_TOKEN&&(U.ACCESS_TOKEN||this._customAccessToken)&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,this._customAccessToken)},G.prototype.canonicalizeTileURL=function(t){var e=Y(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=e.path.replace("/v4/","");var i=e.params.filter(function(t){return!t.match(/^access_token=/)});return i.length&&(r+="?"+i.join("&")),r},G.prototype.canonicalizeTileset=function(t,e){if(!X(e))return t.tiles||[];for(var r=[],i=0,n=t.tiles;i<n.length;i+=1){var o=n[i],a=this.canonicalizeTileURL(o);r.push(a)}return r},G.prototype._makeAPIURL=function(t,e){var r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=Y(U.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!U.REQUIRE_ACCESS_TOKEN)return J(t);if(!(e=e||U.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),J(t)};var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function K(t){return W.test(t)}var H=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function Y(t){var e=t.match(H);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function J(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Q(t){if(!t)return null;var e,r=t.split(".");if(!r||3!==r.length)return null;try{return JSON.parse((e=r[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}var $=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(t){var e,r=Q(U.ACCESS_TOKEN),i="";return r&&r.u?(e=r.u,i=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):i=U.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+i:"mapbox.eventData:"+i},$.prototype.fetchEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{var i=self.localStorage.getItem(e);i&&(this.eventData=JSON.parse(i));var n=self.localStorage.getItem(r);n&&(this.anonId=n)}catch(t){S("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var t=k("localStorage"),e=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){S("Unable to write to LocalStorage")}},$.prototype.processRequests=function(t){},$.prototype.postEvent=function(t,e,r,i){var n=this;if(U.EVENTS_URL){var o=Y(U.EVENTS_URL);o.params.push("access_token="+(i||U.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.6.1",skuId:Z,userId:this.anonId},s=e?h(a,e):a,l={url:J(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=wt(l,function(t){n.pendingRequest=null,r(t),n.saveEventData(),n.processRequests(i)})}},$.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,rt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e,r,i){this.skuToken=r,(U.EVENTS_URL&&i||U.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return X(t)||K(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},i)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var r=this.queue.shift(),i=r.id,n=r.timestamp;i&&this.success[i]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=m()),this.postEvent(n,{skuToken:this.skuToken},function(t){t||i&&(e.success[i]=!0)},t))}},e}($),it=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t,e){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return X(t)||K(t)})&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var r=Q(U.ACCESS_TOKEN),i=r?r.u:U.ACCESS_TOKEN,n=i!==this.eventData.tokenU;y(this.anonId)||(this.anonId=m(),n=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;n=n||l>=1||l<-1||a.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=i)},t)}},e}($)),nt=it.postTurnstileEvent.bind(it),ot=new rt,at=ot.postMapLoadEvent.bind(ot),st="mapbox-tiles",lt=500,ut=50,ct=42e4;function pt(){self.caches&&!tt&&(tt=self.caches.open(st))}function ht(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ft=1/0,dt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(dt);var mt=function(t){function e(e,r,i){401===r&&K(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=r,this.url=i,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=I()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function _t(t,e){var r,i=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:i.signal}),o=!1,a=!1,s=(r=n.url).indexOf("sku=")>0&&K(r);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(r,i,o){if(!a){if(r&&"SecurityError"!==r.message&&S(r),i&&o)return u(i);var l=Date.now();self.fetch(n).then(function(r){if(r.ok){var i=s?r.clone():null;return u(r,i,l)}return e(new mt(r.statusText,r.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},u=function(r,i,s){("arrayBuffer"===t.type?r.arrayBuffer():"json"===t.type?r.json():r.text()).then(function(t){a||(i&&s&&function(t,e,r){if(pt(),tt){var i={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(t,e){return i.headers.set(e,t)});var n=A(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&i.headers.set("Expires",new Date(r+1e3*n["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-r<ct||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,function(e){var r=new self.Response(e,i);pt(),tt&&tt.then(function(e){return e.put(ht(t.url),r)}).catch(function(t){return S(t.message)})}))}}(n,i,s),o=!0,e(null,t,r.headers.get("Cache-Control"),r.headers.get("Expires")))}).catch(function(t){a||e(new Error(t.message))})};return s?function(t,e){if(pt(),!tt)return e(null);var r=ht(t.url);tt.then(function(t){t.match(r).then(function(i){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),r=A(t.headers.get("Cache-Control")||"");return e>Date.now()&&!r["no-cache"]}(i);t.delete(r),n&&t.put(r,i.clone()),e(null,i,n)}).catch(e)}).catch(e)}(n,l):l(null,null),{cancel:function(){a=!0,o||i.abort()}}}var gt,vt,xt=function(t,e){if(r=t.url,!(/^file:/.test(r)||/^file:/.test(yt())&&!/^\w+:/.test(r))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return _t(t,e);if(I()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(t,e){var r=new self.XMLHttpRequest;for(var i in r.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(r.responseType="arraybuffer"),t.headers)r.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===t.credentials,r.onerror=function(){e(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var i=r.response;if("json"===t.type)try{i=JSON.parse(r.response)}catch(t){return e(t)}e(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else e(new mt(r.statusText,r.status,t.url))},r.send(t.body),{cancel:function(){return r.abort()}}}(t,e)},bt=function(t,e){return xt(h(t,{type:"arrayBuffer"}),e)},wt=function(t,e){return xt(h(t,{method:"POST"}),e)};gt=[],vt=0;var St=function(t,e){if(V.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),vt>=U.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return gt.push(r),r}vt++;var i=!1,n=function(){if(!i)for(i=!0,vt--;gt.length&&vt<U.MAX_PARALLEL_IMAGE_REQUESTS;){var t=gt.shift(),e=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=St(e,r).cancel)}},o=bt(t,function(t,r,i,o){if(n(),t)e(t);else if(r){var a=new self.Image;a.onload=function(){e(null,a),self.URL.revokeObjectURL(a.src)},a.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new self.Blob([new Uint8Array(r)],{type:"image/png"});a.cacheControl=i,a.expires=o,a.src=r.byteLength?self.URL.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){o.cancel(),n()}}};function Et(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e))}function Tt(t,e,r){if(r&&r[t]){var i=r[t].indexOf(e);-1!==i&&r[t].splice(i,1)}}var It=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},At=function(t){function e(e,r){void 0===r&&(r={}),t.call(this,"error",h({error:e},r))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(It),zt=function(){};zt.prototype.on=function(t,e){return this._listeners=this._listeners||{},Et(t,e,this._listeners),this},zt.prototype.off=function(t,e){return Tt(t,e,this._listeners),Tt(t,e,this._oneTimeListeners),this},zt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Et(t,e,this._oneTimeListeners),this},zt.prototype.fire=function(t,e){"string"==typeof t&&(t=new It(t,e||{}));var r=t.type;if(this.listens(r)){t.target=this;for(var i=0,n=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];i<n.length;i+=1)n[i].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];o<a.length;o+=1){var s=a[o];Tt(r,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof At&&console.error(t.error);return this},zt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},zt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Ct={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},kt=function(t,e,r,i){this.message=(t?t+": ":"")+r,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)};function Pt(t){var e=t.key,r=t.value;return r?[new kt(e,r,"constants have been deprecated as of v8")]:[]}function Mt(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];for(var i=0,n=e;i<n.length;i+=1){var o=n[i];for(var a in o)t[a]=o[a]}return t}function Lt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Dt(t){if(Array.isArray(t))return t.map(Dt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=Dt(t[r]);return e}return Lt(t)}var Bt=function(t){function e(e,r){t.call(this,r),this.message=r,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var n=i[r],o=n[0],a=n[1];this.bindings[o]=a}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ft={kind:"null"},Ot={kind:"number"},Ut={kind:"string"},Vt={kind:"boolean"},Nt={kind:"color"},jt={kind:"object"},qt={kind:"value"},Zt={kind:"collator"},Gt={kind:"formatted"},Xt={kind:"resolvedImage"};function Wt(t,e){return{kind:"array",itemType:t,N:e}}function Kt(t){if("array"===t.kind){var e=Kt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Ht=[Ft,Ot,Ut,Vt,Nt,Gt,jt,Wt(qt),Xt];function Yt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Yt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,i=Ht;r<i.length;r+=1)if(!Yt(i[r],e))return null}return"Expected "+Kt(t)+" but found "+Kt(e)+" instead."}var Jt=e(function(t,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100*255):i(parseInt(t))}function a(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function s(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{e.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in r)return r[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var c=n.substr(0,l),p=n.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=a(p.pop());case"rgb":return 3!==p.length?null:[o(p[0]),o(p[1]),o(p[2]),h];case"hsla":if(4!==p.length)return null;h=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=a(p[1]),m=a(p[2]),y=m<=.5?m*(d+1):m+d-m*d,_=2*m-y;return[i(255*s(_,y,f+1/3)),i(255*s(_,y,f)),i(255*s(_,y,f-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Qt=function(t,e,r,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i};Qt.parse=function(t){if(t){if(t instanceof Qt)return t;if("string"==typeof t){var e=Jt(t);if(e)return new Qt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Qt.prototype.toString=function(){var t=this.toArray(),e=t[0],r=t[1],i=t[2],n=t[3];return"rgba("+Math.round(e)+","+Math.round(r)+","+Math.round(i)+","+n+")"},Qt.prototype.toArray=function(){var t=this.r,e=this.g,r=this.b,i=this.a;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*r/i,i]},Qt.black=new Qt(0,0,0,1),Qt.white=new Qt(1,1,1,1),Qt.transparent=new Qt(0,0,0,0),Qt.red=new Qt(1,0,0,1);var $t=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};$t.prototype.compare=function(t,e){return this.collator.compare(t,e)},$t.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var te=function(t,e,r,i,n){this.text=t,this.image=e,this.scale=r,this.fontStack=i,this.textColor=n},ee=function(t){this.sections=t};ee.fromString=function(t){return new ee([new te(t,null,null,null,null)])},ee.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},ee.factory=function(t){return t instanceof ee?t:ee.fromString(t)},ee.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},ee.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var n={};i.fontStack&&(n["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(n["font-scale"]=i.scale),i.textColor&&(n["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(n)}}return t};var re=function(t){this.name=t.name,this.available=t.available};function ie(t,e,r,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:"Invalid rgba value ["+[t,e,r,i].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof i?[t,e,r,i]:[t,e,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ne(t){if(null===t)return Ft;if("string"==typeof t)return Ut;if("boolean"==typeof t)return Vt;if("number"==typeof t)return Ot;if(t instanceof Qt)return Nt;if(t instanceof $t)return Zt;if(t instanceof ee)return Gt;if(t instanceof re)return Xt;if(Array.isArray(t)){for(var e,r=t.length,i=0,n=t;i<n.length;i+=1){var o=ne(n[i]);if(e){if(e===o)continue;e=qt;break}e=o}return Wt(e||qt,r)}return jt}function oe(t){var e=r(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Qt||t instanceof ee||t instanceof re?t.toString():JSON.stringify(t)}re.prototype.toString=function(){return this.name},re.fromString=function(t){return new re({name:t,available:!1})},re.prototype.serialize=function(){return["image",this.name]};var ae=function(t,e){this.type=t,this.value=e};ae.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Qt)return!0;if(e instanceof $t)return!0;if(e instanceof ee)return!0;if(e instanceof re)return!0;if(Array.isArray(e)){for(var i=0,n=e;i<n.length;i+=1)if(!t(n[i]))return!1;return!0}if("object"==r(e)){for(var o in e)if(!t(e[o]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var i=t[1],n=ne(i),o=e.expectedType;return"array"!==n.kind||0!==n.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(n=o),new ae(n,i)},ae.prototype.evaluate=function(){return this.value},ae.prototype.eachChild=function(){},ae.prototype.possibleOutputs=function(){return[this.value]},ae.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Qt?["rgba"].concat(this.value.toArray()):this.value instanceof ee?this.value.serialize():this.value};var se=function(t){this.name="ExpressionEvaluationError",this.message=t};se.prototype.toJSON=function(){return this.message};var le={string:Ut,number:Ot,boolean:Vt,object:jt},ue=function(t,e){this.type=t,this.args=e};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r,i=1,n=t[0];if("array"===n){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=le[s],i++}else o=qt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}r=Wt(o,a)}else r=le[n];for(var l=[];i<t.length;i++){var u=e.parse(t[i],i,qt);if(!u)return null;l.push(u)}return new ue(r,l)},ue.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!Yt(this.type,ne(r)))return r;if(e===this.args.length-1)throw new se("Expected value to be of type "+Kt(this.type)+", but found "+Kt(ne(r))+" instead.")}return null},ue.prototype.eachChild=function(t){this.args.forEach(t)},ue.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},ue.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var ce=function(t){this.type=Gt,this.sections=t};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==r(i))return e.error("First argument must be an image or text section.");for(var n=[],o=!1,a=1;a<=t.length-1;++a){var s=t[a];if(o&&"object"==r(s)&&!Array.isArray(s)){o=!1;var l=null;if(s["font-scale"]&&!(l=e.parse(s["font-scale"],1,Ot)))return null;var u=null;if(s["text-font"]&&!(u=e.parse(s["text-font"],1,Wt(Ut))))return null;var c=null;if(s["text-color"]&&!(c=e.parse(s["text-color"],1,Nt)))return null;var p=n[n.length-1];p.scale=l,p.font=u,p.textColor=c}else{var h=e.parse(t[a],1,qt);if(!h)return null;var f=h.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:h,scale:null,font:null,textColor:null})}}return new ce(n)},ce.prototype.evaluate=function(t){return new ee(this.sections.map(function(e){var r=e.content.evaluate(t);return ne(r)===Xt?new te("",r,null,null,null):new te(oe(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},ce.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},ce.prototype.possibleOutputs=function(){return[void 0]},ce.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t.push(i.content.serialize());var n={};i.scale&&(n["font-scale"]=i.scale.serialize()),i.font&&(n["text-font"]=i.font.serialize()),i.textColor&&(n["text-color"]=i.textColor.serialize()),t.push(n)}return t};var pe=function(t){this.type=Xt,this.input=t};pe.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,Ut);return r?new pe(r):e.error("No image name provided.")},pe.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=!1;return t.availableImages&&t.availableImages.indexOf(e)>-1&&(r=!0),new re({name:e,available:r})},pe.prototype.eachChild=function(t){t(this.input)},pe.prototype.possibleOutputs=function(){return[void 0]},pe.prototype.serialize=function(){return["image",this.input.serialize()]};var he={"to-boolean":Vt,"to-color":Nt,"to-number":Ot,"to-string":Ut},fe=function(t,e){this.type=t,this.args=e};fe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var i=he[r],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,qt);if(!a)return null;n.push(a)}return new fe(i,n)},fe.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,i=0,n=this.args;i<n.length;i+=1){if(r=null,(e=n[i].evaluate(t))instanceof Qt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ie(e[0],e[1],e[2],e[3])))return new Qt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new se(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new se("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ee.fromString(oe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?re.fromString(oe(this.args[0].evaluate(t))):oe(this.args[0].evaluate(t))},fe.prototype.eachChild=function(t){this.args.forEach(t)},fe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},fe.prototype.serialize=function(){if("formatted"===this.type.kind)return new ce([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new pe(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var de=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?de[this.feature.type]:this.feature.type:null},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Qt.parse(t)),e};var ye=function(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i};ye.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.possibleOutputs=function(){return[void 0]},ye.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},ye.parse=function(t,e){var r,i=t[0],n=ye.definitions[i];if(!n)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(n)?n[0]:n.type,a=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=a.filter(function(e){var r=e[0];return!Array.isArray(r)||r.length===t.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],f=p[1];l=new we(e.registry,e.path,null,e.scope);for(var d=[],m=!1,y=1;y<t.length;y++){var _=t[y],g=Array.isArray(h)?h[y-1]:h.type,v=l.parse(_,1+d.length,g);if(!v){m=!0;break}d.push(v)}if(!m)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var x=0;x<d.length;x++){var b=Array.isArray(h)?h[x]:h.type,w=d[x];l.concat(x+1).checkSubtype(b,w.type)}if(0===l.errors.length)return new ye(i,o,f,d)}}if(1===s.length)(r=e.errors).push.apply(r,l.errors);else{for(var S=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Kt).join(", ")+")":"("+Kt(e.type)+"...)"}).join(" | "),E=[],T=1;T<t.length;T++){var I=e.parse(t[T],1+E.length);if(!I)return null;E.push(Kt(I.type))}e.error("Expected arguments of type "+S+", but found ("+E.join(", ")+") instead.")}return null},ye.register=function(t,e){for(var r in ye.definitions=e,e)t[r]=ye};var _e=function(t,e,r){this.type=Zt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};function ge(t){if(t instanceof ye){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!ge(t)&&(e=!1)}),e}function ve(t){if(t instanceof ye&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ve(t)&&(e=!1)}),e}function xe(t,e){if(t instanceof ye&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild(function(t){r&&!xe(t,e)&&(r=!1)}),r}_e.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=r(i)||Array.isArray(i))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Vt);if(!n)return null;var o=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Vt);if(!o)return null;var a=null;return i.locale&&!(a=e.parse(i.locale,1,Ut))?null:new _e(n,o,a)},_e.prototype.evaluate=function(t){return new $t(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},_e.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},_e.prototype.possibleOutputs=function(){return[void 0]},_e.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var be=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};be.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new be(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},be.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},be.prototype.eachChild=function(){},be.prototype.possibleOutputs=function(){return[void 0]},be.prototype.serialize=function(){return["var",this.name]};var we=function(t,e,r,i,n){void 0===e&&(e=[]),void 0===i&&(i=new Rt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=i,this.errors=n,this.expectedType=r};function Se(t,e){for(var r,i,n=t.length-1,o=0,a=n,s=0;o<=a;)if(r=t[s=Math.floor((o+a)/2)],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new se("Input is not a number.");a=s-1}return 0}we.prototype.parse=function(t,e,r,i,n){return void 0===n&&(n={}),e?this.concat(e,r,i)._parse(t,n):this._parse(t,n)},we.prototype._parse=function(t,e){function i(t,e,r){return"assert"===r?new ue(e,[t]):"coerce"===r?new fe(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+r(n)+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[n];if(o){var a=o.parse(t,this);if(!a)return null;if(this.expectedType){var s=this.expectedType,l=a.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==l.kind)if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==l.kind&&"string"!==l.kind){if(this.checkSubtype(s,l))return null}else a=i(a,s,e.typeAnnotation||"coerce");else a=i(a,s,e.typeAnnotation||"assert")}if(!(a instanceof ae)&&"resolvedImage"!==a.type.kind&&function t(e){if(e instanceof be)return t(e.boundExpression);if(e instanceof ye&&"error"===e.name)return!1;if(e instanceof _e)return!1;var r=e instanceof fe||e instanceof ue,i=!0;return e.eachChild(function(e){i=r?i&&t(e):i&&e instanceof ae}),!!i&&(ge(e)&&xe(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}(a)){var u=new me;try{a=new ae(a.type,a.evaluate(u))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==r(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+r(t)+" instead.")},we.prototype.concat=function(t,e,r){var i="number"==typeof t?this.path.concat(t):this.path,n=r?this.scope.concat(r):this.scope;return new we(this.registry,i,e||null,n,this.errors)},we.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Bt(i,t))},we.prototype.checkSubtype=function(t,e){var r=Yt(t,e);return r&&this.error(r),r};var Ee=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,n=r;i<n.length;i+=1){var o=n[i],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};function Te(t,e,r){return t*(1-r)+e*r}Ee.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,Ot);if(!r)return null;var i=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,n);if(!c)return null;n=n||c.type,i.push([a,c])}return new Ee(n,r,i)},Ee.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;return i>=e[n-1]?r[n-1].evaluate(t):r[Se(e,i)].evaluate(t)},Ee.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},Ee.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Ee.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ie=Object.freeze({__proto__:null,number:Te,color:function(t,e,r){return new Qt(Te(t.r,e.r,r),Te(t.g,e.g,r),Te(t.b,e.b,r),Te(t.a,e.a,r))},array:function(t,e,r){return t.map(function(t,i){return Te(t,e[i],r)})}}),Ae=.95047,ze=1,Ce=1.08883,ke=4/29,Pe=6/29,Me=3*Pe*Pe,Le=Pe*Pe*Pe,De=Math.PI/180,Be=180/Math.PI;function Re(t){return t>Le?Math.pow(t,1/3):t/Me+ke}function Fe(t){return t>Pe?t*t*t:Me*(t-ke)}function Oe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ue(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ve(t){var e=Ue(t.r),r=Ue(t.g),i=Ue(t.b),n=Re((.4124564*e+.3575761*r+.1804375*i)/Ae),o=Re((.2126729*e+.7151522*r+.072175*i)/ze);return{l:116*o-16,a:500*(n-o),b:200*(o-Re((.0193339*e+.119192*r+.9503041*i)/Ce)),alpha:t.a}}function Ne(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=ze*Fe(e),r=Ae*Fe(r),i=Ce*Fe(i),new Qt(Oe(3.2404542*r-1.5371385*e-.4985314*i),Oe(-.969266*r+1.8760108*e+.041556*i),Oe(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}function je(t,e,r){var i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}var qe={forward:Ve,reverse:Ne,interpolate:function(t,e,r){return{l:Te(t.l,e.l,r),a:Te(t.a,e.a,r),b:Te(t.b,e.b,r),alpha:Te(t.alpha,e.alpha,r)}}},Ze={forward:function(t){var e=Ve(t),r=e.l,i=e.a,n=e.b,o=Math.atan2(n,i)*Be;return{h:o<0?o+360:o,c:Math.sqrt(i*i+n*n),l:r,alpha:t.a}},reverse:function(t){var e=t.h*De,r=t.c;return Ne({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:je(t.h,e.h,r),c:Te(t.c,e.c,r),l:Te(t.l,e.l,r),alpha:Te(t.alpha,e.alpha,r)}}},Ge=Object.freeze({__proto__:null,lab:qe,hcl:Ze}),Xe=function(t,e,r,i,n){this.type=t,this.operator=e,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(var o=0,a=n;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function We(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}Xe.interpolationFactor=function(t,e,r,n){var o=0;if("exponential"===t.name)o=We(e,t.base,r,n);else if("linear"===t.name)o=We(e,1,r,n);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new i(a[0],a[1],a[2],a[3]).solve(We(e,1,r,n))}return o},Xe.parse=function(t,e){var r=t[0],i=t[1],n=t[2],o=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var s=i.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Ot)))return null;var l=[],u=null;"interpolate-hcl"===r||"interpolate-lab"===r?u=Nt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,d,u);if(!m)return null;u=u||m.type,l.push([p,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Xe(u,r,i,n,l):e.error("Type "+Kt(u)+" is not interpolatable.")},Xe.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var n=e.length;if(i>=e[n-1])return r[n-1].evaluate(t);var o=Se(e,i),a=e[o],s=e[o+1],l=Xe.interpolationFactor(this.interpolation,i,a,s),u=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?Ie[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?Ze.reverse(Ze.interpolate(Ze.forward(u),Ze.forward(c),l)):qe.reverse(qe.interpolate(qe.forward(u),qe.forward(c),l))},Xe.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},Xe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Xe.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Ke=function(t,e){this.type=t,this.args=e};Ke.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,i=e.expectedType;i&&"value"!==i.kind&&(r=i);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],l=e.parse(s,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,n.push(l)}var u=i&&n.some(function(t){return Yt(i,t.type)});return new Ke(u?qt:r,n)},Ke.prototype.evaluate=function(t){for(var e,r=null,i=0,n=0,o=this.args;n<o.length&&(i++,(r=o[n].evaluate(t))&&r instanceof re&&!r.available&&(e||(e=r.name),r=null,i===this.args.length&&(r=e)),null===r);n+=1);return r},Ke.prototype.eachChild=function(t){this.args.forEach(t)},Ke.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Ke.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var He=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};He.prototype.evaluate=function(t){return this.result.evaluate(t)},He.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},He.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],n=1;n<t.length-1;n+=2){var o=t[n];if("string"!=typeof o)return e.error("Expected string, but found "+r(o)+" instead.",n);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var a=e.parse(t[n+1],n+1);if(!a)return null;i.push([o,a])}var s=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return s?new He(i,s):null},He.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},He.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var i=r[e],n=i[0],o=i[1];t.push(n,o.serialize())}return t.push(this.result.serialize()),t};var Ye=function(t,e,r){this.type=t,this.index=e,this.input=r};Ye.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Ot),i=e.parse(t[2],2,Wt(e.expectedType||qt));if(!r||!i)return null;var n=i.type;return new Ye(n.itemType,r,i)},Ye.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new se("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new se("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new se("Array index must be an integer, but found "+e+" instead.");return r[e]},Ye.prototype.eachChild=function(t){t(this.index),t(this.input)},Ye.prototype.possibleOutputs=function(){return[void 0]},Ye.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Je=function(t,e){this.type=Vt,this.needle=t,this.haystack=e};Je.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r,i=e.parse(t[1],1,qt),n=e.parse(t[2],2,qt);return i&&n?"boolean"!==(r=i.type).kind&&"string"!==r.kind&&"number"!==r.kind&&"null"!==r.kind&&"value"!==r.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(i.type)+" instead"):new Je(i,n):null},Je.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!e||!r)return!1;if("boolean"!=typeof e&&"string"!=typeof e&&"number"!=typeof e)throw new se("Expected first argument to be of type boolean, string or number, but found "+Kt(ne(e))+" instead.");if(!function(t){return Array.isArray(t)||"string"==typeof t}(r))throw new se("Expected second argument to be of type array or string, but found "+Kt(ne(r))+" instead.");return r.indexOf(e)>=0},Je.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Je.prototype.possibleOutputs=function(){return[!0,!1]},Je.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Qe=function(t,e,r,i,n,o){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=n,this.otherwise=o};Qe.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,ne(h)))return null}else r=ne(h);if(void 0!==n[String(h)])return u.error("Branch labels must be unique.");n[String(h)]=o.length}var f=e.parse(l,a,i);if(!f)return null;i=i||f.type,o.push(f)}var d=e.parse(t[1],1,qt);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,i);return m?"value"!==d.type.kind&&e.concat(1).checkSubtype(r,d.type)?null:new Qe(r,i,d,n,o,m):null},Qe.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ne(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Qe.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Qe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Qe.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],r=[],i={},n=0,o=Object.keys(this.cases).sort();n<o.length;n+=1){var a=o[n];void 0===(p=i[this.cases[a]])?(i[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=r;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];1===h.length?e.push(s(h[0])):e.push(h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var $e=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};function tr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function er(t,e,r,i){return 0===i.compare(e,r)}function rr(t,e,r){var i="=="!==t&&"!="!==t;return function(){function n(t,e,r){this.type=Vt,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],o=e.parse(t[1],1,qt);if(!o)return null;if(!tr(r,o.type))return e.concat(1).error('"'+r+"\" comparisons are not supported for type '"+Kt(o.type)+"'.");var a=e.parse(t[2],2,qt);if(!a)return null;if(!tr(r,a.type))return e.concat(2).error('"'+r+"\" comparisons are not supported for type '"+Kt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Kt(o.type)+"' and '"+Kt(a.type)+"'.");i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ue(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ue(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Zt)))return null}return new n(o,a,s)},n.prototype.evaluate=function(n){var o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(i&&this.hasUntypedArgument){var s=ne(o),l=ne(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new se('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!i&&this.hasUntypedArgument){var u=ne(o),c=ne(a);if("string"!==u.kind||"string"!==c.kind)return e(n,o,a)}return this.collator?r(n,o,a,this.collator.evaluate(n)):e(n,o,a)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},n}()}$e.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,Vt);if(!o)return null;var a=e.parse(t[n+1],n+1,r);if(!a)return null;i.push([o,a]),r=r||a.type}var s=e.parse(t[t.length-1],t.length-1,r);return s?new $e(r,i,s):null},$e.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],o=i[1];if(n.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},$e.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],n=i[0],o=i[1];t(n),t(o)}t(this.otherwise)},$e.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},$e.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ir=rr("==",function(t,e,r){return e===r},er),nr=rr("!=",function(t,e,r){return e!==r},function(t,e,r,i){return!er(0,e,r,i)}),or=rr("<",function(t,e,r){return e<r},function(t,e,r,i){return i.compare(e,r)<0}),ar=rr(">",function(t,e,r){return e>r},function(t,e,r,i){return i.compare(e,r)>0}),sr=rr("<=",function(t,e,r){return e<=r},function(t,e,r,i){return i.compare(e,r)<=0}),lr=rr(">=",function(t,e,r){return e>=r},function(t,e,r,i){return i.compare(e,r)>=0}),ur=function(t,e,r,i,n){this.type=Ut,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=n};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ot);if(!i)return null;var n=t[2];if("object"!=r(n)||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var o=null;if(n.locale&&!(o=e.parse(n.locale,1,Ut)))return null;var a=null;if(n.currency&&!(a=e.parse(n.currency,1,Ut)))return null;var s=null;if(n["min-fraction-digits"]&&!(s=e.parse(n["min-fraction-digits"],1,Ot)))return null;var l=null;return n["max-fraction-digits"]&&!(l=e.parse(n["max-fraction-digits"],1,Ot))?null:new ur(i,o,a,s,l)},ur.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ur.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ur.prototype.possibleOutputs=function(){return[void 0]},ur.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var cr=function(t){this.type=Ot,this.input=t};cr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Kt(r.type)+" instead."):new cr(r):null},cr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new se("Expected value to be of type string or array, but found "+Kt(ne(e))+" instead.")},cr.prototype.eachChild=function(t){t(this.input)},cr.prototype.possibleOutputs=function(){return[void 0]},cr.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var pr={"==":ir,"!=":nr,">":ar,"<":or,">=":lr,"<=":sr,array:ue,at:Ye,boolean:ue,case:$e,coalesce:Ke,collator:_e,format:ce,image:pe,in:Je,interpolate:Xe,"interpolate-hcl":Xe,"interpolate-lab":Xe,length:cr,let:He,literal:ae,match:Qe,number:ue,"number-format":ur,object:ue,step:Ee,string:ue,"to-boolean":fe,"to-color":fe,"to-number":fe,"to-string":fe,var:be};function hr(t,e){var r=e[0],i=e[1],n=e[2],o=e[3];r=r.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=ie(r,i,n,a);if(s)throw new se(s);return new Qt(r/255*a,i/255*a,n/255*a,a)}function fr(t,e){return t in e}function dr(t,e){var r=e[t];return void 0===r?null:r}function mr(t){return{type:t}}function yr(t){return{result:"success",value:t}}function _r(t){return{result:"error",value:t}}function gr(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function vr(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function xr(t){return!!t.expression&&t.expression.interpolated}function br(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":r(t)}function wr(t){return"object"==r(t)&&null!==t&&!Array.isArray(t)}function Sr(t){return t}function Er(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Tr(t,e,i,n,o){return Er(r(i)===o?n[i]:void 0,t.default,e.default)}function Ir(t,e,r){if("number"!==br(r))return Er(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];var n=Se(t.stops.map(function(t){return t[0]}),r);return t.stops[n][1]}function Ar(t,e,r){var i=void 0!==t.base?t.base:1;if("number"!==br(r))return Er(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];var o=Se(t.stops.map(function(t){return t[0]}),r),a=function(t,e,r,i){var n=i-r,o=t-r;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}(r,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=Ie[e.type]||Sr;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Ge[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var r=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return u(r,i,a)}}:u(s,l,a)}function zr(t,e,r){return"color"===e.type?r=Qt.parse(r):"formatted"===e.type?r=ee.fromString(r.toString()):"resolvedImage"===e.type?r=re.fromString(r.toString()):br(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0),Er(r,t.default,e.default)}ye.register(pr,{error:[{kind:"error"},[Ut],function(t,e){var r=e[0];throw new se(r.evaluate(t))}],typeof:[Ut,[qt],function(t,e){return Kt(ne(e[0].evaluate(t)))}],"to-rgba":[Wt(Ot,4),[Nt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Nt,[Ot,Ot,Ot],hr],rgba:[Nt,[Ot,Ot,Ot,Ot],hr],has:{type:Vt,overloads:[[[Ut],function(t,e){return fr(e[0].evaluate(t),t.properties())}],[[Ut,jt],function(t,e){var r=e[0],i=e[1];return fr(r.evaluate(t),i.evaluate(t))}]]},get:{type:qt,overloads:[[[Ut],function(t,e){return dr(e[0].evaluate(t),t.properties())}],[[Ut,jt],function(t,e){var r=e[0],i=e[1];return dr(r.evaluate(t),i.evaluate(t))}]]},"feature-state":[qt,[Ut],function(t,e){return dr(e[0].evaluate(t),t.featureState||{})}],properties:[jt,[],function(t){return t.properties()}],"geometry-type":[Ut,[],function(t){return t.geometryType()}],id:[qt,[],function(t){return t.id()}],zoom:[Ot,[],function(t){return t.globals.zoom}],"heatmap-density":[Ot,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ot,[],function(t){return t.globals.lineProgress||0}],accumulated:[qt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ot,mr(Ot),function(t,e){for(var r=0,i=0,n=e;i<n.length;i+=1)r+=n[i].evaluate(t);return r}],"*":[Ot,mr(Ot),function(t,e){for(var r=1,i=0,n=e;i<n.length;i+=1)r*=n[i].evaluate(t);return r}],"-":{type:Ot,overloads:[[[Ot,Ot],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)-i.evaluate(t)}],[[Ot],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ot,[Ot,Ot],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)/i.evaluate(t)}],"%":[Ot,[Ot,Ot],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)%i.evaluate(t)}],ln2:[Ot,[],function(){return Math.LN2}],pi:[Ot,[],function(){return Math.PI}],e:[Ot,[],function(){return Math.E}],"^":[Ot,[Ot,Ot],function(t,e){var r=e[0],i=e[1];return Math.pow(r.evaluate(t),i.evaluate(t))}],sqrt:[Ot,[Ot],function(t,e){var r=e[0];return Math.sqrt(r.evaluate(t))}],log10:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))}],log2:[Ot,[Ot],function(t,e){var r=e[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[Ot,[Ot],function(t,e){var r=e[0];return Math.sin(r.evaluate(t))}],cos:[Ot,[Ot],function(t,e){var r=e[0];return Math.cos(r.evaluate(t))}],tan:[Ot,[Ot],function(t,e){var r=e[0];return Math.tan(r.evaluate(t))}],asin:[Ot,[Ot],function(t,e){var r=e[0];return Math.asin(r.evaluate(t))}],acos:[Ot,[Ot],function(t,e){var r=e[0];return Math.acos(r.evaluate(t))}],atan:[Ot,[Ot],function(t,e){var r=e[0];return Math.atan(r.evaluate(t))}],min:[Ot,mr(Ot),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Ot,mr(Ot),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Ot,[Ot],function(t,e){var r=e[0];return Math.abs(r.evaluate(t))}],round:[Ot,[Ot],function(t,e){var r=e[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ot,[Ot],function(t,e){var r=e[0];return Math.floor(r.evaluate(t))}],ceil:[Ot,[Ot],function(t,e){var r=e[0];return Math.ceil(r.evaluate(t))}],"filter-==":[Vt,[Ut,qt],function(t,e){var r=e[0],i=e[1];return t.properties()[r.value]===i.value}],"filter-id-==":[Vt,[qt],function(t,e){var r=e[0];return t.id()===r.value}],"filter-type-==":[Vt,[Ut],function(t,e){var r=e[0];return t.geometryType()===r.value}],"filter-<":[Vt,[Ut,qt],function(t,e){var i=e[0],n=e[1],o=t.properties()[i.value],a=n.value;return r(o)==r(a)&&o<a}],"filter-id-<":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),o=i.value;return r(n)==r(o)&&n<o}],"filter->":[Vt,[Ut,qt],function(t,e){var i=e[0],n=e[1],o=t.properties()[i.value],a=n.value;return r(o)==r(a)&&o>a}],"filter-id->":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),o=i.value;return r(n)==r(o)&&n>o}],"filter-<=":[Vt,[Ut,qt],function(t,e){var i=e[0],n=e[1],o=t.properties()[i.value],a=n.value;return r(o)==r(a)&&o<=a}],"filter-id-<=":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),o=i.value;return r(n)==r(o)&&n<=o}],"filter->=":[Vt,[Ut,qt],function(t,e){var i=e[0],n=e[1],o=t.properties()[i.value],a=n.value;return r(o)==r(a)&&o>=a}],"filter-id->=":[Vt,[qt],function(t,e){var i=e[0],n=t.id(),o=i.value;return r(n)==r(o)&&n>=o}],"filter-has":[Vt,[qt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Vt,[],function(t){return null!==t.id()}],"filter-type-in":[Vt,[Wt(Ut)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Vt,[Wt(qt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Vt,[Ut,Wt(qt)],function(t,e){var r=e[0];return e[1].value.indexOf(t.properties()[r.value])>=0}],"filter-in-large":[Vt,[Ut,Wt(qt)],function(t,e){var r=e[0],i=e[1];return function(t,e,r,i){for(;r<=i;){var n=r+i>>1;if(e[n]===t)return!0;e[n]>t?i=n-1:r=n+1}return!1}(t.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)&&i.evaluate(t)}],[mr(Vt),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(!i[r].evaluate(t))return!1;return!0}]]},any:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var r=e[0],i=e[1];return r.evaluate(t)||i.evaluate(t)}],[mr(Vt),function(t,e){for(var r=0,i=e;r<i.length;r+=1)if(i[r].evaluate(t))return!0;return!1}]]},"!":[Vt,[Vt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Vt,[Ut],function(t,e){var r=e[0],i=t.globals&&t.globals.isSupportedScript;return!i||i(r.evaluate(t))}],upcase:[Ut,[Ut],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ut,[Ut],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ut,mr(qt),function(t,e){return e.map(function(e){return oe(e.evaluate(t))}).join("")}],"resolved-locale":[Ut,[Zt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Cr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&wr(t.default)?new Qt(0,0,0,0):"color"===t.type?Qt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function kr(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in pr}function Pr(t,e){var r=new we(pr,[],e?function(t){var e={color:Nt,string:Ut,number:Ot,enum:Ut,boolean:Vt,formatted:Gt,resolvedImage:Xt};return"array"===t.type?Wt(e[t.value]||qt,t.length):e[t.type]}(e):void 0),i=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?yr(new Cr(i,e)):_r(r.errors)}Cr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=n,this.expression.evaluate(this._evaluator)},Cr.prototype.evaluate=function(t,e,r,i,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=n||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new se("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Mr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ve(e.expression)};Mr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n)},Mr.prototype.evaluate=function(t,e,r,i,n){return this._styleExpression.evaluate(t,e,r,i,n)};var Lr=function(t,e,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ve(e.expression),this.interpolationType=i};function Dr(t,e){if("error"===(t=Pr(t,e)).result)return t;var r=t.value.expression,i=ge(r);if(!i&&!gr(e))return _r([new Bt("","data expressions not supported")]);var n=xe(r,["zoom"]);if(!n&&!vr(e))return _r([new Bt("","zoom expressions not supported")]);var o=function t(e){var r=null;if(e instanceof He)r=t(e.result);else if(e instanceof Ke)for(var i=0,n=e.args;i<n.length;i+=1){var o=n[i];if(r=t(o))break}else(e instanceof Ee||e instanceof Xe)&&e.input instanceof ye&&"zoom"===e.input.name&&(r=e);return r instanceof Bt?r:(e.eachChild(function(e){var i=t(e);i instanceof Bt?r=i:!r&&i?r=new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&i&&r!==i&&(r=new Bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r)}(r);if(!o&&!n)return _r([new Bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Bt)return _r([o]);if(o instanceof Xe&&!xr(e))return _r([new Bt("",'"interpolate" expressions cannot be used with this property')]);if(!o)return yr(new Mr(i?"constant":"source",t.value));var a=o instanceof Xe?o.interpolation:void 0;return yr(new Lr(i?"camera":"composite",t.value,o.labels,a))}Lr.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,n)},Lr.prototype.evaluate=function(t,e,r,i,n){return this._styleExpression.evaluate(t,e,r,i,n)},Lr.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?Xe.interpolationFactor(this.interpolationType,t,e,r):0};var Br=function(t,e){this._parameters=t,this._specification=e,Mt(this,function t(e,i){var n,o,a,s="color"===i.type,l=e.stops&&"object"==r(e.stops[0][0]),u=l||void 0!==e.property,c=l||!u,p=e.type||(xr(i)?"exponential":"interval");if(s&&((e=Mt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Qt.parse(t[1])]})),e.default?e.default=Qt.parse(e.default):e.default=Qt.parse(i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ge[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===p)n=Ar;else if("interval"===p)n=Ir;else if("categorical"===p){n=Tr,o=Object.create(null);for(var h=0,f=e.stops;h<f.length;h+=1){var d=f[h];o[d[0]]=d[1]}a=r(e.stops[0][0])}else{if("identity"!==p)throw new Error('Unknown function type "'+p+'"');n=zr}if(l){for(var m={},y=[],_=0;_<e.stops.length;_++){var g=e.stops[_],v=g[0].zoom;void 0===m[v]&&(m[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},y.push(v)),m[v].stops.push([g[0].value,g[1]])}for(var x=[],b=0,w=y;b<w.length;b+=1){var S=w[b];x.push([m[S].zoom,t(m[S],i)])}var E={name:"linear"};return{kind:"composite",interpolationType:E,interpolationFactor:Xe.interpolationFactor.bind(void 0,E),zoomStops:x.map(function(t){return t[0]}),evaluate:function(t,r){var n=t.zoom;return Ar({stops:x,base:e.base},i,n).evaluate(n,r)}}}if(c){var T="exponential"===p?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Xe.interpolationFactor.bind(void 0,T),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var r=t.zoom;return n(e,i,r,o,a)}}}return{kind:"source",evaluate:function(t,r){var s=r&&r.properties?r.properties[e.property]:void 0;return void 0===s?Er(e.default,i.default):n(e,i,s,o,a)}}}(this._parameters,this._specification))};function Rr(t){var e=t.key,r=t.value,i=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=br(r);if("object"!==l)return[new kt(e,r,"object expected, "+l+" found")];for(var u in r){var c=u.split(".")[0],p=i[c]||i["*"],h=void 0;if(n[c])h=n[c];else if(i[c])h=ai;else if(n["*"])h=n["*"];else{if(!i["*"]){s.push(new kt(e,r[u],'unknown property "'+u+'"'));continue}h=ai}s=s.concat(h({key:(e?e+".":e)+u,value:r[u],valueSpec:p,style:o,styleSpec:a,object:r,objectKey:u},r))}for(var f in i)n[f]||i[f].required&&void 0===i[f].default&&void 0===r[f]&&s.push(new kt(e,r,'missing required property "'+f+'"'));return s}function Fr(t){var e=t.value,r=t.valueSpec,i=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||ai;if("array"!==br(e))return[new kt(o,e,"array expected, "+br(e)+" found")];if(r.length&&e.length!==r.length)return[new kt(o,e,"array length "+r.length+" expected, length "+e.length+" found")];if(r["min-length"]&&e.length<r["min-length"])return[new kt(o,e,"array length at least "+r["min-length"]+" expected, length "+e.length+" found")];var s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===br(r.value)&&(s=r.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:i,styleSpec:n,key:o+"["+u+"]"}));return l}function Or(t){var e=t.key,r=t.value,i=t.valueSpec,n=br(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new kt(e,r,"number expected, "+n+" found")]:"minimum"in i&&r<i.minimum?[new kt(e,r,r+" is less than the minimum value "+i.minimum)]:"maximum"in i&&r>i.maximum?[new kt(e,r,r+" is greater than the maximum value "+i.maximum)]:[]}function Ur(t){var e,r,i,n=t.valueSpec,o=Lt(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,l=!s,u="array"===br(t.value.stops)&&"array"===br(t.value.stops[0])&&"object"===br(t.value.stops[0][0]),c=Rr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new kt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],r=t.value;return e=e.concat(Fr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===br(r)&&0===r.length&&e.push(new kt(t.key,r,"array must have at least one stop")),e},default:function(t){return ai({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new kt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new kt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!xr(t.valueSpec)&&c.push(new kt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!gr(t.valueSpec)?c.push(new kt(t.key,t.value,"property functions not supported")):s&&!vr(t.valueSpec)&&c.push(new kt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new kt(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],o=t.value,s=t.key;if("array"!==br(o))return[new kt(s,o,"array expected, "+br(o)+" found")];if(2!==o.length)return[new kt(s,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==br(o[0]))return[new kt(s,o,"object expected, "+br(o[0])+" found")];if(void 0===o[0].zoom)return[new kt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new kt(s,o,"object stop key must have value")];if(i&&i>Lt(o[0].zoom))return[new kt(s,o[0].zoom,"stop zoom values must appear in ascending order")];Lt(o[0].zoom)!==i&&(i=Lt(o[0].zoom),r=void 0,a={}),e=e.concat(Rr({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Or,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return kr(Dt(o[1]))?e.concat([new kt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(ai({key:s+"[1]",value:o[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function h(t,i){var s=br(t.value),l=Lt(t.value),u=null!==t.value?t.value:i;if(e){if(s!==e)return[new kt(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new kt(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return gr(n)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new kt(t.key,u,c)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==r&&l<r?[new kt(t.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===o&&l in a?[new kt(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new kt(t.key,u,"integer expected, found "+l)]}}function Vr(t){var e=("property"===t.expressionContext?Dr:Pr)(Dt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new kt(""+t.key+e.key,t.value,e.message)});var r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==r.possibleOutputs().indexOf(void 0))return[new kt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ve(r))return[new kt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ve(r))return[new kt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!xe(r,["zoom","feature-state"]))return[new kt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ge(r))return[new kt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nr(t){var e=t.key,r=t.value,i=t.valueSpec,n=[];return Array.isArray(i.values)?-1===i.values.indexOf(Lt(r))&&n.push(new kt(e,r,"expected one of ["+i.values.join(", ")+"], "+JSON.stringify(r)+" found")):-1===Object.keys(i.values).indexOf(Lt(r))&&n.push(new kt(e,r,"expected one of ["+Object.keys(i.values).join(", ")+"], "+JSON.stringify(r)+" found")),n}function jr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&Array.isArray(t[2]);case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,r=t.slice(1);e<r.length;e+=1){var i=r[e];if(!jr(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}Br.deserialize=function(t){return new Br(t._parameters,t._specification)},Br.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var qr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zr(t){if(null==t)return function(){return!0};jr(t)||(t=Xr(t));var e=Pr(t,qr);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,r){return e.value.evaluate(t,r)}}function Gr(t,e){return t<e?-1:t>e?1:0}function Xr(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?Wr(t[1],t[2],"=="):"!="===r?Yr(Wr(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Wr(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(Xr))):"all"===r?["all"].concat(t.slice(1).map(Xr)):"none"===r?["all"].concat(t.slice(1).map(Xr).map(Yr)):"in"===r?Kr(t[1],t.slice(2)):"!in"===r?Yr(Kr(t[1],t.slice(2))):"has"===r?Hr(t[1]):"!has"!==r||Yr(Hr(t[1]))}function Wr(t,e,r){switch(t){case"$type":return["filter-type-"+r,e];case"$id":return["filter-id-"+r,e];default:return["filter-"+r,t,e]}}function Kr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return r(t)!=r(e[0])})?["filter-in-large",t,["literal",e.sort(Gr)]]:["filter-in-small",t,["literal",e]]}}function Hr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Yr(t){return["!",t]}function Jr(t){return jr(Dt(t.value))?Vr(Mt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var r=e.value,i=e.key;if("array"!==br(r))return[new kt(i,r,"array expected, "+br(r)+" found")];var n,o=e.styleSpec,a=[];if(r.length<1)return[new kt(i,r,"filter array must have at least 1 element")];switch(a=a.concat(Nr({key:i+"[0]",value:r[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Lt(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===Lt(r[1])&&a.push(new kt(i,r,'"$type" cannot be use with operator "'+r[0]+'"'));case"==":case"!=":3!==r.length&&a.push(new kt(i,r,'filter array for operator "'+r[0]+'" must have 3 elements'));case"in":case"!in":r.length>=2&&"string"!==(n=br(r[1]))&&a.push(new kt(i+"[1]",r[1],"string expected, "+n+" found"));for(var s=2;s<r.length;s++)n=br(r[s]),"$type"===Lt(r[1])?a=a.concat(Nr({key:i+"["+s+"]",value:r[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new kt(i+"["+s+"]",r[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var l=1;l<r.length;l++)a=a.concat(t({key:i+"["+l+"]",value:r[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=br(r[1]),2!==r.length?a.push(new kt(i,r,'filter array for "'+r[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new kt(i+"[1]",r[1],"string expected, "+n+" found"))}return a}(t)}function Qr(t,e){var r=t.key,i=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return ai({key:r,value:o,valueSpec:n.transition,style:i,styleSpec:n});var u,c=t.valueSpec||s[a];if(!c)return[new kt(r,o,'unknown property "'+a+'"')];if("string"===br(o)&&gr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new kt(r,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&p.push(new kt(r,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&wr(Dt(o))&&"identity"===Lt(o.type)&&p.push(new kt(r,o,'"text-font" does not support identity functions'))),p.concat(ai({key:t.key,value:o,valueSpec:c,style:i,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:a}))}function $r(t){return Qr(t,"paint")}function ti(t){return Qr(t,"layout")}function ei(t){var e=[],r=t.value,i=t.key,n=t.style,o=t.styleSpec;r.type||r.ref||e.push(new kt(i,r,'either "type" or "ref" is required'));var a,s=Lt(r.type),l=Lt(r.ref);if(r.id)for(var u=Lt(r.id),c=0;c<t.arrayIndex;c++){var p=n.layers[c];Lt(p.id)===u&&e.push(new kt(i,r.id,'duplicate layer id "'+r.id+'", previously used at line '+p.id.__line__))}if("ref"in r)["type","source","source-layer","filter","layout"].forEach(function(t){t in r&&e.push(new kt(i,r[t],'"'+t+'" is prohibited for ref layers'))}),n.layers.forEach(function(t){Lt(t.id)===l&&(a=t)}),a?a.ref?e.push(new kt(i,r.ref,"ref cannot reference another ref layer")):s=Lt(a.type):e.push(new kt(i,r.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(r.source){var h=n.sources&&n.sources[r.source],f=h&&Lt(h.type);h?"vector"===f&&"raster"===s?e.push(new kt(i,r.source,'layer "'+r.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new kt(i,r.source,'layer "'+r.id+'" requires a vector source')):"vector"!==f||r["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new kt(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!r.paint||!r.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new kt(i,r,'layer "'+r.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new kt(i,r,'layer "'+r.id+'" must specify a "source-layer"')):e.push(new kt(i,r.source,'source "'+r.source+'" not found'))}else e.push(new kt(i,r,'missing required property "source"'));return e=e.concat(Rr({key:i,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ai({key:i+".type",value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"})},filter:Jr,layout:function(t){return Rr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return ti(Mt({layerType:s},t))}}})},paint:function(t){return Rr({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return $r(Mt({layerType:s},t))}}})}}}))}function ri(t){var e=t.value,r=t.key,i=t.styleSpec,n=t.style;if(!e.type)return[new kt(r,e,'"type" is required')];var o,a=Lt(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Rr({key:r,value:e,valueSpec:i["source_"+a.replace("-","_")],style:t.style,styleSpec:i});case"geojson":if(o=Rr({key:r,value:e,valueSpec:i.source_geojson,style:n,styleSpec:i}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c=l[1],p="string"==typeof u?[u,["accumulated"],["get",s]]:u;o.push.apply(o,Vr({key:r+"."+s+".map",value:c,expressionContext:"cluster-map"})),o.push.apply(o,Vr({key:r+"."+s+".reduce",value:p,expressionContext:"cluster-reduce"}))}return o;case"video":return Rr({key:r,value:e,valueSpec:i.source_video,style:n,styleSpec:i});case"image":return Rr({key:r,value:e,valueSpec:i.source_image,style:n,styleSpec:i});case"canvas":return[new kt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Nr({key:r+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:i})}}function ii(t){var e=t.value,r=t.styleSpec,i=r.light,n=t.style,o=[],a=br(e);if(void 0===e)return o;if("object"!==a)return o.concat([new kt("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&i[l[1]]&&i[l[1]].transition?o.concat(ai({key:s,value:e[s],valueSpec:r.transition,style:n,styleSpec:r})):i[s]?o.concat(ai({key:s,value:e[s],valueSpec:i[s],style:n,styleSpec:r})):o.concat([new kt(s,e[s],'unknown property "'+s+'"')])}return o}function ni(t){var e=t.value,r=t.key,i=br(e);return"string"!==i?[new kt(r,e,"string expected, "+i+" found")]:[]}var oi={"*":function(){return[]},array:Fr,boolean:function(t){var e=t.value,r=t.key,i=br(e);return"boolean"!==i?[new kt(r,e,"boolean expected, "+i+" found")]:[]},number:Or,color:function(t){var e=t.key,r=t.value,i=br(r);return"string"!==i?[new kt(e,r,"color expected, "+i+" found")]:null===Jt(r)?[new kt(e,r,'color expected, "'+r+'" found')]:[]},constants:Pt,enum:Nr,filter:Jr,function:Ur,layer:ei,object:Rr,source:ri,light:ii,string:ni,formatted:function(t){return 0===ni(t).length?[]:Vr(t)},resolvedImage:function(t){return 0===ni(t).length?[]:Vr(t)}};function ai(t){var e=t.value,r=t.valueSpec,i=t.styleSpec;return r.expression&&wr(Lt(e))?Ur(t):r.expression&&kr(Dt(e))?Vr(t):r.type&&oi[r.type]?oi[r.type](t):Rr(Mt({},t,{valueSpec:r.type?i[r.type]:r}))}function si(t){var e=t.value,r=t.key,i=ni(t);return i.length?i:(-1===e.indexOf("{fontstack}")&&i.push(new kt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new kt(r,e,'"glyphs" url must include a "{range}" token')),i)}function li(t,e){void 0===e&&(e=Ct);var r=[];return r=r.concat(ai({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:si,"*":function(){return[]}}})),t.constants&&(r=r.concat(Pt({key:"constants",value:t.constants,style:t,styleSpec:e}))),ui(r)}function ui(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function ci(t){return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return ui(t.apply(this,e))}}li.source=ci(ri),li.light=ci(ii),li.layer=ci(ei),li.filter=ci(Jr),li.paintProperty=ci($r),li.layoutProperty=ci(ti);var pi=li,hi=pi.light,fi=pi.paintProperty,di=pi.layoutProperty;function mi(t,e){var r=!1;if(e&&e.length)for(var i=0,n=e;i<n.length;i+=1){var o=n[i];t.fire(new At(new Error(o.message))),r=!0}return r}var yi=gi,_i=3;function gi(t,e,r){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],e=n[1],r=n[2],this.d=e+2*r;for(var o=0;o<this.d*this.d;o++){var a=n[_i+o],s=n[_i+o+1];i.push(a===s?null:n.subarray(a,s))}var l=n[_i+i.length],u=n[_i+i.length+1];this.keys=n.subarray(l,u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var p=r/e*t;this.min=-p,this.max=t+p}gi.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},gi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gi.prototype._insertCell=function(t,e,r,i,n,o){this.cells[n].push(o)},gi.prototype.query=function(t,e,r,i,n){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=r&&a<=i&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,r,i,this._queryCell,s,{},n),s},gi.prototype._queryCell=function(t,e,r,i,n,o,a,s){var l=this.cells[n];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&r>=c[f+0]&&i>=c[f+1])?(a[h]=!0,o.push(u[h])):a[h]=!1}}},gi.prototype._forEachCell=function(t,e,r,i,n,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),p=this._convertToCellCoord(i),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&n.call(this,t,e,r,i,d,o,a,s))return}},gi.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},gi.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},gi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=_i+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var n=new Int32Array(e+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[_i+a]=o,n.set(s,o),o+=s.length}return n[_i+t.length]=o,n.set(this.keys,o),o+=this.keys.length,n[_i+t.length+1]=o,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer};var vi=self.ImageData,xi={};function bi(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),xi[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}for(var wi in bi("Object",Object),yi.serialize=function(t,e){var r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},yi.deserialize=function(t){return new yi(t.buffer)},bi("Grid",yi),bi("Color",Qt),bi("Error",Error),bi("ResolvedImage",re),bi("StylePropertyFunction",Br),bi("StyleExpression",Cr,{omit:["_evaluator"]}),bi("ZoomDependentExpression",Lr),bi("ZoomConstantExpression",Mr),bi("CompoundExpression",ye,{omit:["_evaluate"]}),pr)pr[wi]._classRegistryKey||bi("Expression_"+wi,pr[wi]);function Si(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ei(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Si(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof vi)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],o=0,a=t;o<a.length;o+=1){var s=a[o];n.push(Ei(s,e))}return n}if("object"==r(t)){var l=t.constructor,u=l._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var c=l.serialize?l.serialize(t,e):{};if(!l.serialize){for(var p in t)if(t.hasOwnProperty(p)&&!(xi[u].omit.indexOf(p)>=0)){var h=t[p];c[p]=xi[u].shallow.indexOf(p)>=0?h:Ei(h,e)}t instanceof Error&&(c.message=t.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(c.$name=u),c}throw new Error("can't serialize object of type "+r(t))}function Ti(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Si(t)||ArrayBuffer.isView(t)||t instanceof vi)return t;if(Array.isArray(t))return t.map(Ti);if("object"==r(t)){var e=t.$name||"Object",i=xi[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var n=Object.create(i.prototype),o=0,a=Object.keys(t);o<a.length;o+=1){var s=a[o];if("$name"!==s){var l=t[s];n[s]=xi[e].shallow.indexOf(s)>=0?l:Ti(l)}}return n}throw new Error("can't deserialize object of type "+r(t))}var Ii=function(){this.first=!0};Ii.prototype.update=function(t,e){var r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))};var Ai={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function zi(t){for(var e=0,r=t;e<r.length;e+=1)if(ki(r[e].charCodeAt(0)))return!0;return!1}function Ci(t){return!(Ai.Arabic(t)||Ai["Arabic Supplement"](t)||Ai["Arabic Extended-A"](t)||Ai["Arabic Presentation Forms-A"](t)||Ai["Arabic Presentation Forms-B"](t))}function ki(t){return!!(746===t||747===t||!(t<4352)&&(Ai["Bopomofo Extended"](t)||Ai.Bopomofo(t)||Ai["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Ai["CJK Compatibility Ideographs"](t)||Ai["CJK Compatibility"](t)||Ai["CJK Radicals Supplement"](t)||Ai["CJK Strokes"](t)||!(!Ai["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ai["CJK Unified Ideographs Extension A"](t)||Ai["CJK Unified Ideographs"](t)||Ai["Enclosed CJK Letters and Months"](t)||Ai["Hangul Compatibility Jamo"](t)||Ai["Hangul Jamo Extended-A"](t)||Ai["Hangul Jamo Extended-B"](t)||Ai["Hangul Jamo"](t)||Ai["Hangul Syllables"](t)||Ai.Hiragana(t)||Ai["Ideographic Description Characters"](t)||Ai.Kanbun(t)||Ai["Kangxi Radicals"](t)||Ai["Katakana Phonetic Extensions"](t)||Ai.Katakana(t)&&12540!==t||!(!Ai["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Ai["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ai["Unified Canadian Aboriginal Syllabics"](t)||Ai["Unified Canadian Aboriginal Syllabics Extended"](t)||Ai["Vertical Forms"](t)||Ai["Yijing Hexagram Symbols"](t)||Ai["Yi Syllables"](t)||Ai["Yi Radicals"](t)))}function Pi(t){return!(ki(t)||function(t){return!!(Ai["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Ai["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Ai["Letterlike Symbols"](t)||Ai["Number Forms"](t)||Ai["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ai["Control Pictures"](t)&&9251!==t||Ai["Optical Character Recognition"](t)||Ai["Enclosed Alphanumerics"](t)||Ai["Geometric Shapes"](t)||Ai["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ai["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ai["CJK Symbols and Punctuation"](t)||Ai.Katakana(t)||Ai["Private Use Area"](t)||Ai["CJK Compatibility Forms"](t)||Ai["Small Form Variants"](t)||Ai["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Mi(t){return t>=1424&&t<=2303||Ai["Arabic Presentation Forms-A"](t)||Ai["Arabic Presentation Forms-B"](t)}function Li(t,e){return!(!e&&Mi(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Ai.Khmer(t))}function Di(t){for(var e=0,r=t;e<r.length;e+=1)if(Mi(r[e].charCodeAt(0)))return!0;return!1}var Bi="deferred",Ri="loading",Fi="loaded",Oi=null,Ui="unavailable",Vi=null,Ni=function(t){Oi&&Oi(t)};function ji(){qi.fire(new It("pluginStateChange",{pluginStatus:Ui,pluginURL:Vi}))}var qi=new zt,Zi=function(){return Ui},Gi=function(){if(Ui!==Bi||!Vi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ui=Ri,ji(),Vi&&bt({url:Vi},function(t){t?Ni(t):(Ui=Fi,ji())})},Xi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ui===Fi||null!=Xi.applyArabicShaping},isLoading:function(){return Ui===Ri},setState:function(t){Ui=t.pluginStatus,Vi=t.pluginURL},isParsed:function(){return null!=Xi.applyArabicShaping&&null!=Xi.processBidirectionalText&&null!=Xi.processStyledBidirectionalText},getPluginURL:function(){return Vi}},Wi=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ii,this.transition={})};Wi.prototype.isSupportedScript=function(t){return function(t,e){for(var r=0,i=t;r<i.length;r+=1)if(!Li(i[r].charCodeAt(0),e))return!1;return!0}(t,Xi.isLoaded())},Wi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Wi.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}};var Ki=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(wr(t))return new Br(t,e);if(kr(t)){var r=Dr(t,e);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return r.value}var i=t;return"string"==typeof t&&"color"===e.type&&(i=Qt.parse(t)),{kind:"constant",evaluate:function(){return i}}}(void 0===e?t.specification.default:e,t.specification)};Ki.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ki.prototype.possiblyEvaluate=function(t,e){return this.property.possiblyEvaluate(this,t,e)};var Hi=function(t){this.property=t,this.value=new Ki(t,void 0)};Hi.prototype.transitioned=function(t,e){return new Ji(this.property,this.value,e,h({},t.transition,this.transition),t.now)},Hi.prototype.untransitioned=function(){return new Ji(this.property,this.value,null,{},0)};var Yi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Yi.prototype.getValue=function(t){return b(this._values[t].value.value)},Yi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Hi(this._values[t].property)),this._values[t].value=new Ki(this._values[t].property,null===e?void 0:b(e))},Yi.prototype.getTransition=function(t){return b(this._values[t].transition)},Yi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Hi(this._values[t].property)),this._values[t].transition=b(e)||void 0},Yi.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n);var o=this.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},Yi.prototype.transitioned=function(t,e){for(var r=new Qi(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var o=n[i];r._values[o]=this._values[o].transitioned(t,e._values[o])}return r},Yi.prototype.untransitioned=function(){for(var t=new Qi(this._properties),e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e];t._values[i]=this._values[i].untransitioned()}return t};var Ji=function(t,e,r,i,n){this.property=t,this.value=e,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)};Ji.prototype.possiblyEvaluate=function(t,e){var r=t.now||0,i=this.value.possiblyEvaluate(t,e),n=this.prior;if(n){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return n.possiblyEvaluate(t,e);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t,e),i,function(t){if(o<=0)return 0;if(o>=1)return 1;var e=o*o,r=e*o;return 4*(o<.5?r:3*(o-e)+r-.75)}())}return i};var Qi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Qi.prototype.possiblyEvaluate=function(t,e){for(var r=new en(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var o=n[i];r._values[o]=this._values[o].possiblyEvaluate(t,e)}return r},Qi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var r=e[t];if(this._values[r].prior)return!0}return!1};var $i=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};$i.prototype.getValue=function(t){return b(this._values[t].value)},$i.prototype.setValue=function(t,e){this._values[t]=new Ki(this._values[t].property,null===e?void 0:b(e))},$i.prototype.serialize=function(){for(var t={},e=0,r=Object.keys(this._values);e<r.length;e+=1){var i=r[e],n=this.getValue(i);void 0!==n&&(t[i]=n)}return t},$i.prototype.possiblyEvaluate=function(t,e){for(var r=new en(this._properties),i=0,n=Object.keys(this._values);i<n.length;i+=1){var o=n[i];r._values[o]=this._values[o].possiblyEvaluate(t,e)}return r};var tn=function(t,e,r){this.property=t,this.value=e,this.parameters=r};tn.prototype.isConstant=function(){return"constant"===this.value.kind},tn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},tn.prototype.evaluate=function(t,e,r){return this.property.evaluate(this.value,this.parameters,t,e,r)};var en=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};en.prototype.get=function(t){return this._values[t]};var rn=function(t){this.specification=t};rn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},rn.prototype.interpolate=function(t,e,r){var i=Ie[this.specification.type];return i?i(t,e,r):t};var nn=function(t,e){this.specification=t,this.overrides=e};nn.prototype.possiblyEvaluate=function(t,e,r){return"constant"===t.expression.kind||"camera"===t.expression.kind?new tn(this,{kind:"constant",value:t.expression.evaluate(e,null,{},r)},e):new tn(this,t.expression,e)},nn.prototype.interpolate=function(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new tn(this,{kind:"constant",value:void 0},t.parameters);var i=Ie[this.specification.type];return i?new tn(this,{kind:"constant",value:i(t.value.value,e.value.value,r)},t.parameters):t},nn.prototype.evaluate=function(t,e,r,i,n){return"constant"===t.kind?t.value:t.evaluate(e,r,i,n)};var on=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e,r){if(void 0===t.value)return new tn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r),n="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(n,n,n,e);return new tn(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){var a=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new tn(this,{kind:"constant",value:a},e)}return new tn(this,t.expression,e)},e.prototype.evaluate=function(t,e,r,i,n){if("source"===t.kind){var o=t.evaluate(e,r,i,n);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,i),t.evaluate({zoom:Math.floor(e.zoom)},r,i),t.evaluate({zoom:Math.floor(e.zoom)+1},r,i),e):t.value},e.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},e.prototype.interpolate=function(t){return t},e}(nn),an=function(t){this.specification=t};an.prototype.possiblyEvaluate=function(t,e,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Wi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Wi(Math.floor(e.zoom),e)),t.expression.evaluate(new Wi(Math.floor(e.zoom+1),e)),e)}},an.prototype._calculate=function(t,e,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}},an.prototype.interpolate=function(t){return t};var sn=function(t){this.specification=t};sn.prototype.possiblyEvaluate=function(t,e,r){return!!t.expression.evaluate(e,null,{},r)},sn.prototype.interpolate=function(){return!1};var ln=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[e];r.specification.overridable&&this.overridableProperties.push(e);var i=this.defaultPropertyValues[e]=new Ki(r,void 0),n=this.defaultTransitionablePropertyValues[e]=new Hi(r);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}};bi("DataDrivenProperty",nn),bi("DataConstantProperty",rn),bi("CrossFadedDataDrivenProperty",on),bi("CrossFadedProperty",an),bi("ColorRampProperty",sn);var un=function(t){function e(e,r){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new $i(r.layout)),r.paint)){for(var i in this._transitionablePaint=new Yi(r.paint),e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var i="layers."+this.id+".layout."+t;if(this._validate(di,i,t,e,r))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},e.prototype.getPaintProperty=function(t){return g(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,r){if(void 0===r&&(r={}),null!=e){var i="layers."+this.id+".paint."+t;if(this._validate(fi,i,t,e,r))return!1}if(g(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],o="cross-faded-data-driven"===n.property.specification["property-type"],a=n.value.isDataDriven(),s=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var l=this._transitionablePaint._values[t].value;return l.isDataDriven()||a||o||this._handleOverridablePaintPropertyUpdate(t,s,l)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,r){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),x(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,r,i,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&mi(this,t.call(pi,{key:e,layerType:this.type,objectKey:r,value:i,styleSpec:Ct,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof tn&&gr(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(zt),cn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},pn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},hn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function fn(t,e){void 0===e&&(e=1);var r=0,i=0;return{members:t.map(function(t){var n,o=(n=t.type,cn[n].BYTES_PER_ELEMENT),a=r=dn(r,Math.max(e,o)),s=t.components||1;return i=Math.max(i,o),r+=o*s,{name:t.name,type:t.type,components:s,offset:a}}),size:dn(r,Math.max(i,e)),alignment:e}}function dn(t,e){return Math.ceil(t/e)*e}hn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},hn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},hn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},hn.prototype.clear=function(){this.length=0},hn.prototype.resize=function(t){this.reserve(t),this.length=t},hn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},hn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.int16[i+0]=e,this.int16[i+1]=r,t},e}(hn);mn.prototype.bytesPerElement=4,bi("StructArrayLayout2i4",mn);var yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=i,this.int16[o+3]=n,t},e}(hn);yn.prototype.bytesPerElement=8,bi("StructArrayLayout4i8",yn);var _n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(hn);_n.prototype.bytesPerElement=12,bi("StructArrayLayout2i4i12",_n);var gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.uint8[l+4]=i,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=a,t},e}(hn);gn.prototype.bytesPerElement=8,bi("StructArrayLayout2i4ub8",gn);var vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,i,n,o,a,s)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,l){var u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=r,this.uint16[u+2]=i,this.uint16[u+3]=n,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(hn);vn.prototype.bytesPerElement=16,bi("StructArrayLayout8ui16",vn);var xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,r,i,n,o,a,s,l,u,c,p)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,l,u,c,p,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=i,this.int16[f+3]=n,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=p,this.int16[f+11]=h,t},e}(hn);xn.prototype.bytesPerElement=24,bi("StructArrayLayout4i4ui4i24",xn);var bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=r,this.float32[n+2]=i,t},e}(hn);bn.prototype.bytesPerElement=12,bi("StructArrayLayout3f12",bn);var wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint32[r+0]=e,t},e}(hn);wn.prototype.bytesPerElement=4,bi("StructArrayLayout1ul4",wn);var Sn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,i,n,o,a,s,l,u,c)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,l,u,c,p){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=r,this.int16[h+2]=i,this.int16[h+3]=n,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=l,this.uint16[h+9]=u,this.int16[h+10]=c,this.int16[h+11]=p,t},e}(hn);Sn.prototype.bytesPerElement=24,bi("StructArrayLayout6i1ul2ui2i24",Sn);var En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,i,n,o)},e.prototype.emplace=function(t,e,r,i,n,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(hn);En.prototype.bytesPerElement=12,bi("StructArrayLayout2i2i2i12",En);var Tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[a+1]=i,this.float32[a+2]=n,t},e}(hn);Tn.prototype.bytesPerElement=12,bi("StructArrayLayout2ub2f12",Tn);var In=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y,_){var g=24*t,v=12*t,x=48*t;return this.int16[g+0]=e,this.int16[g+1]=r,this.uint16[g+2]=i,this.uint16[g+3]=n,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[g+10]=l,this.uint16[g+11]=u,this.uint16[g+12]=c,this.float32[v+7]=p,this.float32[v+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=d,this.uint8[x+38]=m,this.uint32[v+10]=y,this.int16[g+22]=_,t},e}(hn);In.prototype.bytesPerElement=48,bi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",In);var An=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y,_,g,v,x,b,w,S,E,T){var I=this.length;return this.resize(I+1),this.emplace(I,t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y,_,g,v,x,b,w,S,E,T)},e.prototype.emplace=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y,_,g,v,x,b,w,S,E,T,I){var A=30*t,z=15*t;return this.int16[A+0]=e,this.int16[A+1]=r,this.int16[A+2]=i,this.int16[A+3]=n,this.int16[A+4]=o,this.int16[A+5]=a,this.int16[A+6]=s,this.int16[A+7]=l,this.uint16[A+8]=u,this.uint16[A+9]=c,this.uint16[A+10]=p,this.uint16[A+11]=h,this.uint16[A+12]=f,this.uint16[A+13]=d,this.uint16[A+14]=m,this.uint16[A+15]=y,this.uint16[A+16]=_,this.uint16[A+17]=g,this.uint16[A+18]=v,this.uint16[A+19]=x,this.uint16[A+20]=b,this.uint16[A+21]=w,this.uint32[z+11]=S,this.float32[z+12]=E,this.float32[z+13]=T,this.float32[z+14]=I,t},e}(hn);An.prototype.bytesPerElement=60,bi("StructArrayLayout8i14ui1ul3f60",An);var zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.float32[r+0]=e,t},e}(hn);zn.prototype.bytesPerElement=4,bi("StructArrayLayout1f4",zn);var Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=r,this.int16[n+2]=i,t},e}(hn);Cn.prototype.bytesPerElement=6,bi("StructArrayLayout3i6",Cn);var kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=2*t,o=4*t;return this.uint32[n+0]=e,this.uint16[o+2]=r,this.uint16[o+3]=i,t},e}(hn);kn.prototype.bytesPerElement=8,bi("StructArrayLayout1ul2ui8",kn);var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,r)},e.prototype.emplace=function(t,e,r,i){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,this.uint16[n+2]=i,t},e}(hn);Pn.prototype.bytesPerElement=6,bi("StructArrayLayout3ui6",Pn);var Mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,t},e}(hn);Mn.prototype.bytesPerElement=4,bi("StructArrayLayout2ui4",Mn);var Ln=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var r=1*t;return this.uint16[r+0]=e,t},e}(hn);Ln.prototype.bytesPerElement=2,bi("StructArrayLayout1ui2",Ln);var Dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var r=this.length;return this.resize(r+1),this.emplace(r,t,e)},e.prototype.emplace=function(t,e,r){var i=2*t;return this.float32[i+0]=e,this.float32[i+1]=r,t},e}(hn);Dn.prototype.bytesPerElement=8,bi("StructArrayLayout2f8",Dn);var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,r,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,r,i)},e.prototype.emplace=function(t,e,r,i,n){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=r,this.float32[o+2]=i,this.float32[o+3]=n,t},e}(hn);Bn.prototype.bytesPerElement=16,bi("StructArrayLayout4f16",Bn);var Rn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return r.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.x1.get=function(){return this._structArray.int16[this._pos2+2]},r.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},r.y1.get=function(){return this._structArray.int16[this._pos2+3]},r.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},r.x2.get=function(){return this._structArray.int16[this._pos2+4]},r.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},r.y2.get=function(){return this._structArray.int16[this._pos2+5]},r.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.radius.get=function(){return this._structArray.int16[this._pos2+10]},r.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},r.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},r.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},r.anchorPoint.get=function(){return new o(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,r),e}(pn);Rn.prototype.size=24;var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Rn(this,t)},e}(Sn);bi("CollisionBoxArray",Fn);var On=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},r.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},r.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},r.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},r.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},r.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},r.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},r.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},r.segment.get=function(){return this._structArray.uint16[this._pos2+10]},r.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},r.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},r.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},r.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},r.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},r.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},r.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},r.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},r.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},r.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},r.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},r.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},r.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},r.associatedIconIndex.set=function(t){this._structArray.int16[this._pos2+22]=t},Object.defineProperties(e.prototype,r),e}(pn);On.prototype.size=48;var Un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new On(this,t)},e}(In);bi("PlacedSymbolArray",Un);var Vn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return r.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},r.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},r.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},r.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},r.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},r.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},r.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},r.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},r.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},r.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},r.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},r.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},r.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},r.placedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+6]=t},r.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},r.verticalPlacedIconSymbolIndex.set=function(t){this._structArray.int16[this._pos2+7]=t},r.key.get=function(){return this._structArray.uint16[this._pos2+8]},r.key.set=function(t){this._structArray.uint16[this._pos2+8]=t},r.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},r.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},r.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},r.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},r.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},r.verticalTextBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},r.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},r.verticalTextBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+12]=t},r.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},r.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+13]=t},r.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},r.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+14]=t},r.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},r.verticalIconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+15]=t},r.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},r.verticalIconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+16]=t},r.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},r.featureIndex.set=function(t){this._structArray.uint16[this._pos2+17]=t},r.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},r.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+18]=t},r.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},r.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+19]=t},r.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},r.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+20]=t},r.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},r.numVerticalIconVertices.set=function(t){this._structArray.uint16[this._pos2+21]=t},r.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},r.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},r.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},r.textBoxScale.set=function(t){this._structArray.float32[this._pos4+12]=t},r.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},r.textOffset0.set=function(t){this._structArray.float32[this._pos4+13]=t},r.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},r.textOffset1.set=function(t){this._structArray.float32[this._pos4+14]=t},Object.defineProperties(e.prototype,r),e}(pn);Vn.prototype.size=60;var Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Vn(this,t)},e}(An);bi("SymbolInstanceArray",Nn);var jn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={offsetX:{configurable:!0}};return r.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},r.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,r),e}(pn);jn.prototype.size=4;var qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new jn(this,t)},e}(zn);bi("GlyphOffsetArray",qn);var Zn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return r.x.get=function(){return this._structArray.int16[this._pos2+0]},r.x.set=function(t){this._structArray.int16[this._pos2+0]=t},r.y.get=function(){return this._structArray.int16[this._pos2+1]},r.y.set=function(t){this._structArray.int16[this._pos2+1]=t},r.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},r.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,r),e}(pn);Zn.prototype.size=6;var Gn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Zn(this,t)},e}(Cn);bi("SymbolLineVertexArray",Gn);var Xn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return r.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},r.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},r.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},r.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},r.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},r.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,r),e}(pn);Xn.prototype.size=8;var Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Xn(this,t)},e}(kn);bi("FeatureIndexArray",Wn);var Kn=fn([{name:"a_pos",components:2,type:"Int16"}],4).members,Hn=function(t){void 0===t&&(t=[]),this.segments=t};function Yn(t,e){return 256*(t=c(Math.floor(t),0,255))+c(Math.floor(e),0,255)}Hn.prototype.prepareSegment=function(t,e,r,i){var n=this.segments[this.segments.length-1];return t>Hn.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+Hn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>Hn.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==i)&&(n={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(n.sortKey=i),this.segments.push(n)),n},Hn.prototype.get=function(){return this.segments},Hn.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var r=e[t];for(var i in r.vaos)r.vaos[i].destroy()}},Hn.simpleSegment=function(t,e,r,i){return new Hn([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])},Hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,bi("SegmentVector",Hn);var Jn=function(){this.ids=[],this.positions=[],this.indexed=!1};function Qn(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}Jn.prototype.add=function(t,e,r,i){this.ids.push(t),this.positions.push(e,r,i)},Jn.prototype.getPositions=function(t){for(var e=0,r=this.ids.length-1;e<r;){var i=e+r>>1;this.ids[i]>=t?r=i:e=i+1}for(var n=[];this.ids[e]===t;){var o=this.positions[3*e],a=this.positions[3*e+1],s=this.positions[3*e+2];n.push({index:o,start:a,end:s}),e++}return n},Jn.serialize=function(t,e){var r=new Float64Array(t.ids),i=new Uint32Array(t.positions);return function t(e,r,i,n){if(!(i>=n)){for(var o=e[i+n>>1],a=i-1,s=n+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Qn(e,a,s),Qn(r,3*a,3*s),Qn(r,3*a+1,3*s+1),Qn(r,3*a+2,3*s+2)}t(e,r,i,s),t(e,r,s+1,n)}}(r,i,0,r.length-1),e&&e.push(r.buffer,i.buffer),{ids:r,positions:i}},Jn.deserialize=function(t){var e=new Jn;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},bi("FeaturePositionMap",Jn);var $n=function(t,e){this.gl=t.gl,this.location=e},to=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}($n),eo=function(t){function e(e,r){t.call(this,e,r),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}($n),ro=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}($n),io=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}($n),no=function(t){function e(e,r){t.call(this,e,r),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}($n),oo=function(t){function e(e,r){t.call(this,e,r),this.current=Qt.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}($n),ao=new Float32Array(16),so=function(t){function e(e,r){t.call(this,e,r),this.current=ao}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}($n);function lo(t){return[Yn(255*t.r,255*t.g),Yn(255*t.b,255*t.a)]}var uo=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0};uo.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},uo.prototype.setConstantPatternPositions=function(){},uo.prototype.populatePaintArray=function(){},uo.prototype.updatePaintArray=function(){},uo.prototype.upload=function(){},uo.prototype.destroy=function(){},uo.prototype.setUniforms=function(t,e,r,i){e.set(i.constantOr(this.value))},uo.prototype.getBinding=function(t,e){return"color"===this.type?new oo(t,e):new eo(t,e)},uo.serialize=function(t){var e=t.value,r=t.names,i=t.type;return{value:Ei(e),names:r,type:i}},uo.deserialize=function(t){var e=t.value,r=t.names,i=t.type;return new uo(Ti(e),r,i)};var co=function(t,e,r){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=r,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};co.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},co.prototype.populatePaintArray=function(){},co.prototype.updatePaintArray=function(){},co.prototype.upload=function(){},co.prototype.destroy=function(){},co.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},co.prototype.setUniforms=function(t,e,r,i,n){var o=this.patternPositions;"u_pattern_to"===n&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===n&&o.patternFrom&&e.set(o.patternFrom)},co.prototype.getBinding=function(t,e){return new no(t,e)};var po=function(t,e,r,i){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?2:1,offset:0}}),this.paintVertexArray=new i};po.prototype.defines=function(){return[]},po.prototype.setConstantPatternPositions=function(){},po.prototype.populatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,o=n.length;n.reserve(t);var a=this.expression.evaluate(new Wi(0),e,{},[],i);if("color"===this.type)for(var s=lo(a),l=o;l<t;l++)n.emplaceBack(s[0],s[1]);else{for(var u=o;u<t;u++)n.emplaceBack(a);this.maxValue=Math.max(this.maxValue,a)}},po.prototype.updatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,o=this.expression.evaluate({zoom:0},r,i);if("color"===this.type)for(var a=lo(o),s=t;s<e;s++)n.emplace(s,a[0],a[1]);else{for(var l=t;l<e;l++)n.emplace(l,o);this.maxValue=Math.max(this.maxValue,o)}},po.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},po.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},po.prototype.setUniforms=function(t,e){e.set(0)},po.prototype.getBinding=function(t,e){return new eo(t,e)};var ho=function(t,e,r,i,n,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.type=r,this.useIntegerZoom=i,this.zoom=n,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===r?4:2,offset:0}}),this.paintVertexArray=new a};ho.prototype.defines=function(){return[]},ho.prototype.setConstantPatternPositions=function(){},ho.prototype.populatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,o=n.length;n.reserve(t);var a=this.expression.evaluate(new Wi(this.zoom),e,{},[],i),s=this.expression.evaluate(new Wi(this.zoom+1),e,{},[],i);if("color"===this.type)for(var l=lo(a),u=lo(s),c=o;c<t;c++)n.emplaceBack(l[0],l[1],u[0],u[1]);else{for(var p=o;p<t;p++)n.emplaceBack(a,s);this.maxValue=Math.max(this.maxValue,a,s)}},ho.prototype.updatePaintArray=function(t,e,r,i){var n=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},r,i),a=this.expression.evaluate({zoom:this.zoom+1},r,i);if("color"===this.type)for(var s=lo(o),l=lo(a),u=t;u<e;u++)n.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)n.emplace(c,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},ho.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ho.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ho.prototype.interpolationFactor=function(t){return this.useIntegerZoom&&(t=Math.floor(t)),c(this.expression.interpolationFactor(t,this.zoom,this.zoom+1),0,1)},ho.prototype.setUniforms=function(t,e,r){e.set(this.interpolationFactor(r.zoom))},ho.prototype.getBinding=function(t,e){return new eo(t,e)};var fo=function(t,e,r,i,n,o,a){this.expression=t,this.names=e,this.type=r,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.useIntegerZoom=i,this.zoom=n,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};fo.prototype.defines=function(){return[]},fo.prototype.setConstantPatternPositions=function(){},fo.prototype.populatePaintArray=function(t,e,r){var i=this.zoomInPaintVertexArray,n=this.zoomOutPaintVertexArray,o=this.layerId,a=i.length;if(i.reserve(t),n.reserve(t),r&&e.patterns&&e.patterns[o]){var s=e.patterns[o],l=s.min,u=s.mid,c=s.max,p=r[l],h=r[u],f=r[c];if(!p||!h||!f)return;for(var d=a;d<t;d++)i.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),n.emplaceBack(h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},fo.prototype.updatePaintArray=function(t,e,r,i,n){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(n&&r.patterns&&r.patterns[s]){var l=r.patterns[s],u=l.min,c=l.mid,p=l.max,h=n[u],f=n[c],d=n[p];if(!h||!f||!d)return;for(var m=t;m<e;m++)o.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),a.emplace(m,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},fo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},fo.prototype.setUniforms=function(t,e){e.set(0)},fo.prototype.getBinding=function(t,e){return new eo(t,e)};var mo=function(){this.binders={},this.cacheKey="",this._buffers=[]};mo.createDynamic=function(t,e,r){var i=new mo,n=[];for(var o in t.paint._values)if(r(o)){var a=t.paint.get(o);if(a instanceof tn&&gr(a.property.specification)){var s=_o(o,t.type),l=a.property.specification.type,u=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)i.binders[o]=new co(a.value.value,s,l),n.push("/u_"+o);else{var c=go(o,l,"source");i.binders[o]=new fo(a.value,s,l,u,e,c,t.id),n.push("/a_"+o)}else if("constant"===a.value.kind)i.binders[o]=new uo(a.value.value,s,l),n.push("/u_"+o);else if("source"===a.value.kind){var p=go(o,l,"source");i.binders[o]=new po(a.value,s,l,p),n.push("/a_"+o)}else{var h=go(o,l,"composite");i.binders[o]=new ho(a.value,s,l,u,e,h),n.push("/z_"+o)}}}return i.cacheKey=n.sort().join(""),i},mo.prototype.populatePaintArrays=function(t,e,r,i,n){for(var o in this.binders)this.binders[o].populatePaintArray(t,e,i,n)},mo.prototype.setConstantPatternPositions=function(t,e){for(var r in this.binders)this.binders[r].setConstantPatternPositions(t,e)},mo.prototype.updatePaintArrays=function(t,e,r,i,n){var o=!1;for(var a in t)for(var s=0,l=e.getPositions(+a);s<l.length;s+=1){var u=l[s],c=r.feature(u.index);for(var p in this.binders){var h=this.binders[p];if(!(h instanceof uo||h instanceof co)&&!0===h.expression.isStateDependent){var f=i.paint.get(p);h.expression=f.value,h.updatePaintArray(u.start,u.end,c,t[a],n),o=!0}}}return o},mo.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},mo.prototype.getPaintVertexBuffers=function(){return this._buffers},mo.prototype.getUniforms=function(t,e){var r=[];for(var i in this.binders)for(var n=this.binders[i],o=0,a=n.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var l=n.getBinding(t,e[s]);r.push({name:s,property:i,binding:l})}}return r},mo.prototype.setUniforms=function(t,e,r,i){for(var n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.name,l=a.property,u=a.binding;this.binders[l].setUniforms(t,u,i,r.get(l),s)}},mo.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof fo){var n=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&e.push(n)}else(i instanceof po||i instanceof ho)&&i.paintVertexBuffer&&e.push(i.paintVertexBuffer)}this._buffers=e},mo.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var r=[];for(var i in this.binders){var n=this.binders[i];(n instanceof po||n instanceof ho)&&n.paintVertexBuffer&&r.push(n.paintVertexBuffer)}this._buffers=r},mo.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var yo=function(t,e,r,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var n=0,o=e;n<o.length;n+=1){var a=o[n];this.programConfigurations[a.id]=mo.createDynamic(a,r,i),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1,this._featureMap=new Jn,this._bufferOffset=0};function _o(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function go(t,e,r){var i={color:{source:Dn,composite:Bn},number:{source:zn,composite:Dn}},n=function(t){return{"line-pattern":{source:vn,composite:vn},"fill-pattern":{source:vn,composite:vn},"fill-extrusion-pattern":{source:vn,composite:vn}}[t]}(t);return n&&n[r]||i[e][r]}yo.prototype.populatePaintArrays=function(t,e,r,i,n){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,i,n);void 0!==e.id&&this._featureMap.add(+e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},yo.prototype.updatePaintArrays=function(t,e,r,i){for(var n=0,o=r;n<o.length;n+=1){var a=o[n];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,i)||this.needsUpload}},yo.prototype.get=function(t){return this.programConfigurations[t]},yo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},yo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},bi("ConstantBinder",uo),bi("CrossFadedConstantBinder",co),bi("SourceExpressionBinder",po),bi("CrossFadedCompositeBinder",fo),bi("CompositeExpressionBinder",ho),bi("ProgramConfiguration",mo,{omit:["_buffers"]}),bi("ProgramConfigurationSet",yo);var vo=8192,xo=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function bo(t){for(var e=vo/t.extent,r=t.loadGeometry(),i=0;i<r.length;i++)for(var n=r[i],o=0;o<n.length;o++){var a=n[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<xo.min||a.x>xo.max||a.y<xo.min||a.y>xo.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a.x=c(a.x,xo.min,xo.max),a.y=c(a.y,xo.min,xo.max))}return r}function wo(t,e,r,i,n){t.emplaceBack(2*e+(i+1)/2,2*r+(n+1)/2)}var So=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new mn,this.indexArray=new Pn,this.segments=new Hn,this.programConfigurations=new yo(Kn,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Eo(t,e){for(var r=0;r<t.length;r++)if(Lo(e,t[r]))return!0;for(var i=0;i<e.length;i++)if(Lo(t,e[i]))return!0;return!!zo(t,e)}function To(t,e,r){return!!Lo(t,e)||!!ko(e,t,r)}function Io(t,e){if(1===t.length)return Mo(e,t[0]);for(var r=0;r<e.length;r++)for(var i=e[r],n=0;n<i.length;n++)if(Lo(t,i[n]))return!0;for(var o=0;o<t.length;o++)if(Mo(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(zo(t,e[a]))return!0;return!1}function Ao(t,e,r){if(t.length>1){if(zo(t,e))return!0;for(var i=0;i<e.length;i++)if(ko(e[i],t,r))return!0}for(var n=0;n<t.length;n++)if(ko(t[n],e,r))return!0;return!1}function zo(t,e){if(0===t.length||0===e.length)return!1;for(var r=0;r<t.length-1;r++)for(var i=t[r],n=t[r+1],o=0;o<e.length-1;o++)if(Co(i,n,e[o],e[o+1]))return!0;return!1}function Co(t,e,r,i){return E(t,r,i)!==E(e,r,i)&&E(t,e,r)!==E(t,e,i)}function ko(t,e,r){var i=r*r;if(1===e.length)return t.distSqr(e[0])<i;for(var n=1;n<e.length;n++)if(Po(t,e[n-1],e[n])<i)return!0;return!1}function Po(t,e,r){var i=e.distSqr(r);if(0===i)return t.distSqr(e);var n=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/i;return n<0?t.distSqr(e):n>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(n)._add(e))}function Mo(t,e){for(var r,i,n,o=!1,a=0;a<t.length;a++)for(var s=0,l=(r=t[a]).length-1;s<r.length;l=s++)i=r[s],n=r[l],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(o=!o);return o}function Lo(t,e){for(var r=!1,i=0,n=t.length-1;i<t.length;n=i++){var o=t[i],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function Do(t,e,r){var i=r[0],n=r[2];if(t.x<i.x&&e.x<i.x||t.x>n.x&&e.x>n.x||t.y<i.y&&e.y<i.y||t.y>n.y&&e.y>n.y)return!1;var o=E(t,e,r[0]);return o!==E(t,e,r[1])||o!==E(t,e,r[2])||o!==E(t,e,r[3])}function Bo(t,e,r){var i=e.paint.get(t).value;return"constant"===i.kind?i.value:r.programConfigurations.get(e.id).binders[t].maxValue}function Ro(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Fo(t,e,r,i,n){if(!e[0]&&!e[1])return t;var a=o.convert(e)._mult(n);"viewport"===r&&a._rotate(-i);for(var s=[],l=0;l<t.length;l++){var u=t[l];s.push(u.sub(a))}return s}So.prototype.populate=function(t,e){var r=this.layers[0],i=[],n=null;"circle"===r.type&&(n=r.layout.get("circle-sort-key"));for(var o=0,a=t;o<a.length;o+=1){var s=a[o],l=s.feature,u=s.index,c=s.sourceLayerIndex;if(this.layers[0]._featureFilter(new Wi(this.zoom),l)){var p=bo(l),h=n?n.evaluate(l,{}):void 0,f={id:l.id,properties:l.properties,type:l.type,sourceLayerIndex:c,index:u,geometry:p,patterns:{},sortKey:h};i.push(f)}}n&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var d=0,m=i;d<m.length;d+=1){var y=m[d],_=y,g=_.geometry,v=_.index,x=_.sourceLayerIndex,b=t[v].feature;this.addFeature(y,g,v),e.featureIndex.insert(b,g,v,x,this.index)}},So.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},So.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},So.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},So.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Kn),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},So.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},So.prototype.addFeature=function(t,e,r){for(var i=0,n=e;i<n.length;i+=1)for(var o=0,a=n[i];o<a.length;o+=1){var s=a[o],l=s.x,u=s.y;if(!(l<0||l>=vo||u<0||u>=vo)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=c.vertexLength;wo(this.layoutVertexArray,l,u,-1,-1),wo(this.layoutVertexArray,l,u,1,-1),wo(this.layoutVertexArray,l,u,1,1),wo(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{})},bi("CircleBucket",So,{omit:["layers"]});var Oo,Uo=new ln({"circle-sort-key":new nn(Ct.layout_circle["circle-sort-key"])}),Vo={paint:new ln({"circle-radius":new nn(Ct.paint_circle["circle-radius"]),"circle-color":new nn(Ct.paint_circle["circle-color"]),"circle-blur":new nn(Ct.paint_circle["circle-blur"]),"circle-opacity":new nn(Ct.paint_circle["circle-opacity"]),"circle-translate":new rn(Ct.paint_circle["circle-translate"]),"circle-translate-anchor":new rn(Ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new rn(Ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new rn(Ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nn(Ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nn(Ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nn(Ct.paint_circle["circle-stroke-opacity"])}),layout:Uo},No="undefined"!=typeof Float32Array?Float32Array:Array;function jo(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,t[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,t[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,t[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,r=arguments.length;r--;)e+=t[r]*t[r];return Math.sqrt(e)}),Oo=new No(3),No!=Float32Array&&(Oo[0]=0,Oo[1]=0,Oo[2]=0),function(){var t=new No(4);No!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var qo=function(t){function e(e){t.call(this,e,Vo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new So(t)},e.prototype.queryRadius=function(t){var e=t;return Bo("circle-radius",this,e)+Bo("circle-stroke-width",this,e)+Ro(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,o,a,s){for(var l=Fo(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(t,e){return l.map(function(t){return Zo(t,e)})}(0,s),h=c?u*a:u,f=0,d=i;f<d.length;f+=1)for(var m=0,y=d[f];m<y.length;m+=1){var _=y[m],g=c?_:Zo(_,s),v=h,x=jo([],[_.x,_.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=x[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/x[3]),To(p,g,v))return!0}return!1},e}(un);function Zo(t,e){var r=jo([],[t.x,t.y,0,1],e);return new o(r[0]/r[3],r[1]/r[3])}var Go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(So);function Xo(t,e,r,i){var n=e.width,o=e.height;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==n*o*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(n*o*r);return t.width=n,t.height=o,t.data=i,t}function Wo(t,e,r){var i=e.width,n=e.height;if(i!==t.width||n!==t.height){var o=Xo({},{width:i,height:n},r);Ko(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,n)},r),t.width=i,t.height=n,t.data=o.data}}function Ko(t,e,r,i,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<n.height;l++)for(var u=((r.y+l)*t.width+r.x)*o,c=((i.y+l)*e.width+i.x)*o,p=0;p<n.width*o;p++)s[c+p]=a[u+p];return e}bi("HeatmapBucket",Go,{omit:["layers"]});var Ho=function(t,e){Xo(this,t,1,e)};Ho.prototype.resize=function(t){Wo(this,t,1)},Ho.prototype.clone=function(){return new Ho({width:this.width,height:this.height},new Uint8Array(this.data))},Ho.copy=function(t,e,r,i,n){Ko(t,e,r,i,n,1)};var Yo=function(t,e){Xo(this,t,4,e)};Yo.prototype.resize=function(t){Wo(this,t,4)},Yo.prototype.replace=function(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t},Yo.prototype.clone=function(){return new Yo({width:this.width,height:this.height},new Uint8Array(this.data))},Yo.copy=function(t,e,r,i,n){Ko(t,e,r,i,n,4)},bi("AlphaImage",Ho),bi("RGBAImage",Yo);var Jo={paint:new ln({"heatmap-radius":new nn(Ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nn(Ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new rn(Ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sn(Ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new rn(Ct.paint_heatmap["heatmap-opacity"])})};function Qo(t,e){for(var r=new Uint8Array(1024),i={},n=0,o=0;n<256;n++,o+=4){i[e]=n/255;var a=t.evaluate(i);r[o+0]=Math.floor(255*a.r/a.a),r[o+1]=Math.floor(255*a.g/a.a),r[o+2]=Math.floor(255*a.b/a.a),r[o+3]=Math.floor(255*a.a)}return new Yo({width:256,height:1},r)}var $o=function(t){function e(e){t.call(this,e,Jo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Go(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Qo(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(un),ta={paint:new ln({"hillshade-illumination-direction":new rn(Ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new rn(Ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new rn(Ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new rn(Ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new rn(Ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new rn(Ct.paint_hillshade["hillshade-accent-color"])})},ea=function(t){function e(e){t.call(this,e,ta)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(un),ra=fn([{name:"a_pos",components:2,type:"Int16"}],4).members,ia=oa,na=oa;function oa(t,e,r){r=r||2;var i,n,o,a,s,l,u,c=e&&e.length,p=c?e[0]*r:t.length,h=aa(t,0,p,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,r,i){var n,o,a,s=[];for(n=0,o=e.length;n<o;n++)(a=aa(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(_a(a));for(s.sort(fa),n=0;n<s.length;n++)da(s[n],r),r=sa(r,r.next);return r}(t,e,h,r)),t.length>80*r){i=o=t[0],n=a=t[1];for(var d=r;d<p;d+=r)(s=t[d])<i&&(i=s),(l=t[d+1])<n&&(n=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-i,a-n))?1/u:0}return la(h,f,r,i,n,u),f}function aa(t,e,r,i,n){var o,a;if(n===ka(t,e,r,i)>0)for(o=e;o<r;o+=i)a=Aa(o,t[o],t[o+1],a);else for(o=r-i;o>=e;o-=i)a=Aa(o,t[o],t[o+1],a);return a&&ba(a,a.next)&&(za(a),a=a.next),a}function sa(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!ba(i,i.next)&&0!==xa(i.prev,i,i.next))i=i.next;else{if(za(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function la(t,e,r,i,n,o,a){if(t){!a&&o&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=ya(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,a,s,l,u=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,i=r,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(a>1)}(n)}(t,i,n,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?ca(t,i,n,o):ua(t))e.push(s.i/r),e.push(t.i/r),e.push(l.i/r),za(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?la(t=pa(sa(t),e,r),e,r,i,n,o,2):2===a&&ha(t,e,r,i,n,o):la(sa(t),e,r,i,n,o,1);break}}}function ua(t){var e=t.prev,r=t,i=t.next;if(xa(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(ga(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&xa(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function ca(t,e,r,i){var n=t.prev,o=t,a=t.next;if(xa(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,l=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,u=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,p=ya(s,l,e,r,i),h=ya(u,c,e,r,i),f=t.prevZ,d=t.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==t.prev&&f!==t.next&&ga(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&xa(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&ga(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&xa(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==t.prev&&f!==t.next&&ga(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&xa(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&ga(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&xa(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function pa(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!ba(n,o)&&wa(n,i,i.next,o)&&Ta(n,o)&&Ta(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),za(i),za(i.next),i=t=o),i=i.next}while(i!==t);return sa(i)}function ha(t,e,r,i,n,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&va(a,s)){var l=Ia(a,s);return a=sa(a,a.next),l=sa(l,l.next),la(a,e,r,i,n,o),void la(l,e,r,i,n,o)}s=s.next}a=a.next}while(a!==t)}function fa(t,e){return t.x-e.x}function da(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===a)return r;var l,u=r,c=r.x,p=r.y,h=1/0;i=r;do{n>=i.x&&i.x>=c&&n!==i.x&&ga(o<p?n:a,o,c,p,o<p?a:n,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(n-i.x),Ta(i,t)&&(l<h||l===h&&(i.x>r.x||i.x===r.x&&ma(r,i)))&&(r=i,h=l)),i=i.next}while(i!==u);return r}(t,e)){var r=Ia(e,t);sa(r,r.next)}}function ma(t,e){return xa(t.prev,t,e.prev)<0&&xa(e.next,t,t.next)<0}function ya(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _a(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function ga(t,e,r,i,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function va(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&wa(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Ta(t,e)&&Ta(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(xa(t.prev,t,e.prev)||xa(t,e.prev,e))||ba(t,e)&&xa(t.prev,t,t.next)>0&&xa(e.prev,e,e.next)>0)}function xa(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ba(t,e){return t.x===e.x&&t.y===e.y}function wa(t,e,r,i){var n=Ea(xa(t,e,r)),o=Ea(xa(t,e,i)),a=Ea(xa(r,i,t)),s=Ea(xa(r,i,e));return n!==o&&a!==s||!(0!==n||!Sa(t,r,e))||!(0!==o||!Sa(t,i,e))||!(0!==a||!Sa(r,t,i))||!(0!==s||!Sa(r,e,i))}function Sa(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ea(t){return t>0?1:t<0?-1:0}function Ta(t,e){return xa(t.prev,t,t.next)<0?xa(t,e,t.next)>=0&&xa(t,t.prev,e)>=0:xa(t,e,t.prev)<0||xa(t,t.next,e)<0}function Ia(t,e){var r=new Ca(t.i,t.x,t.y),i=new Ca(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function Aa(t,e,r,i){var n=new Ca(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function za(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ca(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ka(t,e,r,i){for(var n=0,o=e,a=r-i;o<r;o+=i)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}function Pa(t,e,r,i,n){!function t(e,r,i,n,o){for(;n>i;){if(n-i>600){var a=n-i+1,s=r-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,r,Math.max(i,Math.floor(r-s*u/a+c)),Math.min(n,Math.floor(r+(a-s)*u/a+c)),o)}var p=e[r],h=i,f=n;for(Ma(e,i,r),o(e[n],p)>0&&Ma(e,i,n);h<f;){for(Ma(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[i],p)?Ma(e,i,f):Ma(e,++f,n),f<=r&&(i=f+1),r<=f&&(n=f-1)}}(t,e,r||0,i||t.length-1,n||La)}function Ma(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function La(t,e){return t<e?-1:t>e?1:0}function Da(t,e){var r=t.length;if(r<=1)return[t];for(var i,n,o=[],a=0;a<r;a++){var s=T(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(i&&o.push(i),i=[t[a]]):i.push(t[a]))}if(i&&o.push(i),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(Pa(o[l],e,1,o[l].length-1,Ba),o[l]=o[l].slice(0,e));return o}function Ba(t,e){return e.area-t.area}function Ra(t,e,r){for(var i=r.patternDependencies,n=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(n=!0);var l=s.constantOr(null);l&&(n=!0,i[l.to]=!0,i[l.from]=!0)}return n}function Fa(t,e,r,i,n){for(var o=n.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:i-1},r,{},n.availableImages),p=u.evaluate({zoom:i},r,{},n.availableImages),h=u.evaluate({zoom:i+1},r,{},n.availableImages);c=c&&c.name?c.name:c,p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,o[c]=!0,o[p]=!0,o[h]=!0,r.patterns[l.id]={min:c,mid:p,max:h}}}return r}oa.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,a=Math.abs(ka(t,0,o,r));if(n)for(var s=0,l=e.length;s<l;s++){var u=e[s]*r,c=s<l-1?e[s+1]*r:t.length;a-=Math.abs(ka(t,u,c,r))}var p=0;for(s=0;s<i.length;s+=3){var h=i[s]*r,f=i[s+1]*r,d=i[s+2]*r;p+=Math.abs((t[h]-t[d])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},oa.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[n][o][a]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},ia.default=na;var Oa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mn,this.indexArray=new Pn,this.indexArray2=new Mn,this.programConfigurations=new yo(ra,t.layers,t.zoom),this.segments=new Hn,this.segments2=new Hn,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Oa.prototype.populate=function(t,e){this.hasPattern=Ra("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a.feature,l=a.index,u=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Wi(this.zoom),s)){var c=bo(s),p=r?r.evaluate(s,{},e.availableImages):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:u,index:l,geometry:c,patterns:{},sortKey:p};i.push(h)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var f=0,d=i;f<d.length;f+=1){var m=d[f],y=m,_=y.geometry,g=y.index,v=y.sourceLayerIndex;if(this.hasPattern){var x=Fa("fill",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,_,g,{});var b=t[g].feature;e.featureIndex.insert(b,_,g,v,this.index)}},Oa.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},Oa.prototype.addFeatures=function(t,e){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var n=i[r];this.addFeature(n,n.geometry,n.index,e)}},Oa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Oa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ra),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Oa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Oa.prototype.addFeature=function(t,e,r,i){for(var n=0,o=Da(e,500);n<o.length;n+=1){for(var a=o[n],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,h=[],f=[],d=0,m=a;d<m.length;d+=1){var y=m[d];if(0!==y.length){y!==a[0]&&f.push(h.length/2);var _=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),g=_.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(g+y.length-1,g),h.push(y[0].x),h.push(y[0].y);for(var v=1;v<y.length;v++)this.layoutVertexArray.emplaceBack(y[v].x,y[v].y),this.indexArray2.emplaceBack(g+v-1,g+v),h.push(y[v].x),h.push(y[v].y);_.vertexLength+=y.length,_.primitiveLength+=y.length}}for(var x=ia(h,f),b=0;b<x.length;b+=3)this.indexArray.emplaceBack(p+x[b],p+x[b+1],p+x[b+2]);c.vertexLength+=s,c.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i)},bi("FillBucket",Oa,{omit:["layers","patternFeatures"]});var Ua=new ln({"fill-sort-key":new nn(Ct.layout_fill["fill-sort-key"])}),Va={paint:new ln({"fill-antialias":new rn(Ct.paint_fill["fill-antialias"]),"fill-opacity":new nn(Ct.paint_fill["fill-opacity"]),"fill-color":new nn(Ct.paint_fill["fill-color"]),"fill-outline-color":new nn(Ct.paint_fill["fill-outline-color"]),"fill-translate":new rn(Ct.paint_fill["fill-translate"]),"fill-translate-anchor":new rn(Ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new on(Ct.paint_fill["fill-pattern"])}),layout:Ua},Na=function(t){function e(e){t.call(this,e,Va)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r);var i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Oa(t)},e.prototype.queryRadius=function(){return Ro(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,o,a){return Io(Fo(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)},e.prototype.isTileClipped=function(){return!0},e}(un),ja=fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qa=Za;function Za(t,e,r,i,n){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=n,t.readFields(Ga,this,e)}function Ga(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var i=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[i]=n}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function Xa(t){for(var e,r,i=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],i+=((r=t[a]).x-e.x)*(e.y+r.y);return i}Za.types=["Unknown","Point","LineString","Polygon"],Za.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,n=0,a=0,s=0,l=[];t.pos<r;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new o(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Za.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,i=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)(n+=t.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},Za.prototype.toGeoJSON=function(t,e,r){var i,n,o=this.extent*Math.pow(2,r),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Za.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e],i=180-360*(r.y+s)/o;t[e]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(i=0;i<l.length;i++)p[i]=l[i][0];c(l=p);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var r,i,n=[],o=0;o<e;o++){var a=Xa(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(r&&n.push(r),r=[t[o]]):r.push(t[o]))}return r&&n.push(r),n}(l),i=0;i<l.length;i++)for(n=0;n<l[i].length;n++)c(l[i][n])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Wa=Ka;function Ka(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ha,this,e),this.length=this._features.length}function Ha(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(r))}function Ya(t,e,r){if(3===t){var i=new Wa(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}Ka.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new qa(this._pbf,e,this.extent,this._keys,this._values)};var Ja={VectorTile:function(t,e){this.layers=t.readFields(Ya,{},e)},VectorTileFeature:qa,VectorTileLayer:Wa},Qa=Ja.VectorTileFeature.types,$a=Math.pow(2,13);function ts(t,e,r,i,n,o,a,s){t.emplaceBack(e,r,2*Math.floor(i*$a)+a,n*$a*2,o*$a*2,Math.round(s))}var es=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new _n,this.indexArray=new Pn,this.programConfigurations=new yo(ja,t.layers,t.zoom),this.segments=new Hn,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function rs(t,e){return t.x===e.x&&(t.x<0||t.x>vo)||t.y===e.y&&(t.y<0||t.y>vo)}function is(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>vo})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>vo})}es.prototype.populate=function(t,e){this.features=[],this.hasPattern=Ra("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var n=i[r],o=n.feature,a=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter(new Wi(this.zoom),o)){var l=bo(o),u={sourceLayerIndex:s,index:a,geometry:l,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(u.id=o.id),this.hasPattern?this.features.push(Fa("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(o,l,a,s,this.index,!0)}}},es.prototype.addFeatures=function(t,e){for(var r=0,i=this.features;r<i.length;r+=1){var n=i[r],o=n.geometry;this.addFeature(n,o,n.index,e)}},es.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},es.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},es.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},es.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ja),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},es.prototype.addFeature=function(t,e,r,i){for(var n=0,o=Da(e,500);n<o.length;n+=1){for(var a=o[n],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,h=a;p<h.length;p+=1){var f=h[p];if(0!==f.length&&!is(f))for(var d=0,m=0;m<f.length;m++){var y=f[m];if(m>=1){var _=f[m-1];if(!rs(y,_)){c.vertexLength+4>Hn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=y.sub(_)._perp()._unit(),v=_.dist(y);d+v>32768&&(d=0),ts(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,d),ts(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,d),d+=v,ts(this.layoutVertexArray,_.x,_.y,g.x,g.y,0,0,d),ts(this.layoutVertexArray,_.x,_.y,g.x,g.y,0,1,d);var x=c.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>Hn.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===Qa[t.type]){for(var b=[],w=[],S=c.vertexLength,E=0,T=a;E<T.length;E+=1){var I=T[E];if(0!==I.length){I!==a[0]&&w.push(b.length/2);for(var A=0;A<I.length;A++){var z=I[A];ts(this.layoutVertexArray,z.x,z.y,0,0,1,1,0),b.push(z.x),b.push(z.y)}}}for(var C=ia(b,w),k=0;k<C.length;k+=3)this.indexArray.emplaceBack(S+C[k],S+C[k+2],S+C[k+1]);c.primitiveLength+=C.length/3,c.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,i)},bi("FillExtrusionBucket",es,{omit:["layers","features"]});var ns={paint:new ln({"fill-extrusion-opacity":new rn(Ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nn(Ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new rn(Ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new rn(Ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new on(Ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nn(Ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nn(Ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new rn(Ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},os=function(t){function e(e){t.call(this,e,ns)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new es(t)},e.prototype.queryRadius=function(){return Ro(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a,s,l){var u=Fo(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,r),p=this.paint.get("fill-extrusion-base").evaluate(e,r),h=function(t,e,r,i){for(var n=[],a=0,s=t;a<s.length;a+=1){var l=s[a],u=[l.x,l.y,0,1];jo(u,u,e),n.push(new o(u[0]/u[3],u[1]/u[3]))}return n}(u,l),f=function(t,e,r,i){for(var n=[],a=[],s=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,p=i[8]*r,h=i[9]*r,f=i[10]*r,d=i[11]*r,m=0,y=t;m<y.length;m+=1){for(var _=[],g=[],v=0,x=y[m];v<x.length;v+=1){var b=x[v],w=b.x,S=b.y,E=i[0]*w+i[4]*S+i[12],T=i[1]*w+i[5]*S+i[13],I=i[2]*w+i[6]*S+i[14],A=i[3]*w+i[7]*S+i[15],z=I+u,C=A+c,k=E+p,P=T+h,M=I+f,L=A+d,D=new o((E+s)/C,(T+l)/C);D.z=z/C,_.push(D);var B=new o(k/L,P/L);B.z=M/L,g.push(B)}n.push(_),a.push(g)}return[n,a]}(i,p,c,l);return function(t,e,r){var i=1/0;Io(r,e)&&(i=ss(r,e[0]));for(var n=0;n<e.length;n++)for(var o=e[n],a=t[n],s=0;s<o.length-1;s++){var l=o[s],u=o[s+1],c=a[s],p=[l,u,a[s+1],c,l];Eo(r,p)&&(i=Math.min(i,ss(r,p)))}return i!==1/0&&i}(f[0],f[1],h)},e}(un);function as(t,e){return t.x*e.x+t.y*e.y}function ss(t,e){if(1===t.length){var r=e[0],i=e[1],n=e[3],o=t[0],a=i.sub(r),s=n.sub(r),l=o.sub(r),u=as(a,a),c=as(a,s),p=as(s,s),h=as(l,a),f=as(l,s),d=u*p-c*c,m=(p*h-c*f)/d,y=(u*f-c*h)/d,_=1-m-y;return r.z*_+i.z*m+n.z*y}for(var g=1/0,v=0,x=e;v<x.length;v+=1){var b=x[v];g=Math.min(g,b.z)}return g}var ls=fn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,us=Ja.VectorTileFeature.types,cs=Math.cos(Math.PI/180*37.5),ps=Math.pow(2,14)/.5,hs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gn,this.indexArray=new Pn,this.programConfigurations=new yo(ls,t.layers,t.zoom),this.segments=new Hn,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};hs.prototype.populate=function(t,e){this.hasPattern=Ra("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a.feature,l=a.index,u=a.sourceLayerIndex;if(this.layers[0]._featureFilter(new Wi(this.zoom),s)){var c=bo(s),p=r?r.evaluate(s,{}):void 0,h={id:s.id,properties:s.properties,type:s.type,sourceLayerIndex:u,index:l,geometry:c,patterns:{},sortKey:p};i.push(h)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var f=0,d=i;f<d.length;f+=1){var m=d[f],y=m,_=y.geometry,g=y.index,v=y.sourceLayerIndex;if(this.hasPattern){var x=Fa("line",this.layers,m,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(m,_,g,{});var b=t[g].feature;e.featureIndex.insert(b,_,g,v,this.index)}},hs.prototype.update=function(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,r)},hs.prototype.addFeatures=function(t,e){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var n=i[r];this.addFeature(n,n.geometry,n.index,e)}},hs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ls),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hs.prototype.addFeature=function(t,e,r,i){for(var n=this.layers[0].layout,o=n.get("line-join").evaluate(t,{}),a=n.get("line-cap"),s=n.get("line-miter-limit"),l=n.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var p=c[u];this.addLine(p,t,o,a,s,l,r,i)}},hs.prototype.addLine=function(t,e,r,i,n,o,a,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var l=0;l<t.length-1;l++)this.totalDistance+=t[l].dist(t[l+1])}for(var u="Polygon"===us[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var p=0;p<c-1&&t[p].equals(t[p+1]);)p++;if(!(c<(u?3:2))){"bevel"===r&&(n=1.05);var h,f=this.overscaling<=16?15*vo/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),m=void 0,y=void 0,_=void 0,g=void 0;this.e1=this.e2=-1,u&&(h=t[c-2],g=t[p].sub(h)._unit()._perp());for(var v=p;v<c;v++)if(!(y=u&&v===c-1?t[p+1]:t[v+1])||!t[v].equals(y)){g&&(_=g),h&&(m=h),h=t[v],g=y?y.sub(h)._unit()._perp():_;var x=(_=_||g).add(g);0===x.x&&0===x.y||x._unit();var b=_.x*g.x+_.y*g.y,w=x.x*g.x+x.y*g.y,S=0!==w?1/w:1/0,E=2*Math.sqrt(2-2*w),T=w<cs&&m&&y,I=_.x*g.y-_.y*g.x>0;if(T&&v>p){var A=h.dist(m);if(A>2*f){var z=h.sub(h.sub(m)._mult(f/A)._round());this.updateDistance(m,z),this.addCurrentVertex(z,_,0,0,d),m=z}}var C=m&&y,k=C?r:u?"butt":i;if(C&&"round"===k&&(S<o?k="miter":S<=2&&(k="fakeround")),"miter"===k&&S>n&&(k="bevel"),"bevel"===k&&(S>2&&(k="flipbevel"),S<n&&(k="miter")),m&&this.updateDistance(m,h),"miter"===k)x._mult(S),this.addCurrentVertex(h,x,0,0,d);else if("flipbevel"===k){if(S>100)x=g.mult(-1);else{var P=S*_.add(g).mag()/_.sub(g).mag();x._perp()._mult(P*(I?-1:1))}this.addCurrentVertex(h,x,0,0,d),this.addCurrentVertex(h,x.mult(-1),0,0,d)}else if("bevel"===k||"fakeround"===k){var M=-Math.sqrt(S*S-1),L=I?M:0,D=I?0:M;if(m&&this.addCurrentVertex(h,_,L,D,d),"fakeround"===k)for(var B=Math.round(180*E/Math.PI/20),R=1;R<B;R++){var F=R/B;if(.5!==F){var O=F-.5;F+=F*O*(F-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*O*O+(.848013+b*(.215638*b-1.06021)))}var U=g.sub(_)._mult(F)._add(_)._unit()._mult(I?-1:1);this.addHalfVertex(h,U.x,U.y,!1,I,0,d)}y&&this.addCurrentVertex(h,g,-L,-D,d)}else if("butt"===k)this.addCurrentVertex(h,x,0,0,d);else if("square"===k){var V=m?1:-1;this.addCurrentVertex(h,x,V,V,d)}else"round"===k&&(m&&(this.addCurrentVertex(h,_,0,0,d),this.addCurrentVertex(h,_,1,1,d,!0)),y&&(this.addCurrentVertex(h,g,-1,-1,d,!0),this.addCurrentVertex(h,g,0,0,d)));if(T&&v<c-1){var N=h.dist(y);if(N>2*f){var j=h.add(y.sub(h)._mult(f/N)._round());this.updateDistance(h,j),this.addCurrentVertex(j,g,0,0,d),h=j}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},hs.prototype.addCurrentVertex=function(t,e,r,i,n,o){void 0===o&&(o=!1);var a=e.x+e.y*r,s=e.y-e.x*r,l=-e.x+e.y*i,u=-e.y-e.x*i;this.addHalfVertex(t,a,s,o,!1,r,n),this.addHalfVertex(t,l,u,o,!0,-i,n),this.distance>ps/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,r,i,n,o))},hs.prototype.addHalfVertex=function(t,e,r,i,n,o,a){var s=t.x,l=t.y,u=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1)|(63&u)<<2,u>>6);var c=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),a.primitiveLength++),n?this.e2=c:this.e1=c},hs.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ps-1):this.distance},bi("LineBucket",hs,{omit:["layers","patternFeatures"]});var fs=new ln({"line-cap":new rn(Ct.layout_line["line-cap"]),"line-join":new nn(Ct.layout_line["line-join"]),"line-miter-limit":new rn(Ct.layout_line["line-miter-limit"]),"line-round-limit":new rn(Ct.layout_line["line-round-limit"]),"line-sort-key":new nn(Ct.layout_line["line-sort-key"])}),ds={paint:new ln({"line-opacity":new nn(Ct.paint_line["line-opacity"]),"line-color":new nn(Ct.paint_line["line-color"]),"line-translate":new rn(Ct.paint_line["line-translate"]),"line-translate-anchor":new rn(Ct.paint_line["line-translate-anchor"]),"line-width":new nn(Ct.paint_line["line-width"]),"line-gap-width":new nn(Ct.paint_line["line-gap-width"]),"line-offset":new nn(Ct.paint_line["line-offset"]),"line-blur":new nn(Ct.paint_line["line-blur"]),"line-dasharray":new an(Ct.paint_line["line-dasharray"]),"line-pattern":new on(Ct.paint_line["line-pattern"]),"line-gradient":new sn(Ct.paint_line["line-gradient"])}),layout:fs},ms=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,r){return r=new Wi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),t.prototype.possiblyEvaluate.call(this,e,r)},e.prototype.evaluate=function(e,r,i,n){return r=h({},r,{zoom:Math.floor(r.zoom)}),t.prototype.evaluate.call(this,e,r,i,n)},e}(nn))(ds.paint.properties["line-width"].specification);ms.useIntegerZoom=!0;var ys=function(t){function e(e){t.call(this,e,ds)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Qo(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,r){t.prototype.recalculate.call(this,e,r),this.paint._values["line-floorwidth"]=ms.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new hs(t)},e.prototype.queryRadius=function(t){var e=t,r=_s(Bo("line-width",this,e),Bo("line-gap-width",this,e)),i=Bo("line-offset",this,e);return r/2+Math.abs(i)+Ro(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,r,i,n,a,s){var l=Fo(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),u=s/2*_s(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),c=this.paint.get("line-offset").evaluate(e,r);return c&&(i=function(t,e){for(var r=[],i=new o(0,0),n=0;n<t.length;n++){for(var a=t[n],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],p=a[l+1],h=0===l?i:c.sub(u)._unit()._perp(),f=l===a.length-1?i:p.sub(c)._unit()._perp(),d=h._add(f)._unit(),m=d.x*f.x+d.y*f.y;d._mult(1/m),s.push(d._mult(e)._add(c))}r.push(s)}return r}(i,c*s)),function(t,e,r){for(var i=0;i<e.length;i++){var n=e[i];if(t.length>=3)for(var o=0;o<n.length;o++)if(Lo(t,n[o]))return!0;if(Ao(t,n,r))return!0}return!1}(l,i,u)},e.prototype.isTileClipped=function(){return!0},e}(un);function _s(t,e){return e>0?e+2*t:t}var gs=fn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vs=fn([{name:"a_projected_pos",components:3,type:"Float32"}],4),xs=(fn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),fn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),bs=(fn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ws=fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Ss(t,e,r){return t.sections.forEach(function(t){t.text=function(t,e,r){var i=e.layout.get("text-transform").evaluate(r,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Xi.applyArabicShaping&&(t=Xi.applyArabicShaping(t)),t}(t.text,e,r)}),t}fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),fn([{type:"Float32",name:"offsetX"}]),fn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Es={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ts=24,Is=function(t,e,r,i,n){var o,a,s=8*n-i-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?n-1:0,h=r?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},As=function(t,e,r,i,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,p=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[r+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;t[r+f]=255&a,f+=d,a/=256,u-=8);t[r+f-d]|=128*m},zs=Cs;function Cs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Cs.Varint=0,Cs.Fixed64=1,Cs.Bytes=2,Cs.Fixed32=5;var ks="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ps(t){return t.type===Cs.Bytes?t.readVarint()+t.pos:t.pos+1}function Ms(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Ls(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function Ds(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function Bs(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Rs(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Fs(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Os(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Us(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Vs(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Ns(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function js(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function qs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Zs(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Gs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Cs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,t(n,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=qs(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Gs(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=qs(this.buf,this.pos)+4294967296*qs(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=qs(this.buf,this.pos)+4294967296*Gs(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Is(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Is(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return Ms(t,i,e);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return Ms(t,i,e);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return Ms(t,i,e);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return Ms(t,i,e);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return Ms(t,i,e);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return Ms(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ks?function(t,e,r){return ks.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var i="",n=e;n<r;){var o,a,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),n+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Cs.Bytes)return t.push(this.readVarint(e));var r=Ps(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Cs.Bytes)return t.push(this.readSVarint());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Cs.Bytes)return t.push(this.readBoolean());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Cs.Bytes)return t.push(this.readFloat());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Cs.Bytes)return t.push(this.readDouble());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Cs.Bytes)return t.push(this.readFixed32());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Cs.Bytes)return t.push(this.readSFixed32());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Cs.Bytes)return t.push(this.readFixed64());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Cs.Bytes)return t.push(this.readSFixed64());var e=Ps(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Cs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Cs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Cs.Fixed32)this.pos+=4;else{if(e!==Cs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Zs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Zs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Zs(this.buf,-1&t,this.pos),Zs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Zs(this.buf,-1&t,this.pos),Zs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Ls(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),As(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),As(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&Ls(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,Cs.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Ds,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Bs,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Os,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Rs,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Fs,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Us,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Vs,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Ns,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,js,e)},writeBytesField:function(t,e){this.writeTag(t,Cs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Cs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Cs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Cs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Cs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Cs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Cs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Cs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Cs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Cs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Xs=3;function Ws(t,e,r){1===t&&r.readMessage(Ks,e)}function Ks(t,e,r){if(3===t){var i=r.readMessage(Hs,{}),n=i.id,o=i.bitmap,a=i.width,s=i.height,l=i.left,u=i.top,c=i.advance;e.push({id:n,bitmap:new Ho({width:a+2*Xs,height:s+2*Xs},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function Hs(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint())}var Ys=Xs;function Js(t){for(var e=0,r=0,i=0,n=t;i<n.length;i+=1){var o=n[i];e+=o.w*o.h,r=Math.max(r,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],h=a.length-1;h>=0;h--){var f=a[h];if(!(p.w>f.w||p.h>f.h)){if(p.x=f.x,p.y=f.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===f.w&&p.h===f.h){var d=a.pop();h<a.length&&(a[h]=d)}else p.h===f.h?(f.x+=p.w,f.w-=p.w):p.w===f.w?(f.y+=p.h,f.h-=p.h):(a.push({x:f.x+p.w,y:f.y,w:f.w-p.w,h:p.h}),f.y+=p.h,f.h-=p.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}var Qs=1,$s=function(t,e){var r=e.pixelRatio,i=e.version,n=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=r,this.stretchX=n,this.stretchY=o,this.content=a,this.version=i},tl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};tl.tl.get=function(){return[this.paddedRect.x+Qs,this.paddedRect.y+Qs]},tl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Qs,this.paddedRect.y+this.paddedRect.h-Qs]},tl.tlbr.get=function(){return this.tl.concat(this.br)},tl.displaySize.get=function(){return[(this.paddedRect.w-2*Qs)/this.pixelRatio,(this.paddedRect.h-2*Qs)/this.pixelRatio]},Object.defineProperties($s.prototype,tl);var el=function(t,e){var r={},i={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,r,n),this.addImages(e,i,n);var o=Js(n),a=o.w,s=o.h,l=new Yo({width:a||1,height:s||1});for(var u in t){var c=t[u],p=r[u].paddedRect;Yo.copy(c.data,l,{x:0,y:0},{x:p.x+Qs,y:p.y+Qs},c.data)}for(var h in e){var f=e[h],d=i[h].paddedRect,m=d.x+Qs,y=d.y+Qs,_=f.data.width,g=f.data.height;Yo.copy(f.data,l,{x:0,y:0},{x:m,y:y},f.data),Yo.copy(f.data,l,{x:0,y:g-1},{x:m,y:y-1},{width:_,height:1}),Yo.copy(f.data,l,{x:0,y:0},{x:m,y:y+g},{width:_,height:1}),Yo.copy(f.data,l,{x:_-1,y:0},{x:m-1,y:y},{width:1,height:g}),Yo.copy(f.data,l,{x:0,y:0},{x:m+_,y:y},{width:1,height:g})}this.image=l,this.iconPositions=r,this.patternPositions=i};el.prototype.addImages=function(t,e,r){for(var i in t){var n=t[i],o={x:0,y:0,w:n.data.width+2*Qs,h:n.data.height+2*Qs};r.push(o),e[i]=new $s(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(i)}},el.prototype.patchUpdatedImages=function(t,e){for(var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e)},el.prototype.patchUpdatedImage=function(t,e,r){if(t&&e&&t.version!==e.version){t.version=e.version;var i=t.tl,n=i[0],o=i[1];r.update(e.data,void 0,{x:n,y:o})}},bi("ImagePosition",$s),bi("ImageAtlas",el);var rl={horizontal:1,vertical:2,horizontalOnly:3},il=-17,nl=function(){this.scale=1,this.fontStack="",this.imageName=null};nl.forText=function(t,e){var r=new nl;return r.scale=t||1,r.fontStack=e,r},nl.forImage=function(t){var e=new nl;return e.imageName=t,e};var ol=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function al(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m){var y,_=ol.fromFeature(t,n);p===rl.vertical&&_.verticalizePunctuation();var g=Xi.processBidirectionalText,v=Xi.processStyledBidirectionalText;if(g&&1===_.sections.length){y=[];for(var x=0,b=g(_.toString(),fl(_,u,o,e,i,f,d));x<b.length;x+=1){var w=b[x],S=new ol;S.text=w,S.sections=_.sections;for(var E=0;E<w.length;E++)S.sectionIndex.push(0);y.push(S)}}else if(v){y=[];for(var T=0,I=v(_.text,_.sectionIndex,fl(_,u,o,e,i,f,d));T<I.length;T+=1){var A=I[T],z=new ol;z.text=A[0],z.sectionIndex=A[1],z.sections=_.sections,y.push(z)}}else y=function(t,e){for(var r=[],i=t.text,n=0,o=0,a=e;o<a.length;o+=1){var s=a[o];r.push(t.substring(n,s)),n=s}return n<i.length&&r.push(t.substring(n,i.length)),r}(_,fl(_,u,o,e,i,f,d));var C=[],k={positionedLines:C,text:_.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(t,e,r,i,n,o,a,s,l,u,c,p){for(var h=0,f=il,d=0,m=0,y="right"===s?1:"left"===s?0:.5,_=0,g=0,v=n;g<v.length;g+=1){var x=v[g];x.trim();var b=x.getMaxScale(),w=(b-1)*Ts,S={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=S;var E=S.positionedGlyphs,T=0;if(x.length()){for(var I=0;I<x.length();I++){var A=x.getSection(I),z=x.getSectionIndex(I),C=x.getCharCode(I),k=0,P=null,M=null,L=null,D=Ts,B=!(l===rl.horizontal||!c&&!ki(C)||c&&(sl[C]||(G=C,Ai.Arabic(G)||Ai["Arabic Supplement"](G)||Ai["Arabic Extended-A"](G)||Ai["Arabic Presentation Forms-A"](G)||Ai["Arabic Presentation Forms-B"](G))));if(A.imageName){var R=i[A.imageName];if(!R)continue;L=A.imageName,t.iconsInText=t.iconsInText||!0,M=R.paddedRect;var F=R.displaySize;A.scale=A.scale*Ts/p,P={width:F[0],height:F[1],left:Qs,top:-Ys,advance:B?F[1]:F[0]},k=w+(Ts-F[1]*A.scale),D=P.advance;var O=B?F[0]*A.scale-Ts*b:F[1]*A.scale-Ts*b;O>0&&O>T&&(T=O)}else{var U=r[A.fontStack],V=U&&U[C];if(V&&V.rect)M=V.rect,P=V.metrics;else{var N=e[A.fontStack],j=N&&N[C];if(!j)continue;P=j.metrics}k=(b-A.scale)*Ts}B?(t.verticalizable=!0,E.push({glyph:C,imageName:L,x:h,y:f+k,vertical:B,scale:A.scale,fontStack:A.fontStack,sectionIndex:z,metrics:P,rect:M}),h+=D*A.scale+u):(E.push({glyph:C,imageName:L,x:h,y:f+k,vertical:B,scale:A.scale,fontStack:A.fontStack,sectionIndex:z,metrics:P,rect:M}),h+=P.advance*A.scale+u)}if(0!==E.length){var q=h-u;d=Math.max(q,d),ml(E,0,E.length-1,y,T)}h=0;var Z=o*b+T;S.lineOffset=Math.max(T,w),f+=Z,m=Math.max(Z,m),++_}else f+=o,++_}var G,X=f-il,W=dl(a),K=W.horizontalAlign,H=W.verticalAlign;(function(t,e,r,i,n,o,a,s,l){var u,c=(e-r)*n;u=o!==a?-s*i-il:(-i*l+.5)*a;for(var p=0,h=t;p<h.length;p+=1)for(var f=0,d=h[p].positionedGlyphs;f<d.length;f+=1){var m=d[f];m.x+=c,m.y+=u}})(t.positionedLines,y,K,H,d,m,o,X,n.length),t.top+=-H*X,t.bottom=t.top+X,t.left+=-K*d,t.right=t.left+d}(k,e,r,i,y,a,s,l,p,u,h,m),!function(t){for(var e=0,r=C;e<r.length;e+=1)if(0!==r[e].positionedGlyphs.length)return!1;return!0}()&&k}ol.fromFeature=function(t,e){for(var r=new ol,i=0;i<t.sections.length;i++){var n=t.sections[i];n.image?r.addImageSection(n):r.addTextSection(n,e)}return r},ol.prototype.length=function(){return this.text.length},ol.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},ol.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},ol.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},ol.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",r=0;r<t.length;r++){var i=t.charCodeAt(r+1)||null,n=t.charCodeAt(r-1)||null;i&&Pi(i)&&!Es[t[r+1]]||n&&Pi(n)&&!Es[t[r-1]]||!Es[t[r]]?e+=t[r]:e+=Es[t[r]]}return e}(this.text)},ol.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&sl[this.text.charCodeAt(e)];e++)t++;for(var r=this.text.length,i=this.text.length-1;i>=0&&i>=t&&sl[this.text.charCodeAt(i)];i--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)},ol.prototype.substring=function(t,e){var r=new ol;return r.text=this.text.substring(t,e),r.sectionIndex=this.sectionIndex.slice(t,e),r.sections=this.sections,r},ol.prototype.toString=function(){return this.text},ol.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,r){return Math.max(e,t.sections[r].scale)},0)},ol.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(nl.forText(t.scale,t.fontStack||e));for(var r=this.sections.length-1,i=0;i<t.text.length;++i)this.sectionIndex.push(r)},ol.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(nl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},ol.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var sl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ll={};function ul(t,e,r,i,n,o){if(e.imageName){var a=i[e.imageName];return a?a.displaySize[0]*e.scale*Ts/o+n:0}var s=r[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+n:0}function cl(t,e,r,i){var n=Math.pow(t-e,2);return i?t<e?n/2:2*n:n+Math.abs(r)*r}function pl(t,e,r){var i=0;return 10===t&&(i-=1e4),r&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function hl(t,e,r,i,n,o){for(var a=null,s=cl(e,r,n,o),l=0,u=i;l<u.length;l+=1){var c=u[l],p=cl(e-c.x,r,n,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function fl(t,e,r,i,n,o,a){if("point"!==o)return[];if(!t)return[];for(var s,l=[],u=function(t,e,r,i,n,o){for(var a=0,s=0;s<t.length();s++){var l=t.getSection(s);a+=ul(t.getCharCode(s),l,i,n,e,o)}return a/Math.max(1,Math.ceil(a/r))}(t,e,r,i,n,a),c=t.text.indexOf("​")>=0,p=0,h=0;h<t.length();h++){var f=t.getSection(h),d=t.getCharCode(h);if(sl[d]||(p+=ul(d,f,i,n,e,a)),h<t.length()-1){var m=!((s=d)<11904||!(Ai["Bopomofo Extended"](s)||Ai.Bopomofo(s)||Ai["CJK Compatibility Forms"](s)||Ai["CJK Compatibility Ideographs"](s)||Ai["CJK Compatibility"](s)||Ai["CJK Radicals Supplement"](s)||Ai["CJK Strokes"](s)||Ai["CJK Symbols and Punctuation"](s)||Ai["CJK Unified Ideographs Extension A"](s)||Ai["CJK Unified Ideographs"](s)||Ai["Enclosed CJK Letters and Months"](s)||Ai["Halfwidth and Fullwidth Forms"](s)||Ai.Hiragana(s)||Ai["Ideographic Description Characters"](s)||Ai["Kangxi Radicals"](s)||Ai["Katakana Phonetic Extensions"](s)||Ai.Katakana(s)||Ai["Vertical Forms"](s)||Ai["Yi Radicals"](s)||Ai["Yi Syllables"](s)));(ll[d]||m||f.imageName)&&l.push(hl(h+1,p,u,l,pl(d,t.getCharCode(h+1),m&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(hl(t.length(),p,u,l,0,!0))}function dl(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function ml(t,e,r,i,n){if(i||n)for(var o=t[r],a=o.metrics.advance*o.scale,s=(t[r].x+a)*i,l=e;l<=r;l++)t[l].x-=s,t[l].y+=n}function yl(t,e,r,i,n,o){var a,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;a=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,p,h,f,d=e.left*o,m=e.right*o;"width"===r||"both"===r?(f=n[0]+d-i[3],p=n[0]+m+i[1]):p=(f=n[0]+(d+m-s.displaySize[0])/2)+s.displaySize[0];var y=e.top*o,_=e.bottom*o;return"height"===r||"both"===r?(c=n[1]+y-i[0],h=n[1]+_+i[2]):h=(c=n[1]+(y+_-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:p,bottom:h,left:f,collisionPadding:a}}ll[10]=!0,ll[32]=!0,ll[38]=!0,ll[40]=!0,ll[41]=!0,ll[43]=!0,ll[45]=!0,ll[47]=!0,ll[173]=!0,ll[183]=!0,ll[8203]=!0,ll[8208]=!0,ll[8211]=!0,ll[8231]=!0;var _l=function(t){function e(e,r,i,n){t.call(this,e,r),this.angle=i,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(o);bi("Anchor",_l);var gl=128;function vl(t,e){var r=e.expression;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Wi(t+1))};if("source"===r.kind)return{kind:"source"};for(var i=r.zoomStops,n=r.interpolationType,o=0;o<i.length&&i[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<i.length&&i[a]<t+1;)a++;a=Math.min(i.length-1,a);var s=i[o],l=i[a];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:r.evaluate(new Wi(s)),maxSize:r.evaluate(new Wi(l)),interpolationType:n}}function xl(t,e,r){var i=e.uSize,n=e.uSizeT,o=r.lowerSize,a=r.upperSize;return"source"===t.kind?o/gl:"composite"===t.kind?Te(o/gl,a/gl,n):i}function bl(t,e){var r=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,o=t.minZoom,a=t.maxZoom,s=n?c(Xe.interpolationFactor(n,e,o,a),0,1):0;"camera"===t.kind?i=Te(t.minSize,t.maxSize,s):r=s}return{uSizeT:r,uSize:i}}var wl=Object.freeze({__proto__:null,getSizeData:vl,evaluateSizeForFeature:xl,evaluateSizeForZoom:bl,SIZE_PACK_FACTOR:gl});function Sl(t,e,r,i,n){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-r/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<r/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>n)return!1;a++,s+=p.dist(h)}return!0}function El(t){for(var e=0,r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Tl(t,e,r){return t?.6*e*r:0}function Il(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Al(t,e,r,i,n,o){for(var a=Tl(r,n,o),s=Il(r,i)*o,l=0,u=El(t)/2,c=0;c<t.length-1;c++){var p=t[c],h=t[c+1],f=p.dist(h);if(l+f>u){var d=(u-l)/f,m=Te(p.x,h.x,d),y=Te(p.y,h.y,d),_=new _l(m,y,h.angleTo(p),c);return _._round(),!a||Sl(t,_,s,a,e)?_:void 0}l+=f}}function zl(t,e,r,i,n,o,a,s,l){var u=Tl(i,o,a),c=Il(i,n),p=c*a,h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-p<e/4&&(e=p+e/4),function t(e,r,i,n,o,a,s,l,u){for(var c=a/2,p=El(e),h=0,f=r-i,d=[],m=0;m<e.length-1;m++){for(var y=e[m],_=e[m+1],g=y.dist(_),v=_.angleTo(y);f+i<h+g;){var x=((f+=i)-h)/g,b=Te(y.x,_.x,x),w=Te(y.y,_.y,x);if(b>=0&&b<u&&w>=0&&w<u&&f-c>=0&&f+c<=p){var S=new _l(b,w,v,m);S._round(),n&&!Sl(e,S,a,n,o)||d.push(S)}}h+=g}return l||d.length||s||(d=t(e,h/2,i,n,o,a,s,!0,u)),d}(t,h?e/2*s%e:(c/2+2*o)*a*s%e,e,u,r,p,h,!1,l)}var Cl=Qs;function kl(t,e,r,i){var n=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2*Cl,u=a.paddedRect.h-2*Cl,c=t.right-t.left,p=t.bottom-t.top,h=a.stretchX||[[0,l]],f=a.stretchY||[[0,u]],d=function(t,e){return t+e[1]-e[0]},m=h.reduce(d,0),y=f.reduce(d,0),_=l-m,g=u-y,v=0,x=m,b=0,w=y,S=0,E=_,T=0,I=g;if(a.content&&i){var A=a.content;v=Pl(h,0,A[0]),b=Pl(f,0,A[1]),x=Pl(h,A[0],A[2]),w=Pl(f,A[1],A[3]),S=A[0]-v,T=A[1]-b,E=A[2]-A[0]-x,I=A[3]-A[1]-w}var z=function(i,n,l,u){var h=Ll(i.stretch-v,x,c,t.left),f=Dl(i.fixed-S,E,i.stretch,m),d=Ll(n.stretch-b,w,p,t.top),_=Dl(n.fixed-T,I,n.stretch,y),g=Ll(l.stretch-v,x,c,t.left),A=Dl(l.fixed-S,E,l.stretch,m),z=Ll(u.stretch-b,w,p,t.top),C=Dl(u.fixed-T,I,u.stretch,y),k=new o(h,d),P=new o(g,d),M=new o(g,z),L=new o(h,z),D=new o(f/s,_/s),B=new o(A/s,C/s),R=e*Math.PI/180;if(R){var F=Math.sin(R),O=Math.cos(R),U=[O,-F,F,O];k._matMult(U),P._matMult(U),L._matMult(U),M._matMult(U)}var V=i.stretch+i.fixed,N=l.stretch+l.fixed,j=n.stretch+n.fixed,q=u.stretch+u.fixed;return{tl:k,tr:P,bl:L,br:M,tex:{x:a.paddedRect.x+Cl+V,y:a.paddedRect.y+Cl+j,w:N-V,h:q-j},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:B,minFontScaleX:E/s/c,minFontScaleY:I/s/p,isSDF:r}};if(i&&(a.stretchX||a.stretchY))for(var C=Ml(h,_,m),k=Ml(f,g,y),P=0;P<C.length-1;P++)for(var M=C[P],L=C[P+1],D=0;D<k.length-1;D++){var B=k[D],R=k[D+1];n.push(z(M,B,L,R))}else n.push(z({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return n}function Pl(t,e,r){for(var i=0,n=0,o=t;n<o.length;n+=1){var a=o[n];i+=Math.max(e,Math.min(r,a[1]))-Math.max(e,Math.min(r,a[0]))}return i}function Ml(t,e,r){for(var i=[{fixed:-Cl,stretch:0}],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a[0],l=a[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return i.push({fixed:e+Cl,stretch:r}),i}function Ll(t,e,r,i){return t/e*r+i}function Dl(t,e,r,i){return t-e*r/i}var Bl=function(t,e,r,i,n,a,s,l,u,c,p,h){var f=s.top*l-u,d=s.bottom*l+u,m=s.left*l-u,y=s.right*l+u,_=s.collisionPadding;if(_&&(m-=_[0]*l,f-=_[1]*l,y+=_[2]*l,d+=_[3]*l),this.boxStartIndex=t.length,c){var g=d-f,v=y-m;g>0&&(g=Math.max(10*l,g),this._addLineCollisionCircles(t,e,r,r.segment,v,g,i,n,a,p))}else{if(h){var x=new o(m,f),b=new o(y,f),w=new o(m,d),S=new o(y,d),E=h*Math.PI/180;x._rotate(E),b._rotate(E),w._rotate(E),S._rotate(E),m=Math.min(x.x,b.x,w.x,S.x),y=Math.max(x.x,b.x,w.x,S.x),f=Math.min(x.y,b.y,w.y,S.y),d=Math.max(x.y,b.y,w.y,S.y)}t.emplaceBack(r.x,r.y,m,f,y,d,i,n,a,0,0)}this.boxEndIndex=t.length};Bl.prototype._addLineCollisionCircles=function(t,e,r,i,n,o,a,s,l,u){var c=o/2,p=Math.floor(n/c)||1,h=1+.4*Math.log(u)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,m=r,y=i+1,_=d,g=-n/2,v=g-n/4;do{if(--y<0){if(_>g)return;y=0;break}_-=e[y].dist(m),m=e[y]}while(_>v);for(var x=e[y].dist(e[y+1]),b=-f;b<p+f;b++){var w=b*c,S=g+w;if(w<0&&(S+=w),w>n&&(S+=w-n),!(S<_)){for(;_+x<S;){if(_+=x,++y+1>=e.length)return;x=e[y].dist(e[y+1])}var E=S-_,T=e[y],I=e[y+1].sub(T)._unit()._mult(E)._add(T)._round(),A=Math.abs(S-d)<c?0:.8*(S-d);t.emplaceBack(I.x,I.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,A)}}};var Rl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=Fl),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)};function Fl(t,e){return t<e?-1:t>e?1:0}function Ol(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);for(var i=1/0,n=1/0,a=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<i)&&(i=c.x),(!u||c.y<n)&&(n=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var p=a-i,h=s-n,f=Math.min(p,h),d=f/2,m=new Rl([],Ul);if(0===f)return new o(i,n);for(var y=i;y<a;y+=f)for(var _=n;_<s;_+=f)m.push(new Vl(y+d,_+d,d,t));for(var g=function(t){for(var e=0,r=0,i=0,n=t[0],o=0,a=n.length,s=a-1;o<a;s=o++){var l=n[o],u=n[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,i+=(l.y+u.y)*c,e+=3*c}return new Vl(r/e,i/e,0,t)}(t),v=m.length;m.length;){var x=m.pop();(x.d>g.d||!g.d)&&(g=x,r&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,v)),x.max-g.d<=e||(d=x.h/2,m.push(new Vl(x.p.x-d,x.p.y-d,d,t)),m.push(new Vl(x.p.x+d,x.p.y-d,d,t)),m.push(new Vl(x.p.x-d,x.p.y+d,d,t)),m.push(new Vl(x.p.x+d,x.p.y+d,d,t)),v+=4)}return r&&(console.log("num probes: "+v),console.log("best distance: "+g.d)),g.p}function Ul(t,e){return e.max-t.max}function Vl(t,e,r,i){this.p=new o(t,e),this.h=r,this.d=function(t,e){for(var r=!1,i=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(r=!r),i=Math.min(i,Po(t,u,c))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}Rl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Rl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Rl.prototype.peek=function(){return this.data[0]},Rl.prototype._up=function(t){for(var e=this.data,r=this.compare,i=e[t];t>0;){var n=t-1>>1,o=e[n];if(r(i,o)>=0)break;e[t]=o,t=n}e[t]=i},Rl.prototype._down=function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,n)>=0)break;e[t]=a,t=o}e[t]=n};var Nl=e(function(t){t.exports=function(t,e){var r,i,n,o,a,s,l,u;for(r=3&t.length,i=t.length-r,n=e,a=3432918353,s=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}}),jl=e(function(t){t.exports=function(t,e){for(var r,i=t.length,n=e^i,o=0;i>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:n^=(255&t.charCodeAt(o+2))<<16;case 2:n^=(255&t.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}}),ql=Nl,Zl=Nl,Gl=jl;ql.murmur3=Zl,ql.murmur2=Gl;var Xl=7,Wl=Number.POSITIVE_INFINITY;function Kl(t,e){return e[1]!==Wl?function(t,e,r){var i=0,n=0;switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":n=r-Xl;break;case"bottom-right":case"bottom-left":case"bottom":n=-r+Xl}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,n]}(t,e[0],e[1]):function(t,e){var r=0,i=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=n-Xl;break;case"bottom-right":case"bottom-left":i=-n+Xl;break;case"bottom":i=-e+Xl;break;case"top":i=e-Xl}switch(t){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=e;break;case"right":r=-e}return[r,i]}(t,e[0])}function Hl(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Yl=255,Jl=Yl*gl;function Ql(t,e,r,i,n,a,s,l,u,c,p,h,f,d){var m=function(t,e,r,i,n,a,s,l){for(var u=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[],p=0,h=e.positionedLines;p<h.length;p+=1)for(var f=h[p],d=0,m=f.positionedGlyphs;d<m.length;d+=1){var y=m[d];if(y.rect){var _=y.rect||{},g=Ys+1,v=!0,x=1,b=0,w=(n||l)&&y.vertical,S=y.metrics.advance*y.scale/2;if(l&&e.verticalizable){var E=(y.scale-1)*Ts,T=(Ts-y.metrics.width*y.scale)/2;b=f.lineOffset/2-(y.imageName?-T:E)}if(y.imageName){var I=s[y.imageName];v=I.sdf,x=I.pixelRatio,g=Qs/x}var A=n?[y.x+S,y.y]:[0,0],z=n?[0,0]:[y.x+S+r[0],y.y+r[1]-b],C=[0,0];w&&(C=z,z=[0,0]);var k=(y.metrics.left-g)*y.scale-S+z[0],P=(-y.metrics.top-g)*y.scale+z[1],M=k+_.w*y.scale/x,L=P+_.h*y.scale/x,D=new o(k,P),B=new o(M,P),R=new o(k,L),F=new o(M,L);if(w){var O=new o(-S,S-il),U=-Math.PI/2,V=Ts/2-S,N=y.imageName?V:0,j=new o(5-il-V,-N),q=new(Function.prototype.bind.apply(o,[null].concat(C)));D._rotateAround(U,O)._add(j)._add(q),B._rotateAround(U,O)._add(j)._add(q),R._rotateAround(U,O)._add(j)._add(q),F._rotateAround(U,O)._add(j)._add(q)}if(u){var Z=Math.sin(u),G=Math.cos(u),X=[G,-Z,Z,G];D._matMult(X),B._matMult(X),R._matMult(X),F._matMult(X)}var W=new o(0,0),K=new o(0,0);c.push({tl:D,tr:B,bl:R,br:F,tex:_,writingMode:e.writingMode,glyphOffset:A,sectionIndex:y.sectionIndex,isSDF:v,pixelOffsetTL:W,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,l,n,a,s,i,t.allowVerticalPlacement),y=t.textSizeData,_=null;"source"===y.kind?(_=[gl*n.layout.get("text-size").evaluate(s,{})])[0]>Jl&&S(t.layerIds[0]+': Value for "text-size" is >= '+Yl+'. Reduce your "text-size".'):"composite"===y.kind&&((_=[gl*d.compositeTextSizes[0].evaluate(s,{}),gl*d.compositeTextSizes[1].evaluate(s,{})])[0]>Jl||_[1]>Jl)&&S(t.layerIds[0]+': Value for "text-size" is >= '+Yl+'. Reduce your "text-size".'),t.addSymbols(t.text,m,_,l,a,s,c,e,u.lineStartIndex,u.lineLength,f);for(var g=0,v=p;g<v.length;g+=1)h[v[g]]=t.text.placedSymbolArray.length-1;return 4*m.length}function $l(t){for(var e in t)return t[e];return null}function tu(t,e,r,i){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;a>=0;a--)if(i.dist(o[a])<r)return!0}else n[e]=[];return n[e].push(i),!1}var eu=Ja.VectorTileFeature.types,ru=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function iu(t,e,r,i,n,o,a,s,l,u,c,p,h){var f=s?Math.min(Jl,Math.round(s[0])):0,d=s?Math.min(Jl,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(32*i),Math.round(32*n),o,a,(f<<1)+(l?1:0),d,16*u,16*c,256*p,256*h)}function nu(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function ou(t){for(var e=0,r=t.sections;e<r.length;e+=1)if(Di(r[e].text))return!0;return!1}var au=function(t){this.layoutVertexArray=new xn,this.indexArray=new Pn,this.programConfigurations=t,this.segments=new Hn,this.dynamicLayoutVertexArray=new bn,this.opacityVertexArray=new wn,this.placedSymbolArray=new Un};au.prototype.upload=function(t,e,r,i){r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,vs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ru,!0),this.opacityVertexBuffer.itemSize=1),(r||i)&&this.programConfigurations.upload(t)},au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},bi("SymbolBuffers",au);var su=function(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new Hn,this.collisionVertexArray=new Tn};su.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,xs.members,!0)},su.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},bi("CollisionBuffers",su);var lu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasPaintOverrides=!1,this.hasRTLText=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vl(this.zoom,e["text-size"]),this.iconSizeData=vl(this.zoom,e["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),n=r.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==i.constantOr(1);var o="viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&(r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")),"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map(function(t){return rl[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};lu.prototype.createArrays=function(){var t=this.layers[0].layout;this.hasPaintOverrides=hu.hasPaintOverrides(t),this.text=new au(new yo(gs.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new au(new yo(gs.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.textCollisionBox=new su(En,bs.members,Mn),this.iconCollisionBox=new su(En,bs.members,Mn),this.textCollisionCircle=new su(En,ws.members,Pn),this.iconCollisionCircle=new su(En,ws.members,Pn),this.glyphOffsetArray=new qn,this.lineVertexArray=new Gn,this.symbolInstances=new Nn},lu.prototype.calculateGlyphDependencies=function(t,e,r,i,n){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(r||i)&&n){var a=Es[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},lu.prototype.populate=function(t,e){var r=this.layers[0],i=r.layout,n=i.get("text-font"),o=i.get("text-field"),a=i.get("icon-image"),s=("constant"!==o.value.kind||o.value.value instanceof ee&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==n.value.kind||n.value.value.length>0),l=("constant"!==a.value.kind||!!a.value.value)&&Object.keys(a.parameters).length>0,u=i.get("symbol-sort-key");if(this.features=[],s||l){for(var c=e.iconDependencies,p=e.glyphDependencies,h=e.availableImages,f=new Wi(this.zoom),d=0,m=t;d<m.length;d+=1){var y=m[d],_=y.feature,g=y.index,v=y.sourceLayerIndex;if(r._featureFilter(f,_)){var x=void 0;if(s){var b=r.getValueAndResolveTokens("text-field",_,h),w=ee.factory(b);ou(w)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Zi()||this.hasRTLText&&Xi.isParsed())&&(x=Ss(w,r,_))}var S=void 0;if(l){var E=r.getValueAndResolveTokens("icon-image",_,h);S=E instanceof re?E:re.fromString(E)}if(x||S){var T=this.sortFeaturesByKey?u.evaluate(_,{}):void 0,I={text:x,icon:S,index:g,sourceLayerIndex:v,geometry:bo(_),properties:_.properties,type:eu[_.type],sortKey:T};if(void 0!==_.id&&(I.id=_.id),this.features.push(I),S&&(c[S.name]=!0),x){var A=n.evaluate(_,{}).join(","),z="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rl.vertical)>=0;for(var C=0,k=x.sections;C<k.length;C+=1){var P=k[C];if(P.image)c[P.image.name]=!0;else{var M=zi(x.toString()),L=P.fontStack||A,D=p[L]=p[L]||{};this.calculateGlyphDependencies(P.text,D,z,this.allowVerticalPlacement,M)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},r={},i=[],n=0;function o(e){i.push(t[e]),n++}function a(t,e,n){var o=r[t];return delete r[t],r[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(n[0]),o}function s(t,r,n){var o=e[r];return delete e[r],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=n[0].concat(i[o].geometry[0]),o}function l(t,e,r){var i=r?e[0][e[0].length-1]:e[0][0];return t+":"+i.x+":"+i.y}for(var u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.text?c.text.toString():null;if(h){var f=l(h,p),d=l(h,p,!0);if(f in r&&d in e&&r[f]!==e[d]){var m=s(f,d,p),y=a(f,d,i[m].geometry);delete e[f],delete r[d],r[l(h,i[y].geometry,!0)]=y,i[m].geometry=null}else f in r?a(f,d,p):d in e?s(f,d,p):(o(u),e[f]=n-1,r[d]=n-1)}else o(u)}return i.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},lu.prototype.update=function(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,r))},lu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},lu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},lu.prototype.upload=function(t){this.uploaded||(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},lu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},lu.prototype.addToLineVertexArray=function(t,e){var r=this.lineVertexArray.length;if(void 0!==t.segment){for(var i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a<e.length-1&&(i+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},lu.prototype.addSymbols=function(t,e,r,i,n,o,a,s,l,u,c){var p=this,h=t.indexArray,f=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,m=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),y=this.glyphOffsetArray.length,_=m.vertexLength,g=this.allowVerticalPlacement&&a===rl.vertical?Math.PI/2:0,v=function(t){var e=t.tl,i=t.tr,n=t.bl,o=t.br,a=t.tex,l=t.pixelOffsetTL,u=t.pixelOffsetBR,c=t.minFontScaleX,y=t.minFontScaleY,_=m.vertexLength,v=t.glyphOffset[1];iu(f,s.x,s.y,e.x,v+e.y,a.x,a.y,r,t.isSDF,l.x,l.y,c,y),iu(f,s.x,s.y,i.x,v+i.y,a.x+a.w,a.y,r,t.isSDF,u.x,l.y,c,y),iu(f,s.x,s.y,n.x,v+n.y,a.x,a.y+a.h,r,t.isSDF,l.x,u.y,c,y),iu(f,s.x,s.y,o.x,v+o.y,a.x+a.w,a.y+a.h,r,t.isSDF,u.x,u.y,c,y),nu(d,s,g),h.emplaceBack(_,_+1,_+2),h.emplaceBack(_+1,_+2,_+3),m.vertexLength+=4,m.primitiveLength+=2,p.glyphOffsetArray.emplaceBack(t.glyphOffset[0])};if(o.text&&o.text.sections){var x=o.text.sections;if(this.hasPaintOverrides){for(var b,w=function(e,r){void 0===b||b===e&&!r||t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{},x[b]),b=e},S=0,E=e;S<E.length;S+=1){var T=E[S];w(T.sectionIndex,!1),v(T)}w(b,!0)}else{for(var I=0,A=e;I<A.length;I+=1)v(A[I]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{},x[0])}}else{for(var z=0,C=e;z<C.length;z+=1)v(C[z]);t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})}t.placedSymbolArray.emplaceBack(s.x,s.y,y,this.glyphOffsetArray.length-y,_,l,u,s.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],a,0,!1,0,c)},lu.prototype._addCollisionDebugVertex=function(t,e,r,i,n,o){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,i,n,Math.round(o.x),Math.round(o.y))},lu.prototype.addCollisionDebugVertices=function(t,e,r,i,n,a,s,l){var u=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=u.vertexLength,p=n.layoutVertexArray,h=n.collisionVertexArray,f=s.anchorX,d=s.anchorY;if(this._addCollisionDebugVertex(p,h,a,f,d,new o(t,e)),this._addCollisionDebugVertex(p,h,a,f,d,new o(r,e)),this._addCollisionDebugVertex(p,h,a,f,d,new o(r,i)),this._addCollisionDebugVertex(p,h,a,f,d,new o(t,i)),u.vertexLength+=4,l){var m=n.indexArray;m.emplaceBack(c,c+1,c+2),m.emplaceBack(c,c+2,c+3),u.primitiveLength+=2}else{var y=n.indexArray;y.emplaceBack(c,c+1),y.emplaceBack(c+1,c+2),y.emplaceBack(c+2,c+3),y.emplaceBack(c+3,c),u.primitiveLength+=4}},lu.prototype.addDebugCollisionBoxes=function(t,e,r,i){for(var n=t;n<e;n++){var o=this.collisionBoxArray.get(n),a=o.x1,s=o.y1,l=o.x2,u=o.y2,c=o.radius>0;this.addCollisionDebugVertices(a,s,l,u,c?i?this.textCollisionCircle:this.iconCollisionCircle:i?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,r,c)}},lu.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},lu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,r,i,n,o,a,s,l){for(var u={},c=e;c<r;c++){var p=t.get(c);if(0===p.radius){u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}u.textCircles||(u.textCircles=[],u.textFeatureIndex=p.featureIndex),u.textCircles.push(p.anchorPointX,p.anchorPointY,p.radius,p.signedDistanceFromAnchor,1)}for(var h=i;h<n;h++){var f=t.get(h);if(0===f.radius){u.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},u.verticalTextFeatureIndex=f.featureIndex;break}}for(var d=o;d<a;d++){var m=t.get(d);if(0===m.radius){u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}}for(var y=s;y<l;y++){var _=t.get(y);if(0===_.radius){u.verticalIconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},u.verticalIconFeatureIndex=_.featureIndex;break}}return u},lu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}},lu.prototype.hasTextData=function(){return this.text.segments.get().length>0},lu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},lu.prototype.hasTextCollisionBoxData=function(){return this.textCollisionBox.segments.get().length>0},lu.prototype.hasIconCollisionBoxData=function(){return this.iconCollisionBox.segments.get().length>0},lu.prototype.hasTextCollisionCircleData=function(){return this.textCollisionCircle.segments.get().length>0},lu.prototype.hasIconCollisionCircleData=function(){return this.iconCollisionCircle.segments.get().length>0},lu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var r=t.placedSymbolArray.get(e),i=r.vertexStartIndex+4*r.numGlyphs,n=r.vertexStartIndex;n<i;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},lu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),r=Math.cos(t),i=[],n=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);i.push(0|Math.round(e*s.anchorX+r*s.anchorY)),n.push(s.featureIndex)}return o.sort(function(t,e){return i[t]-i[e]||n[e]-n[t]}),o},lu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var r=0,i=this.symbolInstanceIndexes;r<i.length;r+=1){var n=i[r],o=this.symbolInstances.get(n);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t,r,i){t>=0&&i.indexOf(t)===r&&e.addIndicesForPlacedSymbol(e.text,t)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},bi("SymbolBucket",lu,{omit:["layers","collisionBoxArray","features","compareText"]}),lu.MAX_GLYPHS=65535,lu.addDynamicAttributes=nu;var uu=new ln({"symbol-placement":new rn(Ct.layout_symbol["symbol-placement"]),"symbol-spacing":new rn(Ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new rn(Ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nn(Ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new rn(Ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new rn(Ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new rn(Ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new rn(Ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new rn(Ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new nn(Ct.layout_symbol["icon-size"]),"icon-text-fit":new rn(Ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new rn(Ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new nn(Ct.layout_symbol["icon-image"]),"icon-rotate":new nn(Ct.layout_symbol["icon-rotate"]),"icon-padding":new rn(Ct.layout_symbol["icon-padding"]),"icon-keep-upright":new rn(Ct.layout_symbol["icon-keep-upright"]),"icon-offset":new nn(Ct.layout_symbol["icon-offset"]),"icon-anchor":new nn(Ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new rn(Ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new rn(Ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new rn(Ct.layout_symbol["text-rotation-alignment"]),"text-field":new nn(Ct.layout_symbol["text-field"]),"text-font":new nn(Ct.layout_symbol["text-font"]),"text-size":new nn(Ct.layout_symbol["text-size"]),"text-max-width":new nn(Ct.layout_symbol["text-max-width"]),"text-line-height":new rn(Ct.layout_symbol["text-line-height"]),"text-letter-spacing":new nn(Ct.layout_symbol["text-letter-spacing"]),"text-justify":new nn(Ct.layout_symbol["text-justify"]),"text-radial-offset":new nn(Ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new rn(Ct.layout_symbol["text-variable-anchor"]),"text-anchor":new nn(Ct.layout_symbol["text-anchor"]),"text-max-angle":new rn(Ct.layout_symbol["text-max-angle"]),"text-writing-mode":new rn(Ct.layout_symbol["text-writing-mode"]),"text-rotate":new nn(Ct.layout_symbol["text-rotate"]),"text-padding":new rn(Ct.layout_symbol["text-padding"]),"text-keep-upright":new rn(Ct.layout_symbol["text-keep-upright"]),"text-transform":new nn(Ct.layout_symbol["text-transform"]),"text-offset":new nn(Ct.layout_symbol["text-offset"]),"text-allow-overlap":new rn(Ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new rn(Ct.layout_symbol["text-ignore-placement"]),"text-optional":new rn(Ct.layout_symbol["text-optional"])}),cu={paint:new ln({"icon-opacity":new nn(Ct.paint_symbol["icon-opacity"]),"icon-color":new nn(Ct.paint_symbol["icon-color"]),"icon-halo-color":new nn(Ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new nn(Ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nn(Ct.paint_symbol["icon-halo-blur"]),"icon-translate":new rn(Ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new rn(Ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new nn(Ct.paint_symbol["text-opacity"]),"text-color":new nn(Ct.paint_symbol["text-color"],{runtimeType:Nt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new nn(Ct.paint_symbol["text-halo-color"]),"text-halo-width":new nn(Ct.paint_symbol["text-halo-width"]),"text-halo-blur":new nn(Ct.paint_symbol["text-halo-blur"]),"text-translate":new rn(Ct.paint_symbol["text-translate"]),"text-translate-anchor":new rn(Ct.paint_symbol["text-translate-anchor"])}),layout:uu},pu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ft,this.defaultValue=t};pu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},pu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},pu.prototype.possibleOutputs=function(){return[void 0]},pu.prototype.serialize=function(){return null},bi("FormatSectionOverride",pu,{omit:["defaultValue"]});var hu=function(t){function e(e){t.call(this,e,cu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e,r){if(t.prototype.recalculate.call(this,e,r),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var i=this.layout.get("text-writing-mode");if(i){for(var n=[],o=0,a=i;o<a.length;o+=1){var s=a[o];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,r){var i=this.layout.get(t).evaluate(e,{},r),n=this._unevaluatedLayout._values[t];return n.isDataDriven()||kr(n.value)||!i?i:function(t,e){return i.replace(/{([^{}]+)}/g,function(e,r){return r in t?String(t[r]):""})}(e.properties)},e.prototype.createBucket=function(t){return new lu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,r=cu.paint.overridableProperties;t<r.length;t+=1){var i=r[t];if(e.hasPaintOverride(this.layout,i)){var n,o=this.paint.get(i),a=new pu(o),s=new Cr(a,o.property.specification);n="constant"===o.value.kind||"source"===o.value.kind?new Mr("source",s):new Lr("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[i]=new tn(o.property,n,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,r,i){return!(!this.layout||r.isDataDriven()||i.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var r=t.get("text-field"),i=cu.paint.properties[e],n=!1,o=function(t){for(var e=0,r=t;e<r.length;e+=1){var o=r[e];if(i.overrides&&i.overrides.hasOverride(o))return void(n=!0)}};if("constant"===r.value.kind&&r.value.value instanceof ee)o(r.value.value.sections);else if("source"===r.value.kind){var a=function(t){if(!n)if(t instanceof ae&&ne(t.value)===Gt){var e=t.value;o(e.sections)}else t instanceof ce?o(t.sections):t.eachChild(a)},s=r.value;s._styleExpression&&a(s._styleExpression.expression)}return n},e.hasPaintOverrides=function(t){for(var r=0,i=cu.paint.overridableProperties;r<i.length;r+=1){var n=i[r];if(e.hasPaintOverride(t,n))return!0}return!1},e}(un),fu={paint:new ln({"background-color":new rn(Ct.paint_background["background-color"]),"background-pattern":new an(Ct.paint_background["background-pattern"]),"background-opacity":new rn(Ct.paint_background["background-opacity"])})},du=function(t){function e(e){t.call(this,e,fu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(un),mu={paint:new ln({"raster-opacity":new rn(Ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new rn(Ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new rn(Ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new rn(Ct.paint_raster["raster-brightness-max"]),"raster-saturation":new rn(Ct.paint_raster["raster-saturation"]),"raster-contrast":new rn(Ct.paint_raster["raster-contrast"]),"raster-resampling":new rn(Ct.paint_raster["raster-resampling"]),"raster-fade-duration":new rn(Ct.paint_raster["raster-fade-duration"])})},yu=function(t){function e(e){t.call(this,e,mu)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(un),_u=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(un),gu={circle:qo,heatmap:$o,hillshade:ea,fill:Na,"fill-extrusion":os,line:ys,symbol:hu,background:du,raster:yu},vu=self.HTMLImageElement,xu=self.HTMLCanvasElement,bu=self.HTMLVideoElement,wu=self.ImageData,Su=function(t,e,r,i){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,i)};Su.prototype.update=function(t,e,r){var i=t.width,n=t.height,o=!(this.size&&this.size[0]===i&&this.size[1]===n||r),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,n],t instanceof vu||t instanceof xu||t instanceof bu||t instanceof wu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=r||{x:0,y:0},u=l.x,c=l.y;t instanceof vu||t instanceof xu||t instanceof bu||t instanceof wu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,i,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Su.prototype.bind=function(t,e,r){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)},Su.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Su.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Eu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Eu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Eu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Tu=function(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},_(["receive","process"],this),this.invoker=new Eu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=I()?t:self};function Iu(t,e,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}Tu.prototype.send=function(t,e,r,i,n){var o=this;void 0===n&&(n=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[a]=r);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!r,targetMapId:i,mustQueue:n,sourceMapId:this.mapId,data:Ei(e,s)},s),{cancel:function(){r&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:o.mapId})}}},Tu.prototype.receive=function(t){var e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[r];var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i()}else I()||e.mustQueue?(this.tasks[r]=e,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,e)},Tu.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Tu.prototype.processTask=function(t,e){var r=this;if("<response>"===e.type){var i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Ti(e.error)):i(null,Ti(e.data)))}else{var n=!1,o=C(this.globalScope)?void 0:[],a=e.hasCallback?function(e,i){n=!0,delete r.cancelCallbacks[t],r.target.postMessage({id:t,type:"<response>",sourceMapId:r.mapId,error:e?Ei(e):null,data:Ei(i,o)},o)}:function(t){n=!0},s=null,l=Ti(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,a);else if(this.parent.getWorkerSource){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,a)}else a(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Tu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Au=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Au.prototype.setNorthEast=function(t){return this._ne=t instanceof zu?new zu(t.lng,t.lat):zu.convert(t),this},Au.prototype.setSouthWest=function(t){return this._sw=t instanceof zu?new zu(t.lng,t.lat):zu.convert(t),this},Au.prototype.extend=function(t){var e,r,i=this._sw,n=this._ne;if(t instanceof zu)e=t,r=t;else{if(!(t instanceof Au))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Au.convert(t)):this.extend(zu.convert(t)):this;if(e=t._sw,r=t._ne,!e||!r)return this}return i||n?(i.lng=Math.min(e.lng,i.lng),i.lat=Math.min(e.lat,i.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new zu(e.lng,e.lat),this._ne=new zu(r.lng,r.lat)),this},Au.prototype.getCenter=function(){return new zu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Au.prototype.getSouthWest=function(){return this._sw},Au.prototype.getNorthEast=function(){return this._ne},Au.prototype.getNorthWest=function(){return new zu(this.getWest(),this.getNorth())},Au.prototype.getSouthEast=function(){return new zu(this.getEast(),this.getSouth())},Au.prototype.getWest=function(){return this._sw.lng},Au.prototype.getSouth=function(){return this._sw.lat},Au.prototype.getEast=function(){return this._ne.lng},Au.prototype.getNorth=function(){return this._ne.lat},Au.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Au.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Au.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Au.prototype.contains=function(t){var e=zu.convert(t),r=e.lng,i=e.lat,n=this._sw.lat<=i&&i<=this._ne.lat,o=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=r&&r>=this._ne.lng),n&&o},Au.convert=function(t){return!t||t instanceof Au?t:new Au(t)};var zu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};zu.prototype.wrap=function(){return new zu(p(this.lng,-180,180),this.lat)},zu.prototype.toArray=function(){return[this.lng,this.lat]},zu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},zu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return new Au(new zu(this.lng-r,this.lat-e),new zu(this.lng+r,this.lat+e))},zu.convert=function(t){if(t instanceof zu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new zu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==r(t)&&null!==t)return new zu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cu=2*Math.PI*6378137;function ku(t){return Cu*Math.cos(t*Math.PI/180)}function Pu(t){return(180+t)/360}function Mu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Lu(t,e){return t/ku(e)}function Du(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}var Bu=function(t,e,r){void 0===r&&(r=0),this.x=+t,this.y=+e,this.z=+r};Bu.fromLngLat=function(t,e){void 0===e&&(e=0);var r=zu.convert(t);return new Bu(Pu(r.lng),Mu(r.lat),Lu(e,r.lat))},Bu.prototype.toLngLat=function(){return new zu(360*this.x-180,Du(this.y))},Bu.prototype.toAltitude=function(){return this.z*ku(Du(this.y))},Bu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Cu*(t=Du(this.y),1/Math.cos(t*Math.PI/180));var t};var Ru=function(t,e,r){this.z=t,this.x=e,this.y=r,this.key=Uu(0,t,e,r)};Ru.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ru.prototype.url=function(t,e){var r,i,n,o,a,s=(r=this.x,i=this.y,n=this.z,o=Iu(256*r,256*(i=Math.pow(2,n)-i-1),n),a=Iu(256*(r+1),256*(i+1),n),o[0]+","+o[1]+","+a[0]+","+a[1]),l=function(t,e,r){for(var i,n="",o=t;o>0;o--)n+=(e&(i=1<<o-1)?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Ru.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new o((t.x*e-this.x)*vo,(t.y*e-this.y)*vo)},Ru.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Fu=function(t,e){this.wrap=t,this.canonical=e,this.key=Uu(t,e.z,e.x,e.y)},Ou=function(t,e,r,i,n){this.overscaledZ=t,this.wrap=e,this.canonical=new Ru(r,+i,+n),this.key=Uu(e,t,i,n)};function Uu(t,e,r,i){(t*=2)<0&&(t=-1*t-1);var n=1<<e;return 32*(n*n*t+n*i+r)+e}Ou.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ou.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ou(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ou(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ou.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ou.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ou(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new Ou(e,this.wrap,e,r,i),new Ou(e,this.wrap,e,r+1,i),new Ou(e,this.wrap,e,r,i+1),new Ou(e,this.wrap,e,r+1,i+1)]},Ou.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ou.prototype.wrapped=function(){return new Ou(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ou.prototype.unwrapTo=function(t){return new Ou(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ou.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ou.prototype.toUnwrapped=function(){return new Fu(this.wrap,this.canonical)},Ou.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ou.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Bu(t.x-this.wrap,t.y))},bi("CanonicalTileID",Ru),bi("OverscaledTileID",Ou,{omit:["posMatrix"]});var Vu=function(t,e,r){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return S('"'+r+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var i=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=r||"mapbox";for(var n=0;n<i;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(i,n)]=this.data[this._idx(i-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,i)]=this.data[this._idx(n,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)]};Vu.prototype.get=function(t,e){var r=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])},Vu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Vu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Vu.prototype._unpackMapbox=function(t,e,r){return(256*t*256+256*e+r)/10-1e4},Vu.prototype._unpackTerrarium=function(t,e,r){return 256*t+e+r/256-32768},Vu.prototype.getPixels=function(){return new Yo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vu.prototype.backfillBorder=function(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var i=e*this.dim,n=e*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(e){case-1:i=n-1;break;case 1:n=i+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,l=-r*this.dim,u=o;u<a;u++)for(var c=i;c<n;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},bi("DEMData",Vu);var Nu=fn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ju=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r}};ju.prototype.encode=function(t){return this._stringToNumber[t]},ju.prototype.decode=function(t){return this._numberToString[t]};var qu=function(t,e,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=r,t._y=i,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Zu={geometry:{configurable:!0}};Zu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Zu.geometry.set=function(t){this._geometry=t},qu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(qu.prototype,Zu);var Gu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Gu.prototype.updateState=function(t,e,r){var i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},h(this.stateChanges[t][i],r),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==i&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][i])for(var o in this.deletedStates[t][i]={},this.state[t][i])r[o]||(this.deletedStates[t][i][o]=null);else for(var a in r)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][a]&&delete this.deletedStates[t][i][a]},Gu.prototype.removeFeatureState=function(t,e,r){if(null!==this.deletedStates[t]){var i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},r&&void 0!==e&&e>=0)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][r]=null);else if(void 0!==e&&e>=0)if(this.stateChanges[t]&&this.stateChanges[t][i])for(r in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][r]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}},Gu.prototype.getState=function(t,e){var r=String(e),i=this.state[t]||{},n=this.stateChanges[t]||{},o=h({},i[r],n[r]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var s in a)delete o[s]}return o},Gu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Gu.prototype.coalesceChanges=function(t,e){var r={};for(var i in this.stateChanges){this.state[i]=this.state[i]||{};var n={};for(var o in this.stateChanges[i])this.state[i][o]||(this.state[i][o]={}),h(this.state[i][o],this.stateChanges[i][o]),n[o]=this.state[i][o];r[i]=n}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,p=Object.keys(this.deletedStates[a][u]);c<p.length;c+=1){var f=p[c];delete this.state[a][u][f]}s[u]=this.state[a][u]}r[a]=r[a]||{},h(r[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(var d in t)t[d].setFeatureState(r,e)};var Xu=function(t,e,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new yi(vo,16,0),this.grid3D=new yi(vo,16,0),this.featureIndexArray=r||new Wn};function Wu(t){for(var e=1/0,r=1/0,i=-1/0,n=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),n=Math.max(n,s.y)}return{minX:e,minY:r,maxX:i,maxY:n}}function Ku(t,e){return e-t}Xu.prototype.insert=function(t,e,r,i,n,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<vo&&c[1]<vo&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Xu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ja.VectorTile(new zs(this.rawTileData)).layers,this.sourceLayerCoder=new ju(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Xu.prototype.query=function(t,e,r){var i=this;this.loadVTLayers();for(var n=t.params||{},a=vo/t.tileSize/t.scale,s=Zr(n.filter),l=t.queryGeometry,u=t.queryPadding*a,c=Wu(l),p=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),h=Wu(t.cameraQueryGeometry),f=0,d=this.grid3D.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u,function(e,r,i,n){return function(t,e,r,i,n){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&r<=l.y&&i>=l.x&&n>=l.y)return!0}var u=[new o(e,r),new o(e,n),new o(i,n),new o(i,r)];if(t.length>2)for(var c=0,p=u;c<p.length;c+=1)if(Lo(t,p[c]))return!0;for(var h=0;h<t.length-1;h++)if(Do(t[h],t[h+1],u))return!0;return!1}(t.cameraQueryGeometry,e-u,r-u,i+u,n+u)});f<d.length;f+=1){var m=d[f];p.push(m)}p.sort(Ku);for(var y,_={},g=function(o){var u=p[o];if(u!==y){y=u;var c=i.featureIndexArray.get(u),h=null;i.loadMatchingFeature(_,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,n.layers,e,function(e,n){h||(h=bo(e));var o={};return e.id&&(o=r.getState(n.sourceLayer||"_geojsonTileLayer",e.id)),n.queryIntersectsFeature(l,e,o,h,i.z,t.transform,a,t.pixelPosMatrix)})}},v=0;v<p.length;v++)g(v);return _},Xu.prototype.loadMatchingFeature=function(t,e,r,i,n,o,a,s){var l=this.bucketLayerIDs[e];if(!o||function(t,e){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>=0)return!0;return!1}(o,l)){var u=this.sourceLayerCoder.decode(r),c=this.vtLayers[u].feature(i);if(n(new Wi(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var h=l[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f){var d=!s||s(c,f);if(d){var m=new qu(c,this.z,this.x,this.y);m.layer=f.serialize();var y=t[h];void 0===y&&(y=t[h]=[]),y.push({featureIndex:i,feature:m,intersectionZ:d})}}}}}},Xu.prototype.lookupSymbolFeatures=function(t,e,r,i,n,o){var a={};this.loadVTLayers();for(var s=Zr(i),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,e,r,c,s,n,o)}return a},Xu.prototype.hasLayer=function(t){for(var e=0,r=this.bucketLayerIDs;e<r.length;e+=1)for(var i=0,n=r[e];i<n.length;i+=1)if(t===n[i])return!0;return!1},bi("FeatureIndex",Xu,{omit:["rawTileData","sourceLayerCoder"]});var Hu=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Hu.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<O.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Hu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Hu.prototype.loadVectorData=function(t,e,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var i in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var r={};if(!e)return r;for(var i=function(){var t=o[n],i=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==i.length){t.layers=i,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return i.filter(function(e){return e.id===t})[0]}));for(var a=0,s=i;a<s.length;a+=1){var l=s[a];r[l.id]=t}}},n=0,o=t;n<o.length;n+=1)i();return r}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[i];if(n instanceof lu){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof lu&&a.hasRTLText){this.hasRTLText=!0,Xi.isLoading()||Xi.isLoaded()||"deferred"!==Zi()||Gi();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Fn},Hu.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Hu.prototype.getBucket=function(t){return this.buckets[t.id]},Hu.prototype.upload=function(t){for(var e in this.buckets){var r=this.buckets[e];r.uploadPending()&&r.upload(t)}var i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Su(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Su(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},Hu.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Hu.prototype.queryRenderedFeatures=function(t,e,r,i,n,o,a,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:n,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},Hu.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var r=this.latestFeatureIndex.loadVTLayers(),i=e?e.sourceLayer:"",n=r._geojsonTileLayer||r[i];if(n)for(var o=Zr(e&&e.filter),a=this.tileID.canonical,s=a.z,l=a.x,u=a.y,c={z:s,x:l,y:u},p=0;p<n.length;p++){var h=n.feature(p);if(o(new Wi(this.tileID.overscaledZ),h)){var f=new qu(h,s,l,u);f.tile=c,t.push(f)}}}},Hu.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer),delete this.mask},Hu.prototype.setMask=function(t,e){if(!s(this.mask,t)&&(this.clearMask(),this.mask=t,!s(t,{0:!0}))){var r=new yn,i=new Pn;this.segments=new Hn,this.segments.prepareSegment(0,r,i);for(var n=Object.keys(t),a=0;a<n.length;a++){var l=t[+n[a]],u=vo>>l.z,c=new o(l.x*u,l.y*u),p=new o(c.x+u,c.y+u),h=this.segments.prepareSegment(4,r,i);r.emplaceBack(c.x,c.y,c.x,c.y),r.emplaceBack(p.x,c.y,p.x,c.y),r.emplaceBack(c.x,p.y,c.x,p.y),r.emplaceBack(p.x,p.y,p.x,p.y);var f=h.vertexLength;i.emplaceBack(f,f+1,f+2),i.emplaceBack(f+1,f+2,f+3),h.vertexLength+=4,h.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(r,Nu.members),this.maskedIndexBuffer=e.createIndexBuffer(i)}},Hu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Hu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Hu.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var r=A(t.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var i=Date.now(),n=!1;if(this.expirationTime>i)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=i+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Hu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Hu.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var r=this.latestFeatureIndex.loadVTLayers();for(var i in this.buckets){var n=this.buckets[i],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(n))))}}},Hu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Hu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()},Hu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Hu.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=O.now()+t},Hu.prototype.setDependencies=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1)r[n[i]]=!0;this.dependencies[t]=r},Hu.prototype.hasDependency=function(t,e){for(var r=0,i=t;r<i.length;r+=1){var n=i[r],o=this.dependencies[n];if(o)for(var a=0,s=e;a<s.length;a+=1)if(o[s[a]])return!0}return!1},t.Actor=Tu,t.AlphaImage=Ho,t.CanonicalTileID=Ru,t.CollisionBoxArray=Fn,t.Color=Qt,t.DEMData=Vu,t.DataConstantProperty=rn,t.DictionaryCoder=ju,t.EXTENT=vo,t.ErrorEvent=At,t.EvaluationParameters=Wi,t.Event=It,t.Evented=zt,t.FeatureIndex=Xu,t.FillBucket=Oa,t.FillExtrusionBucket=es,t.ImageAtlas=el,t.ImagePosition=$s,t.LineBucket=hs,t.LngLat=zu,t.LngLatBounds=Au,t.MercatorCoordinate=Bu,t.ONE_EM=Ts,t.OverscaledTileID=Ou,t.Point=o,t.Point$1=o,t.ProgramConfiguration=mo,t.Properties=ln,t.Protobuf=zs,t.RGBAImage=Yo,t.RequestManager=G,t.ResourceType=dt,t.SegmentVector=Hn,t.SourceFeatureState=Gu,t.StructArrayLayout1ui2=Ln,t.StructArrayLayout2i4=mn,t.StructArrayLayout2ui4=Mn,t.StructArrayLayout3ui6=Pn,t.StructArrayLayout4i8=yn,t.SymbolBucket=lu,t.Texture=Su,t.Tile=Hu,t.Transitionable=Yi,t.Uniform1f=eo,t.Uniform1i=to,t.Uniform2f=ro,t.Uniform3f=io,t.Uniform4f=no,t.UniformColor=oo,t.UniformMatrix4f=so,t.UnwrappedTileID=Fu,t.ValidationError=kt,t.WritingMode=rl,t.ZoomHistory=Ii,t.addDynamicAttributes=nu,t.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var i=t.length,n=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),n[a]=e,0==--i&&r(o,n)})})},t.bezier=l,t.bindAll=_,t.browser=O,t.cacheEntryPossiblyAdded=function(t){++ft>ut&&(t.getActor().send("enforceCacheSizeLimit",lt),ft=0)},t.clamp=c,t.clearTileCache=function(t){var e=self.caches.delete(st);t&&e.catch(t).then(function(){return t()})},t.clone=function(t){var e=new No(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=b,t.config=U,t.create=function(){var t=new No(16);return No!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new No(9);return No!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new No(4);return No!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Pr,t.createLayout=fn,t.createStyleLayer=function(t){return"custom"===t.type?new _u(t):new gu[t.type](t)},t.deepEqual=s,t.ease=u,t.emitValidationErrors=mi,t.endsWith=g,t.enforceCacheSizeLimit=function(t){pt(),tt&&tt.then(function(e){e.keys().then(function(r){for(var i=0;i<r.length-t;i++)e.delete(r[i])})})},t.evaluateSizeForFeature=xl,t.evaluateSizeForZoom=bl,t.evaluateVariableOffset=Kl,t.evented=qi,t.extend=h,t.featureFilter=Zr,t.filterObject=x,t.fromRotation=function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=dl,t.getAnchorJustification=Hl,t.getArrayBuffer=bt,t.getImage=St,t.getJSON=function(t,e){return xt(h(t,{type:"json"}),e)},t.getRTLTextPluginStatus=Zi,t.getReferrer=yt,t.getVideo=function(t,e){var r,i,n=self.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");r=t[o],i=void 0,(i=self.document.createElement("a")).href=r,(i.protocol!==self.document.location.protocol||i.host!==self.document.location.host)&&(n.crossOrigin="Anonymous"),a.src=t[o],n.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],m=e[13],y=e[14],_=e[15],g=r*s-i*a,v=r*l-n*a,x=r*u-o*a,b=i*l-n*s,w=i*u-o*s,S=n*u-o*l,E=c*m-p*d,T=c*y-h*d,I=c*_-f*d,A=p*y-h*m,z=p*_-f*m,C=h*_-f*y,k=g*C-v*z+x*A+b*I-w*T+S*E;return k?(k=1/k,t[0]=(s*C-l*z+u*A)*k,t[1]=(n*z-i*C-o*A)*k,t[2]=(m*S-y*w+_*b)*k,t[3]=(h*w-p*S-f*b)*k,t[4]=(l*I-a*C-u*T)*k,t[5]=(r*C-n*I+o*T)*k,t[6]=(y*x-d*S-_*v)*k,t[7]=(c*S-h*x+f*v)*k,t[8]=(a*z-s*I+u*E)*k,t[9]=(i*I-r*z-o*E)*k,t[10]=(d*w-m*x+_*g)*k,t[11]=(p*x-c*w-f*g)*k,t[12]=(s*T-a*A-l*E)*k,t[13]=(r*A-i*T+n*E)*k,t[14]=(m*v-d*b-y*g)*k,t[15]=(c*b-p*v+h*g)*k,t):null},t.isChar=Ai,t.isMapboxURL=X,t.keysDifference=function(t,e){var r=[];for(var i in t)i in e||r.push(i);return r},t.makeRequest=xt,t.mapObject=v,t.mercatorXfromLng=Pu,t.mercatorYfromLat=Mu,t.mercatorZfromAltitude=Lu,t.multiply=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],m=e[12],y=e[13],_=e[14],g=e[15],v=r[0],x=r[1],b=r[2],w=r[3];return t[0]=v*i+x*s+b*p+w*m,t[1]=v*n+x*l+b*h+w*y,t[2]=v*o+x*u+b*f+w*_,t[3]=v*a+x*c+b*d+w*g,v=r[4],x=r[5],b=r[6],w=r[7],t[4]=v*i+x*s+b*p+w*m,t[5]=v*n+x*l+b*h+w*y,t[6]=v*o+x*u+b*f+w*_,t[7]=v*a+x*c+b*d+w*g,v=r[8],x=r[9],b=r[10],w=r[11],t[8]=v*i+x*s+b*p+w*m,t[9]=v*n+x*l+b*h+w*y,t[10]=v*o+x*u+b*f+w*_,t[11]=v*a+x*c+b*d+w*g,v=r[12],x=r[13],b=r[14],w=r[15],t[12]=v*i+x*s+b*p+w*m,t[13]=v*n+x*l+b*h+w*y,t[14]=v*o+x*u+b*f+w*_,t[15]=v*a+x*c+b*d+w*g,t},t.mvt=Ja,t.number=Te,t.ortho=function(t,e,r,i,n,o,a){var s=1/(e-r),l=1/(i-n),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(a+o)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new zs(t).readFields(Ws,[])},t.pbf=zs,t.performSymbolLayout=function(t,e,r,i,n,a){t.createArrays();var s=512*t.overscaling;t.tilePixelRatio=vo/s,t.compareText={},t.iconsNeedLinear=!1;var l=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var p=t.textSizeData,h=p.minZoom,f=p.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Wi(h)),u["text-size"].possiblyEvaluate(new Wi(f))]}if("composite"===t.iconSizeData.kind){var d=t.iconSizeData,m=d.minZoom,y=d.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Wi(m)),u["icon-size"].possiblyEvaluate(new Wi(y))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new Wi(t.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new Wi(t.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new Wi(18));for(var _=l.get("text-line-height")*Ts,g="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),v=l.get("text-keep-upright"),x=l.get("text-size"),b=function(){var a=E[w],s=l.get("text-font").evaluate(a,{}).join(","),u=x.evaluate(a,{}),p=c.layoutTextSize.evaluate(a,{}),h=c.layoutIconSize.evaluate(a,{}),f={horizontal:{},vertical:void 0},d=a.text,m=[0,0];if(d){var y=d.toString(),b=l.get("text-letter-spacing").evaluate(a,{})*Ts,T=function(t){for(var e=0,r=y;e<r.length;e+=1)if(!Ci(r[e].charCodeAt(0)))return!1;return!0}()?b:0,I=l.get("text-anchor").evaluate(a,{}),A=l.get("text-variable-anchor");if(!A){var z=l.get("text-radial-offset").evaluate(a,{});m=z?Kl(I,[z*Ts,Wl]):l.get("text-offset").evaluate(a,{}).map(function(t){return t*Ts})}var C=g?"center":l.get("text-justify").evaluate(a,{}),k=l.get("symbol-placement"),P="point"===k?l.get("text-max-width").evaluate(a,{})*Ts:0,M=function(){t.allowVerticalPlacement&&zi(y)&&(f.vertical=al(d,e,r,n,s,P,_,I,"left",T,m,rl.vertical,!0,k,p,u))};if(!g&&A){for(var L="auto"===C?A.map(function(t){return Hl(t)}):[C],D=!1,B=0;B<L.length;B++){var R=L[B];if(!f.horizontal[R])if(D)f.horizontal[R]=f.horizontal[0];else{var F=al(d,e,r,n,s,P,_,"center",R,T,m,rl.horizontal,!1,k,p,u);F&&(f.horizontal[R]=F,D=1===F.positionedLines.length)}}M()}else{"auto"===C&&(C=Hl(I));var O=al(d,e,r,n,s,P,_,I,C,T,m,rl.horizontal,!1,k,p,u);O&&(f.horizontal[C]=O),M(),zi(y)&&g&&v&&(f.vertical=al(d,e,r,n,s,P,_,I,C,T,m,rl.vertical,!1,k,p,u))}}var U=void 0,V=!1;if(a.icon&&a.icon.name){var N=i[a.icon.name];N&&(U=function(t,e,r){var i=dl(r),n=i.horizontalAlign,o=i.verticalAlign,a=e[0],s=e[1],l=a-t.displaySize[0]*n,u=l+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}}(n[a.icon.name],l.get("icon-offset").evaluate(a,{}),l.get("icon-anchor").evaluate(a,{})),V=N.sdf,void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),N.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}var j=$l(f.horizontal)||f.vertical;t.iconsInText=!!j&&j.iconsInText,(j||U)&&function(t,e,r,i,n,a,s,l,u,c){var p=a.textMaxSize.evaluate(e,{});void 0===p&&(p=s);var h,f=t.layers[0].layout,d=f.get("icon-offset").evaluate(e,{}),m=$l(r.horizontal),y=s/24,_=t.tilePixelRatio*y,g=t.tilePixelRatio*p/24,v=t.tilePixelRatio*l,x=t.tilePixelRatio*f.get("symbol-spacing"),b=f.get("text-padding")*t.tilePixelRatio,w=f.get("icon-padding")*t.tilePixelRatio,E=f.get("text-max-angle")/180*Math.PI,T="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),I="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),A=f.get("symbol-placement"),z=x/2,C=f.get("icon-text-fit");i&&"none"!==C&&(t.allowVerticalPlacement&&r.vertical&&(h=yl(i,r.vertical,C,f.get("icon-text-fit-padding"),d,y)),m&&(i=yl(i,m,C,f.get("icon-text-fit-padding"),d,y)));var k=function(o,s){s.x<0||s.x>=vo||s.y<0||s.y>=vo||function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m,y,_,g,v,x,b,w){var E,T,I,A,z,C=t.addToLineVertexArray(e,r),k=0,P=0,M=0,L=0,D=-1,B=-1,R={},F=ql(""),O=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(O=(E=s.layout.get("text-offset").evaluate(x,{}).map(function(t){return t*Ts}))[0],U=E[1]):(O=s.layout.get("text-radial-offset").evaluate(x,{})*Ts,U=Wl),t.allowVerticalPlacement&&i.vertical){var V=s.layout.get("text-rotate").evaluate(x,{})+90,N=i.vertical;A=new Bl(l,r,e,u,c,p,N,h,f,d,t.overscaling,V),a&&(z=new Bl(l,r,e,u,c,p,a,y,_,d,t.overscaling,V))}if(n){var j=s.layout.get("icon-rotate").evaluate(x,{}),q="none"!==s.layout.get("icon-text-fit"),Z=kl(n,j,w,q),G=a?kl(a,j,w,q):void 0;I=new Bl(l,r,e,u,c,p,n,y,_,!1,t.overscaling,j),k=4*Z.length;var X=t.iconSizeData,W=null;"source"===X.kind?(W=[gl*s.layout.get("icon-size").evaluate(x,{})])[0]>Jl&&S(t.layerIds[0]+': Value for "icon-size" is >= '+Yl+'. Reduce your "icon-size".'):"composite"===X.kind&&((W=[gl*b.compositeIconSizes[0].evaluate(x,{}),gl*b.compositeIconSizes[1].evaluate(x,{})])[0]>Jl||W[1]>Jl)&&S(t.layerIds[0]+': Value for "icon-size" is >= '+Yl+'. Reduce your "icon-size".'),t.addSymbols(t.icon,Z,W,v,g,x,!1,e,C.lineStartIndex,C.lineLength,-1),D=t.icon.placedSymbolArray.length-1,G&&(P=4*G.length,t.addSymbols(t.icon,G,W,v,g,x,rl.vertical,e,C.lineStartIndex,C.lineLength,-1),B=t.icon.placedSymbolArray.length-1)}for(var K in i.horizontal){var H=i.horizontal[K];if(!T){F=ql(H.text);var Y=s.layout.get("text-rotate").evaluate(x,{});T=new Bl(l,r,e,u,c,p,H,h,f,d,t.overscaling,Y)}var J=1===H.positionedLines.length;if(M+=Ql(t,e,H,o,s,d,x,m,C,i.vertical?rl.horizontal:rl.horizontalOnly,J?Object.keys(i.horizontal):[K],R,D,b),J)break}i.vertical&&(L+=Ql(t,e,i.vertical,o,s,d,x,m,C,rl.vertical,["vertical"],R,B,b));var Q=T?T.boxStartIndex:t.collisionBoxArray.length,$=T?T.boxEndIndex:t.collisionBoxArray.length,tt=A?A.boxStartIndex:t.collisionBoxArray.length,et=A?A.boxEndIndex:t.collisionBoxArray.length,rt=I?I.boxStartIndex:t.collisionBoxArray.length,it=I?I.boxEndIndex:t.collisionBoxArray.length,nt=z?z.boxStartIndex:t.collisionBoxArray.length,ot=z?z.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=lu.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,R.right>=0?R.right:-1,R.center>=0?R.center:-1,R.left>=0?R.left:-1,R.vertical||-1,D,B,F,Q,$,tt,et,rt,it,nt,ot,u,M,L,k,P,0,h,O,U)}(t,s,o,r,i,n,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,_,b,T,u,v,w,I,d,e,a,c)};if("line"===A)for(var P=0,M=function(t,e,r,i,n){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<0&&h.x<0||(p.x<0?p=new o(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new o(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new o(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new o(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new o(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new o(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=n&&h.y>=n||(p.y>=n?p=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round():h.y>=n&&(h=new o(p.x+(h.x-p.x)*((n-p.y)/(h.y-p.y)),n)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(h)))))}return a}(e.geometry,0,0,vo,vo);P<M.length;P+=1)for(var L=M[P],D=0,B=zl(L,x,E,r.vertical||m,i,24,g,t.overscaling,vo);D<B.length;D+=1){var R=B[D];m&&tu(t,m.text,z,R)||k(L,R)}else if("line-center"===A)for(var F=0,O=e.geometry;F<O.length;F+=1){var U=O[F];if(U.length>1){var V=Al(U,E,r.vertical||m,i,24,g);V&&k(U,V)}}else if("Polygon"===e.type)for(var N=0,j=Da(e.geometry,0);N<j.length;N+=1){var q=j[N],Z=Ol(q,16);k(q[0],new _l(Z.x,Z.y,0))}else if("LineString"===e.type)for(var G=0,X=e.geometry;G<X.length;G+=1){var W=X[G];k(W,new _l(W[0].x,W[0].y,0))}else if("Point"===e.type)for(var K=0,H=e.geometry;K<H.length;K+=1)for(var Y=0,J=H[K];Y<J.length;Y+=1){var Q=J[Y];k([Q],new _l(Q.x,Q.y,0))}}(t,a,f,U,i,c,p,h,m,V)},w=0,E=t.features;w<E.length;w+=1)b();a&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,r,i,n){var o,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(o=1/(i-n),t[10]=(n+i)*o,t[14]=2*n*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){for(var r={},i=0;i<e.length;i++){var n=e[i];n in t&&(r[n]=t[n])}return r},t.plugin=Xi,t.polygonIntersectsPolygon=Eo,t.postMapLoadEvent=at,t.postTurnstileEvent=nt,t.potpack=Js,t.rasterBoundsAttributes=Nu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=bi,t.registerForPluginStateChange=function(t){return t({pluginStatus:Ui,pluginURL:Vi}),qi.on("pluginStateChange",t),t},t.rotate=function(t,e,r){var i=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(r),l=Math.cos(r);return t[0]=i*l+o*s,t[1]=n*l+a*s,t[2]=i*-s+o*l,t[3]=n*-s+a*l,t},t.rotateX=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+u*i,t[5]=a*n+c*i,t[6]=s*n+p*i,t[7]=l*n+h*i,t[8]=u*n-o*i,t[9]=c*n-a*i,t[10]=p*n-s*i,t[11]=h*n-l*i,t},t.rotateZ=function(t,e,r){var i=Math.sin(r),n=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+u*i,t[1]=a*n+c*i,t[2]=s*n+p*i,t[3]=l*n+h*i,t[4]=u*n-o*i,t[5]=c*n-a*i,t[6]=p*n-s*i,t[7]=h*n-l*i,t},t.scale=function(t,e,r){var i=r[0],n=r[1],o=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.setCacheLimits=function(t,e){lt=t,ut=e},t.setRTLTextPlugin=function(t,e,r){if(void 0===r&&(r=!1),Ui===Bi||Ui===Ri||Ui===Fi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vi=O.resolveURL(t),Ui=Bi,Oi=e,ji(),r||Gi()},t.sphericalToCartesian=function(t){var e=t[0],r=t[1],i=t[2];return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:e*Math.cos(r)*Math.sin(i),y:e*Math.sin(r)*Math.sin(i),z:e*Math.cos(i)}},t.styleSpec=Ct,t.symbolSize=wl,t.transformMat3=function(t,e,r){var i=e[0],n=e[1],o=e[2];return t[0]=i*r[0]+n*r[3]+o*r[6],t[1]=i*r[1]+n*r[4]+o*r[7],t[2]=i*r[2]+n*r[5]+o*r[8],t},t.transformMat4=jo,t.translate=function(t,e,r){var i,n,o,a,s,l,u,c,p,h,f,d,m=r[0],y=r[1],_=r[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*_+e[12],t[13]=e[1]*m+e[5]*y+e[9]*_+e[13],t[14]=e[2]*m+e[6]*y+e[10]*_+e[14],t[15]=e[3]*m+e[7]*y+e[11]*_+e[15]):(i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=i,t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=i*m+s*y+p*_+e[12],t[13]=n*m+l*y+h*_+e[13],t[14]=o*m+u*y+f*_+e[14],t[15]=a*m+c*y+d*_+e[15]),t},t.triggerPluginCompletionEvent=Ni,t.uniqueId=d,t.validateCustomStyleLayer=function(t){var e=[],r=t.id;return void 0===r&&e.push({message:"layers."+r+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+r+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+r+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=hi,t.validateStyle=pi,t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.vectorTile=Ja,t.version="1.6.1",t.warnOnce=S,t.webpSupported=V,t.window=self,t.wrap=p}),n(0,function(t){function e(t){var i=r(t);if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",o=0,a=t;o<a.length;o+=1)n+=e(a[o])+",";return n+"]"}for(var s=Object.keys(t).sort(),l="{",u=0;u<s.length;u++)l+=JSON.stringify(s[u])+":"+e(t[s[u]])+",";return l+"}"}function i(r){for(var i="",n=0,o=t.refProperties;n<o.length;n+=1)i+="/"+e(r[o[n]]);return i}var n=function(t){this.keyCache={},t&&this.replace(t)};n.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},n.prototype.update=function(e,r){for(var n=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=r;u<c.length;u+=1){var p=c[u];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,f=function(t,e){for(var r={},n=0;n<t.length;n++){var o=e&&e[t[n].id]||i(t[n]);e&&(e[t[n].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[n])}var s=[];for(var l in r)s.push(r[l]);return s}(t.values(this._layerConfigs),this.keyCache);h<f.length;h+=1){var d=f[h].map(function(t){return n._layers[t.id]}),m=d[0];if("none"!==m.visibility){var y=m.source||"",_=this.familiesBySource[y];_||(_=this.familiesBySource[y]={});var g=m.sourceLayer||"_geojsonTileLayer",v=_[g];v||(v=_[g]=[]),v.push(d)}}};var o=function(e){var r={},i=[];for(var n in e){var o=e[n],a=r[n]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};i.push(u),a[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(i),p=c.w,h=c.h,f=new t.AlphaImage({width:p||1,height:h||1});for(var d in e){var m=e[d];for(var y in m){var _=m[+y];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var g=r[d][y].rect;t.AlphaImage.copy(_.bitmap,f,{x:0,y:0},{x:g.x+1,y:g.y+1},_.bitmap)}}}this.image=f,this.positions=r};t.register("GlyphAtlas",o);var a=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function s(e,r,i){for(var n=new t.EvaluationParameters(r),o=0,a=e;o<a.length;o+=1)a[o].recalculate(n,i)}a.prototype.parse=function(e,r,i,n,a){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID);c.bucketLayerIDs=[];var p,h,f,d,m={},y={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},_=r.familiesBySource[this.source];for(var g in _){var v=e.layers[g];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=u.encode(g),b=[],w=0;w<v.length;w++){var S=v.feature(w);b.push({feature:S,index:w,sourceLayerIndex:x})}for(var E=0,T=_[g];E<T.length;E+=1){var I=T[E],A=I[0];A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(s(I,this.zoom,i),(m[A.id]=A.createBucket({index:c.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(b,y),c.bucketLayerIDs.push(I.map(function(t){return t.id})))}}}var z=t.mapObject(y.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(z).length?n.send("getGlyphs",{uid:this.uid,stacks:z},function(t,e){p||(p=t,h=e,P.call(l))}):h={};var C=Object.keys(y.iconDependencies);C.length?n.send("getImages",{icons:C,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){p||(p=t,f=e,P.call(l))}):f={};var k=Object.keys(y.patternDependencies);function P(){if(p)return a(p);if(h&&f&&d){var e=new o(h),r=new t.ImageAtlas(f,d);for(var n in m){var l=m[n];l instanceof t.SymbolBucket?(s(l.layers,this.zoom,i),t.performSymbolLayout(l,h,e.positions,f,r.iconPositions,this.showCollisionBoxes)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(s(l.layers,this.zoom,i),l.addFeatures(y,r.patternPositions))}this.status="done",a(null,{buckets:t.values(m).filter(function(t){return!t.isEmpty()}),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:r,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}k.length?n.send("getImages",{icons:k,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){p||(p=t,d=e,P.call(l))}):d={},P.call(this)};var l="undefined"!=typeof performance,u={getEntriesByName:function(t){return!!(l&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(l&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,r){return!!(l&&performance&&performance.measure)&&performance.measure(t,e,r)},clearMarks:function(t){return!!(l&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(l&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},c=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},u.mark(this._marks.start)};function p(e,r){var i=t.getArrayBuffer(e.request,function(e,i,n,o){e?r(e):i&&r(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(i)),rawData:i,cacheControl:n,expires:o})});return function(){i.cancel(),r()}}c.prototype.finish=function(){u.mark(this._marks.end);var t=u.getEntriesByName(this._marks.measure);return 0===t.length&&(u.measure(this._marks.measure,this._marks.start,this._marks.end),t=u.getEntriesByName(this._marks.measure),u.clearMarks(this._marks.start),u.clearMarks(this._marks.end),u.clearMeasures(this._marks.measure)),t},u.Performance=c;var h=function(t,e,r,i){this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=i||p,this.loading={},this.loaded={}};h.prototype.loadTile=function(e,r){var i=this,n=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new u.Performance(e.request),s=this.loading[n]=new a(e);s.abort=this.loadVectorData(e,function(e,a){if(delete i.loading[n],e||!a)return s.status="done",i.loaded[n]=s,r(e);var l=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,i.layerIndex,i.availableImages,i.actor,function(e,i){if(e||!i)return r(e);r(null,t.extend({rawTileData:l.slice(0)},i,u,c))}),i.loaded=i.loaded||{},i.loaded[n]=s})},h.prototype.reloadTile=function(t,e){var r=this,i=this.loaded,n=t.uid,o=this;if(i&&i[n]){var a=i[n];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,i){var n=a.reloadCallback;n&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,r.availableImages,o.actor,n)),e(t,i)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},h.prototype.abortTile=function(t,e){var r=this.loading,i=t.uid;r&&r[i]&&r[i].abort&&(r[i].abort(),delete r[i]),e()},h.prototype.removeTile=function(t,e){var r=this.loaded,i=t.uid;r&&r[i]&&delete r[i],e()};var f=function(){this.loaded={}};f.prototype.loadTile=function(e,r){var i=e.uid,n=e.encoding,o=e.rawImageData,a=new t.DEMData(i,o,n);this.loaded=this.loaded||{},this.loaded[i]=a,r(null,a)},f.prototype.removeTile=function(t){var e=this.loaded,r=t.uid;e&&e[r]&&delete e[r]};var d={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function m(t){var e=0;if(t&&t.length>0){e+=Math.abs(y(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(y(t[r]))}return e}function y(t){var e,r,i,n,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(i=l-2,n=l-1,o=0):a===l-1?(i=l-1,n=0,o=1):(i=a,n=a+1,o=a+2),e=t[i],r=t[n],s+=(_(t[o][0])-_(e[0]))*Math.sin(_(r[1]));s=s*d.RADIUS*d.RADIUS/2}return s}function _(t){return t*Math.PI/180}var g={geometry:function t(e){var r,i=0;switch(e.type){case"Polygon":return m(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)i+=m(e.coordinates[r]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)i+=t(e.geometries[r]);return i}},ring:y};function v(t,e){return function(r){return t(r,e)}}function x(t,e){e=!!e,t[0]=b(t[0],e);for(var r=1;r<t.length;r++)t[r]=b(t[r],!e);return t}function b(t,e){return function(t){return g.ring(t)>=0}(t)===e?t:t.reverse()}var w=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,S=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};S.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],r=0,i=this._feature.geometry;r<i.length;r+=1){var n=i[r];e.push([new t.Point$1(n[0],n[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new t.Point$1(p[0],p[1]))}o.push(l)}return o},S.prototype.toGeoJSON=function(t,e,r){return w.call(this,t,e,r)};var E=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};E.prototype.feature=function(t){return new S(this._features[t])};var T=t.vectorTile.VectorTileFeature,I=A;function A(t,e){this.options=e||{},this.features=t,this.length=t.length}function z(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}A.prototype.feature=function(t){return new z(this.features[t],this.options.extent)},z.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var r=0;r<e.length;r++){for(var i=e[r],n=[],o=0;o<i.length;o++)n.push(new t.Point$1(i[o][0],i[o][1]));this.geometry.push(n)}return this.geometry},z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.y)}return[e,i,r,n]},z.prototype.toGeoJSON=T.prototype.toGeoJSON;var C=M,k=M,P=I;function M(e){var r=new t.pbf;return function(t,e){for(var r in t.layers)e.writeMessage(3,L,t.layers[r])}(e,r),r.finish()}function L(t,e){var r;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)i.feature=t.feature(r),e.writeMessage(2,D,i);var n=i.keys;for(r=0;r<n.length;r++)e.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)e.writeMessage(4,U,o[r])}function D(t,e){var r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,B,t),e.writeVarintField(3,r.type),e.writeMessage(4,O,r)}function B(t,e){var i=t.feature,n=t.keys,o=t.values,a=t.keycache,s=t.valuecache;for(var l in i.properties){var u=a[l];void 0===u&&(n.push(l),u=n.length-1,a[l]=u),e.writeVarint(u);var c=i.properties[l],p=r(c);"string"!==p&&"boolean"!==p&&"number"!==p&&(c=JSON.stringify(c));var h=p+":"+c,f=s[h];void 0===f&&(o.push(c),f=o.length-1,s[h]=f),e.writeVarint(f)}}function R(t,e){return(e<<3)+(7&t)}function F(t){return t<<1^t>>31}function O(t,e){for(var r=t.loadGeometry(),i=t.type,n=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===i&&(u=l.length),e.writeVarint(R(1,u));for(var c=3===i?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==i&&e.writeVarint(R(2,c-1));var h=l[p].x-n,f=l[p].y-o;e.writeVarint(F(h)),e.writeVarint(F(f)),n+=h,o+=f}3===i&&e.writeVarint(R(7,1))}}function U(t,e){var i=r(t);"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function V(t,e,r,i){N(t,r,i),N(e,2*r,2*i),N(e,2*r+1,2*i+1)}function N(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function j(t,e,r,i){var n=t-r,o=e-i;return n*n+o*o}C.fromVectorTileJs=k,C.fromGeojsonVt=function(t,e){e=e||{};var r={};for(var i in t)r[i]=new I(t[i].features,e),r[i].name=i,r[i].version=e.version,r[i].extent=e.extent;return M({layers:r})},C.GeoJSONWrapper=P;var q=function(t){return t[0]},Z=function(t){return t[1]},G=function(t,e,r,i,n){void 0===e&&(e=q),void 0===r&&(r=Z),void 0===i&&(i=64),void 0===n&&(n=Float64Array),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new n(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=r(t[l]);!function t(e,r,i,n,o,a){if(!(o-n<=i)){var s=n+o>>1;!function t(e,r,i,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,l=i-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,r,i,Math.max(n,Math.floor(i-l*c/s+p)),Math.min(o,Math.floor(i+(s-l)*c/s+p)),a)}var h=r[2*i+a],f=n,d=o;for(V(e,r,n,i),r[2*o+a]>h&&V(e,r,n,o);f<d;){for(V(e,r,f,d),f++,d--;r[2*f+a]<h;)f++;for(;r[2*d+a]>h;)d--}r[2*n+a]===h?V(e,r,n,d):V(e,r,++d,o),d<=i&&(n=d+1),i<=d&&(o=d-1)}}(e,r,s,n,o,a%2),t(e,r,i,n,s-1,a+1),t(e,r,i,s+1,o,a+1)}}(a,s,i,0,a.length-1,0)};G.prototype.range=function(t,e,r,i){return function(t,e,r,i,n,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),f=u.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],l=e[2*d+1],s>=r&&s<=n&&l>=i&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+h)/2);s=e[2*m],l=e[2*m+1],s>=r&&s<=n&&l>=i&&l<=o&&c.push(t[m]);var y=(p+1)%2;(0===p?r<=s:i<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===p?n>=s:o>=l)&&(u.push(m+1),u.push(h),u.push(y))}}return c}(this.ids,this.coords,t,e,r,i,this.nodeSize)},G.prototype.within=function(t,e,r){return function(t,e,r,i,n,o){for(var a=[0,t.length-1,0],s=[],l=n*n;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)j(e[2*h],e[2*h+1],r,i)<=l&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],m=e[2*f+1];j(d,m,r,i)<=l&&s.push(t[f]);var y=(u+1)%2;(0===u?r-n<=d:i-n<=m)&&(a.push(p),a.push(f-1),a.push(y)),(0===u?r+n>=d:i+n>=m)&&(a.push(f+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,r,this.nodeSize)};var X={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},W=function(t){this.options=tt(Object.create(X),t),this.trees=new Array(this.options.maxZoom+1)};function K(t,e,r,i,n){return{x:t,y:e,zoom:1/0,id:r,parentId:-1,numPoints:i,properties:n}}function H(t,e){var r=t.geometry.coordinates,i=r[0],n=r[1];return{x:Q(i),y:$(n),zoom:1/0,index:e,parentId:-1}}function Y(t){return{type:"Feature",id:t.id,properties:J(t),geometry:{type:"Point",coordinates:[(i=t.x,360*(i-.5)),(e=t.y,r=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var e,r,i}function J(t){var e=t.numPoints,r=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return tt(tt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:r})}function Q(t){return t/360+.5}function $(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function tt(t,e){for(var r in e)t[r]=e[r];return t}function et(t){return t.x}function rt(t){return t.y}function it(t,e,r,i,n,o){var a=n-r,s=o-i;if(0!==a||0!==s){var l=((t-r)*a+(e-i)*s)/(a*a+s*s);l>1?(r=n,i=o):l>0&&(r+=a*l,i+=s*l)}return(a=t-r)*a+(s=e-i)*s}function nt(t,e,r,i){var n={id:void 0===t?null:t,type:e,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,r=t.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)ot(t,e);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<e.length;i++)ot(t,e[i]);else if("MultiPolygon"===r)for(i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)ot(t,e[i][n])}(n),n}function ot(t,e){for(var r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function at(t,e,r,i){if(e.geometry){var n=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=i||0),"Point"===o)st(n,s);else if("MultiPoint"===o)for(var u=0;u<n.length;u++)st(n[u],s);else if("LineString"===o)lt(n,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<n.length;u++)s=[],lt(n[u],s,a,!1),t.push(nt(l,"LineString",s,e.properties));return}ut(n,s,a,!1)}else if("Polygon"===o)ut(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)at(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<n.length;u++){var c=[];ut(n[u],c,a,!0),s.push(c)}}t.push(nt(l,o,s,e.properties))}}function st(t,e){e.push(ct(t[0])),e.push(pt(t[1])),e.push(0)}function lt(t,e,r,i){for(var n,o,a=0,s=0;s<t.length;s++){var l=ct(t[s][0]),u=pt(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=i?(n*u-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-o,2))),n=l,o=u}var c=e.length-3;e[2]=1,function t(e,r,i,n){for(var o,a=n,s=i-r>>1,l=i-r,u=e[r],c=e[r+1],p=e[i],h=e[i+1],f=r+3;f<i;f+=3){var d=it(e[f],e[f+1],u,c,p,h);if(d>a)o=f,a=d;else if(d===a){var m=Math.abs(f-s);m<l&&(o=f,l=m)}}a>n&&(o-r>3&&t(e,r,o,n),e[o+2]=a,i-o>3&&t(e,o,i,n))}(e,0,c,r),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function ut(t,e,r,i){for(var n=0;n<t.length;n++){var o=[];lt(t[n],o,r,i),e.push(o)}}function ct(t){return t/360+.5}function pt(t){var e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function ht(t,e,r,i,n,o,a,s){if(i/=e,o>=(r/=e)&&a<i)return t;if(a<r||o>=i)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],p=c.geometry,h=c.type,f=0===n?c.minX:c.minY,d=0===n?c.maxX:c.maxY;if(f>=r&&d<i)l.push(c);else if(!(d<r||f>=i)){var m=[];if("Point"===h||"MultiPoint"===h)ft(p,m,r,i,n);else if("LineString"===h)dt(p,m,r,i,n,!1,s.lineMetrics);else if("MultiLineString"===h)yt(p,m,r,i,n,!1);else if("Polygon"===h)yt(p,m,r,i,n,!0);else if("MultiPolygon"===h)for(var y=0;y<p.length;y++){var _=[];yt(p[y],_,r,i,n,!0),_.length&&m.push(_)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<m.length;y++)l.push(nt(c.id,h,m[y],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),l.push(nt(c.id,h,m,c.tags))}}}return l.length?l:null}function ft(t,e,r,i,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];a>=r&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function dt(t,e,r,i,n,o,a){for(var s,l,u=mt(t),c=0===n?gt:vt,p=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],m=t[h+2],y=t[h+3],_=t[h+4],g=0===n?f:d,v=0===n?y:_,x=!1;a&&(s=Math.sqrt(Math.pow(f-y,2)+Math.pow(d-_,2))),g<r?v>r&&(l=c(u,f,d,y,_,r),a&&(u.start=p+s*l)):g>i?v<i&&(l=c(u,f,d,y,_,i),a&&(u.start=p+s*l)):_t(u,f,d,m),v<r&&g>=r&&(l=c(u,f,d,y,_,r),x=!0),v>i&&g<=i&&(l=c(u,f,d,y,_,i),x=!0),!o&&x&&(a&&(u.end=p+s*l),e.push(u),u=mt(t)),a&&(p+=s)}var b=t.length-3;f=t[b],d=t[b+1],m=t[b+2],(g=0===n?f:d)>=r&&g<=i&&_t(u,f,d,m),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&_t(u,u[0],u[1],u[2]),u.length&&e.push(u)}function mt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function yt(t,e,r,i,n,o){for(var a=0;a<t.length;a++)dt(t[a],e,r,i,n,o,!1)}function _t(t,e,r,i){t.push(e),t.push(r),t.push(i)}function gt(t,e,r,i,n,o){var a=(o-e)/(i-e);return t.push(o),t.push(r+(n-r)*a),t.push(1),a}function vt(t,e,r,i,n,o){var a=(o-r)/(n-r);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function xt(t,e){for(var r=[],i=0;i<t.length;i++){var n,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=bt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(bt(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(bt(o.geometry[s][u],e));n.push(l)}r.push(nt(o.id,a,n,o.tags))}return r}function bt(t,e){var r=[];r.size=t.size,void 0!==t.start&&(r.start=t.start,r.end=t.end);for(var i=0;i<t.length;i+=3)r.push(t[i]+e,t[i+1],t[i+2]);return r}function wt(t,e){if(t.transformed)return t;var r,i,n,o=1<<t.z,a=t.x,s=t.y;for(r=0;r<t.features.length;r++){var l=t.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(St(u[i],u[i+1],e,o,a,s));else for(i=0;i<u.length;i++){var p=[];for(n=0;n<u[i].length;n+=2)p.push(St(u[i][n],u[i][n+1],e,o,a,s));l.geometry.push(p)}}return t.transformed=!0,t}function St(t,e,r,i,n,o){return[Math.round(r*(t*i-n)),Math.round(r*(e*i-o))]}function Et(t,e,r,i,n){for(var o=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Tt(a,t[s],o,n);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,p=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function Tt(t,e,r,i){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)It(a,n,t,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)It(a,n[s],t,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)It(a,u[s],t,r,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function It(t,e,r,i,n,o){var a=i*i;if(i>0&&e.size<(n?a:i))r.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(r.numSimplified++,s.push(e[l]),s.push(e[l+1])),r.numPoints++;n&&function(t,e){for(var r=0,i=0,n=t.length,o=n-2;i<n;o=i,i+=2)r+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(r>0===e)for(i=0,n=t.length;i<n/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[n-2-i],t[i+1]=t[n-1-i],t[n-2-i]=a,t[n-1-i]=s}}(s,o),t.push(s)}}function At(t,e){var r=(e=this.options=function(t,e){for(var r in e)t[r]=e[r];return t}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var r=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)at(r,t.features[i],e,i);else"Feature"===t.type?at(r,t,e):at(r,{geometry:t},e);return r}(t,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var r=e.buffer/e.extent,i=t,n=ht(t,1,-1-r,r,0,-1,2,e),o=ht(t,1,1-r,2+r,0,-1,2,e);return(n||o)&&(i=ht(t,1,-r,1+r,0,-1,2,e)||[],n&&(i=xt(n,1).concat(i)),o&&(i=i.concat(xt(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function zt(t,e,r){return 32*((1<<t)*r+e)+t}function Ct(t,e){var r=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return e(null,null);var n=new E(i.features),o=C(n);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:n,rawData:o.buffer})}W.prototype.load=function(t){var e=this.options,r=e.log,i=e.minZoom,n=e.maxZoom,o=e.nodeSize;r&&console.time("total time");var a="prepare "+t.length+" points";r&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(H(t[l],l));this.trees[n+1]=new G(s,et,rt,o,Float32Array),r&&console.timeEnd(a);for(var u=n;u>=i;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new G(s,et,rt,o,Float32Array),r&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return r&&console.timeEnd("total time"),this},W.prototype.getClusters=function(t,e){var r=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)r=-180,n=180;else if(r>n){var a=this.getClusters([r,i,180,o],e),s=this.getClusters([-180,i,n,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,p=l.range(Q(r),$(o),Q(n),$(i));c<p.length;c+=1){var h=p[c],f=l.points[h];u.push(f.numPoints?Y(f):this.points[f.index])}return u},W.prototype.getChildren=function(t){var e=this._getOriginId(t),r=this._getOriginZoom(t),i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);var o=n.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=[],l=0,u=n.within(o.x,o.y,a);l<u.length;l+=1){var c=u[l],p=n.points[c];p.parentId===t&&s.push(p.numPoints?Y(p):this.points[p.index])}if(0===s.length)throw new Error(i);return s},W.prototype.getLeaves=function(t,e,r){e=e||10,r=r||0;var i=[];return this._appendLeaves(i,t,e,r,0),i},W.prototype.getTile=function(t,e,r){var i=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,l=(r-s)/n,u=(r+1+s)/n,c={features:[]};return this._addTileFeatures(i.range((e-s)/n,l,(e+1+s)/n,u),i.points,e,r,n,c),0===e&&this._addTileFeatures(i.range(1-s/n,l,1,u),i.points,n,r,n,c),e===n-1&&this._addTileFeatures(i.range(0,l,s/n,u),i.points,-1,r,n,c),c.features.length?c:null},W.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var r=this.getChildren(t);if(e++,1!==r.length)break;t=r[0].properties.cluster_id}return e},W.prototype._appendLeaves=function(t,e,r,i,n){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?n+l.point_count<=i?n+=l.point_count:n=this._appendLeaves(t,l.cluster_id,r,i,n):n<i?n++:t.push(s),t.length===r)break}return n},W.prototype._addTileFeatures=function(t,e,r,i,n,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*n-r)),Math.round(this.options.extent*(l.y*n-i))]],tags:u?J(l):this.points[l.index].properties},p=void 0;u?p=l.id:this.options.generateId?p=l.index:this.points[l.index].id&&(p=this.points[l.index].id),void 0!==p&&(c.id=p),o.features.push(c)}},W.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},W.prototype._cluster=function(t,e){for(var r=[],i=this.options,n=i.radius,o=i.extent,a=i.reduce,s=n/(o*Math.pow(2,e)),l=0;l<t.length;l++){var u=t[l];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],p=c.within(u.x,u.y,s),h=u.numPoints||1,f=u.x*h,d=u.y*h,m=a&&h>1?this._map(u,!0):null,y=(l<<5)+(e+1)+this.points.length,_=0,g=p;_<g.length;_+=1){var v=g[_],x=c.points[v];if(!(x.zoom<=e)){x.zoom=e;var b=x.numPoints||1;f+=x.x*b,d+=x.y*b,h+=b,x.parentId=y,a&&(m||(m=this._map(u,!0)),a(m,this._map(x)))}}1===h?r.push(u):(u.parentId=y,r.push(K(f/h,d/h,y,h,m)))}}return r},W.prototype._getOriginId=function(t){return t-this.points.length>>5},W.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},W.prototype._map=function(t,e){if(t.numPoints)return e?tt({},t.properties):t.properties;var r=this.points[t.index].properties,i=this.options.map(r);return e&&i===r?tt({},i):i},At.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},At.prototype.splitTile=function(t,e,r,i,n,o,a){for(var s=[t,e,r,i],l=this.options,u=l.debug;s.length;){i=s.pop(),r=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=zt(e,r,i),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=Et(t,e,r,i,l),this.tileCoords.push({z:e,x:r,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,i,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,n){if(e===l.maxZoom||e===n)continue;var d=1<<n-e;if(r!==Math.floor(o/d)||i!==Math.floor(a/d))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==t.length){u>1&&console.time("clipping");var m,y,_,g,v,x,b=.5*l.buffer/l.extent,w=.5-b,S=.5+b,E=1+b;m=y=_=g=null,v=ht(t,c,r-b,r+S,0,h.minX,h.maxX,l),x=ht(t,c,r+w,r+E,0,h.minX,h.maxX,l),t=null,v&&(m=ht(v,c,i-b,i+S,1,h.minY,h.maxY,l),y=ht(v,c,i+w,i+E,1,h.minY,h.maxY,l),v=null),x&&(_=ht(x,c,i-b,i+S,1,h.minY,h.maxY,l),g=ht(x,c,i+w,i+E,1,h.minY,h.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*r,2*i),s.push(y||[],e+1,2*r,2*i+1),s.push(_||[],e+1,2*r+1,2*i),s.push(g||[],e+1,2*r+1,2*i+1)}}},At.prototype.getTile=function(t,e,r){var i=this.options,n=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=zt(t,e=(e%a+a)%a,r);if(this.tiles[s])return wt(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",t,e,r);for(var l,u=t,c=e,p=r;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[zt(u,c,p)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,p),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,t,e,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?wt(this.tiles[s],n):null):null};var kt=function(e){function i(t,r,i,n){e.call(this,t,r,i,Ct),n&&(this.loadGeoJSON=n)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(n&&n.request&&n.request.collectResourceTiming)&&new u.Performance(n.request);this.loadGeoJSON(n,function(a,s){if(a||!s)return i(a);if("object"!=r(s))return i(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));!function t(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(v(t,r)),e;case"GeometryCollection":return e.geometries=e.geometries.map(v(t,r)),e;case"Feature":return e.geometry=t(e.geometry,r),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=x(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(v(x,e))),t}(e,r);default:return e}}(s,!0);try{e._geoJSONIndex=n.cluster?new W(function(e){var r=e.superclusterOptions,i=e.clusterProperties;if(!i||!r)return r;for(var n={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i),u=0,c=l;u<c.length;u+=1){var p=c[u],h=i[p],f=h[0],d=h[1],m=t.createExpression(d),y=t.createExpression("string"==typeof f?[f,["accumulated"],["get",p]]:f);n[p]=m.value,o[p]=y.value}return r.map=function(t){s.properties=t;for(var e={},r=0,i=l;r<i.length;r+=1){var o=i[r];e[o]=n[o].evaluate(a,s)}return e},r.reduce=function(t,e){s.properties=e;for(var r=0,i=l;r<i.length;r+=1){var n=i[r];a.accumulated=t[n],t[n]=o[n].evaluate(a,s)}},r}(n)).load(s.features):new At(s,n.geojsonVtOptions)}catch(a){return i(a)}e.loaded={};var l={};if(o){var u=o.finish();u&&(l.resourceTiming={},l.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}i(null,l)})}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(t,r){var i=this.loaded,n=t.uid;return i&&i[n]?e.prototype.reloadTile.call(this,t,r):this.loadTile(t,r)},i.prototype.loadGeoJSON=function(e,r){if(e.request)t.getJSON(e.request,r);else{if("string"!=typeof e.data)return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return r(null,JSON.parse(e.data))}catch(t){return r(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},i.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},i.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},i.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},i}(h),Pt=function(e){var r=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:h,geojson:kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(r.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');r.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Pt.prototype.setReferrer=function(t,e){this.referrer=e},Pt.prototype.setImages=function(t,e,r){this.availableImages[t]=e,r()},Pt.prototype.setLayers=function(t,e,r){this.getLayerIndex(t).replace(e),r()},Pt.prototype.updateLayers=function(t,e,r){this.getLayerIndex(t).update(e.layers,e.removedIds),r()},Pt.prototype.loadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).loadTile(e,r)},Pt.prototype.loadDEMTile=function(t,e,r){this.getDEMWorkerSource(t,e.source).loadTile(e,r)},Pt.prototype.reloadTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).reloadTile(e,r)},Pt.prototype.abortTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).abortTile(e,r)},Pt.prototype.removeTile=function(t,e,r){this.getWorkerSource(t,e.type,e.source).removeTile(e,r)},Pt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Pt.prototype.removeSource=function(t,e,r){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,r):r()}},Pt.prototype.loadWorkerSource=function(t,e,r){try{this.self.importScripts(e.url),r()}catch(t){r(t.toString())}},Pt.prototype.syncRTLPluginState=function(e,r,i){try{t.plugin.setState(r);var n=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=n){this.self.importScripts(n);var o=t.plugin.isParsed();i(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),o)}}catch(t){i(t.toString())}},Pt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},Pt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},Pt.prototype.getWorkerSource=function(t,e,r){var i=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][r]){var n={send:function(e,r,n){i.actor.send(e,r,n,t)}};this.workerSources[t][e][r]=new this.workerSourceTypes[e](n,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][r]},Pt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new f),this.demWorkerSources[t][e]},Pt.prototype.enforceCacheSizeLimit=function(e,r){t.enforceCacheSizeLimit(r)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Pt(t.window)),Pt}),n(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,r=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(r);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===r[t]&&(r[t]=function(t){var r=document.createElement("canvas"),i=Object.create(e.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,r.probablySupportsContext?r.probablySupportsContext("webgl",i)||r.probablySupportsContext("experimental-webgl",i):r.supportsContext?r.supportsContext("webgl",i)||r.supportsContext("experimental-webgl",i):r.getContext("webgl",i)||r.getContext("experimental-webgl",i)}(t)),r[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(e,r,i){var n=t.window.document.createElement(e);return void 0!==r&&(n.className=r),i&&i.appendChild(n),n},createNS:function(e,r){return t.window.document.createElementNS(e,r)}},n=t.window.document.documentElement.style;function o(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var a,s=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){n&&s&&(a=n[s],n[s]="none")},i.enableDrag=function(){n&&s&&(n[s]=a)};var l=o(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[l]=e};var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){u=!1}i.addEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&u?t.addEventListener(e,r,i):t.addEventListener(e,r,i.capture)},i.removeEventListener=function(t,e,r,i){void 0===i&&(i={}),"passive"in i&&u?t.removeEventListener(e,r,i):t.removeEventListener(e,r,i.capture)};var p=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",p,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",p,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",p,!0)},0)},i.mousePos=function(e,r){var i=e.getBoundingClientRect(),n=t.window.TouchEvent&&r instanceof t.window.TouchEvent?r.touches[0]:r;return new t.Point(n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop)},i.touchPos=function(e,r){for(var i=e.getBoundingClientRect(),n=[],o="touchend"===r.type?r.changedTouches:r.touches,a=0;a<o.length;a++)n.push(new t.Point(o[a].clientX-i.left-e.clientLeft,o[a].clientY-i.top-e.clientTop));return n},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var f=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,r=this.requestors;e<r.length;e+=1){var i=r[e],n=i.ids,o=i.callback;this._notify(n,o)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},r.prototype._validate=function(e,r){var i=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),i=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),i=!1),this._validateContent(r.content,r)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),i=!1),i},r.prototype._validateStretch=function(t,e){if(!t)return!0;for(var r=0,i=0,n=t;i<n.length;i+=1){var o=n[i];if(o[0]<r||o[1]<o[0]||e<o[1])return!1;r=o[1]}return!0},r.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},r.prototype.updateImage=function(t,e){var r=this.images[t];e.version=r.version+1,this.images[t]=e,this.updatedImages[t]=!0},r.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var r=!0;if(!this.isLoaded())for(var i=0,n=t;i<n.length;i+=1){var o=n[i];this.images[o]||(r=!1)}this.isLoaded()||r?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,r){for(var i={},n=0,o=e;n<o.length;n+=1){var a=o[n];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?i[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}r(null,i)},r.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},r.prototype.getPattern=function(e){var r=this.patterns[e],i=this.getImage(e);if(!i)return null;if(r&&r.position.version===i.version)return r.position;if(r)r.position.version=i.version;else{var n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},o=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var r in this.patterns)e.push(this.patterns[r].bin);var i=t.potpack(e),n=i.w,o=i.h,a=this.atlasImage;for(var s in a.resize({width:n||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,h=p.width,f=p.height;t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c},{width:h,height:f}),t.RGBAImage.copy(p,a,{x:0,y:f-1},{x:u,y:c-1},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c+f},{width:h,height:1}),t.RGBAImage.copy(p,a,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:f}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u+h,y:c},{width:1,height:f})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var n=this.images[i];h(n)&&this.updateImage(i,n)}}},r}(t.Evented),d=_,m=_,y=1e20;function _(t,e,r,i,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,r,i,n,o,a){for(var s=0;s<e;s++){for(var l=0;l<r;l++)i[l]=t[l*e+s];for(v(i,n,o,a,r),l=0;l<r;l++)t[l*e+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<e;s++)i[s]=t[l*e+s];for(v(i,n,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(n[s])}}function v(t,e,r,i,n){r[0]=0,i[0]=-y,i[1]=+y;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);s<=i[a];)a--,s=(t[o]+o*o-(t[r[a]]+r[a]*r[a]))/(2*o-2*r[a]);r[++a]=o,i[a]=s,i[a+1]=+y}for(o=0,a=0;o<n;o++){for(;i[a+1]<o;)a++;e[o]=(o-r[a])*(o-r[a])+t[r[a]]}}_.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),i=0;i<this.size*this.size;i++){var n=e.data[4*i+3]/255;this.gridOuter[i]=1===n?0:0===n?y:Math.pow(Math.max(0,.5-n),2),this.gridInner[i]=1===n?y:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var o=this.gridOuter[i]-this.gridInner[i];r[i]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return r},d.default=m;var x=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};x.prototype.setURL=function(t){this.url=t},x.prototype.getGlyphs=function(e,r){var i=this,n=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var l=s[a];n.push({stack:o,id:l})}t.asyncAll(n,function(t,e){var r=t.stack,n=t.id,o=i.entries[r];o||(o=i.entries[r]={glyphs:{},requests:{}});var a=o.glyphs[n];if(void 0===a){if(a=i._tinySDF(o,r,n))return o.glyphs[n]=a,void e(null,{stack:r,id:n,glyph:a});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=o.requests[s];l||(l=o.requests[s]=[],x.loadGlyphRange(r,s,i.url,i.requestManager,function(t,e){if(e)for(var r in e)i._doesCharSupportLocalGlyph(+r)||(o.glyphs[+r]=e[+r]);for(var n=0,a=l;n<a.length;n+=1)(0,a[n])(t,e);delete o.requests[s]})),l.push(function(t,i){t?e(t):i&&e(null,{stack:r,id:n,glyph:i[n]||null})})}}else e(null,{stack:r,id:n,glyph:a})},function(t,e){if(t)r(t);else if(e){for(var i={},n=0,o=e;n<o.length;n+=1){var a=o[n],s=a.stack,l=a.id,u=a.glyph;(i[s]||(i[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}r(null,i)}})},x.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},x.prototype._tinySDF=function(e,r,i){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(i)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(r)?a="900":/medium/i.test(r)?a="500":/light/i.test(r)&&(a="200"),o=e.tinySDF=new x.TinySDF(24,3,8,.25,n,a)}return{id:i,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},x.loadGlyphRange=function(e,r,i,n,o){var a=256*r,s=a+255,l=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,r){if(e)o(e);else if(r){for(var i={},n=0,a=t.parseGlyphPBF(r);n<a.length;n+=1){var s=a[n];i[s.id]=s}o(null,i)}})},x.TinySDF=d;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,r){return t.sphericalToCartesian(e.expression.evaluate(r))},b.prototype.interpolate=function(e,r,i){return{x:t.number(e.x,r.x,i),y:t.number(e.y,r.y,i),z:t.number(e.z,r.z,i)}};var w=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),S=function(e){function r(r){e.call(this),this._transitionable=new t.Transitionable(w),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getLight=function(){return this._transitionable.serialize()},r.prototype.setLight=function(e,r){if(void 0===r&&(r={}),!this._validate(t.validateLight,e,r))for(var i in e){var n=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),n):this._transitionable.setValue(i,n)}},r.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},r.prototype.hasTransition=function(){return this._transitioning.hasTransition()},r.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},r.prototype._validate=function(e,r,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},r}(t.Evented),E=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};E.prototype.getDash=function(t,e){var r=t.join(",")+String(e);return this.positions[r]||(this.positions[r]=this.addDash(t,e)),this.positions[r]},E.prototype.addDash=function(e,r){var i=r?7:0,n=2*i+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,l=s/2,u=e.length%2==1,c=-i;c<=i;c++)for(var p=this.nextRow+i+c,h=this.width*p,f=u?-e[e.length-1]:0,d=e[0],m=1,y=0;y<this.width;y++){for(;d<y/s;)f=d,d+=e[m],u&&m===e.length-1&&(d+=e[0]),m++;var _=Math.abs(y-f*s),g=Math.abs(y-d*s),v=Math.min(_,g),x=m%2==1,b=void 0;if(r){var w=i?c/i*(l+1):0;if(x){var S=l-Math.abs(w);b=Math.sqrt(v*v+S*S)}else b=l-Math.sqrt(v*v+w*w)}else b=(x?1:-1)*v;this.data[3+4*(h+y)]=Math.max(0,Math.min(255,b+128))}var E={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=n,this.dirty=!0,E},E.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var T=function e(r,i){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var n=this.workerPool.acquire(this.id),o=0;o<n.length;o++){var a=n[o],s=new e.Actor(a,i,this.id);s.name="Worker "+o,this.actors.push(s)}};function I(e,r,i){var n=function(n,o){if(n)return i(n);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),e.url&&(a.tiles=r.canonicalizeTileset(a,e.url)),i(null,a)}};return e.url?t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame(function(){return n(null,e)})}T.prototype.broadcast=function(e,r,i){i=i||function(){},t.asyncAll(this.actors,function(t,i){t.send(e,r,i)},i)},T.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},T.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},T.Actor=t.Actor;var A=function(e,r,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=i||24};A.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},A.prototype.contains=function(e){var r=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*r),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*r),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*r),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*r);return e.x>=i&&e.x<o&&e.y>=n&&e.y<a};var z=function(e){function r(r,i,n,o){if(e.call(this),this.id=r,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new A(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},r.prototype.loaded=function(){return this._loaded},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,null),n={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(i,n){return delete e.request,e.aborted?r(null):i&&404!==i.status?r(i):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),r(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=r:e.request=e.actor.send("reloadTile",n,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,o.bind(this)))},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},r.prototype.hasTransition=function(){return!1},r}(t.Evented),C=function(e){function r(r,i,n,o){e.call(this),this.id=r,this.dispatcher=n,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(r,i){e._tileJSONRequest=null,e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(t.extend(e,i),i.bounds&&(e.tileBounds=new A(i.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(i.tiles),t.postMapLoadEvent(i.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},r.prototype.loaded=function(){return this._loaded},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},r.prototype.serialize=function(){return t.extend({},this._options)},r.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},r.prototype.loadTile=function(e,r){var i=this,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,o){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(n)e.state="errored",r(n);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=i.map.painter.context,s=a.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(i.dispatcher),r(null)}})},r.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},r.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),t.clearMask(),e()},r.prototype.hasTransition=function(){return!1},r}(t.Evented),k=function(e){function r(r,i,n,o){e.call(this,r,i,n,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},r.prototype.loadTile=function(e,r){var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,n){if(delete e.request,e.aborted)e.state="unloaded",r(null);else if(i)e.state="errored",r(i);else if(n){this.map._refreshExpiredTiles&&e.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=t.browser.getImageData(n,1),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",a,function(t,i){t&&(e.state="errored",r(t)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.state="loaded",r(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},r.prototype._getNeighboringTiles=function(e){var r=e.canonical,i=Math.pow(2,r.z),n=(r.x-1+i)%i,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+i)%i,s=r.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,o,r.z,n,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l},r.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.clearMask(),t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},r}(C),P=function(e){function r(r,i,n,o){e.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(o),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties},i.workerOptions)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(r){if(r)e.fire(new t.ErrorEvent(r));else{var i={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(i.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",i))}})},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setData=function(e){var r=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)r.fire(new t.ErrorEvent(e));else{var i={dataType:"source",sourceDataType:"content"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(i.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new t.Event("data",i))}}),this},r.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},r.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},r.prototype.getClusterLeaves=function(t,e,r,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:r},i),this},r.prototype._updateWorkerData=function(e){var r=this;this._loaded=!1;var i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this.actor.send(this.type+".loadData",i,function(t,n){r._removed||n&&n.abandoned||(r._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[r.id]&&(r._resourceTiming=n.resourceTiming[r.id].slice(0)),r.actor.send(r.type+".coalesce",{source:i.source},null),e(t))})},r.prototype.loaded=function(){return this._loaded},r.prototype.loadTile=function(e,r){var i=this,n=e.actor?"reloadTile":"loadTile";e.actor=this.actor;var o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request=this.actor.send(n,o,function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?r(null):t?r(t):(e.loadVectorData(o,i.map.painter,"reloadTile"===n),r(null))})},r.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},r.prototype.unloadTile=function(t){t.unloadVectorData(),t.clearMask(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},r.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},r.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},r.prototype.hasTransition=function(){return!1},r}(t.Evented),M=function(e){function r(t,r,i,n){e.call(this),this.id=t,this.dispatcher=i,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(e,r){var i=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(n,o){i._loaded=!0,n?i.fire(new t.ErrorEvent(n)):o&&(i.image=o,e&&(i.coordinates=e),r&&r(),i._finishLoading())})},r.prototype.loaded=function(){return this._loaded},r.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},r.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},r.prototype.onAdd=function(t){this.map=t,this.load()},r.prototype.setCoordinates=function(e){var r=this;this.coordinates=e;var i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var r=1/0,i=1/0,n=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];r=Math.min(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.x),o=Math.max(o,l.y)}var u=n-r,c=o-i,p=Math.max(u,c),h=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),f=Math.pow(2,h);return new t.CanonicalTileID(h,Math.floor((r+n)/2*f),Math.floor((i+o)/2*f))}(i),this.minzoom=this.maxzoom=this.tileID.z;var n=i.map(function(t){return r.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},r.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},r.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return!1},r}(t.Evented),L=function(e){function r(t,r,i,n){e.call(this,t,r,i,n),this.roundZoom=!0,this.type="video",this.options=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){var e=this;this._loaded=!1;var r=this.options;this.urls=[];for(var i=0,n=r.urls;i<n.length;i+=1){var o=n[i];this.urls.push(this.map._requestManager.transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(r,i){e._loaded=!0,r?e.fire(new t.ErrorEvent(r)):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},r.prototype.pause=function(){this.video&&this.video.pause()},r.prototype.play=function(){this.video&&this.video.play()},r.prototype.seek=function(e){if(this.video){var r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+r.start(0)+" and "+r.end(0)+"-second mark."))):this.video.currentTime=e}},r.prototype.getVideo=function(){return this.video},r.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},r.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,r=e.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[i];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this.video&&!this.video.paused},r}(M),D=function(e){function r(r,i,n,o){e.call(this,r,i,n,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},r.prototype.getCanvas=function(){return this.canvas},r.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},r.prototype.onRemove=function(){this.pause()},r.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var r=this.map.painter.context,i=r.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(r,this.canvas,i.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[n];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},r.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},r.prototype.hasTransition=function(){return this._playing},r.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var r=e[t];if(isNaN(r)||r<=0)return!0}return!1},r}(M),B={vector:z,raster:C,"raster-dem":k,geojson:P,video:L,image:M,canvas:D},R=function(e,r,i,n){var o=new B[r.type](e,r,i,n);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function F(e,r){var i=t.identity([]);return t.translate(i,i,[1,1,0]),t.scale(i,i,[.5*e.width,.5*e.height,1]),t.multiply(i,i,e.calculatePosMatrix(r.toUnwrapped()))}function O(t,e,r,i,n){var o=function(t,e,r){if(t)for(var i=0,n=t;i<n.length;i+=1){var o=e[n[i]];if(o&&o.source===r&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===r&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),a=n.maxPitchScaleFactor(),s=t.tilesIn(r,a,o);s.sort(U);for(var l=[],u=0,c=s;u<c.length;u+=1){var p=c[u];l.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,i,n,a,F(t.transform,p.tileID))})}var h=function(t){for(var e={},r={},i=0,n=t;i<n.length;i+=1){var o=n[i],a=o.queryResults,s=o.wrappedTileID,l=r[s]=r[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},h=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];p[m.featureIndex]||(p[m.featureIndex]=!0,h.push(m))}}return e}(l);for(var f in h)h[f].forEach(function(e){var r=e.feature,i=t.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i});return h}function U(t,e){var r=t.tileID,i=e.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}var V=function(t,e){this.max=t,this.onRemove=e,this.reset()};V.prototype.reset=function(){for(var t in this.data)for(var e=0,r=this.data[t];e<r.length;e+=1){var i=r[e];i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value)}return this.data={},this.order=[],this},V.prototype.add=function(t,e,r){var i=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var o={value:e,timeout:void 0};if(void 0!==r&&(o.timeout=setTimeout(function(){i.remove(t,o)},r)),this.data[n].push(o),this.order.push(n),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},V.prototype.has=function(t){return t.wrapped().key in this.data},V.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},V.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},V.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},V.prototype.remove=function(t,e){if(!this.has(t))return this;var r=t.wrapped().key,i=void 0===e?0:this.data[r].indexOf(e),n=this.data[r][i];return this.data[r].splice(i,1),n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(n.value),this.order.splice(this.order.indexOf(r),1),this},V.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},V.prototype.filter=function(t){var e=[];for(var r in this.data)for(var i=0,n=this.data[r];i<n.length;i+=1){var o=n[i];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var l=s[a];this.remove(l.value.tileID,l)}};var N=function(t,e,r){this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var j={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},q=function(t,e,r,i){this.length=e.length,this.attributes=r,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};q.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},q.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},q.prototype.enableAttributes=function(t,e){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],n=e.attributes[i.name];void 0!==n&&t.enableVertexAttribArray(n)}},q.prototype.setVertexAttribPointers=function(t,e,r){for(var i=0;i<this.attributes.length;i++){var n=this.attributes[i],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[j[n.type]],!1,this.itemSize,n.offset+this.itemSize*(r||0))}},q.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var Z=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Z.prototype.get=function(){return this.current},Z.prototype.set=function(t){},Z.prototype.getDefault=function(){return this.default},Z.prototype.setDefault=function(){this.set(this.default)};var G=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(Z),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(Z),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(Z),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(Z),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(Z),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(Z),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(Z),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(Z),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(Z),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(Z),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(Z),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(Z),ot=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getDefault=function(){return t.Color.transparent},r.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},r}(Z),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(Z),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(Z),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(Z),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(Z),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(Z),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(Z),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(Z),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Z),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(Z),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(Z),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(Z),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(Z),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(Z),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(Z),wt=function(t){function e(e,r){t.call(this,e),this.context=e,this.parent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(Z),St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(wt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(wt),Tt=function(t,e,r){this.context=t,this.width=e,this.height=r;var i=t.gl,n=this.framebuffer=i.createFramebuffer();this.colorAttachment=new St(t,n),this.depthAttachment=new Et(t,n)};Tt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var r=this.depthAttachment.get();r&&t.deleteRenderbuffer(r),t.deleteFramebuffer(this.framebuffer)};var It=function(t,e,r){this.func=t,this.mask=e,this.range=r};It.ReadOnly=!1,It.ReadWrite=!0,It.disabled=new It(519,It.ReadOnly,[0,1]);var At=function(t,e,r,i,n,o){this.test=t,this.ref=e,this.mask=r,this.fail=i,this.depthFail=n,this.pass=o};At.disabled=new At({func:519,mask:0},0,0,7680,7680,7680);var zt=function(t,e,r){this.blendFunction=t,this.blendColor=e,this.mask=r};zt.disabled=new zt(zt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),zt.unblended=new zt(zt.Replace,t.Color.transparent,[!0,!0,!0,!0]),zt.alphaBlended=new zt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ct=function(t,e,r){this.enable=t,this.mode=e,this.frontFace=r};Ct.disabled=new Ct(!1,1029,2305),Ct.backCCW=new Ct(!0,1029,2305);var kt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new X(this),this.clearStencil=new W(this),this.colorMask=new K(this),this.depthMask=new H(this),this.stencilMask=new Y(this),this.stencilFunc=new J(this),this.stencilOp=new Q(this),this.stencilTest=new $(this),this.depthRange=new tt(this),this.depthTest=new et(this),this.depthFunc=new rt(this),this.blend=new it(this),this.blendFunc=new nt(this),this.blendColor=new ot(this),this.blendEquation=new at(this),this.cullFace=new st(this),this.cullFaceSide=new lt(this),this.frontFace=new ut(this),this.program=new ct(this),this.activeTexture=new pt(this),this.viewport=new ht(this),this.bindFramebuffer=new ft(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new mt(this),this.bindVertexBuffer=new yt(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new xt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};kt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},kt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},kt.prototype.createIndexBuffer=function(t,e){return new N(this,t,e)},kt.prototype.createVertexBuffer=function(t,e,r){return new q(this,t,e,r)},kt.prototype.createRenderbuffer=function(t,e,r){var i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,t,e,r),this.bindRenderbuffer.set(null),n},kt.prototype.createFramebuffer=function(t,e){return new Tt(this,t,e)},kt.prototype.clear=function(t){var e=t.color,r=t.depth,i=this.gl,n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),i.clear(n)},kt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},kt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},kt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},kt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,zt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},kt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pt=function(e){function r(r,i,n){var o=this;e.call(this),this.id=r,this.dispatcher=n,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=R(r,i,n,this),this._tiles={},this._cache=new V(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},r.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},r.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},r.prototype.getSource=function(){return this._source},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},r.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},r.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},r.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},r.prototype.serialize=function(){return this._source.serialize()},r.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var r=this._tiles[e];r.upload(t),r.prepare(this.map.style.imageManager)}},r.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Mt)},r.prototype.getRenderableIds=function(e){var r=this,i=[];for(var n in this._tiles)this._isIdRenderable(+n,e)&&i.push(+n);return e?i.sort(function(e,i){var n=r._tiles[e].tileID,o=r._tiles[i].tileID,a=new t.Point(n.canonical.x,n.canonical.y)._rotate(r.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(r.transform.angle);return n.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}):i.sort(Mt)},r.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},r.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},r.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},r.prototype._reloadTile=function(t,e){var r=this._tiles[t];r&&("loading"!==r.state&&(r.state=e),this._loadTile(r,this._tileLoaded.bind(this,r,t,e)))},r.prototype._tileLoaded=function(e,r,i,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},r.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),r=0;r<e.length;r++){var i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var n=this.getTileByID(i);o(t,n),o(n,t)}}function o(t,e){t.needsHillshadePrepare=!0;var r=e.tileID.canonical.x-t.tileID.canonical.x,i=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,r,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},r.prototype.getTile=function(t){return this.getTileByID(t.key)},r.prototype.getTileByID=function(t){return this._tiles[t]},r.prototype._retainLoadedChildren=function(t,e,r,i){for(var n in this._tiles){var o=this._tiles[n];if(!(i[n]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>r)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){i[a.key]=a;break}}}},r.prototype.findLoadedParent=function(t,e){for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r);if(!i)return;var n=String(i.key),o=this._tiles[n];if(o&&o.hasData())return o;if(this._cache.has(i))return this._cache.get(i)}},r.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),r=Math.floor(5*e),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},r.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,r=Math.round(e);if(this._prevLng=t,r){var i={};for(var n in this._tiles){var o=this._tiles[n];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+r),i[o.tileID.key]=o}for(var a in this._tiles=i,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},r.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter(function(t){return i._source.hasTile(t)}))):n=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-r.maxOverzooming,this._source.minzoom),s=Math.max(o+r.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,o);if(Lt(this._source.type)){for(var u={},c={},p=0,h=Object.keys(l);p<h.length;p+=1){var f=h[p],d=l[f],m=this._tiles[f];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var y=this.findLoadedParent(d,a);y&&(this._addTile(y.tileID),u[y.tileID.key]=y.tileID),c[f]=d}}for(var _ in this._retainLoadedChildren(c,o,s,l),u)l[_]||(this._coveredTiles[_]=!0,l[_]=u[_])}for(var g in l)this._tiles[g].clearFadeHold();for(var v=0,x=t.keysDifference(this._tiles,l);v<x.length;v+=1){var b=x[v],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}}},r.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},r.prototype._updateRetainedTiles=function(t,e){for(var i={},n={},o=Math.max(e-r.maxOverzooming,this._source.minzoom),a=Math.max(e+r.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],p=this._addTile(c);i[c.key]=c,p.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,i);for(var h=0,f=t;h<f.length;h+=1){var d=f[h],m=this._tiles[d.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var y=d.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){i[y.key]=y;continue}}else{var g=d.children(this._source.maxzoom);if(i[g[0].key]&&i[g[1].key]&&i[g[2].key]&&i[g[3].key])continue}for(var v=m.wasRequested(),x=d.overscaledZ-1;x>=o;--x){var b=d.scaledTo(x);if(n[b.key])break;if(n[b.key]=!0,!(m=this.getTile(b))&&v&&(m=this._addTile(b)),m&&(i[b.key]=b,v=m.wasRequested(),m.hasData()))break}}}return i},r.prototype._addTile=function(e){var r=this._tiles[e.key];if(r)return r;(r=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));var i=Boolean(r);return i||(r=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))),r?(r.uses++,this._tiles[e.key]=r,i||this._source.fire(new t.Event("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null},r.prototype._setTileReloadTimer=function(t,e){var r=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(function(){r._reloadTile(t,"expired"),delete r._timers[t]},i))},r.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},r.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},r.prototype.tilesIn=function(e,r,i){var n=this,o=[],a=this.transform;if(!a)return o;for(var s=i?a.getCameraQueryGeometry(e):e,l=e.map(function(t){return a.pointCoordinate(t)}),u=s.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),p=1/0,h=1/0,f=-1/0,d=-1/0,m=0,y=u;m<y.length;m+=1){var _=y[m];p=Math.min(p,_.x),h=Math.min(h,_.y),f=Math.max(f,_.x),d=Math.max(d,_.y)}for(var g=function(e){var i=n._tiles[c[e]];if(!i.holdingForFade()){var s=i.tileID,m=Math.pow(2,a.zoom-i.tileID.overscaledZ),y=r*i.queryPadding*t.EXTENT/i.tileSize/m,_=[s.getTilePoint(new t.MercatorCoordinate(p,h)),s.getTilePoint(new t.MercatorCoordinate(f,d))];if(_[0].x-y<t.EXTENT&&_[0].y-y<t.EXTENT&&_[1].x+y>=0&&_[1].y+y>=0){var g=l.map(function(t){return s.getTilePoint(t)}),v=u.map(function(t){return s.getTilePoint(t)});o.push({tile:i,tileID:s,queryGeometry:g,cameraQueryGeometry:v,scale:m})}}},v=0;v<c.length;v++)g(v);return o},r.prototype.getVisibleCoordinates=function(t){for(var e=this,r=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),i=0,n=r;i<n.length;i+=1){var o=n[i];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return r},r.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Lt(this._source.type))for(var e in this._tiles){var r=this._tiles[e];if(void 0!==r.fadeEndTime&&r.fadeEndTime>=t.browser.now())return!0}return!1},r.prototype.setFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.updateState(t,e,r)},r.prototype.removeFeatureState=function(t,e,r){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,r)},r.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},r.prototype.setDependencies=function(t,e,r){var i=this._tiles[t];i&&i.setDependencies(e,r)},r.prototype.reloadTilesForDependencies=function(t,e){for(var r in this._tiles)this._tiles[r].hasDependency(t,e)&&this._reloadTile(r,"reloading");this._cache.filter(function(r){return!r.hasDependency(t,e)})},r}(t.Evented);function Mt(t,e){return t%32-e%32||e-t}function Lt(t){return"raster"===t||"image"===t||"video"===t}function Dt(){return new t.window.Worker(ln.workerUrl)}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;var Bt=function(){this.active={}};Bt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Bt.workerCount;)this.workers.push(new Dt);return this.active[t]=!0,this.workers.slice()},Bt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Rt,Ft=Math.floor(t.browser.hardwareConcurrency/2);function Ot(e,r){var i={};for(var n in e)"ref"!==n&&(i[n]=e[n]);return t.refProperties.forEach(function(t){t in r&&(i[t]=r[t])}),i}function Ut(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=Ot(t[i],e[t[i].ref]));return t}Bt.workerCount=Math.max(Math.min(Ft,6),1);var Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nt(t,e,r){r.push({command:Vt.addSource,args:[t,e[t]]})}function jt(t,e,r){e.push({command:Vt.removeSource,args:[t]}),r[t]=!0}function qt(t,e,r,i){jt(t,r,i),Nt(t,e,r)}function Zt(e,r,i){var n;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;for(n in r[i])if(r[i].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[i][n],r[i][n]))return!1;return!0}function Gt(e,r,i,n,o,a){var s;for(s in r=r||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:a,args:[n,s,r[s],o]}));for(s in r)r.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],r[s])||i.push({command:a,args:[n,s,r[s],o]}))}function Xt(t){return t.id}function Wt(t,e){return t[e.id]=e,t}var Kt=function(t,e,r){var i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(e/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Ht(e,r,i,n,o){var a=t.create();return r?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,n.angle)):t.multiply(a,n.labelPlaneMatrix,e),a}function Yt(e,r,i,n,o){if(r){var a=t.clone(e);return t.scale(a,a,[o,o,1]),i||t.rotateZ(a,a,-n.angle),a}return n.glCoordMatrix}function Jt(e,r){var i=[e.x,e.y,0,1];se(i,i,r);var n=i[3];return{point:new t.Point(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function Qt(t,e){var r=t[0]/t[3],i=t[1]/t[3];return r>=-e[0]&&r<=e[0]&&i>=-e[1]&&i<=e[1]}function $t(e,r,i,n,o,a,s,l){var u=n?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,i.transform.zoom),p=[256/i.width*2+1,256/i.height*2+1],h=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=i.transform.width/i.transform.height,y=!1,_=0;_<d.length;_++){var g=d.get(_);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!y)ae(g.numGlyphs,h);else{y=!1;var v=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(v,v,r),Qt(v,p)){var x=.5+v[3]/i.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(u,c,g),w=s?b*x:b/x,S=new t.Point(g.anchorX,g.anchorY),E=Jt(S,o).point,T={},I=re(g,w,!1,l,r,o,a,e.glyphOffsetArray,f,h,E,S,T,m);y=I.useVertical,(I.notEnoughRoom||y||I.needsFlipping&&re(g,w,!0,l,r,o,a,e.glyphOffsetArray,f,h,E,S,T,m).notEnoughRoom)&&ae(g.numGlyphs,h)}else ae(g.numGlyphs,h)}}n?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function te(t,e,r,i,n,o,a,s,l,u,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(h-1),_=ne(t*m,r,i,n,o,a,s.segment,f,d,l,u,c,p);if(!_)return null;var g=ne(t*y,r,i,n,o,a,s.segment,f,d,l,u,c,p);return g?{first:_,last:g}:null}function ee(e,r,i,n){return e===t.WritingMode.horizontal&&Math.abs(i.y-r.y)>Math.abs(i.x-r.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?r.y<i.y:r.x>i.x)?{needsFlipping:!0}:null}function re(e,r,i,n,o,a,s,l,u,c,p,h,f,d){var m,y=r/24,_=e.lineOffsetX*y,g=e.lineOffsetY*y;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=te(y,l,_,g,i,p,h,e,u,a,f,!1);if(!w)return{notEnoughRoom:!0};var S=Jt(w.first.point,s).point,E=Jt(w.last.point,s).point;if(n&&!i){var T=ee(e.writingMode,S,E,d);if(T)return T}m=[w.first];for(var I=e.glyphStartIndex+1;I<v-1;I++)m.push(ne(y*l.getoffsetX(I),_,g,i,p,h,e.segment,x,b,u,a,f,!1));m.push(w.last)}else{if(n&&!i){var A=Jt(h,o).point,z=e.lineStartIndex+e.segment+1,C=new t.Point(u.getx(z),u.gety(z)),k=Jt(C,o),P=k.signedDistanceFromCamera>0?k.point:ie(h,C,A,1,o),M=ee(e.writingMode,A,P,d);if(M)return M}var L=ne(y*l.getoffsetX(e.glyphStartIndex),_,g,i,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,!1);if(!L)return{notEnoughRoom:!0};m=[L]}for(var D=0,B=m;D<B.length;D+=1){var R=B[D];t.addDynamicAttributes(c,R.point,R.angle)}return{}}function ie(t,e,r,i,n){var o=Jt(t.add(t.sub(e)._unit()),n).point,a=r.sub(o);return r.add(a._mult(i/a.mag()))}function ne(e,r,i,n,o,a,s,l,u,c,p,h,f){var d=n?e-r:e+r,m=d>0?1:-1,y=0;n&&(m*=-1,y=Math.PI),m<0&&(y+=Math.PI);for(var _=m>0?l+s:l+s+1,g=_,v=o,x=o,b=0,w=0,S=Math.abs(d);b+w<=S;){if((_+=m)<l||_>=u)return null;if(x=v,void 0===(v=h[_])){var E=new t.Point(c.getx(_),c.gety(_)),T=Jt(E,p);if(T.signedDistanceFromCamera>0)v=h[_]=T.point;else{var I=_-m;v=ie(0===b?a:new t.Point(c.getx(I),c.gety(I)),E,x,S-b+1,p)}}b+=w,w=x.dist(v)}var A=(S-b)/w,z=v.sub(x),C=z.mult(A)._add(x);return C._add(z._unit()._perp()._mult(i*m)),{point:C,angle:y+Math.atan2(v.y-x.y,v.x-x.x),tileDistance:f?{prevTileDistance:_-m===g?0:c.gettileUnitDistanceFromAnchor(_-m),lastSegmentViewportDistance:S-b}:null}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(t,e,r,i,n){this._forEachCell(e,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)},Kt.prototype.insertCircle=function(t,e,r,i){this._forEachCell(e-i,r-i,e+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(r),this.circles.push(i)},Kt.prototype._insertBoxCell=function(t,e,r,i,n,o){this.boxCells[n].push(o)},Kt.prototype._insertCircleCell=function(t,e,r,i,n,o){this.circleCells[n].push(o)},Kt.prototype._query=function(t,e,r,i,n,o){if(r<0||t>this.width||i<0||e>this.height)return!n&&[];var a=[];if(t<=0&&e<=0&&this.width<=r&&this.height<=i){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:n,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,r,i,this._queryCell,a,h,o),n?a.length>0:a},Kt.prototype._queryCircle=function(t,e,r,i,n){var o=t-r,a=t+r,s=e-r,l=e+r;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];var u=[],c={hitTest:i,circle:{x:t,y:e,radius:r},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,n),i?u.length>0:u},Kt.prototype.query=function(t,e,r,i,n){return this._query(t,e,r,i,!1,n)},Kt.prototype.hitTest=function(t,e,r,i,n){return this._query(t,e,r,i,!0,n)},Kt.prototype.hitTestCircle=function(t,e,r,i){return this._queryCircle(t,e,r,!0,i)},Kt.prototype._queryCell=function(t,e,r,i,n,o,a,s){var l=a.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var f=h[p];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&r>=c[d+0]&&i>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,_=0,g=m;_<g.length;_+=1){var v=g[_];if(!l.circle[v]){l.circle[v]=!0;var x=3*v;if(this._circleAndRectCollide(y[x],y[x+1],y[x+2],t,e,r,i)&&(!s||s(this.circleKeys[v]))){if(a.hitTest)return o.push(!0),!0;var b=y[x],w=y[x+1],S=y[x+2];o.push({key:this.circleKeys[v],x1:b-S,y1:w-S,x2:b+S,y2:w+S})}}}},Kt.prototype._queryCellCircle=function(t,e,r,i,n,o,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var m=4*d;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[m+0],p[m+1],p[m+2],p[m+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var y=this.circleCells[n];if(null!==y)for(var _=this.circles,g=0,v=y;g<v.length;g+=1){var x=v[g];if(!u.circle[x]){u.circle[x]=!0;var b=3*x;if(this._circlesCollide(_[b],_[b+1],_[b+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},Kt.prototype._forEachCell=function(t,e,r,i,n,o,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(r),p=this._convertToYCellCoord(i),h=l;h<=c;h++)for(var f=u;f<=p;f++){var d=this.xCellCount*f+h;if(n.call(this,t,e,r,i,d,o,a,s))return}},Kt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Kt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Kt.prototype._circlesCollide=function(t,e,r,i,n,o){var a=i-t,s=n-e,l=r+o;return l*l>a*a+s*s},Kt.prototype._circleAndRectCollide=function(t,e,r,i,n,o,a){var s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+r)return!1;var u=(a-n)/2,c=Math.abs(e-(n+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=r*r};var oe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ae(t,e){for(var r=0;r<t;r++){var i=e.length;e.resize(i+4),e.float32.set(oe,3*i)}}function se(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t[3]=r[3]*i+r[7]*n+r[15],t}var le=function(t,e,r){void 0===e&&(e=new Kt(t.width+200,t.height+200,25)),void 0===r&&(r=new Kt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ue(t,e,r){t[e+4]=r?1:0}function ce(e,r,i){return r*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}le.prototype.placeCollisionBox=function(t,e,r,i,n){var o=this.projectAndGetPerspectiveRatio(i,t.anchorPointX,t.anchorPointY),a=r*o.perspectiveRatio,s=t.x1*a+o.point.x,l=t.y1*a+o.point.y,u=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,n)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},le.prototype.approximateTileDistance=function(t,e,r,i,n){var o=n?1:i/this.pitchfactor,a=t.lastSegmentViewportDistance*r;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},le.prototype.placeCollisionCircles=function(e,r,i,n,o,a,s,l,u,c,p,h,f){var d=[],m=this.projectAnchor(u,o.anchorX,o.anchorY),y=l/24,_=o.lineOffsetX*l,g=o.lineOffsetY*l,v=new t.Point(o.anchorX,o.anchorY),x=te(y,s,_,g,!1,Jt(v,c).point,v,o,a,c,{},!0),b=!1,w=!1,S=!0,E=m.perspectiveRatio*n,T=1/(n*i),I=0,A=0;x&&(I=this.approximateTileDistance(x.first.tileDistance,x.first.angle,T,m.cameraDistance,h),A=this.approximateTileDistance(x.last.tileDistance,x.last.angle,T,m.cameraDistance,h));for(var z=0;z<e.length;z+=5){var C=e[z],k=e[z+1],P=e[z+2],M=e[z+3];if(!x||M<-I||M>A)ue(e,z,!1);else{var L=this.projectPoint(u,C,k),D=P*E;if(d.length>0){var B=L.x-d[d.length-4],R=L.y-d[d.length-3];if(D*D*2>B*B+R*R&&z+8<e.length){var F=e[z+8];if(F>-I&&F<A){ue(e,z,!1);continue}}}var O=z/5;d.push(L.x,L.y,D,O),ue(e,z,!0);var U=L.x-D,V=L.y-D,N=L.x+D,j=L.y+D;if(S=S&&this.isOffscreen(U,V,N,j),w=w||this.isInsideGrid(U,V,N,j),!r&&this.grid.hitTestCircle(L.x,L.y,D,f)){if(!p)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:d,offscreen:S}},le.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var r=[],i=1/0,n=1/0,o=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);i=Math.min(i,c.x),n=Math.min(n,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),r.push(c)}for(var p={},h={},f=0,d=this.grid.query(i,n,o,a).concat(this.ignoredGrid.query(i,n,o,a));f<d.length;f+=1){var m=d[f],y=m.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var _=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(r,_)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}}return h},le.prototype.insertCollisionBox=function(t,e,r,i,n){var o={bucketInstanceId:r,featureIndex:i,collisionGroupID:n};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},le.prototype.insertCollisionCircles=function(t,e,r,i,n){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:r,featureIndex:i,collisionGroupID:n},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},le.prototype.projectAnchor=function(t,e,r){var i=[e,r,0,1];return se(i,i,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5,cameraDistance:i[3]}},le.prototype.projectPoint=function(e,r,i){var n=[r,i,0,1];return se(n,n,e),new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},le.prototype.projectAndGetPerspectiveRatio=function(e,r,i){var n=[r,i,0,1];return se(n,n,e),{point:new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},le.prototype.isOffscreen=function(t,e,r,i){return r<100||t>=this.screenRightBoundary||i<100||e>this.screenBottomBoundary},le.prototype.isInsideGrid=function(t,e,r,i){return r>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary};var pe=function(t,e,r,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&r?1:0,this.placed=r};pe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var he=function(t,e,r,i,n){this.text=new pe(t?t.text:null,e,r,n),this.icon=new pe(t?t.icon:null,e,i,n)};he.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var fe=function(t,e,r){this.text=t,this.icon=e,this.skipFade=r},de=function(t,e,r,i,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=n},me=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ye(e,r,i,n,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*r,l=-(a.verticalAlign-.5)*i,u=t.evaluateVariableOffset(e,n);return new t.Point(s+u[0]*o,l+u[1]*o)}function _e(e,r,i,n,o,a){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,p=e.anchorPointX,h=e.anchorPointY,f=new t.Point(r,i);return n&&f._rotate(o?a:-a),{x1:s+f.x,y1:u+f.y,x2:l+f.x,y2:c+f.y,anchorPointX:p,anchorPointY:h}}me.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ge=function(t,e,r,i){this.transform=t.clone(),this.collisionIndex=new le(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new me(r),this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}};function ve(t,e,r,i,n){t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0),t.emplaceBack(e?1:0,r?1:0,i||0,n||0)}ge.prototype.placeLayerTile=function(e,r,i,n){var o=r.getBucket(e),a=r.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h=Ht(p,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,ce(r,1,this.transform.zoom)),f=Ht(p,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,ce(r,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new de(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID),this.placeLayerBucket(o,p,h,f,u,c,i,r.holdingForFade(),n,s)}},ge.prototype.attemptAnchorPlacement=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d){var m,y=[p.textOffset0,p.textOffset1],_=ye(t,r,i,y,n),g=this.collisionIndex.placeCollisionBox(_e(e,_.x,_.y,o,a,this.transform.angle),c,s,l,u.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(_e(d,_.x,_.y,o,a,this.transform.angle),c,s,l,u.predicate).box.length)return g.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(m=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:y,width:r,height:i,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(h,t,p,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,p),this.placedOrientations[p.crossTileID]=f),{shift:_,placedGlyphBoxes:g}):void 0},ge.prototype.placeLayerBucket=function(e,r,i,n,o,a,s,l,u,c){var p=this,h=e.layers[0].layout,f=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom),d=h.get("text-optional"),m=h.get("icon-optional"),y=h.get("text-allow-overlap"),_=h.get("icon-allow-overlap"),g=y&&(_||!e.hasIconData()||m),v=_&&(y||!e.hasTextData()||d),x=this.collisionGroups.get(e.sourceID),b="map"===h.get("text-rotation-alignment"),w="map"===h.get("text-pitch-alignment"),S="none"!==h.get("icon-text-fit"),E="viewport-y"===h.get("symbol-z-order");!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);var T=function(n,c){if(!u[n.crossTileID])if(l)p.placements[n.crossTileID]=new fe(!1,!1,!1);else{var E,T=!1,I=!1,A=!0,z=null,C={box:null,offscreen:null},k={box:null,offscreen:null},P=null,M=null,L=0,D=0,B=0;c.textFeatureIndex&&(L=c.textFeatureIndex),c.verticalTextFeatureIndex&&(D=c.verticalTextFeatureIndex);var R=c.textBox;if(R){var F=function(r){var i=t.WritingMode.horizontal;if(e.allowVerticalPlacement&&!r&&p.prevPlacement){var o=p.prevPlacement.placedOrientations[n.crossTileID];o&&(p.placedOrientations[n.crossTileID]=o,i=o,p.markUsedOrientation(e,i,n))}return i},O=function(r,i){if(e.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&c.verticalTextBox)for(var o=0,a=e.writingModes;o<a.length&&(a[o]===t.WritingMode.vertical?(C=i(),k=C):C=r(),!(C&&C.box&&C.box.length));o+=1);else C=r()};if(h.get("text-variable-anchor")){var U=h.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[n.crossTileID]){var V=p.prevPlacement.variableOffsets[n.crossTileID];U.indexOf(V.anchor)>0&&(U=U.filter(function(t){return t!==V.anchor})).unshift(V.anchor)}var N=function(t,i,o){for(var s=t.x2-t.x1,l=t.y2-t.y1,u=n.textBoxScale,c=S&&!_?i:null,h={box:[],offscreen:!1},f=y?2*U.length:U.length,d=0;d<f;++d){var m=U[d%U.length],g=d>=U.length,v=p.attemptAnchorPlacement(m,t,s,l,u,b,w,a,r,x,g,n,e,o,c);if(v&&(h=v.placedGlyphBoxes)&&h.box&&h.box.length){T=!0,z=v.shift;break}}return h};O(function(){return N(R,c.iconBox,t.WritingMode.horizontal)},function(){var r=c.verticalTextBox,i=C&&C.box&&C.box.length;return e.allowVerticalPlacement&&!i&&n.numVerticalGlyphVertices>0&&r?N(r,c.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),C&&(T=C.box,A=C.offscreen);var j=F(C&&C.box);if(!T&&p.prevPlacement){var q=p.prevPlacement.variableOffsets[n.crossTileID];q&&(p.variableOffsets[n.crossTileID]=q,p.markUsedJustification(e,q.anchor,n,j))}}else{var Z=function(t,i){var o=p.collisionIndex.placeCollisionBox(t,h.get("text-allow-overlap"),a,r,x.predicate);return o&&o.box&&o.box.length&&(p.markUsedOrientation(e,i,n),p.placedOrientations[n.crossTileID]=i),o};O(function(){return Z(R,t.WritingMode.horizontal)},function(){var r=c.verticalTextBox;return e.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&r?Z(r,t.WritingMode.vertical):{box:null,offscreen:null}}),F(C&&C.box&&C.box.length)}}T=(E=C)&&E.box&&E.box.length>0,A=E&&E.offscreen;var G=c.textCircles;if(G){var X=e.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex),W=t.evaluateSizeForFeature(e.textSizeData,f,X);P=p.collisionIndex.placeCollisionCircles(G,h.get("text-allow-overlap"),o,a,X,e.lineVertexArray,e.glyphOffsetArray,W,r,i,s,w,x.predicate),T=h.get("text-allow-overlap")||P.circles.length>0,A=A&&P.offscreen}if(c.iconFeatureIndex&&(B=c.iconFeatureIndex),c.iconBox){var K=function(t){var e=S&&z?_e(t,z.x,z.y,b,w,p.transform.angle):t;return p.collisionIndex.placeCollisionBox(e,h.get("icon-allow-overlap"),a,r,x.predicate)};I=k&&k.box&&k.box.length&&c.verticalIconBox?(M=K(c.verticalIconBox)).box.length>0:(M=K(c.iconBox)).box.length>0,A=A&&M.offscreen}var H=d||0===n.numHorizontalGlyphVertices&&0===n.numVerticalGlyphVertices,Y=m||0===n.numIconVertices;H||Y?Y?H||(I=I&&T):T=I&&T:I=T=I&&T,T&&E&&E.box&&(k&&k.box&&D?p.collisionIndex.insertCollisionBox(E.box,h.get("text-ignore-placement"),e.bucketInstanceId,D,x.ID):p.collisionIndex.insertCollisionBox(E.box,h.get("text-ignore-placement"),e.bucketInstanceId,L,x.ID)),I&&M&&p.collisionIndex.insertCollisionBox(M.box,h.get("icon-ignore-placement"),e.bucketInstanceId,B,x.ID),T&&P&&p.collisionIndex.insertCollisionCircles(P.circles,h.get("text-ignore-placement"),e.bucketInstanceId,L,x.ID),p.placements[n.crossTileID]=new fe(T||g,I||v,A||e.justReloaded),u[n.crossTileID]=!0}};if(E)for(var I=e.getSortedSymbolIndexes(this.transform.angle),A=I.length-1;A>=0;--A){var z=I[A];T(e.symbolInstances.get(z),e.collisionArrays[z])}else for(var C=0;C<e.symbolInstances.length;++C)T(e.symbolInstances.get(C),e.collisionArrays[C]);e.justReloaded=!1},ge.prototype.markUsedJustification=function(e,r,i,n){var o,a={left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex};o=n===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:a[t.getAnchorJustification(r)];for(var s=0,l=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];s<l.length;s+=1){var u=l[s];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:i.crossTileID)}},ge.prototype.markUsedOrientation=function(e,r,i){for(var n=r===t.WritingMode.horizontal||r===t.WritingMode.horizontalOnly?r:0,o=r===t.WritingMode.vertical?r:0,a=0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];a<s.length;a+=1){var l=s[a];e.text.placedSymbolArray.get(l).placedOrientation=n}i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)},ge.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,r=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var i=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=n[s];u?(this.opacities[s]=new he(u,i,l.text,l.icon),r=r||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new he(null,i,l.text,l.icon,l.skipFade),r=r||l.text||l.icon)}for(var c in n){var p=n[c];if(!this.opacities[c]){var h=new he(p,i,!1,!1);h.isHidden()||(this.opacities[c]=h,r=r||p.text.placed||p.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ge.prototype.updateLayerOpacities=function(t,e){for(var r={},i=0,n=e;i<n.length;i+=1){var o=n[i],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,r,o.collisionBoxArray)}},ge.prototype.updateBucketOpacities=function(e,r,i){var n=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var o=e.layers[0].layout,a=new he(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),p="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new he(null,0,s&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(i);for(var d=function(t,e,r){for(var i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(r)},m=function(i){var o=e.symbolInstances.get(i),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,m=o.crossTileID,y=r[m],_=n.opacities[m];y?_=a:_||(_=f,n.opacities[m]=_),r[m]=!0;var g=s>0||l>0,v=o.numIconVertices>0,x=n.placedOrientations[o.crossTileID],b=x===t.WritingMode.vertical,w=x===t.WritingMode.horizontal||x===t.WritingMode.horizontalOnly;if(g){var S=Ae(_.text),E=b?ze:S;d(e.text,s,E);var T=w?ze:S;d(e.text,l,T);var I=_.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=I||b?1:0)}),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=I||w?1:0);var A=n.variableOffsets[o.crossTileID];A&&n.markUsedJustification(e,A.anchor,o,x);var z=n.placedOrientations[o.crossTileID];z&&(n.markUsedJustification(e,"left",o,z),n.markUsedOrientation(e,z,o))}if(v){var C=Ae(_.icon),k=!(h&&o.verticalPlacedIconSymbolIndex&&b);if(o.placedIconSymbolIndex>=0){var P=k?C:ze;d(e.icon,o.numIconVertices,P),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=_.icon.isHidden()}if(o.verticalPlacedIconSymbolIndex>=0){var M=k?ze:C;d(e.icon,o.numVerticalIconVertices,M),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=_.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var L=e.collisionArrays[i];if(L){var D=new t.Point(0,0);if(L.textBox||L.verticalTextBox){var B=!0;if(u){var R=n.variableOffsets[m];R?(D=ye(R.anchor,R.width,R.height,R.textOffset,R.textBoxScale),c&&D._rotate(p?n.transform.angle:-n.transform.angle)):B=!1}L.textBox&&ve(e.textCollisionBox.collisionVertexArray,_.text.placed,!B||b,D.x,D.y),L.verticalTextBox&&ve(e.textCollisionBox.collisionVertexArray,_.text.placed,!B||w,D.x,D.y)}var F=Boolean(!w&&L.verticalIconBox);L.iconBox&&ve(e.iconCollisionBox.collisionVertexArray,_.icon.placed,F,h?D.x:0,h?D.y:0),L.verticalIconBox&&ve(e.iconCollisionBox.collisionVertexArray,_.icon.placed,!F,h?D.x:0,h?D.y:0);var O=L.textCircles;if(O&&e.hasTextCollisionCircleData())for(var U=0;U<O.length;U+=5){var V=y||0===O[U+4];ve(e.textCollisionCircle.collisionVertexArray,_.text.placed,V)}}}},y=0;y<e.symbolInstances.length;y++)m(y);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},ge.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ge.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},ge.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ge.prototype.stillRecent=function(t,e){var r=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*r>t},ge.prototype.setStale=function(){this.stale=!0};var xe=Math.pow(2,25),be=Math.pow(2,24),we=Math.pow(2,17),Se=Math.pow(2,16),Ee=Math.pow(2,9),Te=Math.pow(2,8),Ie=Math.pow(2,1);function Ae(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,r=Math.floor(127*t.opacity);return r*xe+e*be+r*we+e*Se+r*Ee+e*Te+r*Ie+e}var ze=0,Ce=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Ce.prototype.continuePlacement=function(t,e,r,i,n){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(i,o,r,this._seenCrossTileIDs),this._currentTileIndex++,n())return!0}};var ke=function(t,e,r,i,n,o,a){this.placement=new ge(t,n,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1};ke.prototype.isDone=function(){return this._done},ke.prototype.continuePlacement=function(e,r,i){for(var n=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=r[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Ce),this._inProgressLayer.continuePlacement(i[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ke.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Pe=512/t.EXTENT/2,Me=function(t,e,r){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<e.length;i++){var n=e.get(i),o=n.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};Me.prototype.getScaledCoordinates=function(e,r){var i=r.canonical.z-this.tileID.canonical.z,n=Pe/Math.pow(2,i);return{x:Math.floor((r.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((r.canonical.y*t.EXTENT+e.anchorY)*n)}},Me.prototype.findMatches=function(t,e,r){for(var i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var o=t.get(n);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=i&&Math.abs(c.coord.y-s.y)<=i&&!r[c.crossTileID]){r[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Le=function(){this.maxCrossTileID=0};Le.prototype.generate=function(){return++this.maxCrossTileID};var De=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};De.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var r in this.indexes){var i=this.indexes[r],n={};for(var o in i){var a=i[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[r]=n}this.lng=t},De.prototype.addBucket=function(t,e,r){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,n)}else{var u=a[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=r.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Me(t,e.symbolInstances,e.bucketInstanceId),!0},De.prototype.removeBucketCrossTileIDs=function(t,e){for(var r in e.indexedSymbolInstances)for(var i=0,n=e.indexedSymbolInstances[r];i<n.length;i+=1){var o=n[i];delete this.usedCrossTileIDs[t][o.crossTileID]}},De.prototype.removeStaleBuckets=function(t){var e=!1;for(var r in this.indexes){var i=this.indexes[r];for(var n in i)t[i[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,i[n]),delete i[n],e=!0)}return e};var Be=function(){this.layerIndexes={},this.crossTileIDs=new Le,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Be.prototype.addLayer=function(t,e,r){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new De);var n=!1,o={};i.handleWrapJump(r);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(l.tileID,u,this.crossTileIDs)&&(n=!0),o[u.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(n=!0),n},Be.prototype.pruneUnusedLayers=function(t){var e={};for(var r in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[r]||delete this.layerIndexes[r]};var Re=function(e,r){return t.emitValidationErrors(e,r&&r.filter(function(t){return"source.canvas"!==t.identifier}))},Fe=t.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Oe=t.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(e){function i(r,n){var o=this;void 0===n&&(n={}),e.call(this),this.map=r,this.dispatcher=new T((Rt||(Rt=new Bt),Rt),this),this.imageManager=new f,this.imageManager.setEventedParent(this),this.glyphManager=new x(r._requestManager,n.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Be,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=i.registerForPluginStateChange(function(e){var r={pluginStatus:e.pluginStatus,pluginURL:e.pluginURL};a.dispatcher.broadcast("syncRTLPluginState",r,function(e,r){if(t.triggerPluginCompletionEvent(e),r&&r.every(function(t){return t}))for(var i in a.sourceCaches)a.sourceCaches[i].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var r=e.getSource();if(r&&r.vectorLayerIds)for(var i in o._layers){var n=o._layers[i];n.source===r.id&&o._validateLayer(n)}}}})}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof r.validate?r.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,r.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,r){i._request=null,e?i.fire(new t.ErrorEvent(e)):r&&i._load(r,n)})},i.prototype.loadJSON=function(e,r){var i=this;void 0===r&&(r={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){i._request=null,i._load(e,!1!==r.validate)})},i.prototype._load=function(e,r){var i=this;if(!r||!Re(this,t.validateStyle(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});e.sprite?this._spriteRequest=function(e,r,i){var n,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(r.transformRequest(r.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,a||(a=t,n=e,c())}),u=t.getImage(r.transformRequest(r.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){u=null,a||(a=t,o=e,c())});function c(){if(a)i(a);else if(n&&o){var e=t.browser.getImageData(o),r={};for(var s in n){var l=n[s],u=l.width,c=l.height,p=l.x,h=l.y,f=l.sdf,d=l.pixelRatio,m=l.stretchX,y=l.stretchY,_=l.content,g=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,g,{x:p,y:h},{x:0,y:0},{width:u,height:c}),r[s]={data:g,pixelRatio:d,sdf:f,stretchX:m,stretchY:y,content:_}}i(null,r)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e.sprite,this.map._requestManager,function(e,r){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(r)for(var n in r)i.imageManager.addImage(n,r[n]);i.imageManager.setLoaded(!0),i.dispatcher.broadcast("setImages",i.imageManager.listImages()),i.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=Ut(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var l=s[a];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new S(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._validateLayer=function(e){var r=this.sourceCaches[e.source];if(r){var i=e.sourceLayer;if(i){var n=r.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+i+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],r=0,i=t;r<i.length;r+=1){var n=i[r],o=this._layers[n];"custom"!==o.type&&e.push(o.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var r=this._changed;if(this._changed){var i=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var o in(i.length||n.length)&&this._updateWorkerLayers(i,n),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=c[u],h=this._layers[p];h.recalculate(e,this.imageManager.listImages()),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var r=this;if(this._checkLoaded(),Re(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Ut(e.layers);var i=function(e,r){if(!e)return[{command:Vt.setStyle,args:[r]}];var i=[];try{if(!t.deepEqual(e.version,r.version))return[{command:Vt.setStyle,args:[r]}];t.deepEqual(e.center,r.center)||i.push({command:Vt.setCenter,args:[r.center]}),t.deepEqual(e.zoom,r.zoom)||i.push({command:Vt.setZoom,args:[r.zoom]}),t.deepEqual(e.bearing,r.bearing)||i.push({command:Vt.setBearing,args:[r.bearing]}),t.deepEqual(e.pitch,r.pitch)||i.push({command:Vt.setPitch,args:[r.pitch]}),t.deepEqual(e.sprite,r.sprite)||i.push({command:Vt.setSprite,args:[r.sprite]}),t.deepEqual(e.glyphs,r.glyphs)||i.push({command:Vt.setGlyphs,args:[r.glyphs]}),t.deepEqual(e.transition,r.transition)||i.push({command:Vt.setTransition,args:[r.transition]}),t.deepEqual(e.light,r.light)||i.push({command:Vt.setLight,args:[r.light]});var n={},o=[];!function(e,r,i,n){var o;for(o in r=r||{},e=e||{})e.hasOwnProperty(o)&&(r.hasOwnProperty(o)||jt(o,i,n));for(o in r)r.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],r[o])||("geojson"===e[o].type&&"geojson"===r[o].type&&Zt(e,r,o)?i.push({command:Vt.setGeoJSONSourceData,args:[o,r[o].data]}):qt(o,r,i,n)):Nt(o,r,i))}(e.sources,r.sources,o,n);var a=[];e.layers&&e.layers.forEach(function(t){n[t.source]?i.push({command:Vt.removeLayer,args:[t.id]}):a.push(t)}),i=i.concat(o),function(e,r,i){r=r||[];var n,o,a,s,l,u,c,p=(e=e||[]).map(Xt),h=r.map(Xt),f=e.reduce(Wt,{}),d=r.reduce(Wt,{}),m=p.slice(),y=Object.create(null);for(n=0,o=0;n<p.length;n++)a=p[n],d.hasOwnProperty(a)?o++:(i.push({command:Vt.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(n=0,o=0;n<h.length;n++)a=h[h.length-1-n],m[m.length-1-n]!==a&&(f.hasOwnProperty(a)?(i.push({command:Vt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,u=m[m.length-n],i.push({command:Vt.addLayer,args:[d[a],u]}),m.splice(m.length-n,0,a),y[a]=!0);for(n=0;n<h.length;n++)if(s=f[a=h[n]],l=d[a],!y[a]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in Gt(s.layout,l.layout,i,a,null,Vt.setLayoutProperty),Gt(s.paint,l.paint,i,a,null,Vt.setPaintProperty),t.deepEqual(s.filter,l.filter)||i.push({command:Vt.setFilter,args:[a,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||i.push({command:Vt.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Gt(s[c],l[c],i,a,c.slice(6),Vt.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Vt.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Gt(s[c],l[c],i,a,c.slice(6),Vt.setPaintProperty):t.deepEqual(s[c],l[c])||i.push({command:Vt.setLayerProperty,args:[a,c,l[c]]}))}else i.push({command:Vt.removeLayer,args:[a]}),u=m[m.lastIndexOf(a)+1],i.push({command:Vt.addLayer,args:[l,u]})}(a,r.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Vt.setStyle,args:[r]}]}return i}(this.serialize(),e).filter(function(t){return!(t.command in Oe)});if(0===i.length)return!1;var n=i.filter(function(t){return!(t.command in Fe)});if(n.length>0)throw new Error("Unimplemented: "+n.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&r[t.command].apply(r,t.args)}),this.stylesheet=e,!0},i.prototype.addImage=function(e,r){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,r),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,r,i){var n=this;if(void 0===i&&(i={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!r.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(r).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,r,null,i))){this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Pt(e,r,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:n.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+r+'" is using it.')));var i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,n){void 0===n&&(n={}),this._checkLoaded();var o=e.id;if(this.getLayer(o))this.fire(new t.ErrorEvent(new Error('Layer with id "'+o+'" already exists on this map')));else{var a;if("custom"===e.type){if(Re(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==r(e.source)&&(this.addSource(o,e.source),e=t.clone$1(e),e=t.extend(e,{source:o})),this._validate(t.validateStyle.layer,"layers."+o,e,{arrayIndex:-1},n))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:o}})}var s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(s,0,o),this._layerOrderChanged=!0,this._layers[o]=a,this._removedLayers[o]&&a.source&&"custom"!==a.type){var l=this._removedLayers[o];delete this._removedLayers[o],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,r){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==r){var i=this._order.indexOf(e);this._order.splice(i,1);var n=r?this._order.indexOf(r):this._order.length;r&&-1===n?this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var r=this._layers[e];if(r){r.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.setLayerZoomRange=function(e,r,i){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===r&&n.maxzoom===i||(null!=r&&(n.minzoom=r),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,r,i){void 0===i&&(i={}),this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,r))return null==r?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",r,null,i)||(n.filter=t.clone$1(r),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,n),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,r){var i=this.getLayer(e);if(i)return i.getLayoutProperty(r);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,r,i,n){void 0===n&&(n={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=e.sourceLayer,o=this.sourceCaches[i],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||n?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(n,a,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,r){this._checkLoaded();var i=e.source,n=this.sourceCaches[i];if(void 0!==n){var o=n.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?void 0!==e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):n.removeFeatureState(a,s,r):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var r=e.source,i=e.sourceLayer,n=this.sourceCaches[r],o=parseInt(e.id,10);if(void 0!==n)if("vector"!==n.getSource().type||i){if(!(isNaN(o)||o<0))return n.getFeatureState(i,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,r=function(t){return"fill-extrusion"===e._layers[t].type},i={},n=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(r(a)){i[a]=o;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1){var h=p[c];n.push(h)}}}}n.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var f=[],d=this._order.length-1;d>=0;d--){var m=this._order[d];if(r(m))for(var y=n.length-1;y>=0;y--){var _=n[y].feature;if(i[_.layer.id]<d)break;f.push(_),n.pop()}else for(var g=0,v=t;g<v.length;g+=1){var x=v[g][m];if(x)for(var b=0,w=x;b<w.length;b+=1){var S=w[b];f.push(S.feature)}}}return f},i.prototype.queryRenderedFeatures=function(e,r,i){r&&r.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",r.filter,null,r);var n={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=r.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[l.source]=!0}}var u=[];for(var c in this.sourceCaches)r.layers&&!n[c]||u.push(O(this.sourceCaches[c],this._layers,e,r,i));return this.placement&&u.push(function(t,e,r,i,n,o){for(var a={},s=n.queryRenderedSymbols(r),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var p=c[u];l.push(o[p])}l.sort(U);for(var h=function(){var e=d[f],r=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,i.filter,i.layers,t);for(var n in r){var o=a[n]=a[n]||[],l=r[n];l.sort(function(t,r){var i=e.featureSortOrder;if(i){var n=i.indexOf(t.featureIndex);return i.indexOf(r.featureIndex)-n}return r.featureIndex-t.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var p=c[u];o.push(p)}}},f=0,d=l;f<d.length;f+=1)h();var m=function(r){a[r].forEach(function(i){var n=i.feature,o=t[r],a=e[o.source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=a})};for(var y in a)m(y);return a}(this._layers,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(e,r){r&&r.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",r.filter,null,r);var i=this.sourceCaches[e];return i?function(t,e){for(var r=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),i=[],n={},o=0;o<r.length;o++){var a=r[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(i,e))}return i}(i,r):[]},i.prototype.addSourceType=function(t,e,r){return i.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,r){void 0===r&&(r={}),this._checkLoaded();var i=this.light.getLight(),n=!1;for(var o in e)if(!t.deepEqual(e[o],i[o])){n=!0;break}if(n){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}},i.prototype._validate=function(e,r,i,n,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Re(this,e.call(t.validateStyle,t.extend({key:r,style:this.serialize(),value:i,styleSpec:t.styleSpec},n)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var r in this.sourceCaches)this.sourceCaches[r].clearTiles(),this.sourceCaches[r].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,r,i,n){for(var o=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===i;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new ke(e,this._order,d,r,i,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var m=0,y=this._order;m<y.length;m+=1){var _=y[m],g=this._layers[_];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,r){this.imageManager.getImages(e.icons,r),this._updateTilesForChangedImages();var i=this.sourceCaches[e.source];i&&i.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,r){this.glyphManager.getGlyphs(e.stacks,r)},i.prototype.getResource=function(e,r,i){return t.makeRequest(r,i)},i}(t.Evented);Ue.getSourceType=function(t){return B[t]},Ue.setSourceType=function(t,e){B[t]=e},Ue.registerForPluginStateChange=t.registerForPluginStateChange;var Ve=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ne=fr("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),je=fr("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=fr("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ze=fr("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ge=fr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Xe=fr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),We=fr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ke=fr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),He=fr("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ye=fr("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Je=fr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Qe=fr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),$e=fr("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),tr=fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),er=fr("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),rr=fr("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ir=fr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),nr=fr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),or=fr("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ar=fr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sr=fr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),lr=fr("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ur=fr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),cr=fr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),pr=fr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),hr=fr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function fr(t,e){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i={};return{fragmentSource:t=t.replace(r,function(t,e,r,n,o){return i[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+n+" "+o+";\n#else\nuniform "+r+" "+n+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+n+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:e=e.replace(r,function(t,e,r,n,o){var a="float"===n?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+n+" "+o+";\n#else\nuniform "+r+" "+n+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+r+" "+n+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+r+" "+n+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+n+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+n+" "+o+" = a_"+o+";\n#else\n    "+r+" "+n+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+n+" "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+r+" "+n+" "+o+" = u_"+o+";\n#endif\n"})}}var dr=Object.freeze({__proto__:null,prelude:Ne,background:je,backgroundPattern:qe,circle:Ze,clippingMask:Ge,heatmap:Xe,heatmapTexture:We,collisionBox:Ke,collisionCircle:He,debug:Ye,fill:Je,fillOutline:Qe,fillOutlinePattern:$e,fillPattern:tr,fillExtrusion:er,fillExtrusionPattern:rr,hillshadePrepare:ir,hillshade:nr,line:or,lineGradient:ar,linePattern:sr,lineSDF:lr,raster:ur,symbolIcon:cr,symbolSDF:pr,symbolTextAndIcon:hr}),mr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};mr.prototype.bind=function(t,e,r,i,n,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==i.length,u=0;!l&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==r||l||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,r,i,n,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind())},mr.prototype.freshBind=function(t,e,r,i,n,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=r;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var d=0,m=r;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),u.currentNumAttributes=l},mr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var yr=function(t,e,r,i,n){var o=t.gl;this.program=o.createProgram();var a=r.defines();n&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(Ne.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(Ne.vertexSource,e.vertexSource).join("\n"),u=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(u,s),o.compileShader(u),o.attachShader(this.program,u);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(c,l),o.compileShader(c),o.attachShader(this.program,c);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)o.bindAttribLocation(this.program,h,p[h].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var f={},d=0;d<this.numAttributes;d++){var m=o.getActiveAttrib(this.program,d);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),_=0;_<y;_++){var g=o.getActiveUniform(this.program,_);g&&(f[g.name]=o.getUniformLocation(this.program,g.name))}this.fixedUniforms=i(t,f),this.binderUniforms=r.getUniforms(t,f)}}};function _r(e,r,i){var n=1/ce(i,1,r.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,r.transform.tileZoom)/o,s=a*(i.tileID.canonical.x+i.tileID.wrap*o),l=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}yr.prototype.draw=function(t,e,r,i,n,o,a,s,l,u,c,p,h,f,d,m){var y,_=t.gl;if(!this.failedToCreate){for(var g in t.program.set(this.program),t.setDepthMode(r),t.setStencilMode(i),t.setColorMode(n),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);f&&f.setUniforms(t,this.binderUniforms,p,{zoom:h});for(var v=(y={},y[_.LINES]=2,y[_.TRIANGLES]=3,y[_.LINE_STRIP]=1,y)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new mr)).bind(t,this,l,f?f.getPaintVertexBuffers():[],u,w.vertexOffset,d,m),_.drawElements(e,w.primitiveLength*v,_.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var gr=function(e,r,i,n){var o=r.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-r.transform.angle),t.transformMat3(s,s,l);var u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:n}},vr=function(e,r,i,n,o,a,s){return t.extend(gr(e,r,i,n),_r(a,r,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},xr=function(t){return{u_matrix:t}},br=function(e,r,i,n){return t.extend(xr(e),_r(i,r,n))},wr=function(t,e){return{u_matrix:t,u_world:e}},Sr=function(e,r,i,n,o){return t.extend(br(e,r,i,n),{u_world:o})},Er=function(e,r,i,n){var o,a,s=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var l=ce(i,1,s.zoom);o=!0,a=[l,l]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(r.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Tr=function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,r.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,r.u_overscale_factor)}},Ir=function(t,e,r){var i=ce(r,1,e.zoom),n=Math.pow(2,e.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[e.pixelsToGLUnits[0]/(i*n),e.pixelsToGLUnits[1]/(i*n)],u_overscale_factor:o}},Ar=function(t,e){return{u_matrix:t,u_color:e}},zr=function(t){return{u_matrix:t}},Cr=function(t,e,r,i){return{u_matrix:t,u_extrude_scale:ce(e,1,r),u_intensity:i}},kr=function(t,e,r){var i=r.paint.get("hillshade-shadow-color"),n=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Mr(t,e.tileID),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:n,u_accent:o}},Pr=function(e,r,i){var n=r.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_maxzoom:i,u_unpack:r.getUnpackVector()}};function Mr(e,r){var i=Math.pow(2,r.canonical.z),n=r.canonical.y;return[new t.MercatorCoordinate(0,n/i).toLngLat().lat,new t.MercatorCoordinate(0,(n+1)/i).toLngLat().lat]}var Lr=function(e,r,i){var n=e.transform;return{u_matrix:Or(e,r,i),u_ratio:1/ce(r,1,n.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Dr=function(e,r,i){return t.extend(Lr(e,r,i),{u_image:0})},Br=function(e,r,i,n){var o=e.transform,a=Fr(r,o);return{u_matrix:Or(e,r,i),u_texsize:r.imageAtlasTexture.size,u_ratio:1/ce(r,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Rr=function(e,r,i,n,o){var a=e.transform,s=e.lineAtlas,l=Fr(r,a),u="round"===i.layout.get("line-cap"),c=s.getDash(n.from,u),p=s.getDash(n.to,u),h=c.width*o.fromScale,f=p.width*o.toScale;return t.extend(Lr(e,r,i),{u_patternscale_a:[l/h,-c.height/2],u_patternscale_b:[l/f,-p.height/2],u_sdfgamma:s.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:o.t})};function Fr(t,e){return 1/ce(t,1,e.tileZoom)}function Or(t,e,r){return t.translatePosMatrix(e.tileID.posMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Ur=function(t,e,r,i,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:r,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Vr(n.paint.get("raster-hue-rotate"))};var o,a};function Vr(t){t*=Math.PI/180;var e=Math.sin(t),r=Math.cos(t);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}var Nr=function(t,e,r,i,n,o,a,s,l,u){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},jr=function(e,r,i,n,o,a,s,l,u,c,p){var h=o.transform;return t.extend(Nr(e,r,i,n,o,a,s,l,u,c),{u_gamma_scale:n?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+p})},qr=function(e,r,i,n,o,a,s,l,u,c){return t.extend(jr(e,r,i,n,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Zr=function(t,e,r){return{u_matrix:t,u_opacity:e,u_color:r}},Gr=function(e,r,i,n,o,a){return t.extend(function(t,e,r,i){var n=r.imageManager.getPattern(t.from.toString()),o=r.imageManager.getPattern(t.to.toString()),a=r.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,r.transform.tileZoom)/u,p=c*(i.tileID.canonical.x+i.tileID.wrap*u),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/ce(i,1,r.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(n,a,i,o),{u_matrix:e,u_opacity:r})},Xr={fillExtrusion:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fillExtrusionPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_lightpos:new t.Uniform3f(e,r.u_lightpos),u_lightintensity:new t.Uniform1f(e,r.u_lightintensity),u_lightcolor:new t.Uniform3f(e,r.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,r.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,r.u_height_factor),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade),u_opacity:new t.Uniform1f(e,r.u_opacity)}},fill:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},fillPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},fillOutline:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world)}},fillOutlinePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_texsize:new t.Uniform2f(e,r.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},circle:function(e,r){return{u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,r.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,r.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},collisionBox:Tr,collisionCircle:Tr,debug:function(e,r){return{u_color:new t.UniformColor(e,r.u_color),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},clippingMask:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmap:function(e,r){return{u_extrude_scale:new t.Uniform1f(e,r.u_extrude_scale),u_intensity:new t.Uniform1f(e,r.u_intensity),u_matrix:new t.UniformMatrix4f(e,r.u_matrix)}},heatmapTexture:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_world:new t.Uniform2f(e,r.u_world),u_image:new t.Uniform1i(e,r.u_image),u_color_ramp:new t.Uniform1i(e,r.u_color_ramp),u_opacity:new t.Uniform1f(e,r.u_opacity)}},hillshade:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_latrange:new t.Uniform2f(e,r.u_latrange),u_light:new t.Uniform2f(e,r.u_light),u_shadow:new t.UniformColor(e,r.u_shadow),u_highlight:new t.UniformColor(e,r.u_highlight),u_accent:new t.UniformColor(e,r.u_accent)}},hillshadePrepare:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_image:new t.Uniform1i(e,r.u_image),u_dimension:new t.Uniform2f(e,r.u_dimension),u_zoom:new t.Uniform1f(e,r.u_zoom),u_maxzoom:new t.Uniform1f(e,r.u_maxzoom),u_unpack:new t.Uniform4f(e,r.u_unpack)}},line:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels)}},lineGradient:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_image:new t.Uniform1i(e,r.u_image)}},linePattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_texsize:new t.Uniform2f(e,r.u_texsize),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_image:new t.Uniform1i(e,r.u_image),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_scale:new t.Uniform4f(e,r.u_scale),u_fade:new t.Uniform1f(e,r.u_fade)}},lineSDF:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_ratio:new t.Uniform1f(e,r.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,r.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,r.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,r.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,r.u_sdfgamma),u_image:new t.Uniform1i(e,r.u_image),u_tex_y_a:new t.Uniform1f(e,r.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,r.u_tex_y_b),u_mix:new t.Uniform1f(e,r.u_mix)}},raster:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_tl_parent:new t.Uniform2f(e,r.u_tl_parent),u_scale_parent:new t.Uniform1f(e,r.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,r.u_buffer_scale),u_fade_t:new t.Uniform1f(e,r.u_fade_t),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image0:new t.Uniform1i(e,r.u_image0),u_image1:new t.Uniform1i(e,r.u_image1),u_brightness_low:new t.Uniform1f(e,r.u_brightness_low),u_brightness_high:new t.Uniform1f(e,r.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,r.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,r.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,r.u_spin_weights)}},symbolIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture)}},symbolSDF:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texture:new t.Uniform1i(e,r.u_texture),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},symbolTextAndIcon:function(e,r){return{u_is_size_zoom_constant:new t.Uniform1i(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,r.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,r.u_size_t),u_size:new t.Uniform1f(e,r.u_size),u_camera_to_center_distance:new t.Uniform1f(e,r.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,r.u_pitch),u_rotate_symbol:new t.Uniform1i(e,r.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,r.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,r.u_fade_change),u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,r.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,r.u_coord_matrix),u_is_text:new t.Uniform1f(e,r.u_is_text),u_pitch_with_map:new t.Uniform1i(e,r.u_pitch_with_map),u_texsize:new t.Uniform2f(e,r.u_texsize),u_texsize_icon:new t.Uniform2f(e,r.u_texsize_icon),u_texture:new t.Uniform1i(e,r.u_texture),u_texture_icon:new t.Uniform1i(e,r.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,r.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,r.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,r.u_is_halo)}},background:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_color:new t.UniformColor(e,r.u_color)}},backgroundPattern:function(e,r){return{u_matrix:new t.UniformMatrix4f(e,r.u_matrix),u_opacity:new t.Uniform1f(e,r.u_opacity),u_image:new t.Uniform1i(e,r.u_image),u_pattern_tl_a:new t.Uniform2f(e,r.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,r.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,r.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,r.u_pattern_br_b),u_texsize:new t.Uniform2f(e,r.u_texsize),u_mix:new t.Uniform1f(e,r.u_mix),u_pattern_size_a:new t.Uniform2f(e,r.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,r.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,r.u_scale_a),u_scale_b:new t.Uniform1f(e,r.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,r.u_tile_units_to_pixels)}}};function Wr(e,r){for(var i=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),n=0;n<i.length;n++){var o={},a=i[n],s=i.slice(n+1);Kr(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,r)}}function Kr(e,r,i,n,o){for(var a=0;a<i.length;a++){var s=i[a];if(n.isLessThan(s.tileID))break;if(r.key===s.tileID.key)return;if(s.tileID.isChildOf(r)){for(var l=r.children(1/0),u=0;u<l.length;u++)Kr(e,l[u],i.slice(a),n,o);return}}var c=r.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,r.canonical.x-(e.canonical.x<<c),r.canonical.y-(e.canonical.y<<c));o[p.key]=o[p.key]||p}function Hr(t,e,r,i,n,o,a,s){for(var l=t.context,u=l.gl,c=n?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),p=0;p<i.length;p++){var h=i[p],f=e.getTile(h),d=f.getBucket(r);if(d){var m=n?s?d.textCollisionCircle:d.iconCollisionCircle:s?d.textCollisionBox:d.iconCollisionBox;if(m){var y=h.posMatrix;0===o[0]&&0===o[1]||(y=t.translatePosMatrix(h.posMatrix,f,o,a)),c.draw(l,n?u.TRIANGLES:u.LINES,It.disabled,At.disabled,t.colorModeForRenderPass(),Ct.disabled,Ir(y,t.transform,f),r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}}}}function Yr(t,e,r,i,n,o,a){Hr(t,e,r,i,!1,n,o,a),Hr(t,e,r,i,!0,n,o,a)}var Jr=t.identity(new Float32Array(16));function Qr(e,r,i,n,o,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*r,u=-(s.verticalAlign-.5)*i,c=t.evaluateVariableOffset(e,n);return new t.Point((l/o+c[0])*a,(u/o+c[1])*a)}function $r(e,r,i,n,o,a,s,l,u,c,p){var h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,m={};f.clear();for(var y=0;y<h.length;y++){var _=h.get(y),g=e.allowVerticalPlacement&&!_.placedOrientation,v=_.hidden||!_.crossTileID||g?null:n[_.crossTileID];if(v){var x=new t.Point(_.anchorX,_.anchorY),b=Jt(x,i?l:s),w=.5+a.cameraToCenterDistance/b.signedDistanceFromCamera*.5,S=o.evaluateSizeForFeature(e.textSizeData,c,_)*w/t.ONE_EM;i&&(S*=e.tilePixelRatio/u);for(var E=v.width,T=v.height,I=Qr(v.anchor,E,T,v.textOffset,v.textBoxScale,S),A=i?Jt(x.add(I),s).point:b.point.add(r?I.rotate(-a.angle):I),z=e.allowVerticalPlacement&&_.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,C=0;C<_.numGlyphs;C++)t.addDynamicAttributes(f,A,z);p&&_.associatedIconIndex>=0&&(m[_.associatedIconIndex]={shiftedAnchor:A,angle:z})}else ae(_.numGlyphs,f)}if(p){d.clear();for(var k=e.icon.placedSymbolArray,P=0;P<k.length;P++){var M=k.get(P);if(M.hidden)ae(M.numGlyphs,d);else{var L=m[P];if(L)for(var D=0;D<M.numGlyphs;D++)t.addDynamicAttributes(d,L.shiftedAnchor,L.angle);else ae(M.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function ti(t,e,r){return r.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function ei(e,r,i,n,o,a,s,l,u,c,p,h){for(var f,d,m=e.context,y=m.gl,_=e.transform,g="map"===l,v="map"===u,x=g&&"point"!==i.layout.get("symbol-placement"),b=g&&!v&&!x,w=void 0!==i.layout.get("symbol-sort-key").constantOr(1),S=e.depthModeForSublayer(0,It.ReadOnly),E=i.layout.get("text-variable-anchor"),T=[],I=0,A=n;I<A.length;I+=1){var z=A[I],C=r.getTile(z),k=C.getBucket(i);if(k){var P=o?k.text:k.icon;if(P&&P.segments.get().length){var M=P.programConfigurations.get(i.id),L=o||k.sdfIcons,D=o?k.textSizeData:k.iconSizeData,B=v||0!==_.pitch;f||(f=e.useProgram(ti(L,o,k),M),d=t.evaluateSizeForZoom(D,_.zoom));var R=void 0,F=[0,0],O=void 0,U=void 0,V=null,N=void 0;if(o){if(O=C.glyphAtlasTexture,U=y.LINEAR,R=C.glyphAtlasTexture.size,k.iconsInText){F=C.imageAtlasTexture.size,V=C.imageAtlasTexture;var j="composite"===D.kind||"camera"===D.kind;N=B||e.options.rotating||e.options.zooming||j?y.LINEAR:y.NEAREST}}else{var q=1!==i.layout.get("icon-size").constantOr(0)||k.iconsNeedLinear;O=C.imageAtlasTexture,U=L||e.options.rotating||e.options.zooming||q||B?y.LINEAR:y.NEAREST,R=C.imageAtlasTexture.size}var Z=ce(C,1,e.transform.zoom),G=Ht(z.posMatrix,v,g,e.transform,Z),X=Yt(z.posMatrix,v,g,e.transform,Z),W=E&&k.hasTextData(),K="none"!==i.layout.get("icon-text-fit")&&W&&k.hasIconData();x&&$t(k,z.posMatrix,e,o,G,X,v,c);var H=e.translatePosMatrix(z.posMatrix,C,a,s),Y=x||o&&E||K?Jr:G,J=e.translatePosMatrix(X,C,a,s,!0),Q=L&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),$={program:f,buffers:P,uniformValues:L?k.iconsInText?qr(D.kind,d,b,v,e,H,Y,J,R,F):jr(D.kind,d,b,v,e,H,Y,J,o,R,!0):Nr(D.kind,d,b,v,e,H,Y,J,o,R),atlasTexture:O,atlasTextureIcon:V,atlasInterpolation:U,atlasInterpolationIcon:N,isSDF:L,hasHalo:Q};if(w)for(var tt=0,et=P.segments.get();tt<et.length;tt+=1){var rt=et[tt];T.push({segments:new t.SegmentVector([rt]),sortKey:rt.sortKey,state:$})}else T.push({segments:P.segments,sortKey:0,state:$})}}}w&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var it=0,nt=T;it<nt.length;it+=1){var ot=nt[it],at=ot.state;if(m.activeTexture.set(y.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,y.CLAMP_TO_EDGE),at.atlasTextureIcon&&(m.activeTexture.set(y.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,y.CLAMP_TO_EDGE)),at.isSDF){var st=at.uniformValues;at.hasHalo&&(st.u_is_halo=1,ri(at.buffers,ot.segments,i,e,at.program,S,p,h,st)),st.u_is_halo=0}ri(at.buffers,ot.segments,i,e,at.program,S,p,h,at.uniformValues)}}function ri(t,e,r,i,n,o,a,s,l){var u=i.context,c=u.gl;n.draw(u,c.TRIANGLES,o,a,s,Ct.disabled,l,r.id,t.layoutVertexBuffer,t.indexBuffer,e,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ii(t,e,r,i,n,o,a){var s,l,u,c,p,h=t.context.gl,f=r.paint.get("fill-pattern"),d=f&&f.constantOr(1),m=r.getCrossfadeParameters();a?(l=d&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=d?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,_=i;y<_.length;y+=1){var g=_[y],v=e.getTile(g);if(!d||v.patternsLoaded()){var x=v.getBucket(r);if(x){var b=x.programConfigurations.get(r.id),w=t.useProgram(l,b);d&&(t.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePatternPaintBuffers(m));var S=f.constantOr(null);if(S&&v.imageAtlas){var E=v.imageAtlas,T=E.patternPositions[S.to.toString()],I=E.patternPositions[S.from.toString()];T&&I&&b.setConstantPatternPositions(T,I)}var A=t.translatePosMatrix(g.posMatrix,v,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,p=x.segments2;var z=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&d?Sr(A,t,m,v,z):wr(A,z)}else c=x.indexBuffer,p=x.segments,u=d?br(A,t,m,v):xr(A);w.draw(t.context,s,n,t.stencilModeForClipping(g),o,Ct.disabled,u,r.id,x.layoutVertexBuffer,c,p,r.paint,t.transform.zoom,b)}}}}function ni(t,e,r,i,n,o,a){for(var s=t.context,l=s.gl,u=r.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=r.getCrossfadeParameters(),h=r.paint.get("fill-extrusion-opacity"),f=0,d=i;f<d.length;f+=1){var m=d[f],y=e.getTile(m),_=y.getBucket(r);if(_){var g=_.programConfigurations.get(r.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(p));var x=u.constantOr(null);if(x&&y.imageAtlas){var b=y.imageAtlas,w=b.patternPositions[x.to.toString()],S=b.patternPositions[x.from.toString()];w&&S&&g.setConstantPatternPositions(w,S)}var E=t.translatePosMatrix(m.posMatrix,y,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),T=r.paint.get("fill-extrusion-vertical-gradient"),I=c?vr(E,t,T,h,m,p,y):gr(E,t,T,h);v.draw(s,s.gl.TRIANGLES,n,o,a,Ct.backCCW,I,r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,r.paint,t.transform.zoom,g)}}}function oi(t,e,r,i,n,o){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=kr(t,e,r);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(a,s.TRIANGLES,i,n,o,Ct.disabled,c,r.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(a,s.TRIANGLES,i,n,o,Ct.disabled,c,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function ai(e,r,i,n,o,a,s){var l=e.context,u=l.gl,c=r.dem;if(c&&c.data){var p=c.dim,h=c.stride,f=c.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(h),r.demTexture){var d=r.demTexture;d.update(f,{premultiply:!1}),d.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else r.demTexture=new t.Texture(l,f,u.RGBA,{premultiply:!1}),r.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var m=r.fbo;if(!m){var y=new t.Texture(l,{width:p,height:p,data:null},u.RGBA);y.bind(u.LINEAR,u.CLAMP_TO_EDGE),(m=r.fbo=l.createFramebuffer(p,p)).colorAttachment.set(y.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,p,p]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,o,a,s,Ct.disabled,Pr(r.tileID,c,n),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function si(e,r,i,n,o){var a=n.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,u=r?(s-r.timeAdded)/a:-1,c=i.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function li(e,r,i){var n=e.context,o=n.gl,a=i.posMatrix,s=e.useProgram("debug"),l=It.disabled,u=At.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(n,o.LINE_STRIP,l,u,c,Ct.disabled,Ar(a,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=r.getTileByID(i.key).latestRawTileData,f=h&&h.byteLength||0,d=Math.floor(f/1024),m=r.getTile(i).tileSize,y=512/Math.min(m,512),_=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(_+=" => "+i.overscaledZ);for(var g=function(t,e,r,i){i=i||1;var n,o,a,s,l,u,c,p,h=[];for(n=0,o=t.length;n<o;n++)if(l=ui[t[n]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=e+l[1][a]*i,c=r-l[1][a+1]*i,p&&h.push(p.x,p.y,u,c),p={x:u,y:c});e+=l[0]*i}return h}(_+" "+d+"kb",50,200*y,5*y),v=new t.StructArrayLayout2i4,x=new t.StructArrayLayout2ui4,b=0;b<g.length;b+=2)v.emplaceBack(g[b],g[b+1]),x.emplaceBack(b,b+1);for(var w=n.createVertexBuffer(v,Ve.members),S=n.createIndexBuffer(x),E=t.SegmentVector.simpleSegment(0,0,v.length/2,v.length/2),T=t.EXTENT/(Math.pow(2,e.transform.zoom-i.overscaledZ)*m*y),I=[],A=-1;A<=1;A++)for(var z=-1;z<=1&&(0!==A||0!==z);z++)I.push([A,z]);for(var C=0;C<I.length;C++){var k=I[C];s.draw(n,o.LINES,l,u,c,Ct.disabled,Ar(t.translate([],a,[T*k[0],T*k[1],0]),t.Color.white),p,w,S,E)}s.draw(n,o.LINES,l,u,c,Ct.disabled,Ar(a,t.Color.black),p,w,S,E),w.destroy(),S.destroy(),E.destroy()}var ui={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},ci={symbol:function(e,r,i,n,o){if("translucent"===e.renderPass){var a=At.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,r,i,n,o,a,s){for(var l=r.transform,u="map"===o,c="map"===a,p=0,h=e;p<h.length;p+=1){var f=h[p],d=n.getTile(f),m=d.getBucket(i);if(m&&m.text&&m.text.segments.get().length){var y=m.textSizeData,_=t.evaluateSizeForZoom(y,l.zoom),g=ce(d,1,r.transform.zoom),v=Ht(f.posMatrix,c,u,r.transform,g),x="none"!==i.layout.get("icon-text-fit")&&m.hasIconData();if(_){var b=Math.pow(2,l.zoom-d.tileID.overscaledZ);$r(m,u,c,s,t.symbolSize,l,v,f.posMatrix,b,_,x)}}}}(n,e,i,r,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&ei(e,r,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&ei(e,r,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&(Yr(e,r,i,n,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Yr(e,r,i,n,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))}},circle:function(e,r,i,n){if("translucent"===e.renderPass){var o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,p=e.depthModeForSublayer(0,It.ReadOnly),h=At.disabled,f=e.colorModeForRenderPass(),d=[],m=0;m<n.length;m++){var y=n[m],_=r.getTile(y),g=_.getBucket(i);if(g){var v=g.programConfigurations.get(i.id),x={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Er(e,y,_,i)};if(l)for(var b=0,w=g.segments.get();b<w.length;b+=1){var S=w[b];d.push({segments:new t.SegmentVector([S]),sortKey:S.sortKey,state:x})}else d.push({segments:g.segments,sortKey:0,state:x})}}l&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var E=0,T=d;E<T.length;E+=1){var I=T[E],A=I.state,z=A.programConfiguration,C=A.program,k=A.layoutVertexBuffer,P=A.indexBuffer,M=A.uniformValues,L=I.segments;C.draw(u,c.TRIANGLES,p,h,f,Ct.disabled,M,i.id,k,P,L,i.paint,e.transform.zoom,z)}}}},heatmap:function(e,r,i,n){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,It.ReadOnly),l=At.disabled,u=new zt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,r){var i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=r.heatmapFbo;if(n)i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),n=r.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,r,i,n){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r.width/4,r.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),n.colorAttachment.set(i),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,n.colorAttachment.setDirty(),t(e,r,i,n))}(t,e,o,n)}}(o,e,i),o.clear({color:t.Color.transparent});for(var c=0;c<n.length;c++){var p=n[c];if(!r.hasRenderableParent(p)){var h=r.getTile(p),f=h.getBucket(i);if(f){var d=f.programConfigurations.get(i.id),m=e.useProgram("heatmap",d),y=e.transform.zoom;m.draw(o,a.TRIANGLES,s,l,u,Ct.disabled,Cr(p.posMatrix,h,y,i.paint.get("heatmap-intensity")),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){var i=e.context,n=i.gl,o=r.heatmapFbo;if(o){i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1);var a=r.colorRampTexture;a||(a=r.colorRampTexture=new t.Texture(i,r.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,n.TRIANGLES,It.disabled,At.disabled,e.colorModeForRenderPass(),Ct.disabled,function(e,r,i,n){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_color_ramp:n,u_opacity:r.paint.get("heatmap-opacity")}}(e,r,0,1),r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}}(e,i))},line:function(e,r,i,n){if("translucent"===e.renderPass){var o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,It.ReadOnly),l=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),p=c.constantOr(1),h=i.paint.get("line-gradient"),f=i.getCrossfadeParameters(),d=u?"lineSDF":p?"linePattern":h?"lineGradient":"line",m=e.context,y=m.gl,_=!0;if(h){m.activeTexture.set(y.TEXTURE0);var g=i.gradientTexture;if(!i.gradient)return;g||(g=i.gradientTexture=new t.Texture(m,i.gradient,y.RGBA)),g.bind(y.LINEAR,y.CLAMP_TO_EDGE)}for(var v=0,x=n;v<x.length;v+=1){var b=x[v],w=r.getTile(b);if(!p||w.patternsLoaded()){var S=w.getBucket(i);if(S){var E=S.programConfigurations.get(i.id),T=e.context.program.get(),I=e.useProgram(d,E),A=_||I.program!==T,z=c.constantOr(null);if(z&&w.imageAtlas){var C=w.imageAtlas,k=C.patternPositions[z.to.toString()],P=C.patternPositions[z.from.toString()];k&&P&&E.setConstantPatternPositions(k,P)}var M=u?Rr(e,w,i,u,f):p?Br(e,w,i,f):h?Dr(e,w,i):Lr(e,w,i);u&&(A||e.lineAtlas.dirty)?(m.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(m)):p&&(m.activeTexture.set(y.TEXTURE0),w.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(f)),I.draw(m,y.TRIANGLES,s,e.stencilModeForClipping(b),l,Ct.disabled,M,i.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,i.paint,e.transform.zoom,E),_=!1}}}}}},fill:function(e,r,i,n){var o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?It.ReadWrite:It.ReadOnly);ii(e,r,i,n,c,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){var p=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,It.ReadOnly);ii(e,r,i,n,p,s,!0)}}},"fill-extrusion":function(t,e,r,i){var n=r.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var o=new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D);if(1!==n||r.paint.get("fill-extrusion-pattern").constantOr(1))ni(t,e,r,i,o,At.disabled,zt.disabled),ni(t,e,r,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();ni(t,e,r,i,o,At.disabled,a)}}},hillshade:function(t,e,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,It.ReadOnly),s=At.disabled,l=t.colorModeForRenderPass(),u=0,c=i;u<c.length;u+=1){var p=c[u],h=e.getTile(p);h.needsHillshadePrepare&&"offscreen"===t.renderPass?ai(t,h,r,o,a,s,l):"translucent"===t.renderPass&&oi(t,h,r,a,s,l)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,r,i){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity"))for(var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster"),l=At.disabled,u=t.colorModeForRenderPass(),c=i.length&&i[0].overscaledZ,p=!t.options.moving,h=0,f=i;h<f.length;h+=1){var d=f[h],m=t.depthModeForSublayer(d.overscaledZ-c,1===r.paint.get("raster-opacity")?It.ReadWrite:It.ReadOnly,o.LESS),y=e.getTile(d),_=t.transform.calculatePosMatrix(d.toUnwrapped(),p);y.registerFadeDuration(r.paint.get("raster-fade-duration"));var g=e.findLoadedParent(d,0),v=si(y,g,e,r,t.transform),x=void 0,b=void 0,w="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),x=Math.pow(2,g.tileID.overscaledZ-y.tileID.overscaledZ),b=[y.tileID.canonical.x*x%1,y.tileID.canonical.y*x%1]):y.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var S=Ur(_,b||[0,0],x||1,v,r);a instanceof M?s.draw(n,o.TRIANGLES,m,l,u,Ct.disabled,S,r.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments?s.draw(n,o.TRIANGLES,m,l,u,Ct.disabled,S,r.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments,r.paint,t.transform.zoom):s.draw(n,o.TRIANGLES,m,l,u,Ct.disabled,S,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,r){var i=r.paint.get("background-color"),n=r.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=r.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===i.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var p=At.disabled,h=t.depthModeForSublayer(0,"opaque"===c?It.ReadWrite:It.ReadOnly),f=t.colorModeForRenderPass(),d=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=r.getCrossfadeParameters(),_=0,g=m;_<g.length;_+=1){var v=g[_],x=t.transform.calculatePosMatrix(v.toUnwrapped()),b=u?Gr(x,n,t,u,{tileID:v,tileSize:l},y):Zr(x,n,i);d.draw(o,a.TRIANGLES,h,p,f,Ct.disabled,b,r.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,r){for(var i=0;i<r.length;i++)li(t,e,r[i])},custom:function(t,e,r){var i=t.context,n=r.implementation;if("offscreen"===t.renderPass){var o=n.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(n,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(At.disabled);var a="3d"===n.renderingMode?new It(t.context.gl.LEQUAL,It.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,It.ReadOnly);i.setDepthMode(a),n.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},pi=function(e,r){this.context=new kt(e),this.transform=r,this._tileTextures={},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Be,this.gpuTimers={}};function hi(t,e){if(t.y>e.y){var r=t;t=e,e=r}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function fi(t,e,r,i,n){var o=Math.max(r,Math.floor(e.y0)),a=Math.min(i,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=l*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=u*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;n(Math.floor(d),Math.ceil(f),h)}}function di(t,e,r,i,n,o){var a,s=hi(t,e),l=hi(e,r),u=hi(r,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&fi(u,s,i,n,o),l.dy&&fi(u,l,i,n,o)}pi.prototype.resize=function(e,r){var i=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=r*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,o=this.style._order;n<o.length;n+=1){var a=o[n];this.style._layers[a].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},pi.prototype.setup=function(){var e=this.context,r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(r,Ve.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,Ve.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ve.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new At({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},pi.prototype.clearStencil=function(){var e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,It.disabled,this.stencilClearMode,zt.disabled,Ct.disabled,zr(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},pi.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var r=this.context,i=r.gl;this.nextStencilID+e.length>256&&this.clearStencil(),r.setColorMode(zt.disabled),r.setDepthMode(It.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(r,i.TRIANGLES,It.disabled,new At({func:i.ALWAYS,mask:0},l,255,i.KEEP,i.KEEP,i.REPLACE),zt.disabled,Ct.disabled,zr(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},pi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new At({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},pi.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new At({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},pi.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new zt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?zt.unblended:zt.alphaBlended},pi.prototype.depthModeForSublayer=function(t,e,r){if(!this.opaquePassEnabledForLayer())return It.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new It(r||this.context.gl.LEQUAL,e,[i,i])},pi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},pi.prototype.render=function(e,r){var i=this;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var n=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var l,u,c={},p={},h={};for(var f in o){var d=o[f];c[f]=d.getVisibleCoordinates(),p[f]=c[f].slice().reverse(),h[f]=d.getVisibleCoordinates(!0).reverse()}for(var m in o){var y=o[m],_=y.getSource();if("raster"===_.type||"raster-dem"===_.type){for(var g=[],v=0,x=c[m];v<x.length;v+=1){var b=x[v];g.push(y.getTile(b))}Wr(g,this.context)}}this.opaquePassCutoff=1/0;for(var w=0;w<n.length;w++){var S=n[w];if(this.style._layers[S].is3D()){this.opaquePassCutoff=w;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var E=0,T=n;E<T.length;E+=1){var I=T[E],A=this.style._layers[I];if(A.hasOffscreenPass()&&!A.isHidden(this.transform.zoom)){var z=p[A.source];("custom"===A.type||z.length)&&this.renderLayer(this,o[A.source],A,z)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var C=this.style._layers[n[this.currentLayer]],k=o[C.source],P=c[C.source];this._renderTileClippingMasks(C,P),this.renderLayer(this,k,C,P)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var M=this.style._layers[n[this.currentLayer]],L=o[M.source],D=("symbol"===M.type?h:p)[M.source];this._renderTileClippingMasks(M,c[M.source]),this.renderLayer(this,L,M,D)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(i.transform.zoom)&&(t.source!==(u&&u.id)&&(u=i.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))}),l&&ci.debug(this,l,l.getVisibleCoordinates())),this.context.setDefault()},pi.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},pi.prototype.renderLayer=function(t,e,r,i){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||i.length)&&(this.id=r.id,this.gpuTimingStart(r),ci[r.type](t,e,r,i,this.style.placement.variableOffsets),this.gpuTimingEnd())},pi.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,r=this.gpuTimers[t.id];r||(r=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),r.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,r.query)}},pi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},pi.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},pi.prototype.queryGpuTimers=function(t){var e={};for(var r in t){var i=t[r],n=this.context.extTimerQuery,o=n.getQueryObjectEXT(i.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i.query),e[r]=o}return e},pi.prototype.translatePosMatrix=function(e,r,i,n,o){if(!i[0]&&!i[1])return e;var a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);i=[i[0]*l-i[1]*s,i[0]*s+i[1]*l]}var u=[o?i[0]:ce(r,i[0],this.transform.zoom),o?i[1]:ce(r,i[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},pi.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},pi.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},pi.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),r=this.imageManager.getPattern(t.to.toString());return!e||!r},pi.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var r=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new yr(this.context,dr[t],e,Xr[t],this._showOverdrawInspector)),this.cache[r]},pi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},pi.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var mi=function(e,r,i,n,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},yi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};mi.prototype.clone=function(){var t=new mi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},yi.minZoom.get=function(){return this._minZoom},yi.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},yi.maxZoom.get=function(){return this._maxZoom},yi.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},yi.minPitch.get=function(){return this._minPitch},yi.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},yi.maxPitch.get=function(){return this._maxPitch},yi.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},yi.renderWorldCopies.get=function(){return this._renderWorldCopies},yi.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},yi.worldSize.get=function(){return this.tileSize*this.scale},yi.centerPoint.get=function(){return this.size._div(2)},yi.size.get=function(){return new t.Point(this.width,this.height)},yi.bearing.get=function(){return-this.angle/Math.PI*180},yi.bearing.set=function(e){var r=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},yi.pitch.get=function(){return this._pitch/Math.PI*180},yi.pitch.set=function(e){var r=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())},yi.fov.get=function(){return this._fov/Math.PI*180},yi.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},yi.zoom.get=function(){return this._zoom},yi.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},yi.center.get=function(){return this._center},yi.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},mi.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},mi.prototype.getVisibleUnwrappedCoordinates=function(e){var r=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var i=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(i.x,n.x,o.x,a.x)),l=Math.floor(Math.max(i.x,n.x,o.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&r.push(new t.UnwrappedTileID(u,e));return r},mi.prototype.coveringTiles=function(e){var r=this.coveringZoomLevel(e),i=r;if(void 0!==e.minzoom&&r<e.minzoom)return[];void 0!==e.maxzoom&&r>e.maxzoom&&(r=e.maxzoom);var n=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,r),a=new t.Point(o*n.x-.5,o*n.y-.5);return function(e,r,i,n){void 0===n&&(n=!0);var o=1<<e,a={};function s(r,s,l){var u,c,p,h;if(l>=0&&l<=o)for(u=r;u<s;u++)c=Math.floor(u/o),p=(u%o+o)%o,0!==c&&!0!==n||(h=new t.OverscaledTileID(i,c,e,p,l),a[h.key]=h)}var l=r.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return di(l[0],l[1],l[2],0,o,s),di(l[2],l[3],l[0],0,o,s),Object.keys(a).map(function(t){return a[t]})}(r,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?i:r,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},mi.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},yi.unmodified.get=function(){return this._unmodified},mi.prototype.zoomScale=function(t){return Math.pow(2,t)},mi.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},mi.prototype.project=function(e){var r=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(r)*this.worldSize)},mi.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},yi.point.get=function(){return this.project(this.center)},mi.prototype.setLocationAtPoint=function(e,r){var i=this.pointCoordinate(r),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-n.x),o.y-(i.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},mi.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},mi.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},mi.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},mi.prototype.coordinateLocation=function(t){return t.toLngLat()},mi.prototype.pointCoordinate=function(e){var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var n=r[3],o=i[3],a=r[0]/n,s=i[0]/o,l=r[1]/n,u=i[1]/o,c=r[2]/n,p=i[2]/o,h=c===p?0:(0-c)/(p-c);return new t.MercatorCoordinate(t.number(a,s,h)/this.worldSize,t.number(l,u,h)/this.worldSize)},mi.prototype.coordinatePoint=function(e){var r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.Point(r[0]/r[3],r[1]/r[3])},mi.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},mi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},mi.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},mi.prototype.calculatePosMatrix=function(e,r){void 0===r&&(r=!1);var i=e.key,n=r?this._alignedPosMatrixCache:this._posMatrixCache;if(n[i])return n[i];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,o.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,r?this.alignedProjMatrix:this.projMatrix,l),n[i]=new Float32Array(l),n[i]},mi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},mi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,r,i,n,o=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=t.mercatorYfromLat(p[1])*this.worldSize,e=(a=t.mercatorYfromLat(p[0])*this.worldSize)-o<u.y?u.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,r=(l=t.mercatorXfromLng(h[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var f=this.point,d=Math.max(r||0,e||0);if(d)return this.center=this.unproject(new t.Point(r?(l+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,y=u.y/2;m-y<o&&(n=o+y),m+y>a&&(n=a-y)}if(this.lngRange){var _=f.x,g=u.x/2;_-g<s&&(i=s+g),_+g>l&&(i=l-g)}void 0===i&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==i?i:f.x,void 0!==n?n:f.y))),this._unmodified=c,this._constraining=!1}},mi.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,r=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-r-e),n=this.point,o=n.x,a=n.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,l,s),t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-o,-a,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var c=this.width%2/2,p=this.height%2/2,h=Math.cos(this.angle),f=Math.sin(this.angle),d=o-Math.round(o)+h*c+f*p,m=a-Math.round(a)+h*p+f*c,y=new Float64Array(u);if(t.translate(y,y,[d>.5?d-1:d,m>.5?m-1:m,0]),this.alignedProjMatrix=y,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},mi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance},mi.prototype.getCameraPoint=function(){var e=this._pitch,r=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,r))},mi.prototype.getCameraQueryGeometry=function(e){var r=this.getCameraPoint();if(1===e.length)return[e[0],r];for(var i=r.x,n=r.y,o=r.x,a=r.y,s=0,l=e;s<l.length;s+=1){var u=l[s];i=Math.min(i,u.x),n=Math.min(n,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}return[new t.Point(i,n),new t.Point(o,n),new t.Point(o,a),new t.Point(i,a),new t.Point(i,n)]},Object.defineProperties(mi.prototype,yi);var _i=function(e){var r,i,n,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(r=this._updateHashUnthrottled.bind(this),300,i=!1,n=null,o=function(){n=null,i&&(r(),n=setTimeout(o,300),i=!1)},function(){return i=!0,n||o(),n})};_i.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},_i.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},_i.prototype.getHashString=function(e){var r=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,n),a=Math.round(r.lng*o)/o,s=Math.round(r.lat*o)/o,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+i:i+"/"+s+"/"+a,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var p=this._hashName,h=!1,f=t.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===p?(h=!0,e+"="+c):t}).filter(function(t){return t});return h||f.push(p+"="+c),"#"+f.join("&")}return"#"+c},_i.prototype._getCurrentHash=function(){var e,r=this,i=t.window.location.hash.replace("#","");return this._hashName?(i.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===r._hashName&&(e=t)}),(e&&e[1]||"").split("/")):i.split("/")},_i.prototype._onHashChange=function(){var t=this._getCurrentHash();return t.length>=3&&!t.some(function(t){return isNaN(t)})&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},_i.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var gi=function(e){function r(r,n,o,a){void 0===a&&(a={});var s=i.mousePos(n.getCanvasContainer(),o),l=n.unproject(s);e.call(this,r,t.extend({point:s,lngLat:l,originalEvent:o},a)),this._defaultPrevented=!1,this.target=n}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),vi=function(e){function r(r,n,o){var a=i.touchPos(n.getCanvasContainer(),o),s=a.map(function(t){return n.unproject(t)}),l=a.reduce(function(t,e,r,i){return t.add(e.div(i.length))},new t.Point(0,0)),u=n.unproject(l);e.call(this,r,{points:a,point:l,lngLats:s,lngLat:u,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),xi=function(t){function e(e,r,i){t.call(this,e,{originalEvent:i}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,r),e}(t.Event),bi=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};bi.prototype.setZoomRate=function(t){this._defaultZoomRate=t},bi.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},bi.prototype.isEnabled=function(){return!!this._enabled},bi.prototype.isActive=function(){return!!this._active},bi.prototype.isZooming=function(){return!!this._zooming},bi.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},bi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},bi.prototype.onWheel=function(e){if(this.isEnabled()){var r=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,i=t.browser.now(),n=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&Math.abs(r)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this.isActive()||this._start(e)),e.preventDefault()}},bi.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},bi.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},bi.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var r=this._map.transform;if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==n&&(n=1/n);var o="number"==typeof this._targetZoom?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:r.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(c);r.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else r.zoom=a,u=!0;r.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},bi.prototype._smoothOutEasing=function(e){var r=t.ease;if(this._prevEase){var i=this._prevEase,n=(t.browser.now()-i.start)/i.duration,o=i.easing(n+.01)-i.easing(n),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:r},r};var wi=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};wi.prototype.isEnabled=function(){return!!this._enabled},wi.prototype.isActive=function(){return!!this._active},wi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},wi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wi.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),i.disableDrag(),this._startPos=this._lastPos=i.mousePos(this._el,e),this._active=!0)},wi.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var n=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),s=Math.max(r.y,e.y);i.setTransform(this._box,"translate("+n+"px,"+a+"px)"),this._box.style.width=o-n+"px",this._box.style.height=s-a+"px"}},wi.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,n=i.mousePos(this._el,e);this._finish(),i.suppressClick(),r.x===n.x&&r.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,n,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},wi.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},wi.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},wi.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,{originalEvent:r}))};var Si=t.bezier(0,0,.25,1),Ei=function(e,r){this._map=e,this._el=r.element||e.getCanvasContainer(),this._state="disabled",this._button=r.button||"right",this._bearingSnap=r.bearingSnap||0,this._pitchWithRotate=!1!==r.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Ei.prototype.isEnabled=function(){return"disabled"!==this._state},Ei.prototype.isActive=function(){return"active"===this._state},Ei.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Ei.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Ei.prototype.onMouseDown=function(e){if("enabled"===this._state){var r="touchstart"===e.type;if(r)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=i.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==i.mouseButton(e))return;this._eventButton=0}i.disableDrag(),r?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=i.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Ei.prototype._onMouseMove=function(t){var e=i.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Ei.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var r=this._map.transform,i=this._prevPos,n=this._lastPos,o=.8*(i.x-n.x),a=-.5*(i.y-n.y),s=r.bearing-o,l=r.pitch-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]);var p=r.bearing;if(r.bearing=s,this._pitchWithRotate){var h=r.pitch;r.pitch=l,r.pitch!==h&&this._fireEvent("pitch",e)}r.bearing!==p&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Ei.prototype._onMouseUp=function(t){if("touchend"===t.type&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),i.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Ei.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Ei.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),i.enableDrag()},Ei.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Ei.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var r=this._map,i=r.getBearing(),n=this._inertia,o=function(){Math.abs(i)<e._bearingSnap?r.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(n.length<2)o();else{var a=n[0],s=n[n.length-1],l=n[n.length-2],u=r._normalizeBearing(i,l[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;u+=p*f*(d/2),Math.abs(r._normalizeBearing(u,0))<this._bearingSnap&&(u=r._normalizeBearing(0,u)),r.rotateTo(u,{duration:1e3*d,easing:Si,noMoveStart:!0},{originalEvent:t})}else o()}},Ei.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},Ei.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var Ti={linearity:.3,easing:t.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},Ii=function(e,r){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=r.clickTolerance||1,this._inertiaOptions=Ti,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Ii.prototype.isEnabled=function(){return"disabled"!==this._state},Ii.prototype.isActive=function(){return"active"===this._state},Ii.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=t.extend(Ti,e))},Ii.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Ii.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==i.mouseButton(e)||(i.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},Ii.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(i.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},Ii.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=i.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?i.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},Ii.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every(function(t,r){return e[r]===t})},Ii.prototype._onMove=function(e){e.preventDefault();var r=t.window.TouchEvent&&e instanceof t.window.TouchEvent?i.touchPos(this._el,e):null,n=i.mousePos(this._el,e);(r?this._touchesMatch(this._lastTouch,r):this._lastPos.equals(n))||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._lastTouch=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Ii.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},Ii.prototype._onMouseUp=function(t){if(0===i.mouseButton(t))switch(this._state){case"active":this._state="enabled",i.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Ii.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Ii.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&i.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Ii.prototype._onBlur=function(t){this._abort(t)},Ii.prototype._unbind=function(){i.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onTouchEnd),i.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),i.removeEventListener(t.window.document,"mouseup",this._onMouseUp),i.removeEventListener(t.window,"blur",this._onBlur)},Ii.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},Ii.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var r=e[e.length-1],i=e[0],n=r[1].sub(i[1]),o=(r[0]-i[0])/1e3;if(0===o||r[1].equals(i[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,l=a.easing,u=a.maxSpeed,c=a.deceleration,p=n.mult(s/o),h=p.mag();h>u&&(h=u,p._unit()._mult(h));var f=h/(c*s),d=p.mult(-f/2);this._map.panBy(d,{duration:1e3*f,easing:l,noMoveStart:!0},{originalEvent:t})}}},Ii.prototype._fireEvent=function(e,r){return this._map.fire(new t.Event(e,r?{originalEvent:r}:{}))},Ii.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>0&&r-e[0][0]>160;)e.shift()};var Ai=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function zi(t){return t*(2-t)}Ai.prototype.isEnabled=function(){return!!this._enabled},Ai.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Ai.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Ai.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,r=0,i=0,n=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:zi,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*r,pitch:a.getPitch()+10*i,offset:[100*-n,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}};var Ci=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Ci.prototype.isEnabled=function(){return!!this._enabled},Ci.prototype.isActive=function(){return!!this._active},Ci.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ci.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ci.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var r=t.points[0],i=this._tappedPoint;if(i&&i.dist(r)<=30){t.originalEvent.preventDefault();var n=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",o),e._resetTapped()},o=function(){e._map.off("touchend",n),e._resetTapped()};this._map.once("touchend",n),this._map.once("touchcancel",o)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout(function(){e._tapped=null,e._tappedPoint=null},300)},Ci.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Ci.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Ci.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Ci.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var ki=t.bezier(0,0,.15,1),Pi=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Pi.prototype.isEnabled=function(){return!!this._enabled},Pi.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Pi.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Pi.prototype.disableRotation=function(){this._rotationDisabled=!0},Pi.prototype.enableRotation=function(){this._rotationDisabled=!1},Pi.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Pi.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=i.mousePos(this._el,e.touches[0]),n=i.mousePos(this._el,e.touches[1]),o=r.add(n).div(2);this._startVec=r.sub(n),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],i.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.addEventListener(t.window.document,"touchend",this._onEnd)}},Pi.prototype._getTouchEventData=function(t){var e=i.mousePos(this._el,t.touches[0]),r=i.mousePos(this._el,t.touches[1]),n=e.sub(r);return{vec:n,center:e.add(r).div(2),scale:n.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI}},Pi.prototype._onMove=function(e){if(2===e.touches.length){var r=this._getTouchEventData(e),i=r.vec,n=r.scale,o=r.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==n||Math.abs(1-n)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=i)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Pi.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var r=this._map.transform;this._startScale||(this._startScale=r.scale,this._startBearing=r.bearing);var i=this._getTouchEventData(this._lastTouchEvent),n=i.center,o=i.bearing,a=i.scale,s=r.pointLocation(n),l=r.locationPoint(s);"rotate"===e&&(r.bearing=this._startBearing+o),r.zoom=r.scaleZoom(this._startScale*a),r.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,n])}},Pi.prototype._onEnd=function(e){i.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),i.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,n=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],l=o[0],u=a.transform.scaleZoom(n*s[1]),c=a.transform.scaleZoom(n*l[1]),p=u-c,h=(s[0]-l[0])/1e3,f=s[2];if(0!==h&&u!==c){var d=.15*p/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var m=1e3*Math.abs(d/(12*.15)),y=u+d*m/2e3;a.easeTo({zoom:y,duration:m,easing:ki,around:this._aroundCenter?a.getCenter():a.unproject(f),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},Pi.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,r=t.browser.now();e.length>2&&r-e[0][0]>160;)e.shift()};var Mi={scrollZoom:bi,boxZoom:wi,dragRotate:Ei,dragPan:Ii,keyboard:Ai,doubleClickZoom:Ci,touchZoomRotate:Pi},Li=function(e){function r(r,i){e.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},r.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},r.prototype.panBy=function(e,r,i){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},r),i)},r.prototype.panTo=function(e,r,i){return this.easeTo(t.extend({center:e},r),i)},r.prototype.getZoom=function(){return this.transform.zoom},r.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},r.prototype.zoomTo=function(e,r,i){return this.easeTo(t.extend({zoom:e},r),i)},r.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},r.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},r.prototype.getBearing=function(){return this.transform.bearing},r.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},r.prototype.rotateTo=function(e,r,i){return this.easeTo(t.extend({bearing:e},r),i)},r.prototype.resetNorth=function(e,r){return this.rotateTo(0,t.extend({duration:1e3},e),r),this},r.prototype.resetNorthPitch=function(e,r){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),r),this},r.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},r.prototype.getPitch=function(){return this.transform.pitch},r.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},r.prototype.cameraForBounds=function(e,r){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,r)},r.prototype._cameraForBoxAndBearing=function(e,r,i,n){if("number"==typeof(n=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var o=n.padding;n.padding={top:o,bottom:o,right:o,left:o}}if(t.deepEqual(Object.keys(n.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),l=a.project(t.LngLat.convert(r)),u=s.rotate(-i*Math.PI/180),c=l.rotate(-i*Math.PI/180),p=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),h=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),f=p.sub(h),d=(a.width-n.padding.left-n.padding.right)/f.x,m=(a.height-n.padding.top-n.padding.bottom)/f.y;if(!(m<0||d<0)){var y=Math.min(a.scaleZoom(a.scale*Math.min(d,m)),n.maxZoom),_=t.Point.convert(n.offset),g=(n.padding.left-n.padding.right)/2,v=(n.padding.top-n.padding.bottom)/2,x=new t.Point(_.x+g,_.y+v).mult(a.scale/a.zoomScale(y));return{center:a.unproject(s.add(l).div(2).sub(x)),zoom:y,bearing:i}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},r.prototype.fitBounds=function(t,e,r){return this._fitInternal(this.cameraForBounds(t,e),e,r)},r.prototype.fitScreenCoordinates=function(e,r,i,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(r)),i,n),n,o)},r.prototype._fitInternal=function(e,r,i){return e?(r=t.extend(e,r)).linear?this.easeTo(r,i):this.flyTo(r,i):this},r.prototype.jumpTo=function(e,r){this.stop();var i=this.transform,n=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),this.fire(new t.Event("movestart",r)).fire(new t.Event("move",r)),n&&this.fire(new t.Event("zoomstart",r)).fire(new t.Event("zoom",r)).fire(new t.Event("zoomend",r)),o&&this.fire(new t.Event("rotatestart",r)).fire(new t.Event("rotate",r)).fire(new t.Event("rotateend",r)),a&&this.fire(new t.Event("pitchstart",r)).fire(new t.Event("pitch",r)).fire(new t.Event("pitchend",r)),this.fire(new t.Event("moveend",r))},r.prototype.easeTo=function(e,r){var i=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var n=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=n.centerPoint.add(t.Point.convert(e.offset)),h=n.pointLocation(p),f=t.LngLat.convert(e.center||h);this._normalizeCenter(f);var d,m,y=n.project(h),_=n.project(f).sub(y),g=n.zoomScale(l-o);return e.around&&(d=t.LngLat.convert(e.around),m=n.locationPoint(d)),this._zooming=l!==o,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(r,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(i._zooming&&(n.zoom=t.number(o,l,e)),i._rotating&&(n.bearing=t.number(a,u,e)),i._pitching&&(n.pitch=t.number(s,c,e)),d)n.setLocationAtPoint(d,m);else{var h=n.zoomScale(n.zoom-o),f=l>o?Math.min(2,g):Math.max(.5,g),v=Math.pow(f,1-e),x=n.unproject(y.add(_.mult(e*v)).mult(h));n.setLocationAtPoint(n.renderWorldCopies?x.wrap():x,p)}i._fireMoveEvents(r)},function(){e.delayEndEvents?i._easeEndTimeoutID=setTimeout(function(){return i._afterEase(r)},e.delayEndEvents):i._afterEase(r)},e),this},r.prototype._prepareEase=function(e,r){this._moving=!0,r||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},r.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},r.prototype._afterEase=function(e){var r=this._zooming,i=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),n&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},r.prototype.flyTo=function(e,r){var i=this;if(!e.essential&&t.browser.prefersReducedMotion){var n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:l,h=o.zoomScale(u-a),f=o.centerPoint.add(t.Point.convert(e.offset)),d=o.pointLocation(f),m=t.LngLat.convert(e.center||d);this._normalizeCenter(m);var y=o.project(d),_=o.project(m).sub(y),g=e.curve,v=Math.max(o.width,o.height),x=v/h,b=_.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,a,u),o.minZoom,o.maxZoom),S=v/o.zoomScale(w-a);g=Math.sqrt(S/b*2)}var E=g*g;function T(t){var e=(x*x-v*v+(t?-1:1)*E*E*b*b)/(2*(t?x:v)*E*b);return Math.log(Math.sqrt(e*e+1)-e)}function I(t){return(Math.exp(t)-Math.exp(-t))/2}function A(t){return(Math.exp(t)+Math.exp(-t))/2}var z=T(0),C=function(t){return A(z)/A(z+g*t)},k=function(t){return v*((A(z)*(I(e=z+g*t)/A(e))-I(z))/E)/b;var e},P=(T(1)-z)/g;if(Math.abs(b)<1e-6||!isFinite(P)){if(Math.abs(v-x)<1e-6)return this.easeTo(e,r);var M=x<v?-1:1;P=Math.abs(Math.log(x/v))/g,k=function(){return 0},C=function(t){return Math.exp(M*g*t)}}if("duration"in e)e.duration=+e.duration;else{var L="screenSpeed"in e?+e.screenSpeed/g:+e.speed;e.duration=1e3*P/L}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=p!==l,this._prepareEase(r,!1),this._ease(function(e){var n=e*P,h=1/C(n);o.zoom=1===e?u:a+o.scaleZoom(h),i._rotating&&(o.bearing=t.number(s,c,e)),i._pitching&&(o.pitch=t.number(l,p,e));var d=1===e?m:o.unproject(y.add(_.mult(k(n))).mult(h));o.setLocationAtPoint(o.renderWorldCopies?d.wrap():d,f),i._fireMoveEvents(r)},function(){return i._afterEase(r)},e),this},r.prototype.isEasing=function(){return!!this._easeFrameId},r.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},r.prototype._ease=function(e,r,i){!1===i.animate||0===i.duration?(e(1),r()):(this._easeStart=t.browser.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},r.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},r.prototype._normalizeBearing=function(e,r){e=t.wrap(e,-180,180);var i=Math.abs(e-r);return Math.abs(e-360-r)<i&&(e-=360),Math.abs(e+360-r)<i&&(e+=360),e},r.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var r=t.lng-e.center.lng;t.lng+=r>180?-360:r<-180?360:0}},r}(t.Evented),Di=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Di.prototype.getDefaultPosition=function(){return"bottom-right"},Di.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Di.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Di.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var i=r.reduce(function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<r.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+i+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},Di.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Di.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var r=this._map.style.sourceCaches;for(var i in r){var n=r[i];if(n.used){var o=n.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length});var a=(t=t.filter(function(e,r){for(var i=r+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Di.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Bi.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bi.prototype.getDefaultPosition=function(){return"bottom-left"},Bi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Bi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Bi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Ri=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ri.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Ri.prototype.remove=function(t){for(var e=this._currentlyRunning,r=0,i=e?this._queue.concat(e):this._queue;r<i.length;r+=1){var n=i[r];if(n.id===t)return void(n.cancelled=!0)}},Ri.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!i.cancelled&&(i.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ri.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Fi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Oi=t.window.HTMLImageElement,Ui=t.window.HTMLElement,Vi=0,Ni=60,ji={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:Vi,maxPitch:Ni,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qi=function(n){function o(e){var r=this;if(null!=(e=t.extend({},ji,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<Vi)throw new Error("minPitch must be greater than or equal to "+Vi);if(null!=e.maxPitch&&e.maxPitch>Ni)throw new Error("maxPitch must be less than or equal to "+Ni);var o=new mi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(n.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Ri,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Fi,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Ui))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),n=null,o=!1,a=null;for(var s in Mi)t[s]=new Mi[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);i.addEventListener(r,"mouseout",function(e){t.fire(new gi("mouseout",t,e))}),i.addEventListener(r,"mousedown",function(n){o=!0,a=i.mousePos(r,n);var s=new gi("mousedown",t,n);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(n),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(n),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(n))}),i.addEventListener(r,"mouseup",function(e){var r=t.dragRotate.isActive();n&&!r&&t.fire(new gi("contextmenu",t,n)),n=null,o=!1,t.fire(new gi("mouseup",t,e))}),i.addEventListener(r,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var i=e.target;i&&i!==r;)i=i.parentNode;i===r&&t.fire(new gi("mousemove",t,e))}}),i.addEventListener(r,"mouseover",function(e){for(var i=e.target;i&&i!==r;)i=i.parentNode;i===r&&t.fire(new gi("mouseover",t,e))}),i.addEventListener(r,"touchstart",function(r){var i=new vi("touchstart",t,r);t.fire(i),i.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(r),t.touchZoomRotate.onStart(r),t.doubleClickZoom.onTouchStart(i))},{passive:!1}),i.addEventListener(r,"touchmove",function(e){t.fire(new vi("touchmove",t,e))},{passive:!1}),i.addEventListener(r,"touchend",function(e){t.fire(new vi("touchend",t,e))}),i.addEventListener(r,"touchcancel",function(e){t.fire(new vi("touchcancel",t,e))}),i.addEventListener(r,"click",function(n){var o=i.mousePos(r,n);(!a||o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new gi("click",t,n))}),i.addEventListener(r,"dblclick",function(e){var r=new gi("dblclick",t,e);t.fire(r),r.defaultPrevented||t.doubleClickZoom.onDblClick(r)}),i.addEventListener(r,"contextmenu",function(e){var r=t.dragRotate.isActive();o||r?o&&(n=e):t.fire(new gi("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),i.addEventListener(r,"wheel",function(r){e.interactive&&t.stop();var i=new xi("wheel",t,r);t.fire(i),i.defaultPrevented||t.scrollZoom.onWheel(r)},{passive:!1})}(this,e);var a="string"==typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new _i(a).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Di({customAttribution:e.customAttribution})),this.addControl(new Bi,e.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(e,r){if(void 0===r&&e.getDefaultPosition&&(r=e.getDefaultPosition()),void 0===r&&(r="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var i=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[r];return-1!==r.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},o.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this},o.prototype.resize=function(e){var r=this._containerDimensions(),i=r[0],n=r[1];return this._resizeCanvas(i,n),this.transform.resize(i,n),this.painter.resize(i,n),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},o.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(t){if((t=null==t?Vi:t)<Vi)throw new Error("minPitch must be greater than or equal to "+Vi);if(t>=Vi&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between "+Vi+" and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(t){if((t=null==t?Ni:t)>Ni)throw new Error("maxPitch must be less than or equal to "+Ni);if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},o.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},o.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},o.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},o.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},o.prototype.on=function(t,e,r){var i=this;if(void 0===r)return n.prototype.on.call(this,t,e);var o=function(){var n;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:r,delegates:{mousemove:function(n){var a=i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[];a.length?o||(o=!0,r.call(i,new gi(t,i,n.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:r,delegates:{mousemove:function(n){(i.getLayer(e)?i.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,r.call(i,new gi(t,i,n.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(i,new gi(t,i,e.originalEvent)))}}}}return{layer:e,listener:r,delegates:(n={},n[t]=function(t){var n=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,r.call(i,t),delete t.features)},n)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},o.prototype.off=function(t,e,r){if(void 0===r)return n.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},o.prototype.queryRenderedFeatures=function(e,r){if(!this.style)return[];var i;if(void 0!==r||void 0===e||e instanceof t.Point||Array.isArray(e)||(r=e,e=void 0),r=r||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])i=[t.Point.convert(e)];else{var n=t.Point.convert(e[0]),o=t.Point.convert(e[1]);i=[n,new t.Point(o.x,n.y),o,new t.Point(n.x,o.y),n]}return this.style.queryRenderedFeatures(i,r,this.transform)},o.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},o.prototype.setStyle=function(e,r){return!1!==(r=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))},o.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},o.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ue(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},o.prototype._diffStyle=function(e,i){var n=this;if("string"==typeof e){var o=this._requestManager.normalizeStyleURL(e),a=this._requestManager.transformRequest(o,t.ResourceType.Style);t.getJSON(a,function(e,r){e?n.fire(new t.ErrorEvent(e)):r&&n._updateDiff(r,i)})}else"object"==r(e)&&this._updateDiff(e,i)},o.prototype._updateDiff=function(e,r){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,r)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},o.prototype.isSourceLoaded=function(e){var r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},o.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var r=t[e]._tiles;for(var i in r){var n=r[i];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},o.prototype.addSourceType=function(t,e,r){return this.style.addSourceType(t,e,r)},o.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},o.prototype.getSource=function(t){return this.style.getSource(t)},o.prototype.addImage=function(e,r,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var o=i.sdf;void 0===o&&(o=!1);var a=i.stretchX,s=i.stretchY,l=i.content;if(r instanceof Oi){var u=t.browser.getImageData(r),c=u.width,p=u.height,h=u.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},h),pixelRatio:n,stretchX:a,stretchY:s,content:l,sdf:o,version:0})}else{if(void 0===r.width||void 0===r.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var f=r.width,d=r.height,m=r.data,y=r;this.style.addImage(e,{data:new t.RGBAImage({width:f,height:d},new Uint8Array(m)),pixelRatio:n,stretchX:a,stretchY:s,content:l,sdf:o,version:0,userImage:y}),y.onAdd&&y.onAdd(this,e)}},o.prototype.updateImage=function(e,r){var i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=r instanceof Oi?t.browser.getImageData(r):r,o=n.width,a=n.height,s=n.data;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==i.data.width||a!==i.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(r instanceof Oi);i.data.replace(s,l),this.style.updateImage(e,i)},o.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},o.prototype.removeImage=function(t){this.style.removeImage(t)},o.prototype.loadImage=function(e,r){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),r)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},o.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},o.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},o.prototype.getLayer=function(t){return this.style.getLayer(t)},o.prototype.setLayerZoomRange=function(t,e,r){return this.style.setLayerZoomRange(t,e,r),this._update(!0)},o.prototype.setFilter=function(t,e,r){return void 0===r&&(r={}),this.style.setFilter(t,e,r),this._update(!0)},o.prototype.getFilter=function(t){return this.style.getFilter(t)},o.prototype.setPaintProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setPaintProperty(t,e,r,i),this._update(!0)},o.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},o.prototype.setLayoutProperty=function(t,e,r,i){return void 0===i&&(i={}),this.style.setLayoutProperty(t,e,r,i),this._update(!0)},o.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},o.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},o.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},o.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=i.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=i.create("div","mapboxgl-ctrl-"+t,n)})},o.prototype._resizeCanvas=function(e,r){var i=t.window.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*r,this._canvas.style.width=e+"px",this._canvas.style.height=r+"px"},o.prototype._setupPainter=function(){var r=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);i?(this.painter=new pi(i,this.transform),t.webpSupported.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},o.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},o.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},o.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},o.prototype._render=function(){var e,r=this,i=0,n=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=t.browser.now();this.style.zoomHistory.update(a,s);var l=new t.EvaluationParameters(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=l.crossFadingFactor();1===u&&u===this._crossFadingFactor||(o=!0,this._crossFadingFactor=u),this.style.update(l)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),gpuTiming:!!this.listens("gpu-timing-layer"),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-i;n.endQueryEXT(n.TIME_ELAPSED_EXT,e),setTimeout(function(){var i=n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(e),r.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:i}))},50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout(function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))},50)}return this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,r=this._controls;e<r.length;e+=1)r[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),Zi(this._canvasContainer),Zi(this._controlContainer),Zi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},o.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},o.prototype._setCacheLimits=function(e,r){t.setCacheLimits(e,r)},a.version.get=function(){return t.version},Object.defineProperties(o.prototype,a),o}(Li);function Zi(t){t.parentNode&&t.parentNode.removeChild(t)}var Gi={showCompass:!0,showZoom:!0,visualizePitch:!1},Xi=function(e){var r=this;this.options=t.extend({},Gi,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return r._map.zoomIn({},{originalEvent:t})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return r._map.zoomOut({},{originalEvent:t})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Wi(e,r,i){if(e=new t.LngLat(e.lng,e.lat),r){var n=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(r);i.locationPoint(n).distSqr(r)<a?e=n:i.locationPoint(o).distSqr(r)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}Xi.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Xi.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Xi.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ei(t,{button:"left",element:this._compass}),i.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),i.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Xi.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),i.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),i.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Xi.prototype._createButton=function(t,e){var r=i.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Xi.prototype._setButtonTitle=function(t,e){var r=this._map._getUIString("NavigationControl."+e);t.title=r,t.setAttribute("aria-label",r)};var Ki={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hi(t,e,r){var i=t.classList;for(var n in Ki)i.remove("mapboxgl-"+r+"-anchor-"+n);i.add("mapboxgl-"+r+"-anchor-"+e)}var Yi,Ji=function(e){function r(r,n){var o=this;if(e.call(this),(r instanceof t.window.HTMLElement||n)&&(r=t.extend({element:r},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var a=i.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<p.length;c+=1){var h=p[c],f=i.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",h.rx),f.setAttributeNS(null,"ry",h.ry),u.appendChild(f)}var d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(m);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(_);var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),v.appendChild(x),v.appendChild(b),l.appendChild(u),l.appendChild(d),l.appendChild(y),l.appendChild(g),l.appendChild(v),a.appendChild(l),this._element.appendChild(a),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),this._element.addEventListener("focus",function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0}),Hi(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,r=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==r&&13!==r||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,r=this._element;this._popup&&(e===r||r.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Wi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Ki[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),Qi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},$i=function(e){function r(r){e.call(this),this.options=t.extend({},Qi,r),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Yi?r(Yi):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){Yi="denied"!==t.state,r(Yi)}):(Yi=!!t.window.navigator.geolocation,r(Yi)),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),i.remove(this._container),this._map=void 0},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),r=t.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},r.prototype._updateCamera=function(e){var r=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,n=this._map.getBearing(),o=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(i),o,{geolocateSource:!0})},r.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),void 0!==this._geolocationWatchID&&this._clearWatch()}else this._setErrorState();"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ji(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){var i=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||i||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),tn={maxWidth:100,unit:"metric"},en=function(e){this.options=t.extend({},tn,e),t.bindAll(["_onMove","setUnit"],this)};function rn(t,e,r){var i,n,o,a,s,l,u=r&&r.maxWidth||100,c=t._container.clientHeight/2,p=(i=t.unproject([0,c]),n=t.unproject([u,c]),o=Math.PI/180,a=i.lat*o,s=n.lat*o,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((n.lng-i.lng)*o),6371e3*Math.acos(Math.min(l,1)));if(r&&"imperial"===r.unit){var h=3.2808*p;h>5280?nn(e,u,h/5280,t._getUIString("ScaleControl.Miles")):nn(e,u,h,t._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?nn(e,u,p/1852,t._getUIString("ScaleControl.NauticalMiles")):p>=1e3?nn(e,u,p/1e3,t._getUIString("ScaleControl.Kilometers")):nn(e,u,p,t._getUIString("ScaleControl.Meters"))}function nn(t,e,r,i){var n,o,a,s=(n=r,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=(a=n/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a))),l=s/r;t.style.width=e*l+"px",t.innerHTML=s+i}en.prototype.getDefaultPosition=function(){return"bottom-left"},en.prototype._onMove=function(){rn(this._map,this._container,this.options)},en.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},en.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},en.prototype.setUnit=function(t){this.options.unit=t,rn(this._map,this._container,this.options)};var on=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};on.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},on.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},on.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},on.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},on.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},on.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},on.prototype._isFullscreen=function(){return this._fullscreen},on.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},on.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var an={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},sn=function(e){function r(r){e.call(this),this.options=t.extend(Object.create(an),r),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.addTo=function(e){var r=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(t){r._update(t.point)}),this._map.on("mouseup",function(t){r._update(t.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(e){t._update(e.point)}),this._map.on("drag",function(e){t._update(e.point)}),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var r,i=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");for(n.innerHTML=e;r=n.firstChild;)i.appendChild(r);return this.setDOMContent(i)},r.prototype.getMaxWidth=function(){return this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype.addClassName=function(t){this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container.classList.remove(t)},r.prototype.toggleClassName=function(t){return this._container.classList.toggle(t)},r.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(e){var r=this,n=this._lngLat||this._trackPointer;if(this._map&&n&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return r._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Wi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var o=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),a=this.options.anchor,s=function e(r){if(r){if("number"==typeof r){var i=Math.round(Math.sqrt(.5*Math.pow(r,2)));return{center:new t.Point(0,0),top:new t.Point(0,r),"top-left":new t.Point(i,i),"top-right":new t.Point(-i,i),bottom:new t.Point(0,-r),"bottom-left":new t.Point(i,-i),"bottom-right":new t.Point(-i,-i),left:new t.Point(r,0),right:new t.Point(-r,0)}}if(r instanceof t.Point||Array.isArray(r)){var n=t.Point.convert(r);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(r.center||[0,0]),top:t.Point.convert(r.top||[0,0]),"top-left":t.Point.convert(r["top-left"]||[0,0]),"top-right":t.Point.convert(r["top-right"]||[0,0]),bottom:t.Point.convert(r.bottom||[0,0]),"bottom-left":t.Point.convert(r["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(r["bottom-right"]||[0,0]),left:t.Point.convert(r.left||[0,0]),right:t.Point.convert(r.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!a){var l,u=this._container.offsetWidth,c=this._container.offsetHeight;l=o.y+s.bottom.y<c?["top"]:o.y>this._map.transform.height-c?["bottom"]:[],o.x<u/2?l.push("left"):o.x>this._map.transform.width-u/2&&l.push("right"),a=0===l.length?"bottom":l.join("-")}var p=o.add(s[a]).round();i.setTransform(this._container,Ki[a]+" translate("+p.x+"px,"+p.y+"px)"),Hi(this._container,a,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(t.Evented),ln={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:qi,NavigationControl:Xi,GeolocateControl:$i,AttributionControl:Di,ScaleControl:en,FullscreenControl:on,Popup:sn,Marker:Ji,Style:Ue,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Bt.workerCount},set workerCount(t){Bt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return ln}),i});
},{}],"bk0i":[function(require,module,exports) {
"use strict";function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aBEI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("../../helpers/esm/typeof")),t=r(require("./assertThisInitialized"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){return!u||"object"!==(0,e.default)(u)&&"function"!=typeof u?(0,t.default)(r):u}
},{"../../helpers/esm/typeof":"xLw6","./assertThisInitialized":"bk0i"}],"QQCW":[function(require,module,exports) {
"use strict";function t(e){return exports.default=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"hewo":[function(require,module,exports) {
"use strict";function e(t,r){return exports.default=e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e(t,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"NT06":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./setPrototypeOf"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&(0,e.default)(t,r)}
},{"./setPrototypeOf":"hewo"}],"EbiA":[function(require,module,exports) {
"use strict";function e(e){if(Array.isArray(e))return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"GS78":[function(require,module,exports) {
"use strict";function t(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],o=!0,l=!1,n=void 0;try{for(var i,u=t[Symbol.iterator]();!(o=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);o=!0);}catch(a){l=!0,n=a}finally{try{o||null==u.return||u.return()}finally{if(l)throw n}}return r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"Kh3j":[function(require,module,exports) {
"use strict";function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"T12H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=u(require("./arrayWithHoles")),r=u(require("./iterableToArrayLimit")),t=u(require("./nonIterableRest"));function u(e){return e&&e.__esModule?e:{default:e}}function a(u,a){return(0,e.default)(u)||(0,r.default)(u,a)||(0,t.default)()}
},{"./arrayWithHoles":"EbiA","./iterableToArrayLimit":"GS78","./nonIterableRest":"Kh3j"}],"A2l4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMat4=n,exports.transformVector=o,exports.mod=u,exports.lerp=a;var e=t(require("gl-matrix/vec4"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(r,t){var n=e.transformMat4([],t,r);return e.scale(n,n,1/n[3]),n}function u(e,r){var t=e%r;return t<0?r+t:t}function a(e,r,t){return t*r+(1-t)*e}
},{"gl-matrix/vec4":"QGfo"}],"YhXv":[function(require,module,exports) {
"use strict";function e(e,r){if(!e)throw new Error(r||"viewport-mercator-project: assertion failed.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"L5RO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomToScale=M,exports.scaleToZoom=m,exports.lngLatToWorld=g,exports.worldToLngLat=x,exports.getMeterZoom=b,exports.getDistanceScales=P,exports.addMetersToLngLat=F,exports.getViewMatrix=N,exports.getProjectionParameters=w,exports.getProjectionMatrix=y,exports.worldToPixels=j,exports.pixelsToWorld=O;var e=l(require("@babel/runtime/helpers/esm/slicedToArray")),t=require("./math-utils"),r=u(require("gl-matrix/mat4")),i=u(require("gl-matrix/vec2")),a=u(require("gl-matrix/vec3")),n=l(require("./assert"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=i?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(r,a,n):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}var s=Math.PI,c=s/4,f=s/180,d=180/s,p=512,h=4003e4,v=1.5;function M(e){return Math.pow(2,e)}function m(e){return Math.log2(e)}function g(t,r){var i=(0,e.default)(t,2),a=i[0],o=i[1];(0,n.default)(Number.isFinite(a)&&Number.isFinite(r)),(0,n.default)(Number.isFinite(o)&&o>=-90&&o<=90,"invalid latitude");var u=o*f;return[(r*=p)*(a*f+s)/(2*s),r*(s-Math.log(Math.tan(c+.5*u)))/(2*s)]}function x(t,r){var i=(0,e.default)(t,2),a=i[0],n=i[1],o=a/(r*=p)*(2*s)-s,u=2*(Math.atan(Math.exp(s-n/r*(2*s)))-c);return[o*d,u*d]}function b(e){var t=e.latitude;(0,n.default)(Number.isFinite(t));var r=Math.cos(t*f);return m(h*r)-9}function P(e){var t=e.latitude,r=e.longitude,i=e.zoom,a=e.scale,o=e.highPrecision,u=void 0!==o&&o;a=void 0!==a?a:M(i),(0,n.default)(Number.isFinite(t)&&Number.isFinite(r)&&Number.isFinite(a));var l={},s=p*a,c=Math.cos(t*f),d=s/360,v=d/c,m=s/h/c;if(l.pixelsPerMeter=[m,-m,m],l.metersPerPixel=[1/m,-1/m,1/m],l.pixelsPerDegree=[d,-v,m],l.degreesPerPixel=[1/d,-1/v,1/m],u){var g=f*Math.tan(t*f)/c,x=d*g/2,b=s/h*g,P=b/v*m;l.pixelsPerDegree2=[0,-x,b],l.pixelsPerMeter2=[P,0,P]}return l}function F(t,r){var i=(0,e.default)(t,3),a=i[0],n=i[1],o=i[2],u=(0,e.default)(r,3),l=u[0],s=u[1],c=u[2],f=P({longitude:a,latitude:n,scale:1,highPrecision:!0}),d=f.pixelsPerMeter,p=f.pixelsPerMeter2,h=g(t,1);h[0]+=l*(d[0]+p[0]*s),h[1]+=s*(d[1]+p[1]*s);var v=x(h,1),M=(o||0)+(c||0);return Number.isFinite(o)||Number.isFinite(c)?[v[0],v[1],M]:v}function N(e){var i=e.height,n=e.pitch,o=e.bearing,u=e.altitude,l=e.center,s=void 0===l?null:l,c=e.flipY,d=void 0!==c&&c,p=(0,t.createMat4)();return r.translate(p,p,[0,0,-u]),r.scale(p,p,[1,1,1/i]),r.rotateX(p,p,-n*f),r.rotateZ(p,p,o*f),d&&r.scale(p,p,[1,-1,1]),s&&r.translate(p,p,a.negate([],s)),p}function w(e){var t=e.width,r=e.height,i=e.altitude,a=void 0===i?v:i,n=e.pitch,o=void 0===n?0:n,u=e.nearZMultiplier,l=void 0===u?1:u,s=e.farZMultiplier,c=void 0===s?1:s,d=o*f,p=Math.atan(.5/a),h=Math.sin(p)*a/Math.sin(Math.PI/2-d-p),M=Math.cos(Math.PI/2-d)*h+a;return{fov:2*Math.atan(r/2/a),aspect:t/r,focalDistance:a,near:l,far:M*c}}function y(e){var t=e.width,i=e.height,a=e.pitch,n=w({width:t,height:i,altitude:e.altitude,pitch:a,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),o=n.fov,u=n.aspect,l=n.near,s=n.far;return r.perspective([],o,u,l,s)}function j(r,i){var a=(0,e.default)(r,3),o=a[0],u=a[1],l=a[2],s=void 0===l?0:l;return(0,n.default)(Number.isFinite(o)&&Number.isFinite(u)&&Number.isFinite(s)),(0,t.transformVector)(i,[o,u,s,1])}function O(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=(0,e.default)(r,3),l=u[0],s=u[1],c=u[2];if((0,n.default)(Number.isFinite(l)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(c))return(0,t.transformVector)(a,[l,s,c,1]);var f=(0,t.transformVector)(a,[l,s,0,1]),d=(0,t.transformVector)(a,[l,s,1,1]),p=f[2],h=d[2],v=p===h?0:((o||0)-p)/(h-p);return i.lerp([],f,d,v)}
},{"@babel/runtime/helpers/esm/slicedToArray":"T12H","./math-utils":"A2l4","gl-matrix/mat4":"WdlT","gl-matrix/vec2":"cHtt","gl-matrix/vec3":"Ijz7","./assert":"YhXv"}],"jWSc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("@babel/runtime/helpers/esm/slicedToArray")),e=u(require("@babel/runtime/helpers/esm/classCallCheck")),i=u(require("@babel/runtime/helpers/esm/createClass")),r=require("./math-utils"),o=require("./web-mercator-utils"),n=a(require("gl-matrix/mat4"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=r?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function u(t){return t&&t.__esModule?t:{default:t}}var l=(0,r.createMat4)(),h=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.width,o=t.height,a=t.viewMatrix,u=void 0===a?l:a,h=t.projectionMatrix,c=void 0===h?l:h;(0,e.default)(this,s),this.width=i||1,this.height=o||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=u,this.projectionMatrix=c;var p=(0,r.createMat4)();n.multiply(p,p,this.projectionMatrix),n.multiply(p,p,this.viewMatrix),this.viewProjectionMatrix=p;var d=(0,r.createMat4)();n.scale(d,d,[this.width/2,-this.height/2,1]),n.translate(d,d,[1,-1,0]),n.multiply(d,d,this.viewProjectionMatrix);var f=n.invert((0,r.createMat4)(),d);if(!f)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=f,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return(0,i.default)(s,[{key:"equals",value:function(t){return t instanceof s&&(t.width===this.width&&t.height===this.height&&n.equals(t.projectionMatrix,this.projectionMatrix)&&n.equals(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).topLeft,r=void 0===i||i,n=this.projectPosition(e),s=(0,o.worldToPixels)(n,this.pixelProjectionMatrix),a=(0,t.default)(s,2),u=a[0],l=a[1],h=r?l:this.height-l;return 2===e.length?[u,h]:[u,h,s[2]]}},{key:"unproject",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.topLeft,n=void 0===r||r,s=i.targetZ,a=(0,t.default)(e,3),u=a[0],l=a[1],h=a[2],c=n?l:this.height-l,p=s&&s*this.pixelsPerMeter,d=(0,o.pixelsToWorld)([u,c,h],this.pixelUnprojectionMatrix,p),f=this.unprojectPosition(d),v=(0,t.default)(f,3),j=v[0],x=v[1],M=v[2];return Number.isFinite(h)?[j,x,M]:Number.isFinite(s)?[j,x,s]:[j,x]}},{key:"projectPosition",value:function(e){var i=this.projectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var i=this.unprojectFlat(e),r=(0,t.default)(i,2);return[r[0],r[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),s}();exports.default=h;
},{"@babel/runtime/helpers/esm/slicedToArray":"T12H","@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4","./math-utils":"A2l4","./web-mercator-utils":"L5RO","gl-matrix/mat4":"WdlT"}],"Zc28":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=o(require("@babel/runtime/helpers/esm/slicedToArray")),e=o(require("./web-mercator-viewport")),i=o(require("./assert"));function o(t){return t&&t.__esModule?t:{default:t}}function r(o){var r=o.width,a=o.height,u=o.bounds,d=o.minExtent,l=void 0===d?0:d,s=o.maxZoom,n=void 0===s?24:s,m=o.padding,h=void 0===m?0:m,b=o.offset,f=void 0===b?[0,0]:b,p=(0,t.default)(u,2),M=(0,t.default)(p[0],2),g=M[0],v=M[1],c=(0,t.default)(p[1],2),x=c[0],w=c[1];if(Number.isFinite(h)){h={top:h,bottom:h,left:h,right:h}}else(0,i.default)(Number.isFinite(h.top)&&Number.isFinite(h.bottom)&&Number.isFinite(h.left)&&Number.isFinite(h.right));var F=new e.default({width:r,height:a,longitude:0,latitude:0,zoom:0}),N=F.project([g,w]),j=F.project([x,v]),_=[Math.max(Math.abs(j[0]-N[0]),l),Math.max(Math.abs(j[1]-N[1]),l)],q=[r-h.left-h.right-2*Math.abs(f[0]),a-h.top-h.bottom-2*Math.abs(f[1])];(0,i.default)(q[0]>0&&q[1]>0);var z=q[0]/_[0],y=q[1]/_[1],A=(h.right-h.left)/2/z,E=(h.bottom-h.top)/2/y,O=[(j[0]+N[0])/2+A,(j[1]+N[1])/2+E],P=F.unproject(O),T=F.zoom+Math.log2(Math.abs(Math.min(z,y)));return{longitude:P[0],latitude:P[1],zoom:Math.min(T,n)}}
},{"@babel/runtime/helpers/esm/slicedToArray":"T12H","./web-mercator-viewport":"q1mr","./assert":"YhXv"}],"q1mr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/esm/classCallCheck")),t=h(require("@babel/runtime/helpers/esm/createClass")),r=h(require("@babel/runtime/helpers/esm/possibleConstructorReturn")),i=h(require("@babel/runtime/helpers/esm/getPrototypeOf")),a=h(require("@babel/runtime/helpers/esm/inherits")),n=h(require("@babel/runtime/helpers/esm/assertThisInitialized")),l=h(require("./viewport")),o=require("./web-mercator-utils"),u=h(require("./fit-bounds")),s=c(require("gl-matrix/vec2"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=i?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(r,a,n):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function h(e){return e&&e.__esModule?e:{default:e}}var p=function(l){function d(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=a.width,u=a.height,s=a.latitude,c=void 0===s?0:s,h=a.longitude,p=void 0===h?0:h,f=a.zoom,g=void 0===f?0:f,v=a.pitch,b=void 0===v?0:v,m=a.bearing,M=void 0===m?0:m,y=a.altitude,w=void 0===y?1.5:y,L=a.nearZMultiplier,j=a.farZMultiplier;(0,e.default)(this,d),l=l||1,u=u||1;var x=(0,o.zoomToScale)(g);w=Math.max(.75,w);var P=(0,o.lngLatToWorld)([p,c],x);P[2]=0;var O=(0,o.getProjectionMatrix)({width:l,height:u,pitch:b,bearing:M,altitude:w,nearZMultiplier:L||1/u,farZMultiplier:j||1.01}),q=(0,o.getViewMatrix)({height:u,center:P,pitch:b,bearing:M,altitude:w,flipY:!0});return(t=(0,r.default)(this,(0,i.default)(d).call(this,{width:l,height:u,viewMatrix:q,projectionMatrix:O}))).latitude=c,t.longitude=p,t.zoom=g,t.pitch=b,t.bearing=M,t.altitude=w,t.scale=x,t.center=P,t.pixelsPerMeter=(0,o.getDistanceScales)((0,n.default)((0,n.default)(t))).pixelsPerMeter[2],Object.freeze((0,n.default)((0,n.default)(t))),t}return(0,a.default)(d,l),(0,t.default)(d,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,o.lngLatToWorld)(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return(0,o.worldToLngLat)(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,r=e.pos,i=(0,o.pixelsToWorld)(r,this.pixelUnprojectionMatrix),a=(0,o.lngLatToWorld)(t,this.scale),n=s.add([],a,s.negate([],i)),l=s.add([],this.center,n);return(0,o.worldToLngLat)(l,this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,r=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:r})}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=(0,u.default)(Object.assign({width:r,height:i,bounds:e},t));return new d({width:r,height:i,longitude:a.longitude,latitude:a.latitude,zoom:a.zoom})}}]),d}(l.default);exports.default=p;
},{"@babel/runtime/helpers/esm/classCallCheck":"VEjx","@babel/runtime/helpers/esm/createClass":"l5p4","@babel/runtime/helpers/esm/possibleConstructorReturn":"aBEI","@babel/runtime/helpers/esm/getPrototypeOf":"QQCW","@babel/runtime/helpers/esm/inherits":"NT06","@babel/runtime/helpers/esm/assertThisInitialized":"bk0i","./viewport":"jWSc","./web-mercator-utils":"L5RO","./fit-bounds":"Zc28","gl-matrix/vec2":"cHtt"}],"vOym":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=o(require("./web-mercator-viewport")),t=require("./math-utils");function o(e){return e&&e.__esModule?e:{default:e}}var i=85.05113,r=-85.05113;function u(o){var u=o.width,d=o.height,a=o.longitude,l=o.latitude,h=o.zoom,n=o.pitch,c=void 0===n?0:n,g=o.bearing,p=void 0===g?0:g;(a<-180||a>180)&&(a=(0,t.mod)(a+180,360)-180),(p<-180||p>180)&&(p=(0,t.mod)(p+180,360)-180);var m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h}),v=m.project([a,i])[1],w=m.project([a,r])[1],f=0;return w-v<d&&(h+=Math.log2(d/(w-v)),v=(m=new e.default({width:u,height:d,longitude:a,latitude:l,zoom:h})).project([a,i])[1],w=m.project([a,r])[1]),v>0?f=v:w<d&&(f=w-d),f&&(l=m.unproject([u/2,d/2+f])[1]),{width:u,height:d,longitude:a,latitude:l,zoom:h,pitch:c,bearing:p}}
},{"./web-mercator-viewport":"q1mr","./math-utils":"A2l4"}],"WGVX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l,exports.getFlyToDuration=s;var t=require("./math-utils"),e=require("./web-mercator-utils"),r=a(require("gl-matrix/vec2"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var u=a?Object.getOwnPropertyDescriptor(t,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}var n=.01,u=["longitude","latitude","zoom"],i={curve:1.414,speed:1.2};function l(o,a,i){var l={},s=c(o,a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),h=s.startZoom,d=s.startCenterXY,f=s.uDelta,g=s.w0,p=s.u1,v=s.S,m=s.rho,M=s.rho2,b=s.r0;if(p<n){for(var y=0;y<u.length;y++){var O=u[y],j=o[O],w=a[O];l[O]=(0,t.lerp)(j,w,i)}return l}var T=i*v,x=Math.cosh(b)/Math.cosh(b+m*T),z=g*((Math.cosh(b)*Math.tanh(b+m*T)-Math.sinh(b))/M)/p,S=1/x,D=h+(0,e.scaleToZoom)(S),P=r.scale([],f,z);r.add(P,P,d),r.scale(P,P,S);var q=(0,e.worldToLngLat)(P,(0,e.zoomToScale)(D));return l.longitude=q[0],l.latitude=q[1],l.zoom=D,l}function s(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o=Object.assign({},i,o),n=a.screenSpeed,u=a.speed,l=a.maxDuration,s=c(t,e,o),h=s.S,d=s.rho,f=1e3*h;return r=Number.isFinite(n)?f/(n/d):f/u,Number.isFinite(l)&&r>l?0:r}function c(t,o,a){var u=(a=Object.assign({},i,a)).curve,l=t.zoom,s=[t.longitude,t.latitude],c=(0,e.zoomToScale)(l),h=o.zoom,d=[o.longitude,o.latitude],f=(0,e.zoomToScale)(h-l),g=(0,e.lngLatToWorld)(s,c),p=(0,e.lngLatToWorld)(d,c),v=r.sub([],p,g),m=Math.max(t.width,t.height),M=m/f,b=r.length(v),y=Math.max(b,n),O=u*u,j=(M*M-m*m+O*O*y*y)/(2*m*O*y),w=(M*M-m*m-O*O*y*y)/(2*M*O*y),T=Math.log(Math.sqrt(j*j+1)-j),x=Math.log(Math.sqrt(w*w+1)-w);return{startZoom:l,startCenterXY:g,uDelta:v,w0:m,u1:b,S:(x-T)/u,rho:u,rho2:O,r0:T,r1:x}}
},{"./math-utils":"A2l4","./web-mercator-utils":"L5RO","gl-matrix/vec2":"cHtt"}],"ha5B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"WebMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"PerspectiveMercatorViewport",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"fitBounds",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"normalizeViewportProps",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"flyToViewport",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"getFlyToDuration",{enumerable:!0,get:function(){return n.getFlyToDuration}}),Object.defineProperty(exports,"lngLatToWorld",{enumerable:!0,get:function(){return o.lngLatToWorld}}),Object.defineProperty(exports,"worldToLngLat",{enumerable:!0,get:function(){return o.worldToLngLat}}),Object.defineProperty(exports,"worldToPixels",{enumerable:!0,get:function(){return o.worldToPixels}}),Object.defineProperty(exports,"pixelsToWorld",{enumerable:!0,get:function(){return o.pixelsToWorld}}),Object.defineProperty(exports,"getMeterZoom",{enumerable:!0,get:function(){return o.getMeterZoom}}),Object.defineProperty(exports,"getDistanceScales",{enumerable:!0,get:function(){return o.getDistanceScales}}),Object.defineProperty(exports,"addMetersToLngLat",{enumerable:!0,get:function(){return o.addMetersToLngLat}}),Object.defineProperty(exports,"getViewMatrix",{enumerable:!0,get:function(){return o.getViewMatrix}}),Object.defineProperty(exports,"getProjectionMatrix",{enumerable:!0,get:function(){return o.getProjectionMatrix}}),Object.defineProperty(exports,"getProjectionParameters",{enumerable:!0,get:function(){return o.getProjectionParameters}}),Object.defineProperty(exports,"getUncenteredViewMatrix",{enumerable:!0,get:function(){return o.getViewMatrix}}),Object.defineProperty(exports,"projectFlat",{enumerable:!0,get:function(){return o.lngLatToWorld}}),Object.defineProperty(exports,"unprojectFlat",{enumerable:!0,get:function(){return o.worldToLngLat}});var e=a(require("./web-mercator-viewport")),t=a(require("./fit-bounds")),r=a(require("./normalize-viewport-props")),n=i(require("./fly-to-viewport")),o=require("./web-mercator-utils");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}
},{"./web-mercator-viewport":"q1mr","./fit-bounds":"Zc28","./normalize-viewport-props":"vOym","./fly-to-viewport":"WGVX","./web-mercator-utils":"L5RO"}],"kBP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@babel/runtime/helpers/classCallCheck")),t=r(require("@babel/runtime/helpers/createClass")),i=r(require("viewport-mercator-project"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){function r(){(0,e.default)(this,r),this.viewport=void 0}return(0,t.default)(r,[{key:"syncWithMapCamera",value:function(e){var t=e.center,r=e.zoom,o=e.pitch,n=e.bearing,u=e.viewportHeight,a=e.viewportWidth;this.viewport=new i.default({width:a,height:u,longitude:t&&t[0],latitude:t&&t[1],zoom:r,pitch:o,bearing:n})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(e,t){return this.viewport.projectFlat(e,t)}}]),r}();exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","viewport-mercator-project":"ha5B"}],"uUNp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapTheme=void 0;var e={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sprite:"https://lzxue.github.io/font-glyphs/sprite/sprite",glyphs:"https://gw.alipayobjects.com/os/antvdemo/assets/mapbox/glyphs/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"white"}}]}};exports.MapTheme=e;
},{}],"my3Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,n,i,r,a,o,u,l,s,c,p,m,h,f=E(require("@babel/runtime/regenerator")),v=E(require("@babel/runtime/helpers/defineProperty")),g=E(require("@babel/runtime/helpers/objectWithoutProperties")),y=E(require("@babel/runtime/helpers/asyncToGenerator")),d=E(require("@babel/runtime/helpers/initializerDefineProperty")),b=E(require("@babel/runtime/helpers/classCallCheck")),k=E(require("@babel/runtime/helpers/createClass")),C=E(require("@babel/runtime/helpers/applyDecoratedDescriptor")),S=E(require("@babel/runtime/helpers/initializerWarningHelper")),w=require("@antv/l7-core"),j=require("@antv/l7-utils"),M=require("inversify"),T=E(require("mapbox-gl")),O=E(require("./Viewport")),P=require("./theme");function E(e){return e&&e.__esModule?e:{default:e}}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach(function(t){(0,v.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z={mapmove:"move",camerachange:"move"},Z=12,x="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",I=(e=(0,M.injectable)(),t=(0,M.inject)(w.TYPES.MapConfig),n=(0,M.inject)(w.TYPES.IGlobalConfigService),i=(0,M.inject)(w.TYPES.ILogService),r=(0,M.inject)(w.TYPES.ICoordinateSystemService),a=(0,M.inject)(w.TYPES.IEventEmitter),e((u=h=function(){function e(){var t=this;(0,b.default)(this,e),this.map=void 0,(0,d.default)(this,"config",l,this),(0,d.default)(this,"configService",s,this),(0,d.default)(this,"logger",c,this),(0,d.default)(this,"coordinateSystemService",p,this),(0,d.default)(this,"eventEmitter",m,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var e=t.map.getCenter().wrap(),n=e.lat,i=e.lng;t.viewport.syncWithMapCamera({bearing:t.map.getBearing(),center:[i,n],viewportHeight:t.map.transform.height,pitch:t.map.getPitch(),viewportWidth:t.map.transform.width,zoom:t.map.getZoom(),cameraHeight:0}),t.viewport.getZoom()>Z?t.coordinateSystemService.setCoordinateSystem(w.CoordinateSystem.LNGLAT_OFFSET):t.coordinateSystemService.setCoordinateSystem(w.CoordinateSystem.LNGLAT),t.cameraChangedCallback(t.viewport)}}return(0,k.default)(e,[{key:"addMarkerContainer",value:function(){var e=this.map.getCanvasContainer();this.markerContainer=j.DOM.create("div","l7-marker-container",e)}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(e,t){-1!==w.MapServiceEvent.indexOf(e)?this.eventEmitter.on(e,t):this.map.on(z[e]||e,t)}},{key:"off",value:function(e,t){this.map.off(z[e]||e,t)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getSize",value:function(){var e=this.map.transform;return[e.width,e.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(e){return this.map.setZoom(e)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(e){this.map.setBearing(e)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(e){this.map.panTo(e)}},{key:"panBy",value:function(e){this.panTo(e)}},{key:"fitBounds",value:function(e){this.map.fitBounds(e)}},{key:"setMaxZoom",value:function(e){this.map.setMaxZoom(e)}},{key:"setMinZoom",value:function(e){this.map.setMinZoom(e)}},{key:"setZoomAndCenter",value:function(e,t){this.map.flyTo({zoom:e,center:t})}},{key:"setMapStyle",value:function(e){this.map.setStyle(this.getMapStyle(e))}},{key:"pixelToLngLat",value:function(e){return this.map.unproject(e)}},{key:"lngLatToPixel",value:function(e){return this.map.project(e)}},{key:"containerToLngLat",value:function(e){return this.map.unproject(e)}},{key:"lngLatToContainer",value:function(e){return this.map.project(e)}},{key:"init",value:function(){var e=(0,y.default)(f.default.mark(function e(){var t,n,i,r,a,o,u,l,s,c,p,m,h;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.config,n=t.id,i=void 0===n?"map":n,r=t.attributionControl,a=void 0!==r&&r,o=t.style,u=void 0===o?"light":o,l=t.token,s=void 0===l?x:l,c=t.rotation,p=void 0===c?0:c,m=t.mapInstance,h=(0,g.default)(t,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new O.default,m||T.default||this.logger.error(this.configService.getSceneWarninfo("SDK")),s!==x||"blank"===u||T.default.accessToken||m||this.logger.warn(this.configService.getSceneWarninfo("MapToken")),m||T.default.accessToken||(T.default.accessToken=s),m?(this.map=m,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(i),this.map=new T.default.Map(q({container:i,style:this.getMapStyle(u),attributionControl:a,bearing:p},h))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null,this.removeLogoControl())}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.eventEmitter).emit.apply(t,[e].concat(i))}},{key:"once",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.eventEmitter).once.apply(t,[e].concat(i))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(e){this.cameraChangedCallback=e}},{key:"creatAmapContainer",value:function(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}},{key:"removeLogoControl",value:function(){var e=this.map._controls.find(function(e){if(e.hasOwnProperty("_updateLogo"))return!0});e&&this.map.removeControl(e)}},{key:"getMapStyle",value:function(e){return"string"!=typeof e?e:P.MapTheme[e]?P.MapTheme[e]:e}}]),e}(),l=(0,C.default)(u.prototype,"config",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,C.default)(u.prototype,"configService",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,C.default)(u.prototype,"logger",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=(0,C.default)(u.prototype,"coordinateSystemService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=(0,C.default)(u.prototype,"eventEmitter",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=u))||o);exports.default=I;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/objectWithoutProperties":"U8F3","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","inversify":"PR7M","mapbox-gl":"OvAl","./Viewport":"kBP9","./theme":"uUNp"}],"yFBO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),r=s(require("@babel/runtime/helpers/createClass")),t=s(require("@babel/runtime/helpers/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/getPrototypeOf")),l=s(require("@babel/runtime/helpers/inherits")),a=s(require("../BaseMapWrapper")),i=s(require("./index"));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(a){function s(){return(0,e.default)(this,s),(0,t.default)(this,(0,u.default)(s).apply(this,arguments))}return(0,l.default)(s,a),(0,r.default)(s,[{key:"getServiceConstructor",value:function(){return i.default}}]),s}(a.default);exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../BaseMapWrapper":"Y0Yi","./index":"my3Z"}],"Ibza":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GaodeMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Mapbox",{enumerable:!0,get:function(){return r.default}});var e=t(require("./amap/Wrapper")),r=t(require("./mapbox/Wrapper"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./amap/Wrapper":"q7h7","./mapbox/Wrapper":"yFBO"}],"o5v0":[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null==r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(o){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],"T55o":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),r=/%[sdj%]/g;exports.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,s=o.length,u=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<s;c=o[++n])h(c)||!z(c)?u+=" "+c:u+=" "+i(c);return u},exports.deprecate=function(r,n){if(j(e.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var n,o={};function i(e,t){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),x(t)?r.showHidden=t:t&&exports._extend(r,t),j(r.showHidden)&&(r.showHidden=!1),j(r.depth)&&(r.depth=2),j(r.colors)&&(r.colors=!1),j(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),p(r,e,r.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function u(e,t){return e}function c(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function p(e,t,r){if(e.customInspect&&t&&D(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return v(n)||(n=p(e,n,r)),n}var o=l(e,t);if(o)return o;var i=Object.keys(t),s=c(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),E(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return a(t);if(0===i.length){if(D(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return a(t)}var x,h="",b=!1,m=["{","}"];(d(t)&&(b=!0,m=["[","]"]),D(t))&&(h=" [Function"+(t.name?": "+t.name:"")+"]");return O(t)&&(h=" "+RegExp.prototype.toString.call(t)),w(t)&&(h=" "+Date.prototype.toUTCString.call(t)),E(t)&&(h=" "+a(t)),0!==i.length||b&&0!=t.length?r<0?O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),x=b?f(e,t,r,s,i):i.map(function(n){return g(e,t,r,s,n,b)}),e.seen.pop(),y(x,h,m)):m[0]+h+m[1]}function l(e,t){if(j(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o){for(var i=[],s=0,u=t.length;s<u;++s)$(t,String(s))?i.push(g(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(g(e,t,r,n,o,!0))}),i}function g(e,t,r,n,o,i){var s,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),$(n,o)||(s="["+o+"]"),u||(e.seen.indexOf(c.value)<0?(u=h(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),j(s)){if(i&&o.match(/^\d+$/))return u;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function y(e,t,r){return e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function S(e){return"symbol"==typeof e}function j(e){return void 0===e}function O(e){return z(e)&&"[object RegExp]"===A(e)}function z(e){return"object"==typeof e&&null!==e}function w(e){return z(e)&&"[object Date]"===A(e)}function E(e){return z(e)&&("[object Error]"===A(e)||e instanceof Error)}function D(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function A(e){return Object.prototype.toString.call(e)}function J(e){return e<10?"0"+e.toString(10):e.toString(10)}exports.debuglog=function(e){if(j(n)&&(n=""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;o[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else o[e]=function(){};return o[e]},exports.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=d,exports.isBoolean=x,exports.isNull=h,exports.isNullOrUndefined=b,exports.isNumber=m,exports.isString=v,exports.isSymbol=S,exports.isUndefined=j,exports.isRegExp=O,exports.isObject=z,exports.isDate=w,exports.isError=E,exports.isFunction=D,exports.isPrimitive=N,exports.isBuffer=require("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function H(){var e=new Date,t=[J(e.getHours()),J(e.getMinutes()),J(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}exports.log=function(){console.log("%s - %s",H(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!z(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};
},{"./support/isBuffer":"Hc8y","inherits":"HAnN","process":"kpD3"}],"ujkD":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e=require("object-assign");function r(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function n(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=require("util/"),o=Object.prototype.hasOwnProperty,u=Array.prototype.slice,a="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(e){return!n(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=module.exports=q,l=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(l);return e&&e[1]}}function g(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function E(t){if(a||!i.isFunction(t))return i.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function h(t){return g(E(t.actual),128)+" "+t.operator+" "+g(E(t.expected),128)}function y(t,e,r,n,i){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function q(t,e){t||y(t,!0,e,"==",s.ok)}function d(t,e,o,u){if(t===e)return!0;if(n(t)&&n(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(n(t)!==n(e))return!1;var a=(u=u||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===u.expected.indexOf(e)||(u.actual.push(t),u.expected.push(e),b(t,e,o,u))}return o?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e,r,n){if(null==t||null==e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=m(t),a=m(e);if(o&&!a||!o&&a)return!1;if(o)return d(t=u.call(t),e=u.call(e),r);var c,f,s=A(t),l=A(e);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),f=s.length-1;f>=0;f--)if(s[f]!==l[f])return!1;for(f=s.length-1;f>=0;f--)if(!d(t[c=s[f]],e[c],r,n))return!1;return!0}function v(t,e,r){d(t,e,!0)&&y(t,e,r,"notDeepStrictEqual",v)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(r){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function S(t){var e;try{t()}catch(r){e=r}return e}function w(t,e,r,n){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=S(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!o&&y(o,r,"Missing expected exception"+n);var u="string"==typeof n,a=!t&&o&&!r;if((!t&&i.isError(o)&&u&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),t&&o&&r&&!x(o,r)||!t&&o)throw o}function O(t,e){t||y(t,!0,e,"==",O)}s.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var e=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=p(e),o=n.indexOf("\n"+i);if(o>=0){var u=n.indexOf("\n",o+1);n=n.substring(u+1)}this.stack=n}}},i.inherits(s.AssertionError,Error),s.fail=y,s.ok=q,s.equal=function(t,e,r){t!=e&&y(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&y(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){d(t,e,!1)||y(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){d(t,e,!0)||y(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){d(t,e,!1)&&y(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=v,s.strictEqual=function(t,e,r){t!==e&&y(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&y(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){w(!0,t,e,r)},s.doesNotThrow=function(t,e,r){w(!1,t,e,r)},s.ifError=function(t){if(t)throw t},s.strict=e(O,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var A=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e};
},{"object-assign":"o5v0","util/":"T55o"}],"fWTD":[function(require,module,exports) {
var global = arguments[3];

var t=arguments[3],r=200,n="__lodash_hash_undefined__",e=800,o=16,i=9007199254740991,u="[object Arguments]",c="[object Array]",a="[object AsyncFunction]",f="[object Boolean]",s="[object Date]",l="[object Error]",p="[object Function]",v="[object GeneratorFunction]",h="[object Map]",_="[object Number]",y="[object Null]",b="[object Object]",d="[object Proxy]",g="[object RegExp]",j="[object Set]",m="[object String]",O="[object Undefined]",A="[object WeakMap]",w="[object ArrayBuffer]",z="[object DataView]",x="[object Float32Array]",S="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",$="[object Int32Array]",P="[object Uint8Array]",E="[object Uint8ClampedArray]",I="[object Uint16Array]",T="[object Uint32Array]",k=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,D={};D[x]=D[S]=D[F]=D[U]=D[$]=D[P]=D[E]=D[I]=D[T]=!0,D[u]=D[c]=D[w]=D[f]=D[z]=D[s]=D[l]=D[p]=D[h]=D[_]=D[b]=D[g]=D[j]=D[m]=D[A]=!1;var R="object"==typeof t&&t&&t.Object===Object&&t,q="object"==typeof self&&self&&self.Object===Object&&self,C=R||q||Function("return this")(),L="object"==typeof exports&&exports&&!exports.nodeType&&exports,N=L&&"object"==typeof module&&module&&!module.nodeType&&module,G=N&&N.exports===L,V=G&&R.process,W=function(){try{var t=N&&N.require&&N.require("util").types;return t||V&&V.binding&&V.binding("util")}catch(r){}}(),H=W&&W.isTypedArray;function J(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}function K(t,r){for(var n=-1,e=Array(t);++n<t;)e[n]=r(n);return e}function Q(t){return function(r){return t(r)}}function X(t,r){return null==t?void 0:t[r]}function Y(t,r){return function(n){return t(r(n))}}var Z=Array.prototype,tt=Function.prototype,rt=Object.prototype,nt=C["__core-js_shared__"],et=tt.toString,ot=rt.hasOwnProperty,it=function(){var t=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ut=rt.toString,ct=et.call(Object),at=RegExp("^"+et.call(ot).replace(k,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=G?C.Buffer:void 0,st=C.Symbol,lt=C.Uint8Array,pt=ft?ft.allocUnsafe:void 0,vt=Y(Object.getPrototypeOf,Object),ht=Object.create,_t=rt.propertyIsEnumerable,yt=Z.splice,bt=st?st.toStringTag:void 0,dt=function(){try{var t=dr(Object,"defineProperty");return t({},"",{}),t}catch(r){}}(),gt=ft?ft.isBuffer:void 0,jt=Math.max,mt=Date.now,Ot=dr(C,"Map"),At=dr(Object,"create"),wt=function(){function t(){}return function(r){if(!Cr(r))return{};if(ht)return ht(r);t.prototype=r;var n=new t;return t.prototype=void 0,n}}();function zt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function xt(){this.__data__=At?At(null):{},this.size=0}function St(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}function Ft(t){var r=this.__data__;if(At){var e=r[t];return e===n?void 0:e}return ot.call(r,t)?r[t]:void 0}function Ut(t){var r=this.__data__;return At?void 0!==r[t]:ot.call(r,t)}function $t(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=At&&void 0===r?n:r,this}function Pt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function Et(){this.__data__=[],this.size=0}function It(t){var r=this.__data__,n=Yt(r,t);return!(n<0)&&(n==r.length-1?r.pop():yt.call(r,n,1),--this.size,!0)}function Tt(t){var r=this.__data__,n=Yt(r,t);return n<0?void 0:r[n][1]}function kt(t){return Yt(this.__data__,t)>-1}function Bt(t,r){var n=this.__data__,e=Yt(n,t);return e<0?(++this.size,n.push([t,r])):n[e][1]=r,this}function Mt(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var e=t[r];this.set(e[0],e[1])}}function Dt(){this.size=0,this.__data__={hash:new zt,map:new(Ot||Pt),string:new zt}}function Rt(t){var r=br(this,t).delete(t);return this.size-=r?1:0,r}function qt(t){return br(this,t).get(t)}function Ct(t){return br(this,t).has(t)}function Lt(t,r){var n=br(this,t),e=n.size;return n.set(t,r),this.size+=n.size==e?0:1,this}function Nt(t){var r=this.__data__=new Pt(t);this.size=r.size}function Gt(){this.__data__=new Pt,this.size=0}function Vt(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}function Wt(t){return this.__data__.get(t)}function Ht(t){return this.__data__.has(t)}function Jt(t,n){var e=this.__data__;if(e instanceof Pt){var o=e.__data__;if(!Ot||o.length<r-1)return o.push([t,n]),this.size=++e.size,this;e=this.__data__=new Mt(o)}return e.set(t,n),this.size=e.size,this}function Kt(t,r){var n=kr(t),e=!n&&Tr(t),o=!n&&!e&&Dr(t),i=!n&&!e&&!o&&Gr(t),u=n||e||o||i,c=u?K(t.length,String):[],a=c.length;for(var f in t)!r&&!ot.call(t,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||mr(f,a))||c.push(f);return c}function Qt(t,r,n){(void 0===n||Ir(t[r],n))&&(void 0!==n||r in t)||Zt(t,r,n)}function Xt(t,r,n){var e=t[r];ot.call(t,r)&&Ir(e,n)&&(void 0!==n||r in t)||Zt(t,r,n)}function Yt(t,r){for(var n=t.length;n--;)if(Ir(t[n][0],r))return n;return-1}function Zt(t,r,n){"__proto__"==r&&dt?dt(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}zt.prototype.clear=xt,zt.prototype.delete=St,zt.prototype.get=Ft,zt.prototype.has=Ut,zt.prototype.set=$t,Pt.prototype.clear=Et,Pt.prototype.delete=It,Pt.prototype.get=Tt,Pt.prototype.has=kt,Pt.prototype.set=Bt,Mt.prototype.clear=Dt,Mt.prototype.delete=Rt,Mt.prototype.get=qt,Mt.prototype.has=Ct,Mt.prototype.set=Lt,Nt.prototype.clear=Gt,Nt.prototype.delete=Vt,Nt.prototype.get=Wt,Nt.prototype.has=Ht,Nt.prototype.set=Jt;var tr=yr();function rr(t){return null==t?void 0===t?O:y:bt&&bt in Object(t)?gr(t):Sr(t)}function nr(t){return Lr(t)&&rr(t)==u}function er(t){return!(!Cr(t)||wr(t))&&(Rr(t)?at:B).test(Er(t))}function or(t){return Lr(t)&&qr(t.length)&&!!D[rr(t)]}function ir(t){if(!Cr(t))return xr(t);var r=zr(t),n=[];for(var e in t)("constructor"!=e||!r&&ot.call(t,e))&&n.push(e);return n}function ur(t,r,n,e,o){t!==r&&tr(r,function(i,u){if(o||(o=new Nt),Cr(i))cr(t,r,u,n,ur,e,o);else{var c=e?e(Ur(t,u),i,u+"",t,r,o):void 0;void 0===c&&(c=i),Qt(t,u,c)}},Wr)}function cr(t,r,n,e,o,i,u){var c=Ur(t,n),a=Ur(r,n),f=u.get(a);if(f)Qt(t,n,f);else{var s=i?i(c,a,n+"",t,r,u):void 0,l=void 0===s;if(l){var p=kr(a),v=!p&&Dr(a),h=!p&&!v&&Gr(a);s=a,p||v||h?kr(c)?s=c:Mr(c)?s=vr(c):v?(l=!1,s=sr(a,!0)):h?(l=!1,s=pr(a,!0)):s=[]:Nr(a)||Tr(a)?(s=c,Tr(c)?s=Vr(c):Cr(c)&&!Rr(c)||(s=jr(a))):l=!1}l&&(u.set(a,s),o(s,a,e,i,u),u.delete(a)),Qt(t,n,s)}}function ar(t,r){return $r(Fr(t,r,Kr),t+"")}var fr=dt?function(t,r){return dt(t,"toString",{configurable:!0,enumerable:!1,value:Jr(r),writable:!0})}:Kr;function sr(t,r){if(r)return t.slice();var n=t.length,e=pt?pt(n):new t.constructor(n);return t.copy(e),e}function lr(t){var r=new t.constructor(t.byteLength);return new lt(r).set(new lt(t)),r}function pr(t,r){var n=r?lr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function vr(t,r){var n=-1,e=t.length;for(r||(r=Array(e));++n<e;)r[n]=t[n];return r}function hr(t,r,n,e){var o=!n;n||(n={});for(var i=-1,u=r.length;++i<u;){var c=r[i],a=e?e(n[c],t[c],c,n,t):void 0;void 0===a&&(a=t[c]),o?Zt(n,c,a):Xt(n,c,a)}return n}function _r(t){return ar(function(r,n){var e=-1,o=n.length,i=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Or(n[0],n[1],u)&&(i=o<3?void 0:i,o=1),r=Object(r);++e<o;){var c=n[e];c&&t(r,c,e,i)}return r})}function yr(t){return function(r,n,e){for(var o=-1,i=Object(r),u=e(r),c=u.length;c--;){var a=u[t?c:++o];if(!1===n(i[a],a,i))break}return r}}function br(t,r){var n=t.__data__;return Ar(r)?n["string"==typeof r?"string":"hash"]:n.map}function dr(t,r){var n=X(t,r);return er(n)?n:void 0}function gr(t){var r=ot.call(t,bt),n=t[bt];try{t[bt]=void 0;var e=!0}catch(i){}var o=ut.call(t);return e&&(r?t[bt]=n:delete t[bt]),o}function jr(t){return"function"!=typeof t.constructor||zr(t)?{}:wt(vt(t))}function mr(t,r){var n=typeof t;return!!(r=null==r?i:r)&&("number"==n||"symbol"!=n&&M.test(t))&&t>-1&&t%1==0&&t<r}function Or(t,r,n){if(!Cr(n))return!1;var e=typeof r;return!!("number"==e?Br(n)&&mr(r,n.length):"string"==e&&r in n)&&Ir(n[r],t)}function Ar(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}function wr(t){return!!it&&it in t}function zr(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||rt)}function xr(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r}function Sr(t){return ut.call(t)}function Fr(t,r,n){return r=jt(void 0===r?t.length-1:r,0),function(){for(var e=arguments,o=-1,i=jt(e.length-r,0),u=Array(i);++o<i;)u[o]=e[r+o];o=-1;for(var c=Array(r+1);++o<r;)c[o]=e[o];return c[r]=n(u),J(t,this,c)}}function Ur(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]}var $r=Pr(fr);function Pr(t){var r=0,n=0;return function(){var i=mt(),u=o-(i-n);if(n=i,u>0){if(++r>=e)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}function Er(t){if(null!=t){try{return et.call(t)}catch(r){}try{return t+""}catch(r){}}return""}function Ir(t,r){return t===r||t!=t&&r!=r}var Tr=nr(function(){return arguments}())?nr:function(t){return Lr(t)&&ot.call(t,"callee")&&!_t.call(t,"callee")},kr=Array.isArray;function Br(t){return null!=t&&qr(t.length)&&!Rr(t)}function Mr(t){return Lr(t)&&Br(t)}var Dr=gt||Qr;function Rr(t){if(!Cr(t))return!1;var r=rr(t);return r==p||r==v||r==a||r==d}function qr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Cr(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function Lr(t){return null!=t&&"object"==typeof t}function Nr(t){if(!Lr(t)||rr(t)!=b)return!1;var r=vt(t);if(null===r)return!0;var n=ot.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&et.call(n)==ct}var Gr=H?Q(H):or;function Vr(t){return hr(t,Wr(t))}function Wr(t){return Br(t)?Kt(t,!0):ir(t)}var Hr=_r(function(t,r,n,e){ur(t,r,n,e)});function Jr(t){return function(){return t}}function Kr(t){return t}function Qr(){return!1}module.exports=Hr;
},{}],"Qmqh":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],n=200,r="__lodash_hash_undefined__",e=1/0,o="[object Function]",u="[object GeneratorFunction]",i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,c="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,s=c||f||Function("return this")();function _(t,n){return!!(t?t.length:0)&&l(t,n,0)>-1}function h(t,n,r){for(var e=-1,o=t?t.length:0;++e<o;)if(r(n,t[e]))return!0;return!1}function p(t,n,r,e){for(var o=t.length,u=r+(e?1:-1);e?u--:++u<o;)if(n(t[u],u,t))return u;return-1}function l(t,n,r){if(n!=n)return p(t,v,r);for(var e=r-1,o=t.length;++e<o;)if(t[e]===n)return e;return-1}function v(t){return t!=t}function y(t,n){return t.has(n)}function d(t,n){return null==t?void 0:t[n]}function g(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(r){}return n}function b(t){var n=-1,r=Array(t.size);return t.forEach(function(t){r[++n]=t}),r}var j=Array.prototype,O=Function.prototype,w=Object.prototype,m=s["__core-js_shared__"],$=function(){var t=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),S=O.toString,F=w.hasOwnProperty,x=w.toString,E=RegExp("^"+S.call(F).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=j.splice,k=ut(s,"Map"),A=ut(s,"Set"),R=ut(Object,"create");function z(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function C(){this.__data__=R?R(null):{}}function G(t){return this.has(t)&&delete this.__data__[t]}function I(t){var n=this.__data__;if(R){var e=n[t];return e===r?void 0:e}return F.call(n,t)?n[t]:void 0}function M(t){var n=this.__data__;return R?void 0!==n[t]:F.call(n,t)}function T(t,n){return this.__data__[t]=R&&void 0===n?r:n,this}function q(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function B(){this.__data__=[]}function D(t){var n=this.__data__,r=tt(n,t);return!(r<0)&&(r==n.length-1?n.pop():P.call(n,r,1),!0)}function H(t){var n=this.__data__,r=tt(n,t);return r<0?void 0:n[r][1]}function J(t){return tt(this.__data__,t)>-1}function K(t,n){var r=this.__data__,e=tt(r,t);return e<0?r.push([t,n]):r[e][1]=n,this}function L(t){var n=-1,r=t?t.length:0;for(this.clear();++n<r;){var e=t[n];this.set(e[0],e[1])}}function N(){this.__data__={hash:new z,map:new(k||q),string:new z}}function Q(t){return ot(this,t).delete(t)}function U(t){return ot(this,t).get(t)}function V(t){return ot(this,t).has(t)}function W(t,n){return ot(this,t).set(t,n),this}function X(t){var n=-1,r=t?t.length:0;for(this.__data__=new L;++n<r;)this.add(t[n])}function Y(t){return this.__data__.set(t,r),this}function Z(t){return this.__data__.has(t)}function tt(t,n){for(var r=t.length;r--;)if(st(t[r][0],n))return r;return-1}function nt(t){return!(!ht(t)||at(t))&&(_t(t)||g(t)?E:a).test(ct(t))}function rt(t,r,e){var o=-1,u=_,i=t.length,a=!0,c=[],f=c;if(e)a=!1,u=h;else if(i>=n){var s=r?null:et(t);if(s)return b(s);a=!1,u=y,f=new X}else f=r?[]:c;t:for(;++o<i;){var p=t[o],l=r?r(p):p;if(p=e||0!==p?p:0,a&&l==l){for(var v=f.length;v--;)if(f[v]===l)continue t;r&&f.push(l),c.push(p)}else u(f,l,e)||(f!==c&&f.push(l),c.push(p))}return c}z.prototype.clear=C,z.prototype.delete=G,z.prototype.get=I,z.prototype.has=M,z.prototype.set=T,q.prototype.clear=B,q.prototype.delete=D,q.prototype.get=H,q.prototype.has=J,q.prototype.set=K,L.prototype.clear=N,L.prototype.delete=Q,L.prototype.get=U,L.prototype.has=V,L.prototype.set=W,X.prototype.add=X.prototype.push=Y,X.prototype.has=Z;var et=A&&1/b(new A([,-0]))[1]==e?function(t){return new A(t)}:pt;function ot(t,n){var r=t.__data__;return it(n)?r["string"==typeof n?"string":"hash"]:r.map}function ut(t,n){var r=d(t,n);return nt(r)?r:void 0}function it(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}function at(t){return!!$&&$ in t}function ct(t){if(null!=t){try{return S.call(t)}catch(n){}try{return t+""}catch(n){}}return""}function ft(t){return t&&t.length?rt(t):[]}function st(t,n){return t===n||t!=t&&n!=n}function _t(t){var n=ht(t)?x.call(t):"";return n==o||n==u}function ht(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function pt(){}module.exports=ft;
},{}],"hT6N":[function(require,module,exports) {
var t="[object Object]";function n(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(r){}return n}function r(t,n){return function(r){return t(n(r))}}var o=Function.prototype,c=Object.prototype,e=o.toString,u=c.hasOwnProperty,f=e.call(Object),i=c.toString,l=r(Object.getPrototypeOf,Object);function a(t){return!!t&&"object"==typeof t}function p(r){if(!a(r)||i.call(r)!=t||n(r))return!1;var o=l(r);if(null===o)return!0;var c=u.call(o,"constructor")&&o.constructor;return"function"==typeof c&&c instanceof c&&e.call(c)==f}module.exports=p;
},{}],"JgbV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return(0,r.default)((0,l.default)(e)&&e.length>=1,"Must merge at least 1 JSON schema."),a.default.apply(void 0,[{}].concat(h(e),[function(e,t,a){if(!(0,i.default)(e)){if("required"===a)return(0,d.default)(e.concat(t));if((0,o.default)(e)){if(!(0,o.default)(t))throw new Error('Failed to merge schemas because "'+a+'" has different values.')}else r.default.deepEqual(e,t,'Failed to merge schemas because "'+a+'" has different values: '+JSON.stringify(e)+" and "+JSON.stringify(t)+".")}}]))};var e=require("assert"),r=c(e),t=require("lodash.mergewith"),a=c(t),u=require("lodash.isnil"),i=c(u),s=require("lodash.isarray"),l=c(s),f=require("lodash.uniq"),d=c(f),n=require("lodash.isplainobject"),o=c(n);function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}module.exports=exports.default;
},{"assert":"ujkD","lodash.mergewith":"fWTD","lodash.isnil":"gGJU","lodash.isarray":"p0cq","lodash.uniq":"Qmqh","lodash.isplainobject":"hT6N"}],"Zlyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizePasses=P,exports.default=void 0;var e,r,i,a,t,n,l=b(require("@babel/runtime/helpers/slicedToArray")),s=b(require("@babel/runtime/helpers/initializerDefineProperty")),u=b(require("@babel/runtime/helpers/classCallCheck")),o=b(require("@babel/runtime/helpers/createClass")),d=b(require("@babel/runtime/helpers/applyDecoratedDescriptor")),c=b(require("@babel/runtime/helpers/initializerWarningHelper")),f=require("@antv/l7-core"),p=require("inversify");function b(e){return e&&e.__esModule?e:{default:e}}function P(e){return e.map(function(e){return"string"==typeof e&&(e=[e,{}]),e})}var g=(e=(0,p.injectable)(),r=(0,p.inject)(f.TYPES.IGlobalConfigService),e((a=n=function(){function e(){(0,u.default)(this,e),(0,s.default)(this,"configService",t,this),this.enabled=void 0}return(0,o.default)(e,[{key:"apply",value:function(e,r){var i=this,a=r.rendererService,t=r.postProcessingPassFactory,n=r.normalPassFactory;e.hooks.init.tap("MultiPassRendererPlugin",function(){var r=e.getLayerConfig(),a=r.enableMultiPassRenderer,l=r.passes,s=void 0===l?[]:l;i.enabled=!!a&&!1!==e.getLayerConfig().enableMultiPassRenderer,i.enabled&&(e.multiPassRenderer=i.createMultiPassRenderer(e,s,t,n),e.multiPassRenderer.setRenderFlag(!0))}),e.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(i.enabled){var r=a.getViewportSize(),t=r.width,n=r.height;e.multiPassRenderer.resize(t,n)}})}},{key:"createMultiPassRenderer",value:function(e,r,i,a){var t=e.multiPassRenderer,n=e.getLayerConfig(),s=n.enablePicking,u=n.enableTAA;return s&&t.add(a("pixelPicking")),u?t.add(a("taa")):t.add(a("render")),P(r).forEach(function(e){var r=(0,l.default)(e,2),a=r[0],n=r[1];t.add(i(a),n)}),t.add(i("copy")),t}}]),e}(),t=(0,d.default)(a.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=a))||i);exports.default=g;
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"KUvy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlendTypes=void 0;var e,l=t(require("@babel/runtime/helpers/defineProperty")),r=require("@antv/l7-core");function t(e){return e&&e.__esModule?e:{default:e}}var a=(e={},(0,l.default)(e,r.BlendType.additive,{enable:!0,func:{srcRGB:r.gl.ONE,dstRGB:r.gl.ONE,srcAlpha:1,dstAlpha:1}}),(0,l.default)(e,r.BlendType.normal,{enable:!0,func:{srcRGB:r.gl.SRC_ALPHA,dstRGB:r.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),(0,l.default)(e,r.BlendType.subtractive,{enable:!0,func:{srcRGB:r.gl.ONE,dstRGB:r.gl.ONE,srcAlpha:r.gl.ZERO,dstAlpha:r.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:r.gl.FUNC_SUBTRACT,alpha:r.gl.FUNC_SUBTRACT}}),(0,l.default)(e,r.BlendType.max,{enable:!0,func:{srcRGB:r.gl.ONE,dstRGB:r.gl.ONE},equation:{rgb:r.gl.MAX_EXT}}),(0,l.default)(e,r.BlendType.min,{enable:!0,func:{srcRGB:r.gl.ONE,dstRGB:r.gl.ONE},equation:{rgb:r.gl.MIN_EXT}}),e);exports.BlendTypes=a;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@antv/l7-core":"om0I"}],"Fn4S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}};exports.default=e;
},{}],"RXwS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,i,r,n,a,o,s,l=E(require("@babel/runtime/helpers/objectWithoutProperties")),u=E(require("@babel/runtime/helpers/defineProperty")),c=E(require("@babel/runtime/helpers/initializerDefineProperty")),d=E(require("@babel/runtime/helpers/classCallCheck")),h=E(require("@babel/runtime/helpers/createClass")),f=E(require("@babel/runtime/helpers/possibleConstructorReturn")),y=E(require("@babel/runtime/helpers/getPrototypeOf")),v=E(require("@babel/runtime/helpers/assertThisInitialized")),g=E(require("@babel/runtime/helpers/inherits")),p=E(require("@babel/runtime/helpers/applyDecoratedDescriptor")),S=E(require("@babel/runtime/helpers/initializerWarningHelper")),m=E(require("lodash/isObject")),b=E(require("lodash/isFunction")),k=require("@antv/l7-core"),P=require("@antv/l7-utils"),C=require("eventemitter3"),A=E(require("merge-json-schemas")),O=require("tapable"),I=require("../plugins/MultiPassRendererPlugin"),L=require("../utils/blend"),w=E(require("./schema"));function E(e){return e&&e.__esModule?e:{default:e}}function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach(function(t){(0,u.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var T=0,R=(e=(0,k.lazyInject)(k.TYPES.ILogService),t=(0,k.lazyInject)(k.TYPES.IGlobalConfigService),i=(0,k.lazyInject)(k.TYPES.IShaderModuleService),r=s=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(this,t),(e=(0,f.default)(this,(0,y.default)(t).call(this))).id="".concat(T++),e.name="".concat(T++),e.type=void 0,e.visible=!0,e.zIndex=0,e.minZoom=void 0,e.maxZoom=void 0,e.inited=!1,e.layerModelNeedUpdate=!1,e.pickedFeatureID=-1,e.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},e.hooks={init:new O.SyncBailHook,afterInit:new O.SyncBailHook,beforeRender:new O.SyncBailHook,beforeRenderData:new O.SyncWaterfallHook(["data"]),afterRender:new O.SyncHook,beforePickingEncode:new O.SyncHook,afterPickingEncode:new O.SyncHook,beforeHighlight:new O.SyncHook(["pickedColor"]),afterHighlight:new O.SyncHook,beforeSelect:new O.SyncHook(["pickedColor"]),afterSelect:new O.SyncHook,beforeDestroy:new O.SyncHook,afterDestroy:new O.SyncHook},e.models=[],e.multiPassRenderer=void 0,e.plugins=void 0,e.sourceOption=void 0,e.layerModel=void 0,(0,c.default)(e,"logger",n,(0,v.default)(e)),(0,c.default)(e,"configService",a,(0,v.default)(e)),(0,c.default)(e,"shaderModuleService",o,(0,v.default)(e)),e.iconService=void 0,e.fontService=void 0,e.rendererService=void 0,e.layerService=void 0,e.interactionService=void 0,e.mapService=void 0,e.styleAttributeService=void 0,e.layerSource=void 0,e.postProcessingPassFactory=void 0,e.normalPassFactory=void 0,e.animateOptions={enable:!1},e.container=void 0,e.encodedData=void 0,e.configSchema=void 0,e.currentPickId=null,e.rawConfig=void 0,e.needUpdateConfig=void 0,e.pendingStyleAttributes=[],e.scaleOptions={},e.animateStartTime=void 0,e.aniamateStatus=!1,e.sourceEvent=function(){e.dataState.dataSourceNeedUpdate=!0,e.reRender()},e.name=i.name||e.id,e.rawConfig=i,e}return(0,g.default)(t,e),(0,h.default)(t,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(e){if(this.inited){var t=this.container.get(k.TYPES.SceneID);this.configService.setLayerConfig(t,this.id,D({},this.configService.getLayerConfig(this.id),{},this.needUpdateConfig,{},e)),this.needUpdateConfig={}}else this.needUpdateConfig=D({},this.needUpdateConfig,{},e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(e){return this.plugins.push(e),this}},{key:"init",value:function(){var e=this,t=this.container.get(k.TYPES.SceneID);this.configService.setLayerConfig(t,this.id,{}),this.iconService=this.container.get(k.TYPES.IIconService),this.fontService=this.container.get(k.TYPES.IFontService),this.rendererService=this.container.get(k.TYPES.IRendererService),this.layerService=this.container.get(k.TYPES.ILayerService),this.interactionService=this.container.get(k.TYPES.IInteractionService),this.mapService=this.container.get(k.TYPES.IMapService),this.postProcessingPassFactory=this.container.get(k.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(k.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(k.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(k.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(t){var i=t.attributeName,r=t.attributeField,n=t.attributeValues,a=t.defaultName,o=t.updateOptions;e.styleAttributeService.updateStyleAttribute(i,{scale:D({field:r},e.splitValuesAndCallbackInAttribute(n,e.getLayerConfig()[a||i]))},o)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(k.TYPES.ILayerPlugin);var i=!0,r=!1,n=void 0;try{for(var a,o=this.plugins[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){a.value.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(s){r=!0,n=s}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(D({},this.getDefaultConfig(),{},this.rawConfig));var e=this.getLayerConfig().animateOption;(null==e?void 0:e.enable)&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(e,t,i){return this.pendingStyleAttributes.push({attributeName:"color",attributeField:e,attributeValues:t,defaultName:"colors",updateOptions:i}),this}},{key:"size",value:function(e,t,i){return this.pendingStyleAttributes.push({attributeName:"size",attributeField:e,attributeValues:t,updateOptions:i}),this}},{key:"filter",value:function(e,t,i){return this.pendingStyleAttributes.push({attributeName:"filter",attributeField:e,attributeValues:t,updateOptions:i}),this.dataState.dataMappingNeedUpdate=!0,this}},{key:"shape",value:function(e,t,i){return this.pendingStyleAttributes.push({attributeName:"shape",attributeField:e,attributeValues:t,updateOptions:i}),this}},{key:"label",value:function(e,t,i){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:e,attributeValues:t,updateOptions:i}),this}},{key:"animate",value:function(e){var t={};return(0,m.default)(e)?(t.enable=!0,t=D({},t,{},e)):t.enable=e,this.updateLayerConfig({animateOption:t}),this}},{key:"source",value:function(e,t){return this.sourceOption={data:e,options:t},this}},{key:"setData",value:function(e,t){var i=this;return this.inited?this.layerSource.setData(e):this.on("inited",function(){i.layerSource.setData(e)}),this}},{key:"style",value:function(e){var t=this,i=e.passes,r=(0,l.default)(e,["passes"]);return i&&(0,I.normalizePasses)(i).forEach(function(e){var i=t.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(e[0]);i&&i.updateOptions(e[1])}),this.rawConfig=D({},this.rawConfig,{},r),this.container&&this.updateLayerConfig(this.rawConfig),this}},{key:"scale",value:function(e,t){return(0,m.default)(e)?this.scaleOptions=D({},this.scaleOptions,{},e):this.scaleOptions[e]=t,this}},{key:"render",value:function(){return this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag()?this.multiPassRenderer.render():this.renderModels(),this}},{key:"active",value:function(e){var t={};return t.enableHighlight=!!(0,m.default)(e)||e,(0,m.default)(e)?(t.enableHighlight=!0,e.color&&(t.highlightColor=e.color)):t.enableHighlight=!!e,this.updateLayerConfig(t),this}},{key:"setActive",value:function(e,t){var i=this;if((0,m.default)(e)){var r=e.x,n=void 0===r?0:r,a=e.y,o=void 0===a?0:a;this.updateLayerConfig({highlightColor:(0,m.default)(t)?t.color:this.getLayerConfig().highlightColor}),this.pick({x:n,y:o})}else this.updateLayerConfig({pickedFeatureID:e,highlightColor:(0,m.default)(t)?t.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.callAsync((0,P.encodePickingColor)(e),function(){setTimeout(function(){i.reRender()},1)})}},{key:"select",value:function(e){var t={};return t.enableSelect=!!(0,m.default)(e)||e,(0,m.default)(e)?(t.enableSelect=!0,e.color&&(t.selectColor=e.color)):t.enableSelect=!!e,this.updateLayerConfig(t),this}},{key:"setSelect",value:function(e,t){var i=this;if((0,m.default)(e)){var r=e.x,n=void 0===r?0:r,a=e.y,o=void 0===a?0:a;this.updateLayerConfig({selectColor:(0,m.default)(t)?t.color:this.getLayerConfig().selectColor}),this.pick({x:n,y:o})}else this.updateLayerConfig({pickedFeatureID:e,selectColor:(0,m.default)(t)?t.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.callAsync((0,P.encodePickingColor)(e),function(){setTimeout(function(){i.reRender()},1)})}},{key:"setBlend",value:function(e){this.updateLayerConfig({blend:e}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(e){return this.zIndex=e,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(e){this.currentPickId=e}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"isVisible",value:function(){var e=this.mapService.getZoom(),t=this.getLayerConfig(),i=t.visible,r=t.minZoom,n=void 0===r?-1/0:r,a=t.maxZoom;return!!i&&e>=n&&e<=(void 0===a?1/0:a)}},{key:"setMinZoom",value:function(e){return this.updateLayerConfig({minZoom:e}),this}},{key:"setMaxZoom",value:function(e){return this.updateLayerConfig({maxZoom:e}),this}},{key:"fitBounds",value:function(){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var e=this.getSource().extent;return this.mapService.fitBounds([[e[0],e[1]],[e[2],e[3]]]),this}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.styleAttributeService.clearAllAttributes(),this.models.forEach(function(e){return e.destroy()}),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes(),this.models.forEach(function(e){return e.destroy()})}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(e){return e.needRescale||e.needRemapping||e.needRegenerateVertices}).length}},{key:"setSource",value:function(e){this.layerSource=e;var t=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(t),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(e){this.encodedData=e}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=(0,A.default)([w.default,this.getConfigSchema()])),this.configSchema}},{key:"pick",value:function(e){var t=e.x,i=e.y;this.interactionService.triggerHover({x:t,y:i})}},{key:"buildLayerModel",value:function(e){var t=e.moduleName,i=e.vertexShader,r=e.fragmentShader,n=e.triangulation,a=(0,l.default)(e,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(t,{vs:i,fs:r});var o=this.shaderModuleService.getModule(t),s=o.vs,u=o.fs,c=o.uniforms,d=this.rendererService.createModel,h=this.styleAttributeService.createAttributesAndIndices(this.encodedData,n);return d(D({attributes:h.attributes,uniforms:c,fs:u,vs:s,elements:h.elements,blend:L.BlendTypes[k.BlendType.normal]},a))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var e=this;return this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(t){t.draw({uniforms:e.layerModel.getUninforms()})}),this}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(e,t){return{values:(0,b.default)(e)?void 0:e||t,callback:(0,b.default)(e)?e:void 0}}}]),t}(C.EventEmitter),n=(0,p.default)(r.prototype,"logger",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,p.default)(r.prototype,"configService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,p.default)(r.prototype,"shaderModuleService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r);exports.default=R;
},{"@babel/runtime/helpers/objectWithoutProperties":"U8F3","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/assertThisInitialized":"E7HD","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","lodash/isObject":"u9vI","lodash/isFunction":"dRuq","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","eventemitter3":"JJlS","merge-json-schemas":"JgbV","tapable":"WAFq","../plugins/MultiPassRendererPlugin":"Zlyx","../utils/blend":"KUvy","./schema":"Fn4S"}],"GHJD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,n,a,l=h(require("@babel/runtime/helpers/initializerDefineProperty")),o=h(require("@babel/runtime/helpers/classCallCheck")),u=h(require("@babel/runtime/helpers/createClass")),c=h(require("@babel/runtime/helpers/applyDecoratedDescriptor")),s=h(require("@babel/runtime/helpers/initializerWarningHelper")),d=require("@antv/l7-core"),v=require("../utils/blend");function h(e){return e&&e.__esModule?e:{default:e}}var S=(e=(0,d.lazyInject)(d.TYPES.IGlobalConfigService),t=(0,d.lazyInject)(d.TYPES.IShaderModuleService),r=a=function(){function e(t){(0,o.default)(this,e),this.triangulation=void 0,this.layer=void 0,(0,l.default)(this,"configService",i,this),(0,l.default)(this,"shaderModuleService",n,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=t,this.rendererService=t.getContainer().get(d.TYPES.IRendererService),this.styleAttributeService=t.getContainer().get(d.TYPES.IStyleAttributeService),this.mapService=t.getContainer().get(d.TYPES.IMapService),this.iconService=t.getContainer().get(d.TYPES.IIconService),this.fontService=t.getContainer().get(d.TYPES.IFontService),this.cameraService=t.getContainer().get(d.TYPES.ICameraService),this.layerService=t.getContainer().get(d.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return(0,u.default)(e,[{key:"getBlend",value:function(){var e=this.layer.getLayerConfig().blend,t=void 0===e?"normal":e;return v.BlendTypes[d.BlendType[t]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.duration||4,e.interval||.2,e.trailLength||.1]}},{key:"startModelAnimate",value:function(){this.layer.getLayerConfig().animateOption.enable&&this.layer.setAnimateStartTime()}}]),e}(),i=(0,c.default)(r.prototype,"configService",[e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=(0,c.default)(r.prototype,"shaderModuleService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r);exports.default=S;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","../utils/blend":"KUvy"}],"vwhv":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,y,o,p,a,l=t&&t.length,h=l?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s||s.next===s.prev)return c;if(l&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=y=e[1];for(var Z=x;Z<h;Z+=x)(o=e[Z])<i&&(i=o),(p=e[Z+1])<u&&(u=p),o>v&&(v=o),p>y&&(y=p);a=0!==(a=Math.max(v-i,y-u))?1/a:0}return r(s,c,x,i,u,a),c}function n(e,n,t,r,x){var i,u;if(x===D(e,n,t,r)>0)for(i=n;i<t;i+=r)u=A(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=A(i,e[i],e[i+1],u);return u&&w(u,u.next)&&(B(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!w(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(B(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,y,o,p,a){if(e){!a&&p&&l(e,y,o,p);for(var h,s,c=e;e.prev!==e.next;)if(h=e.prev,s=e.next,p?i(e,y,o,p):x(e))n.push(h.i/f),n.push(e.i/f),n.push(s.i/f),B(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(t(e),n,f),n,f,y,o,p,2):2===a&&v(e,n,f,y,o,p):r(t(e),n,f,y,o,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(g(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(Z(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&g(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(g(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,y=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,o=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=s(v,f,n,t,r),a=s(y,o,n,t,r),l=e.prevZ,h=e.nextZ;l&&l.z>=p&&h&&h.z<=a;){if(l!==e.prev&&l!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;if(l=l.prevZ,h!==e.prev&&h!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;l&&l.z>=p;){if(l!==e.prev&&l!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;h&&h.z<=a;){if(h!==e.prev&&h!==e.next&&Z(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!w(i,u)&&M(i,x,x.next,u)&&k(i,u)&&k(u,i)&&(n.push(i.i/r),n.push(x.i/r),n.push(u.i/r),B(x),B(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var y=f.next.next;y!==f.prev;){if(f.i!==y.i&&d(f,y)){var o=q(f,y);return f=t(f,f.next),o=t(o,o.next),r(f,n,x,i,u,v),void r(o,n,x,i,u,v)}y=y.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,p=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),p.push(c(f));for(p.sort(y),u=0;u<p.length;u++)o(p[u],x),x=t(x,x.next);return x}function y(e,n){return e.x-n.x}function o(e,n){if(n=p(e,n)){var r=q(n,e);t(n,n.next),t(r,r.next)}}function p(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t;var f,y=t,o=t.x,p=t.y,l=1/0;r=t;do{x>=r.x&&r.x>=o&&x!==r.x&&Z(i<p?x:u,i,o,p,i<p?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),k(r,e)&&(f<l||f===l&&(r.x>t.x||r.x===t.x&&a(t,r)))&&(t=r,l=f)),r=r.next}while(r!==y);return t}function a(e,n){return g(e.prev,e,n.prev)<0&&g(n.next,e,e.next)<0}function l(e,n,t,r){var x=e;do{null===x.z&&(x.z=s(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,h(x)}function h(e){var n,t,r,x,i,u,v,f,y=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<y&&(v++,r=r.nextZ);n++);for(f=y;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,y*=2}while(u>1);return e}function s(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function c(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function Z(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!b(e,n)&&(k(e,n)&&k(n,e)&&j(e,n)&&(g(e.prev,e,n.prev)||g(e,n.prev,n))||w(e,n)&&g(e.prev,e,e.next)>0&&g(n.prev,n,n.next)>0)}function g(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function w(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=m(g(e,n,t)),i=m(g(e,n,r)),u=m(g(t,r,e)),v=m(g(t,r,n));return x!==i&&u!==v||(!(0!==x||!z(e,t,n))||(!(0!==i||!z(e,r,n))||(!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r)))))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function m(e){return e>0?1:e<0?-1:0}function b(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function k(e,n){return g(e.prev,e,e.next)<0?g(e,n,e.next)>=0&&g(e,e.prev,n)>=0:g(e,n,e.prev)<0||g(e,e.next,n)<0}function j(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function q(e,n){var t=new C(e.i,e.x,e.y),r=new C(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function A(e,n,t,r){var x=new C(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(D(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var y=n[v]*t,o=v<f-1?n[v+1]*t:e.length;u-=Math.abs(D(e,y,o,t))}var p=0;for(v=0;v<r.length;v+=3){var a=r[v]*t,l=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[a]-e[h])*(e[l+1]-e[a+1])-(e[a]-e[l])*(e[h+1]-e[a+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"ZvaF":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),t="[object Number]";function u(u){return"number"==typeof u||r(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":"e5TX","./isObjectLike":"OuyB"}],"bMxA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculteCentroid=t;var r=e(require("lodash/isNumber"));function e(r){return r&&r.__esModule?r:{default:r}}function t(e){if((0,r.default)(e[0]))return e;if((0,r.default)(e[0][0]))throw new Error("当前数据不支持标注");if((0,r.default)(e[0][0][0])){var t=0,u=0,o=0;return e.forEach(function(r){r.forEach(function(r){t+=r[0],u+=r[1],o++})}),[t/o,u/o,0]}throw new Error("当前数据不支持标注")}
},{"lodash/isNumber":"ZvaF"}],"xXgq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeMiter=a,exports.computeNormal=s,exports.direction=o,exports.default=p;var e=u(require("@babel/runtime/helpers/toConsumableArray")),r=require("@antv/l7-utils"),t=require("gl-matrix");function u(e){return e&&e.__esModule?e:{default:e}}function a(e,r,u,a,s){t.vec2.add(e,u,a),t.vec2.normalize(e,e),r=t.vec2.fromValues(-e[1],e[0]);var o=t.vec2.fromValues(-u[1],u[0]);return s/t.vec2.dot(r,o)}function s(e,r){return t.vec2.set(e,-r[1],r[0])}function o(e,u,a){var s=(0,r.aProjectFlat)([u[0],u[1]]),o=(0,r.aProjectFlat)([a[0],a[1]]);return t.vec2.sub(e,s,o),t.vec2.normalize(e,e),e}function c(e,r,t,u,a,s){l(r,t,a,-s),l(r,t,a,s),e.push(u[0],u[1],0),e.push(u[0],u[1],0)}function l(e,r,t,u){e.push(t[0],t[1],0),r.push(u)}function n(e,t){var u=(0,r.aProjectFlat)([t[0],t[1]]),a=(0,r.aProjectFlat)([e[0],e[1]]),s=u[0]-a[0],o=u[1]-a[1];return Math.sqrt(s*s+o*o)}function v(e,r){return e[0]===r[0]&&e[1]===r[1]}function p(r,u,p){var f=t.vec2.fromValues(0,0),h=t.vec2.fromValues(0,0),i=t.vec2.fromValues(0,0),m=t.vec2.create(),d=!1,V=null,b=t.vec2.create(),g=p||0,x=[],y=[],M=[],P=[],j=[0,0];u&&(r=r.slice()).push(r[0]);for(var q=r.length,F=1;F<q;F++){var _=g,z=t.vec2.fromValues(r[F-1][0],r[F-1][1]),A=t.vec2.fromValues(r[F][0],r[F][1]),C=F<r.length-1?t.vec2.fromValues(r[F+1][0],r[F+1][1]):null;if(!v(z,A)){if(C)for(var I=F+1;C&&v(A,C);)C=I<r.length-1?t.vec2.fromValues(r[++I][0],r[I][1]):null;var N=n(A,z)+j[j.length-1];if(o(f,A,z),V||s(V=t.vec2.create(),f),d||(d=!0,c(y,x,P,z,V,1)),M.push(_+0,_+2,_+1),C){o(h,C,A);var O=a(i,t.vec2.fromValues(m[0],m[1]),f,h,1),k=t.vec2.dot(i,V)<0?-1:1,w=Math.abs(O)>3;if(Math.abs(O)>1e3){c(y,x,P,A,V,1),M.push(_+1,_+2,_+3),M.push(_+2,_+4,_+3),s(b,h),t.vec2.copy(V,b),c(y,x,P,A,V,1),j.push(N,N,N,N),g+=4;continue}w?(O=3,c(y,x,P,A,V,1),M.push(_+1,_+2,_+3),M.push.apply(M,(0,e.default)(1===k?[_+2,_+4,_+5]:[_+4,_+5,_+3])),s(b,h),t.vec2.copy(V,b),c(y,x,P,A,V,1),j.push(N,N,N,N),g+=4):(c(y,x,P,A,V,1),M.push(_+1,_+2,_+3),l(x,P,V,O*-k),y.push(A[0],A[1],0),M.push(_+2,_+4,_+3),M.push(_+4,_+5,_+6),s(b,h),t.vec2.copy(V,b),c(y,x,P,A,V,1),j.push(N,N,N,N,N),g+=5)}else s(V,f),c(y,x,P,A,V,1),j.push(N,N),M.push(_+1,_+2,_+3),g+=2}}for(var B=[],D=0;D<P.length;D++){var E=j[j.length-1];B.push(y[3*D],y[3*D+1],y[3*D+2],j[D],P[D],E)}return{normals:x,attrIndex:M,attrPos:B}}
},{"@babel/runtime/helpers/toConsumableArray":"Fhqp","@antv/l7-utils":"nTEC","gl-matrix":"CPlc"}],"f7f9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.fillPolygon=n,exports.extrude_PolygonNormal=u;var e=s(require("@babel/runtime/helpers/toConsumableArray")),t=require("@antv/l7-utils"),r=s(require("earcut")),l=require("gl-matrix");function s(e){return e&&e.__esModule?e:{default:e}}function a(t){var l=t[0][0],s=t[0][t[0].length-1];l[0]===s[0]&&l[1]===s[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var a=t[0].length,n=r.default.flatten(t),u=n.vertices,i=n.dimensions,c=[],o=[],v=0;v<u.length/i;v++)2===i?c.push(u[2*v],u[2*v+1],1):c.push(u[3*v],u[3*v+1],1);var f=(0,r.default)(n.vertices,n.holes,n.dimensions);o.push.apply(o,(0,e.default)(f));for(var p=function(t){var r=n.vertices.slice(t*i,(t+1)*i),l=n.vertices.slice((t+1)*i,(t+2)*i);0===l.length&&(l=n.vertices.slice(0,i));var s=c.length/3;c.push(r[0],r[1],1,l[0],l[1],1,r[0],r[1],0,l[0],l[1],0),o.push.apply(o,(0,e.default)([0,2,1,2,3,1].map(function(e){return e+s})))},d=0;d<a;d++)p(d);return{positions:c,index:o}}function n(e){var t=r.default.flatten(e),l=(0,r.default)(t.vertices,t.holes,t.dimensions);return{positions:t.vertices,index:l}}function u(t){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=t[0][0],a=t[0][t[0].length-1];s[0]===a[0]&&s[1]===a[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var n=t[0].length,u=r.default.flatten(t),c=u.vertices,o=u.dimensions,v=[],f=[],p=[],d=0;d<c.length/o;d++)2===o?v.push(c[2*d],c[2*d+1],1,-1,-1):v.push(c[3*d],c[3*d+1],1,-1,-1),p.push(0,0,1);var h=(0,r.default)(u.vertices,u.holes,u.dimensions);f.push.apply(f,(0,e.default)(h));for(var g=function(t){var r=u.vertices.slice(t*o,(t+1)*o),s=u.vertices.slice((t+1)*o,(t+2)*o);0===s.length&&(s=u.vertices.slice(0,o));var a=v.length/5;v.push(r[0],r[1],1,0,0,s[0],s[1],1,.1,0,r[0],r[1],0,0,.8,s[0],s[1],0,.1,.8);var n=i([s[0],s[1],1],[r[0],r[1],0],[r[0],r[1],1],l);p.push.apply(p,(0,e.default)(n).concat((0,e.default)(n),(0,e.default)(n),(0,e.default)(n))),f.push.apply(f,(0,e.default)([1,2,0,3,2,1].map(function(e){return e+a})))},m=0;m<n;m++)g(m);return{positions:v,index:f,normals:p}}function i(r,s,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=l.vec3.create(),i=l.vec3.create(),c=l.vec3.create();n&&(r=(0,t.lngLatToMeters)(r),s=(0,t.lngLatToMeters)(s),a=(0,t.lngLatToMeters)(a));var o=l.vec3.fromValues.apply(l.vec3,(0,e.default)(r)),v=l.vec3.fromValues.apply(l.vec3,(0,e.default)(s)),f=l.vec3.fromValues.apply(l.vec3,(0,e.default)(a));l.vec3.sub(u,f,v),l.vec3.sub(i,o,v),l.vec3.cross(c,u,i);var p=l.vec3.create();return l.vec3.normalize(p,c),p}
},{"@babel/runtime/helpers/toConsumableArray":"Fhqp","@antv/l7-utils":"nTEC","earcut":"vwhv","gl-matrix":"CPlc"}],"zrRh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonPath=a,exports.circle=u,exports.square=p,exports.triangle=l,exports.hexagon=s,exports.pentagon=N,exports.geometryShape=exports.ShapeType2D=exports.ShapeType3D=void 0;var e,t,r,n=o(require("@babel/runtime/helpers/defineProperty"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=2*Math.PI/e,n=[],o=0;o<e;o++)n.push(r*o+t*Math.PI/12);return n.map(function(e){return[Math.sin(e+Math.PI/4),Math.cos(e+Math.PI/4),0]})}function u(){return a(30)}function p(){return a(4)}function l(){return a(3)}function s(){return a(6,1)}function N(){return a(5)}exports.ShapeType3D=t,function(e){e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn"}(t||(exports.ShapeType3D=t={})),exports.ShapeType2D=r,function(e){e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon"}(r||(exports.ShapeType2D=r={}));var f=(e={},(0,n.default)(e,r.CIRCLE,u),(0,n.default)(e,r.HEXAGON,s),(0,n.default)(e,r.TRIANGLE,l),(0,n.default)(e,r.SQUARE,p),(0,n.default)(e,r.PENTAGON,N),(0,n.default)(e,t.CYLINDER,u),(0,n.default)(e,t.HEXAGONCOLUMN,s),(0,n.default)(e,t.TRIANGLECOLUMN,l),(0,n.default)(e,t.SQUARECOLUMN,p),(0,n.default)(e,t.PENTAGONCOLUMN,N),e);exports.geometryShape=f;
},{"@babel/runtime/helpers/defineProperty":"IxO8"}],"wG1L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointFillTriangulation=v,exports.PointExtrudeTriangulation=p,exports.PointImageTriangulation=g,exports.LineTriangulation=m,exports.polygonTriangulation=h,exports.PolygonExtrudeTriangulation=y,exports.HeatmapGridTriangulation=x,exports.RasterImageTriangulation=P,exports.LineArcTriangulation=b,exports.HeatmapTriangulation=T;var e=f(require("@babel/runtime/helpers/slicedToArray")),r=f(require("@babel/runtime/helpers/toConsumableArray")),t=require("@antv/l7-utils"),n=f(require("earcut")),a=require("gl-matrix"),i=require("../utils/geo"),o=f(require("../utils/polylineNormal")),u=c(require("./shape/extrude")),l=require("./shape/Path");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(t,a,i):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function f(e){return e&&e.__esModule?e:{default:e}}var d={};function v(e){var t=(0,i.calculteCentroid)(e.coordinates);return{vertices:[].concat((0,r.default)(t),(0,r.default)(t),(0,r.default)(t),(0,r.default)(t)),indices:[0,1,2,2,3,0],size:t.length}}function p(e){var r=z(e.shape,!1);return{vertices:r.positions,indices:r.index,normals:r.normals,size:5}}function g(e){var t=(0,i.calculteCentroid)(e.coordinates);return{vertices:(0,r.default)(t),indices:[0],size:t.length}}function m(e){var r=e.coordinates,t=r;Array.isArray(t[0][0])&&(t=r[0]);var n=(0,o.default)(t,!1,0);return{vertices:n.attrPos,indices:n.attrIndex,normals:n.normals,size:6}}function h(e){var r=e.coordinates,t=n.default.flatten(r),a=t.vertices,i=t.dimensions,o=t.holes;return{indices:(0,n.default)(a,o,i),vertices:a,size:i}}function y(e){var r=e.coordinates,t=(0,u.extrude_PolygonNormal)(r,!0);return{vertices:t.positions,indices:t.index,normals:t.normals,size:5}}function x(e){var r=_(e.shape);return{vertices:r.positions,indices:r.index,size:3}}function P(e){var t=e.coordinates;return{vertices:[].concat((0,r.default)(t[0]),[0,0,1,t[1][0],t[0][1],0,1,1],(0,r.default)(t[1]),[0,1,0],(0,r.default)(t[0]),[0,0,1],(0,r.default)(t[1]),[0,1,0,t[0][0],t[1][1],0,0,0]),indices:[0,1,2,3,4,5],size:5}}function b(e){for(var t=e.coordinates,n=[],a=[],i=function(e){n.push(e,1,e,t[0][0],t[0][1],t[1][0],t[1][1],e,-1,e,t[0][0],t[0][1],t[1][0],t[1][1]),29!==e&&a.push.apply(a,(0,r.default)([0,1,2,1,3,2].map(function(r){return 2*e+r})))},o=0;o<30;o++)i(o);return{vertices:n,indices:a,size:7}}function T(e){var t=e.coordinates;2===t.length&&t.push(0);e.size;var n=j(-1,1),a=j(1,1),i=j(-1,-1),o=j(1,-1);return{vertices:[].concat((0,r.default)(t),(0,r.default)(n),(0,r.default)(t),(0,r.default)(i),(0,r.default)(t),(0,r.default)(o),(0,r.default)(t),(0,r.default)(a)),indices:[0,1,2,3,0,2],size:5}}function z(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d&&d[e])return d[e];var t=l.geometryShape[e]?l.geometryShape[e]():l.geometryShape.cylinder(),n=(0,u.extrude_PolygonNormal)([t],r);return d[e]=n,n}function q(r,n){for(var i,o,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=new Float32Array(r.length/l*3),f=a.vec3.create(),d=a.vec3.create(),v=a.vec3.create(),p=0,g=n.length;p<g;p+=3){i=3*n[p+0],o=3*n[p+1],u=3*n[p+2];var m=[r[i],r[i+1]],h=[r[o],r[o+1]],y=[r[u],r[u+1]];s&&(m=(0,t.lngLatToMeters)(m),h=(0,t.lngLatToMeters)(h),y=(0,t.lngLatToMeters)(y));var x=m,P=(0,e.default)(x,2),b=P[0],T=P[1],z=a.vec3.fromValues(b,T,r[i+2]),q=h,M=(0,e.default)(q,2),_=M[0],j=M[1],A=a.vec3.fromValues(_,j,r[o+2]),C=y,S=(0,e.default)(C,2),w=S[0],L=S[1],V=a.vec3.fromValues(w,L,r[u+2]);a.vec3.sub(f,V,A),a.vec3.sub(d,z,A),a.vec3.cross(v,f,d),c[i]+=f[0],c[i+1]+=f[1],c[i+2]+=f[2],c[o]+=f[0],c[o+1]+=f[1],c[o+2]+=f[2],c[u]+=f[0],c[u+1]+=f[1],c[u+2]+=f[2]}return O(c),c}function O(e){for(var r=0,t=e.length;r<t;r+=3){var n=a.vec3.fromValues(e[r],e[r+1],e[r+2]),i=a.vec3.create();a.vec3.normalize(i,n),e.set(i,r)}}function M(e){var r=e[0][0],t=e[0][e[0].length-1];return r[0]===t[0]&&r[1]===t[1]}function _(e){var r=l.geometryShape[e]?l.geometryShape[e]():l.geometryShape.circle();return-1===["cylinder","triangleColumn","hexagonColumn","squareColumn"].indexOf(e)?(0,u.fillPolygon)([r]):(0,u.default)([r])}function j(e,r){return[(e+1)/2,(r+1)/2]}
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/toConsumableArray":"Fhqp","@antv/l7-utils":"nTEC","earcut":"vwhv","gl-matrix":"CPlc","../utils/geo":"bMxA","../utils/polylineNormal":"xXgq","./shape/extrude":"f7f9","./shape/Path":"zrRh"}],"e1Nu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=s(require("@babel/runtime/helpers/classCallCheck")),t=s(require("@babel/runtime/helpers/createClass")),e=s(require("@babel/runtime/helpers/possibleConstructorReturn")),r=s(require("@babel/runtime/helpers/getPrototypeOf")),n=s(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),l=require("@antv/l7-utils"),a=s(require("../../core/BaseModel")),u=require("../../core/triangulation");function s(o){return o&&o.__esModule?o:{default:o}}var c='uniform float u_opacity: 1.0;\nuniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\nuniform float u_near : 0;\nuniform float u_far : 1;\nvarying vec4 v_Color;\nvarying vec2 v_texCoord;\nuniform float u_Zoom : 1;\nuniform float u_time;\n\n#pragma include "picking"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_opacity;\n\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //顶部颜色\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       gl_FragColor = vec4( foggedColor, v_Color.w);\n  }else { // 侧面颜色\n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // 将窗户颜色和墙面颜色区别开来\n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // 顶部亮线\n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        gl_FragColor = vec4(foggedColor,1.0);\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',f='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n   v_texCoord = a_Uv;\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',d=function(a){function s(){return(0,o.default)(this,s),(0,e.default)(this,(0,r.default)(s).apply(this,arguments))}return(0,n.default)(s,a),(0,t.default)(s,[{key:"getUninforms",value:function(){var o=this.layer.getLayerConfig(),t=o.opacity,e=void 0===t?1:t,r=o.baseColor,n=void 0===r?"rgb(16,16,16)":r,i=o.brightColor,a=void 0===i?"rgb(255,176,38)":i,u=o.windowColor,s=void 0===u?"rgb(30,60,89)":u;return{u_opacity:e,u_baseColor:(0,l.rgb2arr)(n),u_brightColor:(0,l.rgb2arr)(a),u_windowColor:(0,l.rgb2arr)(s),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:f,fragmentShader:c,triangulation:u.PolygonExtrudeTriangulation})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:i.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:i.gl.STATIC_DRAW,data:[],type:i.gl.FLOAT},size:3,update:function(o,t,e,r,n){return n}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(o,t,e,r){var n=o.size;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:i.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:2,update:function(o,t,e,r){o.size;return[e[3],e[4]]}}})}}]),s}(a.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"Bdq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck")),r=n(require("@babel/runtime/helpers/createClass")),t=n(require("@babel/runtime/helpers/possibleConstructorReturn")),l=n(require("@babel/runtime/helpers/getPrototypeOf")),u=n(require("@babel/runtime/helpers/inherits")),i=n(require("../core/BaseLayer")),a=n(require("./models/build"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(i){function n(){var r,u;(0,e.default)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(u=(0,t.default)(this,(r=(0,l.default)(n)).call.apply(r,[this].concat(a)))).type="PolygonLayer",u}return(0,u.default)(n,i),(0,r.default)(n,[{key:"buildModels",value:function(){this.layerModel=new a.default(this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),n}(i.default);exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models/build":"e1Nu"}],"gi83":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/getPrototypeOf")),a=l(require("@babel/runtime/helpers/inherits")),o=require("@antv/l7-core"),n=l(require("../../core/BaseModel")),u=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var s='precision highp float;\n// 多边形顶点坐标\nattribute vec3 a_Position;\n// 多边形经纬度坐标\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\n  vec4 project_pos = project_position(vec4(a_Pos.xy + offset, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(project_pos);\n\n  setPickingColor(a_PickingColor);\n}\n',c='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',p=function(n){function l(){return(0,e.default)(this,l),(0,r.default)(this,(0,i.default)(l).apply(this,arguments))}return(0,a.default)(l,n),(0,t.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig();return{u_opacity:e.opacity||1,u_coverage:e.coverage||.9,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:s,fragmentShader:c,triangulation:u.HeatmapGridTriangulation,depth:{enable:!1},primitive:o.gl.TRIANGLES})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:o.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:3,update:function(e,t){var r=e.coordinates;return[r[0],r[1],0]}}})}}]),l}(n.default);exports.default=p;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"bU2e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/getPrototypeOf")),a=l(require("@babel/runtime/helpers/inherits")),n=require("@antv/l7-core"),o=l(require("../../core/BaseModel")),u=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var s='precision highp float;\n// 多边形顶点坐标\nattribute vec3 a_Position;\n// 多边形经纬度坐标\nattribute vec3 a_Pos;\n\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n  float lightWeight = calc_lighting(project_pos);\n  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n\n  gl_Position = project_common_position_to_clipspace(project_pos);\n  setPickingColor(a_PickingColor);\n}\n',c='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',g=function(o){function l(){return(0,e.default)(this,l),(0,r.default)(this,(0,i.default)(l).apply(this,arguments))}return(0,a.default)(l,o),(0,t.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig();return{u_opacity:e.opacity||1,u_coverage:e.coverage||1,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:s,fragmentShader:c,triangulation:u.PointExtrudeTriangulation,depth:{enable:!0}})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:n.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:1,update:function(e,t,r,i){var a=e.size;return Array.isArray(a)?[a[0]]:[a]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:n.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:n.gl.STATIC_DRAW,data:[],type:n.gl.FLOAT},size:3,update:function(e,t,r,i,a){return a}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:n.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:3,update:function(e,t){var r=e.coordinates;return[r[0],r[1],0]}}})}}]),l}(o.default);exports.default=g;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"MDts":[function(require,module,exports) {
"use strict";function r(r,e){for(var s=[],u=[],a=[],t=r+1,o=e+1,p=r/2,v=e/2,i=0;i<o;i++)for(var n=i-v,f=0;f<t;f++){var h=f-p;u.push(h/p,-n/v,0),a.push(f/r),a.push(1-i/e)}for(var c=0;c<e;c++)for(var d=0;d<r;d++){var l=d+t*c,x=d+t*(c+1),M=d+1+t*(c+1),_=d+1+t*c;s.push(l,x,_),s.push(x,M,_)}return{vertices:u,indices:s,uvs:a}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.heatMap3DTriangulation=r;
},{}],"SWcn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=_(require("@babel/runtime/helpers/toConsumableArray")),t=_(require("@babel/runtime/helpers/defineProperty")),r=_(require("@babel/runtime/helpers/classCallCheck")),i=_(require("@babel/runtime/helpers/createClass")),n=_(require("@babel/runtime/helpers/possibleConstructorReturn")),o=_(require("@babel/runtime/helpers/getPrototypeOf")),a=_(require("@babel/runtime/helpers/inherits")),u=require("@antv/l7-core"),l=require("@antv/l7-utils"),s=require("gl-matrix"),c=_(require("../../core/BaseModel")),v=require("../../core/triangulation"),p=require("../triangulation");function _(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function f(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?d(Object(i),!0).forEach(function(r){(0,t.default)(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var h="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n   \n     float intensity = texture2D(u_texture, v_texCoord).r;\n     vec2 ramp_pos = vec2(\n        fract(16.0 * (1.0 - v_intensity)),\n        floor(16.0 * (1.0 - v_intensity)) / 16.0);\n    // vec4 color = texture2D(u_colorTexture,vec2(0.5,1.0-intensity));\n    vec4 color = texture2D(u_colorTexture,ramp_pos);\n    gl_FragColor = color;\n    gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n}\n",m='precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_InverseViewProjectionMatrix;\nvarying float v_intensity;\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n    float t2 = t * t;\n    float one_minus_t = 1.0 - t;\n    float one_minus_t2 = one_minus_t * one_minus_t;\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\n}\nvec2 toBezier(float t, vec4 p){\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n#pragma include "projection"\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos = 1.8 * (a_Uv * vec2(2.0) - vec2(1.0));\n\n\n  vec4 p1 = vec4(pos, 0.0, 1.0);\n\tvec4 p2 = vec4(pos, 1.0, 1.0);\n\n\tvec4 inverseP1 = unproject_clipspace_to_position(p1, u_InverseViewProjectionMatrix);\n\tvec4 inverseP2 = unproject_clipspace_to_position(p2, u_InverseViewProjectionMatrix) ;\n\n  inverseP1 = inverseP1 / inverseP1.w;\n\tinverseP2 = inverseP2 / inverseP2.w;\n\n\tfloat zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);\n\tvec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b= vec4(0.5000, 0, 1, 0.5000);\n  float fh;\n\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = project_common_position_to_clipspace(vec4(position.xy, fh * 50., 1.0));\n\n}\n',y="uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n     float intensity = texture2D(u_texture, v_texCoord).r;\n     vec2 ramp_pos = vec2(\n        fract(16.0 * (1.0 - intensity)),\n        floor(16.0 * (1.0 - intensity)) / 16.0);\n    // vec4 color = texture2D(u_colorTexture,vec2(0.5,1.0-intensity));\n    vec4 color = texture2D(u_colorTexture,ramp_pos);\n    gl_FragColor = color;\n    gl_FragColor.a = color.a * smoothstep(0.,0.05,intensity) * u_opacity;\n\n}\n",g="precision highp float;\nuniform float u_intensity;\nvarying float v_weight;\nvarying vec2 v_extrude;\n\n\nvoid main(){\n    float GAUSS_COEF = 0.3989422804014327;\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, val, val, val);\n}\n",b='precision highp float;\nattribute vec3 a_Position;\nattribute float a_Size;\nattribute vec2 a_Dir;\nuniform float u_intensity;\nuniform float u_radius;\nvarying vec2 v_extrude;\nvarying float v_weight;\nuniform mat4 u_ModelMatrix;\n\n#pragma include "projection"\n\nvoid main(){\n    v_weight = a_Size;\n    float GAUSS_COEF = 0.3989422804014327;\n    float ZERO = 1.0 / 255.0 / 16.0;\n    float extrude_x = a_Dir.x * 2.0 -1.0;\n    float extrude_y = a_Dir.y * 2.0 -1.0;\n    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));\n    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;\n    v_extrude = extrude_dir * S;\n\n    vec2 offset = project_pixel(v_extrude * u_radius);\n    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n}\n',x="precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\nvoid main() {\n   v_texCoord = a_Uv;\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n   gl_Position = vec4(a_Position.xy, 0, 1.);\n}\n",P=function(t){function c(){var e,t;(0,r.default)(this,c);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(t=(0,n.default)(this,(e=(0,o.default)(c)).call.apply(e,[this].concat(a)))).texture=void 0,t.colorTexture=void 0,t.heatmapFramerBuffer=void 0,t.intensityModel=void 0,t.colorModel=void 0,t.shapeType=void 0,t}return(0,a.default)(c,t),(0,i.default)(c,[{key:"render",value:function(){var e=this,t=this.rendererService,r=t.clear;(0,t.useFramebuffer)(this.heatmapFramerBuffer,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.heatmapFramerBuffer}),e.drawIntensityMode()}),"heatmap"===this.shapeType?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"buildModels",value:function(){var e,t=this.rendererService,r=t.createFramebuffer,i=(t.clear,t.getViewportSize),n=t.createTexture2D,o=(t.useFramebuffer,this.styleAttributeService.getLayerStyleAttribute("shape")),a=(null==o?void 0:null===(e=o.scale)||void 0===e?void 0:e.field)||"heatmap";this.shapeType=a,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel="heatmap"===a?this.buildHeatmapColor():this.build3dHeatMap();var s=this.layer.getLayerConfig().rampColors,c=(0,l.generateColorRamp)(s),v=i(),p=v.width,_=v.height;return this.heatmapFramerBuffer=r({color:n({width:p,height:_,wrapS:u.gl.CLAMP_TO_EDGE,wrapT:u.gl.CLAMP_TO_EDGE,min:u.gl.LINEAR,mag:u.gl.LINEAR})}),this.colorTexture=n({data:c.data,width:c.width,height:c.height,wrapS:u.gl.CLAMP_TO_EDGE,wrapT:u.gl.CLAMP_TO_EDGE,min:u.gl.LINEAR,mag:u.gl.LINEAR,flipY:!0}),[this.intensityModel,this.colorModel]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:u.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:u.gl.DYNAMIC_DRAW,data:[],type:u.gl.FLOAT},size:2,update:function(e,t,r,i){return[r[3],r[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:u.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:u.gl.DYNAMIC_DRAW,data:[],type:u.gl.FLOAT},size:1,update:function(e,t,r,i){var n=e.size;return[void 0===n?2:n]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:b,fragmentShader:g,triangulation:v.HeatmapTriangulation,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:u.gl.ONE,srcAlpha:u.gl.ONE_MINUS_SRC_ALPHA,dstRGB:u.gl.ONE,dstAlpha:u.gl.ONE_MINUS_SRC_ALPHA}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:x,fs:y});var e=this.shaderModuleService.getModule("heatmapColor"),t=e.vs,r=e.fs,i=e.uniforms,n=this.rendererService,o=n.createAttribute,a=n.createElements,l=n.createBuffer;return(0,n.createModel)({vs:t,fs:r,attributes:{a_Position:o({buffer:l({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:u.gl.FLOAT}),size:3}),a_Uv:o({buffer:l({data:[0,1,1,1,0,0,1,0],type:u.gl.FLOAT}),size:2})},uniforms:f({},i),depth:{enable:!1},blend:{enable:!0,func:{srcRGB:u.gl.SRC_ALPHA,srcAlpha:1,dstRGB:u.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},count:6,elements:a({data:[0,2,1,2,3,1],type:u.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,r=e.intensity,i=void 0===r?10:r,n=e.radius,o=void 0===n?5:n;this.intensityModel.draw({uniforms:{u_opacity:t||1,u_radius:o,u_intensity:i}})}},{key:"drawColorMode",value:function(){var e=this.layer.getLayerConfig().opacity;this.colorModel.draw({uniforms:{u_opacity:e||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var t=this.layer.getLayerConfig().opacity,r=s.mat4.invert(s.mat4.create(),s.mat4.fromValues.apply(s.mat4,(0,e.default)(this.cameraService.getViewProjectionMatrix())));this.colorModel.draw({uniforms:{u_opacity:t||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_InverseViewProjectionMatrix:(0,e.default)(r)}})}},{key:"build3dHeatMap",value:function(){var e=(0,this.rendererService.getViewportSize)(),t=e.width,r=e.height,i=(0,p.heatMap3DTriangulation)(t/2,r/2);this.shaderModuleService.registerModule("heatmap3dColor",{vs:m,fs:h});var n=this.shaderModuleService.getModule("heatmap3dColor"),o=n.vs,a=n.fs,l=n.uniforms,s=this.rendererService,c=s.createAttribute,v=s.createElements,_=s.createBuffer;return(0,s.createModel)({vs:o,fs:a,attributes:{a_Position:c({buffer:_({data:i.vertices,type:u.gl.FLOAT}),size:3}),a_Uv:c({buffer:_({data:i.uvs,type:u.gl.FLOAT}),size:2})},primitive:u.gl.TRIANGLES,uniforms:f({},l),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:u.gl.SRC_ALPHA,srcAlpha:1,dstRGB:u.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:v({data:i.indices,type:u.gl.UNSIGNED_INT,count:i.indices.length})})}}]),c}(c.default);exports.default=P;
},{"@babel/runtime/helpers/toConsumableArray":"Fhqp","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","gl-matrix":"CPlc","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L","../triangulation":"MDts"}],"LFki":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),r=u(require("@babel/runtime/helpers/possibleConstructorReturn")),a=u(require("@babel/runtime/helpers/getPrototypeOf")),n=u(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),o=u(require("../../core/BaseModel")),l=require("../../core/triangulation");function u(e){return e&&e.__esModule?e:{default:e}}var c='precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',s='precision highp float;\n// 多边形顶点坐标\nattribute vec3 a_Position;\n// 多边形经纬度坐标\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n    \n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  setPickingColor(a_PickingColor);\n}\n',g=function(o){function u(){return(0,e.default)(this,u),(0,r.default)(this,(0,a.default)(u).apply(this,arguments))}return(0,n.default)(u,o),(0,t.default)(u,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig();return{u_opacity:e.opacity||1,u_coverage:e.coverage||.9,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:s,fragmentShader:c,triangulation:l.HeatmapGridTriangulation,depth:{enable:!1},primitive:i.gl.TRIANGLES})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:i.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:3,update:function(e,t){var r=e.coordinates;return[r[0],r[1],0]}}})}}]),u}(o.default);exports.default=g;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"VwKv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./grid")),r=d(require("./grid3d")),t=d(require("./heatmap")),a=d(require("./hexagon"));function d(e){return e&&e.__esModule?e:{default:e}}var u={heatmap:t.default,heatmap3d:t.default,grid:e.default,grid3d:r.default,hexagon:a.default},i=u;exports.default=i;
},{"./grid":"gi83","./grid3d":"bU2e","./heatmap":"SWcn","./hexagon":"LFki"}],"Qt4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/classCallCheck")),t=d(require("@babel/runtime/helpers/createClass")),r=d(require("@babel/runtime/helpers/possibleConstructorReturn")),l=d(require("@babel/runtime/helpers/getPrototypeOf")),a=d(require("@babel/runtime/helpers/inherits")),i=d(require("../core/BaseLayer")),u=d(require("./models"));function d(e){return e&&e.__esModule?e:{default:e}}var s=function(i){function d(){var t,a;(0,e.default)(this,d);for(var i=arguments.length,u=new Array(i),s=0;s<i;s++)u[s]=arguments[s];return(a=(0,r.default)(this,(t=(0,l.default)(d)).call.apply(t,[this].concat(u)))).type="HeatMapLayer",a}return(0,a.default)(d,i),(0,t.default)(d,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new u.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function(){var e=this;return"heatmap"===this.getModelType()?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(t){return t.draw({uniforms:e.layerModel.getUninforms()})}),this)}},{key:"getModelType",value:function(){var e,t=this.styleAttributeService.getLayerStyleAttribute("shape"),r=this.getLayerConfig().shape3d,l=this.getSource().data.type,a=(null==t?void 0:null===(e=t.scale)||void 0===e?void 0:e.field)||"heatmap";return"heatmap"===a||"heatmap3d"===a?"heatmap":"hexagon"===l?-1===(null==r?void 0:r.indexOf(a))?"hexagon":"grid3d":"grid"===l?-1===(null==r?void 0:r.indexOf(a))?"grid":"grid3d":"heatmap"}}]),d}(i.default);exports.default=s;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models":"VwKv"}],"VlgS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/getPrototypeOf")),n=l(require("@babel/runtime/helpers/inherits")),a=require("@antv/l7-core"),o=l(require("../../core/BaseModel")),u=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var s="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n}\n",c='precision highp float;\nuniform mat4 u_ModelMatrix;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n}\n',d=function(o){function l(){var t,n;(0,e.default)(this,l);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=(0,r.default)(this,(t=(0,i.default)(l)).call.apply(t,[this].concat(o)))).texture=void 0,n}return(0,n.default)(l,o),(0,t.default)(l,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture}}},{key:"buildModels",value:function(){var e=this,t=this.layer.getSource(),r=this.rendererService.createTexture2D;return this.texture=r({height:0,width:0}),t.data.images.then(function(t){e.texture=r({data:t[0],width:t[0].width,height:t[0].height}),e.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:c,fragmentShader:s,triangulation:u.RasterImageTriangulation,primitive:a.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:a.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:2,update:function(e,t,r,i){return[r[3],r[4]]}}})}}]),l}(o.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"d64M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./image"));function t(e){return e&&e.__esModule?e:{default:e}}var r={image:e.default},u=r;exports.default=u;
},{"./image":"VlgS"}],"D0yP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck")),r=n(require("@babel/runtime/helpers/createClass")),t=n(require("@babel/runtime/helpers/possibleConstructorReturn")),u=n(require("@babel/runtime/helpers/getPrototypeOf")),l=n(require("@babel/runtime/helpers/inherits")),i=n(require("../core/BaseLayer")),a=n(require("./models/index"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(i){function n(){var r,l;(0,e.default)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(l=(0,t.default)(this,(r=(0,u.default)(n)).call.apply(r,[this].concat(a)))).type="ImageLayer",l}return(0,l.default)(n,i),(0,r.default)(n,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new a.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{image:{}}[this.getModelType()]}},{key:"getModelType",value:function(){return"image"}}]),n}(i.default);exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models/index":"d64M"}],"Gu7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),n=l(require("@babel/runtime/helpers/possibleConstructorReturn")),r=l(require("@babel/runtime/helpers/getPrototypeOf")),a=l(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),o=l(require("../../core/BaseModel")),s=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var c='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= (blur * u_opacity);\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',u='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nvarying vec2 v_dash_array;\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * a_Size / 2.0;\n  return offset * vec2(1.0, -1.0);\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = a_Instance.rg;\n  vec2 target =  a_Instance.ba;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  if(u_line_type == LineTypeDash) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n    }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  setPickingColor(a_PickingColor);\n}\n',_={solid:0,dash:1},d=function(o){function l(){return(0,e.default)(this,l),(0,n.default)(this,(0,r.default)(l).apply(this,arguments))}return(0,a.default)(l,o),(0,t.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.lineType,r=void 0===n?"solid":n,a=e.dashArray,i=void 0===a?[10,5]:a;return{u_opacity:t||1,segmentNumber:30,u_line_type:_[r||"solid"],u_dash_array:i}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig().animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:u,fragmentShader:c,triangulation:s.LineArcTriangulation,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(e,t,n,r){var a=e.size;return Array.isArray(a)?[a[0]]:[a]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:i.gl.STATIC_DRAW,data:[],type:i.gl.FLOAT},size:4,update:function(e,t,n,r){return[n[3],n[4],n[5],n[6]]}}})}}]),l}(o.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"ySGI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),n=l(require("@babel/runtime/helpers/possibleConstructorReturn")),r=l(require("@babel/runtime/helpers/getPrototypeOf")),a=l(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),o=l(require("../../core/BaseModel")),s=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var c='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= (blur * u_opacity);\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',u='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\n\nvarying vec2 v_dash_array;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * a_Size / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n   if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  setPickingColor(a_PickingColor);\n}\n',_={solid:0,dash:1},d=function(o){function l(){return(0,e.default)(this,l),(0,n.default)(this,(0,r.default)(l).apply(this,arguments))}return(0,a.default)(l,o),(0,t.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.lineType,r=void 0===n?"solid":n,a=e.dashArray,i=void 0===a?[10,5]:a;return{u_opacity:t||1,segmentNumber:30,u_line_type:_[r]||0,u_dash_array:i}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig().animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:u,fragmentShader:c,triangulation:s.LineArcTriangulation,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(e,t,n,r){var a=e.size;return Array.isArray(a)?[a[0]]:[a]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:i.gl.STATIC_DRAW,data:[],type:i.gl.FLOAT},size:4,update:function(e,t,n,r){return[n[3],n[4],n[5],n[6]]}}})}}]),l}(o.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"jp6T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),n=l(require("@babel/runtime/helpers/possibleConstructorReturn")),a=l(require("@babel/runtime/helpers/getPrototypeOf")),r=l(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),o=l(require("../../core/BaseModel")),s=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var c='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform float segmentNumber;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nvarying vec2 v_dash_array;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * a_Size / 2.0;\n  return offset * vec2(1.0, -1.0);\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(abs(angularDist - PI) < 0.001) {\n    return (1.0 - t) * source + t * target;\n  }\n  float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n  float b = sin(t * angularDist) / sin(angularDist);\n  vec2 sin_source = sin(source);\n  vec2 cos_source = cos(source);\n  vec2 sin_target = sin(target);\n  vec2 cos_target = cos(target);\n  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n  float z = a * sin_source.y + b * sin_target.y;\n  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n}\n\nvoid main() {\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  setPickingColor(a_PickingColor);\n}\n\n',u='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nuniform float u_opacity;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nvarying vec2 v_normal;\nvarying vec2 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= (blur * u_opacity);\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',_={solid:0,dash:1},g=function(o){function l(){return(0,e.default)(this,l),(0,n.default)(this,(0,a.default)(l).apply(this,arguments))}return(0,r.default)(l,o),(0,t.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,n=e.lineType,a=void 0===n?"solid":n,r=e.dashArray,i=void 0===r?[10,5]:r;return{u_opacity:t||1,segmentNumber:30,u_line_type:_[a]||0,u_dash_array:i}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig().animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:c,fragmentShader:u,triangulation:s.LineArcTriangulation,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:i.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(e,t,n,a){var r=e.size;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:i.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:i.gl.STATIC_DRAW,data:[],type:i.gl.FLOAT},size:4,update:function(e,t,n,a){return[n[3],n[4],n[5],n[6]]}}})}}]),l}(o.default);exports.default=g;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"um3B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),a=u(require("@babel/runtime/helpers/possibleConstructorReturn")),i=u(require("@babel/runtime/helpers/getPrototypeOf")),r=u(require("@babel/runtime/helpers/inherits")),n=require("@antv/l7-core"),o=u(require("../../core/BaseModel")),l=require("../../core/triangulation");function u(e){return e&&e.__esModule?e:{default:e}}var _='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\nuniform float u_opacity : 1.0;\nvarying vec4 v_color;\nvarying vec2 v_normal;\n\n\n// dash\nuniform float u_dash_offset : 0.0;\nuniform float u_dash_ratio : 0.1;\nvarying float v_distance_ratio;\nvarying vec2 v_dash_array;\nvarying float v_side;\n\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n// [animate, duration, interval, trailLength],\nvoid main() {\n  gl_FragColor = v_color;\n  // anti-alias\n  float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy)) * u_opacity;\n  // gl_FragColor.a *= blur;\n\n  if(u_aimate.x == Animate) {\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);\n      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;\n      gl_FragColor.a *= alpha * blur;\n  }\n // dash line\n  if(u_line_type == LineTypeDash) {\n    gl_FragColor.a *= blur  * (1.0- step(v_dash_array.x, mod(v_distance_ratio, v_dash_array.x +v_dash_array.y)));\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',s='#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform float u_line_type: 0.0;\nuniform vec2 u_dash_array: [10.0, 5.];\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec2 v_dash_array;\nvarying vec2 v_normal;\nvarying float v_distance_ratio;\nvarying float v_side;\n\n\nvoid main() {\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = a_Distance / a_Total_Distance;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  }\n  if(u_aimate.x == Animate) {\n      v_distance_ratio = a_Distance / a_Total_Distance;\n  }\n  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));\n  v_color = a_Color;\n  vec3 size = a_Miter * a_Size.x * reverse_offset_normal(a_Normal);  //v_normal * vec3(1., -1., 1.0);\n  vec2 offset = project_pixel(size.xy);\n  v_side = a_Miter * a_Size.x;\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',c={solid:0,dash:1},y=function(o){function u(){return(0,e.default)(this,u),(0,a.default)(this,(0,i.default)(u).apply(this,arguments))}return(0,r.default)(u,o),(0,t.default)(u,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,a=e.lineType,i=void 0===a?"solid":a,r=e.dashArray,n=void 0===r?[10,5]:r;return{u_opacity:t||1,u_line_type:c[i],u_dash_array:n}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig().animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:s,fragmentShader:_,triangulation:l.LineTriangulation,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.layer.getLayerConfig().lineType;this.styleAttributeService.registerStyleAttribute({name:"distance",type:n.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:1,update:function(e,t,a,i){return[a[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:n.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:1,update:function(e,t,a,i){return[a[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:n.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:2,update:function(e,t,a,i){var r=e.size,n=void 0===r?1:r;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:n.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:n.gl.STATIC_DRAW,data:[],type:n.gl.FLOAT},size:3,update:function(e,t,a,i,r){return r}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:n.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:n.gl.DYNAMIC_DRAW,data:[],type:n.gl.FLOAT},size:1,update:function(e,t,a,i){return[a[4]]}}})}}]),u}(o.default);exports.default=y;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"NLir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./arc")),r=a(require("./arc_3d")),t=a(require("./great_circle")),u=a(require("./line"));function a(e){return e&&e.__esModule?e:{default:e}}var l={arc:e.default,arc3d:r.default,greatcircle:t.default,line:u.default},d=l;exports.default=d;
},{"./arc":"Gu7M","./arc_3d":"ySGI","./great_circle":"jp6T","./line":"um3B"}],"tUnm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck")),t=n(require("@babel/runtime/helpers/createClass")),r=n(require("@babel/runtime/helpers/possibleConstructorReturn")),l=n(require("@babel/runtime/helpers/getPrototypeOf")),i=n(require("@babel/runtime/helpers/inherits")),u=n(require("../core/BaseLayer")),a=n(require("./models"));function n(e){return e&&e.__esModule?e:{default:e}}var d=function(u){function n(){var t,i;(0,e.default)(this,n);for(var u=arguments.length,a=new Array(u),d=0;d<u;d++)a[d]=arguments[d];return(i=(0,r.default)(this,(t=(0,l.default)(n)).call.apply(t,[this].concat(a)))).type="LineLayer",i}return(0,i.default)(n,u),(0,t.default)(n,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new a.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}}[this.getModelType()]}},{key:"getModelType",value:function(){var e,t=this.styleAttributeService.getLayerStyleAttribute("shape");return(null==t?void 0:null===(e=t.scale)||void 0===e?void 0:e.field)||"line"}}]),n}(u.default);exports.default=d;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models":"NLir"}],"M5QQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),t=s(require("@babel/runtime/helpers/createClass")),r=s(require("@babel/runtime/helpers/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/getPrototypeOf")),n=s(require("@babel/runtime/helpers/inherits")),a=require("@antv/l7-core"),o=s(require("../../core/BaseModel")),l=require("../../core/triangulation"),u=require("../../utils/geo");function s(e){return e&&e.__esModule?e:{default:e}}var c='varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',p='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec3 size = a_Size * a_Position;\n\n  vec2 offset = project_pixel(size.xy);\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);\n\n  float lightWeight = calc_lighting(pos);\n  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  gl_Position = project_common_position_to_clipspace(pos);\n  setPickingColor(a_PickingColor);\n}\n',g=function(o){function s(){return(0,e.default)(this,s),(0,r.default)(this,(0,i.default)(s).apply(this,arguments))}return(0,n.default)(s,o),(0,t.default)(s,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:p,fragmentShader:c,triangulation:l.PointExtrudeTriangulation,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:a.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:3,update:function(e,t,r,i){var n=e.size;if(n){var a=[];return Array.isArray(n)&&(a=2===n.length?[n[0],n[0],n[1]]:n),Array.isArray(n)||(a=[n]),a}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:a.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:a.gl.STATIC_DRAW,data:[],type:a.gl.FLOAT},size:3,update:function(e,t,r,i,n){return n}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:a.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:3,update:function(e,t){var r=(0,u.calculteCentroid)(e.coordinates);return[r[0],r[1],0]}}})}}]),s}(o.default);exports.default=g;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L","../../utils/geo":"bMxA"}],"mvGh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),t=s(require("@babel/runtime/helpers/createClass")),a=s(require("@babel/runtime/helpers/possibleConstructorReturn")),r=s(require("@babel/runtime/helpers/getPrototypeOf")),n=s(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),o=require("@antv/l7-utils"),l=s(require("../../core/BaseModel")),u=require("../../core/triangulation");function s(e){return e&&e.__esModule?e:{default:e}}var _="#define Animate 0.0\n\nuniform float u_blur : 0;\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  lowp float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n  if(u_stroke_width <0.01 ) {\n     gl_FragColor = v_color * opacity_t;\n     return;\n  }\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n  // gl_FragColor = v_color * color_t;\n  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor = opacity_t * mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n\n  if(u_aimate.x == Animate) {\n    float d = length(v_data.xy);\n    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);\n    gl_FragColor = vec4(gl_FragColor.xyz * intensity, intensity);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n",d='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec2 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\nuniform mat4 u_ModelMatrix;\n\nuniform float u_stroke_width : 2;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // unpack color(vec2)\n  v_color = a_Color;\n  vec2 extrude = a_Extrude;\n\n  float shape_type = a_Shape;\n\n  // radius(16-bit)\n  v_radius = a_Size;\n\n  vec2 offset = project_pixel(extrude * (a_Size + u_stroke_width));\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  // TODO: billboard\n  // anti-alias\n  float antialiasblur = 1.0 / (a_Size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(extrude, antialiasblur,shape_type);\n\n  setPickingColor(a_PickingColor);\n}\n',c=function(l){function s(){return(0,e.default)(this,s),(0,a.default)(this,(0,r.default)(s).apply(this,arguments))}return(0,n.default)(s,l),(0,t.default)(s,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,a=void 0===t?1:t,r=e.stroke,n=void 0===r?"rgb(0,0,0,0)":r,i=e.strokeWidth;return{u_opacity:a,u_stroke_width:void 0===i?1:i,u_stroke_color:(0,o.rgb2arr)(n)}}},{key:"getAnimateUniforms",value:function(){var e=this.layer.getLayerConfig().animateOption;return{u_aimate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),u.PointFillTriangulation)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:d,fragmentShader:_,triangulation:u.PointFillTriangulation,depth:{enable:!1}})]}},{key:"animateOption2Array",value:function(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:i.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:2,update:function(e,t,a,r){var n=[-1,-1,1,-1,1,1,-1,1],i=r%4*2;return[n[i],n[i+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:i.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(e,t,a,r){var n=e.size;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:i.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:1,update:function(t,a,r,n){var i=t.shape,o=void 0===i?2:i;return[e.layer.getLayerConfig().shape2d.indexOf(o)]}}})}}]),s}(l.default);exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"r4Zs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),t=l(require("@babel/runtime/helpers/createClass")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),i=l(require("@babel/runtime/helpers/getPrototypeOf")),n=l(require("@babel/runtime/helpers/inherits")),o=require("@antv/l7-core"),a=l(require("../../core/BaseModel")),u=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var s='\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [1, 1, 1, 1];\nuniform float u_stroke_opacity : 1;\nuniform float u_opacity : 1;\n\nvarying float v_size;\n#pragma include "picking"\nvoid main(){\nvec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\nvec2 fragmentPosition = 2.0*gl_PointCoord - 1.0;\nfloat distance = length(fragmentPosition);\nfloat distanceSqrd = distance * distance;\nfloat radius = 1.;\nfloat r = 1.0 - smoothstep(radius-(radius*0.01),\n                         radius+(radius*0.01),\n                         distanceSqrd);\n  vec4 textureColor=texture2D(u_texture,pos);\n  if(v_color == vec4(0.)){\n        gl_FragColor= vec4(textureColor.xyz, textureColor.w * r);\n  }else {\n        gl_FragColor= step(0.01, textureColor.x) * v_color;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',c='\nprecision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform float u_stroke_width : 1;\nvarying float v_size;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   v_size = a_Size;\n\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n   setPickingColor(a_PickingColor);\n\n}\n',v=function(a){function l(){var t,n;(0,e.default)(this,l);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return(n=(0,r.default)(this,(t=(0,i.default)(l)).call.apply(t,[this].concat(a)))).texture=void 0,n}return(0,n.default)(l,a),(0,t.default)(l,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"buildModels",value:function(){var e=this;return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){e.updateTexture(),e.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:c,fragmentShader:s,triangulation:u.PointImageTriangulation,primitive:o.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var e=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:o.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:1,update:function(e,t,r,i){var n=e.size;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:o.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:2,update:function(t,r,i,n){var o=e.iconService.getIconMap()[t.shape]||{x:0,y:0};return[o.x,o.y]}}})}},{key:"updateTexture",value:function(){var e=this.rendererService.createTexture2D;this.texture=e({data:this.iconService.getCanvas(),mag:o.gl.LINEAR,min:o.gl.LINEAR,width:1024,height:this.iconService.canvasHeight||128})}}]),l}(a.default);exports.default=v;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"BVnt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointTriangulation=p,exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),t=s(require("@babel/runtime/helpers/createClass")),r=s(require("@babel/runtime/helpers/possibleConstructorReturn")),i=s(require("@babel/runtime/helpers/getPrototypeOf")),n=s(require("@babel/runtime/helpers/inherits")),o=s(require("@babel/runtime/helpers/toConsumableArray")),a=require("@antv/l7-core"),l=require("@antv/l7-utils"),u=s(require("../../core/BaseModel"));function s(e){return e&&e.__esModule?e:{default:e}}var c='\nuniform float u_opacity : 1;\nvarying vec4 v_color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a = u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',d='\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n  gl_Position = project_common_position_to_clipspace(project_pos);\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n';function p(e){var t=e.coordinates;return{vertices:(0,o.default)(t),indices:[0],size:t.length}}var _=function(o){function u(){return(0,e.default)(this,u),(0,r.default)(this,(0,i.default)(u).apply(this,arguments))}return(0,n.default)(u,o),(0,t.default)(u,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,r=void 0===t?1:t,i=e.stroke,n=void 0===i?"rgb(0,0,0,0)":i,o=e.strokeWidth;return{u_opacity:r,u_stroke_width:void 0===o?1:o,u_stroke_color:(0,l.rgb2arr)(n)}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:d,fragmentShader:c,triangulation:p,depth:{enable:!1},primitive:a.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:a.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:a.gl.DYNAMIC_DRAW,data:[],type:a.gl.FLOAT},size:1,update:function(e,t,r,i){var n=e.size;return Array.isArray(n)?[n[0]]:[n]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:a.BlendType.additive}}}]),u}(u.default);exports.default=_;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/toConsumableArray":"Fhqp","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","../../core/BaseModel":"GHJD"}],"TqMC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/classCallCheck")),e=i(require("@babel/runtime/helpers/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(){function i(e,s,o){(0,t.default)(this,i),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var l=this.boxCells;this.xCellCount=Math.ceil(e/o),this.yCellCount=Math.ceil(s/o);for(var h=0;h<this.xCellCount*this.yCellCount;h++)l.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=s,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/s,this.boxUid=0}return(0,e.default)(i,[{key:"insert",value:function(t,e,i,s,o){this.forEachCell(e,i,s,o,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(o)}},{key:"query",value:function(t,e,i,s,o){return this.queryHitTest(t,e,i,s,!1,o)}},{key:"hitTest",value:function(t,e,i,s,o){return this.queryHitTest(t,e,i,s,!0,o)}},{key:"insertBoxCell",value:function(t,e,i,s,o,l){this.boxCells[o].push(l)}},{key:"queryHitTest",value:function(t,e,i,s,o,l){if(i<0||t>this.width||s<0||e>this.height)return!o&&[];var h=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=s){if(o)return!0;for(var r=0;r<this.boxKeys.length;r++)h.push({key:this.boxKeys[r],x1:this.bboxes[4*r],y1:this.bboxes[4*r+1],x2:this.bboxes[4*r+2],y2:this.bboxes[4*r+3]});return l?h.filter(l):h}var u={hitTest:o,seenUids:{box:{},circle:{}}};return this.forEachCell(t,e,i,s,this.queryCell,h,u,l),o?h.length>0:h}},{key:"queryCell",value:function(t,e,i,s,o,l,h,r){var u=h.seenUids,n=this.boxCells[o];if(null!==n){var a=this.bboxes,x=!0,C=!1,b=void 0;try{for(var v,y=n[Symbol.iterator]();!(x=(v=y.next()).done);x=!0){var f=v.value;if(!u.box[f]){u.box[f]=!0;var c=4*f;if(t<=a[c+2]&&e<=a[c+3]&&i>=a[c+0]&&s>=a[c+1]&&(!r||r(this.boxKeys[f]))){if(h.hitTest)return l.push(!0),!0;l.push({key:this.boxKeys[f],x1:a[c],y1:a[c+1],x2:a[c+2],y2:a[c+3]})}}}}catch(d){C=!0,b=d}finally{try{x||null==y.return||y.return()}finally{if(C)throw b}}}return!1}},{key:"forEachCell",value:function(t,e,i,s,o,l,h,r){for(var u=this.convertToXCellCoord(t),n=this.convertToYCellCoord(e),a=this.convertToXCellCoord(i),x=this.convertToYCellCoord(s),C=u;C<=a;C++)for(var b=n;b<=x;b++){var v=this.xCellCount*b+C;if(o.call(this,t,e,i,s,v,l,h,r))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),i}(),o=s;exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"nZxJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=d(require("@babel/runtime/helpers/toConsumableArray")),t=d(require("@babel/runtime/helpers/classCallCheck")),e=d(require("@babel/runtime/helpers/createClass")),r=require("gl-matrix"),o=d(require("./grid-index"));function d(i){return i&&i.__esModule?i:{default:i}}var n=function(){function d(i,e){(0,t.default)(this,d),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=i,this.height=e,this.viewportPadding=Math.max(i,e),this.grid=new o.default(i+this.viewportPadding,e+this.viewportPadding,25),this.screenRightBoundary=i+this.viewportPadding,this.screenBottomBoundary=e+this.viewportPadding,this.gridRightBoundary=i+2*this.viewportPadding,this.gridBottomBoundary=e+2*this.viewportPadding}return(0,e.default)(d,[{key:"placeCollisionBox",value:function(i){var t=i.x1+i.anchorPointX+this.viewportPadding,e=i.y1+i.anchorPointY+this.viewportPadding,r=i.x2+i.anchorPointX+this.viewportPadding,o=i.y2+i.anchorPointY+this.viewportPadding;return!this.isInsideGrid(t,e,r,o)||this.grid.hitTest(t,e,r,o)?{box:[]}:{box:[t,e,r,o]}}},{key:"insertCollisionBox",value:function(i,t){var e={featureIndex:t};this.grid.insert(e,i[0],i[1],i[2],i[3])}},{key:"project",value:function(t,e,o){var d=r.vec4.fromValues(e,o,0,1),n=r.vec4.create(),a=r.mat4.fromValues.apply(r.mat4,(0,i.default)(t));return r.vec4.transformMat4(n,d,a),{x:(n[0]/n[3]+1)/2*this.width+this.viewportPadding,y:(-n[1]/n[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(i,t,e,r){return e>=0&&i<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}}]),d}();exports.default=n;
},{"@babel/runtime/helpers/toConsumableArray":"Fhqp","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","gl-matrix":"CPlc","./grid-index":"TqMC"}],"GcKT":[function(require,module,exports) {
"use strict";function t(t){var e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break;default:r=.5}return{horizontalAlign:e,verticalAlign:r}}function e(t,e,r,a,l){if(l){var o=t[a],i=o.glyph;if(i)for(var n=e[i].advance*o.scale,c=(t[a].x+n)*l,s=r;s<=a;s++)t[s].x-=c}}function r(t,e,r,a,l,o,i){var n=(e-r)*l,c=(-a*i+.5)*o,s=!0,h=!1,f=void 0;try{for(var v,u=t[Symbol.iterator]();!(s=(v=u.next()).done);s=!0){var p=v.value;p.x+=n,p.y+=c}}catch(g){h=!0,f=g}finally{try{s||null==u.return||u.return()}finally{if(h)throw f}}}function a(a,l,o,i,n,c,s){var h=0,f=-8,v=0,u=a.positionedGlyphs,p="right"===c?1:"left"===c?0:.5,g=u.length;o.forEach(function(t){if(t.split("").forEach(function(t){var e=l[t];e&&(u.push({glyph:t,x:h,y:f+0,vertical:!1,scale:1,metrics:e}),h+=e.advance+s)}),u.length!==g){var r=h-s;v=Math.max(r,v),e(u,l,g,u.length-1,p)}h=0,f+=i});var y=t(n),d=y.horizontalAlign,x=y.verticalAlign;r(u,p,d,x,v,i,o.length);var b=f- -8;a.top+=-x*b,a.bottom=a.top+b,a.left+=-d*v,a.right=a.left+v}function l(t,e,r,l,o,i){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],c=t.split("\n"),s=[],h={positionedGlyphs:s,top:n[1],bottom:n[1],left:n[0],right:n[0],lineCount:c.length,text:t};return a(h,e,c,r,l,o,i),!!s.length&&h}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],r=arguments.length>2?arguments[2]:void 0,a=t.positionedGlyphs,l=void 0===a?[]:a,o=[],i=!0,n=!1,c=void 0;try{for(var s,h=l[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var f=s.value,v=f.metrics,u=v.advance*f.scale/2,p=r?[f.x+u,f.y]:[0,0],g=r?[0,0]:[f.x+u+e[0],f.y+e[1]],y=-4*f.scale-u+g[0],d=-4*f.scale+g[1],x=y+v.width*f.scale,b=d+v.height*f.scale,m={x:y,y:d},w={x:x,y:d},k={x:y,y:b},A={x:x,y:b};o.push({tl:m,tr:w,bl:k,br:A,tex:v,glyphOffset:p})}}catch(G){n=!0,c=G}finally{try{i||null==h.return||h.return()}finally{if(n)throw c}}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shapeText=l,exports.getGlyphQuads=o;
},{}],"CZEM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextTriangulation=v,exports.default=void 0;var e=h(require("@babel/runtime/helpers/classCallCheck")),t=h(require("@babel/runtime/helpers/createClass")),i=h(require("@babel/runtime/helpers/possibleConstructorReturn")),r=h(require("@babel/runtime/helpers/getPrototypeOf")),n=h(require("@babel/runtime/helpers/inherits")),a=h(require("@babel/runtime/helpers/toConsumableArray")),o=require("@antv/l7-core"),l=require("@antv/l7-utils"),u=h(require("../../core/BaseModel")),s=h(require("../../utils/collision-index")),f=require("../../utils/geo"),c=require("../../utils/symbol-layout");function h(e){return e&&e.__esModule?e:{default:e}}var d='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\nuniform float u_font_size : 24;\nuniform float u_opacity : 1.0;\nuniform vec4 u_stroke : [0, 0, 0, 1];\nuniform float u_strokeWidth : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\n\n#pragma include "picking"\nvoid main() {\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  float fontScale = u_font_size / 24.0;\n\n  lowp float buff = (6.0 - u_strokeWidth / fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n  gl_FragColor = mix(v_color * u_opacity, u_stroke, smoothstep(0., 0.5, 1. - dist)) * alpha;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',p='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n  v_uv = a_tex / u_sdf_map_size;\n\n  // 文本缩放比例\n  float fontScale = a_Size / 24.;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  gl_Position = vec4(projected_position.xy / projected_position.w\n    + a_textOffsets * fontScale / u_ViewportSize * 2. * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n';function v(e){var t=e.centroid,i=e.glyphQuads,r=[],n=[],o=2===t.length?[t[0],t[1],0]:t;return i.forEach(function(e,t){r.push.apply(r,(0,a.default)(o).concat([e.tex.x,e.tex.y+e.tex.height,e.tl.x,e.tl.y],(0,a.default)(o),[e.tex.x+e.tex.width,e.tex.y+e.tex.height,e.tr.x,e.tr.y],(0,a.default)(o),[e.tex.x+e.tex.width,e.tex.y,e.br.x,e.br.y],(0,a.default)(o),[e.tex.x,e.tex.y,e.bl.x,e.bl.y])),n.push(0+4*t,1+4*t,2+4*t,2+4*t,3+4*t,0+4*t)}),{vertices:r,indices:n,size:7}}var g=function(a){function u(){var t,n;(0,e.default)(this,u);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=(0,i.default)(this,(t=(0,r.default)(u)).call.apply(t,[this].concat(o)))).texture=void 0,n.glyphInfo=void 0,n.currentZoom=-1,n.extent=void 0,n}return(0,n.default)(u,a),(0,t.default)(u,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=(e.fontWeight,e.fontFamily,e.stroke),i=void 0===t?"#fff":t,r=e.strokeWidth,n=void 0===r?0:r,a=this.fontService.canvas;return{u_opacity:1,u_sdf_map:this.texture,u_stroke:(0,l.rgb2arr)(i),u_halo_blur:.5,u_sdf_map_size:[a.width,a.height],u_strokeWidth:n}}},{key:"buildModels",value:function(){return this.extent=this.textExtent(),this.initGlyph(),this.updateTexture(),this.filterGlyphs(),[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:p,fragmentShader:d,triangulation:v,depth:{enable:!1},blend:this.getBlend()})]}},{key:"needUpdate",value:function(){var e=this.layer.getLayerConfig().textAllowOverlap,t=void 0!==e&&e,i=this.mapService.getZoom(),r=this.mapService.getBounds(),n=r[0][0]<this.extent[0][0]||r[0][1]<this.extent[0][1]||r[1][0]>this.extent[1][0]||r[1][1]<this.extent[1][1];return!(t||!(Math.abs(this.currentZoom-i)>1||n))&&(this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:p,fragmentShader:d,triangulation:v,depth:{enable:!1},blend:this.getBlend()})],!0)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:o.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:o.gl.STATIC_DRAW,data:[],type:o.gl.FLOAT},size:2,update:function(e,t,i,r){return[i[5],i[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:o.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:1,update:function(e,t,i,r){var n=e.size;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:o.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:2,update:function(e,t,i,r){return[i[3],i[4]]}}})}},{key:"textExtent",value:function(){var e=this.mapService.getBounds(),t=Math.min(e[1][0]-e[0][0],e[1][1]-e[1][0])/2;return[[e[0][0]-t,e[0][1]-t],[e[1][0]+t,e[1][1]+t]]}},{key:"initTextFont",value:function(){var e=this.layer.getLayerConfig(),t=e.fontWeight,i=void 0===t?"800":t,r=e.fontFamily,n=this.layer.getEncodedData(),a=[];n.forEach(function(e){var t=e.shape,i=void 0===t?"":t;i=i.toString();var r=!0,n=!1,o=void 0;try{for(var l,u=i[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;-1===a.indexOf(s)&&a.push(s)}}catch(f){n=!0,o=f}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}}),this.fontService.setFontOptions({characterSet:a,fontWeight:i,fontFamily:r})}},{key:"generateGlyphLayout",value:function(){var e=this.fontService.mapping,t=this.layer.getLayerConfig(),i=t.spacing,r=void 0===i?2:i,n=t.textAnchor,a=void 0===n?"center":n,o=t.textOffset,l=this.layer.getEncodedData();this.glyphInfo=l.map(function(t){var i=t.shape,n=void 0===i?"":i,l=t.coordinates,u=(0,c.shapeText)(n.toString(),e,24,a,"center",r,o),s=(0,c.getGlyphQuads)(u,o,!1);return t.shaping=u,t.glyphQuads=s,t.centroid=(0,f.calculteCentroid)(l),t})}},{key:"filterGlyphs",value:function(){var e=this,t=this.layer.getLayerConfig(),i=t.padding,r=void 0===i?[4,4]:i,n=t.textAllowOverlap;if(!(void 0!==n&&n)){this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var a=this.rendererService.getViewportSize(),o=a.width,l=a.height,u=new s.default(o,l),f=this.glyphInfo.filter(function(t){var i=t.shaping,n=t.id,a=void 0===n?0:n,o=t.centroid,l=t.size/24,s=e.mapService.lngLatToContainer(o),f=u.placeCollisionBox({x1:i.left*l-r[0],x2:i.right*l+r[0],y1:i.top*l-r[1],y2:i.bottom*l+r[1],anchorPointX:s.x,anchorPointY:s.y}).box;return!(!f||!f.length)&&(u.insertCollisionBox(f,a),!0)});this.layer.setEncodedData(f)}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var e=this.rendererService.createTexture2D,t=this.fontService.canvas;this.texture=e({data:t,width:t.width,height:t.height})}}]),u}(u.default);exports.default=g;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/toConsumableArray":"Fhqp","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","../../core/BaseModel":"GHJD","../../utils/collision-index":"nZxJ","../../utils/geo":"bMxA","../../utils/symbol-layout":"GcKT"}],"O7VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./extrude")),r=a(require("./fill")),t=a(require("./image")),u=a(require("./normal")),l=a(require("./text"));function a(e){return e&&e.__esModule?e:{default:e}}var d={fill:r.default,image:t.default,normal:u.default,extrude:e.default,text:l.default},i=d;exports.default=i;
},{"./extrude":"M5QQ","./fill":"mvGh","./image":"r4Zs","./normal":"BVnt","./text":"CZEM"}],"YGE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),r=u(require("@babel/runtime/helpers/possibleConstructorReturn")),i=u(require("@babel/runtime/helpers/getPrototypeOf")),l=u(require("@babel/runtime/helpers/inherits")),a=u(require("../core/BaseLayer")),n=u(require("./models/index"));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(a){function u(){var t,l;(0,e.default)(this,u);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(l=(0,r.default)(this,(t=(0,i.default)(u)).call.apply(t,[this].concat(n)))).type="PointLayer",l}return(0,l.default)(u,a),(0,t.default)(u,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new n.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{normal:{blend:"additive"},fill:{},extrude:{},image:{},text:{blend:"normal"}}[this.getModelType()]}},{key:"getModelType",value:function(){var e=this.getEncodedData(),t=this.getLayerConfig(),r=t.shape2d,i=t.shape3d,l=this.iconService.getIconMap(),a=e.find(function(e){return e.hasOwnProperty("shape")});if(a){var n=a.shape;return"dot"===n?"normal":-1!==(null==r?void 0:r.indexOf(n))?"fill":-1!==(null==i?void 0:i.indexOf(n))?"extrude":l.hasOwnProperty(n)?"image":"text"}return"normal"}}]),u}(a.default);exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models/index":"O7VY"}],"e6Vl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/helpers/classCallCheck")),t=u(require("@babel/runtime/helpers/createClass")),r=u(require("@babel/runtime/helpers/possibleConstructorReturn")),i=u(require("@babel/runtime/helpers/getPrototypeOf")),n=u(require("@babel/runtime/helpers/inherits")),o=require("@antv/l7-core"),a=u(require("../../core/BaseModel")),l=require("../../core/triangulation");function u(e){return e&&e.__esModule?e:{default:e}}var s='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',c='precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',p=function(a){function u(){return(0,e.default)(this,u),(0,r.default)(this,(0,i.default)(u).apply(this,arguments))}return(0,n.default)(u,a),(0,t.default)(u,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig().opacity;return{u_opacity:void 0===e?1:e}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:c,fragmentShader:s,triangulation:l.PolygonExtrudeTriangulation})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:o.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:o.gl.STATIC_DRAW,data:[],type:o.gl.FLOAT},size:3,update:function(e,t,r,i,n){return n}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:o.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:o.gl.DYNAMIC_DRAW,data:[],type:o.gl.FLOAT},size:1,update:function(e,t,r,i){var n=e.size;return Array.isArray(n)?[n[0]]:[n]}}})}}]),u}(a.default);exports.default=p;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"sNji":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),r=l(require("@babel/runtime/helpers/createClass")),o=l(require("@babel/runtime/helpers/possibleConstructorReturn")),t=l(require("@babel/runtime/helpers/getPrototypeOf")),n=l(require("@babel/runtime/helpers/inherits")),i=l(require("../../core/BaseModel")),a=require("../../core/triangulation");function l(e){return e&&e.__esModule?e:{default:e}}var u='uniform float u_opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',c='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n\n',s=function(i){function l(){return(0,e.default)(this,l),(0,o.default)(this,(0,t.default)(l).apply(this,arguments))}return(0,n.default)(l,i),(0,r.default)(l,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig().opacity;return{u_opacity:void 0===e?1:e}}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:c,fragmentShader:u,triangulation:a.polygonTriangulation,depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),l}(i.default);exports.default=s;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"jSs4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../../line/models/line")),t=a(require("../../point/models/extrude")),l=a(require("../../point/models/fill")),r=a(require("../../point/models/image")),i=a(require("../../point/models/normal")),u=a(require("../../point/models/text")),d=a(require("./extrude")),o=a(require("./fill"));function a(e){return e&&e.__esModule?e:{default:e}}var n={fill:o.default,line:e.default,extrude:d.default,text:u.default,point_fill:l.default,point_image:r.default,point_normal:i.default,point_extrude:t.default},f=n;exports.default=f;
},{"../../line/models/line":"um3B","../../point/models/extrude":"M5QQ","../../point/models/fill":"mvGh","../../point/models/image":"r4Zs","../../point/models/normal":"BVnt","../../point/models/text":"CZEM","./extrude":"e6Vl","./fill":"sNji"}],"z78t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/classCallCheck")),t=a(require("@babel/runtime/helpers/createClass")),r=a(require("@babel/runtime/helpers/possibleConstructorReturn")),i=a(require("@babel/runtime/helpers/getPrototypeOf")),l=a(require("@babel/runtime/helpers/inherits")),n=a(require("../core/BaseLayer")),u=a(require("./models/"));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function a(){var t,l;(0,e.default)(this,a);for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return(l=(0,r.default)(this,(t=(0,i.default)(a)).call.apply(t,[this].concat(u)))).type="PolygonLayer",l}return(0,l.default)(a,n),(0,t.default)(a,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new u.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var e,t=this.styleAttributeService.getLayerStyleAttribute("shape"),r=null==t?void 0:null===(e=t.scale)||void 0===e?void 0:e.field;return"fill"===r?"fill":"extrude"===r?"extrude":"line"===r?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var e=this.getEncodedData(),t=this.getLayerConfig(),r=t.shape2d,i=t.shape3d,l=this.iconService.getIconMap(),n=e.find(function(e){return e.hasOwnProperty("shape")});if(n){var u=n.shape;return"dot"===u?"point_normal":-1!==(null==r?void 0:r.indexOf(u))?"point_fill":-1!==(null==i?void 0:i.indexOf(u))?"point_extrude":l.hasOwnProperty(u)?"point_image":"text"}return"fill"}}]),a}(n.default);exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models/":"jSs4"}],"gm2r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("@babel/runtime/helpers/classCallCheck")),t=d(require("@babel/runtime/helpers/createClass")),r=d(require("@babel/runtime/helpers/possibleConstructorReturn")),a=d(require("@babel/runtime/helpers/getPrototypeOf")),o=d(require("@babel/runtime/helpers/inherits")),i=require("@antv/l7-core"),u=require("@antv/l7-utils"),n=d(require("../../core/BaseModel")),l=require("../../core/triangulation");function d(e){return e&&e.__esModule?e:{default:e}}var s="precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue)\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n    gl_FragColor = vec4(0, 0, 0, 0);\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec2 ramp_pos = vec2(\n        fract(16.0 * (1.0 - normalisedValue)),\n        floor(16.0 * (1.0 - normalisedValue)) / 16.0);\n    gl_FragColor = texture2D(u_colorTexture, ramp_pos);\n  }\n\n\n}\n",c='precision highp float;\nuniform mat4 u_ModelMatrix;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n}\n',m=function(n){function d(){var t,o;(0,e.default)(this,d);for(var i=arguments.length,u=new Array(i),n=0;n<i;n++)u[n]=arguments[n];return(o=(0,r.default)(this,(t=(0,a.default)(d)).call.apply(t,[this].concat(u)))).texture=void 0,o.colorTexture=void 0,o}return(0,o.default)(d,n),(0,t.default)(d,[{key:"getUninforms",value:function(){var e=this.layer.getLayerConfig(),t=e.opacity,r=void 0===t?1:t,a=e.clampLow,o=void 0===a||a,i=e.clampHigh,u=void 0===i||i,n=e.noDataValue,l=void 0===n?-9999999:n,d=e.domain,s=void 0===d?[0,1]:d;return this.updateColorTexure(),{u_opacity:r||1,u_texture:this.texture,u_domain:s,u_clampLow:o,u_clampHigh:void 0!==u?u:o,u_noDataValue:l,u_colorTexture:this.colorTexture}}},{key:"buildModels",value:function(){var e=this.layer.getSource(),t=this.rendererService.createTexture2D,r=e.data.dataArray[0];this.texture=t({data:r.data,width:r.width,height:r.height,format:i.gl.LUMINANCE,type:i.gl.FLOAT});var a=this.layer.getLayerConfig().rampColors,o=(0,u.generateColorRamp)(a);return this.colorTexture=t({data:o.data,width:o.width,height:o.height,flipY:!0}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:c,fragmentShader:s,triangulation:l.RasterImageTriangulation,primitive:i.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:i.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:i.gl.DYNAMIC_DRAW,data:[],type:i.gl.FLOAT},size:2,update:function(e,t,r,a){return[r[3],r[4]]}}})}},{key:"updateColorTexure",value:function(){var e=this.rendererService.createTexture2D,t=this.layer.getLayerConfig().rampColors,r=(0,u.generateColorRamp)(t);this.colorTexture=e({data:r.data,width:r.width,height:r.height,flipY:!0})}}]),d}(n.default);exports.default=m;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","../../core/BaseModel":"GHJD","../../core/triangulation":"wG1L"}],"ywiW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./raster"));function r(e){return e&&e.__esModule?e:{default:e}}var t={raster:e.default,raster3d:e.default},u=t;exports.default=u;
},{"./raster":"gm2r"}],"Ot5Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),r=s(require("@babel/runtime/helpers/createClass")),t=s(require("@babel/runtime/helpers/possibleConstructorReturn")),u=s(require("@babel/runtime/helpers/getPrototypeOf")),l=s(require("@babel/runtime/helpers/inherits")),a=s(require("../core/BaseLayer")),i=s(require("./models/index"));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(a){function s(){var r,l;(0,e.default)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(l=(0,t.default)(this,(r=(0,u.default)(s)).call.apply(r,[this].concat(i)))).type="RasterLayer",l}return(0,l.default)(s,a),(0,r.default)(s,[{key:"buildModels",value:function(){var e=this.getModelType();this.layerModel=new i.default[e](this),this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{raster:{},raster3d:{}}[this.getModelType()]}},{key:"getModelType",value:function(){return"raster"}}]),s}(a.default);exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","../core/BaseLayer":"RXwS","./models/index":"ywiW"}],"Ba5J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,i,r,t,a,l,n,o,u=b(require("@babel/runtime/helpers/initializerDefineProperty")),c=b(require("@babel/runtime/helpers/classCallCheck")),f=b(require("@babel/runtime/helpers/createClass")),s=b(require("@babel/runtime/helpers/applyDecoratedDescriptor")),g=b(require("@babel/runtime/helpers/initializerWarningHelper")),p=require("@antv/l7-core"),d=require("inversify");function b(e){return e&&e.__esModule?e:{default:e}}var h=(e=(0,d.injectable)(),i=(0,d.inject)(p.TYPES.IGlobalConfigService),r=(0,d.inject)(p.TYPES.ILogService),e((a=o=function(){function e(){(0,c.default)(this,e),(0,u.default)(this,"configService",l,this),(0,u.default)(this,"logger",n,this)}return(0,f.default)(e,[{key:"apply",value:function(e){var i=this;e.hooks.init.tap("ConfigSchemaValidationPlugin",function(){i.configService.registerLayerConfigSchemaValidator(e.name,e.getConfigSchemaForValidation());var r=i.configService.validateLayerConfig(e.name,e.getLayerConfig()),t=r.valid,a=r.errorText;if(!t)return i.logger.error(a||""),!1}),e.hooks.beforeRender.tap("ConfigSchemaValidationPlugin",function(){})}}]),e}(),l=(0,s.default)(a.prototype,"configService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n=(0,s.default)(a.prototype,"logger",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t=a))||t);exports.default=h;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"pCtI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,a,i,n,l,u,p=b(require("@babel/runtime/helpers/initializerDefineProperty")),o=b(require("@babel/runtime/helpers/classCallCheck")),c=b(require("@babel/runtime/helpers/createClass")),s=b(require("@babel/runtime/helpers/applyDecoratedDescriptor")),d=b(require("@babel/runtime/helpers/initializerWarningHelper")),g=require("@antv/l7-core"),f=require("@antv/l7-utils"),v=require("inversify");function b(e){return e&&e.__esModule?e:{default:e}}var y=(e=(0,v.injectable)(),t=(0,v.inject)(g.TYPES.IGlobalConfigService),r=(0,v.inject)(g.TYPES.ILogService),e((i=u=function(){function e(){(0,o.default)(this,e),(0,p.default)(this,"configService",n,this),(0,p.default)(this,"logger",l,this)}return(0,c.default)(e,[{key:"apply",value:function(e,t){var r=this,a=t.styleAttributeService;e.hooks.init.tap("DataMappingPlugin",function(){r.generateMaping(e,{styleAttributeService:a})}),e.hooks.beforeRenderData.tap("DataMappingPlugin",function(t){return!(!t&&!e.dataState.dataMappingNeedUpdate)&&(e.dataState.dataMappingNeedUpdate=!1,r.generateMaping(e,{styleAttributeService:a}),!0)}),e.hooks.beforeRender.tap("DataMappingPlugin",function(){var t=a.getLayerStyleAttributes()||[],i=e.getSource().data.dataArray,n=t.filter(function(e){return e.needRemapping});n.length&&(e.setEncodedData(r.mapping(n,i)),r.logger.debug("remapping finished"))})}},{key:"generateMaping",value:function(e,t){var r=this,a=t.styleAttributeService,i=a.getLayerStyleAttributes()||[],n=a.getLayerStyleAttribute("filter"),l=e.getSource().data.dataArray,u=l;(null==n?void 0:n.scale)&&(u=l.filter(function(e){return r.applyAttributeMapping(n,e)[0]})),u&&e.setEncodedData(this.mapping(i,u))}},{key:"mapping",value:function(e,t){var r=this;return t.map(function(t){var a={id:t._id,coordinates:t.coordinates};return e.filter(function(e){return void 0!==e.scale}).forEach(function(e){var i=r.applyAttributeMapping(e,t);e.needRemapping=!1,"color"===e.name&&(i=i.map(function(e){return(0,f.rgb2arr)(e)})),a[e.name]=Array.isArray(i)&&1===i.length?i[0]:i}),a})}},{key:"applyAttributeMapping",value:function(e,t){var r;if(!e.scale)return[];var a=(null==e?void 0:null===(r=e.scale)||void 0===r?void 0:r.scalers)||[],i=[];return a.forEach(function(r){var a,n=r.field;(t.hasOwnProperty(n)||"variable"===(null===(a=e.scale)||void 0===a?void 0:a.type))&&i.push(t[n])}),e.mapping?e.mapping(i):[]}}]),e}(),n=(0,s.default)(i.prototype,"configService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,s.default)(i.prototype,"logger",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=i))||a);exports.default=y;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","inversify":"PR7M"}],"o2Gm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerTransform=exports.getTransform=exports.registerParser=exports.getParser=void 0;var r={},e={},t=function(r){return e[r]};exports.getParser=t;var s=function(r,t){e[r]=t};exports.registerParser=s;var o=function(e){return r[e]};exports.getTransform=o;var n=function(e,t){r[e]=t};exports.registerTransform=n;
},{}],"uRW4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var n={},r={},t=34,e=10,o=13;function u(n){return new Function("d","return {"+n.map(function(n,r){return JSON.stringify(n)+": d["+r+'] || ""'}).join(",")+"}")}function i(n,r){var t=u(n);return function(e,o){return r(t(e),o,n)}}function a(n){var r=Object.create(null),t=[];return n.forEach(function(n){for(var e in n)e in r||t.push(r[e]=e)}),t}function c(n,r){var t=n+"",e=t.length;return e<r?new Array(r-e+1).join(0)+t:t}function f(n){return n<0?"-"+c(-n,6):n>9999?"+"+c(n,6):c(n,4)}function l(n){var r=n.getUTCHours(),t=n.getUTCMinutes(),e=n.getUTCSeconds(),o=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":f(n.getUTCFullYear(),4)+"-"+c(n.getUTCMonth()+1,2)+"-"+c(n.getUTCDate(),2)+(o?"T"+c(r,2)+":"+c(t,2)+":"+c(e,2)+"."+c(o,3)+"Z":e?"T"+c(r,2)+":"+c(t,2)+":"+c(e,2)+"Z":t||r?"T"+c(r,2)+":"+c(t,2)+"Z":"")}function s(c){var f=new RegExp('["'+c+"\n\r]"),s=c.charCodeAt(0);function d(u,i){var a,c=[],f=u.length,l=0,d=0,h=f<=0,p=!1;function C(){if(h)return r;if(p)return p=!1,n;var i,a,c=l;if(u.charCodeAt(c)===t){for(;l++<f&&u.charCodeAt(l)!==t||u.charCodeAt(++l)===t;);return(i=l)>=f?h=!0:(a=u.charCodeAt(l++))===e?p=!0:a===o&&(p=!0,u.charCodeAt(l)===e&&++l),u.slice(c+1,i-1).replace(/""/g,'"')}for(;l<f;){if((a=u.charCodeAt(i=l++))===e)p=!0;else if(a===o)p=!0,u.charCodeAt(l)===e&&++l;else if(a!==s)continue;return u.slice(c,i)}return h=!0,u.slice(c,f)}for(u.charCodeAt(f-1)===e&&--f,u.charCodeAt(f-1)===o&&--f;(a=C())!==r;){for(var g=[];a!==n&&a!==r;)g.push(a),a=C();i&&null==(g=i(g,d++))||c.push(g)}return c}function h(n,r){return n.map(function(n){return r.map(function(r){return C(n[r])}).join(c)})}function p(n){return n.map(C).join(c)}function C(n){return null==n?"":n instanceof Date?l(n):f.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:function(n,r){var t,e,o=d(n,function(n,o){if(t)return t(n,o-1);e=n,t=r?i(n,r):u(n)});return o.columns=e||[],o},parseRows:d,format:function(n,r){return null==r&&(r=a(n)),[r.map(C).join(c)].concat(h(n,r)).join("\n")},formatBody:function(n,r){return null==r&&(r=a(n)),h(n,r).join("\n")},formatRows:function(n){return n.map(p).join("\n")},formatRow:p,formatValue:C}}
},{}],"yGbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csvFormatValue=exports.csvFormatRow=exports.csvFormatRows=exports.csvFormatBody=exports.csvFormat=exports.csvParseRows=exports.csvParse=void 0;var r=o(require("./dsv.js"));function o(r){return r&&r.__esModule?r:{default:r}}var s=(0,r.default)(","),e=s.parse;exports.csvParse=e;var t=s.parseRows;exports.csvParseRows=t;var a=s.format;exports.csvFormat=a;var v=s.formatBody;exports.csvFormatBody=v;var p=s.formatRows;exports.csvFormatRows=p;var c=s.formatRow;exports.csvFormatRow=c;var m=s.formatValue;exports.csvFormatValue=m;
},{"./dsv.js":"uRW4"}],"Rica":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tsvFormatValue=exports.tsvFormatRow=exports.tsvFormatRows=exports.tsvFormatBody=exports.tsvFormat=exports.tsvParseRows=exports.tsvParse=void 0;var t=r(require("./dsv.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=(0,t.default)("\t"),s=o.parse;exports.tsvParse=s;var e=o.parseRows;exports.tsvParseRows=e;var a=o.format;exports.tsvFormat=a;var v=o.formatBody;exports.tsvFormatBody=v;var p=o.formatRows;exports.tsvFormatRows=p;var m=o.formatRow;exports.tsvFormatRow=m;var x=o.formatValue;exports.tsvFormatValue=x;
},{"./dsv.js":"uRW4"}],"hdSA":[function(require,module,exports) {
"use strict";function e(e){for(var r in e){var a,s,d=e[r].trim();if(d)if("true"===d)d=!0;else if("false"===d)d=!1;else if("NaN"===d)d=NaN;else if(isNaN(a=+d)){if(!(s=d.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;t&&s[4]&&!s[7]&&(d=d.replace(/-/g,"/").replace(/T/," ")),d=new Date(d)}else d=a;else d=null;e[r]=d}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();
},{}],"EC2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"dsvFormat",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"csvParse",{enumerable:!0,get:function(){return t.csvParse}}),Object.defineProperty(exports,"csvParseRows",{enumerable:!0,get:function(){return t.csvParseRows}}),Object.defineProperty(exports,"csvFormat",{enumerable:!0,get:function(){return t.csvFormat}}),Object.defineProperty(exports,"csvFormatBody",{enumerable:!0,get:function(){return t.csvFormatBody}}),Object.defineProperty(exports,"csvFormatRows",{enumerable:!0,get:function(){return t.csvFormatRows}}),Object.defineProperty(exports,"csvFormatRow",{enumerable:!0,get:function(){return t.csvFormatRow}}),Object.defineProperty(exports,"csvFormatValue",{enumerable:!0,get:function(){return t.csvFormatValue}}),Object.defineProperty(exports,"tsvParse",{enumerable:!0,get:function(){return r.tsvParse}}),Object.defineProperty(exports,"tsvParseRows",{enumerable:!0,get:function(){return r.tsvParseRows}}),Object.defineProperty(exports,"tsvFormat",{enumerable:!0,get:function(){return r.tsvFormat}}),Object.defineProperty(exports,"tsvFormatBody",{enumerable:!0,get:function(){return r.tsvFormatBody}}),Object.defineProperty(exports,"tsvFormatRows",{enumerable:!0,get:function(){return r.tsvFormatRows}}),Object.defineProperty(exports,"tsvFormatRow",{enumerable:!0,get:function(){return r.tsvFormatRow}}),Object.defineProperty(exports,"tsvFormatValue",{enumerable:!0,get:function(){return r.tsvFormatValue}}),Object.defineProperty(exports,"autoType",{enumerable:!0,get:function(){return o.default}});var e=n(require("./dsv.js")),t=require("./csv.js"),r=require("./tsv.js"),o=n(require("./autoType.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./dsv.js":"uRW4","./csv.js":"yGbu","./tsv.js":"Rica","./autoType.js":"hdSA"}],"JpVt":[function(require,module,exports) {
module.exports.RADIUS=6378137,module.exports.FLATTENING=1/298.257223563,module.exports.POLAR_RADIUS=6356752.3142;
},{}],"eBm2":[function(require,module,exports) {
var e=require("wgs84");function t(e){var n,o=0;switch(e.type){case"Polygon":return r(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)o+=r(e.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)o+=t(e.geometries[n]);return o}}function r(e){var t=0;if(e&&e.length>0){t+=Math.abs(n(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(n(e[r]))}return t}function n(t){var r,n,i,a,s,u,c=0,g=t.length;if(g>2){for(u=0;u<g;u++)u===g-2?(i=g-2,a=g-1,s=0):u===g-1?(i=g-1,a=0,s=1):(i=u,a=u+1,s=u+2),r=t[i],n=t[a],c+=(o(t[s][0])-o(r[0]))*Math.sin(o(n[1]));c=c*e.RADIUS*e.RADIUS/2}return c}function o(e){return e*Math.PI/180}module.exports.geometry=t,module.exports.ring=n;
},{"wgs84":"JpVt"}],"yJvc":[function(require,module,exports) {
var e=require("@mapbox/geojson-area");function r(e,o){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(t(r,o)),e;case"GeometryCollection":return e.geometries=e.geometries.map(t(r,o)),e;case"Feature":return e.geometry=r(e.geometry,o),e;case"Polygon":case"MultiPolygon":return n(e,o);default:return e}}function t(e,r){return function(t){return e(t,r)}}function n(e,r){return"Polygon"===e.type?e.coordinates=o(e.coordinates,r):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(t(o,r))),e}function o(e,r){r=!!r,e[0]=u(e[0],r);for(var t=1;t<e.length;t++)e[t]=u(e[t],!r);return e}function u(e,r){return a(e)===r?e:e.reverse()}function a(r){return e.ring(r)>=0}module.exports=r;
},{"@mapbox/geojson-area":"eBm2"}],"xvfO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var r=o(require("@babel/runtime/helpers/defineProperty")),e=o(require("@babel/runtime/helpers/toConsumableArray")),t=o(require("@mapbox/geojson-rewind"));function o(r){return r&&r.__esModule?r:{default:r}}function a(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,o)}return t}function n(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach(function(t){(0,r.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))})}return e}function i(r,o){var a=o.x,i=o.y,s=o.x1,c=o.y1,u=o.coordinates,p=[];return r.forEach(function(r,o){var l=[];if(a&&i&&(l=[parseFloat(r[a]),parseFloat(r[i])]),a&&i&&s&&c&&(l=[[parseFloat(r[a]),parseFloat(r[i])],[parseFloat(r[s]),parseFloat(r[c])]]),u){var y="Polygon";Array.isArray(u[0])||(y="Point"),Array.isArray(u[0])&&!Array.isArray(u[0][0])&&(y="LineString");var f={type:y,coordinates:(0,e.default)(r[u])};(0,t.default)(f,!0),l=f.coordinates}var b=n({},r,{_id:o,coordinates:l});p.push(b)}),{dataArray:p}}
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/toConsumableArray":"Fhqp","@mapbox/geojson-rewind":"yJvc"}],"Md9s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-dsv"),r=t(require("./json"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){var s=(0,e.csvParse)(t);return(0,r.default)(s,u)}
},{"d3-dsv":"EC2w","./json":"xvfO"}],"emmc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@turf/helpers");function r(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function t(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(r){if(r.length>1&&e.isNumber(r[0])&&e.isNumber(r[1]))return!0;if(Array.isArray(r[0])&&r[0].length)return o(r[0]);throw new Error("coordinates must only contain numbers")}function n(e,r,t){if(!r||!t)throw new Error("type and name required");if(!e||e.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.type)}function i(e,r,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.geometry.type)}function u(e,r,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0,n=e.features;o<n.length;o++){var i=n[o];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+i.geometry.type)}}function a(e){return"Feature"===e.type?e.geometry:e}function y(e,r){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}exports.getCoord=r,exports.getCoords=t,exports.containsNumber=o,exports.geojsonType=n,exports.featureOf=i,exports.collectionOf=u,exports.getGeom=a,exports.getType=y;
},{"@turf/helpers":"udfb"}],"oAWv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@turf/helpers");function t(e,r,n){if(null!==e)for(var o,i,a,u,l,s,c,g,f=0,p=0,h=e.type,y="FeatureCollection"===h,d="Feature"===h,v=y?e.features.length:1,P=0;P<v;P++){l=(g=!!(c=y?e.features[P].geometry:d?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<l;m++){var w=0,x=0;if(null!==(u=g?c.geometries[m]:c)){s=u.coordinates;var b=u.type;switch(f=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===r(s,p,P,w,x))return!1;p++,w++;break;case"LineString":case"MultiPoint":for(o=0;o<s.length;o++){if(!1===r(s[o],p,P,w,x))return!1;p++,"MultiPoint"===b&&w++}"LineString"===b&&w++;break;case"Polygon":case"MultiLineString":for(o=0;o<s.length;o++){for(i=0;i<s[o].length-f;i++){if(!1===r(s[o][i],p,P,w,x))return!1;p++}"MultiLineString"===b&&w++,"Polygon"===b&&x++}"Polygon"===b&&w++;break;case"MultiPolygon":for(o=0;o<s.length;o++){for(x=0,i=0;i<s[o].length;i++){for(a=0;a<s[o][i].length-f;a++){if(!1===r(s[o][i][a],p,P,w,x))return!1;p++}x++}w++}break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(!1===t(u.geometries[o],r,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(e,r,n,o){var i=n;return t(e,function(e,t,o,a,u){i=0===t&&void 0===n?e:r(i,e,t,o,a,u)},o),i}function n(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function o(e,t,r){var o=r;return n(e,function(e,n){o=0===n&&void 0===r?e:t(o,e,n)}),o}function i(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function a(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n}function u(e){var r=[];return t(e,function(e){r.push(e)}),r}function l(e,t){var r,n,o,i,a,u,l,s,c,g,f=0,p="FeatureCollection"===e.type,h="Feature"===e.type,y=p?e.features.length:1;for(r=0;r<y;r++){for(u=p?e.features[r].geometry:h?e.geometry:e,s=p?e.features[r].properties:h?e.properties:{},c=p?e.features[r].bbox:h?e.bbox:void 0,g=p?e.features[r].id:h?e.id:void 0,a=(l=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=l?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,f,s,c,g))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],f,s,c,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,f,s,c,g))return!1;f++}}function s(e,t,r){var n=r;return l(e,function(e,o,i,a,u){n=0===o&&void 0===r?e:t(n,e,o,i,a,u)}),n}function c(t,r){l(t,function(t,n,o,i,a){var u,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==r(e.feature(t,o,{bbox:i,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var s=0;s<t.coordinates.length;s++){var c={type:u,coordinates:t.coordinates[s]};if(!1===r(e.feature(c,o),n,s))return!1}})}function g(e,t,r){var n=r;return c(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n}function f(r,n){c(r,function(r,o,i){var a=0;if(r.geometry){var u=r.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var l,s=0,c=0,g=0;return!1!==t(r,function(t,u,f,p,h){if(void 0===l||o>s||p>c||h>g)return l=t,s=o,c=p,g=h,void(a=0);var y=e.lineString([l,t],r.properties);if(!1===n(y,o,i,h,a))return!1;a++,l=t})&&void 0}}})}function p(e,t,r){var n=r,o=!1;return f(e,function(e,i,a,u,l){n=!1===o&&void 0===r?e:t(n,e,i,a,u,l),o=!0}),n}function h(t,r){if(!t)throw new Error("geojson is required");c(t,function(t,n,o){if(null!==t.geometry){var i=t.geometry.type,a=t.geometry.coordinates;switch(i){case"LineString":if(!1===r(t,n,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===r(e.lineString(a[u],t.properties),n,o,u))return!1}}})}function y(e,t,r){var n=r;return h(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n}function d(t,r){if(r=r||{},!e.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,i=r.multiFeatureIndex||0,a=r.geometryIndex||0,u=r.segmentIndex||0,l=r.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,n=t.features[o].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var s=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=s.length+u-1),e.lineString([s[u],s[u+1]],l,r);case"Polygon":return a<0&&(a=s.length+a),u<0&&(u=s[a].length+u-1),e.lineString([s[a][u],s[a][u+1]],l,r);case"MultiLineString":return i<0&&(i=s.length+i),u<0&&(u=s[i].length+u-1),e.lineString([s[i][u],s[i][u+1]],l,r);case"MultiPolygon":return i<0&&(i=s.length+i),a<0&&(a=s[i].length+a),u<0&&(u=s[i][a].length-u-1),e.lineString([s[i][a][u],s[i][a][u+1]],l,r)}throw new Error("geojson is invalid")}function v(t,r){if(r=r||{},!e.isObject(r))throw new Error("options is invalid");var n,o=r.featureIndex||0,i=r.multiFeatureIndex||0,a=r.geometryIndex||0,u=r.coordIndex||0,l=r.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,n=t.features[o].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var s=n.coordinates;switch(n.type){case"Point":return e.point(s,l,r);case"MultiPoint":return i<0&&(i=s.length+i),e.point(s[i],l,r);case"LineString":return u<0&&(u=s.length+u),e.point(s[u],l,r);case"Polygon":return a<0&&(a=s.length+a),u<0&&(u=s[a].length+u),e.point(s[a][u],l,r);case"MultiLineString":return i<0&&(i=s.length+i),u<0&&(u=s[i].length+u),e.point(s[i][u],l,r);case"MultiPolygon":return i<0&&(i=s.length+i),a<0&&(a=s[i].length+a),u<0&&(u=s[i][a].length-u),e.point(s[i][a][u],l,r)}throw new Error("geojson is invalid")}exports.coordEach=t,exports.coordReduce=r,exports.propEach=n,exports.propReduce=o,exports.featureEach=i,exports.featureReduce=a,exports.coordAll=u,exports.geomEach=l,exports.geomReduce=s,exports.flattenEach=c,exports.flattenReduce=g,exports.segmentEach=f,exports.segmentReduce=p,exports.lineEach=h,exports.lineReduce=y,exports.findSegment=d,exports.findPoint=v;
},{"@turf/helpers":"udfb"}],"YA0S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=a(require("@babel/runtime/helpers/defineProperty")),r=a(require("@mapbox/geojson-rewind")),t=require("@turf/invariant"),n=u(require("@turf/meta"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function a(e){return e&&e.__esModule?e:{default:e}}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function f(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function c(e,o){(0,r.default)(e,!0);var u=[],a={};if(e.features=e.features.filter(function(e){var r=e.geometry;return null!=e&&r&&r.type&&r.coordinates&&r.coordinates.length>0}),0===e.features.length)return{dataArray:[],featureKeys:a};return n.flattenEach(e,function(e,r){var n=(0,t.getCoords)(e),o=r;if("Polygon"===e.geometry.type)n.forEach(function(r){var t=f({},e.properties,{coordinates:[r],_id:o});u.push(t)});else{var a=f({},e.properties,{coordinates:n,_id:o});u.push(a)}}),{dataArray:u,featureKeys:a}}
},{"@babel/runtime/helpers/defineProperty":"IxO8","@mapbox/geojson-rewind":"yJvc","@turf/invariant":"emmc","@turf/meta":"oAWv"}],"jJbF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("@antv/l7-utils");function t(e,t){var r=t.extent;return{images:new Promise(function(t){n(e,function(e){t(e)})}),_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]}}function n(n,r){var u=n,i=[];if("string"==typeof u)(0,e.getImage)({url:u},function(e,t){i.push(t),r(i)});else{var o=u.length,a=0;u.forEach(function(t){(0,e.getImage)({url:t},function(e,t){a++,i.push(t),a===o&&r(i)})})}return t}
},{"@antv/l7-utils":"nTEC"}],"Qa4M":[function(require,module,exports) {
"use strict";function t(t,e){var r=e.extent,a=e.width,i=e.height,d=e.min,n=e.max;return{_id:1,dataArray:[{_id:1,data:Array.from(t),width:a,height:i,min:d,max:n,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"CkJF":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isArray"),i=require("./isObjectLike"),t="[object String]";function u(u){return"string"==typeof u||!r(u)&&i(u)&&e(u)==t}module.exports=u;
},{"./_baseGetTag":"e5TX","./isArray":"p0cq","./isObjectLike":"OuyB"}],"D78i":[function(require,module,exports) {
function n(n,r){for(var e=-1,l=null==n?0:n.length;++e<l&&!1!==r(n[e],e,n););return n}module.exports=n;
},{}],"J1oc":[function(require,module,exports) {
var e=require("./_overArg"),r=e(Object.keys,Object);module.exports=r;
},{"./_overArg":"oss3"}],"BNjb":[function(require,module,exports) {
var r=require("./_isPrototype"),e=require("./_nativeKeys"),t=Object.prototype,o=t.hasOwnProperty;function n(t){if(!r(t))return e(t);var n=[];for(var u in Object(t))o.call(t,u)&&"constructor"!=u&&n.push(u);return n}module.exports=n;
},{"./_isPrototype":"nhsl","./_nativeKeys":"J1oc"}],"HI10":[function(require,module,exports) {
var e=require("./_arrayLikeKeys"),r=require("./_baseKeys"),i=require("./isArrayLike");function u(u){return i(u)?e(u):r(u)}module.exports=u;
},{"./_arrayLikeKeys":"VcLW","./_baseKeys":"BNjb","./isArrayLike":"LN6c"}],"eFjB":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./keys");function u(u,o){return u&&e(o,r(o),u)}module.exports=u;
},{"./_copyObject":"dtkN","./keys":"HI10"}],"q2Io":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./keysIn");function u(u,n){return u&&e(n,r(n),u)}module.exports=u;
},{"./_copyObject":"dtkN","./keysIn":"UACB"}],"uvMU":[function(require,module,exports) {
function r(r,n){for(var e=-1,l=null==r?0:r.length,o=0,t=[];++e<l;){var u=r[e];n(u,e,r)&&(t[o++]=u)}return t}module.exports=r;
},{}],"Mmba":[function(require,module,exports) {
function e(){return[]}module.exports=e;
},{}],"EvLK":[function(require,module,exports) {
var r=require("./_arrayFilter"),e=require("./stubArray"),t=Object.prototype,u=t.propertyIsEnumerable,n=Object.getOwnPropertySymbols,o=n?function(e){return null==e?[]:(e=Object(e),r(n(e),function(r){return u.call(e,r)}))}:e;module.exports=o;
},{"./_arrayFilter":"uvMU","./stubArray":"Mmba"}],"az4F":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./_getSymbols");function o(o,t){return e(o,r(o),t)}module.exports=o;
},{"./_copyObject":"dtkN","./_getSymbols":"EvLK"}],"srRO":[function(require,module,exports) {
function e(e,n){for(var r=-1,t=n.length,o=e.length;++r<t;)e[o+r]=n[r];return e}module.exports=e;
},{}],"q8BM":[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./_getPrototype"),t=require("./_getSymbols"),o=require("./stubArray"),u=Object.getOwnPropertySymbols,y=u?function(o){for(var u=[];o;)r(u,t(o)),o=e(o);return u}:o;module.exports=y;
},{"./_arrayPush":"srRO","./_getPrototype":"CXf5","./_getSymbols":"EvLK","./stubArray":"Mmba"}],"K7uZ":[function(require,module,exports) {
var e=require("./_copyObject"),r=require("./_getSymbolsIn");function o(o,t){return e(o,r(o),t)}module.exports=o;
},{"./_copyObject":"dtkN","./_getSymbolsIn":"q8BM"}],"Vhgk":[function(require,module,exports) {
var r=require("./_arrayPush"),e=require("./isArray");function u(u,a,i){var n=a(u);return e(u)?n:r(n,i(u))}module.exports=u;
},{"./_arrayPush":"srRO","./isArray":"p0cq"}],"uf6I":[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbols"),u=require("./keys");function s(s){return e(s,u,r)}module.exports=s;
},{"./_baseGetAllKeys":"Vhgk","./_getSymbols":"EvLK","./keys":"HI10"}],"l4Ef":[function(require,module,exports) {
var e=require("./_baseGetAllKeys"),r=require("./_getSymbolsIn"),u=require("./keysIn");function n(n){return e(n,u,r)}module.exports=n;
},{"./_baseGetAllKeys":"Vhgk","./_getSymbolsIn":"q8BM","./keysIn":"UACB"}],"fLfT":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),t=e(r,"DataView");module.exports=t;
},{"./_getNative":"bViC","./_root":"MIhM"}],"gTEC":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),o=e(r,"Promise");module.exports=o;
},{"./_getNative":"bViC","./_root":"MIhM"}],"N036":[function(require,module,exports) {
var e=require("./_getNative"),r=require("./_root"),a=e(r,"WeakMap");module.exports=a;
},{"./_getNative":"bViC","./_root":"MIhM"}],"tQCT":[function(require,module,exports) {
var e=require("./_DataView"),r=require("./_Map"),t=require("./_Promise"),a=require("./_Set"),u=require("./_WeakMap"),c=require("./_baseGetTag"),o=require("./_toSource"),i="[object Map]",n="[object Object]",s="[object Promise]",b="[object Set]",w="[object WeakMap]",j="[object DataView]",q=o(e),_=o(r),p=o(t),f=o(a),v=o(u),M=c;(e&&M(new e(new ArrayBuffer(1)))!=j||r&&M(new r)!=i||t&&M(t.resolve())!=s||a&&M(new a)!=b||u&&M(new u)!=w)&&(M=function(e){var r=c(e),t=r==n?e.constructor:void 0,a=t?o(t):"";if(a)switch(a){case q:return j;case _:return i;case p:return s;case f:return b;case v:return w}return r}),module.exports=M;
},{"./_DataView":"fLfT","./_Map":"K9uV","./_Promise":"gTEC","./_Set":"IVes","./_WeakMap":"N036","./_baseGetTag":"e5TX","./_toSource":"g55O"}],"f7dW":[function(require,module,exports) {
var t=Object.prototype,n=t.hasOwnProperty;function e(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}module.exports=e;
},{}],"aWGB":[function(require,module,exports) {
var e=require("./_cloneArrayBuffer");function r(r,f){var t=f?e(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}module.exports=r;
},{"./_cloneArrayBuffer":"zb3a"}],"jskC":[function(require,module,exports) {
var e=/\w*$/;function r(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}module.exports=r;
},{}],"WLsS":[function(require,module,exports) {
var e=require("./_Symbol"),o=e?e.prototype:void 0,r=o?o.valueOf:void 0;function t(e){return r?Object(r.call(e)):{}}module.exports=t;
},{"./_Symbol":"wppe"}],"mAMs":[function(require,module,exports) {
var e=require("./_cloneArrayBuffer"),r=require("./_cloneDataView"),c=require("./_cloneRegExp"),t=require("./_cloneSymbol"),a=require("./_cloneTypedArray"),o="[object Boolean]",n="[object Date]",b="[object Map]",s="[object Number]",u="[object RegExp]",j="[object Set]",y="[object String]",i="[object Symbol]",l="[object ArrayBuffer]",A="[object DataView]",w="[object Float32Array]",p="[object Float64Array]",f="[object Int8Array]",m="[object Int16Array]",q="[object Int32Array]",_="[object Uint8Array]",S="[object Uint8ClampedArray]",U="[object Uint16Array]",d="[object Uint32Array]";function g(g,x,B){var D=g.constructor;switch(x){case l:return e(g);case o:case n:return new D(+g);case A:return r(g,B);case w:case p:case f:case m:case q:case _:case S:case U:case d:return a(g,B);case b:return new D;case s:case y:return new D(g);case u:return c(g);case j:return new D;case i:return t(g)}}module.exports=g;
},{"./_cloneArrayBuffer":"zb3a","./_cloneDataView":"aWGB","./_cloneRegExp":"jskC","./_cloneSymbol":"WLsS","./_cloneTypedArray":"jXAN"}],"WYUj":[function(require,module,exports) {
var e=require("./_getTag"),r=require("./isObjectLike"),t="[object Map]";function i(i){return r(i)&&e(i)==t}module.exports=i;
},{"./_getTag":"tQCT","./isObjectLike":"OuyB"}],"rjxD":[function(require,module,exports) {
var e=require("./_baseIsMap"),r=require("./_baseUnary"),a=require("./_nodeUtil"),i=a&&a.isMap,s=i?r(i):e;module.exports=s;
},{"./_baseIsMap":"WYUj","./_baseUnary":"PnXa","./_nodeUtil":"PBPf"}],"NM6E":[function(require,module,exports) {
var e=require("./_getTag"),r=require("./isObjectLike"),t="[object Set]";function i(i){return r(i)&&e(i)==t}module.exports=i;
},{"./_getTag":"tQCT","./isObjectLike":"OuyB"}],"Z5jp":[function(require,module,exports) {
var e=require("./_baseIsSet"),r=require("./_baseUnary"),i=require("./_nodeUtil"),s=i&&i.isSet,a=s?r(s):e;module.exports=a;
},{"./_baseIsSet":"NM6E","./_baseUnary":"PnXa","./_nodeUtil":"PBPf"}],"s7WH":[function(require,module,exports) {
var e=require("./_Stack"),r=require("./_arrayEach"),t=require("./_assignValue"),i=require("./_baseAssign"),o=require("./_baseAssignIn"),n=require("./_cloneBuffer"),a=require("./_copyArray"),c=require("./_copySymbols"),u=require("./_copySymbolsIn"),b=require("./_getAllKeys"),j=require("./_getAllKeysIn"),y=require("./_getTag"),s=require("./_initCloneArray"),f=require("./_initCloneByTag"),q=require("./_initCloneObject"),l=require("./isArray"),A=require("./isBuffer"),_=require("./isMap"),g=require("./isObject"),p=require("./isSet"),v=require("./keys"),m=1,I=2,S=4,d="[object Arguments]",B="[object Array]",E="[object Boolean]",k="[object Date]",C="[object Error]",F="[object Function]",U="[object GeneratorFunction]",h="[object Map]",M="[object Number]",O="[object Object]",w="[object RegExp]",x="[object Set]",D="[object String]",K="[object Symbol]",T="[object WeakMap]",V="[object ArrayBuffer]",G="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",W="[object Int8Array]",z="[object Int16Array]",H="[object Int32Array]",J="[object Uint8Array]",L="[object Uint8ClampedArray]",P="[object Uint16Array]",Q="[object Uint32Array]",X={};function Y(B,E,k,C,h,M){var w,x=E&m,D=E&I,K=E&S;if(k&&(w=h?k(B,C,h,M):k(B)),void 0!==w)return w;if(!g(B))return B;var T=l(B);if(T){if(w=s(B),!x)return a(B,w)}else{var V=y(B),G=V==F||V==U;if(A(B))return n(B,x);if(V==O||V==d||G&&!h){if(w=D||G?{}:q(B),!x)return D?u(B,o(w,B)):c(B,i(w,B))}else{if(!X[V])return h?B:{};w=f(B,V,x)}}M||(M=new e);var N=M.get(B);if(N)return N;M.set(B,w),p(B)?B.forEach(function(e){w.add(Y(e,E,k,e,B,M))}):_(B)&&B.forEach(function(e,r){w.set(r,Y(e,E,k,r,B,M))});var R=K?D?j:b:D?keysIn:v,W=T?void 0:R(B);return r(W||B,function(e,r){W&&(e=B[r=e]),t(w,r,Y(e,E,k,r,B,M))}),w}X[d]=X[B]=X[V]=X[G]=X[E]=X[k]=X[N]=X[R]=X[W]=X[z]=X[H]=X[h]=X[M]=X[O]=X[w]=X[x]=X[D]=X[K]=X[J]=X[L]=X[P]=X[Q]=!0,X[C]=X[F]=X[T]=!1,module.exports=Y;
},{"./_Stack":"I84N","./_arrayEach":"D78i","./_assignValue":"pS95","./_baseAssign":"eFjB","./_baseAssignIn":"q2Io","./_cloneBuffer":"s4SJ","./_copyArray":"Mkgn","./_copySymbols":"az4F","./_copySymbolsIn":"K7uZ","./_getAllKeys":"uf6I","./_getAllKeysIn":"l4Ef","./_getTag":"tQCT","./_initCloneArray":"f7dW","./_initCloneByTag":"mAMs","./_initCloneObject":"qE2F","./isArray":"p0cq","./isBuffer":"iyC2","./isMap":"rjxD","./isObject":"u9vI","./isSet":"Z5jp","./keys":"HI10"}],"Y0zI":[function(require,module,exports) {
var e=require("./_baseClone"),r=1,n=4;function o(o){return e(o,r|n)}module.exports=o;
},{"./_baseClone":"s7WH"}],"mGCu":[function(require,module,exports) {
"use strict";function t(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}function e(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function r(t){if(0===t.length)return 0;for(var e,r=t[0],n=0,a=1;a<t.length;a++)e=r+1*t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-e+t[a]:n+=t[a]-e+r,r=e;return r+1*n}function n(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=r,exports.max=t,exports.min=e,exports.mean=n,exports.statMap=void 0;var a={min:e,max:t,mean:n,sum:r};exports.statMap=a;
},{}],"uuCs":[function(require,module,exports) {
"use strict";function e(e,t){return e.map(function(e){return 1*e[t]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getColumn=e;
},{}],"vM0t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=m(require("@babel/runtime/helpers/defineProperty")),t=m(require("@babel/runtime/helpers/classCallCheck")),r=m(require("@babel/runtime/helpers/createClass")),s=m(require("@babel/runtime/helpers/possibleConstructorReturn")),a=m(require("@babel/runtime/helpers/getPrototypeOf")),i=m(require("@babel/runtime/helpers/inherits")),n=m(require("lodash/isString")),u=m(require("lodash/isFunction")),o=m(require("lodash/cloneDeep")),l=require("@antv/l7-utils"),c=require("eventemitter3"),d=m(require("supercluster")),p=require("tapable"),f=require("./"),h=require("./utils/statistics"),v=require("./utils/util");function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function g(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?y(Object(s),!0).forEach(function(r){(0,e.default)(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var b=function(e){function c(e,r){var i;return(0,t.default)(this,c),(i=(0,s.default)(this,(0,a.default)(c).call(this))).data=void 0,i.extent=void 0,i.hooks={init:new p.SyncHook(["source"]),layout:new p.SyncHook(["source"]),update:new p.SyncHook(["source"])},i.parser={type:"geojson"},i.transforms=[],i.cluster=!1,i.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},i.originData=void 0,i.rawData=void 0,i.clusterIndex=void 0,i.rawData=(0,o.default)(e),i.originData=e,r&&(r.parser&&(i.parser=r.parser),r.transforms&&(i.transforms=r.transforms),i.cluster=r.cluster||!1,r.clusterOptions&&(i.cluster=!0,i.clusterOptions=g({},i.clusterOptions,{},r.clusterOptions))),i.hooks.init.tap("parser",function(){i.excuteParser()}),i.hooks.init.tap("cluster",function(){i.initCluster()}),i.hooks.init.tap("transform",function(){i.executeTrans()}),i.init(),i}return(0,i.default)(c,e),(0,r.default)(c,[{key:"setData",value:function(e){this.rawData=e,this.originData=(0,o.default)(e),this.init(),this.emit("update")}},{key:"getClusters",value:function(e){return this.clusterIndex.getClusters(this.extent,e)}},{key:"getClustersLeaves",value:function(e){return this.clusterIndex.getLeaves(e,1/0)}},{key:"updateClusterData",value:function(e){var t=this,r=this.clusterOptions,s=r.method,a=void 0===s?"sum":s,i=r.field,o=this.clusterIndex.getClusters(this.extent,e);this.clusterOptions.zoom=e,o.forEach(function(e){e.id||(e.properties.point_count=1)}),(i||(0,u.default)(a))&&(o=o.map(function(e){var r=e.id;if(r){var s,o=t.clusterIndex.getLeaves(r,1/0).map(function(e){return e.properties});if((0,n.default)(a)&&i){var l=(0,v.getColumn)(o,i);s=h.statMap[a](l)}(0,u.default)(a)&&(s=a(o)),e.properties.stat=s}else e.properties.point_count=1;return e})),this.data=(0,f.getParser)("geojson")({type:"FeatureCollection",features:o}),this.executeTrans()}},{key:"getFeatureById",value:function(e){var t=this.parser.type;return"geojson"!==(void 0===t?"geojson":t)||this.cluster?e<this.data.dataArray.length?this.data.dataArray[e]:"null":e<this.rawData.features.length?this.rawData.features[e]:"null"}},{key:"getFeatureId",value:function(e,t){var r=this.data.dataArray.find(function(t){return t[e]===name});return null==r?void 0:r._id}},{key:"excuteParser",value:function(){var e=this.parser,t=e.type||"geojson",r=(0,f.getParser)(t);this.data=r(this.originData,e),this.extent=(0,l.extent)(this.data.dataArray)}},{key:"executeTrans",value:function(){var e=this;this.transforms.forEach(function(t){var r=t.type,s=(0,f.getTransform)(r)(e.data,t);Object.assign(e.data,s)})}},{key:"initCluster",value:function(){if(this.cluster){var e=this.clusterOptions,t=e.radius,r=e.minZoom,s=void 0===r?0:r,a=e.maxZoom;this.clusterIndex=new d.default({radius:t,minZoom:s,maxZoom:a}),this.clusterIndex.load(this.rawData.features)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),c}(c.EventEmitter);exports.default=b;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","lodash/isString":"CkJF","lodash/isFunction":"dRuq","lodash/cloneDeep":"Y0zI","@antv/l7-utils":"nTEC","eventemitter3":"JJlS","supercluster":"Ot57","tapable":"WAFq","./":"eTWK","./utils/statistics":"mGCu","./utils/util":"uuCs"}],"ZBdw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cluster=i,exports.formatData=u;var e=t(require("@babel/runtime/helpers/defineProperty")),r=t(require("supercluster"));function t(e){return e&&e.__esModule?e:{default:e}}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function n(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function i(t,o){var i=o.radius,a=void 0===i?80:i,s=o.maxZoom,c=void 0===s?18:s,p=o.minZoom,d=void 0===p?0:p,f=o.field,l=o.zoom,m=void 0===l?2:l;if(t.pointIndex){var y=t.pointIndex.getClusters(t.extent,m);return t.dataArray=u(y),t}var O=new r.default({radius:a,minZoom:d,maxZoom:c,map:function(e){return{sum:e[f]}},reduce:function(e,r){e.sum+=r.sum}}),b={type:"FeatureCollection",features:[]};b.features=t.dataArray.map(function(r){return{type:"Feature",properties:(0,e.default)({},f,r[f]),geometry:{type:"Point",coordinates:r.coordinates}}}),O.load(b.features);var v=O.getClusters(t.extent,m).map(function(e,r){return n({coordinates:e.geometry.coordinates,_id:r+1},e.properties)});return t.dataArray=v,t.pointIndex=O,t}function u(e){return e.map(function(e,r){return n({coordinates:e.geometry.coordinates,_id:r+1},e.properties)})}
},{"@babel/runtime/helpers/defineProperty":"IxO8","supercluster":"Ot57"}],"OMdD":[function(require,module,exports) {
"use strict";function r(r,e){var t=e.callback;return t&&(r.dataArray=r.dataArray.filter(t)),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.filter=r;
},{}],"qdEw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.aggregatorToGrid=e;var t=require("./statistics"),r=6378e3;function e(t,r){var e=t.dataArray,i=r.size,f=n(e,void 0===i?10:i),a=f.gridHash,s=f.gridOffset,u=o(a,s,r);return{yOffset:s.yOffset/1.8,xOffset:s.xOffset/1.8,radius:s.xOffset,type:"grid",dataArray:u}}function n(t,r){var e,n=1/0,f=-1/0,a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){e=u.value.coordinates[1],Number.isFinite(e)&&(n=e<n?e:n,f=e>f?e:f)}}catch(P){o=!0,s=P}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var d=i(r,34.54083);if(d.xOffset<=0||d.yOffset<=0)return{gridHash:{},gridOffset:d};var l={},y=!0,O=!1,h=void 0;try{for(var v,p=t[Symbol.iterator]();!(y=(v=p.next()).done);y=!0){var g=v.value,x=g.coordinates[1],m=g.coordinates[0];if(Number.isFinite(x)&&Number.isFinite(m)){var b=Math.floor((x+90)/d.yOffset),M=Math.floor((m+180)/d.xOffset),I="".concat(b,"-").concat(M);l[I]=l[I]||{count:0,points:[]},l[I].count+=1,l[I].points.push(g)}}}catch(P){O=!0,h=P}finally{try{y||null==p.return||p.return()}finally{if(O)throw h}}return{gridHash:l,gridOffset:d}}function i(t,r){return{yOffset:f(t),xOffset:a(r,t)}}function f(t){return t/r*(180/Math.PI)}function a(t,e){return e/r*(180/Math.PI)/Math.cos(t*Math.PI/180)}function o(r,e,n){return Object.keys(r).reduce(function(i,f,a){var o=f.split("-"),u=parseInt(o[0],10),c=parseInt(o[1],10),d={};if(n.field&&n.method){var l=s(r[f].points,n.field);d[n.method]=t.statMap[n.method](l)}return Object.assign(d,{_id:a+1,coordinates:[e.xOffset*c-180,e.yOffset*u-90],count:r[f].count}),i.push(d),i},[])}function s(t,r){return t.map(function(t){return 1*t[r]})}
},{"./statistics":"mGCu"}],"x161":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=Math.PI/3,r=[0,n,2*n,3*n,4*n,5*n];function t(n){return n[0]}function u(n){return n[1]}function e(){var e,a,o,i=0,c=0,f=1,l=1,s=t,h=u;function v(n){var r,t={},u=[],e=n.length;for(r=0;r<e;++r)if(!isNaN(c=+s.call(null,i=n[r],r,n))&&!isNaN(f=+h.call(null,i,r,n))){var i,c,f,l=Math.round(f/=o),v=Math.round(c=c/a-(1&l)/2),M=f-l;if(3*Math.abs(M)>1){var d=c-v,p=v+(c<v?-1:1)/2,g=l+(f<l?-1:1),x=c-p,m=f-g;d*d+M*M>x*x+m*m&&(v=p+(1&l?1:-1)/2,l=g)}var j=v+"-"+l,N=t[j];N?N.push(i):(u.push(N=t[j]=[i]),N.x=(v+(1&l)/2)*a,N.y=l*o)}return u}function M(n){var t=0,u=0;return r.map(function(r){var e=Math.sin(r)*n,a=-Math.cos(r)*n,o=e-t,i=a-u;return t=e,u=a,[o,i]})}return v.hexagon=function(n){return"m"+M(null==n?e:+n).join("l")+"z"},v.centers=function(){for(var n=[],r=Math.round(c/o),t=Math.round(i/a),u=r*o;u<l+e;u+=o,++r)for(var s=t*a+(1&r)*a/2;s<f+a/2;s+=a)n.push([s,u]);return n},v.mesh=function(){var n=M(e).slice(0,4).join("l");return v.centers().map(function(r){return"M"+r+"m"+n}).join("")},v.x=function(n){return arguments.length?(s=n,v):s},v.y=function(n){return arguments.length?(h=n,v):h},v.radius=function(r){return arguments.length?(a=2*(e=+r)*Math.sin(n),o=1.5*e,v):e},v.size=function(n){return arguments.length?(i=c=0,f=+n[0],l=+n[1],v):[f-i,l-c]},v.extent=function(n){return arguments.length?(i=+n[0][0],c=+n[0][1],f=+n[1][0],l=+n[1][1],v):[[i,c],[f,l]]},v.radius(1)}
},{}],"fkf2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"hexbin",{enumerable:!0,get:function(){return e.default}});var e=r(require("./src/hexbin"));function r(e){return e&&e.__esModule?e:{default:e}}
},{"./src/hexbin":"x161"}],"hGGI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pointToHexbin=f;var e=i(require("@babel/runtime/helpers/defineProperty")),r=i(require("@babel/runtime/helpers/slicedToArray")),t=require("@antv/l7-utils"),n=require("d3-hexbin"),o=require("./statistics");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,e.default)(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var c=6378e3;function f(i,u){var f=i.dataArray,d=u.size,l=void 0===d?10:d,p=u.method,b=void 0===p?"sum":p,y=l/(2*Math.PI*c)*(256<<20)/2,O=f.map(function(e){var n=(0,t.aProjectFlat)(e.coordinates),o=(0,r.default)(n,2);return a({},e,{coordinates:[o[0],o[1]]})});return{dataArray:(0,n.hexbin)().radius(y).x(function(e){return e.coordinates[0]}).y(function(e){return e.coordinates[1]})(O).map(function(r,t){var n;if(u.field&&b){var i=s(r,u.field);r[b]=o.statMap[b](i)}return n={},(0,e.default)(n,u.method,r[b]),(0,e.default)(n,"count",r.length),(0,e.default)(n,"coordinates",[r.x,r.y]),(0,e.default)(n,"_id",t+1),n}),radius:y,xOffset:y,yOffset:y,type:"hexagon"}}function s(e,r){return e.map(function(e){return 1*e[r]})}
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/slicedToArray":"HETk","@antv/l7-utils":"nTEC","d3-hexbin":"fkf2","./statistics":"mGCu"}],"ALZn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.join=o;var e=r(require("@babel/runtime/helpers/defineProperty"));function r(e){return e&&e.__esModule?e:{default:e}}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach(function(t){(0,e.default)(r,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function o(e,r){var t=r.field,o=r.data,c={};return o.forEach(function(e){c[e[t]]=e}),e.dataArray=o.dataArray.map(function(e){var r=e[t];return n({},c[r],{},e)}),o}
},{"@babel/runtime/helpers/defineProperty":"IxO8"}],"dEQv":[function(require,module,exports) {
"use strict";function a(a,r){var e=r.callback;return e&&(a.dataArray=a.dataArray.map(e)),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=a;
},{}],"eTWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r={getTransform:!0,registerTransform:!0,getParser:!0,registerParser:!0};Object.defineProperty(exports,"getTransform",{enumerable:!0,get:function(){return e.getTransform}}),Object.defineProperty(exports,"registerTransform",{enumerable:!0,get:function(){return e.registerTransform}}),Object.defineProperty(exports,"getParser",{enumerable:!0,get:function(){return e.getParser}}),Object.defineProperty(exports,"registerParser",{enumerable:!0,get:function(){return e.registerParser}}),exports.default=void 0;var e=require("./factory"),t=d(require("./parser/csv")),s=d(require("./parser/geojson")),a=d(require("./parser/image")),o=d(require("./parser/json")),n=d(require("./parser/raster")),i=d(require("./source")),u=require("./transform/cluster"),f=require("./transform/filter"),g=require("./transform/grid"),m=require("./transform/hexagon"),l=require("./transform/join"),c=require("./transform/map"),p=require("./interface");function d(r){return r&&r.__esModule?r:{default:r}}Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var P=i.default;exports.default=P,(0,e.registerParser)("geojson",s.default),(0,e.registerParser)("image",a.default),(0,e.registerParser)("csv",t.default),(0,e.registerParser)("json",o.default),(0,e.registerParser)("raster",n.default),(0,e.registerTransform)("cluster",u.cluster),(0,e.registerTransform)("filter",f.filter),(0,e.registerTransform)("join",l.join),(0,e.registerTransform)("map",c.map),(0,e.registerTransform)("grid",g.aggregatorToGrid),(0,e.registerTransform)("hexagon",m.pointToHexbin);
},{"./factory":"o2Gm","./parser/csv":"Md9s","./parser/geojson":"YA0S","./parser/image":"jJbF","./parser/json":"xvfO","./parser/raster":"Qa4M","./source":"vM0t","./transform/cluster":"ZBdw","./transform/filter":"OMdD","./transform/grid":"qdEw","./transform/hexagon":"hGGI","./transform/join":"ALZn","./transform/map":"dEQv","./interface":"aYep"}],"Adyw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,a,r=s(require("@babel/runtime/helpers/classCallCheck")),u=s(require("@babel/runtime/helpers/createClass")),o=require("@antv/l7-core"),i=s(require("@antv/l7-source")),n=require("inversify");function s(e){return e&&e.__esModule?e:{default:e}}var l=(e=(0,n.injectable)())(t=a=function(){function e(){(0,r.default)(this,e),this.mapService=void 0}return(0,u.default)(e,[{key:"apply",value:function(e){var t=this;this.mapService=e.getContainer().get(o.TYPES.IMapService),e.hooks.init.tap("DataSourcePlugin",function(){var a=e.sourceOption,r=a.data,u=a.options;e.setSource(new i.default(r,u)),t.updateClusterData(e)}),e.hooks.beforeRenderData.tap("DataSourcePlugin",function(a){var r=t.updateClusterData(e),u=e.dataState.dataSourceNeedUpdate;return e.dataState.dataSourceNeedUpdate=!1,r||u})}},{key:"updateClusterData",value:function(e){var t=e.getSource(),a=t.cluster,r=t.clusterOptions,u=r.zoom,o=void 0===u?0:u,i=r.maxZoom,n=void 0===i?16:i,s=this.mapService.getZoom()-1;return!!(a&&Math.abs(o-s)>1&&n>o)&&(t.updateClusterData(Math.floor(s)),!0)}}]),e}())||t;exports.default=l;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-core":"om0I","@antv/l7-source":"eTWK","inversify":"PR7M"}],"yJgn":[function(require,module,exports) {
"use strict";function e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CQHQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=n(require("./ascending.js"));function n(e){return e&&e.__esModule?e:{default:e}}function t(e){return 1===e.length&&(e=r(e)),{left:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)<0?r=l+1:u=l}return r},right:function(n,t,r,u){for(null==r&&(r=0),null==u&&(u=n.length);r<u;){var l=r+u>>>1;e(n[l],t)>0?u=l:r=l+1}return r}}}function r(n){return function(t,r){return(0,e.default)(n(t),r)}}
},{"./ascending.js":"yJgn"}],"YrTP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.bisectLeft=exports.bisectRight=void 0;var e=r(require("./ascending.js")),t=r(require("./bisector.js"));function r(e){return e&&e.__esModule?e:{default:e}}var s=(0,t.default)(e.default),i=s.right;exports.bisectRight=i;var o=s.left;exports.bisectLeft=o;var u=i;exports.default=u;
},{"./ascending.js":"yJgn","./bisector.js":"CQHQ"}],"w45x":[function(require,module,exports) {
"use strict";function e(e,t){let l=0;if(void 0===t)for(let o of e)null!=o&&(o=+o)>=o&&++l;else{let o=-1;for(let r of e)null!=(r=t(r,++o,e))&&(r=+r)>=r&&++l}return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LKVk":[function(require,module,exports) {
"use strict";function t(t){return 0|t.length}function e(t){return!(t>0)}function n(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function r(t){return e=>t(...e)}function o(...o){const u="function"==typeof o[o.length-1]&&r(o.pop()),f=(o=o.map(n)).map(t),i=o.length-1,p=new Array(i+1).fill(0),c=[];if(i<0||f.some(e))return c;for(;;){c.push(p.map((t,e)=>o[e][t]));let t=i;for(;++p[t]===f[t];){if(0===t)return u?c.map(u):c;p[t--]=0}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"YSUD":[function(require,module,exports) {
"use strict";function e(e,r){var t=0,o=0;return Float64Array.from(e,void 0===r?e=>t+=+e||0:u=>t+=+r(u,o++,e)||0)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fBAz":[function(require,module,exports) {
"use strict";function e(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Nh5Q":[function(require,module,exports) {
"use strict";function e(e,t){let l,o=0,f=0,r=0;if(void 0===t)for(let u of e)null!=u&&(u=+u)>=u&&(r+=(l=u-f)*(u-(f+=l/++o)));else{let u=-1;for(let i of e)null!=(i=t(i,++u,e))&&(i=+i)>=i&&(r+=(l=i-f)*(i-(f+=l/++o)))}if(o>1)return r/(o-1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"WEAa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./variance.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){const u=(0,e.default)(t,r);return u?Math.sqrt(u):u}
},{"./variance.js":"Nh5Q"}],"UaWb":[function(require,module,exports) {
"use strict";function e(e,o){let t,l;if(void 0===o)for(const r of e)null!=r&&(void 0===t?r>=r&&(t=l=r):(t>r&&(t=r),l<r&&(l=r)));else{let r=-1;for(let f of e)null!=(f=o(f,++r,e))&&(void 0===t?f>=f&&(t=l=f):(t>f&&(t=f),l<f&&(l=f)))}return[t,l]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"NNW9":[function(require,module,exports) {
"use strict";function e(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"zkcs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r,exports.groups=n,exports.rollup=u,exports.rollups=o;var t=e(require("./identity.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(e,...r){return f(e,t.default,t.default,r)}function n(e,...r){return f(e,Array.from,t.default,r)}function u(e,r,...n){return f(e,t.default,r,n)}function o(t,e,...r){return f(t,Array.from,e,r)}function f(t,e,r,n){return function t(u,o){if(o>=n.length)return r(u);const f=new Map,s=n[o++];let l=-1;for(const e of u){const t=s(e,++l,u),r=f.get(t);r?r.push(e):f.set(t,[e])}for(const[e,r]of f)f.set(e,t(r,o));return e(f)}(t,0)}
},{"./identity.js":"NNW9"}],"RkzJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=exports.slice=void 0;var e=Array.prototype,r=e.slice;exports.slice=r;var p=e.map;exports.map=p;
},{}],"wcAU":[function(require,module,exports) {
"use strict";function e(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var a=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(n);++a<n;)o[a]=e+a*r;return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"EUzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.tickIncrement=o,exports.tickStep=M;var t=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2);function e(t,r,a){var e,M,h,i,n=-1;if(a=+a,(t=+t)===(r=+r)&&a>0)return[t];if((e=r<t)&&(M=t,t=r,r=M),0===(i=o(t,r,a))||!isFinite(i))return[];if(i>0)for(t=Math.ceil(t/i),r=Math.floor(r/i),h=new Array(M=Math.ceil(r-t+1));++n<M;)h[n]=(t+n)*i;else for(t=Math.floor(t*i),r=Math.ceil(r*i),h=new Array(M=Math.ceil(t-r+1));++n<M;)h[n]=(t-n)/i;return e&&h.reverse(),h}function o(e,o,M){var h=(o-e)/Math.max(0,M),i=Math.floor(Math.log(h)/Math.LN10),n=h/Math.pow(10,i);return i>=0?(n>=t?10:n>=r?5:n>=a?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=t?10:n>=r?5:n>=a?2:1)}function M(e,o,M){var h=Math.abs(o-e)/Math.max(0,M),i=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),n=h/i;return n>=t?i*=10:n>=r?i*=5:n>=a&&(i*=2),o<e?-i:i}
},{}],"J0XR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("../count.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){return Math.ceil(Math.log((0,e.default)(t))/Math.LN2)+1}
},{"../count.js":"w45x"}],"bGH2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var r=require("./array.js"),e=o(require("./bisect.js")),t=o(require("./constant.js")),u=o(require("./extent.js")),n=o(require("./identity.js")),a=o(require("./range.js")),f=require("./ticks.js"),i=o(require("./threshold/sturges.js"));function o(r){return r&&r.__esModule?r:{default:r}}function s(){var o=n.default,s=u.default,l=i.default;function c(r){Array.isArray(r)||(r=Array.from(r));var t,u,n=r.length,i=new Array(n);for(t=0;t<n;++t)i[t]=o(r[t],t,r);var c=s(i),d=c[0],y=c[1],h=l(i,d,y);Array.isArray(h)||(h=(0,f.tickStep)(d,y,h),h=(0,a.default)(Math.ceil(d/h)*h,y,h));for(var p=h.length;h[0]<=d;)h.shift(),--p;for(;h[p-1]>y;)h.pop(),--p;var j,A=new Array(p+1);for(t=0;t<=p;++t)(j=A[t]=[]).x0=t>0?h[t-1]:d,j.x1=t<p?h[t]:y;for(t=0;t<n;++t)d<=(u=i[t])&&u<=y&&A[(0,e.default)(h,u,0,p)].push(r[t]);return A}return c.value=function(r){return arguments.length?(o="function"==typeof r?r:(0,t.default)(r),c):o},c.domain=function(r){return arguments.length?(s="function"==typeof r?r:(0,t.default)([r[0],r[1]]),c):s},c.thresholds=function(e){return arguments.length?(l="function"==typeof e?e:Array.isArray(e)?(0,t.default)(r.slice.call(e)):(0,t.default)(e),c):l},c}
},{"./array.js":"RkzJ","./bisect.js":"YrTP","./constant.js":"iOAL","./extent.js":"UaWb","./identity.js":"NNW9","./range.js":"wcAU","./ticks.js":"EUzg","./threshold/sturges.js":"J0XR"}],"Ougw":[function(require,module,exports) {
"use strict";function e(e,o){let t;if(void 0===o)for(const l of e)null!=l&&(t<l||void 0===t&&l>=l)&&(t=l);else{let l=-1;for(let r of e)null!=(r=o(r,++l,e))&&(t<r||void 0===t&&r>=r)&&(t=r)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kP8m":[function(require,module,exports) {
"use strict";function e(e,o){let t;if(void 0===o)for(const l of e)null!=l&&(t>l||void 0===t&&l>=l)&&(t=l);else{let l=-1;for(let r of e)null!=(r=o(r,++l,e))&&(t>r||void 0===t&&r>=r)&&(t=r)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"v5AZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=e(require("./ascending.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(e,n,a=0,f=e.length-1,u=t.default){for(;f>a;){if(f-a>600){const t=f-a+1,r=n-a+1,s=Math.log(t),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(t-l)/t)*(r-t/2<0?-1:1);o(e,n,Math.max(a,Math.floor(n-r*l/t+c)),Math.min(f,Math.floor(n+(t-r)*l/t+c)),u)}const t=e[n];let s=a,l=f;for(r(e,a,n),u(e[f],t)>0&&r(e,a,f);s<l;){for(r(e,s,l),++s,--l;u(e[s],t)<0;)++s;for(;u(e[l],t)>0;)--l}0===u(e[a],t)?r(e,a,l):r(e,++l,f),l<=n&&(a=l+1),n<=l&&(f=l-1)}return e}function r(t,e,o){const r=t[e];t[e]=t[o],t[o]=r}
},{"./ascending.js":"yJgn"}],"XWLP":[function(require,module,exports) {
"use strict";function e(e){return null===e?NaN:+e}function*l(e,l){if(void 0===l)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(let o of e)null!=(o=l(o,++t,e))&&(o=+o)>=o&&(yield o)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.numbers=l;
},{}],"xM5B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.quantileSorted=i;var e=a(require("./max.js")),r=a(require("./min.js")),t=a(require("./quickselect.js")),u=f(require("./number.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var a=u?Object.getOwnPropertyDescriptor(e,f):null;a&&(a.get||a.set)?Object.defineProperty(t,f,a):t[f]=e[f]}return t.default=e,r&&r.set(e,t),t}function a(e){return e&&e.__esModule?e:{default:e}}function o(n,f,a){if(o=(n=Float64Array.from((0,u.numbers)(n,a))).length){if((f=+f)<=0||o<2)return(0,r.default)(n);if(f>=1)return(0,e.default)(n);var o,i=(o-1)*f,l=Math.floor(i),s=(0,e.default)((0,t.default)(n,l).subarray(0,l+1));return s+((0,r.default)(n.subarray(l+1))-s)*(i-l)}}function i(e,r,t=u.default){if(n=e.length){if((r=+r)<=0||n<2)return+t(e[0],0,e);if(r>=1)return+t(e[n-1],n-1,e);var n,f=(n-1)*r,a=Math.floor(f),o=+t(e[a],a,e);return o+(+t(e[a+1],a+1,e)-o)*(f-a)}}
},{"./max.js":"Ougw","./min.js":"kP8m","./quickselect.js":"v5AZ","./number.js":"XWLP"}],"nJJ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=u(require("../count.js")),t=u(require("../quantile.js"));function u(e){return e&&e.__esModule?e:{default:e}}function r(u,r,a){return Math.ceil((a-r)/(2*((0,t.default)(u,.75)-(0,t.default)(u,.25))*Math.pow((0,e.default)(u),-1/3)))}
},{"../count.js":"w45x","../quantile.js":"xM5B"}],"Rqev":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=u(require("../count.js")),t=u(require("../deviation.js"));function u(e){return e&&e.__esModule?e:{default:e}}function r(u,r,o){return Math.ceil((o-r)/(3.5*(0,t.default)(u)*Math.pow((0,e.default)(u),-1/3)))}
},{"../count.js":"w45x","../deviation.js":"WEAa"}],"IgNN":[function(require,module,exports) {
"use strict";function e(e,o){let t,l=-1,r=-1;if(void 0===o)for(const f of e)++r,null!=f&&(t<f||void 0===t&&f>=f)&&(t=f,l=r);else for(let f of e)null!=(f=o(f,++r,e))&&(t<f||void 0===t&&f>=f)&&(t=f,l=r);return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"YY5N":[function(require,module,exports) {
"use strict";function e(e,t){let l=0,o=0;if(void 0===t)for(let f of e)null!=f&&(f=+f)>=f&&(++l,o+=f);else{let f=-1;for(let r of e)null!=(r=t(r,++f,e))&&(r=+r)>=r&&(++l,o+=r)}if(l)return o/l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CxwF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./quantile.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return(0,e.default)(t,.5,u)}
},{"./quantile.js":"xM5B"}],"Getd":[function(require,module,exports) {
"use strict";function*e(e){for(const r of e)yield*r}function r(r){return Array.from(e(r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"Fe03":[function(require,module,exports) {
"use strict";function e(e,o){let t,l=-1,r=-1;if(void 0===o)for(const f of e)++r,null!=f&&(t>f||void 0===t&&f>=f)&&(t=f,l=r);else for(let f of e)null!=(f=o(f,++r,e))&&(t>f||void 0===t&&f>=f)&&(t=f,l=r);return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DkXH":[function(require,module,exports) {
"use strict";function e(e,r=t){const o=[];let n,s=!1;for(const t of e)s&&o.push(r(n,t)),n=t,s=!0;return o}function t(e,t){return[e,t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.pair=t;
},{}],"RhiG":[function(require,module,exports) {
"use strict";function e(e,r){return Array.from(r,r=>e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LCo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=t(require("./ascending.js"));function t(e){return e&&e.__esModule?e:{default:e}}function o(t,o=e.default){let r,u=!1;if(1===o.length){let f;for(const n of t){const t=o(n);(u?(0,e.default)(t,f)<0:0===(0,e.default)(t,t))&&(r=n,f=t,u=!0)}}else for(const e of t)(u?o(e,r)<0:0===o(e,e))&&(r=e,u=!0);return r}
},{"./ascending.js":"yJgn"}],"JcRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./ascending.js")),t=r(require("./minIndex.js"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u=e.default){if(1===u.length)return(0,t.default)(r,u);let n,f=-1,o=-1;for(const e of r)++o,(f<0?0===u(e,e):u(e,n)<0)&&(n=e,f=o);return f}
},{"./ascending.js":"yJgn","./minIndex.js":"Fe03"}],"P3UJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=t(require("./ascending.js"));function t(e){return e&&e.__esModule?e:{default:e}}function o(t,o=e.default){let r,u=!1;if(1===o.length){let f;for(const n of t){const t=o(n);(u?(0,e.default)(t,f)>0:0===(0,e.default)(t,t))&&(r=n,f=t,u=!0)}}else for(const e of t)(u?o(e,r)>0:0===o(e,e))&&(r=e,u=!0);return r}
},{"./ascending.js":"yJgn"}],"Rv6z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./ascending.js")),t=r(require("./maxIndex.js"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u=e.default){if(1===u.length)return(0,t.default)(r,u);let n,f=-1,o=-1;for(const e of r)++o,(f<0?0===u(e,e):u(e,n)>0)&&(n=e,f=o);return f}
},{"./ascending.js":"yJgn","./maxIndex.js":"IgNN"}],"swlo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./leastIndex.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){const u=(0,e.default)(t,r);return u<0?void 0:u}
},{"./leastIndex.js":"JcRo"}],"Xskt":[function(require,module,exports) {
"use strict";function e(e,t=0,r=e.length){for(var o,n,u=r-(t=+t);u;)n=Math.random()*u--|0,o=e[u+t],e[u+t]=e[n+t],e[n+t]=o;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"uFmM":[function(require,module,exports) {
"use strict";function e(e,t){let o=0;if(void 0===t)for(let r of e)(r=+r)&&(o+=r);else{let r=-1;for(let f of e)(f=+t(f,++r,e))&&(o+=f)}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DmNI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./min.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(!(o=r.length))return[];for(var t=-1,u=(0,e.default)(r,n),f=new Array(u);++t<u;)for(var o,a=-1,i=f[t]=new Array(o);++a<o;)i[a]=r[a][t];return f}function n(e){return e.length}
},{"./min.js":"kP8m"}],"ciZM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./transpose.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){return(0,e.default)(arguments)}
},{"./transpose.js":"DmNI"}],"K0bd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"bisect",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"bisectRight",{enumerable:!0,get:function(){return e.bisectRight}}),Object.defineProperty(exports,"bisectLeft",{enumerable:!0,get:function(){return e.bisectLeft}}),Object.defineProperty(exports,"ascending",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"bisector",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"count",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"cross",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"descending",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"deviation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"extent",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"group",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"groups",{enumerable:!0,get:function(){return c.groups}}),Object.defineProperty(exports,"rollup",{enumerable:!0,get:function(){return c.rollup}}),Object.defineProperty(exports,"rollups",{enumerable:!0,get:function(){return c.rollups}}),Object.defineProperty(exports,"bin",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"histogram",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"thresholdFreedmanDiaconis",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"thresholdScott",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"thresholdSturges",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"maxIndex",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"median",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"minIndex",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"pairs",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"permute",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"quantile",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"quantileSorted",{enumerable:!0,get:function(){return h.quantileSorted}}),Object.defineProperty(exports,"quickselect",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"least",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"leastIndex",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"greatest",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"greatestIndex",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"scan",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"shuffle",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(exports,"ticks",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"tickIncrement",{enumerable:!0,get:function(){return L.tickIncrement}}),Object.defineProperty(exports,"tickStep",{enumerable:!0,get:function(){return L.tickStep}}),Object.defineProperty(exports,"transpose",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"variance",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return F.default}});var e=C(require("./bisect.js")),r=A(require("./ascending.js")),t=A(require("./bisector.js")),n=A(require("./count.js")),u=A(require("./cross.js")),i=A(require("./cumsum.js")),o=A(require("./descending.js")),f=A(require("./deviation.js")),s=A(require("./extent.js")),c=C(require("./group.js")),a=A(require("./bin.js")),p=A(require("./threshold/freedmanDiaconis.js")),l=A(require("./threshold/scott.js")),d=A(require("./threshold/sturges.js")),b=A(require("./max.js")),j=A(require("./maxIndex.js")),m=A(require("./mean.js")),g=A(require("./median.js")),x=A(require("./merge.js")),y=A(require("./min.js")),O=A(require("./minIndex.js")),P=A(require("./pairs.js")),q=A(require("./permute.js")),h=C(require("./quantile.js")),v=A(require("./quickselect.js")),k=A(require("./range.js")),I=A(require("./least.js")),S=A(require("./leastIndex.js")),_=A(require("./greatest.js")),M=A(require("./greatestIndex.js")),w=A(require("./scan.js")),D=A(require("./shuffle.js")),z=A(require("./sum.js")),L=C(require("./ticks.js")),R=A(require("./transpose.js")),W=A(require("./variance.js")),F=A(require("./zip.js"));function A(e){return e&&e.__esModule?e:{default:e}}function B(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return B=function(){return e},e}function C(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=B();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}
},{"./bisect.js":"YrTP","./ascending.js":"yJgn","./bisector.js":"CQHQ","./count.js":"w45x","./cross.js":"LKVk","./cumsum.js":"YSUD","./descending.js":"fBAz","./deviation.js":"WEAa","./extent.js":"UaWb","./group.js":"zkcs","./bin.js":"bGH2","./threshold/freedmanDiaconis.js":"nJJ4","./threshold/scott.js":"Rqev","./threshold/sturges.js":"J0XR","./max.js":"Ougw","./maxIndex.js":"IgNN","./mean.js":"YY5N","./median.js":"CxwF","./merge.js":"Getd","./min.js":"kP8m","./minIndex.js":"Fe03","./pairs.js":"DkXH","./permute.js":"RhiG","./quantile.js":"xM5B","./quickselect.js":"v5AZ","./range.js":"wcAU","./least.js":"LCo4","./leastIndex.js":"JcRo","./greatest.js":"P3UJ","./greatestIndex.js":"Rv6z","./scan.js":"swlo","./shuffle.js":"Xskt","./sum.js":"uFmM","./ticks.js":"EUzg","./transpose.js":"DmNI","./variance.js":"Nh5Q","./zip.js":"ciZM"}],"buZa":[function(require,module,exports) {
"use strict";function t(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function e(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initRange=t,exports.initInterpolator=e;
},{}],"GjLX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.implicit=void 0;var n=require("./init.js");const t=Symbol("implicit");function e(){var r=new Map,i=[],o=[],u=t;function s(n){var e=n+"",s=r.get(e);if(!s){if(u!==t)return u;r.set(e,s=i.push(n))}return o[(s-1)%o.length]}return s.domain=function(n){if(!arguments.length)return i.slice();i=[],r=new Map;for(const t of n){const n=t+"";r.has(n)||r.set(n,i.push(t))}return s},s.range=function(n){return arguments.length?(o=Array.from(n),s):o.slice()},s.unknown=function(n){return arguments.length?(u=n,s):u},s.copy=function(){return e(i,o).unknown(u)},n.initRange.apply(s,arguments),s}exports.implicit=t;
},{"./init.js":"buZa"}],"BAgl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u,exports.point=a;var n=require("d3-array"),r=require("./init.js"),e=t(require("./ordinal.js"));function t(n){return n&&n.__esModule?n:{default:n}}function u(){var t,i,a=(0,e.default)().unknown(void 0),d=a.domain,o=a.range,g=0,l=1,p=!1,c=0,f=0,h=.5;function s(){var r=d().length,e=l<g,u=e?l:g,a=e?g:l;t=(a-u)/Math.max(1,r-c+2*f),p&&(t=Math.floor(t)),u+=(a-u-t*(r-c))*h,i=t*(1-c),p&&(u=Math.round(u),i=Math.round(i));var s=(0,n.range)(r).map(function(n){return u+t*n});return o(e?s.reverse():s)}return delete a.unknown,a.domain=function(n){return arguments.length?(d(n),s()):d()},a.range=function(n){return arguments.length?([g,l]=n,g=+g,l=+l,s()):[g,l]},a.rangeRound=function(n){return[g,l]=n,g=+g,l=+l,p=!0,s()},a.bandwidth=function(){return i},a.step=function(){return t},a.round=function(n){return arguments.length?(p=!!n,s()):p},a.padding=function(n){return arguments.length?(c=Math.min(1,f=+n),s()):c},a.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),s()):c},a.paddingOuter=function(n){return arguments.length?(f=+n,s()):f},a.align=function(n){return arguments.length?(h=Math.max(0,Math.min(1,n)),s()):h},a.copy=function(){return u(d(),[g,l]).round(p).paddingInner(c).paddingOuter(f).align(h)},r.initRange.apply(s(),arguments)}function i(n){var r=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return i(r())},n}function a(){return i(u.apply(null,arguments).paddingInner(1))}
},{"d3-array":"K0bd","./init.js":"buZa","./ordinal.js":"GjLX"}],"hnXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./basis.js");function r(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}}
},{"./basis.js":"MdBW"}],"RhzI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=u,exports.gamma=o,exports.default=a;var t=e(require("./constant.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return function(n){return t+n*e}}function r(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function u(e,r){var u=r-e;return u?n(e,u>180||u<-180?u-360*Math.round(u/360):u):(0,t.default)(isNaN(e)?r:e)}function o(e){return 1==(e=+e)?a:function(n,u){return u-n?r(n,u,e):(0,t.default)(isNaN(n)?u:n)}}function a(e,r){var u=r-e;return u?n(e,u):(0,t.default)(isNaN(e)?r:e)}
},{"./constant.js":"iOAL"}],"rvVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=exports.default=void 0;var r=require("d3-color"),e=a(require("./basis.js")),t=a(require("./basisClosed.js")),n=u(require("./color.js"));function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function u(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var a=n?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,e&&e.set(r,t),t}function a(r){return r&&r.__esModule?r:{default:r}}var i=function e(t){var o=(0,n.gamma)(t);function u(e,t){var u=o((e=(0,r.rgb)(e)).r,(t=(0,r.rgb)(t)).r),a=o(e.g,t.g),i=o(e.b,t.b),s=(0,n.default)(e.opacity,t.opacity);return function(r){return e.r=u(r),e.g=a(r),e.b=i(r),e.opacity=s(r),e+""}}return u.gamma=e,u}(1);function s(e){return function(t){var n,o,u=t.length,a=new Array(u),i=new Array(u),s=new Array(u);for(n=0;n<u;++n)o=(0,r.rgb)(t[n]),a[n]=o.r||0,i[n]=o.g||0,s[n]=o.b||0;return a=e(a),i=e(i),s=e(s),o.opacity=1,function(r){return o.r=a(r),o.g=i(r),o.b=s(r),o+""}}}exports.default=i;var f=s(e.default);exports.rgbBasis=f;var c=s(t.default);exports.rgbBasisClosed=c;
},{"d3-color":"Peej","./basis.js":"MdBW","./basisClosed.js":"hnXz","./color.js":"RhzI"}],"BOJ5":[function(require,module,exports) {
"use strict";function e(e,r){r||(r=[]);var t,n=e?Math.min(r.length,e.length):0,i=r.slice();return function(u){for(t=0;t<n;++t)i[t]=e[t]*(1-u)+r[t]*u;return i}}function r(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.isNumberArray=r;
},{}],"TYZM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.genericArray=f;var e=u(require("./value.js")),r=n(require("./numberArray.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return((0,r.isNumberArray)(t)?r.default:f)(e,t)}function f(r,t){var n,u=t?t.length:0,o=r?Math.min(u,r.length):0,f=new Array(o),a=new Array(u);for(n=0;n<o;++n)f[n]=(0,e.default)(r[n],t[n]);for(;n<u;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=f[n](e);return a}}
},{"./value.js":"gzcD","./numberArray.js":"BOJ5"}],"jEDF":[function(require,module,exports) {
"use strict";function e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"YNf8":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"iJdZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./value.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u,n={},o={};for(u in null!==t&&"object"==typeof t||(t={}),null!==r&&"object"==typeof r||(r={}),r)u in t?n[u]=(0,e.default)(t[u],r[u]):o[u]=r[u];return function(e){for(u in n)o[u]=n[u](e);return o}}
},{"./value.js":"gzcD"}],"nK0E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=n(require("./number.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t=new RegExp(r.source,"g");function u(e){return function(){return e}}function i(e){return function(n){return e(n)+""}}function l(n,l){var o,c,d,s=r.lastIndex=t.lastIndex=0,f=-1,x=[],a=[];for(n+="",l+="";(o=r.exec(n))&&(c=t.exec(l));)(d=c.index)>s&&(d=l.slice(s,d),x[f]?x[f]+=d:x[++f]=d),(o=o[0])===(c=c[0])?x[f]?x[f]+=c:x[++f]=c:(x[++f]=null,a.push({i:f,x:(0,e.default)(o,c)})),s=t.lastIndex;return s<l.length&&(d=l.slice(s),x[f]?x[f]+=d:x[++f]=d),x.length<2?a[0]?i(a[0].x):u(l):(l=a.length,function(e){for(var n,r=0;r<l;++r)x[(n=a[r]).i]=n.x(e);return x.join("")})}
},{"./number.js":"YNf8"}],"gzcD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("d3-color"),r=c(require("./rgb.js")),t=require("./array.js"),u=c(require("./date.js")),n=c(require("./number.js")),o=c(require("./object.js")),a=c(require("./string.js")),f=c(require("./constant.js")),i=s(require("./numberArray.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(e){return e&&e.__esModule?e:{default:e}}function d(l,s){var c,d=typeof s;return null==s||"boolean"===d?(0,f.default)(s):("number"===d?n.default:"string"===d?(c=(0,e.color)(s))?(s=c,r.default):a.default:s instanceof e.color?r.default:s instanceof Date?u.default:(0,i.isNumberArray)(s)?i.default:Array.isArray(s)?t.genericArray:"function"!=typeof s.valueOf&&"function"!=typeof s.toString||isNaN(s)?o.default:n.default)(l,s)}
},{"d3-color":"Peej","./rgb.js":"rvVK","./array.js":"TYZM","./date.js":"jEDF","./number.js":"YNf8","./object.js":"iJdZ","./string.js":"nK0E","./constant.js":"iOAL","./numberArray.js":"BOJ5"}],"B1w8":[function(require,module,exports) {
"use strict";function t(t){var e=t.length;return function(r){return t[Math.max(0,Math.min(e-1,Math.floor(r*e)))]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ZrPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./color.js");function r(r,t){var o=(0,e.hue)(+r,+t);return function(e){var r=o(e);return r-360*Math.floor(r/360)}}
},{"./color.js":"RhzI"}],"nXvs":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LVjk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=i,exports.parseSvg=l;var e,t,r,n,o=a(require("./decompose.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(n){return"none"===n?o.identity:(e||(e=document.createElement("DIV"),t=document.documentElement,r=document.defaultView),e.style.transform=n,n=r.getComputedStyle(t.appendChild(e),null).getPropertyValue("transform"),t.removeChild(e),n=n.slice(7,-1).split(","),(0,o.default)(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function l(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,o.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}
},{"./decompose.js":"FhXE"}],"v4Xl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var e=r(require("../number.js")),t=require("./parse.js");function r(e){return e&&e.__esModule?e:{default:e}}function s(t,r,s,n){function a(e){return e.length?e.pop()+" ":""}return function(u,l){var o=[],p=[];return u=t(u),l=t(l),function(t,n,a,u,l,o){if(t!==a||n!==u){var p=l.push("translate(",null,r,null,s);o.push({i:p-4,x:(0,e.default)(t,a)},{i:p-2,x:(0,e.default)(n,u)})}else(a||u)&&l.push("translate("+a+r+u+s)}(u.translateX,u.translateY,l.translateX,l.translateY,o,p),function(t,r,s,u){t!==r?(t-r>180?r+=360:r-t>180&&(t+=360),u.push({i:s.push(a(s)+"rotate(",null,n)-2,x:(0,e.default)(t,r)})):r&&s.push(a(s)+"rotate("+r+n)}(u.rotate,l.rotate,o,p),function(t,r,s,u){t!==r?u.push({i:s.push(a(s)+"skewX(",null,n)-2,x:(0,e.default)(t,r)}):r&&s.push(a(s)+"skewX("+r+n)}(u.skewX,l.skewX,o,p),function(t,r,s,n,u,l){if(t!==s||r!==n){var o=u.push(a(u)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,e.default)(t,s)},{i:o-2,x:(0,e.default)(r,n)})}else 1===s&&1===n||u.push(a(u)+"scale("+s+","+n+")")}(u.scaleX,u.scaleY,l.scaleX,l.scaleY,o,p),u=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}var n=s(t.parseCss,"px, ","px)","deg)");exports.interpolateTransformCss=n;var a=s(t.parseSvg,", ",")",")");exports.interpolateTransformSvg=a;
},{"../number.js":"YNf8","./parse.js":"LVjk"}],"LdeI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hsl)(o)).h,(n=(0,e.hsl)(n)).h),a=(0,t.default)(o.s,n.s),f=(0,t.default)(o.l,n.l),l=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.s=a(e),o.l=f(e),o.opacity=l(e),o+""}}}var u=n(t.hue);exports.default=u;var a=n(t.default);exports.hslLong=a;
},{"d3-color":"Peej","./color.js":"RhzI"}],"rghB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-color"),t=r(require("./color.js"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){var a=(0,t.default)((r=(0,e.lab)(r)).l,(u=(0,e.lab)(u)).l),l=(0,t.default)(r.a,u.a),o=(0,t.default)(r.b,u.b),c=(0,t.default)(r.opacity,u.opacity);return function(e){return r.l=a(e),r.a=l(e),r.b=o(e),r.opacity=c(e),r+""}}
},{"d3-color":"Peej","./color.js":"RhzI"}],"dxPN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=n?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hcl)(o)).h,(n=(0,e.hcl)(n)).h),c=(0,t.default)(o.c,n.c),a=(0,t.default)(o.l,n.l),f=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.c=c(e),o.l=a(e),o.opacity=f(e),o+""}}}var u=n(t.hue);exports.default=u;var c=n(t.default);exports.hclLong=c;
},{"d3-color":"Peej","./color.js":"RhzI"}],"X3VV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=exports.default=void 0;var e=require("d3-color"),t=n(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(r){return function n(o){function u(n,u){var a=r((n=(0,e.cubehelix)(n)).h,(u=(0,e.cubehelix)(u)).h),i=(0,t.default)(n.s,u.s),c=(0,t.default)(n.l,u.l),f=(0,t.default)(n.opacity,u.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=c(Math.pow(e,o)),n.opacity=f(e),n+""}}return o=+o,u.gamma=n,u}(1)}var u=o(t.hue);exports.default=u;var a=o(t.default);exports.cubehelixLong=a;
},{"d3-color":"Peej","./color.js":"RhzI"}],"xtkP":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,n=r.length-1,a=r[0],o=new Array(n<0?0:n);t<n;)o[t]=e(a,a=r[++t]);return function(e){var r=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[r](e-r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"k9aH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"interpolateDiscrete",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"interpolateHue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"interpolateNumberArray",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return c.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return c.interpolateTransformSvg}}),Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return d.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return d.rgbBasisClosed}}),Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return j.hslLong}}),Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return y.hclLong}}),Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return m.cubehelixLong}}),Object.defineProperty(exports,"piecewise",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return x.default}});var e=h(require("./value.js")),r=h(require("./array.js")),t=h(require("./basis.js")),n=h(require("./basisClosed.js")),u=h(require("./date.js")),o=h(require("./discrete.js")),i=h(require("./hue.js")),a=h(require("./number.js")),l=h(require("./numberArray.js")),f=h(require("./object.js")),p=h(require("./round.js")),s=h(require("./string.js")),c=require("./transform/index.js"),b=h(require("./zoom.js")),d=q(require("./rgb.js")),j=q(require("./hsl.js")),g=h(require("./lab.js")),y=q(require("./hcl.js")),m=q(require("./cubehelix.js")),O=h(require("./piecewise.js")),x=h(require("./quantize.js"));function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function q(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(t,u,o):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function h(e){return e&&e.__esModule?e:{default:e}}
},{"./value.js":"gzcD","./array.js":"TYZM","./basis.js":"MdBW","./basisClosed.js":"hnXz","./date.js":"jEDF","./discrete.js":"B1w8","./hue.js":"ZrPS","./number.js":"YNf8","./numberArray.js":"BOJ5","./object.js":"iJdZ","./round.js":"nXvs","./string.js":"nK0E","./transform/index.js":"v4Xl","./zoom.js":"Mg8l","./rgb.js":"rvVK","./hsl.js":"LdeI","./lab.js":"rghB","./hcl.js":"dxPN","./cubehelix.js":"X3VV","./piecewise.js":"xtkP","./quantize.js":"ENbV"}],"FNaI":[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"CjJ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=i,exports.copy=s,exports.transformer=p,exports.default=m;var n=require("d3-array"),r=require("d3-interpolate"),e=u(require("./constant.js")),t=u(require("./number.js"));function u(n){return n&&n.__esModule?n:{default:n}}var o=[0,1];function i(n){return n}function a(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:(0,e.default)(isNaN(r)?NaN:.5)}function c(n,r){var e;return n>r&&(e=n,n=r,r=e),function(e){return Math.max(n,Math.min(r,e))}}function f(n,r,e){var t=n[0],u=n[1],o=r[0],i=r[1];return u<t?(t=a(u,t),o=e(i,o)):(t=a(t,u),o=e(o,i)),function(n){return o(t(n))}}function l(r,e,t){var u=Math.min(r.length,e.length)-1,o=new Array(u),i=new Array(u),c=-1;for(r[u]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++c<u;)o[c]=a(r[c],r[c+1]),i[c]=t(e[c],e[c+1]);return function(e){var t=(0,n.bisect)(r,e,1,u)-1;return i[t](o[t](e))}}function s(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function p(){var n,e,u,a,s,p,m=o,d=o,g=r.interpolate,h=i;function v(){var n=Math.min(m.length,d.length);return h!==i&&(h=c(m[0],m[n-1])),a=n>2?l:f,s=p=null,y}function y(r){return isNaN(r=+r)?u:(s||(s=a(m.map(n),d,g)))(n(h(r)))}return y.invert=function(t){return h(e((p||(p=a(d,m.map(n),r.interpolateNumber)))(t)))},y.domain=function(n){return arguments.length?(m=Array.from(n,t.default),v()):m.slice()},y.range=function(n){return arguments.length?(d=Array.from(n),v()):d.slice()},y.rangeRound=function(n){return d=Array.from(n),g=r.interpolateRound,v()},y.clamp=function(n){return arguments.length?(h=!!n||i,v()):h!==i},y.interpolate=function(n){return arguments.length?(g=n,v()):g},y.unknown=function(n){return arguments.length?(u=n,y):u},function(r,t){return n=r,e=t,v()}}function m(){return p()(i,i)}
},{"d3-array":"K0bd","d3-interpolate":"k9aH","./constant.js":"iOAL","./number.js":"FNaI"}],"GAUC":[function(require,module,exports) {
"use strict";function e(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"tXBB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./formatDecimal.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return(t=(0,e.default)(Math.abs(t)))?t[1]:NaN}
},{"./formatDecimal.js":"GAUC"}],"rbAM":[function(require,module,exports) {
"use strict";function e(e,t){return function(r,n){for(var u=r.length,s=[],o=0,i=e[0],a=0;u>0&&i>0&&(a+i+1>n&&(i=Math.max(1,n-a)),s.push(r.substring(u-=i,u+i)),!((a+=i+1)>n));)i=e[o=(o+1)%e.length];return s.reverse().join(t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"hTcF":[function(require,module,exports) {
"use strict";function e(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"aibL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.FormatSpecifier=o;var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function t(t){if(!(s=i.exec(t)))throw new Error("invalid format: "+t);var s;return new o({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}function o(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}t.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};
},{}],"SUnU":[function(require,module,exports) {
"use strict";function e(e){e:for(var r,t=e.length,s=1,a=-1;s<t;++s)switch(e[s]){case".":a=r=s;break;case"0":0===a&&(a=s),r=s;break;default:if(!+e[s])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(r+1):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fBpa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.prefixExponent=void 0;var e,r=t(require("./formatDecimal.js"));function t(e){return e&&e.__esModule?e:{default:e}}function n(t,n){var o=(0,r.default)(t,n);if(!o)return t+"";var a=o[0],i=o[1],u=i-(exports.prefixExponent=e=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,f=a.length;return u===f?a:u>f?a+new Array(u-f+1).join("0"):u>0?a.slice(0,u)+"."+a.slice(u):"0."+new Array(1-u).join("0")+(0,r.default)(t,Math.max(0,n+u-1))[0]}exports.prefixExponent=e;
},{"./formatDecimal.js":"GAUC"}],"UDrw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./formatDecimal.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){var n=(0,e.default)(r,t);if(!n)return r+"";var u=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+u:u.length>a+1?u.slice(0,a+1)+"."+u.slice(a+1):u+new Array(a-u.length+2).join("0")}
},{"./formatDecimal.js":"GAUC"}],"Wavi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./formatPrefixAuto.js")),r=n(require("./formatRounded.js"));function n(t){return t&&t.__esModule?t:{default:t}}var e={"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return(0,r.default)(100*t,n)},r:r.default,s:t.default,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};exports.default=e;
},{"./formatPrefixAuto.js":"fBpa","./formatRounded.js":"UDrw"}],"IVmM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=s(require("./exponent.js")),r=s(require("./formatGroup.js")),t=s(require("./formatNumerals.js")),a=s(require("./formatSpecifier.js")),i=s(require("./formatTrim.js")),n=s(require("./formatTypes.js")),o=require("./formatPrefixAuto.js"),u=s(require("./identity.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=Array.prototype.map,f=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function c(s){var c=void 0===s.grouping||void 0===s.thousands?u.default:(0,r.default)(l.call(s.grouping,Number),s.thousands+""),d=void 0===s.currency?"":s.currency[0]+"",m=void 0===s.currency?"":s.currency[1]+"",p=void 0===s.decimal?".":s.decimal+"",h=void 0===s.numerals?u.default:(0,t.default)(l.call(s.numerals,String)),v=void 0===s.percent?"%":s.percent+"",g=void 0===s.minus?"-":s.minus+"",y=void 0===s.nan?"NaN":s.nan+"";function M(e){var r=(e=(0,a.default)(e)).fill,t=e.align,u=e.sign,s=e.symbol,l=e.zero,M=e.width,x=e.comma,j=e.precision,b=e.trim,q=e.type;"n"===q?(x=!0,q="g"):n.default[q]||(void 0===j&&(j=12),b=!0,q="g"),(l||"0"===r&&"="===t)&&(l=!0,r="0",t="=");var N="$"===s?d:"#"===s&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",k="$"===s?m:/[%p]/.test(q)?v:"",w=n.default[q],A=/[defgprs%]/.test(q);function P(e){var a,n,s,d=N,m=k;if("c"===q)m=w(e)+m,e="";else{var v=(e=+e)<0;if(e=isNaN(e)?y:w(Math.abs(e),j),b&&(e=(0,i.default)(e)),v&&0==+e&&(v=!1),d=(v?"("===u?u:g:"-"===u||"("===u?"":u)+d,m=("s"===q?f[8+o.prefixExponent/3]:"")+m+(v&&"("===u?")":""),A)for(a=-1,n=e.length;++a<n;)if(48>(s=e.charCodeAt(a))||s>57){m=(46===s?p+e.slice(a+1):e.slice(a))+m,e=e.slice(0,a);break}}x&&!l&&(e=c(e,1/0));var P=d.length+e.length+m.length,_=P<M?new Array(M-P+1).join(r):"";switch(x&&l&&(e=c(_+e,_.length?M-m.length:1/0),_=""),t){case"<":e=d+e+m+_;break;case"=":e=d+_+e+m;break;case"^":e=_.slice(0,P=_.length>>1)+d+e+m+_.slice(P);break;default:e=_+d+e+m}return h(e)}return j=void 0===j?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j)),P.toString=function(){return e+""},P}return{format:M,formatPrefix:function(r,t){var i=M(((r=(0,a.default)(r)).type="f",r)),n=3*Math.max(-8,Math.min(8,Math.floor((0,e.default)(t)/3))),o=Math.pow(10,-n),u=f[8+n/3];return function(e){return i(o*e)+u}}}}
},{"./exponent.js":"tXBB","./formatGroup.js":"rbAM","./formatNumerals.js":"hTcF","./formatSpecifier.js":"aibL","./formatTrim.js":"SUnU","./formatTypes.js":"Wavi","./formatPrefixAuto.js":"fBpa","./identity.js":"NNW9"}],"KaMm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.formatPrefix=exports.format=void 0;var r,e,t,o=f(require("./locale.js"));function f(r){return r&&r.__esModule?r:{default:r}}function a(f){return r=(0,o.default)(f),exports.format=e=r.format,exports.formatPrefix=t=r.formatPrefix,r}exports.format=e,exports.formatPrefix=t,a({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});
},{"./locale.js":"IVmM"}],"EyKk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return Math.max(0,-(0,e.default)(Math.abs(t)))}
},{"./exponent.js":"tXBB"}],"VPkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,e.default)(a)/3)))-(0,e.default)(Math.abs(t)))}
},{"./exponent.js":"tXBB"}],"DMyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("./exponent.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return t=Math.abs(t),u=Math.abs(u)-t,Math.max(0,(0,e.default)(u)-(0,e.default)(t))+1}
},{"./exponent.js":"tXBB"}],"VuZR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"formatDefaultLocale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"format",{enumerable:!0,get:function(){return e.format}}),Object.defineProperty(exports,"formatPrefix",{enumerable:!0,get:function(){return e.formatPrefix}}),Object.defineProperty(exports,"formatLocale",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"formatSpecifier",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"FormatSpecifier",{enumerable:!0,get:function(){return t.FormatSpecifier}}),Object.defineProperty(exports,"precisionFixed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"precisionPrefix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"precisionRound",{enumerable:!0,get:function(){return i.default}});var e=c(require("./defaultLocale.js")),r=u(require("./locale.js")),t=c(require("./formatSpecifier.js")),n=u(require("./precisionFixed.js")),o=u(require("./precisionPrefix.js")),i=u(require("./precisionRound.js"));function u(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./defaultLocale.js":"KaMm","./locale.js":"IVmM","./formatSpecifier.js":"aibL","./precisionFixed.js":"EyKk","./precisionPrefix.js":"VPkn","./precisionRound.js":"DMyZ"}],"qjRa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("d3-array"),r=require("d3-format");function a(a,i,s,t){var c,n=(0,e.tickStep)(a,i,s);switch((t=(0,r.formatSpecifier)(null==t?",f":t)).type){case"s":var o=Math.max(Math.abs(a),Math.abs(i));return null!=t.precision||isNaN(c=(0,r.precisionPrefix)(n,o))||(t.precision=c),(0,r.formatPrefix)(t,o);case"":case"e":case"g":case"p":case"r":null!=t.precision||isNaN(c=(0,r.precisionRound)(n,Math.max(Math.abs(a),Math.abs(i))))||(t.precision=c-("e"===t.type));break;case"f":case"%":null!=t.precision||isNaN(c=(0,r.precisionFixed)(n))||(t.precision=c-2*("%"===t.type))}return(0,r.format)(t)}
},{"d3-array":"K0bd","d3-format":"VuZR"}],"LIJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearish=a,exports.default=c;var e=require("d3-array"),t=o(require("./continuous.js")),r=require("./init.js"),n=u(require("./tickFormat.js"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function a(t){var r=t.domain;return t.ticks=function(t){var n=r();return(0,e.ticks)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(e,t){var u=r();return(0,n.default)(u[0],u[u.length-1],null==e?10:e,t)},t.nice=function(n){null==n&&(n=10);var u,i=r(),o=0,a=i.length-1,c=i[o],l=i[a];return l<c&&(u=c,c=l,l=u,u=o,o=a,a=u),(u=(0,e.tickIncrement)(c,l,n))>0?(c=Math.floor(c/u)*u,l=Math.ceil(l/u)*u,u=(0,e.tickIncrement)(c,l,n)):u<0&&(c=Math.ceil(c*u)/u,l=Math.floor(l*u)/u,u=(0,e.tickIncrement)(c,l,n)),u>0?(i[o]=Math.floor(c/u)*u,i[a]=Math.ceil(l/u)*u,r(i)):u<0&&(i[o]=Math.ceil(c*u)/u,i[a]=Math.floor(l*u)/u,r(i)),t},t}function c(){var e=(0,t.default)();return e.copy=function(){return(0,t.copy)(e,c())},r.initRange.apply(e,arguments),a(e)}
},{"d3-array":"K0bd","./continuous.js":"CjJ5","./init.js":"buZa","./tickFormat.js":"qjRa"}],"FKHe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./linear.js"),n=r(require("./number.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var u;function i(e){return isNaN(e=+e)?u:e}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(r=Array.from(e,n.default),i):r.slice()},i.unknown=function(e){return arguments.length?(u=e,i):u},i.copy=function(){return t(r).unknown(u)},r=arguments.length?Array.from(r,n.default):[0,1],(0,e.linearish)(i)}
},{"./linear.js":"LIJk","./number.js":"FNaI"}],"eMTM":[function(require,module,exports) {
"use strict";function e(e,t){var r,l=0,o=(e=e.slice()).length-1,s=e[l],u=e[o];return u<s&&(r=l,l=o,o=r,r=s,s=u,u=r),e[l]=t.floor(s),e[o]=t.ceil(u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ea59":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loggish=p,exports.default=g;var t=require("d3-array"),n=require("d3-format"),r=o(require("./nice.js")),e=require("./continuous.js"),u=require("./init.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return Math.log(t)}function a(t){return Math.exp(t)}function f(t){return-Math.log(-t)}function c(t){return-Math.exp(-t)}function l(t){return isFinite(t)?+("1e"+t):t<0?0:t}function h(t){return 10===t?l:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function s(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function M(t){return function(n){return-t(-n)}}function p(e){var u,o,l=e(i,a),p=l.domain,g=10;function d(){return u=s(g),o=h(g),p()[0]<0?(u=M(u),o=M(o),e(f,c)):e(i,a),l}return l.base=function(t){return arguments.length?(g=+t,d()):g},l.domain=function(t){return arguments.length?(p(t),d()):p()},l.ticks=function(n){var r,e=p(),i=e[0],a=e[e.length-1];(r=a<i)&&(h=i,i=a,a=h);var f,c,l,h=u(i),s=u(a),M=null==n?10:+n,d=[];if(!(g%1)&&s-h<M){if(h=Math.floor(h),s=Math.ceil(s),i>0){for(;h<=s;++h)for(c=1,f=o(h);c<g;++c)if(!((l=f*c)<i)){if(l>a)break;d.push(l)}}else for(;h<=s;++h)for(c=g-1,f=o(h);c>=1;--c)if(!((l=f*c)<i)){if(l>a)break;d.push(l)}2*d.length<M&&(d=(0,t.ticks)(i,a,M))}else d=(0,t.ticks)(h,s,Math.min(s-h,M)).map(o);return r?d.reverse():d},l.tickFormat=function(t,r){if(null==r&&(r=10===g?".0e":","),"function"!=typeof r&&(r=(0,n.format)(r)),t===1/0)return r;null==t&&(t=10);var e=Math.max(1,g*t/l.ticks().length);return function(t){var n=t/o(Math.round(u(t)));return n*g<g-.5&&(n*=g),n<=e?r(t):""}},l.nice=function(){return p((0,r.default)(p(),{floor:function(t){return o(Math.floor(u(t)))},ceil:function(t){return o(Math.ceil(u(t)))}}))},l}function g(){var t=p((0,e.transformer)()).domain([1,10]);return t.copy=function(){return(0,e.copy)(t,g()).base(t.base())},u.initRange.apply(t,arguments),t}
},{"d3-array":"K0bd","d3-format":"VuZR","./nice.js":"eMTM","./continuous.js":"CjJ5","./init.js":"buZa"}],"nanU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.symlogish=i,exports.default=o;var n=require("./linear.js"),t=require("./continuous.js"),r=require("./init.js");function e(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function u(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function i(t){var r=1,i=t(e(r),u(r));return i.constant=function(n){return arguments.length?t(e(r=+n),u(r)):r},(0,n.linearish)(i)}function o(){var n=i((0,t.transformer)());return n.copy=function(){return(0,t.copy)(n,o()).constant(n.constant())},r.initRange.apply(n,arguments)}
},{"./linear.js":"LIJk","./continuous.js":"CjJ5","./init.js":"buZa"}],"xeRN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powish=o,exports.default=p,exports.sqrt=s;var t=require("./linear.js"),n=require("./continuous.js"),e=require("./init.js");function r(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function i(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function u(t){return t<0?-t*t:t*t}function o(e){var o=e(n.identity,n.identity),p=1;return o.exponent=function(t){return arguments.length?1===(p=+t)?e(n.identity,n.identity):.5===p?e(i,u):e(r(p),r(1/p)):p},(0,t.linearish)(o)}function p(){var t=o((0,n.transformer)());return t.copy=function(){return(0,n.copy)(t,p()).exponent(t.exponent())},e.initRange.apply(t,arguments),t}function s(){return p.apply(null,arguments).exponent(.5)}
},{"./linear.js":"LIJk","./continuous.js":"CjJ5","./init.js":"buZa"}],"mhod":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var n=u(require("./continuous.js")),r=require("./init.js"),e=require("./linear.js"),t=u(require("./number.js"));function u(n){return n&&n.__esModule?n:{default:n}}function i(n){return Math.sign(n)*n*n}function a(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function o(){var u,c=(0,n.default)(),l=[0,1],f=!1;function s(n){var r=a(c(n));return isNaN(r)?u:f?Math.round(r):r}return s.invert=function(n){return c.invert(i(n))},s.domain=function(n){return arguments.length?(c.domain(n),s):c.domain()},s.range=function(n){return arguments.length?(c.range((l=Array.from(n,t.default)).map(i)),s):l.slice()},s.rangeRound=function(n){return s.range(n).round(!0)},s.round=function(n){return arguments.length?(f=!!n,s):f},s.clamp=function(n){return arguments.length?(c.clamp(n),s):c.clamp()},s.unknown=function(n){return arguments.length?(u=n,s):u},s.copy=function(){return o(c.domain(),l).round(f).clamp(c.clamp()).unknown(u)},r.initRange.apply(s,arguments),(0,e.linearish)(s)}
},{"./continuous.js":"CjJ5","./init.js":"buZa","./linear.js":"LIJk","./number.js":"FNaI"}],"AGCd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("d3-array"),e=require("./init.js");function r(){var t,i=[],u=[],a=[];function o(){var e=0,r=Math.max(1,u.length);for(a=new Array(r-1);++e<r;)a[e-1]=(0,n.quantile)(i,e/r);return l}function l(e){return isNaN(e=+e)?t:u[(0,n.bisect)(a,e)]}return l.invertExtent=function(n){var e=u.indexOf(n);return e<0?[NaN,NaN]:[e>0?a[e-1]:i[0],e<a.length?a[e]:i[i.length-1]]},l.domain=function(e){if(!arguments.length)return i.slice();i=[];for(let n of e)null==n||isNaN(n=+n)||i.push(n);return i.sort(n.ascending),o()},l.range=function(n){return arguments.length?(u=Array.from(n),o()):u.slice()},l.unknown=function(n){return arguments.length?(t=n,l):t},l.quantiles=function(){return a.slice()},l.copy=function(){return r().domain(i).range(u).unknown(t)},e.initRange.apply(l,arguments)}
},{"d3-array":"K0bd","./init.js":"buZa"}],"d6Xk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var n=require("d3-array"),r=require("./linear.js"),e=require("./init.js");function t(){var i,u=0,o=1,a=1,c=[.5],f=[0,1];function l(r){return r<=r?f[(0,n.bisect)(c,r,0,a)]:i}function s(){var n=-1;for(c=new Array(a);++n<a;)c[n]=((n+1)*o-(n-a)*u)/(a+1);return l}return l.domain=function(n){return arguments.length?([u,o]=n,u=+u,o=+o,s()):[u,o]},l.range=function(n){return arguments.length?(a=(f=Array.from(n)).length-1,s()):f.slice()},l.invertExtent=function(n){var r=f.indexOf(n);return r<0?[NaN,NaN]:r<1?[u,c[0]]:r>=a?[c[a-1],o]:[c[r-1],c[r]]},l.unknown=function(n){return arguments.length?(i=n,l):l},l.thresholds=function(){return c.slice()},l.copy=function(){return t().domain([u,o]).range(f).unknown(i)},e.initRange.apply((0,r.linearish)(l),arguments)}
},{"d3-array":"K0bd","./linear.js":"LIJk","./init.js":"buZa"}],"I63C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var n=require("d3-array"),e=require("./init.js");function r(){var t,i=[.5],u=[0,1],o=1;function a(e){return e<=e?u[(0,n.bisect)(i,e,0,o)]:t}return a.domain=function(n){return arguments.length?(i=Array.from(n),o=Math.min(i.length,u.length-1),a):i.slice()},a.range=function(n){return arguments.length?(u=Array.from(n),o=Math.min(i.length,u.length-1),a):u.slice()},a.invertExtent=function(n){var e=u.indexOf(n);return[i[e-1],i[e]]},a.unknown=function(n){return arguments.length?(t=n,a):t},a.copy=function(){return r().domain(i).range(u).unknown(t)},e.initRange.apply(a,arguments)}
},{"d3-array":"K0bd","./init.js":"buZa"}],"QFUQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=new Date,n=new Date;function t(r,o,u,f){function i(e){return r(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return r(e=new Date(+e)),e},i.ceil=function(e){return r(e=new Date(e-1)),o(e,1),r(e),e},i.round=function(e){var n=i(e),t=i.ceil(e);return e-n<t-e?n:t},i.offset=function(e,n){return o(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(e,n,t){var u,f=[];if(e=i.ceil(e),t=null==t?1:Math.floor(t),!(e<n&&t>0))return f;do{f.push(u=new Date(+e)),o(e,t),r(e)}while(u<e&&e<n);return f},i.filter=function(e){return t(function(n){if(n>=n)for(;r(n),!e(n);)n.setTime(n-1)},function(n,t){if(n>=n)if(t<0)for(;++t<=0;)for(;o(n,-1),!e(n););else for(;--t>=0;)for(;o(n,1),!e(n););})},u&&(i.count=function(t,o){return e.setTime(+t),n.setTime(+o),r(e),r(n),Math.floor(u(e,n))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(f?function(n){return f(n)%e==0}:function(n){return i.count(0,n)%e==0}):i:null}),i}
},{}],"WVmH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.milliseconds=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var n=(0,e.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});n.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?(0,e.default)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):n:null};var r=n;exports.default=r;var i=n.range;exports.milliseconds=i;
},{"./interval.js":"QFUQ"}],"Vnta":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.durationWeek=exports.durationDay=exports.durationHour=exports.durationMinute=exports.durationSecond=void 0;var e=1e3;exports.durationSecond=e;var r=6e4;exports.durationMinute=r;var o=36e5;exports.durationHour=o;var t=864e5;exports.durationDay=t;var a=6048e5;exports.durationWeek=a;
},{}],"AYLw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seconds=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var n=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,r){e.setTime(+e+r*t.durationSecond)},function(e,r){return(r-e)/t.durationSecond},function(e){return e.getUTCSeconds()}),o=n;exports.default=o;var u=n.range;exports.seconds=u;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"etD9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minutes=exports.default=void 0;var e=n(require("./interval.js")),t=require("./duration.js");function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*t.durationSecond)},function(e,n){e.setTime(+e+n*t.durationMinute)},function(e,n){return(n-e)/t.durationMinute},function(e){return e.getMinutes()}),u=r;exports.default=u;var i=r.range;exports.minutes=i;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"py4n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hours=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*t.durationSecond-e.getMinutes()*t.durationMinute)},function(e,r){e.setTime(+e+r*t.durationHour)},function(e,r){return(r-e)/t.durationHour},function(e){return e.getHours()}),o=u;exports.default=o;var n=u.range;exports.hours=n;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"LWrz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.days=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*t.durationMinute)/t.durationDay},function(e){return e.getDate()-1}),n=u;exports.default=n;var o=u.range;exports.days=o;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"Dweu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.saturdays=exports.fridays=exports.thursdays=exports.wednesdays=exports.tuesdays=exports.mondays=exports.sundays=exports.saturday=exports.friday=exports.thursday=exports.wednesday=exports.tuesday=exports.monday=exports.sunday=void 0;var e=s(require("./interval.js")),r=require("./duration.js");function s(e){return e&&e.__esModule?e:{default:e}}function t(s){return(0,e.default)(function(e){e.setDate(e.getDate()-(e.getDay()+7-s)%7),e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+7*r)},function(e,s){return(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*r.durationMinute)/r.durationWeek})}var a=t(0);exports.sunday=a;var o=t(1);exports.monday=o;var d=t(2);exports.tuesday=d;var n=t(3);exports.wednesday=n;var u=t(4);exports.thursday=u;var p=t(5);exports.friday=p;var y=t(6);exports.saturday=y;var x=a.range;exports.sundays=x;var i=o.range;exports.mondays=i;var v=d.range;exports.tuesdays=v;var f=n.range;exports.wednesdays=f;var g=u.range;exports.thursdays=g;var c=p.range;exports.fridays=c;var l=y.range;exports.saturdays=l;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"gOAO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.months=exports.default=void 0;var t=e(require("./interval.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=(0,t.default)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),n=r;exports.default=n;var o=r.range;exports.months=o;
},{"./interval.js":"QFUQ"}],"kReM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.years=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,e.default)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r*t)}):null};var u=r;exports.default=u;var l=r.range;exports.years=l;
},{"./interval.js":"QFUQ"}],"O6lW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMinutes=exports.default=void 0;var e=u(require("./interval.js")),t=require("./duration.js");function u(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setUTCSeconds(0,0)},function(e,u){e.setTime(+e+u*t.durationMinute)},function(e,u){return(u-e)/t.durationMinute},function(e){return e.getUTCMinutes()}),n=r;exports.default=n;var i=r.range;exports.utcMinutes=i;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"qnVA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcHours=exports.default=void 0;var e=t(require("./interval.js")),r=require("./duration.js");function t(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*r.durationHour)},function(e,t){return(t-e)/r.durationHour},function(e){return e.getUTCHours()}),o=u;exports.default=o;var n=u.range;exports.utcHours=n;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"HXiV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcDays=exports.default=void 0;var e=r(require("./interval.js")),t=require("./duration.js");function r(e){return e&&e.__esModule?e:{default:e}}var u=(0,e.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,r){return(r-e)/t.durationDay},function(e){return e.getUTCDate()-1}),a=u;exports.default=a;var n=u.range;exports.utcDays=n;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"CRXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcSaturdays=exports.utcFridays=exports.utcThursdays=exports.utcWednesdays=exports.utcTuesdays=exports.utcMondays=exports.utcSundays=exports.utcSaturday=exports.utcFriday=exports.utcThursday=exports.utcWednesday=exports.utcTuesday=exports.utcMonday=exports.utcSunday=void 0;var t=r(require("./interval.js")),e=require("./duration.js");function r(t){return t&&t.__esModule?t:{default:t}}function a(r){return(0,t.default)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-r)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,r){return(r-t)/e.durationWeek})}var s=a(0);exports.utcSunday=s;var u=a(1);exports.utcMonday=u;var o=a(2);exports.utcTuesday=o;var d=a(3);exports.utcWednesday=d;var n=a(4);exports.utcThursday=n;var c=a(5);exports.utcFriday=c;var p=a(6);exports.utcSaturday=p;var y=s.range;exports.utcSundays=y;var x=u.range;exports.utcMondays=x;var v=o.range;exports.utcTuesdays=v;var i=d.range;exports.utcWednesdays=i;var T=n.range;exports.utcThursdays=T;var g=c.range;exports.utcFridays=g;var f=p.range;exports.utcSaturdays=f;
},{"./interval.js":"QFUQ","./duration.js":"Vnta"}],"EphR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcMonths=exports.default=void 0;var t=e(require("./interval.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=(0,t.default)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),n=r;exports.default=n;var o=r.range;exports.utcMonths=o;
},{"./interval.js":"QFUQ"}],"Abfv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.utcYears=exports.default=void 0;var e=t(require("./interval.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?(0,e.default)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)}):null};var u=r;exports.default=u;var l=r.range;exports.utcYears=l;
},{"./interval.js":"QFUQ"}],"hQYG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"timeInterval",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"timeMillisecond",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"timeMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}}),Object.defineProperty(exports,"utcMillisecond",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"utcMilliseconds",{enumerable:!0,get:function(){return t.milliseconds}}),Object.defineProperty(exports,"timeSecond",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"timeSeconds",{enumerable:!0,get:function(){return r.seconds}}),Object.defineProperty(exports,"utcSecond",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"utcSeconds",{enumerable:!0,get:function(){return r.seconds}}),Object.defineProperty(exports,"timeMinute",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"timeMinutes",{enumerable:!0,get:function(){return n.minutes}}),Object.defineProperty(exports,"timeHour",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"timeHours",{enumerable:!0,get:function(){return u.hours}}),Object.defineProperty(exports,"timeDay",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"timeDays",{enumerable:!0,get:function(){return o.days}}),Object.defineProperty(exports,"timeWeek",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeWeeks",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeSunday",{enumerable:!0,get:function(){return i.sunday}}),Object.defineProperty(exports,"timeSundays",{enumerable:!0,get:function(){return i.sundays}}),Object.defineProperty(exports,"timeMonday",{enumerable:!0,get:function(){return i.monday}}),Object.defineProperty(exports,"timeMondays",{enumerable:!0,get:function(){return i.mondays}}),Object.defineProperty(exports,"timeTuesday",{enumerable:!0,get:function(){return i.tuesday}}),Object.defineProperty(exports,"timeTuesdays",{enumerable:!0,get:function(){return i.tuesdays}}),Object.defineProperty(exports,"timeWednesday",{enumerable:!0,get:function(){return i.wednesday}}),Object.defineProperty(exports,"timeWednesdays",{enumerable:!0,get:function(){return i.wednesdays}}),Object.defineProperty(exports,"timeThursday",{enumerable:!0,get:function(){return i.thursday}}),Object.defineProperty(exports,"timeThursdays",{enumerable:!0,get:function(){return i.thursdays}}),Object.defineProperty(exports,"timeFriday",{enumerable:!0,get:function(){return i.friday}}),Object.defineProperty(exports,"timeFridays",{enumerable:!0,get:function(){return i.fridays}}),Object.defineProperty(exports,"timeSaturday",{enumerable:!0,get:function(){return i.saturday}}),Object.defineProperty(exports,"timeSaturdays",{enumerable:!0,get:function(){return i.saturdays}}),Object.defineProperty(exports,"timeMonth",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"timeMonths",{enumerable:!0,get:function(){return c.months}}),Object.defineProperty(exports,"timeYear",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"timeYears",{enumerable:!0,get:function(){return s.years}}),Object.defineProperty(exports,"utcMinute",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"utcMinutes",{enumerable:!0,get:function(){return a.utcMinutes}}),Object.defineProperty(exports,"utcHour",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"utcHours",{enumerable:!0,get:function(){return d.utcHours}}),Object.defineProperty(exports,"utcDay",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"utcDays",{enumerable:!0,get:function(){return f.utcDays}}),Object.defineProperty(exports,"utcWeek",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcWeeks",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcSunday",{enumerable:!0,get:function(){return y.utcSunday}}),Object.defineProperty(exports,"utcSundays",{enumerable:!0,get:function(){return y.utcSundays}}),Object.defineProperty(exports,"utcMonday",{enumerable:!0,get:function(){return y.utcMonday}}),Object.defineProperty(exports,"utcMondays",{enumerable:!0,get:function(){return y.utcMondays}}),Object.defineProperty(exports,"utcTuesday",{enumerable:!0,get:function(){return y.utcTuesday}}),Object.defineProperty(exports,"utcTuesdays",{enumerable:!0,get:function(){return y.utcTuesdays}}),Object.defineProperty(exports,"utcWednesday",{enumerable:!0,get:function(){return y.utcWednesday}}),Object.defineProperty(exports,"utcWednesdays",{enumerable:!0,get:function(){return y.utcWednesdays}}),Object.defineProperty(exports,"utcThursday",{enumerable:!0,get:function(){return y.utcThursday}}),Object.defineProperty(exports,"utcThursdays",{enumerable:!0,get:function(){return y.utcThursdays}}),Object.defineProperty(exports,"utcFriday",{enumerable:!0,get:function(){return y.utcFriday}}),Object.defineProperty(exports,"utcFridays",{enumerable:!0,get:function(){return y.utcFridays}}),Object.defineProperty(exports,"utcSaturday",{enumerable:!0,get:function(){return y.utcSaturday}}),Object.defineProperty(exports,"utcSaturdays",{enumerable:!0,get:function(){return y.utcSaturdays}}),Object.defineProperty(exports,"utcMonth",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"utcMonths",{enumerable:!0,get:function(){return p.utcMonths}}),Object.defineProperty(exports,"utcYear",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"utcYears",{enumerable:!0,get:function(){return b.utcYears}});var e=j(require("./interval.js")),t=m(require("./millisecond.js")),r=m(require("./second.js")),n=m(require("./minute.js")),u=m(require("./hour.js")),o=m(require("./day.js")),i=require("./week.js"),c=m(require("./month.js")),s=m(require("./year.js")),a=m(require("./utcMinute.js")),d=m(require("./utcHour.js")),f=m(require("./utcDay.js")),y=require("./utcWeek.js"),p=m(require("./utcMonth.js")),b=m(require("./utcYear.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function j(e){return e&&e.__esModule?e:{default:e}}
},{"./interval.js":"QFUQ","./millisecond.js":"WVmH","./second.js":"AYLw","./minute.js":"etD9","./hour.js":"py4n","./day.js":"LWrz","./week.js":"Dweu","./month.js":"gOAO","./year.js":"kReM","./utcMinute.js":"O6lW","./utcHour.js":"qnVA","./utcDay.js":"HXiV","./utcWeek.js":"CRXo","./utcMonth.js":"EphR","./utcYear.js":"Abfv"}],"UbHU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var n=require("d3-time");function t(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function e(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function r(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function u(u){var i=u.dateTime,o=u.date,a=u.time,f=u.periods,l=u.days,mn=u.shortDays,Cn=u.months,Dn=u.shortMonths,Tn=g(f),Mn=s(f),xn=g(l),Un=s(l),wn=g(mn),Yn=s(mn),Hn=g(Cn),Ln=s(Cn),pn=g(Dn),Sn=s(Dn),Zn={a:function(n){return mn[n.getDay()]},A:function(n){return l[n.getDay()]},b:function(n){return Dn[n.getMonth()]},B:function(n){return Cn[n.getMonth()]},c:null,d:V,e:V,f:X,H:W,I:j,j:q,L:Q,m:b,M:B,p:function(n){return f[+(n.getHours()>=12)]},q:function(n){return 1+~~(n.getMonth()/3)},Q:dn,s:vn,S:I,u:_,U:O,V:P,w:$,W:z,x:null,X:null,y:E,Y:R,Z:k,"%":yn},An={a:function(n){return mn[n.getUTCDay()]},A:function(n){return l[n.getUTCDay()]},b:function(n){return Dn[n.getUTCMonth()]},B:function(n){return Cn[n.getUTCMonth()]},c:null,d:G,e:G,f:tn,H:J,I:K,j:N,L:nn,m:en,M:rn,p:function(n){return f[+(n.getUTCHours()>=12)]},q:function(n){return 1+~~(n.getUTCMonth()/3)},Q:dn,s:vn,S:un,u:cn,U:on,V:an,w:fn,W:ln,x:null,X:null,y:gn,Y:sn,Z:hn,"%":yn},Fn={a:function(n,t,e){var r=wn.exec(t.slice(e));return r?(n.w=Yn[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=xn.exec(t.slice(e));return r?(n.w=Un[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=pn.exec(t.slice(e));return r?(n.m=Sn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=Hn.exec(t.slice(e));return r?(n.m=Ln[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,t,e){return jn(n,i,t,e)},d:U,e:U,f:S,H:Y,I:Y,j:w,L:p,m:x,M:H,p:function(n,t,e){var r=Tn.exec(t.slice(e));return r?(n.p=Mn[r[0].toLowerCase()],e+r[0].length):-1},q:M,Q:A,s:F,S:L,u:y,U:d,V:v,w:h,W:m,x:function(n,t,e){return jn(n,o,t,e)},X:function(n,t,e){return jn(n,a,t,e)},y:D,Y:C,Z:T,"%":Z};function Vn(n,t){return function(e){var r,u,i,o=[],a=-1,f=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++a<l;)37===n.charCodeAt(a)&&(o.push(n.slice(f,a)),null!=(u=c[r=n.charAt(++a)])?r=n.charAt(++a):u="e"===r?" ":"0",(i=t[r])&&(r=i(e,u)),o.push(r),f=a+1);return o.push(n.slice(f,a)),o.join("")}}function Wn(u,c){return function(i){var o,a,f=r(1900,void 0,1);if(jn(f,u,i+="",0)!=i.length)return null;if("Q"in f)return new Date(f.Q);if("s"in f)return new Date(1e3*f.s+("L"in f?f.L:0));if(!c||"Z"in f||(f.Z=0),"p"in f&&(f.H=f.H%12+12*f.p),void 0===f.m&&(f.m="q"in f?f.q:0),"V"in f){if(f.V<1||f.V>53)return null;"w"in f||(f.w=1),"Z"in f?(a=(o=e(r(f.y,0,1))).getUTCDay(),o=a>4||0===a?n.utcMonday.ceil(o):(0,n.utcMonday)(o),o=n.utcDay.offset(o,7*(f.V-1)),f.y=o.getUTCFullYear(),f.m=o.getUTCMonth(),f.d=o.getUTCDate()+(f.w+6)%7):(a=(o=t(r(f.y,0,1))).getDay(),o=a>4||0===a?n.timeMonday.ceil(o):(0,n.timeMonday)(o),o=n.timeDay.offset(o,7*(f.V-1)),f.y=o.getFullYear(),f.m=o.getMonth(),f.d=o.getDate()+(f.w+6)%7)}else("W"in f||"U"in f)&&("w"in f||(f.w="u"in f?f.u%7:"W"in f?1:0),a="Z"in f?e(r(f.y,0,1)).getUTCDay():t(r(f.y,0,1)).getDay(),f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(a+5)%7:f.w+7*f.U-(a+6)%7);return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,e(f)):t(f)}}function jn(n,t,e,r){for(var u,i,o=0,a=t.length,f=e.length;o<a;){if(r>=f)return-1;if(37===(u=t.charCodeAt(o++))){if(u=t.charAt(o++),!(i=Fn[u in c?t.charAt(o++):u])||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}return Zn.x=Vn(o,Zn),Zn.X=Vn(a,Zn),Zn.c=Vn(i,Zn),An.x=Vn(o,An),An.X=Vn(a,An),An.c=Vn(i,An),{format:function(n){var t=Vn(n+="",Zn);return t.toString=function(){return n},t},parse:function(n){var t=Wn(n+="",!1);return t.toString=function(){return n},t},utcFormat:function(n){var t=Vn(n+="",An);return t.toString=function(){return n},t},utcParse:function(n){var t=Wn(n+="",!0);return t.toString=function(){return n},t}}}var c={"-":"",_:" ",0:"0"},i=/^\s*\d+/,o=/^%/,a=/[\\^$*+?|[\]().{}]/g;function f(n,t,e){var r=n<0?"-":"",u=(r?-n:n)+"",c=u.length;return r+(c<e?new Array(e-c+1).join(t)+u:u)}function l(n){return n.replace(a,"\\$&")}function g(n){return new RegExp("^(?:"+n.map(l).join("|")+")","i")}function s(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function h(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function y(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function d(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function v(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function m(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function C(n,t,e){var r=i.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function D(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function T(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function M(n,t,e){var r=i.exec(t.slice(e,e+1));return r?(n.q=3*r[0]-3,e+r[0].length):-1}function x(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function U(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function w(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function Y(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function H(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function L(n,t,e){var r=i.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function p(n,t,e){var r=i.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function S(n,t,e){var r=i.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Z(n,t,e){var r=o.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function A(n,t,e){var r=i.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function F(n,t,e){var r=i.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function V(n,t){return f(n.getDate(),t,2)}function W(n,t){return f(n.getHours(),t,2)}function j(n,t){return f(n.getHours()%12||12,t,2)}function q(t,e){return f(1+n.timeDay.count((0,n.timeYear)(t),t),e,3)}function Q(n,t){return f(n.getMilliseconds(),t,3)}function X(n,t){return Q(n,t)+"000"}function b(n,t){return f(n.getMonth()+1,t,2)}function B(n,t){return f(n.getMinutes(),t,2)}function I(n,t){return f(n.getSeconds(),t,2)}function _(n){var t=n.getDay();return 0===t?7:t}function O(t,e){return f(n.timeSunday.count((0,n.timeYear)(t)-1,t),e,2)}function P(t,e){var r=t.getDay();return t=r>=4||0===r?(0,n.timeThursday)(t):n.timeThursday.ceil(t),f(n.timeThursday.count((0,n.timeYear)(t),t)+(4===(0,n.timeYear)(t).getDay()),e,2)}function $(n){return n.getDay()}function z(t,e){return f(n.timeMonday.count((0,n.timeYear)(t)-1,t),e,2)}function E(n,t){return f(n.getFullYear()%100,t,2)}function R(n,t){return f(n.getFullYear()%1e4,t,4)}function k(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function G(n,t){return f(n.getUTCDate(),t,2)}function J(n,t){return f(n.getUTCHours(),t,2)}function K(n,t){return f(n.getUTCHours()%12||12,t,2)}function N(t,e){return f(1+n.utcDay.count((0,n.utcYear)(t),t),e,3)}function nn(n,t){return f(n.getUTCMilliseconds(),t,3)}function tn(n,t){return nn(n,t)+"000"}function en(n,t){return f(n.getUTCMonth()+1,t,2)}function rn(n,t){return f(n.getUTCMinutes(),t,2)}function un(n,t){return f(n.getUTCSeconds(),t,2)}function cn(n){var t=n.getUTCDay();return 0===t?7:t}function on(t,e){return f(n.utcSunday.count((0,n.utcYear)(t)-1,t),e,2)}function an(t,e){var r=t.getUTCDay();return t=r>=4||0===r?(0,n.utcThursday)(t):n.utcThursday.ceil(t),f(n.utcThursday.count((0,n.utcYear)(t),t)+(4===(0,n.utcYear)(t).getUTCDay()),e,2)}function fn(n){return n.getUTCDay()}function ln(t,e){return f(n.utcMonday.count((0,n.utcYear)(t)-1,t),e,2)}function gn(n,t){return f(n.getUTCFullYear()%100,t,2)}function sn(n,t){return f(n.getUTCFullYear()%1e4,t,4)}function hn(){return"+0000"}function yn(){return"%"}function dn(n){return+n}function vn(n){return Math.floor(+n/1e3)}
},{"d3-time":"hQYG"}],"csjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=p,exports.utcParse=exports.utcFormat=exports.timeParse=exports.timeFormat=void 0;var e,t,r,a,o,s=u(require("./locale.js"));function u(e){return e&&e.__esModule?e:{default:e}}function p(u){return e=(0,s.default)(u),exports.timeFormat=t=e.format,exports.timeParse=r=e.parse,exports.utcFormat=a=e.utcFormat,exports.utcParse=o=e.utcParse,e}exports.timeFormat=t,exports.timeParse=r,exports.utcFormat=a,exports.utcParse=o,p({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});
},{"./locale.js":"UbHU"}],"PKKZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.isoSpecifier=void 0;var e=require("./defaultLocale.js"),t="%Y-%m-%dT%H:%M:%S.%LZ";function r(e){return e.toISOString()}exports.isoSpecifier=t;var o=Date.prototype.toISOString?r:(0,e.utcFormat)(t),i=o;exports.default=i;
},{"./defaultLocale.js":"csjH"}],"d4jk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./isoFormat.js"),r=require("./defaultLocale.js");function t(e){var r=new Date(e);return isNaN(r)?null:r}var a=+new Date("2000-01-01T00:00:00.000Z")?t:(0,r.utcParse)(e.isoSpecifier),s=a;exports.default=s;
},{"./isoFormat.js":"PKKZ","./defaultLocale.js":"csjH"}],"UYpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"timeFormatDefaultLocale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"timeFormat",{enumerable:!0,get:function(){return e.timeFormat}}),Object.defineProperty(exports,"timeParse",{enumerable:!0,get:function(){return e.timeParse}}),Object.defineProperty(exports,"utcFormat",{enumerable:!0,get:function(){return e.utcFormat}}),Object.defineProperty(exports,"utcParse",{enumerable:!0,get:function(){return e.utcParse}}),Object.defineProperty(exports,"timeFormatLocale",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isoFormat",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isoParse",{enumerable:!0,get:function(){return n.default}});var e=a(require("./defaultLocale.js")),t=o(require("./locale.js")),r=o(require("./isoFormat.js")),n=o(require("./isoParse.js"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}
},{"./defaultLocale.js":"csjH","./locale.js":"UbHU","./isoFormat.js":"PKKZ","./isoParse.js":"d4jk"}],"kVXt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calendar=g,exports.default=M;var e=require("d3-array"),t=require("d3-time"),r=require("d3-time-format"),n=c(require("./continuous.js")),i=require("./init.js"),u=o(require("./nice.js"));function o(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var f=1e3,l=60*f,p=60*l,s=24*p,d=7*s,m=30*s,y=365*s;function v(e){return new Date(e)}function b(e){return e instanceof Date?+e:+new Date(+e)}function g(t,r,i,o,a,c,M,h,j){var w=(0,n.default)(),D=w.invert,O=w.domain,k=j(".%L"),q=j(":%S"),P=j("%I:%M"),_=j("%I %p"),x=j("%a %d"),S=j("%b %d"),W=j("%B"),F=j("%Y"),I=[[M,1,f],[M,5,5*f],[M,15,15*f],[M,30,30*f],[c,1,l],[c,5,5*l],[c,15,15*l],[c,30,30*l],[a,1,p],[a,3,3*p],[a,6,6*p],[a,12,12*p],[o,1,s],[o,2,2*s],[i,1,d],[r,1,m],[r,3,3*m],[t,1,y]];function Y(e){return(M(e)<e?k:c(e)<e?q:a(e)<e?P:o(e)<e?_:r(e)<e?i(e)<e?x:S:t(e)<e?W:F)(e)}function A(r,n,i){if(null==r&&(r=10),"number"==typeof r){var u,o=Math.abs(i-n)/r,a=(0,e.bisector)(function(e){return e[2]}).right(I,o);return a===I.length?(u=(0,e.tickStep)(n/y,i/y,r),r=t):a?(u=(a=I[o/I[a-1][2]<I[a][2]/o?a-1:a])[1],r=a[0]):(u=Math.max((0,e.tickStep)(n,i,r),1),r=h),r.every(u)}return r}return w.invert=function(e){return new Date(D(e))},w.domain=function(e){return arguments.length?O(Array.from(e,b)):O().map(v)},w.ticks=function(e){var t,r=O(),n=r[0],i=r[r.length-1],u=i<n;return u&&(t=n,n=i,i=t),t=(t=A(e,n,i))?t.range(n,i+1):[],u?t.reverse():t},w.tickFormat=function(e,t){return null==t?Y:j(t)},w.nice=function(e){var t=O();return(e=A(e,t[0],t[t.length-1]))?O((0,u.default)(t,e)):w},w.copy=function(){return(0,n.copy)(w,g(t,r,i,o,a,c,M,h,j))},w}function M(){return i.initRange.apply(g(t.timeYear,t.timeMonth,t.timeWeek,t.timeDay,t.timeHour,t.timeMinute,t.timeSecond,t.timeMillisecond,r.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}
},{"d3-array":"K0bd","d3-time":"hQYG","d3-time-format":"UYpZ","./continuous.js":"CjJ5","./init.js":"buZa","./nice.js":"eMTM"}],"WrbA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("./time.js"),t=require("d3-time-format"),r=require("d3-time"),u=require("./init.js");function i(){return u.initRange.apply((0,e.calendar)(r.utcYear,r.utcMonth,r.utcWeek,r.utcDay,r.utcHour,r.utcMinute,r.utcSecond,r.utcMillisecond,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}
},{"./time.js":"kVXt","d3-time-format":"UYpZ","d3-time":"hQYG","./init.js":"buZa"}],"J7VY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copy=p,exports.default=l,exports.sequentialLog=c,exports.sequentialSymlog=s,exports.sequentialPow=f,exports.sequentialSqrt=y;var n=require("d3-interpolate"),t=require("./continuous.js"),r=require("./init.js"),e=require("./linear.js"),o=require("./log.js"),i=require("./symlog.js"),u=require("./pow.js");function a(){var r,e,o,i,u,a=0,p=1,l=t.identity,c=!1;function s(n){return isNaN(n=+n)?u:l(0===o?.5:(n=(i(n)-r)*o,c?Math.max(0,Math.min(1,n)):n))}function f(n){return function(t){var r,e;return arguments.length?([r,e]=t,l=n(r,e),s):[l(0),l(1)]}}return s.domain=function(n){return arguments.length?([a,p]=n,r=i(a=+a),e=i(p=+p),o=r===e?0:1/(e-r),s):[a,p]},s.clamp=function(n){return arguments.length?(c=!!n,s):c},s.interpolator=function(n){return arguments.length?(l=n,s):l},s.range=f(n.interpolate),s.rangeRound=f(n.interpolateRound),s.unknown=function(n){return arguments.length?(u=n,s):u},function(n){return i=n,r=n(a),e=n(p),o=r===e?0:1/(e-r),s}}function p(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function l(){var n=(0,e.linearish)(a()(t.identity));return n.copy=function(){return p(n,l())},r.initInterpolator.apply(n,arguments)}function c(){var n=(0,o.loggish)(a()).domain([1,10]);return n.copy=function(){return p(n,c()).base(n.base())},r.initInterpolator.apply(n,arguments)}function s(){var n=(0,i.symlogish)(a());return n.copy=function(){return p(n,s()).constant(n.constant())},r.initInterpolator.apply(n,arguments)}function f(){var n=(0,u.powish)(a());return n.copy=function(){return p(n,f()).exponent(n.exponent())},r.initInterpolator.apply(n,arguments)}function y(){return f.apply(null,arguments).exponent(.5)}
},{"d3-interpolate":"k9aH","./continuous.js":"CjJ5","./init.js":"buZa","./linear.js":"LIJk","./log.js":"ea59","./symlog.js":"nanU","./pow.js":"xeRN"}],"XYTZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var n=require("d3-array"),r=require("./continuous.js"),t=require("./init.js");function e(){var i=[],u=r.identity;function o(r){if(!isNaN(r=+r))return u(((0,n.bisect)(i,r,1)-1)/(i.length-1))}return o.domain=function(r){if(!arguments.length)return i.slice();i=[];for(let n of r)null==n||isNaN(n=+n)||i.push(n);return i.sort(n.ascending),o},o.interpolator=function(n){return arguments.length?(u=n,o):u},o.range=function(){return i.map((n,r)=>u(r/(i.length-1)))},o.quantiles=function(r){return Array.from({length:r+1},(t,e)=>(0,n.quantile)(i,e/r))},o.copy=function(){return e(u).domain(i)},t.initInterpolator.apply(o,arguments)}
},{"d3-array":"K0bd","./continuous.js":"CjJ5","./init.js":"buZa"}],"CLse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c,exports.divergingLog=l,exports.divergingSymlog=s,exports.divergingPow=g,exports.divergingSqrt=f;var n=require("d3-interpolate"),r=require("./continuous.js"),t=require("./init.js"),e=require("./linear.js"),i=require("./log.js"),o=require("./sequential.js"),u=require("./symlog.js"),p=require("./pow.js");function a(){var t,e,i,o,u,p,a,c=0,l=.5,s=1,g=1,f=r.identity,y=!1;function d(n){return isNaN(n=+n)?a:(n=.5+((n=+p(n))-e)*(g*n<g*e?o:u),f(y?Math.max(0,Math.min(1,n)):n))}function v(r){return function(t){var e,i,o;return arguments.length?([e,i,o]=t,f=(0,n.piecewise)(r,[e,i,o]),d):[f(0),f(.5),f(1)]}}return d.domain=function(n){return arguments.length?([c,l,s]=n,t=p(c=+c),e=p(l=+l),i=p(s=+s),o=t===e?0:.5/(e-t),u=e===i?0:.5/(i-e),g=e<t?-1:1,d):[c,l,s]},d.clamp=function(n){return arguments.length?(y=!!n,d):y},d.interpolator=function(n){return arguments.length?(f=n,d):f},d.range=v(n.interpolate),d.rangeRound=v(n.interpolateRound),d.unknown=function(n){return arguments.length?(a=n,d):a},function(n){return p=n,t=n(c),e=n(l),i=n(s),o=t===e?0:.5/(e-t),u=e===i?0:.5/(i-e),g=e<t?-1:1,d}}function c(){var n=(0,e.linearish)(a()(r.identity));return n.copy=function(){return(0,o.copy)(n,c())},t.initInterpolator.apply(n,arguments)}function l(){var n=(0,i.loggish)(a()).domain([.1,1,10]);return n.copy=function(){return(0,o.copy)(n,l()).base(n.base())},t.initInterpolator.apply(n,arguments)}function s(){var n=(0,u.symlogish)(a());return n.copy=function(){return(0,o.copy)(n,s()).constant(n.constant())},t.initInterpolator.apply(n,arguments)}function g(){var n=(0,p.powish)(a());return n.copy=function(){return(0,o.copy)(n,g()).exponent(n.exponent())},t.initInterpolator.apply(n,arguments)}function f(){return g.apply(null,arguments).exponent(.5)}
},{"d3-interpolate":"k9aH","./continuous.js":"CjJ5","./init.js":"buZa","./linear.js":"LIJk","./log.js":"ea59","./sequential.js":"J7VY","./symlog.js":"nanU","./pow.js":"xeRN"}],"zL2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"scaleBand",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"scalePoint",{enumerable:!0,get:function(){return e.point}}),Object.defineProperty(exports,"scaleIdentity",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"scaleLinear",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"scaleLog",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"scaleSymlog",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"scaleOrdinal",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"scaleImplicit",{enumerable:!0,get:function(){return i.implicit}}),Object.defineProperty(exports,"scalePow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"scaleSqrt",{enumerable:!0,get:function(){return o.sqrt}}),Object.defineProperty(exports,"scaleRadial",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"scaleQuantile",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"scaleQuantize",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"scaleThreshold",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"scaleTime",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"scaleUtc",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"scaleSequential",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"scaleSequentialLog",{enumerable:!0,get:function(){return d.sequentialLog}}),Object.defineProperty(exports,"scaleSequentialPow",{enumerable:!0,get:function(){return d.sequentialPow}}),Object.defineProperty(exports,"scaleSequentialSqrt",{enumerable:!0,get:function(){return d.sequentialSqrt}}),Object.defineProperty(exports,"scaleSequentialSymlog",{enumerable:!0,get:function(){return d.sequentialSymlog}}),Object.defineProperty(exports,"scaleSequentialQuantile",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"scaleDiverging",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"scaleDivergingLog",{enumerable:!0,get:function(){return g.divergingLog}}),Object.defineProperty(exports,"scaleDivergingPow",{enumerable:!0,get:function(){return g.divergingPow}}),Object.defineProperty(exports,"scaleDivergingSqrt",{enumerable:!0,get:function(){return g.divergingSqrt}}),Object.defineProperty(exports,"scaleDivergingSymlog",{enumerable:!0,get:function(){return g.divergingSymlog}}),Object.defineProperty(exports,"tickFormat",{enumerable:!0,get:function(){return j.default}});var e=P(require("./band.js")),t=y(require("./identity.js")),r=y(require("./linear.js")),n=y(require("./log.js")),u=y(require("./symlog.js")),i=P(require("./ordinal.js")),o=P(require("./pow.js")),a=y(require("./radial.js")),l=y(require("./quantile.js")),c=y(require("./quantize.js")),f=y(require("./threshold.js")),s=y(require("./time.js")),p=y(require("./utcTime.js")),d=P(require("./sequential.js")),b=y(require("./sequentialQuantile.js")),g=P(require("./diverging.js")),j=y(require("./tickFormat.js"));function y(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}
},{"./band.js":"BAgl","./identity.js":"FKHe","./linear.js":"LIJk","./log.js":"ea59","./symlog.js":"nanU","./ordinal.js":"GjLX","./pow.js":"xeRN","./radial.js":"mhod","./quantile.js":"AGCd","./quantize.js":"d6Xk","./threshold.js":"I63C","./time.js":"kVXt","./utcTime.js":"WrbA","./sequential.js":"J7VY","./sequentialQuantile.js":"XYTZ","./diverging.js":"CLse","./tickFormat.js":"qjRa"}],"oAT9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,a,r,l,i,n,c,u,s=C(require("@babel/runtime/helpers/initializerDefineProperty")),o=C(require("@babel/runtime/helpers/classCallCheck")),f=C(require("@babel/runtime/helpers/createClass")),p=C(require("@babel/runtime/helpers/applyDecoratedDescriptor")),y=C(require("@babel/runtime/helpers/initializerWarningHelper")),d=C(require("@babel/runtime/helpers/defineProperty")),S=C(require("lodash/uniq")),v=C(require("lodash/isString")),h=C(require("lodash/isNil")),T=require("@antv/l7-core"),g=require("d3-array"),b=m(require("d3-scale")),A=require("inversify");function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var i=r?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=e[l]}return a.default=e,t&&t.set(e,a),a}function C(e){return e&&e.__esModule?e:{default:e}}var E=/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,N=(e={},(0,d.default)(e,T.ScaleTypes.LINEAR,b.scaleLinear),(0,d.default)(e,T.ScaleTypes.POWER,b.scalePow),(0,d.default)(e,T.ScaleTypes.LOG,b.scaleLog),(0,d.default)(e,T.ScaleTypes.IDENTITY,b.scaleIdentity),(0,d.default)(e,T.ScaleTypes.TIME,b.scaleTime),(0,d.default)(e,T.ScaleTypes.QUANTILE,b.scaleQuantile),(0,d.default)(e,T.ScaleTypes.QUANTIZE,b.scaleQuantize),(0,d.default)(e,T.ScaleTypes.THRESHOLD,b.scaleThreshold),(0,d.default)(e,T.ScaleTypes.CAT,b.scaleOrdinal),e),k=(t=(0,A.injectable)(),a=(0,A.inject)(T.TYPES.IGlobalConfigService),r=(0,A.inject)(T.TYPES.ILogService),t((i=u=function(){function e(){(0,o.default)(this,e),(0,s.default)(this,"configService",n,this),(0,s.default)(this,"logger",c,this),this.scaleCache={},this.scaleOptions={}}return(0,f.default)(e,[{key:"apply",value:function(e,t){var a=this,r=t.styleAttributeService;e.hooks.init.tap("FeatureScalePlugin",function(){a.scaleOptions=e.getScaleOptions();var t=r.getLayerStyleAttributes(),l=e.getSource().data.dataArray;a.caculateScalesForAttributes(t||[],l)}),e.hooks.beforeRenderData.tap("FeatureScalePlugin",function(t){if(t){a.scaleOptions=e.getScaleOptions();var l=r.getLayerStyleAttributes(),i=e.getSource().data.dataArray;return a.caculateScalesForAttributes(l||[],i),!0}return!1}),e.hooks.beforeRender.tap("FeatureScalePlugin",function(){a.scaleOptions=e.getScaleOptions();var t=r.getLayerStyleAttributes();if(t){var l=e.getSource().data.dataArray,i=t.filter(function(e){return e.needRescale});i.length&&(a.caculateScalesForAttributes(i,l),a.logger.debug("rescale finished"))}})}},{key:"isNumber",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"caculateScalesForAttributes",value:function(e,t){var a=this;this.scaleCache={},e.forEach(function(e){if(e.scale){var r=e.scale,l=e.name;r.names=a.parseFields(e.scale.field||[]);var i=r.names.map(function(r){return a.getOrCreateScale(r,e,t)});i.some(function(e){return e.type===T.StyleScaleType.VARIABLE})?(r.type=T.StyleScaleType.VARIABLE,i.forEach(function(e){var t;if(!r.callback)if(r.values&&"text"!==r.values){var a;if("linear"===(null===(a=e.option)||void 0===a?void 0:a.type)&&r.values.length>2){var i=e.scale.ticks(r.values.length);"color"===l&&e.scale.domain(i)}e.scale.range(r.values)}else"cat"===(null===(t=e.option)||void 0===t?void 0:t.type)&&e.scale.range(e.option.domain)})):(r.type=T.StyleScaleType.CONSTANT,r.values=i.map(function(e,t){return e.scale(r.names[t])})),r.scalers=i.map(function(e){return{field:e.field,func:e.scale}}),e.needRescale=!1}})}},{key:"getOrCreateScale",value:function(e,t,a){var r,l=[e,t.name].join("_"),i=null===(r=t.scale)||void 0===r?void 0:r.values;if(this.scaleCache[l])return this.scaleCache[l];var n=this.createScale(e,i,a);return this.scaleCache[l]=n,this.scaleCache[l]}},{key:"parseFields",value:function(e){return Array.isArray(e)?e:(0,v.default)(e)?e.split("*"):[e]}},{key:"createScale",value:function(e,t,a){var r,l=this.scaleOptions[e],i={field:e,scale:void 0,type:T.StyleScaleType.VARIABLE,option:l};if(!a||!a.length)return l&&l.type?i.scale=this.createDefaultScale(l):(i.scale=b.scaleOrdinal([e]),i.type=T.StyleScaleType.CONSTANT),i;var n=null===(r=a.find(function(t){return!(0,h.default)(t[e])}))||void 0===r?void 0:r[e];if(this.isNumber(e)||(0,h.default)(n)&&!l)i.scale=b.scaleOrdinal([e]),i.type=T.StyleScaleType.CONSTANT;else{var c=l&&l.type||this.getDefaultType(n);"text"===t&&(c=T.ScaleTypes.CAT);var u=this.createDefaultScaleConfig(c,e,a);Object.assign(u,l),i.scale=this.createDefaultScale(u),i.option=u}return i}},{key:"getDefaultType",value:function(e){var t=T.ScaleTypes.LINEAR;return"string"==typeof e&&(t=E.test(e)?T.ScaleTypes.TIME:T.ScaleTypes.CAT),t}},{key:"createDefaultScaleConfig",value:function(e,t,a){var r={type:e},l=(null==a?void 0:a.map(function(e){return e[t]}))||[];return e!==T.ScaleTypes.CAT&&e!==T.ScaleTypes.QUANTILE?r.domain=(0,g.extent)(l):e===T.ScaleTypes.CAT?r.domain=(0,S.default)(l):e===T.ScaleTypes.QUANTILE&&(r.domain=l),r}},{key:"createDefaultScale",value:function(e){var t=e.type,a=e.domain,r=N[t]();return a&&r.domain(a),r}}]),e}(),n=(0,p.default)(i.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,p.default)(i.prototype,"logger",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=i))||l);exports.default=k;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@babel/runtime/helpers/defineProperty":"IxO8","lodash/uniq":"oUkM","lodash/isString":"CkJF","lodash/isNil":"gGJU","@antv/l7-core":"om0I","d3-array":"K0bd","d3-scale":"zL2z","inversify":"PR7M"}],"vvaG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,i,n,l,a,u,o=m(require("@babel/runtime/helpers/defineProperty")),c=m(require("@babel/runtime/helpers/initializerDefineProperty")),s=m(require("@babel/runtime/helpers/classCallCheck")),f=m(require("@babel/runtime/helpers/createClass")),p=m(require("@babel/runtime/helpers/applyDecoratedDescriptor")),b=m(require("@babel/runtime/helpers/initializerWarningHelper")),d=require("@antv/l7-core"),y=require("inversify");function m(e){return e&&e.__esModule?e:{default:e}}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,i)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach(function(r){(0,o.default)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var v=(e=(0,y.injectable)(),r=(0,y.inject)(d.TYPES.ICameraService),t=(0,y.inject)(d.TYPES.IRendererService),e((n=u=function(){function e(){(0,s.default)(this,e),(0,c.default)(this,"cameraService",l,this),(0,c.default)(this,"rendererService",a,this)}return(0,f.default)(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){e.models.forEach(function(r){r.addUniforms(O({},e.layerModel.getAnimateUniforms()))})})}}]),e}(),l=(0,p.default)(n.prototype,"cameraService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,p.default)(n.prototype,"rendererService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=n))||i);exports.default=v;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"vGYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("@babel/runtime/helpers/classCallCheck")),u=a(require("@babel/runtime/helpers/createClass")),l=require("inversify");function a(e){return e&&e.__esModule?e:{default:e}}var i=(e=(0,l.injectable)())(r=function(){function e(){(0,t.default)(this,e)}return(0,u.default)(e,[{key:"apply",value:function(e){e.hooks.init.tap("LayerModelPlugin",function(){e.prepareBuildModel(),e.buildModels()}),e.hooks.beforeRenderData.tap("DataSourcePlugin",function(r){return r&&(e.prepareBuildModel(),e.buildModels()),!1})}}]),e}())||r;exports.default=i;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M"}],"PVsa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r=i(require("@babel/runtime/helpers/classCallCheck")),u=i(require("@babel/runtime/helpers/createClass")),a=require("inversify");function i(e){return e&&e.__esModule?e:{default:e}}var n=(e=(0,a.injectable)())(t=function(){function e(){(0,r.default)(this,e)}return(0,u.default)(e,[{key:"apply",value:function(e){e.hooks.afterInit.tap("LayerStylePlugin",function(){e.updateLayerConfig({}),e.getLayerConfig().autoFit&&e.fitBounds()})}}]),e}())||t;exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M"}],"MPye":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateLightingUniforms=g,exports.default=void 0;var e,t,r=a(require("@babel/runtime/helpers/classCallCheck")),i=a(require("@babel/runtime/helpers/createClass")),n=a(require("@babel/runtime/helpers/objectWithoutProperties")),o=a(require("@babel/runtime/helpers/defineProperty")),u=require("inversify");function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},f={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},p={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},b={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},d=["ambient","diffuse","specular"];function g(e){var t={u_DirectionalLights:new Array(3).fill(s({},p)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(s({},b)),u_NumOfSpotLights:0};return e&&e.length||(e=[f]),e.forEach(function(e,r){var i=e.type,o=void 0===i?"directional":i,u=(0,n.default)(e,["type"]),a=c[o].lights,l=c[o].num,f=t[l];t[a][f]=s({},t[a][f],{},u),t[l]++}),t}var h=(e=(0,u.injectable)())(t=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("LightingPlugin",function(){e.getLayerConfig().enableLighting&&e.models.forEach(function(e){return e.addUniforms(s({},g()))})})}}]),e}())||t;exports.default=h;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/objectWithoutProperties":"U8F3","@babel/runtime/helpers/defineProperty":"IxO8","inversify":"PR7M"}],"oIsf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,i,r=u(require("@babel/runtime/helpers/classCallCheck")),n=u(require("@babel/runtime/helpers/createClass")),t=require("@antv/l7-core"),o=require("@antv/l7-utils"),a=require("inversify");function u(e){return e&&e.__esModule?e:{default:e}}var l={NONE:0,ENCODE:1,HIGHLIGHT:2},c=(e=(0,a.injectable)())(i=function(){function e(){(0,r.default)(this,e)}return(0,n.default)(e,[{key:"apply",value:function(e,i){i.rendererService;var r=i.styleAttributeService;e.hooks.init.tap("PixelPickingPlugin",function(){var i=e.getLayerConfig().enablePicking;r.registerStyleAttribute({name:"pickingColor",type:t.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:t.gl.FLOAT},size:3,update:function(r,n){var t=r.id;return i&&e.isVisible()?(0,o.encodePickingColor)(t):[0,0,0]}}})}),e.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){e.getLayerConfig().enablePicking&&e.isVisible()&&e.models.forEach(function(e){return e.addUniforms({u_PickingStage:l.ENCODE})})}),e.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){e.getLayerConfig().enablePicking&&e.isVisible()&&e.models.forEach(function(e){return e.addUniforms({u_PickingStage:l.HIGHLIGHT})})}),e.hooks.beforeHighlight.tap("PixelPickingPlugin",function(i){var r=e.getLayerConfig().highlightColor,n="string"==typeof r?(0,o.rgb2arr)(r):r||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:(0,o.decodePickingColor)(new Uint8Array(i))}),e.models.forEach(function(e){return e.addUniforms({u_PickingStage:l.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:n.map(function(e){return 255*e})})})}),e.hooks.beforeSelect.tap("PixelPickingPlugin",function(i){var r=e.getLayerConfig().selectColor,n="string"==typeof r?(0,o.rgb2arr)(r):r||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:(0,o.decodePickingColor)(new Uint8Array(i))}),e.models.forEach(function(e){return e.addUniforms({u_PickingStage:l.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:n.map(function(e){return 255*e})})})})}}]),e}())||i;exports.default=c;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@antv/l7-core":"om0I","@antv/l7-utils":"nTEC","inversify":"PR7M"}],"wYYm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,u,l,n=c(require("@babel/runtime/helpers/initializerDefineProperty")),a=c(require("@babel/runtime/helpers/classCallCheck")),s=c(require("@babel/runtime/helpers/createClass")),o=c(require("@babel/runtime/helpers/applyDecoratedDescriptor")),p=c(require("@babel/runtime/helpers/initializerWarningHelper")),b=require("@antv/l7-core"),f=require("inversify");function c(e){return e&&e.__esModule?e:{default:e}}var g=(e=(0,f.injectable)(),t=(0,f.inject)(b.TYPES.ILogService),e((i=l=function(){function e(){(0,a.default)(this,e),(0,n.default)(this,"logger",u,this)}return(0,s.default)(e,[{key:"apply",value:function(e,t){var r=this,i=t.styleAttributeService;e.hooks.init.tap("RegisterStyleAttributePlugin",function(){r.registerBuiltinAttributes(i)})}},{key:"registerBuiltinAttributes",value:function(e){e.registerStyleAttribute({name:"position",type:b.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:b.gl.FLOAT},size:3,update:function(e,t,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}}}),e.registerStyleAttribute({name:"filter",type:b.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:b.gl.DYNAMIC_DRAW,data:[],type:b.gl.FLOAT},size:1,update:function(e,t){return e.filter?[1]:[0]}}}),e.registerStyleAttribute({name:"color",type:b.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:b.gl.DYNAMIC_DRAW,data:[],type:b.gl.FLOAT},size:4,update:function(e,t){var r=e.color;return r&&r.length?r:[0,0,0,0]}}})}}]),e}(),u=(0,o.default)(i.prototype,"logger",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=i))||r);exports.default=g;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"lMa0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,i,t,a,o,n,l,c,u,d=C(require("@babel/runtime/helpers/defineProperty")),m=C(require("@babel/runtime/helpers/initializerDefineProperty")),f=C(require("@babel/runtime/helpers/classCallCheck")),s=C(require("@babel/runtime/helpers/createClass")),S=C(require("@babel/runtime/helpers/applyDecoratedDescriptor")),v=C(require("@babel/runtime/helpers/initializerWarningHelper")),p=require("@antv/l7-core"),P=require("inversify");function C(e){return e&&e.__esModule?e:{default:e}}var b=(e=(0,P.injectable)(),r=(0,P.inject)(p.TYPES.ICameraService),i=(0,P.inject)(p.TYPES.ICoordinateSystemService),t=(0,P.inject)(p.TYPES.IRendererService),e((o=u=function(){function e(){(0,f.default)(this,e),(0,m.default)(this,"cameraService",n,this),(0,m.default)(this,"coordinateSystemService",l,this),(0,m.default)(this,"rendererService",c,this)}return(0,s.default)(e,[{key:"apply",value:function(e){var r=this;e.hooks.beforeRender.tap("ShaderUniformPlugin",function(){r.coordinateSystemService.refresh();var i=r.rendererService.getViewportSize(),t=i.width,a=i.height;e.models.forEach(function(e){var i;return e.addUniforms((i={},(0,d.default)(i,p.CameraUniform.ProjectionMatrix,r.cameraService.getProjectionMatrix()),(0,d.default)(i,p.CameraUniform.ViewMatrix,r.cameraService.getViewMatrix()),(0,d.default)(i,p.CameraUniform.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),(0,d.default)(i,p.CameraUniform.Zoom,r.cameraService.getZoom()),(0,d.default)(i,p.CameraUniform.ZoomScale,r.cameraService.getZoomScale()),(0,d.default)(i,p.CameraUniform.FocalDistance,r.cameraService.getFocalDistance()),(0,d.default)(i,p.CameraUniform.CameraPosition,r.cameraService.getCameraPosition()),(0,d.default)(i,p.CoordinateUniform.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),(0,d.default)(i,p.CoordinateUniform.ViewportCenter,r.coordinateSystemService.getViewportCenter()),(0,d.default)(i,p.CoordinateUniform.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),(0,d.default)(i,p.CoordinateUniform.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),(0,d.default)(i,p.CoordinateUniform.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),(0,d.default)(i,p.CoordinateUniform.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),(0,d.default)(i,"u_ViewportSize",[t,a]),(0,d.default)(i,"u_DevicePixelRatio",window.devicePixelRatio),(0,d.default)(i,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i))})})}}]),e}(),n=(0,S.default)(o.prototype,"cameraService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,S.default)(o.prototype,"coordinateSystemService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,S.default)(o.prototype,"rendererService",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=o))||a);exports.default=b;
},{"@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"xGPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t=a(require("@babel/runtime/helpers/classCallCheck")),l=a(require("@babel/runtime/helpers/createClass")),u=require("inversify");function a(e){return e&&e.__esModule?e:{default:e}}var n=(e=(0,u.injectable)())(r=function(){function e(){(0,t.default)(this,e)}return(0,l.default)(e,[{key:"apply",value:function(e){e.hooks.beforeRender.tap("UpdateModelPlugin",function(){e.layerModel&&e.layerModel.needUpdate()})}}]),e}())||r;exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","inversify":"PR7M"}],"OLXV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,a,u,n=f(require("@babel/runtime/helpers/initializerDefineProperty")),l=f(require("@babel/runtime/helpers/classCallCheck")),o=f(require("@babel/runtime/helpers/createClass")),s=f(require("@babel/runtime/helpers/applyDecoratedDescriptor")),c=f(require("@babel/runtime/helpers/initializerWarningHelper")),d=require("@antv/l7-core"),b=require("inversify");function f(e){return e&&e.__esModule?e:{default:e}}var p=(e=(0,b.injectable)(),t=(0,b.inject)(d.TYPES.ILogService),e((i=u=function(){function e(){(0,l.default)(this,e),(0,n.default)(this,"logger",a,this)}return(0,o.default)(e,[{key:"apply",value:function(e,t){var r=this,i=t.styleAttributeService;e.hooks.init.tap("UpdateStyleAttributePlugin",function(){r.updateStyleAtrribute(e,{styleAttributeService:i})}),e.hooks.beforeRenderData.tap("styleAttributeService",function(t){return!!t&&(e.layerModelNeedUpdate=!0,!0)}),e.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){r.updateStyleAtrribute(e,{styleAttributeService:i})})}},{key:"updateStyleAtrribute",value:function(e,t){var r=this,i=t.styleAttributeService;(i.getLayerStyleAttributes()||[]).filter(function(e){return e.needRegenerateVertices}).forEach(function(t){i.updateAttributeByFeatureRange(t.name,e.getEncodedData(),t.featureRange.startIndex,t.featureRange.endIndex),t.needRegenerateVertices=!1,r.logger.debug("regenerate vertex attributes: ".concat(t.name," finished"))})}}]),e}(),a=(0,s.default)(i.prototype,"logger",[t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=i))||r);exports.default=p;
},{"@babel/runtime/helpers/initializerDefineProperty":"foml","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/applyDecoratedDescriptor":"He9F","@babel/runtime/helpers/initializerWarningHelper":"Ajpk","@antv/l7-core":"om0I","inversify":"PR7M"}],"F7bZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CityBuildingLayer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"BaseLayer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"HeatmapLayer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"ImageLayer",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"PointLayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"RasterLayer",{enumerable:!0,get:function(){return o.default}});var e=require("@antv/l7-core"),n=I(require("./citybuliding/building")),r=I(require("./core/BaseLayer"));require("./glsl.d");var i=I(require("./heatmap")),t=I(require("./image")),u=I(require("./line/index")),a=I(require("./point")),l=I(require("./polygon")),o=I(require("./raster")),g=I(require("./plugins/ConfigSchemaValidationPlugin")),d=I(require("./plugins/DataMappingPlugin")),P=I(require("./plugins/DataSourcePlugin")),c=I(require("./plugins/FeatureScalePlugin")),p=I(require("./plugins/LayerAnimateStylePlugin")),s=I(require("./plugins/LayerModelPlugin")),f=I(require("./plugins/LayerStylePlugin")),y=I(require("./plugins/LightingPlugin")),q=I(require("./plugins/MultiPassRendererPlugin")),S=I(require("./plugins/PixelPickingPlugin")),b=I(require("./plugins/RegisterStyleAttributePlugin")),L=I(require("./plugins/ShaderUniformPlugin")),R=I(require("./plugins/UpdateModelPlugin")),m=I(require("./plugins/UpdateStyleAttributePlugin"));function I(e){return e&&e.__esModule?e:{default:e}}e.container.bind(e.TYPES.ILayerPlugin).to(g.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(P.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(b.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(c.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(d.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(f.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(m.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(R.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(q.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(L.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(p.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(y.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(S.default).inRequestScope(),e.container.bind(e.TYPES.ILayerPlugin).to(s.default).inRequestScope();
},{"@antv/l7-core":"om0I","./citybuliding/building":"Bdq1","./core/BaseLayer":"RXwS","./glsl.d":"aYep","./heatmap":"Qt4I","./image":"D0yP","./line/index":"tUnm","./point":"YGE5","./polygon":"z78t","./raster":"Ot5Q","./plugins/ConfigSchemaValidationPlugin":"Ba5J","./plugins/DataMappingPlugin":"pCtI","./plugins/DataSourcePlugin":"Adyw","./plugins/FeatureScalePlugin":"oAT9","./plugins/LayerAnimateStylePlugin":"vvaG","./plugins/LayerModelPlugin":"vGYa","./plugins/LayerStylePlugin":"PVsa","./plugins/LightingPlugin":"MPye","./plugins/MultiPassRendererPlugin":"Zlyx","./plugins/PixelPickingPlugin":"oIsf","./plugins/RegisterStyleAttributePlugin":"wYYm","./plugins/ShaderUniformPlugin":"lMa0","./plugins/UpdateModelPlugin":"xGPe","./plugins/UpdateStyleAttributePlugin":"OLXV"}],"zxWE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/l7-core");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("@antv/l7-scene");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("@antv/l7-maps");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("@antv/l7-layers");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("@antv/l7-component");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});
},{"@antv/l7-core":"om0I","@antv/l7-scene":"mCbX","@antv/l7-maps":"Ibza","@antv/l7-layers":"F7bZ","@antv/l7-component":"QgKN"}],"q8Gp":[function(require,module,exports) {
module.exports={"南充":{lng:106.08,lat:30.78},"漳州":{lng:117.65,lat:24.52},"清远":{lng:113.03,lat:23.7},"黄南":{lng:102.02,lat:35.52},"莆田":{lng:119,lat:25.43},"佛山":{lng:113.12,lat:23.02},"大理":{lng:100.23,lat:25.6},"塔城":{lng:82.98,lat:46.75},"鹰潭":{lng:117.07,lat:28.27},"三亚":{lng:109.5,lat:18.25},"海口":{lng:110.32,lat:20.03},"连江":{lng:119.53,lat:26.2},"鹤岗":{lng:130.27,lat:47.33},"鸡西":{lng:130.97,lat:45.3},"宜宾":{lng:104.55,lat:28.7},"安阳":{lng:114.38,lat:36.1},"通辽":{lng:122.27,lat:43.62},"呼和浩特":{lng:111.73,lat:40.83},"黑河":{lng:127.48,lat:50.25},"榆林":{lng:109.73,lat:38.28},"茂名":{lng:110.92,lat:21.67},"嘉义":{lng:120.43,lat:23.48},"厦门":{lng:118.08,lat:24.48},"宿州":{lng:116.98,lat:33.63},"阿坝":{lng:101.7,lat:32.9},"南宁":{lng:108.37,lat:22.82},"文山":{lng:104.25,lat:23.37},"海北":{lng:100.9,lat:36.97},"揭阳":{lng:116.37,lat:23.55},"伊春":{lng:128.9,lat:47.73},"三门峡":{lng:111.2,lat:34.78},"柳州":{lng:109.42,lat:24.33},"东莞":{lng:113.75,lat:23.05},"三明":{lng:117.62,lat:26.27},"周口":{lng:114.65,lat:33.62},"安庆":{lng:117.05,lat:30.53},"德宏":{lng:98.58,lat:24.43},"上饶":{lng:117.92,lat:28.43},"安康":{lng:109.02,lat:32.68},"玉溪":{lng:102.55,lat:24.35},"武汉":{lng:114.3,lat:30.6},"池州":{lng:117.48,lat:30.67},"开封":{lng:114.3,lat:34.8},"内江":{lng:105.05,lat:29.58},"临沂":{lng:118.35,lat:35.05},"淮南":{lng:117,lat:32.63},"随州":{lng:113.37,lat:31.72},"定西":{lng:104.62,lat:35.58},"临沧":{lng:100.08,lat:23.88},"吐鲁番":{lng:89.17,lat:42.95},"金昌":{lng:102.18,lat:38.5},"彰化":{lng:120.53,lat:24.08},"六安":{lng:116.5,lat:31.77},"遵义":{lng:106.92,lat:27.73},"泰安":{lng:117.08,lat:36.2},"南通":{lng:120.88,lat:31.98},"淮北":{lng:116.8,lat:33.95},"凉山":{lng:102.27,lat:27.9},"西双版纳":{lng:100.8,lat:22.02},"松原":{lng:124.82,lat:45.13},"景德镇":{lng:117.17,lat:29.27},"贵阳":{lng:106.63,lat:26.65},"贵港":{lng:109.6,lat:23.1},"常州":{lng:119.95,lat:31.78},"吕梁":{lng:111.13,lat:37.52},"澎湖":{lng:119.58,lat:23.58},"荆州":{lng:112.23,lat:30.33},"扬州":{lng:119.4,lat:32.4},"恩施":{lng:109.47,lat:30.3},"林芝":{lng:94.37,lat:29.68},"四平":{lng:124.35,lat:43.17},"攀枝花":{lng:101.72,lat:26.58},"澳门":{lng:113.33,lat:22.13},"赣州":{lng:114.93,lat:25.83},"威海":{lng:122.12,lat:37.52},"荆门":{lng:112.2,lat:31.03},"淮安":{lng:119.02,lat:33.62},"玉林":{lng:110.17,lat:22.63},"衡阳":{lng:112.57,lat:26.9},"桂林":{lng:110.28,lat:25.28},"红河":{lng:103.4,lat:23.37},"杭州":{lng:120.15,lat:30.28},"临汾":{lng:111.52,lat:36.08},"青岛":{lng:120.38,lat:36.07},"包头":{lng:109.83,lat:40.65},"广元":{lng:105.83,lat:32.43},"平顶山":{lng:113.18,lat:33.77},"台州":{lng:121.43,lat:28.68},"甘孜":{lng:101.97,lat:30.05},"甘南":{lng:123.5,lat:47.92},"龙岩":{lng:117.03,lat:25.1},"庆阳":{lng:107.63,lat:35.73},"保山":{lng:99.17,lat:25.12},"中山":{lng:121.63,lat:38.92},"海南自治州":{lng:102.375,lat:35.895},"新余":{lng:114.92,lat:27.82},"平凉":{lng:106.67,lat:35.55},"湖州":{lng:120.08,lat:30.9},"湘潭":{lng:112.95,lat:27.78},"漯河":{lng:114.02,lat:33.58},"乐山":{lng:103.77,lat:29.57},"乌鲁木齐":{lng:87.6,lat:43.8},"乌海":{lng:106.82,lat:39.67},"重庆":{lng:106.55,lat:29.57},"香港":{lng:114.08,lat:22.2},"焦作":{lng:113.25,lat:35.22},"十堰":{lng:110.78,lat:32.65},"石嘴山":{lng:106.38,lat:39.02},"宿迁":{lng:118.28,lat:33.97},"合肥":{lng:117.25,lat:31.83},"黄冈":{lng:114.87,lat:30.45},"孝感":{lng:113.92,lat:30.93},"果洛":{lng:100.23,lat:34.48},"成都":{lng:104.07,lat:30.67},"台东":{lng:121.15,lat:22.75},"海西":{lng:97.37,lat:37.37},"金门":{lng:118.32,lat:24.43},"保定":{lng:115.47,lat:38.87},"温州":{lng:120.7,lat:28},"延安":{lng:109.48,lat:36.6},"晋城":{lng:112.83,lat:35.5},"邵阳":{lng:111.47,lat:27.25},"鹤壁":{lng:114.28,lat:35.75},"博尔塔拉":{lng:82.07,lat:44.9},"承德":{lng:117.93,lat:40.97},"日照":{lng:119.52,lat:35.42},"晋中":{lng:112.75,lat:37.68},"怀化":{lng:110,lat:27.57},"潮州":{lng:116.62,lat:23.67},"烟台":{lng:121.43,lat:37.45},"常德":{lng:111.68,lat:29.05},"亳州":{lng:115.78,lat:33.85},"许昌":{lng:113.83,lat:34},"昌吉":{lng:87.3,lat:44.02},"福州":{lng:119.3,lat:26.08},"抚顺":{lng:123.9,lat:41.88},"济南":{lng:116.98,lat:36.67},"广安":{lng:106.63,lat:30.47},"山南":{lng:91.77,lat:29.23},"楚雄":{lng:101.55,lat:25.03},"石家庄":{lng:114.52,lat:38.05},"张家界":{lng:110.47,lat:29.13},"吉安":{lng:114.9,lat:27.05},"肇庆":{lng:112.47,lat:23.05},"信阳":{lng:114.07,lat:32.13},"太原":{lng:112.55,lat:37.87},"辽源":{lng:125.13,lat:42.88},"齐齐哈尔":{lng:123.95,lat:47.33},"双鸭山":{lng:131.15,lat:46.63},"苏州":{lng:120.58,lat:31.3},"新乡":{lng:113.8,lat:35.2},"永州":{lng:111.62,lat:26.43},"衢州":{lng:118.87,lat:28.93},"汕头":{lng:116.68,lat:23.35},"聊城":{lng:115.98,lat:36.45},"和田":{lng:79.92,lat:37.12},"日喀则":{lng:88.88,lat:29.27},"娄底":{lng:112,lat:27.73},"黔西南":{lng:105.555,lat:25.405},"洛阳":{lng:112.45,lat:34.62},"防城港":{lng:108.35,lat:21.7},"咸宁":{lng:114.32,lat:29.85},"盘锦":{lng:122.07,lat:41.12},"葫芦岛":{lng:120.83,lat:40.72},"钦州":{lng:108.62,lat:21.95},"镇江":{lng:119.45,lat:32.2},"江门":{lng:113.08,lat:22.58},"酒泉":{lng:98.52,lat:39.75},"南昌":{lng:115.85,lat:28.68},"辽阳":{lng:123.07,lat:41.22},"南投":{lng:120.67,lat:23.92},"衡水":{lng:115.68,lat:37.73},"宣城":{lng:118.75,lat:30.95},"桃园":{lng:121.3,lat:24.97},"济宁":{lng:116.58,lat:35.42},"基隆":{lng:121.73,lat:25.13},"固原":{lng:106.28,lat:36},"台中":{lng:120.67,lat:24.15},"郴州":{lng:113.02,lat:25.78},"伊犁":{lng:81.32,lat:43.92},"黔南":{lng:107.52,lat:26.27},"本溪":{lng:123.77,lat:41.3},"锦州":{lng:121.13,lat:41.1},"大庆":{lng:125.03,lat:46.58},"屏东":{lng:120.48,lat:22.67},"大兴安岭":{lng:124.12,lat:50.42},"商丘":{lng:115.65,lat:34.45},"高雄":{lng:120.37,lat:22.63},"绍兴":{lng:120.47,lat:30.08},"花莲":{lng:121.6,lat:23.98},"六盘水":{lng:104.83,lat:26.6},"克孜勒苏柯尔克孜":{lng:76.205,lat:39.76},"湘西":{lng:109.73,lat:28.32},"绥化":{lng:126.98,lat:46.63},"吴忠":{lng:106.2,lat:37.98},"金华":{lng:119.65,lat:29.08},"无锡":{lng:120.3,lat:31.57},"雅安":{lng:103,lat:29.98},"台南":{lng:120.32,lat:23.32},"临夏":{lng:103,lat:35.5},"邢台":{lng:114.48,lat:37.07},"廊坊":{lng:116.7,lat:39.52},"昆明":{lng:102.72,lat:25.05},"深圳":{lng:114.05,lat:22.55},"邯郸":{lng:114.48,lat:36.62},"运城":{lng:110.98,lat:35.02},"黄石":{lng:115.03,lat:30.2},"襄樊":{lng:112.15,lat:32.02},"台北":{lng:121.47,lat:25.02},"苗栗":{lng:120.8,lat:24.53},"通化":{lng:125.93,lat:41.73},"云林":{lng:120.53,lat:23.72},"上海":{lng:121.47,lat:31.23},"潍坊":{lng:119.15,lat:36.7},"贺州":{lng:111.55,lat:24.42},"普洱":{lng:100.735,lat:23.43},"白城":{lng:122.83,lat:45.62},"资阳":{lng:112.32,lat:28.6},"曲靖":{lng:103.8,lat:25.5},"长治":{lng:113.03,lat:36.05},"兴安":{lng:124.12,lat:50.42},"湛江":{lng:110.35,lat:21.27},"哈尔滨":{lng:126.53,lat:45.8},"呼伦贝尔":{lng:119.77,lat:49.22},"渭南":{lng:109.5,lat:34.5},"鞍山":{lng:122.98,lat:41.1},"长沙":{lng:112.93,lat:28.23},"中卫":{lng:105.18,lat:37.52},"泸州":{lng:105.43,lat:28.87},"陇南":{lng:104.92,lat:33.4},"菏泽":{lng:115.585,lat:35.26},"德阳":{lng:104.38,lat:31.13},"广州":{lng:113.27,lat:23.13},"阜阳":{lng:115.82,lat:32.9},"岳阳":{lng:113.12,lat:29.15},"大连":{lng:121.62,lat:38.92},"丹东":{lng:124.38,lat:40.13},"萍乡":{lng:113.85,lat:27.63},"兰州":{lng:103.82,lat:36.07},"梅州":{lng:116.12,lat:24.28},"嘉峪关":{lng:98.27,lat:39.8},"沈阳":{lng:123.43,lat:41.8},"绵阳":{lng:104.73,lat:31.47},"海东":{lng:102.12,lat:36.5},"阿勒泰":{lng:88.13,lat:47.85},"遂宁":{lng:105.57,lat:30.52},"泉州":{lng:118.67,lat:24.88},"河源":{lng:114.7,lat:23.73},"营口":{lng:122.23,lat:40.67},"连云港":{lng:119.22,lat:34.6},"那曲":{lng:92.07,lat:31.48},"宜昌":{lng:111.28,lat:30.7},"七台河":{lng:130.95,lat:45.78},"滁州":{lng:118.32,lat:32.3},"朔州":{lng:112.43,lat:39.33},"张家口":{lng:114.88,lat:40.82},"铜陵":{lng:117.78,lat:30.95},"怒江":{lng:98.85,lat:25.85},"牡丹江":{lng:129.6,lat:44.58},"益阳":{lng:112.32,lat:28.6},"北海":{lng:109.12,lat:21.48},"宜春":{lng:114.38,lat:27.8},"新北":{lng:119.97,lat:31.83},"天水":{lng:105.72,lat:34.58},"阳泉":{lng:113.57,lat:37.85},"咸阳":{lng:108.7,lat:34.33},"自贡":{lng:104.78,lat:29.35},"云浮":{lng:112.03,lat:22.92},"安顺":{lng:105.95,lat:26.25},"崇左":{lng:107.37,lat:22.4},"丽江":{lng:100.23,lat:26.88},"北京":{lng:116.4,lat:39.9},"拉萨":{lng:91.13,lat:29.65},"阿里":{lng:80.1,lat:32.5},"西安":{lng:108.93,lat:34.27},"宝鸡":{lng:107.13,lat:34.37},"西宁":{lng:101.78,lat:36.62},"丽水":{lng:119.92,lat:28.45},"喀什":{lng:75.98,lat:39.47},"驻马店":{lng:114.02,lat:32.98},"玉树":{lng:97.02,lat:33},"铜川":{lng:108.93,lat:34.9},"莱芜":{lng:117.67,lat:36.22},"来宾":{lng:109.23,lat:23.73},"巴音郭楞":{lng:86.15,lat:41.77},"昭通":{lng:103.72,lat:27.33},"达州":{lng:107.5,lat:31.22},"濮阳":{lng:115.03,lat:35.77},"芜湖":{lng:118.57,lat:31.15},"汕尾":{lng:115.37,lat:22.78},"阳江":{lng:111.98,lat:21.87},"九江":{lng:115.88,lat:29.62},"抚州":{lng:116.35,lat:28},"铁岭":{lng:123.83,lat:42.3},"枣庄":{lng:117.32,lat:34.82},"武威":{lng:102.63,lat:37.93},"德州":{lng:116.3,lat:37.45},"大同":{lng:124.82,lat:46.03},"银川":{lng:106.28,lat:38.47},"毕节":{lng:105.28,lat:27.3},"株洲":{lng:113.13,lat:27.72},"珠海":{lng:113.57,lat:22.27},"延边":{lng:129.5,lat:42.88},"吉林市":{lng:126.55,lat:43.83},"阜新":{lng:121.75,lat:42.07},"忻州":{lng:112.73,lat:38.42},"乌兰察布":{lng:113.12,lat:40.98},"巴中":{lng:106.77,lat:31.85},"张掖":{lng:100.45,lat:38.93},"佳木斯":{lng:130.37,lat:46.82},"泰州":{lng:119.92,lat:32.45},"韶关":{lng:113.6,lat:24.82},"淄博":{lng:118.05,lat:36.82},"天津":{lng:117.2,lat:39.12},"鄂尔多斯":{lng:109.8,lat:39.62},"马鞍山":{lng:118.5,lat:31.7},"南平":{lng:118.17,lat:26.65},"河池":{lng:108.07,lat:24.7},"黄山":{lng:118.33,lat:29.72},"唐山":{lng:118.2,lat:39.63},"白山":{lng:126.42,lat:41.93},"蚌埠":{lng:117.38,lat:32.92},"商洛":{lng:109.93,lat:33.87},"鄂州":{lng:114.88,lat:30.4},"滨州":{lng:117.97,lat:37.38},"徐州":{lng:117.18,lat:34.27},"阿克苏":{lng:80.27,lat:41.17},"巢湖":{lng:117.87,lat:31.6},"东营":{lng:118.67,lat:37.43},"黔东南":{lng:107.97,lat:26.58},"梧州":{lng:111.27,lat:23.48},"巴彦淖尔":{lng:107.42,lat:40.75},"惠州":{lng:114.42,lat:23.12},"新竹":{lng:120.95,lat:24.82},"百色":{lng:106.62,lat:23.9},"阿拉善盟":{lng:105.67,lat:38.83},"长春":{lng:125.32,lat:43.9},"哈密":{lng:93.52,lat:42.83},"眉山":{lng:103.83,lat:30.05},"嘉兴":{lng:120.75,lat:30.75},"克拉玛依":{lng:84.87,lat:45.6},"汉中":{lng:107.02,lat:33.07},"迪庆":{lng:99.7,lat:27.83},"盐城":{lng:120.15,lat:33.35},"白银":{lng:104.18,lat:36.55},"锡林郭勒":{lng:116.07,lat:43.95},"秦皇岛":{lng:119.6,lat:39.93},"昌都":{lng:97.18,lat:31.13},"赤峰":{lng:118.92,lat:42.27},"宜兰":{lng:121.75,lat:24.77},"沧州":{lng:116.83,lat:38.3},"南京":{lng:118.78,comment:"",lat:32.07},"舟山":{lng:122.2,lat:30},"郑州":{lng:113.62,lat:34.75},"宁德":{lng:119.52,lat:26.67},"内蒙古":{lng:111.65,lat:40.82},"台湾":{lng:121.56,lat:25.03},"兴安盟乌兰浩特":{lng:122.0931,lat:46.0727}};
},{}],"EUz4":[function(require,module,exports) {
module.exports={"阿富汗":[67.709953,33.93911],"安哥拉":[17.873887,-11.202692],"阿尔巴尼亚":[20.168331,41.153332],"阿联酋":[53.847818,23.424076],"阿根廷":[-63.61667199999999,-38.416097],"亚美尼亚":[45.038189,40.069099],"法属南半球和南极领地":[69.348557,-49.280366],"澳大利亚":[133.775136,-25.274398],"奥地利":[14.550072,47.516231],"阿塞拜疆":[47.576927,40.143105],"布隆迪":[29.918886,-3.373056],"比利时":[4.469936,50.503887],"贝宁":[2.315834,9.30769],"布基纳法索":[-1.561593,12.238333],"孟加拉国":[90.356331,23.684994],"保加利亚":[25.48583,42.733883],"巴哈马":[-77.39627999999999,25.03428],"波斯尼亚和黑塞哥维那":[17.679076,43.915886],"白俄罗斯":[27.953389,53.709807],"伯利兹":[-88.49765,17.189877],"百慕大":[-64.7505,32.3078],"玻利维亚":[-63.58865299999999,-16.290154],"巴西":[-51.92528,-14.235004],"文莱":[114.727669,4.535277],"不丹":[90.433601,27.514162],"博茨瓦纳":[24.684866,-22.328474],"中非共和国":[20.939444,6.611110999999999],"加拿大":[-106.346771,56.130366],"瑞士":[8.227511999999999,46.818188],"智利":[-71.542969,-35.675147],"中国":[104.195397,35.86166],"象牙海岸":[-5.547079999999999,7.539988999999999],"喀麦隆":[12.354722,7.369721999999999],"刚果民主共和国":[21.758664,-4.038333],"刚果共和国":[15.827659,-.228021],"哥伦比亚":[-74.297333,4.570868],"哥斯达黎加":[-83.753428,9.748916999999999],"古巴":[-77.781167,21.521757],"北塞浦路斯":[33.429859,35.126413],"塞浦路斯":[33.429859,35.126413],"捷克共和国":[15.472962,49.81749199999999],"德国":[10.451526,51.165691],"吉布提":[42.590275,11.825138],"丹麦":[9.501785,56.26392],"多明尼加共和国":[-70.162651,18.735693],"阿尔及利亚":[1.659626,28.033886],"厄瓜多尔":[-78.18340599999999,-1.831239],"埃及":[30.802498,26.820553],"厄立特里亚":[39.782334,15.179384],"西班牙":[-3.74922,40.46366700000001],"爱沙尼亚":[25.013607,58.595272],"埃塞俄比亚":[40.489673,9.145000000000001],"芬兰":[25.748151,61.92410999999999],"斐":[178.065032,-17.713371],"福克兰群岛":[-59.523613,-51.796253],"法国":[2.213749,46.227638],"加蓬":[11.609444,-.803689],"英国":[-3.435973,55.378051],"格鲁吉亚":[-82.9000751,32.1656221],"加纳":[-1.023194,7.946527],"几内亚":[-9.696645,9.945587],"冈比亚":[-15.310139,13.443182],"几内亚比绍":[-15.180413,11.803749],"赤道几内亚":[10.267895,1.650801],"希腊":[21.824312,39.074208],"格陵兰":[-42.604303,71.706936],"危地马拉":[-90.23075899999999,15.783471],"法属圭亚那":[-53.125782,3.933889],"圭亚那":[-58.93018,4.860416],"洪都拉斯":[-86.241905,15.199999],"克罗地亚":[15.2,45.1],"海地":[-72.285215,18.971187],"匈牙利":[19.503304,47.162494],"印尼":[113.921327,-.789275],"爱尔兰":[-8.24389,53.41291],"伊朗":[53.688046,32.427908],"伊拉克":[43.679291,33.223191],"冰岛":[-19.020835,64.963051],"以色列":[34.851612,31.046051],"意大利":[12.56738,41.87194],"牙买加":[-77.297508,18.109581],"约旦":[36.238414,30.585164],"日本":[138.252924,36.204824],"哈萨克斯坦":[66.923684,48.019573],"肯尼亚":[37.906193,-.023559],"吉尔吉斯斯坦":[74.766098,41.20438],"柬埔寨":[104.990963,12.565679],"韩国":[127.766922,35.907757],"科索沃":[20.902977,42.6026359],"科威特":[47.481766,29.31166],"老挝":[102.495496,19.85627],"黎巴嫩":[35.862285,33.854721],"利比里亚":[-9.429499000000002,6.428055],"利比亚":[17.228331,26.3351],"斯里兰卡":[80.77179699999999,7.873053999999999],"莱索托":[28.233608,-29.609988],"立陶宛":[23.881275,55.169438],"卢森堡":[6.129582999999999,49.815273],"拉脱维亚":[24.603189,56.879635],"摩洛哥":[-7.092619999999999,31.791702],"摩尔多瓦":[28.369885,47.411631],"马达加斯加":[46.869107,-18.766947],"墨西哥":[-102.552784,23.634501],"马其顿":[21.745275,41.608635],"马里":[-3.996166,17.570692],"缅甸":[95.956223,21.913965],"黑山":[19.37439,42.708678],"蒙古":[103.846656,46.862496],"莫桑比克":[35.529562,-18.665695],"毛里塔尼亚":[-10.940835,21.00789],"马拉维":[34.301525,-13.254308],"马来西亚":[101.975766,4.210484],"纳米比亚":[18.49041,-22.95764],"新喀里多尼亚":[165.618042,-20.904305],"尼日尔":[8.081666,17.607789],"尼日利亚":[8.675277,9.081999],"尼加拉瓜":[-85.207229,12.865416],"荷兰":[5.291265999999999,52.132633],"挪威":[8.468945999999999,60.47202399999999],"尼泊尔":[84.12400799999999,28.394857],"新西兰":[174.885971,-40.900557],"阿曼":[55.923255,21.512583],"巴基斯坦":[69.34511599999999,30.375321],"巴拿马":[-80.782127,8.537981],"秘鲁":[-75.015152,-9.189967],"菲律宾":[121.774017,12.879721],"巴布亚新几内亚":[143.95555,-6.314992999999999],"波兰":[19.145136,51.919438],"波多黎各":[-66.590149,18.220833],"北朝鲜":[127.510093,40.339852],"葡萄牙":[-8.224454,39.39987199999999],"巴拉圭":[-58.443832,-23.442503],"卡塔尔":[51.183884,25.354826],"罗马尼亚":[24.96676,45.943161],"俄罗斯":[105.318756,61.52401],"卢旺达":[29.873888,-1.940278],"西撒哈拉":[-12.885834,24.215527],"沙特阿拉伯":[45.079162,23.885942],"苏丹":[30.217636,12.862807],"南苏丹":[31.3069788,6.876991899999999],"塞内加尔":[-14.452362,14.497401],"所罗门群岛":[160.156194,-9.64571],"塞拉利昂":[-11.779889,8.460555],"萨尔瓦多":[-88.89653,13.794185],"索马里兰":[46.8252838,9.411743399999999],"索马里":[46.199616,5.152149],"塞尔维亚共和国":[21.005859,44.016521],"苏里南":[-56.027783,3.919305],"斯洛伐克":[19.699024,48.669026],"斯洛文尼亚":[14.995463,46.151241],"瑞典":[18.643501,60.12816100000001],"斯威士兰":[31.465866,-26.522503],"叙利亚":[38.996815,34.80207499999999],"乍得":[18.732207,15.454166],"多哥":[.824782,8.619543],"泰国":[100.992541,15.870032],"塔吉克斯坦":[71.276093,38.861034],"土库曼斯坦":[59.556278,38.969719],"东帝汶":[125.727539,-8.874217],"特里尼达和多巴哥":[-61.222503,10.691803],"突尼斯":[9.537499,33.886917],"土耳其":[35.243322,38.963745],"坦桑尼亚联合共和国":[34.888822,-6.369028],"乌干达":[32.290275,1.373333],"乌克兰":[31.16558,48.379433],"乌拉圭":[-55.765835,-32.522779],"美国":[-95.712891,37.09024],"乌兹别克斯坦":[64.585262,41.377491],"委内瑞拉":[-66.58973,6.42375],"越南":[108.277199,14.058324],"瓦努阿图":[166.959158,-15.376706],"西岸":[35.3027226,31.9465703],"也门":[48.516388,15.552727],"南非":[22.937506,-30.559482],"赞比亚":[27.849332,-13.133897],"津巴布韦":[29.154857,-19.015438],"科摩罗":[43.872219,-11.875001],"印度尼西亚":[106.515414,-6.10304],"印度":[78.96288,20.593684]};
},{}],"mlDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderLayer=void 0;var e=require("@antv/l7"),t=require("@antv/l7-maps"),r=n(require("../data/cityGeo")),a=n(require("../data/country"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return u(e)||c(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(u){n=!0,o=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}return r}}function u(e){if(Array.isArray(e))return e}var l=function(){var n=new e.Scene({id:"map",map:new t.GaodeMap({pitch:48.62562,style:"light",center:[104.026043,31.847],rotation:-.76,rotateEnable:!1,maxZoom:6,minZoom:4,zoom:4.48})});fetch("https://service-n9zsbooc-1252957949.gz.apigw.tencentcs.com/release/qq").then(function(e){return e.json()}).then(function(t){var i=[],c={};t.data.wuwei_ww_area_counts.forEach(function(e){var t=e.country,n=e.area,u=e.city;try{if(r.default[u]||r.default[n]){if(r.default[u]||!u)i.push(Object.assign(e,r.default[u||n]));else if(r.default[n])if(c[n]){var l=e.confirm,s=e.dead,d=e.heal;c[n].confirm+=l,c[n].dead+=s,c[n].heal+=d}else e.city="",c[n]=Object.assign(e,r.default[n])}else if(a.default[t]){var f=o(a.default[t],2),y=f[0],v=f[1];i.push(Object.assign(e,{lng:y,lat:v}))}}catch(e){console.error(e)}}),i=i.concat(Object.values(c));var u=new e.PointLayer({}).source(i,{parser:{type:"json",x:"lng",y:"lat"}}).shape("cylinder").size("confirm",function(e){return[2,2,e/2]}).active(!0).color("#a5c2e8").style({opacity:1}),l=new e.PointLayer({}).source(i,{parser:{type:"json",x:"lng",y:"lat"}}).shape("cylinder").size("dead",function(e){return e[0]?[2,2,e/2]:[0,0,0]}).active(!0).color("red").style({opacity:.9}),s=function(t){var r=t.feature,a=r.country,o=r.area,i=r.city,c=r.confirm,u=r.dead,l=r.heal;n.addPopup(new e.Popup({offsets:[0,0],closeButton:!1}).setLnglat(t.lngLat).setHTML("<div>".concat(i||o||a,"</div><div>确诊：").concat(c," 人</div><div>死亡：").concat(u," 人</div><div>治愈：").concat(l," 人</div>")))};u.on("mousemove",s),l.on("mousemove",s),n.addLayer(u),n.addLayer(l),n.addControl(new e.Layers({overlayers:{"确诊":u,"死亡":l}})),n.addControl(new e.Zoom)})};exports.renderLayer=l;
},{"@antv/l7":"zxWE","@antv/l7-maps":"Ibza","../data/cityGeo":"q8Gp","../data/country":"EUz4"}],"WBnc":[function(require,module,exports) {
var global = arguments[3];
var r,e=arguments[3];exports.fetch=s(e.fetch)&&s(e.ReadableStream),exports.writableStream=s(e.WritableStream),exports.abortController=s(e.AbortController),exports.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),exports.blobConstructor=!0}catch(f){}function t(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(f){r=null}}else r=null;return r}function o(r){var e=t();if(!e)return!1;try{return e.responseType=r,e.responseType===r}catch(f){}return!1}var a=void 0!==e.ArrayBuffer,n=a&&s(e.ArrayBuffer.prototype.slice);function s(r){return"function"==typeof r}exports.arraybuffer=exports.fetch||a&&o("arraybuffer"),exports.msstream=!exports.fetch&&n&&o("ms-stream"),exports.mozchunkedarraybuffer=!exports.fetch&&a&&o("moz-chunked-arraybuffer"),exports.overrideMimeType=exports.fetch||!!t()&&s(t().overrideMimeType),exports.vbArray=s(e.VBArray),r=null;
},{}],"PigS":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"NiPF":[function(require,module,exports) {
var process = require("process");
var n=require("process");function e(e,r,t,c){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,l,u=arguments.length;switch(u){case 0:case 1:return n.nextTick(e);case 2:return n.nextTick(function(){e.call(null,r)});case 3:return n.nextTick(function(){e.call(null,r,t)});case 4:return n.nextTick(function(){e.call(null,r,t,c)});default:for(i=new Array(u-1),l=0;l<i.length;)i[l++]=arguments[l];return n.nextTick(function(){e.apply(null,i)})}}void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?module.exports={nextTick:e}:module.exports=n;
},{"process":"kpD3"}],"BOve":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"JzG9":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):c(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=c(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,a(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,a(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"fquO":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"JzG9"}],"prL8":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"iism":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"XyCw":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"prL8","ieee754":"iism","isarray":"BOve","buffer":"XyCw"}],"AbXt":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"XyCw"}],"BdWL":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer;function t(r){return Array.isArray?Array.isArray(r):"[object Array]"===a(r)}function e(r){return"boolean"==typeof r}function n(r){return null===r}function o(r){return null==r}function i(r){return"number"==typeof r}function u(r){return"string"==typeof r}function s(r){return"symbol"==typeof r}function f(r){return void 0===r}function p(r){return"[object RegExp]"===a(r)}function c(r){return"object"==typeof r&&null!==r}function l(r){return"[object Date]"===a(r)}function y(r){return"[object Error]"===a(r)||r instanceof Error}function x(r){return"function"==typeof r}function b(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r}function a(r){return Object.prototype.toString.call(r)}exports.isArray=t,exports.isBoolean=e,exports.isNull=n,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=s,exports.isUndefined=f,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=r.isBuffer;
},{"buffer":"XyCw"}],"DXjP":[function(require,module,exports) {

"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var n=require("safe-buffer").Buffer,e=require("util");function i(t,n,e){t.copy(n,e)}module.exports=function(){function e(){t(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(0===this.length)return"";for(var n=this.head,e=""+n.data;n=n.next;)e+=t+n.data;return e},e.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),h=this.head,a=0;h;)i(h.data,e,a),a+=h.data.length,h=h.next;return e},e}(),e&&e.inspect&&e.inspect.custom&&(module.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t});
},{"safe-buffer":"AbXt","util":"aYep"}],"QcoR":[function(require,module,exports) {
"use strict";var t=require("process-nextick-args");function e(e,a){var r=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(a?a(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?(t.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):a&&a(e)}),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(t,e){t.emit("error",e)}module.exports={destroy:e,undestroy:a};
},{"process-nextick-args":"NiPF"}],"hyNs":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"Qqby":[function(require,module,exports) {
var process = require("process");

var global = arguments[3];
var e=require("process"),t=arguments[3],n=require("process-nextick-args");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){W(t,e)}}module.exports=g;var o,s=n.nextTick;g.WritableState=y;var f=Object.create(require("core-util-is"));f.inherits=require("inherits");var u={deprecate:require("util-deprecate")},a=require("./internal/streams/stream"),c=require("safe-buffer").Buffer,l=t.Uint8Array||function(){};function d(e){return c.from(e)}function h(e){return c.isBuffer(e)||e instanceof l}var b,p=require("./internal/streams/destroy");function w(){}function y(e,t){o=o||require("./_stream_duplex"),e=e||{};var n=t instanceof o;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){S(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(o=o||require("./_stream_duplex"),!(b.call(g,this)||this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function k(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}function v(e,t,r,i){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),n.nextTick(i,s),o=!1),o}function q(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}function _(e,t,n,r,i,o){if(!n){var s=q(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var f=t.objectMode?1:r.length;t.length+=f;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,f,r,i,o);return u}function m(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function R(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),T(e,t))}function x(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function S(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(x(n),t)R(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||B(e,n),r?s(M,e,n,o,i):M(e,n,o,i)}}function M(e,t,n,r){n||j(e,t),t.pendingcb--,r(),T(e,t)}function j(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function B(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var f=0,u=!0;n;)o[f]=n,n.isBuf||(u=!1),n=n.next,f+=1;o.allBuffers=u,m(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function T(e,t){var n=E(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function F(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function W(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}f.inherits(g,a),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):b=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&h(e);return o&&!c.isBuffer(e)&&(e=d(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ended?k(this,n):(o||v(this,r,e,n))&&(r.pendingcb++,i=_(this,r,o,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||B(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||F(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=p.destroy,g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)};
},{"process-nextick-args":"NiPF","core-util-is":"BdWL","inherits":"PigS","util-deprecate":"hyNs","./internal/streams/stream":"fquO","safe-buffer":"AbXt","./internal/streams/destroy":"QcoR","./_stream_duplex":"Y7Fs","process":"kpD3"}],"Y7Fs":[function(require,module,exports) {
"use strict";var e=require("process-nextick-args"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=Object.create(require("core-util-is"));r.inherits=require("inherits");var i=require("./_stream_readable"),a=require("./_stream_writable");r.inherits(l,i);for(var o=t(a.prototype),s=0;s<o.length;s++){var n=o[s];l.prototype[n]||(l.prototype[n]=a.prototype[n])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||e.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)};
},{"process-nextick-args":"NiPF","core-util-is":"BdWL","inherits":"PigS","./_stream_readable":"XaGX","./_stream_writable":"Qqby"}],"Lyvi":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"AbXt"}],"XaGX":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process"),n=require("process-nextick-args");module.exports=_;var r,i=require("isarray");_.ReadableState=w;var a=require("events").EventEmitter,d=function(e,t){return e.listeners(t).length},o=require("./internal/streams/stream"),s=require("safe-buffer").Buffer,u=e.Uint8Array||function(){};function l(e){return s.from(e)}function h(e){return s.isBuffer(e)||e instanceof u}var p=Object.create(require("core-util-is"));p.inherits=require("inherits");var f=require("util"),c=void 0;c=f&&f.debuglog?f.debuglog("stream"):function(){};var g,b=require("./internal/streams/BufferList"),m=require("./internal/streams/destroy");p.inherits(_,o);var v=["error","close","destroy","pause","resume"];function y(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function w(e,t){e=e||{};var n=t instanceof(r=r||require("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:d,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=require("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||require("./_stream_duplex"),!(this instanceof _))return new _(e);this._readableState=new w(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function M(e,t,n,r,i){var a,d=e._readableState;null===t?(d.reading=!1,x(e,d)):(i||(a=k(d,t)),a?e.emit("error",a):d.objectMode||t&&t.length>0?("string"==typeof t||d.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=l(t)),r?d.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,d,t,!0):d.ended?e.emit("error",new Error("stream.push() after EOF")):(d.reading=!1,d.decoder&&!n?(t=d.decoder.write(t),d.objectMode||0!==t.length?S(e,d,t,!1):C(e,d)):S(e,d,t,!1))):r||(d.reading=!1));return j(d)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&q(e)),C(e,t)}function k(e,t){var n;return h(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function j(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},_.prototype.unshift=function(e){return M(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return g||(g=require("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var R=8388608;function E(e){return e>=R?e=R:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function L(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,q(e)}}function q(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(W,e):W(e))}function W(e){c("emit readable"),e.emit("readable"),B(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(D,e,t))}function D(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function O(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&d(e,"data")&&(t.flowing=!0,B(e))}}function T(e){c("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}function P(e,t){t.reading||(c("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=I(e,t.buffer,t.decoder),n);var n}function I(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?A(e,t):F(e,t),r}function A(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,d=e>a.length?a.length:e;if(d===a.length?i+=a:i+=a.slice(0,e),0===(e-=d)){d===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(d));break}++r}return t.length-=r,i}function F(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,d=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,d),0===(e-=d)){d===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(d));break}++i}return t.length-=i,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function J(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):q(this),null;if(0===(e=L(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L(n,t))),null===(r=e>0?H(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var o=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?u:v;function s(t,n){c("onunpipe"),t===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",b),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",g),e.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",v),i.removeListener("data",f),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}a.endEmitted?n.nextTick(o):i.once("end",o),e.on("unpipe",s);var l=O(i);e.on("drain",l);var h=!1;var p=!1;function f(t){c("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==J(a.pipes,e))&&!h&&(c("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,p=!0),i.pause())}function g(t){c("onerror",t),v(),e.removeListener("error",g),0===d(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",m),v()}function m(){c("onfinish"),e.removeListener("close",b),v()}function v(){c("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",g),e.once("close",b),e.once("finish",m),e.emit("pipe",i),a.flowing||(c("pipe resume"),i.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var d=J(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&q(this):n.nextTick(T,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,U(this,e)),this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=H;
},{"process-nextick-args":"NiPF","isarray":"BOve","events":"JzG9","./internal/streams/stream":"fquO","safe-buffer":"AbXt","core-util-is":"BdWL","inherits":"PigS","util":"aYep","./internal/streams/BufferList":"DXjP","./internal/streams/destroy":"QcoR","./_stream_duplex":"Y7Fs","string_decoder/":"Lyvi","process":"kpD3"}],"q1yP":[function(require,module,exports) {
"use strict";module.exports=n;var t=require("./_stream_duplex"),r=Object.create(require("core-util-is"));function e(t,r){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,null!=r&&this.push(r),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(r){if(!(this instanceof n))return new n(r);t.call(this,r),this._transformState={afterTransform:e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush(function(r,e){a(t,r,e)}):a(this,null,null)}function a(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=require("inherits"),r.inherits(n,t),n.prototype.push=function(r,e){return this._transformState.needTransform=!1,t.prototype.push.call(this,r,e)},n.prototype._transform=function(t,r,e){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},n.prototype._destroy=function(r,e){var n=this;t.prototype._destroy.call(this,r,function(t){e(t),n.emit("close")})};
},{"./_stream_duplex":"Y7Fs","core-util-is":"BdWL","inherits":"PigS"}],"VKVX":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform"),e=Object.create(require("core-util-is"));function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}e.inherits=require("inherits"),e.inherits(t,r),t.prototype._transform=function(r,e,t){t(null,r)};
},{"./_stream_transform":"q1yP","core-util-is":"BdWL","inherits":"PigS"}],"Je3Q":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_readable.js":"XaGX","./lib/_stream_writable.js":"Qqby","./lib/_stream_duplex.js":"Y7Fs","./lib/_stream_transform.js":"q1yP","./lib/_stream_passthrough.js":"VKVX"}],"uAT7":[function(require,module,exports) {
var process = require("process");
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var e=require("process"),r=require("buffer").Buffer,t=arguments[3],s=require("./capability"),a=require("inherits"),o=require("readable-stream"),n=exports.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=exports.IncomingMessage=function(a,n,u,i){var c=this;if(o.Readable.call(c),c._mode=u,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){e.nextTick(function(){c.emit("close")})}),"fetch"===u){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(e,r){c.headers[r.toLowerCase()]=e,c.rawHeaders.push(r,e)}),s.writableStream){var d=new WritableStream({write:function(e){return new Promise(function(t,s){c._destroyed?s():c.push(new r(e))?t():c._resumeFetch=t})},close:function(){t.clearTimeout(i),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void n.body.pipeTo(d).catch(function(e){t.clearTimeout(i),c._destroyed||c.emit("error",e)})}catch(p){}}var h=n.body.getReader();!function e(){h.read().then(function(s){if(!c._destroyed){if(s.done)return t.clearTimeout(i),void c.push(null);c.push(new r(s.value)),e()}}).catch(function(e){t.clearTimeout(i),c._destroyed||c.emit("error",e)})}()}else{if(c._xhr=a,c._pos=0,c.url=a.responseURL,c.statusCode=a.status,c.statusMessage=a.statusText,a.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var t=r[1].toLowerCase();"set-cookie"===t?(void 0===c.headers[t]&&(c.headers[t]=[]),c.headers[t].push(r[2])):void 0!==c.headers[t]?c.headers[t]+=", "+r[2]:c.headers[t]=r[2],c.rawHeaders.push(r[1],r[2])}}),c._charset="x-user-defined",!s.overrideMimeType){var f=c.rawHeaders["mime-type"];if(f){var l=f.match(/;\s*charset=([^;])(;|$)/);l&&(c._charset=l[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(u,o.Readable),u.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var e=this,s=e._xhr,a=null;switch(e._mode){case"text:vbarray":if(s.readyState!==n.DONE)break;try{a=new t.VBArray(s.responseBody).toArray()}catch(d){}if(null!==a){e.push(new r(a));break}case"text":try{a=s.responseText}catch(d){e._mode="text:vbarray";break}if(a.length>e._pos){var o=a.substr(e._pos);if("x-user-defined"===e._charset){for(var u=new r(o.length),i=0;i<o.length;i++)u[i]=255&o.charCodeAt(i);e.push(u)}else e.push(o,e._charset);e._pos=a.length}break;case"arraybuffer":if(s.readyState!==n.DONE||!s.response)break;a=s.response,e.push(new r(new Uint8Array(a)));break;case"moz-chunked-arraybuffer":if(a=s.response,s.readyState!==n.LOADING||!a)break;e.push(new r(new Uint8Array(a)));break;case"ms-stream":if(a=s.response,s.readyState!==n.LOADING)break;var c=new t.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new r(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(a)}e._xhr.readyState===n.DONE&&"ms-stream"!==e._mode&&e.push(null)};
},{"./capability":"WBnc","inherits":"PigS","readable-stream":"Je3Q","process":"kpD3","buffer":"XyCw"}],"nvEx":[function(require,module,exports) {

var e=require("buffer").Buffer;module.exports=function(f){if(f instanceof Uint8Array){if(0===f.byteOffset&&f.byteLength===f.buffer.byteLength)return f.buffer;if("function"==typeof f.buffer.slice)return f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength)}if(e.isBuffer(f)){for(var r=new Uint8Array(f.length),t=f.length,n=0;n<t;n++)r[n]=f[n];return r.buffer}throw new Error("Argument must be a Buffer")};
},{"buffer":"XyCw"}],"utY0":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var global = arguments[3];
var process = require("process");
var e=require("buffer").Buffer,t=arguments[3],r=require("process"),o=require("./capability"),n=require("inherits"),i=require("./response"),s=require("readable-stream"),a=require("to-arraybuffer"),c=i.IncomingMessage,u=i.readyStates;function d(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}var f=module.exports=function(t){var r,n=this;s.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){n.setHeader(e,t.headers[e])});var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!o.abortController)i=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!o.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=d(r,i),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};function h(e){try{var t=e.status;return null!==t&&0!==t}catch(r){return!1}}n(f,s.Writable),f.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===p.indexOf(r)&&(this._headers[r]={name:e,value:t})},f.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},f.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},f.prototype._onFinish=function(){var n=this;if(!n._destroyed){var i=n._opts,s=n._headers,c=null;"GET"!==i.method&&"HEAD"!==i.method&&(c=o.arraybuffer?a(e.concat(n._body)):o.blobConstructor?new t.Blob(n._body.map(function(e){return a(e)}),{type:(s["content-type"]||{}).value||""}):e.concat(n._body).toString());var d=[];if(Object.keys(s).forEach(function(e){var t=s[e].name,r=s[e].value;Array.isArray(r)?r.forEach(function(e){d.push([t,e])}):d.push([t,r])}),"fetch"===n._mode){var f=null;if(o.abortController){var h=new AbortController;f=h.signal,n._fetchAbortController=h,"requestTimeout"in i&&0!==i.requestTimeout&&(n._fetchTimer=t.setTimeout(function(){n.emit("requestTimeout"),n._fetchAbortController&&n._fetchAbortController.abort()},i.requestTimeout))}t.fetch(n._opts.url,{method:n._opts.method,headers:d,body:c||void 0,mode:"cors",credentials:i.withCredentials?"include":"same-origin",signal:f}).then(function(e){n._fetchResponse=e,n._connect()},function(e){t.clearTimeout(n._fetchTimer),n._destroyed||n.emit("error",e)})}else{var p=n._xhr=new t.XMLHttpRequest;try{p.open(n._opts.method,n._opts.url,!0)}catch(l){return void r.nextTick(function(){n.emit("error",l)})}"responseType"in p&&(p.responseType=n._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!i.withCredentials),"text"===n._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in i&&(p.timeout=i.requestTimeout,p.ontimeout=function(){n.emit("requestTimeout")}),d.forEach(function(e){p.setRequestHeader(e[0],e[1])}),n._response=null,p.onreadystatechange=function(){switch(p.readyState){case u.LOADING:case u.DONE:n._onXHRProgress()}},"moz-chunked-arraybuffer"===n._mode&&(p.onprogress=function(){n._onXHRProgress()}),p.onerror=function(){n._destroyed||n.emit("error",new Error("XHR error"))};try{p.send(c)}catch(l){return void r.nextTick(function(){n.emit("error",l)})}}}},f.prototype._onXHRProgress=function(){h(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},f.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},f.prototype._write=function(e,t,r){this._body.push(e),r()},f.prototype.abort=f.prototype.destroy=function(){this._destroyed=!0,t.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},f.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),s.Writable.prototype.end.call(this,e,t,r)},f.prototype.flushHeaders=function(){},f.prototype.setTimeout=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"];
},{"./capability":"WBnc","inherits":"PigS","./response":"uAT7","readable-stream":"Je3Q","to-arraybuffer":"nvEx","buffer":"XyCw","process":"kpD3"}],"yGvU":[function(require,module,exports) {
module.exports=o;var r=Object.prototype.hasOwnProperty;function o(){for(var o={},t=0;t<arguments.length;t++){var e=arguments[t];for(var a in e)r.call(e,a)&&(o[a]=e[a])}return o}
},{}],"pfYY":[function(require,module,exports) {
module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};
},{}],"GeIn":[function(require,module,exports) {
var global = arguments[3];
var define;
var o,e=arguments[3];!function(n){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,t="object"==typeof module&&module&&!module.nodeType&&module,u="object"==typeof e&&e;u.global!==u&&u.window!==u&&u.self!==u||(n=u);var i,f,c=2147483647,l=36,s=1,p=26,a=38,d=700,h=72,v=128,g="-",w=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=l-s,b=Math.floor,j=String.fromCharCode;function A(o){throw new RangeError(m[o])}function I(o,e){for(var n=o.length,r=[];n--;)r[n]=e(o[n]);return r}function E(o,e){var n=o.split("@"),r="";return n.length>1&&(r=n[0]+"@",o=n[1]),r+I((o=o.replace(y,".")).split("."),e).join(".")}function F(o){for(var e,n,r=[],t=0,u=o.length;t<u;)(e=o.charCodeAt(t++))>=55296&&e<=56319&&t<u?56320==(64512&(n=o.charCodeAt(t++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),t--):r.push(e);return r}function O(o){return I(o,function(o){var e="";return o>65535&&(e+=j((o-=65536)>>>10&1023|55296),o=56320|1023&o),e+=j(o)}).join("")}function S(o,e){return o+22+75*(o<26)-((0!=e)<<5)}function T(o,e,n){var r=0;for(o=n?b(o/d):o>>1,o+=b(o/e);o>C*p>>1;r+=l)o=b(o/C);return b(r+(C+1)*o/(o+a))}function L(o){var e,n,r,t,u,i,f,a,d,w,x,y=[],m=o.length,C=0,j=v,I=h;for((n=o.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)o.charCodeAt(r)>=128&&A("not-basic"),y.push(o.charCodeAt(r));for(t=n>0?n+1:0;t<m;){for(u=C,i=1,f=l;t>=m&&A("invalid-input"),((a=(x=o.charCodeAt(t++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:l)>=l||a>b((c-C)/i))&&A("overflow"),C+=a*i,!(a<(d=f<=I?s:f>=I+p?p:f-I));f+=l)i>b(c/(w=l-d))&&A("overflow"),i*=w;I=T(C-u,e=y.length+1,0==u),b(C/e)>c-j&&A("overflow"),j+=b(C/e),C%=e,y.splice(C++,0,j)}return O(y)}function M(o){var e,n,r,t,u,i,f,a,d,w,x,y,m,C,I,E=[];for(y=(o=F(o)).length,e=v,n=0,u=h,i=0;i<y;++i)(x=o[i])<128&&E.push(j(x));for(r=t=E.length,t&&E.push(g);r<y;){for(f=c,i=0;i<y;++i)(x=o[i])>=e&&x<f&&(f=x);for(f-e>b((c-n)/(m=r+1))&&A("overflow"),n+=(f-e)*m,e=f,i=0;i<y;++i)if((x=o[i])<e&&++n>c&&A("overflow"),x==e){for(a=n,d=l;!(a<(w=d<=u?s:d>=u+p?p:d-u));d+=l)I=a-w,C=l-w,E.push(j(S(w+I%C,0))),a=b(I/C);E.push(j(S(a,0))),u=T(n,m,r==t),n=0,++r}++n,++e}return E.join("")}if(i={version:"1.4.1",ucs2:{decode:F,encode:O},decode:L,encode:M,toASCII:function(o){return E(o,function(o){return x.test(o)?"xn--"+M(o):o})},toUnicode:function(o){return E(o,function(o){return w.test(o)?L(o.slice(4).toLowerCase()):o})}},"function"==typeof o&&"object"==typeof o.amd&&o.amd)o("punycode",function(){return i});else if(r&&t)if(module.exports==r)t.exports=i;else for(f in i)i.hasOwnProperty(f)&&(r[f]=i[f]);else n.punycode=i}(this);
},{}],"xFhV":[function(require,module,exports) {
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}],"zTGR":[function(require,module,exports) {
"use strict";function r(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(t,n,o,a){n=n||"&",o=o||"=";var s={};if("string"!=typeof t||0===t.length)return s;var p=/\+/g;t=t.split(n);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var i=0;i<c;++i){var y,l,f,v,b=t[i].replace(p,"%20"),d=b.indexOf(o);d>=0?(y=b.substr(0,d),l=b.substr(d+1)):(y=b,l=""),f=decodeURIComponent(y),v=decodeURIComponent(l),r(s,f)?e(s[f])?s[f].push(v):s[f]=[s[f],v]:s[f]=v}return s};var e=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],"yibE":[function(require,module,exports) {
"use strict";var n=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}};module.exports=function(o,u,c,a){return u=u||"&",c=c||"=",null===o&&(o=void 0),"object"==typeof o?r(t(o),function(t){var a=encodeURIComponent(n(t))+c;return e(o[t])?r(o[t],function(e){return a+encodeURIComponent(n(e))}).join(u):a+encodeURIComponent(n(o[t]))}).join(u):a?encodeURIComponent(n(a))+c+encodeURIComponent(n(o)):""};var e=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};function r(n,e){if(n.map)return n.map(e);for(var r=[],t=0;t<n.length;t++)r.push(e(n[t],t));return r}var t=Object.keys||function(n){var e=[];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(r);return e};
},{}],"aCbu":[function(require,module,exports) {
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":"zTGR","./encode":"yibE"}],"ss6L":[function(require,module,exports) {
"use strict";var t=require("punycode"),s=require("./util");function h(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=b,exports.resolve=O,exports.resolveObject=d,exports.format=q,exports.Url=h;var e=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,r=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r","\n","\t"],n=["{","}","|","\\","^","`"].concat(o),i=["'"].concat(n),l=["%","/","?",";","#"].concat(i),p=["/","?","#"],c=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=require("querystring");function b(t,e,a){if(t&&s.isObject(t)&&t instanceof h)return t;var r=new h;return r.parse(t,e,a),r}function q(t){return s.isString(t)&&(t=b(t)),t instanceof h?t.format():h.prototype.format.call(t)}function O(t,s){return b(t,!1,!0).resolve(s)}function d(t,s){return t?b(t,!1,!0).resolveObject(s):s}h.prototype.parse=function(h,a,o){if(!s.isString(h))throw new TypeError("Parameter 'url' must be a string, not "+typeof h);var n=h.indexOf("?"),b=-1!==n&&n<h.indexOf("#")?"?":"#",q=h.split(b);q[0]=q[0].replace(/\\/g,"/");var O=h=q.join(b);if(O=O.trim(),!o&&1===h.split("#").length){var d=r.exec(O);if(d)return this.path=O,this.href=O,this.pathname=d[1],d[2]?(this.search=d[2],this.query=a?y.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var j=e.exec(O);if(j){var x=(j=j[0]).toLowerCase();this.protocol=x,O=O.substr(j.length)}if(o||j||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===O.substr(0,2);!A||j&&v[j]||(O=O.substr(2),this.slashes=!0)}if(!v[j]&&(A||j&&!g[j])){for(var C,I,w=-1,U=0;U<p.length;U++){-1!==(k=O.indexOf(p[U]))&&(-1===w||k<w)&&(w=k)}-1!==(I=-1===w?O.lastIndexOf("@"):O.lastIndexOf("@",w))&&(C=O.slice(0,I),O=O.slice(I+1),this.auth=decodeURIComponent(C)),w=-1;for(U=0;U<l.length;U++){var k;-1!==(k=O.indexOf(l[U]))&&(-1===w||k<w)&&(w=k)}-1===w&&(w=O.length),this.host=O.slice(0,w),O=O.slice(w),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var R=this.hostname.split(/\./),S=(U=0,R.length);U<S;U++){var $=R[U];if($&&!$.match(u)){for(var z="",H=0,L=$.length;H<L;H++)$.charCodeAt(H)>127?z+="x":z+=$[H];if(!z.match(u)){var Z=R.slice(0,U),_=R.slice(U+1),E=$.match(f);E&&(Z.push(E[1]),_.unshift(E[2])),_.length&&(O="/"+_.join(".")+O),this.hostname=Z.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=t.toASCII(this.hostname));var P=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+P,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!m[x])for(U=0,S=i.length;U<S;U++){var B=i[U];if(-1!==O.indexOf(B)){var D=encodeURIComponent(B);D===B&&(D=escape(B)),O=O.split(B).join(D)}}var F=O.indexOf("#");-1!==F&&(this.hash=O.substr(F),O=O.slice(0,F));var G=O.indexOf("?");if(-1!==G?(this.search=O.substr(G),this.query=O.substr(G+1),a&&(this.query=y.parse(this.query)),O=O.slice(0,G)):a&&(this.search="",this.query={}),O&&(this.pathname=O),g[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){P=this.pathname||"";var J=this.search||"";this.path=P+J}return this.href=this.format(),this},h.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var h=this.protocol||"",e=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var n=this.search||o&&"?"+o||"";return h&&":"!==h.substr(-1)&&(h+=":"),this.slashes||(!h||g[h])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),n&&"?"!==n.charAt(0)&&(n="?"+n),h+r+(e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(n=n.replace("#","%23"))+a},h.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},h.prototype.resolveObject=function(t){if(s.isString(t)){var e=new h;e.parse(t,!1,!0),t=e}for(var a=new h,r=Object.keys(this),o=0;o<r.length;o++){var n=r[o];a[n]=this[n]}if(a.hash=t.hash,""===t.href)return a.href=a.format(),a;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];"protocol"!==p&&(a[p]=t[p])}return g[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(t.protocol&&t.protocol!==a.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var f=c[u];a[f]=t[f]}return a.href=a.format(),a}if(a.protocol=t.protocol,t.host||v[t.protocol])a.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),a.pathname=m.join("/")}if(a.search=t.search,a.query=t.query,a.host=t.host||"",a.auth=t.auth,a.hostname=t.hostname||t.host,a.port=t.port,a.pathname||a.search){var y=a.pathname||"",b=a.search||"";a.path=y+b}return a.slashes=a.slashes||t.slashes,a.href=a.format(),a}var q=a.pathname&&"/"===a.pathname.charAt(0),O=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=O||q||a.host&&t.pathname,j=d,x=a.pathname&&a.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],a.protocol&&!g[a.protocol]);if(A&&(a.hostname="",a.port=null,a.host&&(""===x[0]?x[0]=a.host:x.unshift(a.host)),a.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),d=d&&(""===m[0]||""===x[0])),O)a.host=t.host||""===t.host?t.host:a.host,a.hostname=t.hostname||""===t.hostname?t.hostname:a.hostname,a.search=t.search,a.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),a.search=t.search,a.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(A)a.hostname=a.host=x.shift(),(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift());return a.search=t.search,a.query=t.query,s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!x.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var C=x.slice(-1)[0],I=(a.host||t.host||x.length>1)&&("."===C||".."===C)||""===C,w=0,U=x.length;U>=0;U--)"."===(C=x[U])?x.splice(U,1):".."===C?(x.splice(U,1),w++):w&&(x.splice(U,1),w--);if(!d&&!j)for(;w--;w)x.unshift("..");!d||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var k,N=""===x[0]||x[0]&&"/"===x[0].charAt(0);A&&(a.hostname=a.host=N?"":x.length?x.shift():"",(k=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=k.shift(),a.host=a.hostname=k.shift()));return(d=d||a.host&&x.length)&&!N&&x.unshift(""),x.length?a.pathname=x.join("/"):(a.pathname=null,a.path=null),s.isNull(a.pathname)&&s.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=t.auth||a.auth,a.slashes=a.slashes||t.slashes,a.href=a.format(),a},h.prototype.parseHost=function(){var t=this.host,s=a.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"punycode":"GeIn","./util":"xFhV","querystring":"aCbu"}],"dCGn":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=require("./lib/request"),r=require("./lib/response"),n=require("xtend"),o=require("builtin-status-codes"),s=require("url"),u=exports;u.request=function(r,o){r="string"==typeof r?s.parse(r):n(r);var u=-1===e.location.protocol.search(/^https?:$/)?"http:":"",E=r.protocol||u,a=r.hostname||r.host,C=r.port,i=r.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),r.url=(a?E+"//"+a:"")+(C?":"+C:"")+i,r.method=(r.method||"GET").toUpperCase(),r.headers=r.headers||{};var T=new t(r);return o&&T.on("response",o),T},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=t,u.IncomingMessage=r.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=o,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];
},{"./lib/request":"utY0","./lib/response":"uAT7","xtend":"yGvU","builtin-status-codes":"pfYY","url":"ss6L"}],"KYTg":[function(require,module,exports) {
var t=require("http"),r=require("url"),o=module.exports;for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);function p(t){if("string"==typeof t&&(t=r.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(r,o){return r=p(r),t.request.call(this,r,o)},o.get=function(r,o){return r=p(r),t.get.call(this,r,o)};
},{"http":"dCGn","url":"ss6L"}],"pFLH":[function(require,module,exports) {
(function(){exports.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this);
},{}],"o5ai":[function(require,module,exports) {
function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}(function(){var o,n,r,e,u,c,i,l=[].slice,f={}.hasOwnProperty;o=function(){var t,o,n,r,e,c;if(c=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],u(Object.assign))Object.assign.apply(null,arguments);else for(t=0,n=e.length;t<n;t++)if(null!=(r=e[t]))for(o in r)f.call(r,o)&&(c[o]=r[o]);return c},u=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},c=function(o){var n;return!!o&&("function"===(n=t(o))||"object"===n)},r=function(t){return u(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},e=function(t){var o;if(r(t))return!t.length;for(o in t)if(f.call(t,o))return!1;return!0},i=function(t){var o,n;return c(t)&&(n=Object.getPrototypeOf(t))&&(o=n.constructor)&&"function"==typeof o&&o instanceof o&&Function.prototype.toString.call(o)===Function.prototype.toString.call(Object)},n=function(t){return u(t.valueOf)?t.valueOf():t},module.exports.assign=o,module.exports.isFunction=u,module.exports.isObject=c,module.exports.isArray=r,module.exports.isEmpty=e,module.exports.isPlainObject=i,module.exports.getValue=n}).call(this);
},{}],"UNfk":[function(require,module,exports) {
(function(){module.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,o){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,o){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented.")},t}()}).call(this);
},{}],"aUoU":[function(require,module,exports) {
(function(){module.exports=function(){function n(){}return n.prototype.handleError=function(n){throw new Error(n)},n}()}).call(this);
},{}],"yH6g":[function(require,module,exports) {
(function(){module.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return-1!==this.arr.indexOf(t)},t}()}).call(this);
},{}],"yaF5":[function(require,module,exports) {
(function(){var e,t;e=require("./XMLDOMErrorHandler"),t=require("./XMLDOMStringList"),module.exports=function(){function a(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(a.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),a.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},a.prototype.canSetParameter=function(e,t){return!0},a.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},a}()}).call(this);
},{"./XMLDOMErrorHandler":"aUoU","./XMLDOMStringList":"yH6g"}],"Spt8":[function(require,module,exports) {
(function(){module.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this);
},{}],"JwPs":[function(require,module,exports) {
(function(){var t;t=require("./NodeType"),require("./XMLNode"),module.exports=function(){function e(e,n,r){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(r),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},e.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&(t.prefix===this.prefix&&(t.localName===this.localName&&t.value===this.value))},e}()}).call(this);
},{"./NodeType":"Spt8","./XMLNode":"vk04"}],"nSua":[function(require,module,exports) {
(function(){module.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this);
},{}],"u9ab":[function(require,module,exports) {
(function(){var t,e,r,o,i,n,s,h,u={}.hasOwnProperty;h=require("./Utility"),s=h.isObject,n=h.isFunction,i=h.getValue,o=require("./XMLNode"),t=require("./NodeType"),e=require("./XMLAttribute"),r=require("./XMLNamedNodeMap"),module.exports=function(h){function p(e,r,o){var i,n,s,h;if(p.__super__.constructor.call(this,e),null==r)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(r),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=o&&this.attribute(o),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(n=0,s=(h=e.children).length;n<s;n++)if((i=h[n]).type===t.DocType){i.name=this.name;break}}return function(t,e){for(var r in e)u.call(e,r)&&(t[r]=e[r]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype}(p,o),Object.defineProperty(p.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(p.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(p.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(p.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(p.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new r(this.attribs)),this.attributeMap}}),p.prototype.clone=function(){var t,e,r,o;for(e in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},o=this.attribs)u.call(o,e)&&(t=o[e],r.attribs[e]=t.clone());return r.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=r,r.children.push(e)}),r},p.prototype.attribute=function(t,r){var o,h;if(null!=t&&(t=i(t)),s(t))for(o in t)u.call(t,o)&&(h=t[o],this.attribute(o,h));else n(r)&&(r=r.apply()),this.options.keepNullAttributes&&null==r?this.attribs[t]=new e(this,t,""):null!=r&&(this.attribs[t]=new e(this,t,r));return this},p.prototype.removeAttribute=function(t){var e,r,o;if(null==t)throw new Error("Missing attribute name. "+this.debugInfo());if(t=i(t),Array.isArray(t))for(r=0,o=t.length;r<o;r++)e=t[r],delete this.attribs[e];else delete this.attribs[t];return this},p.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},p.prototype.att=function(t,e){return this.attribute(t,e)},p.prototype.a=function(t,e){return this.attribute(t,e)},p.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},p.prototype.setAttribute=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},p.prototype.setAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.removeAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getAttributeNodeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setAttributeNodeNS=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},p.prototype.hasAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},p.prototype.setIdAttributeNS=function(t,e,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.setIdAttributeNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},p.prototype.isEqualNode=function(t){var e,r,o;if(!p.__super__.isEqualNode.apply(this,arguments).isEqualNode(t))return!1;if(t.namespaceURI!==this.namespaceURI)return!1;if(t.prefix!==this.prefix)return!1;if(t.localName!==this.localName)return!1;if(t.attribs.length!==this.attribs.length)return!1;for(e=r=0,o=this.attribs.length-1;0<=o?r<=o:r>=o;e=0<=o?++r:--r)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0},p}()}).call(this);
},{"./Utility":"o5ai","./XMLNode":"vk04","./NodeType":"Spt8","./XMLAttribute":"JwPs","./XMLNamedNodeMap":"nSua"}],"yS6u":[function(require,module,exports) {
(function(){var t,e={}.hasOwnProperty;t=require("./XMLNode"),module.exports=function(o){function n(t){n.__super__.constructor.call(this,t),this.value=""}return function(t,o){for(var n in o)e.call(o,n)&&(t[n]=o[n]);function r(){this.constructor=t}r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype}(n,t),Object.defineProperty(n.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(n.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.substringData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.appendData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.insertData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.deleteData=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceData=function(t,e,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.isEqualNode=function(t){return!!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},n}()}).call(this);
},{"./XMLNode":"vk04"}],"qAtn":[function(require,module,exports) {
(function(){var t,r,o={}.hasOwnProperty;t=require("./NodeType"),r=require("./XMLCharacterData"),module.exports=function(e){function i(r,o){if(i.__super__.constructor.call(this,r),null==o)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(o)}return function(t,r){for(var e in r)o.call(r,e)&&(t[e]=r[e]);function i(){this.constructor=t}i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype}(i,r),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},i}()}).call(this);
},{"./NodeType":"Spt8","./XMLCharacterData":"yS6u"}],"CCfD":[function(require,module,exports) {
(function(){var t,o,r={}.hasOwnProperty;t=require("./NodeType"),o=require("./XMLCharacterData"),module.exports=function(e){function n(o,r){if(n.__super__.constructor.call(this,o),null==r)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(r)}return function(t,o){for(var e in o)r.call(o,e)&&(t[e]=o[e]);function n(){this.constructor=t}n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype}(n,o),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},n}()}).call(this);
},{"./NodeType":"Spt8","./XMLCharacterData":"yS6u"}],"mqo4":[function(require,module,exports) {
(function(){var t,i,n,o={}.hasOwnProperty;n=require("./Utility").isObject,i=require("./XMLNode"),t=require("./NodeType"),module.exports=function(r){function e(i,o,r,s){var l;e.__super__.constructor.call(this,i),n(o)&&(o=(l=o).version,r=l.encoding,s=l.standalone),o||(o="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(o),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return function(t,i){for(var n in i)o.call(i,n)&&(t[n]=i[n]);function r(){this.constructor=t}r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype}(e,i),e.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},e}()}).call(this);
},{"./Utility":"o5ai","./XMLNode":"vk04","./NodeType":"Spt8"}],"mN1y":[function(require,module,exports) {
(function(){var t,e,i={}.hasOwnProperty;e=require("./XMLNode"),t=require("./NodeType"),module.exports=function(r){function n(e,i,r,o,s,u){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==r)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!s)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(u&&!s.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(r),this.attributeType=this.stringify.dtdAttType(o),u&&(this.defaultValue=this.stringify.dtdAttDefault(u)),this.defaultValueType=s}return function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,e),n.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},n}()}).call(this);
},{"./XMLNode":"vk04","./NodeType":"Spt8"}],"XNJe":[function(require,module,exports) {
(function(){var t,e,i,n={}.hasOwnProperty;i=require("./Utility").isObject,e=require("./XMLNode"),t=require("./NodeType"),module.exports=function(r){function o(e,n,r,s){if(o.__super__.constructor.call(this,e),null==r)throw new Error("Missing DTD entity name. "+this.debugInfo(r));if(null==s)throw new Error("Missing DTD entity value. "+this.debugInfo(r));if(this.pe=!!n,this.name=this.stringify.name(r),this.type=t.EntityDeclaration,i(s)){if(!s.pubID&&!s.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(r));if(s.pubID&&!s.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(r));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(r))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(o,e),Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(o.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(o.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(o.prototype,"xmlVersion",{get:function(){return null}}),o.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},o}()}).call(this);
},{"./Utility":"o5ai","./XMLNode":"vk04","./NodeType":"Spt8"}],"EBvt":[function(require,module,exports) {
(function(){var t,r,e={}.hasOwnProperty;r=require("./XMLNode"),t=require("./NodeType"),module.exports=function(i){function n(r,e,i){if(n.__super__.constructor.call(this,r),null==e)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(e),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}return function(t,r){for(var i in r)e.call(r,i)&&(t[i]=r[i]);function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype}(n,r),n.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},n}()}).call(this);
},{"./XMLNode":"vk04","./NodeType":"Spt8"}],"SCSB":[function(require,module,exports) {
(function(){var t,r,i={}.hasOwnProperty;r=require("./XMLNode"),t=require("./NodeType"),module.exports=function(e){function o(r,i,e){if(o.__super__.constructor.call(this,r),null==i)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!e.pubID&&!e.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=t.NotationDeclaration,null!=e.pubID&&(this.pubID=this.stringify.dtdPubID(e.pubID)),null!=e.sysID&&(this.sysID=this.stringify.dtdSysID(e.sysID))}return function(t,r){for(var e in r)i.call(r,e)&&(t[e]=r[e]);function o(){this.constructor=t}o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype}(o,r),Object.defineProperty(o.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(o.prototype,"systemId",{get:function(){return this.sysID}}),o.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},o}()}).call(this);
},{"./XMLNode":"vk04","./NodeType":"Spt8"}],"Su50":[function(require,module,exports) {
(function(){var t,e,n,i,r,o,s,p,u={}.hasOwnProperty;p=require("./Utility").isObject,s=require("./XMLNode"),t=require("./NodeType"),e=require("./XMLDTDAttList"),i=require("./XMLDTDEntity"),n=require("./XMLDTDElement"),r=require("./XMLDTDNotation"),o=require("./XMLNamedNodeMap"),module.exports=function(h){function c(e,n,i){var r,o,s,u,h,y;if(c.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(o=0,s=(u=e.children).length;o<s;o++)if((r=u[o]).type===t.Element){this.name=r.name;break}this.documentObject=e,p(n)&&(n=(h=n).pubID,i=h.sysID),null==i&&(i=(y=[n,i])[0],n=y[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,s),Object.defineProperty(c.prototype,"entities",{get:function(){var e,n,i,r,s;for(r={},n=0,i=(s=this.children).length;n<i;n++)(e=s[n]).type!==t.EntityDeclaration||e.pe||(r[e.name]=e);return new o(r)}}),Object.defineProperty(c.prototype,"notations",{get:function(){var e,n,i,r,s;for(r={},n=0,i=(s=this.children).length;n<i;n++)(e=s[n]).type===t.NotationDeclaration&&(r[e.name]=e);return new o(r)}}),Object.defineProperty(c.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(c.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(c.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),c.prototype.element=function(t,e){var i;return i=new n(this,t,e),this.children.push(i),this},c.prototype.attList=function(t,n,i,r,o){var s;return s=new e(this,t,n,i,r,o),this.children.push(s),this},c.prototype.entity=function(t,e){var n;return n=new i(this,!1,t,e),this.children.push(n),this},c.prototype.pEntity=function(t,e){var n;return n=new i(this,!0,t,e),this.children.push(n),this},c.prototype.notation=function(t,e){var n;return n=new r(this,t,e),this.children.push(n),this},c.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},c.prototype.ele=function(t,e){return this.element(t,e)},c.prototype.att=function(t,e,n,i,r){return this.attList(t,e,n,i,r)},c.prototype.ent=function(t,e){return this.entity(t,e)},c.prototype.pent=function(t,e){return this.pEntity(t,e)},c.prototype.not=function(t,e){return this.notation(t,e)},c.prototype.up=function(){return this.root()||this.documentObject},c.prototype.isEqualNode=function(t){return!!c.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&(t.name===this.name&&(t.publicId===this.publicId&&t.systemId===this.systemId))},c}()}).call(this);
},{"./Utility":"o5ai","./XMLNode":"vk04","./NodeType":"Spt8","./XMLDTDAttList":"mN1y","./XMLDTDEntity":"XNJe","./XMLDTDElement":"EBvt","./XMLDTDNotation":"SCSB","./XMLNamedNodeMap":"nSua"}],"gLhi":[function(require,module,exports) {
(function(){var t,r,o={}.hasOwnProperty;t=require("./NodeType"),r=require("./XMLNode"),module.exports=function(e){function i(r,o){if(i.__super__.constructor.call(this,r),null==o)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(o)}return function(t,r){for(var e in r)o.call(r,e)&&(t[e]=r[e]);function i(){this.constructor=t}i.prototype=r.prototype,t.prototype=new i,t.__super__=r.prototype}(i,r),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},i}()}).call(this);
},{"./NodeType":"Spt8","./XMLNode":"vk04"}],"vesO":[function(require,module,exports) {
(function(){var t,e,o={}.hasOwnProperty;t=require("./NodeType"),e=require("./XMLCharacterData"),module.exports=function(r){function i(e,o){if(i.__super__.constructor.call(this,e),null==o)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(o)}return function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,e),Object.defineProperty(i.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(i.prototype,"wholeText",{get:function(){var t,e,o;for(o="",e=this.previousSibling;e;)o=e.data+o,e=e.previousSibling;for(o+=this.data,t=this.nextSibling;t;)o+=t.data,t=t.nextSibling;return o}}),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},i.prototype.splitText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},i.prototype.replaceWholeText=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},i}()}).call(this);
},{"./NodeType":"Spt8","./XMLCharacterData":"yS6u"}],"RMx5":[function(require,module,exports) {
(function(){var t,r,i={}.hasOwnProperty;t=require("./NodeType"),r=require("./XMLCharacterData"),module.exports=function(e){function o(r,i,e){if(o.__super__.constructor.call(this,r),null==i)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,e&&(this.value=this.stringify.insValue(e))}return function(t,r){for(var e in r)i.call(r,e)&&(t[e]=r[e]);function o(){this.constructor=t}o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype}(o,r),o.prototype.clone=function(){return Object.create(this)},o.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},o.prototype.isEqualNode=function(t){return!!o.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},o}()}).call(this);
},{"./NodeType":"Spt8","./XMLCharacterData":"yS6u"}],"oV6B":[function(require,module,exports) {
(function(){var t,o,r={}.hasOwnProperty;o=require("./XMLNode"),t=require("./NodeType"),module.exports=function(e){function n(o){n.__super__.constructor.call(this,o),this.type=t.Dummy}return function(t,o){for(var e in o)r.call(o,e)&&(t[e]=o[e]);function n(){this.constructor=t}n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype}(n,o),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(t){return""},n}()}).call(this);
},{"./XMLNode":"vk04","./NodeType":"Spt8"}],"wV9P":[function(require,module,exports) {
(function(){module.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this);
},{}],"aXSn":[function(require,module,exports) {
(function(){module.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this);
},{}],"vk04":[function(require,module,exports) {
(function(){var t,e,n,r,i,o,s,h,p,u,c,l,d,a,f,y,m,g={}.hasOwnProperty;m=require("./Utility"),y=m.isObject,f=m.isFunction,a=m.isEmpty,d=m.getValue,h=null,n=null,r=null,i=null,o=null,c=null,l=null,u=null,s=null,e=null,p=null,t=null,module.exports=function(){function m(d){this.parent=d,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,h||(h=require("./XMLElement"),n=require("./XMLCData"),r=require("./XMLComment"),i=require("./XMLDeclaration"),o=require("./XMLDocType"),c=require("./XMLRaw"),l=require("./XMLText"),u=require("./XMLProcessingInstruction"),s=require("./XMLDummy"),e=require("./NodeType"),p=require("./XMLNodeList"),require("./XMLNamedNodeMap"),t=require("./DocumentPosition"))}return Object.defineProperty(m.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(m.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(m.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(m.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(m.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new p(this.children)),this.childNodeList}}),Object.defineProperty(m.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(m.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(m.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(m.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(m.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(m.prototype,"textContent",{get:function(){var t,n,r,i,o;if(this.nodeType===e.Element||this.nodeType===e.DocumentFragment){for(o="",n=0,r=(i=this.children).length;n<r;n++)(t=i[n]).textContent&&(o+=t.textContent);return o}return null},set:function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),m.prototype.setParent=function(t){var e,n,r,i,o;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),o=[],n=0,r=(i=this.children).length;n<r;n++)e=i[n],o.push(e.setParent(this));return o},m.prototype.element=function(t,e,n){var r,i,o,s,h,p,u,c,l,m,w;if(p=null,null===e&&null==n&&(e=(l=[{},null])[0],n=l[1]),null==e&&(e={}),e=d(e),y(e)||(n=(m=[e,n])[0],e=m[1]),null!=t&&(t=d(t)),Array.isArray(t))for(o=0,u=t.length;o<u;o++)i=t[o],p=this.element(i);else if(f(t))p=this.element(t.apply());else if(y(t)){for(h in t)if(g.call(t,h))if(w=t[h],f(w)&&(w=w.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===h.indexOf(this.stringify.convertAttKey))p=this.attribute(h.substr(this.stringify.convertAttKey.length),w);else if(!this.options.separateArrayItems&&Array.isArray(w)&&a(w))p=this.dummy();else if(y(w)&&a(w))p=this.element(h);else if(this.options.keepNullNodes||null!=w)if(!this.options.separateArrayItems&&Array.isArray(w))for(s=0,c=w.length;s<c;s++)i=w[s],(r={})[h]=i,p=this.element(r);else y(w)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===h.indexOf(this.stringify.convertTextKey)?p=this.element(w):(p=this.element(h)).element(w):p=this.element(h,w);else p=this.dummy()}else p=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),n):this.node(t,e,n):this.dummy();if(null==p)throw new Error("Could not create any elements with: "+t+". "+this.debugInfo());return p},m.prototype.insertBefore=function(t,e,n){var r,i,o,s,h;if(null!=t?t.type:void 0)return s=e,(o=t).setParent(this),s?(i=children.indexOf(s),h=children.splice(i),children.push(o),Array.prototype.push.apply(children,h)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),h=this.parent.children.splice(i),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,h),r},m.prototype.insertAfter=function(t,e,n){var r,i,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(t));return i=this.parent.children.indexOf(this),o=this.parent.children.splice(i+1),r=this.parent.element(t,e,n),Array.prototype.push.apply(this.parent.children,o),r},m.prototype.remove=function(){var t;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},m.prototype.node=function(t,e,n){var r,i;return null!=t&&(t=d(t)),e||(e={}),e=d(e),y(e)||(n=(i=[e,n])[0],e=i[1]),r=new h(this,t,e),null!=n&&r.text(n),this.children.push(r),r},m.prototype.text=function(t){var e;return y(t)&&this.element(t),e=new l(this,t),this.children.push(e),this},m.prototype.cdata=function(t){var e;return e=new n(this,t),this.children.push(e),this},m.prototype.comment=function(t){var e;return e=new r(this,t),this.children.push(e),this},m.prototype.commentBefore=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},m.prototype.commentAfter=function(t){var e,n;return e=this.parent.children.indexOf(this),n=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,n),this},m.prototype.raw=function(t){var e;return e=new c(this,t),this.children.push(e),this},m.prototype.dummy=function(){return new s(this)},m.prototype.instruction=function(t,e){var n,r,i,o,s;if(null!=t&&(t=d(t)),null!=e&&(e=d(e)),Array.isArray(t))for(o=0,s=t.length;o<s;o++)n=t[o],this.instruction(n);else if(y(t))for(n in t)g.call(t,n)&&(r=t[n],this.instruction(n,r));else f(e)&&(e=e.apply()),i=new u(this,t,e),this.children.push(i);return this},m.prototype.instructionBefore=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},m.prototype.instructionAfter=function(t,e){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,r),this},m.prototype.declaration=function(t,n,r){var o,s;return o=this.document(),s=new i(o,t,n,r),0===o.children.length?o.children.unshift(s):o.children[0].type===e.Declaration?o.children[0]=s:o.children.unshift(s),o.root()||o},m.prototype.dtd=function(t,n){var r,i,s,h,p,u,c,l,d;for(r=this.document(),i=new o(r,t,n),s=h=0,u=(l=r.children).length;h<u;s=++h)if(l[s].type===e.DocType)return r.children[s]=i,i;for(s=p=0,c=(d=r.children).length;p<c;s=++p)if(d[s].isRoot)return r.children.splice(s,0,i),i;return r.children.push(i),i},m.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},m.prototype.root=function(){var t;for(t=this;t;){if(t.type===e.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},m.prototype.document=function(){var t;for(t=this;t;){if(t.type===e.Document)return t;t=t.parent}},m.prototype.end=function(t){return this.document().end(t)},m.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},m.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},m.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},m.prototype.debugInfo=function(t){var e,n;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},m.prototype.ele=function(t,e,n){return this.element(t,e,n)},m.prototype.nod=function(t,e,n){return this.node(t,e,n)},m.prototype.txt=function(t){return this.text(t)},m.prototype.dat=function(t){return this.cdata(t)},m.prototype.com=function(t){return this.comment(t)},m.prototype.ins=function(t,e){return this.instruction(t,e)},m.prototype.doc=function(){return this.document()},m.prototype.dec=function(t,e,n){return this.declaration(t,e,n)},m.prototype.e=function(t,e,n){return this.element(t,e,n)},m.prototype.n=function(t,e,n){return this.node(t,e,n)},m.prototype.t=function(t){return this.text(t)},m.prototype.d=function(t){return this.cdata(t)},m.prototype.c=function(t){return this.comment(t)},m.prototype.r=function(t){return this.raw(t)},m.prototype.i=function(t,e){return this.instruction(t,e)},m.prototype.u=function(){return this.up()},m.prototype.importXMLBuilder=function(t){return this.importDocument(t)},m.prototype.replaceChild=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.removeChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.appendChild=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.hasChildNodes=function(){return 0!==this.children.length},m.prototype.cloneNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.isSupported=function(t,e){return!0},m.prototype.hasAttributes=function(){return 0!==this.attribs.length},m.prototype.compareDocumentPosition=function(e){var n;return this,this===e?0:this.document()!==e.document()?(n=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?n|=t.Preceding:n|=t.Following,n):this.isAncestor(e)?t.Contains|t.Preceding:this.isDescendant(e)?t.Contains|t.Following:this.isPreceding(e)?t.Preceding:t.Following},m.prototype.isSameNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.lookupPrefix=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.isDefaultNamespace=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.lookupNamespaceURI=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.isEqualNode=function(t){var e,n,r;if(t.nodeType!==this.nodeType)return!1;if(t.children.length!==this.children.length)return!1;for(e=n=0,r=this.children.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},m.prototype.getFeature=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.setUserData=function(t,e,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.getUserData=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},m.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},m.prototype.isDescendant=function(t){var e,n,r,i;for(n=0,r=(i=this.children).length;n<r;n++){if(t===(e=i[n]))return!0;if(e.isDescendant(t))return!0}return!1},m.prototype.isAncestor=function(t){return t.isDescendant(this)},m.prototype.isPreceding=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e<n},m.prototype.isFollowing=function(t){var e,n;return e=this.treePosition(t),n=this.treePosition(this),-1!==e&&-1!==n&&e>n},m.prototype.treePosition=function(t){var e,n;return n=0,e=!1,this.foreachTreeNode(this.document(),function(r){if(n++,!e&&r===t)return e=!0}),e?n:-1},m.prototype.foreachTreeNode=function(t,e){var n,r,i,o,s;for(t||(t=this.document()),r=0,i=(o=t.children).length;r<i;r++){if(s=e(n=o[r]))return s;if(s=this.foreachTreeNode(n,e))return s}},m}()}).call(this);
},{"./Utility":"o5ai","./XMLElement":"u9ab","./XMLCData":"qAtn","./XMLComment":"CCfD","./XMLDeclaration":"mqo4","./XMLDocType":"Su50","./XMLRaw":"gLhi","./XMLText":"vesO","./XMLProcessingInstruction":"RMx5","./XMLDummy":"oV6B","./NodeType":"Spt8","./XMLNodeList":"wV9P","./XMLNamedNodeMap":"nSua","./DocumentPosition":"aXSn"}],"F35n":[function(require,module,exports) {
(function(){var t=function(t,o){return function(){return t.apply(o,arguments)}},o={}.hasOwnProperty;module.exports=function(){function n(n){var r,i,e;for(r in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),n||(n={}),this.options=n,this.options.version||(this.options.version="1.0"),i=n.stringify||{})o.call(i,r)&&(e=i[r],this[r]=e)}return n.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},n.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},n.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},n.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},n.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},n.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},n.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},n.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+t);return t},n.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+t);return this.assertLegalChar(t)},n.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},n.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},n.prototype.convertAttKey="@",n.prototype.convertPIKey="?",n.prototype.convertTextKey="#text",n.prototype.convertCDataKey="#cdata",n.prototype.convertCommentKey="#comment",n.prototype.convertRawKey="#raw",n.prototype.assertLegalChar=function(t){var o,n;if(this.options.noValidation)return t;if(o="","1.0"===this.options.version){if(o=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(o))throw new Error("Invalid character in string: "+t+" at index "+n.index)}else if("1.1"===this.options.version&&(o=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=t.match(o)))throw new Error("Invalid character in string: "+t+" at index "+n.index);return t},n.prototype.assertLegalName=function(t){var o;if(this.options.noValidation)return t;if(this.assertLegalChar(t),o=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(o))throw new Error("Invalid character in name");return t},n.prototype.textEscape=function(t){var o;return this.options.noValidation?t:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(o,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},n.prototype.attEscape=function(t){var o;return this.options.noValidation?t:(o=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(o,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},n}()}).call(this);
},{}],"yEH9":[function(require,module,exports) {
(function(){module.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this);
},{}],"zZia":[function(require,module,exports) {
(function(){var e,t,n,s={}.hasOwnProperty;n=require("./Utility").assign,e=require("./NodeType"),require("./XMLDeclaration"),require("./XMLDocType"),require("./XMLCData"),require("./XMLComment"),require("./XMLElement"),require("./XMLRaw"),require("./XMLText"),require("./XMLProcessingInstruction"),require("./XMLDummy"),require("./XMLDTDAttList"),require("./XMLDTDElement"),require("./XMLDTDEntity"),require("./XMLDTDNotation"),t=require("./WriterState"),module.exports=function(){function o(e){var t,n,o;for(t in e||(e={}),this.options=e,n=e.writer||{})s.call(n,t)&&(o=n[t],this["_"+t]=this[t],this[t]=o)}return o.prototype.filterOptions=function(e){var s,o,a,i,r,l,u,p;return e||(e={}),e=n({},this.options,e),(s={writer:this}).pretty=e.pretty||!1,s.allowEmpty=e.allowEmpty||!1,s.indent=null!=(o=e.indent)?o:"  ",s.newline=null!=(a=e.newline)?a:"\n",s.offset=null!=(i=e.offset)?i:0,s.dontPrettyTextNodes=null!=(r=null!=(l=e.dontPrettyTextNodes)?l:e.dontprettytextnodes)?r:0,s.spaceBeforeSlash=null!=(u=null!=(p=e.spaceBeforeSlash)?p:e.spacebeforeslash)?u:"",!0===s.spaceBeforeSlash&&(s.spaceBeforeSlash=" "),s.suppressPrettyCount=0,s.user={},s.state=t.None,s},o.prototype.indent=function(e,t,n){var s;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(s=(n||0)+t.offset+1)>0?new Array(s).join(t.indent):""},o.prototype.endline=function(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline},o.prototype.attribute=function(e,t,n){var s;return this.openAttribute(e,t,n),s=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),s},o.prototype.cdata=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<![CDATA[",n.state=t.InsideTag,o+=e.value,n.state=t.CloseTag,o+="]]>"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.comment=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"\x3c!-- ",n.state=t.InsideTag,o+=e.value,n.state=t.CloseTag,o+=" --\x3e"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.declaration=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<?xml",n.state=t.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),n.state=t.CloseTag,o+=n.spaceBeforeSlash+"?>",o+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.docType=function(e,n,s){var o,a,i,r,l;if(s||(s=0),this.openNode(e,n,s),n.state=t.OpenTag,r=this.indent(e,n,s),r+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?r+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(r+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(r+=" [",r+=this.endline(e,n,s),n.state=t.InsideTag,a=0,i=(l=e.children).length;a<i;a++)o=l[a],r+=this.writeChildNode(o,n,s+1);n.state=t.CloseTag,r+="]"}return n.state=t.CloseTag,r+=n.spaceBeforeSlash+">",r+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),r},o.prototype.element=function(n,o,a){var i,r,l,u,p,d,h,c,y,T,f,N,g,D;for(y in a||(a=0),T=!1,f="",this.openNode(n,o,a),o.state=t.OpenTag,f+=this.indent(n,o,a)+"<"+n.name,N=n.attribs)s.call(N,y)&&(i=N[y],f+=this.attribute(i,o,a));if(u=0===(l=n.children.length)?null:n.children[0],0===l||n.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))o.allowEmpty?(f+=">",o.state=t.CloseTag,f+="</"+n.name+">"+this.endline(n,o,a)):(o.state=t.CloseTag,f+=o.spaceBeforeSlash+"/>"+this.endline(n,o,a));else if(!o.pretty||1!==l||u.type!==e.Text&&u.type!==e.Raw||null==u.value){if(o.dontPrettyTextNodes)for(p=0,h=(g=n.children).length;p<h;p++)if(((r=g[p]).type===e.Text||r.type===e.Raw)&&null!=r.value){o.suppressPrettyCount++,T=!0;break}for(f+=">"+this.endline(n,o,a),o.state=t.InsideTag,d=0,c=(D=n.children).length;d<c;d++)r=D[d],f+=this.writeChildNode(r,o,a+1);o.state=t.CloseTag,f+=this.indent(n,o,a)+"</"+n.name+">",T&&o.suppressPrettyCount--,f+=this.endline(n,o,a),o.state=t.None}else f+=">",o.state=t.InsideTag,o.suppressPrettyCount++,T=!0,f+=this.writeChildNode(u,o,a+1),o.suppressPrettyCount--,T=!1,o.state=t.CloseTag,f+="</"+n.name+">"+this.endline(n,o,a);return this.closeNode(n,o,a),f},o.prototype.writeChildNode=function(t,n,s){switch(t.type){case e.CData:return this.cdata(t,n,s);case e.Comment:return this.comment(t,n,s);case e.Element:return this.element(t,n,s);case e.Raw:return this.raw(t,n,s);case e.Text:return this.text(t,n,s);case e.ProcessingInstruction:return this.processingInstruction(t,n,s);case e.Dummy:return"";case e.Declaration:return this.declaration(t,n,s);case e.DocType:return this.docType(t,n,s);case e.AttributeDeclaration:return this.dtdAttList(t,n,s);case e.ElementDeclaration:return this.dtdElement(t,n,s);case e.EntityDeclaration:return this.dtdEntity(t,n,s);case e.NotationDeclaration:return this.dtdNotation(t,n,s);default:throw new Error("Unknown XML node type: "+t.constructor.name)}},o.prototype.processingInstruction=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<?",n.state=t.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),n.state=t.CloseTag,o+=n.spaceBeforeSlash+"?>",o+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.raw=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s),n.state=t.InsideTag,o+=e.value,n.state=t.CloseTag,o+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.text=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s),n.state=t.InsideTag,o+=e.value,n.state=t.CloseTag,o+=this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.dtdAttList=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<!ATTLIST",n.state=t.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),n.state=t.CloseTag,o+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.dtdElement=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<!ELEMENT",n.state=t.InsideTag,o+=" "+e.name+" "+e.value,n.state=t.CloseTag,o+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.dtdEntity=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<!ENTITY",n.state=t.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),n.state=t.CloseTag,o+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.dtdNotation=function(e,n,s){var o;return this.openNode(e,n,s),n.state=t.OpenTag,o=this.indent(e,n,s)+"<!NOTATION",n.state=t.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),n.state=t.CloseTag,o+=n.spaceBeforeSlash+">"+this.endline(e,n,s),n.state=t.None,this.closeNode(e,n,s),o},o.prototype.openNode=function(e,t,n){},o.prototype.closeNode=function(e,t,n){},o.prototype.openAttribute=function(e,t,n){},o.prototype.closeAttribute=function(e,t,n){},o}()}).call(this);
},{"./Utility":"o5ai","./NodeType":"Spt8","./XMLDeclaration":"mqo4","./XMLDocType":"Su50","./XMLCData":"qAtn","./XMLComment":"CCfD","./XMLElement":"u9ab","./XMLRaw":"gLhi","./XMLText":"vesO","./XMLProcessingInstruction":"RMx5","./XMLDummy":"oV6B","./XMLDTDAttList":"mN1y","./XMLDTDElement":"EBvt","./XMLDTDEntity":"XNJe","./XMLDTDNotation":"SCSB","./WriterState":"yEH9"}],"UCvI":[function(require,module,exports) {
(function(){var t,e={}.hasOwnProperty;t=require("./XMLWriterBase"),module.exports=function(n){function r(t){r.__super__.constructor.call(this,t)}return function(t,n){for(var r in n)e.call(n,r)&&(t[r]=n[r]);function o(){this.constructor=t}o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype}(r,t),r.prototype.document=function(t,e){var n,r,o,i,l;for(e=this.filterOptions(e),i="",r=0,o=(l=t.children).length;r<o;r++)n=l[r],i+=this.writeChildNode(n,e,0);return e.pretty&&i.slice(-e.newline.length)===e.newline&&(i=i.slice(0,-e.newline.length)),i},r}()}).call(this);
},{"./XMLWriterBase":"zZia"}],"Om9o":[function(require,module,exports) {
(function(){var t,e,o,n,r,i,p,h={}.hasOwnProperty;p=require("./Utility").isPlainObject,o=require("./XMLDOMImplementation"),e=require("./XMLDOMConfiguration"),n=require("./XMLNode"),t=require("./NodeType"),i=require("./XMLStringifier"),r=require("./XMLStringWriter"),module.exports=function(s){function u(o){u.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new e,o||(o={}),o.writer||(o.writer=new r),this.options=o,this.stringify=new i(o)}return function(t,e){for(var o in e)h.call(e,o)&&(t[o]=e[o]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(u,n),Object.defineProperty(u.prototype,"implementation",{value:new o}),Object.defineProperty(u.prototype,"doctype",{get:function(){var e,o,n,r;for(o=0,n=(r=this.children).length;o<n;o++)if((e=r[o]).type===t.DocType)return e;return null}}),Object.defineProperty(u.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(u.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(u.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(u.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(u.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(u.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(u.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(u.prototype,"origin",{get:function(){return null}}),Object.defineProperty(u.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(u.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(u.prototype,"contentType",{get:function(){return null}}),u.prototype.end=function(t){var e;return e={},t?p(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},u.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},u.prototype.createElement=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createTextNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createComment=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createCDATASection=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createProcessingInstruction=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createAttribute=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createEntityReference=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getElementsByTagName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.importNode=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createElementNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createAttributeNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getElementsByTagNameNS=function(t,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getElementById=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.adoptNode=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.renameNode=function(t,e,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.getElementsByClassName=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createEvent=function(t){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createNodeIterator=function(t,e,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},u.prototype.createTreeWalker=function(t,e,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},u}()}).call(this);
},{"./Utility":"o5ai","./XMLDOMImplementation":"UNfk","./XMLDOMConfiguration":"yaF5","./XMLNode":"vk04","./NodeType":"Spt8","./XMLStringifier":"F35n","./XMLStringWriter":"UCvI"}],"OGnX":[function(require,module,exports) {
(function(){var t,e,r,i,n,o,s,h,u,c,a,p,l,d,w,y,f,v,L,m,N,D,O,b={}.hasOwnProperty;O=require("./Utility"),N=O.isObject,m=O.isFunction,D=O.isPlainObject,L=O.getValue,t=require("./NodeType"),p=require("./XMLDocument"),l=require("./XMLElement"),i=require("./XMLCData"),n=require("./XMLComment"),w=require("./XMLRaw"),v=require("./XMLText"),d=require("./XMLProcessingInstruction"),c=require("./XMLDeclaration"),a=require("./XMLDocType"),o=require("./XMLDTDAttList"),h=require("./XMLDTDEntity"),s=require("./XMLDTDElement"),u=require("./XMLDTDNotation"),r=require("./XMLAttribute"),f=require("./XMLStringifier"),y=require("./XMLStringWriter"),e=require("./WriterState"),module.exports=function(){function O(e,r,i){var n;this.name="?xml",this.type=t.Document,e||(e={}),n={},e.writer?D(e.writer)&&(n=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(n),this.stringify=new f(e),this.onDataCallback=r||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return O.prototype.createChildNode=function(e){var r,i,n,o,s,h,u,c;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(i in n={},u=e.attribs)b.call(u,i)&&(r=u[i],n[i]=r.value);this.node(e.name,n);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(s=0,h=(c=e.children).length;s<h;s++)o=c[s],this.createChildNode(o),o.type===t.Element&&this.up();return this},O.prototype.dummy=function(){return this},O.prototype.node=function(t,e,r){var i;if(null==t)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=L(t),null==e&&(e={}),e=L(e),N(e)||(r=(i=[e,r])[0],e=i[1]),this.currentNode=new l(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},O.prototype.element=function(e,r,i){var n,o,s,h,u,c;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||N(e)||m(e))for(h=this.options.noValidation,this.options.noValidation=!0,(c=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=h,o=0,s=(u=c.children).length;o<s;o++)n=u[o],this.createChildNode(n),n.type===t.Element&&this.up();else this.node(e,r,i);return this},O.prototype.attribute=function(t,e){var i,n;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=L(t)),N(t))for(i in t)b.call(t,i)&&(n=t[i],this.attribute(i,n));else m(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new r(this,t,""):null!=e&&(this.currentNode.attribs[t]=new r(this,t,e));return this},O.prototype.text=function(t){var e;return this.openCurrent(),e=new v(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.cdata=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.comment=function(t){var e;return this.openCurrent(),e=new n(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.raw=function(t){var e;return this.openCurrent(),e=new w(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.instruction=function(t,e){var r,i,n,o,s;if(this.openCurrent(),null!=t&&(t=L(t)),null!=e&&(e=L(e)),Array.isArray(t))for(r=0,o=t.length;r<o;r++)i=t[r],this.instruction(i);else if(N(t))for(i in t)b.call(t,i)&&(n=t[i],this.instruction(i,n));else m(e)&&(e=e.apply()),s=new d(this,t,e),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},O.prototype.declaration=function(t,e,r){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new c(this,t,e,r),this.onData(this.writer.declaration(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.doctype=function(t,e,r){if(this.openCurrent(),null==t)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new a(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},O.prototype.dtdElement=function(t,e){var r;return this.openCurrent(),r=new s(this,t,e),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.attList=function(t,e,r,i,n){var s;return this.openCurrent(),s=new o(this,t,e,r,i,n),this.onData(this.writer.dtdAttList(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.entity=function(t,e){var r;return this.openCurrent(),r=new h(this,!1,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.pEntity=function(t,e){var r;return this.openCurrent(),r=new h(this,!0,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.notation=function(t,e){var r;return this.openCurrent(),r=new u(this,t,e),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},O.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},O.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},O.prototype.openNode=function(r){var i,n,o,s;if(!r.isOpen){if(this.root||0!==this.currentLevel||r.type!==t.Element||(this.root=r),n="",r.type===t.Element){for(o in this.writerOptions.state=e.OpenTag,n=this.writer.indent(r,this.writerOptions,this.currentLevel)+"<"+r.name,s=r.attribs)b.call(s,o)&&(i=s[o],n+=this.writer.attribute(i,this.writerOptions,this.currentLevel));n+=(r.children?">":"/>")+this.writer.endline(r,this.writerOptions,this.currentLevel),this.writerOptions.state=e.InsideTag}else this.writerOptions.state=e.OpenTag,n=this.writer.indent(r,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+r.rootNodeName,r.pubID&&r.sysID?n+=' PUBLIC "'+r.pubID+'" "'+r.sysID+'"':r.sysID&&(n+=' SYSTEM "'+r.sysID+'"'),r.children?(n+=" [",this.writerOptions.state=e.InsideTag):(this.writerOptions.state=e.CloseTag,n+=">"),n+=this.writer.endline(r,this.writerOptions,this.currentLevel);return this.onData(n,this.currentLevel),r.isOpen=!0}},O.prototype.closeNode=function(r){var i;if(!r.isClosed)return i="",this.writerOptions.state=e.CloseTag,i=r.type===t.Element?this.writer.indent(r,this.writerOptions,this.currentLevel)+"</"+r.name+">"+this.writer.endline(r,this.writerOptions,this.currentLevel):this.writer.indent(r,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(r,this.writerOptions,this.currentLevel),this.writerOptions.state=e.None,this.onData(i,this.currentLevel),r.isClosed=!0},O.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},O.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},O.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},O.prototype.ele=function(){return this.element.apply(this,arguments)},O.prototype.nod=function(t,e,r){return this.node(t,e,r)},O.prototype.txt=function(t){return this.text(t)},O.prototype.dat=function(t){return this.cdata(t)},O.prototype.com=function(t){return this.comment(t)},O.prototype.ins=function(t,e){return this.instruction(t,e)},O.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},O.prototype.dtd=function(t,e,r){return this.doctype(t,e,r)},O.prototype.e=function(t,e,r){return this.element(t,e,r)},O.prototype.n=function(t,e,r){return this.node(t,e,r)},O.prototype.t=function(t){return this.text(t)},O.prototype.d=function(t){return this.cdata(t)},O.prototype.c=function(t){return this.comment(t)},O.prototype.r=function(t){return this.raw(t)},O.prototype.i=function(t,e){return this.instruction(t,e)},O.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.ent=function(t,e){return this.entity(t,e)},O.prototype.pent=function(t,e){return this.pEntity(t,e)},O.prototype.not=function(t,e){return this.notation(t,e)},O}()}).call(this);
},{"./Utility":"o5ai","./NodeType":"Spt8","./XMLDocument":"Om9o","./XMLElement":"u9ab","./XMLCData":"qAtn","./XMLComment":"CCfD","./XMLRaw":"gLhi","./XMLText":"vesO","./XMLProcessingInstruction":"RMx5","./XMLDeclaration":"mqo4","./XMLDocType":"Su50","./XMLDTDAttList":"mN1y","./XMLDTDEntity":"XNJe","./XMLDTDElement":"EBvt","./XMLDTDNotation":"SCSB","./XMLAttribute":"JwPs","./XMLStringifier":"F35n","./XMLStringWriter":"UCvI","./WriterState":"yEH9"}],"kZbG":[function(require,module,exports) {
(function(){var t,e,r,s={}.hasOwnProperty;t=require("./NodeType"),r=require("./XMLWriterBase"),e=require("./WriterState"),module.exports=function(i){function n(t,e){this.stream=t,n.__super__.constructor.call(this,e)}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,r),n.prototype.endline=function(t,r,s){return t.isLastRootNode&&r.state===e.CloseTag?"":n.__super__.endline.call(this,t,r,s)},n.prototype.document=function(t,e){var r,s,i,n,o,a,h,l,p;for(s=i=0,o=(h=t.children).length;i<o;s=++i)(r=h[s]).isLastRootNode=s===t.children.length-1;for(e=this.filterOptions(e),p=[],n=0,a=(l=t.children).length;n<a;n++)r=l[n],p.push(this.writeChildNode(r,e,0));return p},n.prototype.attribute=function(t,e,r){return this.stream.write(n.__super__.attribute.call(this,t,e,r))},n.prototype.cdata=function(t,e,r){return this.stream.write(n.__super__.cdata.call(this,t,e,r))},n.prototype.comment=function(t,e,r){return this.stream.write(n.__super__.comment.call(this,t,e,r))},n.prototype.declaration=function(t,e,r){return this.stream.write(n.__super__.declaration.call(this,t,e,r))},n.prototype.docType=function(t,r,s){var i,n,o,a;if(s||(s=0),this.openNode(t,r,s),r.state=e.OpenTag,this.stream.write(this.indent(t,r,s)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,r,s)),r.state=e.InsideTag,n=0,o=(a=t.children).length;n<o;n++)i=a[n],this.writeChildNode(i,r,s+1);r.state=e.CloseTag,this.stream.write("]")}return r.state=e.CloseTag,this.stream.write(r.spaceBeforeSlash+">"),this.stream.write(this.endline(t,r,s)),r.state=e.None,this.closeNode(t,r,s)},n.prototype.element=function(r,i,n){var o,a,h,l,p,u,c,d,_;for(c in n||(n=0),this.openNode(r,i,n),i.state=e.OpenTag,this.stream.write(this.indent(r,i,n)+"<"+r.name),d=r.attribs)s.call(d,c)&&(o=d[c],this.attribute(o,i,n));if(l=0===(h=r.children.length)?null:r.children[0],0===h||r.children.every(function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value}))i.allowEmpty?(this.stream.write(">"),i.state=e.CloseTag,this.stream.write("</"+r.name+">")):(i.state=e.CloseTag,this.stream.write(i.spaceBeforeSlash+"/>"));else if(!i.pretty||1!==h||l.type!==t.Text&&l.type!==t.Raw||null==l.value){for(this.stream.write(">"+this.endline(r,i,n)),i.state=e.InsideTag,p=0,u=(_=r.children).length;p<u;p++)a=_[p],this.writeChildNode(a,i,n+1);i.state=e.CloseTag,this.stream.write(this.indent(r,i,n)+"</"+r.name+">")}else this.stream.write(">"),i.state=e.InsideTag,i.suppressPrettyCount++,!0,this.writeChildNode(l,i,n+1),i.suppressPrettyCount--,!1,i.state=e.CloseTag,this.stream.write("</"+r.name+">");return this.stream.write(this.endline(r,i,n)),i.state=e.None,this.closeNode(r,i,n)},n.prototype.processingInstruction=function(t,e,r){return this.stream.write(n.__super__.processingInstruction.call(this,t,e,r))},n.prototype.raw=function(t,e,r){return this.stream.write(n.__super__.raw.call(this,t,e,r))},n.prototype.text=function(t,e,r){return this.stream.write(n.__super__.text.call(this,t,e,r))},n.prototype.dtdAttList=function(t,e,r){return this.stream.write(n.__super__.dtdAttList.call(this,t,e,r))},n.prototype.dtdElement=function(t,e,r){return this.stream.write(n.__super__.dtdElement.call(this,t,e,r))},n.prototype.dtdEntity=function(t,e,r){return this.stream.write(n.__super__.dtdEntity.call(this,t,e,r))},n.prototype.dtdNotation=function(t,e,r){return this.stream.write(n.__super__.dtdNotation.call(this,t,e,r))},n}()}).call(this);
},{"./NodeType":"Spt8","./XMLWriterBase":"zZia","./WriterState":"yEH9"}],"UDLs":[function(require,module,exports) {
(function(){var e,r,t,n,i,o,u,l,m,s;s=require("./Utility"),l=s.assign,m=s.isFunction,t=require("./XMLDOMImplementation"),n=require("./XMLDocument"),i=require("./XMLDocumentCB"),u=require("./XMLStringWriter"),o=require("./XMLStreamWriter"),e=require("./NodeType"),r=require("./WriterState"),module.exports.create=function(e,r,t,i){var o,u;if(null==e)throw new Error("Root element needs a name.");return i=l({},r,t,i),u=(o=new n(i)).element(e),i.headless||(o.declaration(i),null==i.pubID&&null==i.sysID||o.dtd(i)),u},module.exports.begin=function(e,r,t){var o;return m(e)&&(r=(o=[e,r])[0],t=o[1],e={}),r?new i(e,r,t):new n(e)},module.exports.stringWriter=function(e){return new u(e)},module.exports.streamWriter=function(e,r){return new o(e,r)},module.exports.implementation=new t,module.exports.nodeType=e,module.exports.writerState=r}).call(this);
},{"./Utility":"o5ai","./XMLDOMImplementation":"UNfk","./XMLDocument":"Om9o","./XMLDocumentCB":"OGnX","./XMLStringWriter":"UCvI","./XMLStreamWriter":"kZbG","./NodeType":"Spt8","./WriterState":"yEH9"}],"p8nd":[function(require,module,exports) {
function t(o){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(o)}(function(){"use strict";var o,e,r,i,n,s={}.hasOwnProperty;o=require("xmlbuilder"),e=require("./defaults").defaults,i=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},n=function(t){return"<![CDATA["+r(t)+"]]>"},r=function(t){return t.replace("]]>","]]]]><![CDATA[>")},exports.Builder=function(){function r(t){var o,r,i;for(o in this.options={},r=e[.2])s.call(r,o)&&(i=r[o],this.options[o]=i);for(o in t)s.call(t,o)&&(i=t[o],this.options[o]=i)}return r.prototype.buildObject=function(r){var l,a,f,u,p,c;return l=this.options.attrkey,a=this.options.charkey,1===Object.keys(r).length&&this.options.rootName===e[.2].rootName?r=r[p=Object.keys(r)[0]]:p=this.options.rootName,c=this,f=function(o,e){var r,u,p,y,h,d;if("object"!==t(e))c.options.cdata&&i(e)?o.raw(n(e)):o.txt(e);else if(Array.isArray(e)){for(y in e)if(s.call(e,y))for(h in u=e[y])p=u[h],o=f(o.ele(h),p).up()}else for(h in e)if(s.call(e,h))if(u=e[h],h===l){if("object"===t(u))for(r in u)d=u[r],o=o.att(r,d)}else if(h===a)o=c.options.cdata&&i(u)?o.raw(n(u)):o.txt(u);else if(Array.isArray(u))for(y in u)s.call(u,y)&&(o="string"==typeof(p=u[y])?c.options.cdata&&i(p)?o.ele(h).raw(n(p)).up():o.ele(h,p).up():f(o.ele(h),p).up());else"object"===t(u)?o=f(o.ele(h),u).up():"string"==typeof u&&c.options.cdata&&i(u)?o=o.ele(h).raw(n(u)).up():(null==u&&(u=""),o=o.ele(h,u.toString()).up());return o},u=o.create(p,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),f(u,r).end(this.options.renderOpts)},r}()}).call(this);
},{"xmlbuilder":"UDLs","./defaults":"pFLH"}],"AWqt":[function(require,module,exports) {
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":"Qqby"}],"YGMJ":[function(require,module,exports) {
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":"Y7Fs"}],"NFbE":[function(require,module,exports) {
module.exports=require("./readable").Transform;
},{"./readable":"Je3Q"}],"cD8w":[function(require,module,exports) {
module.exports=require("./readable").PassThrough;
},{"./readable":"Je3Q"}],"Y6i5":[function(require,module,exports) {
module.exports=n;var e=require("events").EventEmitter,r=require("inherits");function n(){e.call(this)}r(n,e),n.Readable=require("readable-stream/readable.js"),n.Writable=require("readable-stream/writable.js"),n.Duplex=require("readable-stream/duplex.js"),n.Transform=require("readable-stream/transform.js"),n.PassThrough=require("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(r,n){var o=this;function t(e){r.writable&&!1===r.write(e)&&o.pause&&o.pause()}function s(){o.readable&&o.resume&&o.resume()}o.on("data",t),r.on("drain",s),r._isStdio||n&&!1===n.end||(o.on("end",a),o.on("close",u));var i=!1;function a(){i||(i=!0,r.end())}function u(){i||(i=!0,"function"==typeof r.destroy&&r.destroy())}function d(r){if(l(),0===e.listenerCount(this,"error"))throw r}function l(){o.removeListener("data",t),r.removeListener("drain",s),o.removeListener("end",a),o.removeListener("close",u),o.removeListener("error",d),r.removeListener("error",d),o.removeListener("end",l),o.removeListener("close",l),r.removeListener("close",l)}return o.on("error",d),r.on("error",d),o.on("end",l),o.on("close",l),r.on("close",l),r.emit("pipe",o),r};
},{"events":"JzG9","inherits":"PigS","readable-stream/readable.js":"Je3Q","readable-stream/writable.js":"AWqt","readable-stream/duplex.js":"YGMJ","readable-stream/transform.js":"NFbE","readable-stream/passthrough.js":"cD8w"}],"YfFG":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;!function(e){e.parser=function(t,e){return new a(t,e)},e.SAXParser=a,e.SAXStream=n,e.createStream=function(t,e){return new n(t,e)},e.MAX_BUFFER_LENGTH=65536;var i,s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,i){if(!(this instanceof a))return new a(t,i);!function(t){for(var e=0,i=s.length;e<i;e++)t[s[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=i||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=b.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(l)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),O(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),a.prototype={end:function(){P(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return R(this,"Cannot write after close. Assign an onready handler.");if(null===t)return P(this);"object"==typeof t&&(t=t.toString());var i=0,a="";for(;a=V(t,i++),this.c=a,a;)switch(this.trackPosition&&(this.position++,"\n"===a?(this.line++,this.column=0):this.column++),this.state){case b.BEGIN:if(this.state=b.BEGIN_WHITESPACE,"\ufeff"===a)continue;M(this,a);continue;case b.BEGIN_WHITESPACE:M(this,a);continue;case b.TEXT:if(this.sawRoot&&!this.closedRoot){for(var r=i-1;a&&"<"!==a&&"&"!==a;)(a=V(t,i++))&&this.trackPosition&&(this.position++,"\n"===a?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(r,i-1)}"<"!==a||this.sawRoot&&this.closedRoot&&!this.strict?(N(a)||this.sawRoot&&!this.closedRoot||y(this,"Text data outside of root node."),"&"===a?this.state=b.TEXT_ENTITY:this.textNode+=a):(this.state=b.OPEN_WAKA,this.startTagPosition=this.position);continue;case b.SCRIPT:"<"===a?this.state=b.SCRIPT_ENDING:this.script+=a;continue;case b.SCRIPT_ENDING:"/"===a?this.state=b.CLOSE_TAG:(this.script+="<"+a,this.state=b.SCRIPT);continue;case b.OPEN_WAKA:if("!"===a)this.state=b.SGML_DECL,this.sgmlDecl="";else if(N(a));else if(d(T,a))this.state=b.OPEN_TAG,this.tagName=a;else if("/"===a)this.state=b.CLOSE_TAG,this.tagName="";else if("?"===a)this.state=b.PROC_INST,this.procInstName=this.procInstBody="";else{if(y(this,"Unencoded <"),this.startTagPosition+1<this.position){var n=this.position-this.startTagPosition;a=new Array(n).join(" ")+a}this.textNode+="<"+a,this.state=b.TEXT}continue;case b.SGML_DECL:(this.sgmlDecl+a).toUpperCase()===o?(F(this,"onopencdata"),this.state=b.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+a==="--"?(this.state=b.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+a).toUpperCase()===c?(this.state=b.DOCTYPE,(this.doctype||this.sawRoot)&&y(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===a?(F(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=b.TEXT):f(a)?(this.state=b.SGML_DECL_QUOTED,this.sgmlDecl+=a):this.sgmlDecl+=a;continue;case b.SGML_DECL_QUOTED:a===this.q&&(this.state=b.SGML_DECL,this.q=""),this.sgmlDecl+=a;continue;case b.DOCTYPE:">"===a?(this.state=b.TEXT,F(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=a,"["===a?this.state=b.DOCTYPE_DTD:f(a)&&(this.state=b.DOCTYPE_QUOTED,this.q=a));continue;case b.DOCTYPE_QUOTED:this.doctype+=a,a===this.q&&(this.q="",this.state=b.DOCTYPE);continue;case b.DOCTYPE_DTD:this.doctype+=a,"]"===a?this.state=b.DOCTYPE:f(a)&&(this.state=b.DOCTYPE_DTD_QUOTED,this.q=a);continue;case b.DOCTYPE_DTD_QUOTED:this.doctype+=a,a===this.q&&(this.state=b.DOCTYPE_DTD,this.q="");continue;case b.COMMENT:"-"===a?this.state=b.COMMENT_ENDING:this.comment+=a;continue;case b.COMMENT_ENDING:"-"===a?(this.state=b.COMMENT_ENDED,this.comment=v(this.opt,this.comment),this.comment&&F(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+a,this.state=b.COMMENT);continue;case b.COMMENT_ENDED:">"!==a?(y(this,"Malformed comment"),this.comment+="--"+a,this.state=b.COMMENT):this.state=b.TEXT;continue;case b.CDATA:"]"===a?this.state=b.CDATA_ENDING:this.cdata+=a;continue;case b.CDATA_ENDING:"]"===a?this.state=b.CDATA_ENDING_2:(this.cdata+="]"+a,this.state=b.CDATA);continue;case b.CDATA_ENDING_2:">"===a?(this.cdata&&F(this,"oncdata",this.cdata),F(this,"onclosecdata"),this.cdata="",this.state=b.TEXT):"]"===a?this.cdata+="]":(this.cdata+="]]"+a,this.state=b.CDATA);continue;case b.PROC_INST:"?"===a?this.state=b.PROC_INST_ENDING:N(a)?this.state=b.PROC_INST_BODY:this.procInstName+=a;continue;case b.PROC_INST_BODY:if(!this.procInstBody&&N(a))continue;"?"===a?this.state=b.PROC_INST_ENDING:this.procInstBody+=a;continue;case b.PROC_INST_ENDING:">"===a?(F(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=b.TEXT):(this.procInstBody+="?"+a,this.state=b.PROC_INST_BODY);continue;case b.OPEN_TAG:d(E,a)?this.tagName+=a:(L(this),">"===a?x(this):"/"===a?this.state=b.OPEN_TAG_SLASH:(N(a)||y(this,"Invalid character in tag name"),this.state=b.ATTRIB));continue;case b.OPEN_TAG_SLASH:">"===a?(x(this,!0),w(this)):(y(this,"Forward-slash in opening tag not followed by >"),this.state=b.ATTRIB);continue;case b.ATTRIB:if(N(a))continue;">"===a?x(this):"/"===a?this.state=b.OPEN_TAG_SLASH:d(T,a)?(this.attribName=a,this.attribValue="",this.state=b.ATTRIB_NAME):y(this,"Invalid attribute name");continue;case b.ATTRIB_NAME:"="===a?this.state=b.ATTRIB_VALUE:">"===a?(y(this,"Attribute without value"),this.attribValue=this.attribName,B(this),x(this)):N(a)?this.state=b.ATTRIB_NAME_SAW_WHITE:d(E,a)?this.attribName+=a:y(this,"Invalid attribute name");continue;case b.ATTRIB_NAME_SAW_WHITE:if("="===a)this.state=b.ATTRIB_VALUE;else{if(N(a))continue;y(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",F(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===a?x(this):d(T,a)?(this.attribName=a,this.state=b.ATTRIB_NAME):(y(this,"Invalid attribute name"),this.state=b.ATTRIB)}continue;case b.ATTRIB_VALUE:if(N(a))continue;f(a)?(this.q=a,this.state=b.ATTRIB_VALUE_QUOTED):(y(this,"Unquoted attribute value"),this.state=b.ATTRIB_VALUE_UNQUOTED,this.attribValue=a);continue;case b.ATTRIB_VALUE_QUOTED:if(a!==this.q){"&"===a?this.state=b.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=a;continue}B(this),this.q="",this.state=b.ATTRIB_VALUE_CLOSED;continue;case b.ATTRIB_VALUE_CLOSED:N(a)?this.state=b.ATTRIB:">"===a?x(this):"/"===a?this.state=b.OPEN_TAG_SLASH:d(T,a)?(y(this,"No whitespace between attributes"),this.attribName=a,this.attribValue="",this.state=b.ATTRIB_NAME):y(this,"Invalid attribute name");continue;case b.ATTRIB_VALUE_UNQUOTED:if(!_(a)){"&"===a?this.state=b.ATTRIB_VALUE_ENTITY_U:this.attribValue+=a;continue}B(this),">"===a?x(this):this.state=b.ATTRIB;continue;case b.CLOSE_TAG:if(this.tagName)">"===a?w(this):d(E,a)?this.tagName+=a:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=b.SCRIPT):(N(a)||y(this,"Invalid tagname in closing tag"),this.state=b.CLOSE_TAG_SAW_WHITE);else{if(N(a))continue;g(T,a)?this.script?(this.script+="</"+a,this.state=b.SCRIPT):y(this,"Invalid tagname in closing tag."):this.tagName=a}continue;case b.CLOSE_TAG_SAW_WHITE:if(N(a))continue;">"===a?w(this):y(this,"Invalid characters in closing tag");continue;case b.TEXT_ENTITY:case b.ATTRIB_VALUE_ENTITY_Q:case b.ATTRIB_VALUE_ENTITY_U:var u,h;switch(this.state){case b.TEXT_ENTITY:u=b.TEXT,h="textNode";break;case b.ATTRIB_VALUE_ENTITY_Q:u=b.ATTRIB_VALUE_QUOTED,h="attribValue";break;case b.ATTRIB_VALUE_ENTITY_U:u=b.ATTRIB_VALUE_UNQUOTED,h="attribValue"}";"===a?(this[h]+=G(this),this.entity="",this.state=u):d(this.entity.length?m:p,a)?this.entity+=a:(y(this,"Invalid character in entity name"),this[h]+="&"+this.entity+a,this.entity="",this.state=u);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var i=Math.max(e.MAX_BUFFER_LENGTH,10),a=0,r=0,n=s.length;r<n;r++){var o=t[s[r]].length;if(o>i)switch(s[r]){case"textNode":S(t);break;case"cdata":F(t,"oncdata",t.cdata),t.cdata="";break;case"script":F(t,"onscript",t.script),t.script="";break;default:R(t,"Max buffer length exceeded: "+s[r])}a=Math.max(a,o)}var c=e.MAX_BUFFER_LENGTH-a;t.bufferCheckPosition=c+t.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;S(t=this),""!==t.cdata&&(F(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(F(t,"onscript",t.script),t.script="")}};try{i=require("stream").Stream}catch(Y){i=function(){}}var r=e.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function n(t,e){if(!(this instanceof n))return new n(t,e);i.apply(this),this._parser=new a(t,e),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(t){s.emit("error",t),s._parser.error=null},this._decoder=null,r.forEach(function(t){Object.defineProperty(s,"on"+t,{get:function(){return s._parser["on"+t]},set:function(e){if(!e)return s.removeAllListeners(t),s._parser["on"+t]=e,e;s.on(t,e)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(i.prototype,{constructor:{value:n}}),n.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var i=require("string_decoder").StringDecoder;this._decoder=new i("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},n.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},n.prototype.on=function(t,e){var s=this;return s._parser["on"+t]||-1===r.indexOf(t)||(s._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),s.emit.apply(s,e)}),i.prototype.on.call(s,t,e)};var o="[CDATA[",c="DOCTYPE",u="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",l={xml:u,xmlns:h},T=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function f(t){return'"'===t||"'"===t}function _(t){return">"===t||N(t)}function d(t,e){return t.test(e)}function g(t,e){return!d(t,e)}var A,I,D,b=0;for(var C in e.STATE={BEGIN:b++,BEGIN_WHITESPACE:b++,TEXT:b++,TEXT_ENTITY:b++,OPEN_WAKA:b++,SGML_DECL:b++,SGML_DECL_QUOTED:b++,DOCTYPE:b++,DOCTYPE_QUOTED:b++,DOCTYPE_DTD:b++,DOCTYPE_DTD_QUOTED:b++,COMMENT_STARTING:b++,COMMENT:b++,COMMENT_ENDING:b++,COMMENT_ENDED:b++,CDATA:b++,CDATA_ENDING:b++,CDATA_ENDING_2:b++,PROC_INST:b++,PROC_INST_BODY:b++,PROC_INST_ENDING:b++,OPEN_TAG:b++,OPEN_TAG_SLASH:b++,ATTRIB:b++,ATTRIB_NAME:b++,ATTRIB_NAME_SAW_WHITE:b++,ATTRIB_VALUE:b++,ATTRIB_VALUE_QUOTED:b++,ATTRIB_VALUE_CLOSED:b++,ATTRIB_VALUE_UNQUOTED:b++,ATTRIB_VALUE_ENTITY_Q:b++,ATTRIB_VALUE_ENTITY_U:b++,CLOSE_TAG:b++,CLOSE_TAG_SAW_WHITE:b++,SCRIPT:b++,SCRIPT_ENDING:b++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var i=e.ENTITIES[t],s="number"==typeof i?String.fromCharCode(i):i;e.ENTITIES[t]=s}),e.STATE)e.STATE[e.STATE[C]]=C;function O(t,e,i){t[e]&&t[e](i)}function F(t,e,i){t.textNode&&S(t),O(t,e,i)}function S(t){t.textNode=v(t.opt,t.textNode),t.textNode&&O(t,"ontext",t.textNode),t.textNode=""}function v(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function R(t,e){return S(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,O(t,"onerror",e),t}function P(t){return t.sawRoot&&!t.closedRoot&&y(t,"Unclosed root tag"),t.state!==b.BEGIN&&t.state!==b.BEGIN_WHITESPACE&&t.state!==b.TEXT&&R(t,"Unexpected end"),S(t),t.c="",t.closed=!0,O(t,"onend"),a.call(t,t.strict,t.opt),t}function y(t,e){if("object"!=typeof t||!(t instanceof a))throw new Error("bad call to strictFail");t.strict&&R(t,e)}function L(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,F(t,"onopentagstart",i)}function U(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),s=i[0],a=i[1];return e&&"xmlns"===t&&(s="xmlns",a=""),{prefix:s,local:a}}function B(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=U(t.attribName,!0),i=e.prefix,s=e.local;if("xmlns"===i)if("xml"===s&&t.attribValue!==u)y(t,"xml: prefix must be bound to "+u+"\nActual: "+t.attribValue);else if("xmlns"===s&&t.attribValue!==h)y(t,"xmlns: prefix must be bound to "+h+"\nActual: "+t.attribValue);else{var a=t.tag,r=t.tags[t.tags.length-1]||t;a.ns===r.ns&&(a.ns=Object.create(r.ns)),a.ns[s]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,F(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function x(t,e){if(t.opt.xmlns){var i=t.tag,s=U(t.tagName);i.prefix=s.prefix,i.local=s.local,i.uri=i.ns[s.prefix]||"",i.prefix&&!i.uri&&(y(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=s.prefix);var a=t.tags[t.tags.length-1]||t;i.ns&&a.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){F(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var r=0,n=t.attribList.length;r<n;r++){var o=t.attribList[r],c=o[0],u=o[1],h=U(c,!0),l=h.prefix,T=h.local,E=""===l?"":i.ns[l]||"",p={name:c,value:u,prefix:l,local:T,uri:E};l&&"xmlns"!==l&&!E&&(y(t,"Unbound namespace prefix: "+JSON.stringify(l)),p.uri=l),t.tag.attributes[c]=p,F(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),F(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=b.TEXT:t.state=b.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function w(t){if(!t.tagName)return y(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=b.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=b.SCRIPT);F(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var s=i;e--;){if(t.tags[e].name===s)break;y(t,"Unexpected close tag")}if(e<0)return y(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=b.TEXT);t.tagName=i;for(var a=t.tags.length;a-- >e;){var r=t.tag=t.tags.pop();t.tagName=t.tag.name,F(t,"onclosetag",t.tagName);var n={};for(var o in r.ns)n[o]=r.ns[o];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&r.ns!==c.ns&&Object.keys(r.ns).forEach(function(e){var i=r.ns[e];F(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=b.TEXT}function G(t){var e,i=t.entity,s=i.toLowerCase(),a="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[s]?t.ENTITIES[s]:("#"===(i=s).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),a=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),a=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(e)||a.toLowerCase()!==i?(y(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function M(t,e){"<"===e?(t.state=b.OPEN_WAKA,t.startTagPosition=t.position):N(e)||(y(t,"Non-whitespace before first tag."),t.textNode=e,t.state=b.TEXT)}function V(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}b=e.STATE,String.fromCodePoint||(A=String.fromCharCode,I=Math.floor,D=function(){var t,e,i=[],s=-1,a=arguments.length;if(!a)return"";for(var r="";++s<a;){var n=Number(arguments[s]);if(!isFinite(n)||n<0||n>1114111||I(n)!==n)throw RangeError("Invalid code point: "+n);n<=65535?i.push(n):(t=55296+((n-=65536)>>10),e=n%1024+56320,i.push(t,e)),(s+1===a||i.length>16384)&&(r+=A.apply(null,i),i.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D)}("undefined"==typeof exports?this.sax={}:exports);
},{"stream":"Y6i5","string_decoder":"Lyvi","buffer":"XyCw"}],"fV0D":[function(require,module,exports) {
(function(){"use strict";exports.stripBOM=function(t){return"\ufeff"===t[0]?t.substring(1):t}}).call(this);
},{}],"qeZF":[function(require,module,exports) {
(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),exports.normalize=function(e){return e.toLowerCase()},exports.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},exports.stripPrefix=function(r){return r.replace(e,"")},exports.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},exports.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this);
},{}],"mpJl":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");!function(e,n){"use strict";if(!e.setImmediate){var a,s,o,c,i,r=1,f={},u=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},a=function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(s=l.documentElement,a=function(e){var t=l.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):a=function(e){setTimeout(m,0,e)}:(c="setImmediate$"+Math.random()+"$",i=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(c)&&m(+t.data.slice(c.length))},e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),a=function(t){e.postMessage(c+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var s={callback:e,args:t};return f[r]=s,a(r),r++},d.clearImmediate=g}function g(e){delete f[e]}function m(e){if(u)setTimeout(m,0,e);else{var t=f[e];if(t){u=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{g(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self);
},{"process":"kpD3"}],"SazG":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}exports.setTimeout=function(){return new o(i.call(setTimeout,t,arguments),clearTimeout)},exports.setInterval=function(){return new o(i.call(setInterval,t,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(t,this._id)},exports.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},exports.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},exports._unrefActive=exports.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},require("setimmediate"),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate;
},{"setimmediate":"mpJl"}],"VTgc":[function(require,module,exports) {
var process = require("process");
var t=require("process");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){"use strict";var t,s,e,i,n,o,a,h,p=function(t,r){return function(){return t.apply(r,arguments)}},c={}.hasOwnProperty;a=require("sax"),e=require("events"),t=require("./bom"),o=require("./processors"),h=require("timers").setImmediate,s=require("./defaults").defaults,i=function(t){return"object"===r(t)&&null!=t&&0===Object.keys(t).length},n=function(t,r,s){var e,i;for(e=0,i=t.length;e<i;e++)r=(0,t[e])(r,s);return r},exports.Parser=function(u){function l(t){var r,e,i;if(this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this),!(this instanceof exports.Parser))return new exports.Parser(t);for(r in this.options={},e=s[.2])c.call(e,r)&&(i=e[r],this.options[r]=i);for(r in t)c.call(t,r)&&(i=t[r],this.options[r]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return function(t,r){for(var s in r)c.call(r,s)&&(t[s]=r[s]);function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype}(l,e),l.prototype.processAsync=function(){var t,r;try{return this.remaining.length<=this.options.chunkSize?(t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close()):(t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),h(this.processAsync))}catch(s){if(r=s,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(r)}},l.prototype.assignOrPush=function(t,r,s){return r in t?(t[r]instanceof Array||(t[r]=[t[r]]),t[r].push(s)):this.options.explicitArray?t[r]=[s]:t[r]=s},l.prototype.reset=function(){var t,s,e,o,h;return this.removeAllListeners(),this.saxParser=a.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(h=this,function(t){if(h.saxParser.resume(),!h.saxParser.errThrown)return h.saxParser.errThrown=!0,h.emit("error",t)}),this.saxParser.onend=function(t){return function(){if(!t.saxParser.ended)return t.saxParser.ended=!0,t.emit("end",t.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,o=[],t=this.options.attrkey,s=this.options.charkey,this.saxParser.onopentag=function(r){return function(e){var i,a,h,p,u;if((h={})[s]="",!r.options.ignoreAttrs)for(i in u=e.attributes)c.call(u,i)&&(t in h||r.options.mergeAttrs||(h[t]={}),a=r.options.attrValueProcessors?n(r.options.attrValueProcessors,e.attributes[i],i):e.attributes[i],p=r.options.attrNameProcessors?n(r.options.attrNameProcessors,i):i,r.options.mergeAttrs?r.assignOrPush(h,p,a):h[t][p]=a);return h["#name"]=r.options.tagNameProcessors?n(r.options.tagNameProcessors,e.name):e.name,r.options.xmlns&&(h[r.options.xmlnskey]={uri:e.uri,local:e.local}),o.push(h)}}(this),this.saxParser.onclosetag=function(t){return function(){var e,a,h,p,u,l,m,f,y,P;if(l=o.pop(),u=l["#name"],t.options.explicitChildren&&t.options.preserveChildrenOrder||delete l["#name"],!0===l.cdata&&(e=l.cdata,delete l.cdata),y=o[o.length-1],l[s].match(/^\s*$/)&&!e?(a=l[s],delete l[s]):(t.options.trim&&(l[s]=l[s].trim()),t.options.normalize&&(l[s]=l[s].replace(/\s{2,}/g," ").trim()),l[s]=t.options.valueProcessors?n(t.options.valueProcessors,l[s],u):l[s],1===Object.keys(l).length&&s in l&&!t.EXPLICIT_CHARKEY&&(l=l[s])),i(l)&&(l=""!==t.options.emptyTag?t.options.emptyTag:a),null!=t.options.validator&&(P="/"+function(){var t,r,s;for(s=[],t=0,r=o.length;t<r;t++)p=o[t],s.push(p["#name"]);return s}().concat(u).join("/"),function(){var r;try{l=t.options.validator(P,y&&y[u],l)}catch(s){return r=s,t.emit("error",r)}}()),t.options.explicitChildren&&!t.options.mergeAttrs&&"object"===r(l))if(t.options.preserveChildrenOrder){if(y){for(h in y[t.options.childkey]=y[t.options.childkey]||[],m={},l)c.call(l,h)&&(m[h]=l[h]);y[t.options.childkey].push(m),delete l["#name"],1===Object.keys(l).length&&s in l&&!t.EXPLICIT_CHARKEY&&(l=l[s])}}else p={},t.options.attrkey in l&&(p[t.options.attrkey]=l[t.options.attrkey],delete l[t.options.attrkey]),!t.options.charsAsChildren&&t.options.charkey in l&&(p[t.options.charkey]=l[t.options.charkey],delete l[t.options.charkey]),Object.getOwnPropertyNames(l).length>0&&(p[t.options.childkey]=l),l=p;return o.length>0?t.assignOrPush(y,u,l):(t.options.explicitRoot&&(f=l,(l={})[u]=f),t.resultObject=l,t.saxParser.ended=!0,t.emit("end",t.resultObject))}}(this),e=function(t){return function(r){var e,i;if(i=o[o.length-1])return i[s]+=r,t.options.explicitChildren&&t.options.preserveChildrenOrder&&t.options.charsAsChildren&&(t.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(i[t.options.childkey]=i[t.options.childkey]||[],(e={"#name":"__text__"})[s]=r,t.options.normalize&&(e[s]=e[s].replace(/\s{2,}/g," ").trim()),i[t.options.childkey].push(e)),i}}(this),this.saxParser.ontext=e,this.saxParser.oncdata=function(t){var r;if(r=e(t))return r.cdata=!0}},l.prototype.parseString=function(r,s){var e;null!=s&&"function"==typeof s&&(this.on("end",function(t){return this.reset(),s(null,t)}),this.on("error",function(t){return this.reset(),s(t)}));try{return""===(r=r.toString()).trim()?(this.emit("end",null),!0):(r=t.stripBOM(r),this.options.async?(this.remaining=r,h(this.processAsync),this.saxParser):this.saxParser.write(r).close())}catch(i){if(e=i,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",e),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw e}},l.prototype.parseStringPromise=function(t){return new Promise((r=this,function(s,e){return r.parseString(t,function(t,r){return t?e(t):s(r)})}));var r},l}(),exports.parseString=function(t,s,e){var i,n;return null!=e?("function"==typeof e&&(i=e),"object"===r(s)&&(n=s)):("function"==typeof s&&(i=s),n={}),new exports.Parser(n).parseString(t,i)},exports.parseStringPromise=function(t,s){var e;return"object"===r(s)&&(e=s),new exports.Parser(e).parseStringPromise(t)}}).call(this);
},{"sax":"YfFG","events":"JzG9","./bom":"fV0D","./processors":"qeZF","timers":"SazG","./defaults":"pFLH","process":"kpD3"}],"Anea":[function(require,module,exports) {
(function(){"use strict";var r,e,t,s,o={}.hasOwnProperty;e=require("./defaults"),r=require("./builder"),t=require("./parser"),s=require("./processors"),exports.defaults=e.defaults,exports.processors=s,exports.ValidationError=function(r){function e(r){this.message=r}return function(r,e){for(var t in e)o.call(e,t)&&(r[t]=e[t]);function s(){this.constructor=r}s.prototype=e.prototype,r.prototype=new s,r.__super__=e.prototype}(e,Error),e}(),exports.Builder=r.Builder,exports.Parser=t.Parser,exports.parseString=t.parseString,exports.parseStringPromise=t.parseStringPromise}).call(this);
},{"./defaults":"pFLH","./builder":"p8nd","./parser":"VTgc","./processors":"qeZF"}],"Vxd3":[function(require,module,exports) {
const t=module.exports={};t.feed=[["author","creator"],["dc:publisher","publisher"],["dc:creator","creator"],["dc:source","source"],["dc:title","title"],["dc:type","type"],"title","description","author","pubDate","webMaster","managingEditor","generator","link","language","copyright","lastBuildDate","docs","generator","ttl","rating","skipHours","skipDays"],t.item=[["author","creator"],["dc:creator","creator"],["dc:date","date"],["dc:language","language"],["dc:rights","rights"],["dc:source","source"],["dc:title","title"],"title","link","pubDate","author","content:encoded","enclosure","dc:creator","dc:date","comments"];var e=function(t){return["itunes:"+t,t]};t.podcastFeed=["author","subtitle","summary","explicit"].map(e),t.podcastItem=["author","subtitle","summary","explicit","duration","image","episode","image","season","keywords"].map(e);
},{}],"XK3y":[function(require,module,exports) {
module.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};
},{}],"ExGN":[function(require,module,exports) {
module.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"};
},{}],"vNbn":[function(require,module,exports) {
var e=u(require("../maps/xml.json")),r=o(e);exports.XML=s(e,r);var n=u(require("../maps/entities.json")),t=o(n);function u(e){return Object.keys(e).sort().reduce(function(r,n){return r[e[n]]="&"+n+";",r},{})}function o(e){var r=[],n=[];return Object.keys(e).forEach(function(e){1===e.length?r.push("\\"+e):n.push(e)}),n.unshift("["+r.join("")+"]"),new RegExp(n.join("|"),"g")}exports.HTML=s(n,t);var c=/[^\0-\x7F]/g,a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function i(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}function p(e){return"&#x"+(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function s(e,r){function n(r){return e[r]}return function(e){return e.replace(r,n).replace(a,p).replace(c,i)}}var f=o(e);function h(e){return e.replace(f,i).replace(a,p).replace(c,i)}exports.escape=h;
},{"../maps/xml.json":"XK3y","../maps/entities.json":"ExGN"}],"erYB":[function(require,module,exports) {
module.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"};
},{}],"ENHQ":[function(require,module,exports) {
module.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376};
},{}],"FSTM":[function(require,module,exports) {
var r=require("../maps/decode.json");function e(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in r&&(e=r[e]);var o="";return e>65535&&(e-=65536,o+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),o+=String.fromCharCode(e)}module.exports=e;
},{"../maps/decode.json":"ENHQ"}],"MyV3":[function(require,module,exports) {
var r=require("../maps/entities.json"),e=require("../maps/legacy.json"),n=require("../maps/xml.json"),t=require("./decode_codepoint.js"),u=c(n),s=c(r);function c(r){var e=Object.keys(r).join("|"),n=a(r),t=new RegExp("&(?:"+(e+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(r){return String(r).replace(t,n)}}var i=function(){for(var n=Object.keys(e).sort(o),t=Object.keys(r).sort(o),u=0,s=0;u<t.length;u++)n[s]===t[u]?(t[u]+=";?",s++):t[u]+=";";var c=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),i=a(r);function f(r){return";"!==r.substr(-1)&&(r+=";"),i(r)}return function(r){return String(r).replace(c,f)}}();function o(r,e){return r<e?1:-1}function a(r){return function(e){return"#"===e.charAt(1)?"X"===e.charAt(2)||"x"===e.charAt(2)?t(parseInt(e.substr(3),16)):t(parseInt(e.substr(2),10)):r[e.slice(1,-1)]}}module.exports={XML:u,HTML:i,HTMLStrict:s};
},{"../maps/entities.json":"ExGN","../maps/legacy.json":"erYB","../maps/xml.json":"XK3y","./decode_codepoint.js":"FSTM"}],"yXMS":[function(require,module,exports) {
var e=require("./lib/encode.js"),o=require("./lib/decode.js");exports.decode=function(e,t){return(!t||t<=0?o.XML:o.HTML)(e)},exports.decodeStrict=function(e,t){return(!t||t<=0?o.XML:o.HTMLStrict)(e)},exports.encode=function(o,t){return(!t||t<=0?e.XML:e.HTML)(o)},exports.encodeXML=e.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=e.HTML,exports.decodeXML=exports.decodeXMLStrict=o.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=o.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=o.HTMLStrict,exports.escape=e.escape;
},{"./lib/encode.js":"vNbn","./lib/decode.js":"MyV3"}],"dLH5":[function(require,module,exports) {
const t=module.exports={},e=require("entities"),n=require("xml2js");t.stripHtml=function(t){return t.replace(/<(?:.|\n)*?>/gm,"")},t.getSnippet=function(n){return e.decode(t.stripHtml(n)).trim()},t.getLink=function(t,e,n){if(t){for(let n=0;n<t.length;++n)if(t[n].$.rel===e)return t[n].$.href;return t[n]?t[n].$.href:void 0}},t.getContent=function(t){if("string"==typeof t._)return t._;if("object"==typeof t){return new n.Builder({headless:!0,explicitRoot:!0,rootName:"div",renderOpts:{pretty:!1}}).buildObject(t)}return t},t.copyFromXML=function(t,e,n){n.forEach(function(n){let r=n,i=n,o={};Array.isArray(n)&&(r=n[0],i=n[1],n.length>2&&(o=n[2]));const{keepArray:u}=o;void 0!==t[r]&&(e[i]=u?t[r]:t[r][0]),e[i]&&"string"==typeof e[i]._&&(e[i]=e[i]._)})},t.maybePromisify=function(t,e){return t?e.then(e=>setTimeout(()=>t(null,e)),e=>setTimeout(()=>t(e))):e};const r="utf8",i=/(encoding|charset)\s*=\s*(\S+)/,o=["ascii","utf8","utf16le","ucs2","base64","latin1","binary","hex"],u={"utf-8":"utf8","iso-8859-1":"latin1"};t.getEncodingFromContentType=function(t){let e=((t=t||"").match(i)||[])[2]||"";return e=e.toLowerCase(),(e=u[e]||e)&&-1!==o.indexOf(e)||(e="utf8"),e};
},{"entities":"yXMS","xml2js":"Anea"}],"elrA":[function(require,module,exports) {
"use strict";const e=require("http"),t=require("https"),i=require("xml2js"),s=require("url"),n=require("./fields"),r=require("./utils"),o={"User-Agent":"rss-parser",Accept:"application/rss+xml"},a=5,u=6e4;class l{constructor(e={}){e.headers=e.headers||{},e.xml2js=e.xml2js||{},e.customFields=e.customFields||{},e.customFields.item=e.customFields.item||[],e.customFields.feed=e.customFields.feed||[],e.maxRedirects||(e.maxRedirects=a),e.timeout||(e.timeout=u),this.options=e,this.xmlParser=new i.Parser(this.options.xml2js)}parseString(e,t){let i=new Promise((t,i)=>{this.xmlParser.parseString(e,(e,s)=>{if(e)return i(e);if(!s)return i(new Error("Unable to parse XML."));let n=null;if(s.feed)n=this.buildAtomFeed(s);else if(s.rss&&s.rss.$&&s.rss.$.version&&s.rss.$.version.match(/^2/))n=this.buildRSS2(s);else if(s["rdf:RDF"])n=this.buildRSS1(s);else if(s.rss&&s.rss.$&&s.rss.$.version&&s.rss.$.version.match(/0\.9/))n=this.buildRSS0_9(s);else{if(!s.rss||!this.options.defaultRSS)return i(new Error("Feed not recognized as RSS 1 or 2."));switch(this.options.defaultRSS){case.9:n=this.buildRSS0_9(s);break;case 1:n=this.buildRSS1(s);break;case 2:n=this.buildRSS2(s);break;default:return i(new Error("default RSS version not recognized."))}}t(n)})});return i=r.maybePromisify(t,i)}parseURL(i,n,a=0){let u="",l=0===i.indexOf("https")?t.get:e.get,d=s.parse(i),m=Object.assign({},o,this.options.headers),h=new Promise((e,t)=>{let n=l({headers:m,auth:d.auth,protocol:d.protocol,hostname:d.hostname,port:d.port,path:d.path},n=>{if(this.options.maxRedirects&&n.statusCode>=300&&n.statusCode<400&&n.headers.location){if(a===this.options.maxRedirects)return t(new Error("Too many redirects"));{const r=s.resolve(i,n.headers.location);return this.parseURL(r,null,a+1).then(e,t)}}if(n.statusCode>=300)return t(new Error("Status code "+n.statusCode));let o=r.getEncodingFromContentType(n.headers["content-type"]);n.setEncoding(o),n.on("data",e=>{u+=e}),n.on("end",()=>this.parseString(u).then(e,t))});n.setTimeout(this.options.timeout,()=>t(new Error("Request timed out after "+this.options.timeout+"ms"))),n.on("error",t)});return h=r.maybePromisify(n,h)}buildAtomFeed(e){let t={items:[]};if(r.copyFromXML(e.feed,t,this.options.customFields.feed),e.feed.link&&(t.link=r.getLink(e.feed.link,"alternate",0),t.feedUrl=r.getLink(e.feed.link,"self",1)),e.feed.title){let i=e.feed.title[0]||"";i._&&(i=i._),i&&(t.title=i)}return e.feed.updated&&(t.lastBuildDate=e.feed.updated[0]),(e.feed.entry||[]).forEach(e=>{let i={};if(r.copyFromXML(e,i,this.options.customFields.item),e.title){let t=e.title[0]||"";t._&&(t=t._),t&&(i.title=t)}e.link&&e.link.length&&(i.link=r.getLink(e.link,"alternate",0)),e.published&&e.published.length&&e.published[0].length&&(i.pubDate=new Date(e.published[0]).toISOString()),!i.pubDate&&e.updated&&e.updated.length&&e.updated[0].length&&(i.pubDate=new Date(e.updated[0]).toISOString()),e.author&&e.author.length&&(i.author=e.author[0].name[0]),e.content&&e.content.length&&(i.content=r.getContent(e.content[0]),i.contentSnippet=r.getSnippet(i.content)),e.id&&(i.id=e.id[0]),this.setISODate(i),t.items.push(i)}),t}buildRSS0_9(e){var t=e.rss.channel[0],i=t.item;return this.buildRSS(t,i)}buildRSS1(e){let t=(e=e["rdf:RDF"]).channel[0],i=e.item;return this.buildRSS(t,i)}buildRSS2(e){let t=e.rss.channel[0],i=t.item,s=this.buildRSS(t,i);return e.rss.$&&e.rss.$["xmlns:itunes"]&&this.decorateItunes(s,t),s}buildRSS(e,t){t=t||[];let i={items:[]},s=n.feed.concat(this.options.customFields.feed),o=n.item.concat(this.options.customFields.item);if(e["atom:link"]&&e["atom:link"][0]&&e["atom:link"][0].$&&(i.feedUrl=e["atom:link"][0].$.href),e.image&&e.image[0]&&e.image[0].url){i.image={};let t=e.image[0];t.link&&(i.image.link=t.link[0]),t.url&&(i.image.url=t.url[0]),t.title&&(i.image.title=t.title[0]),t.width&&(i.image.width=t.width[0]),t.height&&(i.image.height=t.height[0])}return r.copyFromXML(e,i,s),t.forEach(e=>{let t={};r.copyFromXML(e,t,o),e.enclosure&&(t.enclosure=e.enclosure[0].$),e.description&&(t.content=r.getContent(e.description[0]),t.contentSnippet=r.getSnippet(t.content)),e.guid&&(t.guid=e.guid[0],t.guid._&&(t.guid=t.guid._)),e.category&&(t.categories=e.category),this.setISODate(t),i.items.push(t)}),i}decorateItunes(e,t){let i=t.item||[],s=[];if(e.itunes={},t["itunes:owner"]){let i={};t["itunes:owner"][0]["itunes:name"]&&(i.name=t["itunes:owner"][0]["itunes:name"][0]),t["itunes:owner"][0]["itunes:email"]&&(i.email=t["itunes:owner"][0]["itunes:email"][0]),e.itunes.owner=i}if(t["itunes:image"]){let i;(i=t["itunes:image"][0]&&t["itunes:image"][0].$&&t["itunes:image"][0].$.href?t["itunes:image"][0].$.href:null)&&(e.itunes.image=i)}if(t["itunes:category"]&&(t["itunes:category"].forEach(e=>{s.push(e.$.text)}),e.itunes.categories=s),t["itunes:keywords"]){let i=t["itunes:keywords"][0];i&&"string"==typeof i._&&(i=i._),i&&(e.itunes.keywords=i.split(","))}r.copyFromXML(t,e.itunes,n.podcastFeed),i.forEach((t,i)=>{let s=e.items[i];s.itunes={},r.copyFromXML(t,s.itunes,n.podcastItem);let o=t["itunes:image"];o&&o[0]&&o[0].$&&o[0].$.href&&(s.itunes.image=o[0].$.href)})}setISODate(e){let t=e.pubDate||e.date;if(t)try{e.isoDate=new Date(t.trim()).toISOString()}catch(i){}}}module.exports=l;
},{"http":"dCGn","https":"KYTg","xml2js":"Anea","url":"ss6L","./fields":"Vxd3","./utils":"dLH5"}],"TxJl":[function(require,module,exports) {
"use strict";module.exports=require("./lib/parser");
},{"./lib/parser":"elrA"}],"Ztrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("preact"),t=n(require("rss-parser"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}require("./news.scss");var p=function(n){function r(){var e;o(this,r),(e=i(this,c(r).call(this))).state={news:[]};return(new t.default).parseURL("https://cors-anywhere.herokuapp.com/https://rsshub.app/telegram/channel/nCoV2019",function(t,n){if(t)throw t;e.setState({news:n.items})}),e}return f(r,e.Component),s(r,[{key:"render",value:function(t,n){return(0,e.h)("div",{className:"newsContent"},(0,e.h)("div",{className:"newsList"},n.news.map(function(t,n){return(0,e.h)("div",{key:n,className:"newsItem"},(0,e.h)("div",{className:"content",dangerouslySetInnerHTML:{__html:t.content}}),(0,e.h)("div",{className:"pubDate"},t.pubDate))})),(0,e.h)("div",null,"数据来源：",(0,e.h)("a",{href:"https://t.me/s/nCoV2019"},"2019-nCoV疫情实时播报🅥")))}}]),r}();exports.default=p;
},{"preact":"aSor","rss-parser":"TxJl","./news.scss":"aYep"}],"JR1z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("preact"),t=require("./totalCases"),n=require("./renderLayer"),r=o(require("./news"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(f){return void n(f)}a.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){u(i,r,o,a,c,"next",e)}function c(e){u(i,r,o,a,c,"throw",e)}a(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}require("./app.scss");var m=function(o){function i(){var e;return c(this,i),(e=l(this,d(i).call(this))).state={mainInfo:""},fetch("//api.tianapi.com/txapi/ncov/index?key=ad031245a5518179cd62d16e5c18eea0").then(function(e){return e.json()}).then(function(t){return e.setState({mainInfo:t.newslist[0].desc})}),e}return h(i,e.Component),s(i,[{key:"componentDidMount",value:function(){(0,t.renderLiner)(),(0,n.renderLayer)()}},{key:"search",value:function(){var e=a(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.setState({word:"",definition:""}),e.abrupt("return");case 3:if(n){e.next=8;break}return e.next=6,this.state.lookup.getWordList(t.trim());case 6:r=e.sent,t===r[0]&&(n=r[0].offset);case 8:if(!n){e.next=16;break}return e.t0=this,e.t1=t,e.next=13,this.state.lookup.getDefinition(n);case 13:e.t2=e.sent,e.t3={word:e.t1,definition:e.t2},e.t0.setState.call(e.t0,e.t3);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(t,n){return(0,e.h)("div",null,(0,e.h)("div",{className:"top"},n.mainInfo?(0,e.h)("section",null,(0,e.h)("h2",null,"确诊 ",n.mainInfo.confirmedCount),(0,e.h)("h2",null,"疑似 ",n.mainInfo.suspectedCount),(0,e.h)("h2",null,"治愈 ",n.mainInfo.curedCount),(0,e.h)("h2",null,"死亡 ",n.mainInfo.deadCount),(0,e.h)("div",null,"更新时间：",new Date(n.mainInfo.modifyTime).toLocaleString())):"",(0,e.h)("div",{id:"c1"},(0,e.h)("div",{className:"tip"},"⚠︎ 注意：接口不同数据可能存在滞后"))),(0,e.h)("div",{id:"map"}),(0,e.h)(r.default,null))}}]),i}();exports.default=m;
},{"preact":"aSor","./totalCases":"Qa38","./renderLayer":"mlDL","./news":"Ztrv","./app.scss":"aYep"}],"Focm":[function(require,module,exports) {
"use strict";require("whatwg-fetch");var e=require("preact"),r=t(require("./component/app"));function t(e){return e&&e.__esModule?e:{default:e}}(0,e.render)((0,e.h)(r.default,null),document.querySelector("main"));
},{"whatwg-fetch":"MCp7","preact":"aSor","./component/app":"JR1z"}]},{},["Focm"], null)